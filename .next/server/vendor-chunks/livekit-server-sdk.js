"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/livekit-server-sdk";
exports.ids = ["vendor-chunks/livekit-server-sdk"];
exports.modules = {

/***/ "(ssr)/./node_modules/livekit-server-sdk/dist/AccessToken.js":
/*!*************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/AccessToken.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.TokenVerifier = exports.AccessToken = void 0;\nconst jwt = __importStar(__webpack_require__(/*! jsonwebtoken */ \"(ssr)/./node_modules/jsonwebtoken/index.js\"));\n// 6 hours\nconst defaultTTL = 6 * 60 * 60;\nclass AccessToken {\n    /**\n     * Creates a new AccessToken\n     * @param apiKey API Key, can be set in env LIVEKIT_API_KEY\n     * @param apiSecret Secret, can be set in env LIVEKIT_API_SECRET\n     */\n    constructor(apiKey, apiSecret, options) {\n        if (!apiKey) {\n            apiKey = process.env.LIVEKIT_API_KEY;\n        }\n        if (!apiSecret) {\n            apiSecret = process.env.LIVEKIT_API_SECRET;\n        }\n        if (!apiKey || !apiSecret) {\n            throw Error('api-key and api-secret must be set');\n        }\n        else if (typeof document !== 'undefined') {\n            // check against document rather than window because deno provides window\n            console.error('You should not include your API secret in your web client bundle.\\n\\n' +\n                'Your web client should request a token from your backend server which should then use ' +\n                'the API secret to generate a token. See https://docs.livekit.io/client/connect/');\n        }\n        this.apiKey = apiKey;\n        this.apiSecret = apiSecret;\n        this.grants = {};\n        this.identity = options === null || options === void 0 ? void 0 : options.identity;\n        this.ttl = (options === null || options === void 0 ? void 0 : options.ttl) || defaultTTL;\n        if (options === null || options === void 0 ? void 0 : options.metadata) {\n            this.metadata = options.metadata;\n        }\n        if (options === null || options === void 0 ? void 0 : options.name) {\n            this.name = options.name;\n        }\n    }\n    /**\n     * Adds a video grant to this token.\n     * @param grant\n     */\n    addGrant(grant) {\n        this.grants.video = grant;\n    }\n    /**\n     * Set metadata to be passed to the Participant, used only when joining the room\n     */\n    set metadata(md) {\n        this.grants.metadata = md;\n    }\n    set name(name) {\n        this.grants.name = name;\n    }\n    get sha256() {\n        return this.grants.sha256;\n    }\n    set sha256(sha) {\n        this.grants.sha256 = sha;\n    }\n    /**\n     * @returns JWT encoded token\n     */\n    toJwt() {\n        // TODO: check for video grant validity\n        var _a;\n        const opts = {\n            issuer: this.apiKey,\n            expiresIn: this.ttl,\n            notBefore: 0,\n        };\n        if (this.identity) {\n            opts.subject = this.identity;\n            opts.jwtid = this.identity;\n        }\n        else if ((_a = this.grants.video) === null || _a === void 0 ? void 0 : _a.roomJoin) {\n            throw Error('identity is required for join but not set');\n        }\n        return jwt.sign(this.grants, this.apiSecret, opts);\n    }\n}\nexports.AccessToken = AccessToken;\nclass TokenVerifier {\n    constructor(apiKey, apiSecret) {\n        this.apiKey = apiKey;\n        this.apiSecret = apiSecret;\n    }\n    verify(token) {\n        const decoded = jwt.verify(token, this.apiSecret, { issuer: this.apiKey });\n        if (!decoded) {\n            throw Error('invalid token');\n        }\n        return decoded;\n    }\n}\nexports.TokenVerifier = TokenVerifier;\n//# sourceMappingURL=AccessToken.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvQWNjZXNzVG9rZW4uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0EsbUNBQW1DLG9DQUFvQyxnQkFBZ0I7QUFDdkYsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSwwQ0FBMEMsNEJBQTRCO0FBQ3RFLENBQUM7QUFDRDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxxQkFBcUIsR0FBRyxtQkFBbUI7QUFDM0MseUJBQXlCLG1CQUFPLENBQUMsZ0VBQWM7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELHFCQUFxQjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saXZlc3RyZWFtLy4vbm9kZV9tb2R1bGVzL2xpdmVraXQtc2VydmVyLXNkay9kaXN0L0FjY2Vzc1Rva2VuLmpzP2QyNWUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVG9rZW5WZXJpZmllciA9IGV4cG9ydHMuQWNjZXNzVG9rZW4gPSB2b2lkIDA7XG5jb25zdCBqd3QgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcImpzb253ZWJ0b2tlblwiKSk7XG4vLyA2IGhvdXJzXG5jb25zdCBkZWZhdWx0VFRMID0gNiAqIDYwICogNjA7XG5jbGFzcyBBY2Nlc3NUb2tlbiB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBBY2Nlc3NUb2tlblxuICAgICAqIEBwYXJhbSBhcGlLZXkgQVBJIEtleSwgY2FuIGJlIHNldCBpbiBlbnYgTElWRUtJVF9BUElfS0VZXG4gICAgICogQHBhcmFtIGFwaVNlY3JldCBTZWNyZXQsIGNhbiBiZSBzZXQgaW4gZW52IExJVkVLSVRfQVBJX1NFQ1JFVFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGFwaUtleSwgYXBpU2VjcmV0LCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghYXBpS2V5KSB7XG4gICAgICAgICAgICBhcGlLZXkgPSBwcm9jZXNzLmVudi5MSVZFS0lUX0FQSV9LRVk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhcGlTZWNyZXQpIHtcbiAgICAgICAgICAgIGFwaVNlY3JldCA9IHByb2Nlc3MuZW52LkxJVkVLSVRfQVBJX1NFQ1JFVDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFwaUtleSB8fCAhYXBpU2VjcmV0KSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcignYXBpLWtleSBhbmQgYXBpLXNlY3JldCBtdXN0IGJlIHNldCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIC8vIGNoZWNrIGFnYWluc3QgZG9jdW1lbnQgcmF0aGVyIHRoYW4gd2luZG93IGJlY2F1c2UgZGVubyBwcm92aWRlcyB3aW5kb3dcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1lvdSBzaG91bGQgbm90IGluY2x1ZGUgeW91ciBBUEkgc2VjcmV0IGluIHlvdXIgd2ViIGNsaWVudCBidW5kbGUuXFxuXFxuJyArXG4gICAgICAgICAgICAgICAgJ1lvdXIgd2ViIGNsaWVudCBzaG91bGQgcmVxdWVzdCBhIHRva2VuIGZyb20geW91ciBiYWNrZW5kIHNlcnZlciB3aGljaCBzaG91bGQgdGhlbiB1c2UgJyArXG4gICAgICAgICAgICAgICAgJ3RoZSBBUEkgc2VjcmV0IHRvIGdlbmVyYXRlIGEgdG9rZW4uIFNlZSBodHRwczovL2RvY3MubGl2ZWtpdC5pby9jbGllbnQvY29ubmVjdC8nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcbiAgICAgICAgdGhpcy5hcGlTZWNyZXQgPSBhcGlTZWNyZXQ7XG4gICAgICAgIHRoaXMuZ3JhbnRzID0ge307XG4gICAgICAgIHRoaXMuaWRlbnRpdHkgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaWRlbnRpdHk7XG4gICAgICAgIHRoaXMudHRsID0gKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy50dGwpIHx8IGRlZmF1bHRUVEw7XG4gICAgICAgIGlmIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubWV0YWRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMubWV0YWRhdGEgPSBvcHRpb25zLm1ldGFkYXRhO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubmFtZSkge1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gb3B0aW9ucy5uYW1lO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSB2aWRlbyBncmFudCB0byB0aGlzIHRva2VuLlxuICAgICAqIEBwYXJhbSBncmFudFxuICAgICAqL1xuICAgIGFkZEdyYW50KGdyYW50KSB7XG4gICAgICAgIHRoaXMuZ3JhbnRzLnZpZGVvID0gZ3JhbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBtZXRhZGF0YSB0byBiZSBwYXNzZWQgdG8gdGhlIFBhcnRpY2lwYW50LCB1c2VkIG9ubHkgd2hlbiBqb2luaW5nIHRoZSByb29tXG4gICAgICovXG4gICAgc2V0IG1ldGFkYXRhKG1kKSB7XG4gICAgICAgIHRoaXMuZ3JhbnRzLm1ldGFkYXRhID0gbWQ7XG4gICAgfVxuICAgIHNldCBuYW1lKG5hbWUpIHtcbiAgICAgICAgdGhpcy5ncmFudHMubmFtZSA9IG5hbWU7XG4gICAgfVxuICAgIGdldCBzaGEyNTYoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdyYW50cy5zaGEyNTY7XG4gICAgfVxuICAgIHNldCBzaGEyNTYoc2hhKSB7XG4gICAgICAgIHRoaXMuZ3JhbnRzLnNoYTI1NiA9IHNoYTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgSldUIGVuY29kZWQgdG9rZW5cbiAgICAgKi9cbiAgICB0b0p3dCgpIHtcbiAgICAgICAgLy8gVE9ETzogY2hlY2sgZm9yIHZpZGVvIGdyYW50IHZhbGlkaXR5XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3Qgb3B0cyA9IHtcbiAgICAgICAgICAgIGlzc3VlcjogdGhpcy5hcGlLZXksXG4gICAgICAgICAgICBleHBpcmVzSW46IHRoaXMudHRsLFxuICAgICAgICAgICAgbm90QmVmb3JlOiAwLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5pZGVudGl0eSkge1xuICAgICAgICAgICAgb3B0cy5zdWJqZWN0ID0gdGhpcy5pZGVudGl0eTtcbiAgICAgICAgICAgIG9wdHMuand0aWQgPSB0aGlzLmlkZW50aXR5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKChfYSA9IHRoaXMuZ3JhbnRzLnZpZGVvKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eucm9vbUpvaW4pIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdpZGVudGl0eSBpcyByZXF1aXJlZCBmb3Igam9pbiBidXQgbm90IHNldCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBqd3Quc2lnbih0aGlzLmdyYW50cywgdGhpcy5hcGlTZWNyZXQsIG9wdHMpO1xuICAgIH1cbn1cbmV4cG9ydHMuQWNjZXNzVG9rZW4gPSBBY2Nlc3NUb2tlbjtcbmNsYXNzIFRva2VuVmVyaWZpZXIge1xuICAgIGNvbnN0cnVjdG9yKGFwaUtleSwgYXBpU2VjcmV0KSB7XG4gICAgICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xuICAgICAgICB0aGlzLmFwaVNlY3JldCA9IGFwaVNlY3JldDtcbiAgICB9XG4gICAgdmVyaWZ5KHRva2VuKSB7XG4gICAgICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCB0aGlzLmFwaVNlY3JldCwgeyBpc3N1ZXI6IHRoaXMuYXBpS2V5IH0pO1xuICAgICAgICBpZiAoIWRlY29kZWQpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdpbnZhbGlkIHRva2VuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlY29kZWQ7XG4gICAgfVxufVxuZXhwb3J0cy5Ub2tlblZlcmlmaWVyID0gVG9rZW5WZXJpZmllcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFjY2Vzc1Rva2VuLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/livekit-server-sdk/dist/AccessToken.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/livekit-server-sdk/dist/EgressClient.js":
/*!**************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/EgressClient.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.EgressClient = void 0;\nconst livekit_egress_1 = __webpack_require__(/*! ./proto/livekit_egress */ \"(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_egress.js\");\nconst ServiceBase_1 = __importDefault(__webpack_require__(/*! ./ServiceBase */ \"(ssr)/./node_modules/livekit-server-sdk/dist/ServiceBase.js\"));\nconst TwirpRPC_1 = __webpack_require__(/*! ./TwirpRPC */ \"(ssr)/./node_modules/livekit-server-sdk/dist/TwirpRPC.js\");\nconst svc = 'Egress';\n/**\n * Client to access Egress APIs\n */\nclass EgressClient extends ServiceBase_1.default {\n    /**\n     * @param host hostname including protocol. i.e. 'https://cluster.livekit.io'\n     * @param apiKey API Key, can be set in env var LIVEKIT_API_KEY\n     * @param secret API Secret, can be set in env var LIVEKIT_API_SECRET\n     */\n    constructor(host, apiKey, secret) {\n        super(apiKey, secret);\n        this.rpc = new TwirpRPC_1.TwirpRpc(host, TwirpRPC_1.livekitPackage);\n    }\n    startRoomCompositeEgress(roomName, output, optsOrLayout, options, audioOnly, videoOnly, customBaseUrl) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let layout;\n            if (optsOrLayout !== undefined) {\n                if (typeof optsOrLayout === 'string') {\n                    layout = optsOrLayout;\n                }\n                else {\n                    const opts = optsOrLayout;\n                    layout = opts.layout;\n                    options = opts.encodingOptions;\n                    audioOnly = opts.audioOnly;\n                    videoOnly = opts.videoOnly;\n                    customBaseUrl = opts.customBaseUrl;\n                }\n            }\n            layout !== null && layout !== void 0 ? layout : (layout = '');\n            audioOnly !== null && audioOnly !== void 0 ? audioOnly : (audioOnly = false);\n            videoOnly !== null && videoOnly !== void 0 ? videoOnly : (videoOnly = false);\n            customBaseUrl !== null && customBaseUrl !== void 0 ? customBaseUrl : (customBaseUrl = '');\n            const { file, stream, segments, preset, advanced, fileOutputs, streamOutputs, segmentOutputs } = this.getOutputParams(output, options);\n            const req = livekit_egress_1.RoomCompositeEgressRequest.toJSON({\n                roomName,\n                layout,\n                audioOnly,\n                videoOnly,\n                customBaseUrl,\n                file,\n                stream,\n                segments,\n                preset,\n                advanced,\n                fileOutputs,\n                streamOutputs,\n                segmentOutputs,\n            });\n            const data = yield this.rpc.request(svc, 'StartRoomCompositeEgress', req, this.authHeader({ roomRecord: true }));\n            return livekit_egress_1.EgressInfo.fromJSON(data);\n        });\n    }\n    /**\n     * @param url url\n     * @param output file or stream output\n     * @param opts WebOptions\n     */\n    startWebEgress(url, output, opts) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const audioOnly = (opts === null || opts === void 0 ? void 0 : opts.audioOnly) || false;\n            const videoOnly = (opts === null || opts === void 0 ? void 0 : opts.videoOnly) || false;\n            const awaitStartSignal = (opts === null || opts === void 0 ? void 0 : opts.awaitStartSignal) || false;\n            const { file, stream, segments, preset, advanced, fileOutputs, streamOutputs, segmentOutputs } = this.getOutputParams(output, opts === null || opts === void 0 ? void 0 : opts.encodingOptions);\n            const req = livekit_egress_1.WebEgressRequest.toJSON({\n                url,\n                audioOnly,\n                videoOnly,\n                awaitStartSignal,\n                file,\n                stream,\n                segments,\n                preset,\n                advanced,\n                fileOutputs,\n                streamOutputs,\n                segmentOutputs,\n            });\n            const data = yield this.rpc.request(svc, 'StartWebEgress', req, this.authHeader({ roomRecord: true }));\n            return livekit_egress_1.EgressInfo.fromJSON(data);\n        });\n    }\n    /**\n     * Export a participant's audio and video tracks,\n     *\n     * @param roomName room name\n     * @param output one or more outputs\n     * @param opts ParticipantEgressOptions\n     */\n    startParticipantEgress(roomName, identity, output, opts) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { preset, advanced, fileOutputs, streamOutputs, segmentOutputs } = this.getOutputParams(output, opts === null || opts === void 0 ? void 0 : opts.encodingOptions);\n            const req = livekit_egress_1.ParticipantEgressRequest.toJSON({\n                roomName,\n                identity,\n                preset,\n                advanced,\n                fileOutputs,\n                streamOutputs,\n                segmentOutputs,\n            });\n            const data = yield this.rpc.request(svc, 'StartParticipantEgress', req, this.authHeader({ roomRecord: true }));\n            return livekit_egress_1.EgressInfo.fromJSON(data);\n        });\n    }\n    startTrackCompositeEgress(roomName, output, optsOrAudioTrackId, videoTrackId, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let audioTrackId;\n            if (optsOrAudioTrackId !== undefined) {\n                if (typeof optsOrAudioTrackId === 'string') {\n                    audioTrackId = optsOrAudioTrackId;\n                }\n                else {\n                    const opts = optsOrAudioTrackId;\n                    audioTrackId = opts.audioTrackId;\n                    videoTrackId = opts.videoTrackId;\n                    options = opts.encodingOptions;\n                }\n            }\n            audioTrackId !== null && audioTrackId !== void 0 ? audioTrackId : (audioTrackId = '');\n            videoTrackId !== null && videoTrackId !== void 0 ? videoTrackId : (videoTrackId = '');\n            const { file, stream, segments, preset, advanced, fileOutputs, streamOutputs, segmentOutputs } = this.getOutputParams(output, options);\n            const req = livekit_egress_1.TrackCompositeEgressRequest.toJSON({\n                roomName,\n                audioTrackId,\n                videoTrackId,\n                file,\n                stream,\n                segments,\n                preset,\n                advanced,\n                fileOutputs,\n                streamOutputs,\n                segmentOutputs,\n            });\n            const data = yield this.rpc.request(svc, 'StartTrackCompositeEgress', req, this.authHeader({ roomRecord: true }));\n            return livekit_egress_1.EgressInfo.fromJSON(data);\n        });\n    }\n    isEncodedOutputs(output) {\n        return (output.file !== undefined ||\n            output.stream !== undefined ||\n            output.segments !== undefined);\n    }\n    isEncodedFileOutput(output) {\n        return (output.filepath !== undefined ||\n            output.fileType !== undefined);\n    }\n    isSegmentedFileOutput(output) {\n        return (output.filenamePrefix !== undefined ||\n            output.playlistName !== undefined ||\n            output.filenameSuffix !== undefined);\n    }\n    isStreamOutput(output) {\n        return (output.protocol !== undefined || output.urls !== undefined);\n    }\n    getOutputParams(output, options) {\n        let file;\n        let fileOutputs;\n        let stream;\n        let streamOutputs;\n        let segments;\n        let segmentOutputs;\n        let preset;\n        let advanced;\n        if (this.isEncodedOutputs(output)) {\n            if (output.file !== undefined) {\n                fileOutputs = [output.file];\n            }\n            if (output.stream !== undefined) {\n                streamOutputs = [output.stream];\n            }\n            if (output.segments !== undefined) {\n                segmentOutputs = [output.segments];\n            }\n        }\n        else if (this.isEncodedFileOutput(output)) {\n            file = output;\n            fileOutputs = [file];\n        }\n        else if (this.isSegmentedFileOutput(output)) {\n            segments = output;\n            segmentOutputs = [segments];\n        }\n        else if (this.isStreamOutput(output)) {\n            stream = output;\n            streamOutputs = [stream];\n        }\n        if (options) {\n            if (typeof options === 'number') {\n                preset = options;\n            }\n            else {\n                advanced = options;\n            }\n        }\n        return { file, stream, segments, preset, advanced, fileOutputs, streamOutputs, segmentOutputs };\n    }\n    /**\n     * @param roomName room name\n     * @param output file or websocket output\n     * @param trackId track Id\n     */\n    startTrackEgress(roomName, output, trackId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let file;\n            let websocketUrl;\n            if (typeof output === 'string') {\n                websocketUrl = output;\n            }\n            else {\n                file = output;\n            }\n            const req = livekit_egress_1.TrackEgressRequest.toJSON({\n                roomName,\n                trackId,\n                file,\n                websocketUrl,\n            });\n            const data = yield this.rpc.request(svc, 'StartTrackEgress', req, this.authHeader({ roomRecord: true }));\n            return livekit_egress_1.EgressInfo.fromJSON(data);\n        });\n    }\n    /**\n     * @param egressId\n     * @param layout\n     */\n    updateLayout(egressId, layout) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = yield this.rpc.request(svc, 'UpdateLayout', livekit_egress_1.UpdateLayoutRequest.toJSON({ egressId, layout }), this.authHeader({ roomRecord: true }));\n            return livekit_egress_1.EgressInfo.fromJSON(data);\n        });\n    }\n    /**\n     * @param egressId\n     * @param addOutputUrls\n     * @param removeOutputUrls\n     */\n    updateStream(egressId, addOutputUrls, removeOutputUrls) {\n        return __awaiter(this, void 0, void 0, function* () {\n            addOutputUrls !== null && addOutputUrls !== void 0 ? addOutputUrls : (addOutputUrls = []);\n            removeOutputUrls !== null && removeOutputUrls !== void 0 ? removeOutputUrls : (removeOutputUrls = []);\n            const data = yield this.rpc.request(svc, 'UpdateStream', livekit_egress_1.UpdateStreamRequest.toJSON({ egressId, addOutputUrls, removeOutputUrls }), this.authHeader({ roomRecord: true }));\n            return livekit_egress_1.EgressInfo.fromJSON(data);\n        });\n    }\n    /**\n     * @param roomName list egress for one room only\n     */\n    listEgress(options) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            let req = {};\n            if (typeof options === 'string') {\n                req.roomName = options;\n            }\n            else if (options !== undefined) {\n                req = options;\n            }\n            const data = yield this.rpc.request(svc, 'ListEgress', livekit_egress_1.ListEgressRequest.toJSON(req), this.authHeader({ roomRecord: true }));\n            return (_a = livekit_egress_1.ListEgressResponse.fromJSON(data).items) !== null && _a !== void 0 ? _a : [];\n        });\n    }\n    /**\n     * @param egressId\n     */\n    stopEgress(egressId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = yield this.rpc.request(svc, 'StopEgress', livekit_egress_1.StopEgressRequest.toJSON({ egressId }), this.authHeader({ roomRecord: true }));\n            return livekit_egress_1.EgressInfo.fromJSON(data);\n        });\n    }\n}\nexports.EgressClient = EgressClient;\n//# sourceMappingURL=EgressClient.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvRWdyZXNzQ2xpZW50LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELG9CQUFvQjtBQUNwQix5QkFBeUIsbUJBQU8sQ0FBQyxvR0FBd0I7QUFDekQsc0NBQXNDLG1CQUFPLENBQUMsa0ZBQWU7QUFDN0QsbUJBQW1CLG1CQUFPLENBQUMsNEVBQVk7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsdUZBQXVGO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2Isd0dBQXdHLGtCQUFrQjtBQUMxSDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHVGQUF1RjtBQUMzRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYiw4RkFBOEYsa0JBQWtCO0FBQ2hIO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLCtEQUErRDtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLHNHQUFzRyxrQkFBa0I7QUFDeEg7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix1RkFBdUY7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLHlHQUF5RyxrQkFBa0I7QUFDM0g7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLGdHQUFnRyxrQkFBa0I7QUFDbEg7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtSEFBbUgsa0JBQWtCLHFCQUFxQixrQkFBa0I7QUFDNUs7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtSEFBbUgsMkNBQTJDLHFCQUFxQixrQkFBa0I7QUFDck07QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFJQUFxSSxrQkFBa0I7QUFDdko7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0dBQStHLFVBQVUscUJBQXFCLGtCQUFrQjtBQUNoSztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGl2ZXN0cmVhbS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9FZ3Jlc3NDbGllbnQuanM/MDc5MiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5FZ3Jlc3NDbGllbnQgPSB2b2lkIDA7XG5jb25zdCBsaXZla2l0X2VncmVzc18xID0gcmVxdWlyZShcIi4vcHJvdG8vbGl2ZWtpdF9lZ3Jlc3NcIik7XG5jb25zdCBTZXJ2aWNlQmFzZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1NlcnZpY2VCYXNlXCIpKTtcbmNvbnN0IFR3aXJwUlBDXzEgPSByZXF1aXJlKFwiLi9Ud2lycFJQQ1wiKTtcbmNvbnN0IHN2YyA9ICdFZ3Jlc3MnO1xuLyoqXG4gKiBDbGllbnQgdG8gYWNjZXNzIEVncmVzcyBBUElzXG4gKi9cbmNsYXNzIEVncmVzc0NsaWVudCBleHRlbmRzIFNlcnZpY2VCYXNlXzEuZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGhvc3QgaG9zdG5hbWUgaW5jbHVkaW5nIHByb3RvY29sLiBpLmUuICdodHRwczovL2NsdXN0ZXIubGl2ZWtpdC5pbydcbiAgICAgKiBAcGFyYW0gYXBpS2V5IEFQSSBLZXksIGNhbiBiZSBzZXQgaW4gZW52IHZhciBMSVZFS0lUX0FQSV9LRVlcbiAgICAgKiBAcGFyYW0gc2VjcmV0IEFQSSBTZWNyZXQsIGNhbiBiZSBzZXQgaW4gZW52IHZhciBMSVZFS0lUX0FQSV9TRUNSRVRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihob3N0LCBhcGlLZXksIHNlY3JldCkge1xuICAgICAgICBzdXBlcihhcGlLZXksIHNlY3JldCk7XG4gICAgICAgIHRoaXMucnBjID0gbmV3IFR3aXJwUlBDXzEuVHdpcnBScGMoaG9zdCwgVHdpcnBSUENfMS5saXZla2l0UGFja2FnZSk7XG4gICAgfVxuICAgIHN0YXJ0Um9vbUNvbXBvc2l0ZUVncmVzcyhyb29tTmFtZSwgb3V0cHV0LCBvcHRzT3JMYXlvdXQsIG9wdGlvbnMsIGF1ZGlvT25seSwgdmlkZW9Pbmx5LCBjdXN0b21CYXNlVXJsKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBsZXQgbGF5b3V0O1xuICAgICAgICAgICAgaWYgKG9wdHNPckxheW91dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRzT3JMYXlvdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGxheW91dCA9IG9wdHNPckxheW91dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdHMgPSBvcHRzT3JMYXlvdXQ7XG4gICAgICAgICAgICAgICAgICAgIGxheW91dCA9IG9wdHMubGF5b3V0O1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0cy5lbmNvZGluZ09wdGlvbnM7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvT25seSA9IG9wdHMuYXVkaW9Pbmx5O1xuICAgICAgICAgICAgICAgICAgICB2aWRlb09ubHkgPSBvcHRzLnZpZGVvT25seTtcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tQmFzZVVybCA9IG9wdHMuY3VzdG9tQmFzZVVybDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsYXlvdXQgIT09IG51bGwgJiYgbGF5b3V0ICE9PSB2b2lkIDAgPyBsYXlvdXQgOiAobGF5b3V0ID0gJycpO1xuICAgICAgICAgICAgYXVkaW9Pbmx5ICE9PSBudWxsICYmIGF1ZGlvT25seSAhPT0gdm9pZCAwID8gYXVkaW9Pbmx5IDogKGF1ZGlvT25seSA9IGZhbHNlKTtcbiAgICAgICAgICAgIHZpZGVvT25seSAhPT0gbnVsbCAmJiB2aWRlb09ubHkgIT09IHZvaWQgMCA/IHZpZGVvT25seSA6ICh2aWRlb09ubHkgPSBmYWxzZSk7XG4gICAgICAgICAgICBjdXN0b21CYXNlVXJsICE9PSBudWxsICYmIGN1c3RvbUJhc2VVcmwgIT09IHZvaWQgMCA/IGN1c3RvbUJhc2VVcmwgOiAoY3VzdG9tQmFzZVVybCA9ICcnKTtcbiAgICAgICAgICAgIGNvbnN0IHsgZmlsZSwgc3RyZWFtLCBzZWdtZW50cywgcHJlc2V0LCBhZHZhbmNlZCwgZmlsZU91dHB1dHMsIHN0cmVhbU91dHB1dHMsIHNlZ21lbnRPdXRwdXRzIH0gPSB0aGlzLmdldE91dHB1dFBhcmFtcyhvdXRwdXQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgcmVxID0gbGl2ZWtpdF9lZ3Jlc3NfMS5Sb29tQ29tcG9zaXRlRWdyZXNzUmVxdWVzdC50b0pTT04oe1xuICAgICAgICAgICAgICAgIHJvb21OYW1lLFxuICAgICAgICAgICAgICAgIGxheW91dCxcbiAgICAgICAgICAgICAgICBhdWRpb09ubHksXG4gICAgICAgICAgICAgICAgdmlkZW9Pbmx5LFxuICAgICAgICAgICAgICAgIGN1c3RvbUJhc2VVcmwsXG4gICAgICAgICAgICAgICAgZmlsZSxcbiAgICAgICAgICAgICAgICBzdHJlYW0sXG4gICAgICAgICAgICAgICAgc2VnbWVudHMsXG4gICAgICAgICAgICAgICAgcHJlc2V0LFxuICAgICAgICAgICAgICAgIGFkdmFuY2VkLFxuICAgICAgICAgICAgICAgIGZpbGVPdXRwdXRzLFxuICAgICAgICAgICAgICAgIHN0cmVhbU91dHB1dHMsXG4gICAgICAgICAgICAgICAgc2VnbWVudE91dHB1dHMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCB0aGlzLnJwYy5yZXF1ZXN0KHN2YywgJ1N0YXJ0Um9vbUNvbXBvc2l0ZUVncmVzcycsIHJlcSwgdGhpcy5hdXRoSGVhZGVyKHsgcm9vbVJlY29yZDogdHJ1ZSB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbGl2ZWtpdF9lZ3Jlc3NfMS5FZ3Jlc3NJbmZvLmZyb21KU09OKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHVybCB1cmxcbiAgICAgKiBAcGFyYW0gb3V0cHV0IGZpbGUgb3Igc3RyZWFtIG91dHB1dFxuICAgICAqIEBwYXJhbSBvcHRzIFdlYk9wdGlvbnNcbiAgICAgKi9cbiAgICBzdGFydFdlYkVncmVzcyh1cmwsIG91dHB1dCwgb3B0cykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgYXVkaW9Pbmx5ID0gKG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy5hdWRpb09ubHkpIHx8IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgdmlkZW9Pbmx5ID0gKG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy52aWRlb09ubHkpIHx8IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgYXdhaXRTdGFydFNpZ25hbCA9IChvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMuYXdhaXRTdGFydFNpZ25hbCkgfHwgZmFsc2U7XG4gICAgICAgICAgICBjb25zdCB7IGZpbGUsIHN0cmVhbSwgc2VnbWVudHMsIHByZXNldCwgYWR2YW5jZWQsIGZpbGVPdXRwdXRzLCBzdHJlYW1PdXRwdXRzLCBzZWdtZW50T3V0cHV0cyB9ID0gdGhpcy5nZXRPdXRwdXRQYXJhbXMob3V0cHV0LCBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMuZW5jb2RpbmdPcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IHJlcSA9IGxpdmVraXRfZWdyZXNzXzEuV2ViRWdyZXNzUmVxdWVzdC50b0pTT04oe1xuICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgICBhdWRpb09ubHksXG4gICAgICAgICAgICAgICAgdmlkZW9Pbmx5LFxuICAgICAgICAgICAgICAgIGF3YWl0U3RhcnRTaWduYWwsXG4gICAgICAgICAgICAgICAgZmlsZSxcbiAgICAgICAgICAgICAgICBzdHJlYW0sXG4gICAgICAgICAgICAgICAgc2VnbWVudHMsXG4gICAgICAgICAgICAgICAgcHJlc2V0LFxuICAgICAgICAgICAgICAgIGFkdmFuY2VkLFxuICAgICAgICAgICAgICAgIGZpbGVPdXRwdXRzLFxuICAgICAgICAgICAgICAgIHN0cmVhbU91dHB1dHMsXG4gICAgICAgICAgICAgICAgc2VnbWVudE91dHB1dHMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCB0aGlzLnJwYy5yZXF1ZXN0KHN2YywgJ1N0YXJ0V2ViRWdyZXNzJywgcmVxLCB0aGlzLmF1dGhIZWFkZXIoeyByb29tUmVjb3JkOiB0cnVlIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBsaXZla2l0X2VncmVzc18xLkVncmVzc0luZm8uZnJvbUpTT04oZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeHBvcnQgYSBwYXJ0aWNpcGFudCdzIGF1ZGlvIGFuZCB2aWRlbyB0cmFja3MsXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcm9vbU5hbWUgcm9vbSBuYW1lXG4gICAgICogQHBhcmFtIG91dHB1dCBvbmUgb3IgbW9yZSBvdXRwdXRzXG4gICAgICogQHBhcmFtIG9wdHMgUGFydGljaXBhbnRFZ3Jlc3NPcHRpb25zXG4gICAgICovXG4gICAgc3RhcnRQYXJ0aWNpcGFudEVncmVzcyhyb29tTmFtZSwgaWRlbnRpdHksIG91dHB1dCwgb3B0cykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgeyBwcmVzZXQsIGFkdmFuY2VkLCBmaWxlT3V0cHV0cywgc3RyZWFtT3V0cHV0cywgc2VnbWVudE91dHB1dHMgfSA9IHRoaXMuZ2V0T3V0cHV0UGFyYW1zKG91dHB1dCwgb3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLmVuY29kaW5nT3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCByZXEgPSBsaXZla2l0X2VncmVzc18xLlBhcnRpY2lwYW50RWdyZXNzUmVxdWVzdC50b0pTT04oe1xuICAgICAgICAgICAgICAgIHJvb21OYW1lLFxuICAgICAgICAgICAgICAgIGlkZW50aXR5LFxuICAgICAgICAgICAgICAgIHByZXNldCxcbiAgICAgICAgICAgICAgICBhZHZhbmNlZCxcbiAgICAgICAgICAgICAgICBmaWxlT3V0cHV0cyxcbiAgICAgICAgICAgICAgICBzdHJlYW1PdXRwdXRzLFxuICAgICAgICAgICAgICAgIHNlZ21lbnRPdXRwdXRzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0geWllbGQgdGhpcy5ycGMucmVxdWVzdChzdmMsICdTdGFydFBhcnRpY2lwYW50RWdyZXNzJywgcmVxLCB0aGlzLmF1dGhIZWFkZXIoeyByb29tUmVjb3JkOiB0cnVlIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBsaXZla2l0X2VncmVzc18xLkVncmVzc0luZm8uZnJvbUpTT04oZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGFydFRyYWNrQ29tcG9zaXRlRWdyZXNzKHJvb21OYW1lLCBvdXRwdXQsIG9wdHNPckF1ZGlvVHJhY2tJZCwgdmlkZW9UcmFja0lkLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBsZXQgYXVkaW9UcmFja0lkO1xuICAgICAgICAgICAgaWYgKG9wdHNPckF1ZGlvVHJhY2tJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRzT3JBdWRpb1RyYWNrSWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvVHJhY2tJZCA9IG9wdHNPckF1ZGlvVHJhY2tJZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdHMgPSBvcHRzT3JBdWRpb1RyYWNrSWQ7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvVHJhY2tJZCA9IG9wdHMuYXVkaW9UcmFja0lkO1xuICAgICAgICAgICAgICAgICAgICB2aWRlb1RyYWNrSWQgPSBvcHRzLnZpZGVvVHJhY2tJZDtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IG9wdHMuZW5jb2RpbmdPcHRpb25zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF1ZGlvVHJhY2tJZCAhPT0gbnVsbCAmJiBhdWRpb1RyYWNrSWQgIT09IHZvaWQgMCA/IGF1ZGlvVHJhY2tJZCA6IChhdWRpb1RyYWNrSWQgPSAnJyk7XG4gICAgICAgICAgICB2aWRlb1RyYWNrSWQgIT09IG51bGwgJiYgdmlkZW9UcmFja0lkICE9PSB2b2lkIDAgPyB2aWRlb1RyYWNrSWQgOiAodmlkZW9UcmFja0lkID0gJycpO1xuICAgICAgICAgICAgY29uc3QgeyBmaWxlLCBzdHJlYW0sIHNlZ21lbnRzLCBwcmVzZXQsIGFkdmFuY2VkLCBmaWxlT3V0cHV0cywgc3RyZWFtT3V0cHV0cywgc2VnbWVudE91dHB1dHMgfSA9IHRoaXMuZ2V0T3V0cHV0UGFyYW1zKG91dHB1dCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCByZXEgPSBsaXZla2l0X2VncmVzc18xLlRyYWNrQ29tcG9zaXRlRWdyZXNzUmVxdWVzdC50b0pTT04oe1xuICAgICAgICAgICAgICAgIHJvb21OYW1lLFxuICAgICAgICAgICAgICAgIGF1ZGlvVHJhY2tJZCxcbiAgICAgICAgICAgICAgICB2aWRlb1RyYWNrSWQsXG4gICAgICAgICAgICAgICAgZmlsZSxcbiAgICAgICAgICAgICAgICBzdHJlYW0sXG4gICAgICAgICAgICAgICAgc2VnbWVudHMsXG4gICAgICAgICAgICAgICAgcHJlc2V0LFxuICAgICAgICAgICAgICAgIGFkdmFuY2VkLFxuICAgICAgICAgICAgICAgIGZpbGVPdXRwdXRzLFxuICAgICAgICAgICAgICAgIHN0cmVhbU91dHB1dHMsXG4gICAgICAgICAgICAgICAgc2VnbWVudE91dHB1dHMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCB0aGlzLnJwYy5yZXF1ZXN0KHN2YywgJ1N0YXJ0VHJhY2tDb21wb3NpdGVFZ3Jlc3MnLCByZXEsIHRoaXMuYXV0aEhlYWRlcih7IHJvb21SZWNvcmQ6IHRydWUgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIGxpdmVraXRfZWdyZXNzXzEuRWdyZXNzSW5mby5mcm9tSlNPTihkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlzRW5jb2RlZE91dHB1dHMob3V0cHV0KSB7XG4gICAgICAgIHJldHVybiAob3V0cHV0LmZpbGUgIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgb3V0cHV0LnN0cmVhbSAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBvdXRwdXQuc2VnbWVudHMgIT09IHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIGlzRW5jb2RlZEZpbGVPdXRwdXQob3V0cHV0KSB7XG4gICAgICAgIHJldHVybiAob3V0cHV0LmZpbGVwYXRoICE9PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIG91dHB1dC5maWxlVHlwZSAhPT0gdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgaXNTZWdtZW50ZWRGaWxlT3V0cHV0KG91dHB1dCkge1xuICAgICAgICByZXR1cm4gKG91dHB1dC5maWxlbmFtZVByZWZpeCAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBvdXRwdXQucGxheWxpc3ROYW1lICE9PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIG91dHB1dC5maWxlbmFtZVN1ZmZpeCAhPT0gdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgaXNTdHJlYW1PdXRwdXQob3V0cHV0KSB7XG4gICAgICAgIHJldHVybiAob3V0cHV0LnByb3RvY29sICE9PSB1bmRlZmluZWQgfHwgb3V0cHV0LnVybHMgIT09IHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIGdldE91dHB1dFBhcmFtcyhvdXRwdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IGZpbGU7XG4gICAgICAgIGxldCBmaWxlT3V0cHV0cztcbiAgICAgICAgbGV0IHN0cmVhbTtcbiAgICAgICAgbGV0IHN0cmVhbU91dHB1dHM7XG4gICAgICAgIGxldCBzZWdtZW50cztcbiAgICAgICAgbGV0IHNlZ21lbnRPdXRwdXRzO1xuICAgICAgICBsZXQgcHJlc2V0O1xuICAgICAgICBsZXQgYWR2YW5jZWQ7XG4gICAgICAgIGlmICh0aGlzLmlzRW5jb2RlZE91dHB1dHMob3V0cHV0KSkge1xuICAgICAgICAgICAgaWYgKG91dHB1dC5maWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBmaWxlT3V0cHV0cyA9IFtvdXRwdXQuZmlsZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3V0cHV0LnN0cmVhbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc3RyZWFtT3V0cHV0cyA9IFtvdXRwdXQuc3RyZWFtXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvdXRwdXQuc2VnbWVudHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHNlZ21lbnRPdXRwdXRzID0gW291dHB1dC5zZWdtZW50c107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5pc0VuY29kZWRGaWxlT3V0cHV0KG91dHB1dCkpIHtcbiAgICAgICAgICAgIGZpbGUgPSBvdXRwdXQ7XG4gICAgICAgICAgICBmaWxlT3V0cHV0cyA9IFtmaWxlXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmlzU2VnbWVudGVkRmlsZU91dHB1dChvdXRwdXQpKSB7XG4gICAgICAgICAgICBzZWdtZW50cyA9IG91dHB1dDtcbiAgICAgICAgICAgIHNlZ21lbnRPdXRwdXRzID0gW3NlZ21lbnRzXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmlzU3RyZWFtT3V0cHV0KG91dHB1dCkpIHtcbiAgICAgICAgICAgIHN0cmVhbSA9IG91dHB1dDtcbiAgICAgICAgICAgIHN0cmVhbU91dHB1dHMgPSBbc3RyZWFtXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHByZXNldCA9IG9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhZHZhbmNlZCA9IG9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZmlsZSwgc3RyZWFtLCBzZWdtZW50cywgcHJlc2V0LCBhZHZhbmNlZCwgZmlsZU91dHB1dHMsIHN0cmVhbU91dHB1dHMsIHNlZ21lbnRPdXRwdXRzIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSByb29tTmFtZSByb29tIG5hbWVcbiAgICAgKiBAcGFyYW0gb3V0cHV0IGZpbGUgb3Igd2Vic29ja2V0IG91dHB1dFxuICAgICAqIEBwYXJhbSB0cmFja0lkIHRyYWNrIElkXG4gICAgICovXG4gICAgc3RhcnRUcmFja0VncmVzcyhyb29tTmFtZSwgb3V0cHV0LCB0cmFja0lkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBsZXQgZmlsZTtcbiAgICAgICAgICAgIGxldCB3ZWJzb2NrZXRVcmw7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG91dHB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB3ZWJzb2NrZXRVcmwgPSBvdXRwdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmaWxlID0gb3V0cHV0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVxID0gbGl2ZWtpdF9lZ3Jlc3NfMS5UcmFja0VncmVzc1JlcXVlc3QudG9KU09OKHtcbiAgICAgICAgICAgICAgICByb29tTmFtZSxcbiAgICAgICAgICAgICAgICB0cmFja0lkLFxuICAgICAgICAgICAgICAgIGZpbGUsXG4gICAgICAgICAgICAgICAgd2Vic29ja2V0VXJsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0geWllbGQgdGhpcy5ycGMucmVxdWVzdChzdmMsICdTdGFydFRyYWNrRWdyZXNzJywgcmVxLCB0aGlzLmF1dGhIZWFkZXIoeyByb29tUmVjb3JkOiB0cnVlIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBsaXZla2l0X2VncmVzc18xLkVncmVzc0luZm8uZnJvbUpTT04oZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZWdyZXNzSWRcbiAgICAgKiBAcGFyYW0gbGF5b3V0XG4gICAgICovXG4gICAgdXBkYXRlTGF5b3V0KGVncmVzc0lkLCBsYXlvdXQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCB0aGlzLnJwYy5yZXF1ZXN0KHN2YywgJ1VwZGF0ZUxheW91dCcsIGxpdmVraXRfZWdyZXNzXzEuVXBkYXRlTGF5b3V0UmVxdWVzdC50b0pTT04oeyBlZ3Jlc3NJZCwgbGF5b3V0IH0pLCB0aGlzLmF1dGhIZWFkZXIoeyByb29tUmVjb3JkOiB0cnVlIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBsaXZla2l0X2VncmVzc18xLkVncmVzc0luZm8uZnJvbUpTT04oZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZWdyZXNzSWRcbiAgICAgKiBAcGFyYW0gYWRkT3V0cHV0VXJsc1xuICAgICAqIEBwYXJhbSByZW1vdmVPdXRwdXRVcmxzXG4gICAgICovXG4gICAgdXBkYXRlU3RyZWFtKGVncmVzc0lkLCBhZGRPdXRwdXRVcmxzLCByZW1vdmVPdXRwdXRVcmxzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBhZGRPdXRwdXRVcmxzICE9PSBudWxsICYmIGFkZE91dHB1dFVybHMgIT09IHZvaWQgMCA/IGFkZE91dHB1dFVybHMgOiAoYWRkT3V0cHV0VXJscyA9IFtdKTtcbiAgICAgICAgICAgIHJlbW92ZU91dHB1dFVybHMgIT09IG51bGwgJiYgcmVtb3ZlT3V0cHV0VXJscyAhPT0gdm9pZCAwID8gcmVtb3ZlT3V0cHV0VXJscyA6IChyZW1vdmVPdXRwdXRVcmxzID0gW10pO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHRoaXMucnBjLnJlcXVlc3Qoc3ZjLCAnVXBkYXRlU3RyZWFtJywgbGl2ZWtpdF9lZ3Jlc3NfMS5VcGRhdGVTdHJlYW1SZXF1ZXN0LnRvSlNPTih7IGVncmVzc0lkLCBhZGRPdXRwdXRVcmxzLCByZW1vdmVPdXRwdXRVcmxzIH0pLCB0aGlzLmF1dGhIZWFkZXIoeyByb29tUmVjb3JkOiB0cnVlIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBsaXZla2l0X2VncmVzc18xLkVncmVzc0luZm8uZnJvbUpTT04oZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcm9vbU5hbWUgbGlzdCBlZ3Jlc3MgZm9yIG9uZSByb29tIG9ubHlcbiAgICAgKi9cbiAgICBsaXN0RWdyZXNzKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgbGV0IHJlcSA9IHt9O1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJlcS5yb29tTmFtZSA9IG9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXEgPSBvcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHRoaXMucnBjLnJlcXVlc3Qoc3ZjLCAnTGlzdEVncmVzcycsIGxpdmVraXRfZWdyZXNzXzEuTGlzdEVncmVzc1JlcXVlc3QudG9KU09OKHJlcSksIHRoaXMuYXV0aEhlYWRlcih7IHJvb21SZWNvcmQ6IHRydWUgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIChfYSA9IGxpdmVraXRfZWdyZXNzXzEuTGlzdEVncmVzc1Jlc3BvbnNlLmZyb21KU09OKGRhdGEpLml0ZW1zKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBlZ3Jlc3NJZFxuICAgICAqL1xuICAgIHN0b3BFZ3Jlc3MoZWdyZXNzSWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCB0aGlzLnJwYy5yZXF1ZXN0KHN2YywgJ1N0b3BFZ3Jlc3MnLCBsaXZla2l0X2VncmVzc18xLlN0b3BFZ3Jlc3NSZXF1ZXN0LnRvSlNPTih7IGVncmVzc0lkIH0pLCB0aGlzLmF1dGhIZWFkZXIoeyByb29tUmVjb3JkOiB0cnVlIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBsaXZla2l0X2VncmVzc18xLkVncmVzc0luZm8uZnJvbUpTT04oZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuRWdyZXNzQ2xpZW50ID0gRWdyZXNzQ2xpZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RWdyZXNzQ2xpZW50LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/livekit-server-sdk/dist/EgressClient.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/livekit-server-sdk/dist/IngressClient.js":
/*!***************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/IngressClient.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.IngressClient = void 0;\nconst livekit_ingress_1 = __webpack_require__(/*! ./proto/livekit_ingress */ \"(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_ingress.js\");\nconst ServiceBase_1 = __importDefault(__webpack_require__(/*! ./ServiceBase */ \"(ssr)/./node_modules/livekit-server-sdk/dist/ServiceBase.js\"));\nconst TwirpRPC_1 = __webpack_require__(/*! ./TwirpRPC */ \"(ssr)/./node_modules/livekit-server-sdk/dist/TwirpRPC.js\");\nconst svc = 'Ingress';\n/**\n * Client to access Ingress APIs\n */\nclass IngressClient extends ServiceBase_1.default {\n    /**\n     * @param host hostname including protocol. i.e. 'https://cluster.livekit.io'\n     * @param apiKey API Key, can be set in env var LIVEKIT_API_KEY\n     * @param secret API Secret, can be set in env var LIVEKIT_API_SECRET\n     */\n    constructor(host, apiKey, secret) {\n        super(apiKey, secret);\n        this.rpc = new TwirpRPC_1.TwirpRpc(host, TwirpRPC_1.livekitPackage);\n    }\n    /**\n     * @param inputType protocol for the ingress\n     * @param opts CreateIngressOptions\n     */\n    createIngress(inputType, opts) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let name = '';\n            let roomName = '';\n            let participantName = '';\n            let participantIdentity = '';\n            let bypassTranscoding = false;\n            let url = '';\n            let audio;\n            let video;\n            if (opts !== undefined) {\n                name = opts.name || '';\n                roomName = opts.roomName || '';\n                participantName = opts.participantName || '';\n                participantIdentity = opts.participantIdentity || '';\n                bypassTranscoding = opts.bypassTranscoding || false;\n                url = opts.url || '';\n                audio = opts.audio;\n                video = opts.video;\n            }\n            const req = livekit_ingress_1.CreateIngressRequest.toJSON({\n                inputType,\n                name,\n                roomName,\n                participantIdentity,\n                participantName,\n                bypassTranscoding,\n                url,\n                audio,\n                video,\n            });\n            const data = yield this.rpc.request(svc, 'CreateIngress', req, this.authHeader({ ingressAdmin: true }));\n            return livekit_ingress_1.IngressInfo.fromJSON(data);\n        });\n    }\n    /**\n     * @param ingressId ID of the ingress to update\n     * @param opts UpdateIngressOptions\n     */\n    updateIngress(ingressId, opts) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const name = opts.name || '';\n            const roomName = opts.roomName || '';\n            const participantName = opts.participantName || '';\n            const participantIdentity = opts.participantIdentity || '';\n            const { audio, video, bypassTranscoding } = opts;\n            const req = livekit_ingress_1.UpdateIngressRequest.toJSON({\n                ingressId,\n                name,\n                roomName,\n                participantIdentity,\n                participantName,\n                bypassTranscoding,\n                audio,\n                video,\n            });\n            const data = yield this.rpc.request(svc, 'UpdateIngress', req, this.authHeader({ ingressAdmin: true }));\n            return livekit_ingress_1.IngressInfo.fromJSON(data);\n        });\n    }\n    listIngress(arg) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            let req = {};\n            if (typeof arg === 'string') {\n                req.roomName = arg;\n            }\n            else if (arg) {\n                req = arg;\n            }\n            const data = yield this.rpc.request(svc, 'ListIngress', livekit_ingress_1.ListIngressRequest.toJSON(req), this.authHeader({ ingressAdmin: true }));\n            return (_a = livekit_ingress_1.ListIngressResponse.fromJSON(data).items) !== null && _a !== void 0 ? _a : [];\n        });\n    }\n    /**\n     * @param ingressId ingress to delete\n     */\n    deleteIngress(ingressId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = yield this.rpc.request(svc, 'DeleteIngress', livekit_ingress_1.DeleteIngressRequest.toJSON({ ingressId }), this.authHeader({ ingressAdmin: true }));\n            return livekit_ingress_1.IngressInfo.fromJSON(data);\n        });\n    }\n}\nexports.IngressClient = IngressClient;\n//# sourceMappingURL=IngressClient.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvSW5ncmVzc0NsaWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNEJBQTRCLCtEQUErRCxpQkFBaUI7QUFDNUc7QUFDQSxvQ0FBb0MsTUFBTSwrQkFBK0IsWUFBWTtBQUNyRixtQ0FBbUMsTUFBTSxtQ0FBbUMsWUFBWTtBQUN4RixnQ0FBZ0M7QUFDaEM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxxQkFBcUI7QUFDckIsMEJBQTBCLG1CQUFPLENBQUMsc0dBQXlCO0FBQzNELHNDQUFzQyxtQkFBTyxDQUFDLGtGQUFlO0FBQzdELG1CQUFtQixtQkFBTyxDQUFDLDRFQUFZO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYiw2RkFBNkYsb0JBQW9CO0FBQ2pIO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0NBQWtDO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYiw2RkFBNkYsb0JBQW9CO0FBQ2pIO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3SUFBd0ksb0JBQW9CO0FBQzVKO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNIQUFzSCxXQUFXLHFCQUFxQixvQkFBb0I7QUFDMUs7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQiIsInNvdXJjZXMiOlsid2VicGFjazovL2xpdmVzdHJlYW0vLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvSW5ncmVzc0NsaWVudC5qcz9kMzc2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkluZ3Jlc3NDbGllbnQgPSB2b2lkIDA7XG5jb25zdCBsaXZla2l0X2luZ3Jlc3NfMSA9IHJlcXVpcmUoXCIuL3Byb3RvL2xpdmVraXRfaW5ncmVzc1wiKTtcbmNvbnN0IFNlcnZpY2VCYXNlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vU2VydmljZUJhc2VcIikpO1xuY29uc3QgVHdpcnBSUENfMSA9IHJlcXVpcmUoXCIuL1R3aXJwUlBDXCIpO1xuY29uc3Qgc3ZjID0gJ0luZ3Jlc3MnO1xuLyoqXG4gKiBDbGllbnQgdG8gYWNjZXNzIEluZ3Jlc3MgQVBJc1xuICovXG5jbGFzcyBJbmdyZXNzQ2xpZW50IGV4dGVuZHMgU2VydmljZUJhc2VfMS5kZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gaG9zdCBob3N0bmFtZSBpbmNsdWRpbmcgcHJvdG9jb2wuIGkuZS4gJ2h0dHBzOi8vY2x1c3Rlci5saXZla2l0LmlvJ1xuICAgICAqIEBwYXJhbSBhcGlLZXkgQVBJIEtleSwgY2FuIGJlIHNldCBpbiBlbnYgdmFyIExJVkVLSVRfQVBJX0tFWVxuICAgICAqIEBwYXJhbSBzZWNyZXQgQVBJIFNlY3JldCwgY2FuIGJlIHNldCBpbiBlbnYgdmFyIExJVkVLSVRfQVBJX1NFQ1JFVFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGhvc3QsIGFwaUtleSwgc2VjcmV0KSB7XG4gICAgICAgIHN1cGVyKGFwaUtleSwgc2VjcmV0KTtcbiAgICAgICAgdGhpcy5ycGMgPSBuZXcgVHdpcnBSUENfMS5Ud2lycFJwYyhob3N0LCBUd2lycFJQQ18xLmxpdmVraXRQYWNrYWdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGlucHV0VHlwZSBwcm90b2NvbCBmb3IgdGhlIGluZ3Jlc3NcbiAgICAgKiBAcGFyYW0gb3B0cyBDcmVhdGVJbmdyZXNzT3B0aW9uc1xuICAgICAqL1xuICAgIGNyZWF0ZUluZ3Jlc3MoaW5wdXRUeXBlLCBvcHRzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBsZXQgbmFtZSA9ICcnO1xuICAgICAgICAgICAgbGV0IHJvb21OYW1lID0gJyc7XG4gICAgICAgICAgICBsZXQgcGFydGljaXBhbnROYW1lID0gJyc7XG4gICAgICAgICAgICBsZXQgcGFydGljaXBhbnRJZGVudGl0eSA9ICcnO1xuICAgICAgICAgICAgbGV0IGJ5cGFzc1RyYW5zY29kaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgdXJsID0gJyc7XG4gICAgICAgICAgICBsZXQgYXVkaW87XG4gICAgICAgICAgICBsZXQgdmlkZW87XG4gICAgICAgICAgICBpZiAob3B0cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbmFtZSA9IG9wdHMubmFtZSB8fCAnJztcbiAgICAgICAgICAgICAgICByb29tTmFtZSA9IG9wdHMucm9vbU5hbWUgfHwgJyc7XG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnROYW1lID0gb3B0cy5wYXJ0aWNpcGFudE5hbWUgfHwgJyc7XG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnRJZGVudGl0eSA9IG9wdHMucGFydGljaXBhbnRJZGVudGl0eSB8fCAnJztcbiAgICAgICAgICAgICAgICBieXBhc3NUcmFuc2NvZGluZyA9IG9wdHMuYnlwYXNzVHJhbnNjb2RpbmcgfHwgZmFsc2U7XG4gICAgICAgICAgICAgICAgdXJsID0gb3B0cy51cmwgfHwgJyc7XG4gICAgICAgICAgICAgICAgYXVkaW8gPSBvcHRzLmF1ZGlvO1xuICAgICAgICAgICAgICAgIHZpZGVvID0gb3B0cy52aWRlbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlcSA9IGxpdmVraXRfaW5ncmVzc18xLkNyZWF0ZUluZ3Jlc3NSZXF1ZXN0LnRvSlNPTih7XG4gICAgICAgICAgICAgICAgaW5wdXRUeXBlLFxuICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgcm9vbU5hbWUsXG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnRJZGVudGl0eSxcbiAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudE5hbWUsXG4gICAgICAgICAgICAgICAgYnlwYXNzVHJhbnNjb2RpbmcsXG4gICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgICAgIGF1ZGlvLFxuICAgICAgICAgICAgICAgIHZpZGVvLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0geWllbGQgdGhpcy5ycGMucmVxdWVzdChzdmMsICdDcmVhdGVJbmdyZXNzJywgcmVxLCB0aGlzLmF1dGhIZWFkZXIoeyBpbmdyZXNzQWRtaW46IHRydWUgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIGxpdmVraXRfaW5ncmVzc18xLkluZ3Jlc3NJbmZvLmZyb21KU09OKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGluZ3Jlc3NJZCBJRCBvZiB0aGUgaW5ncmVzcyB0byB1cGRhdGVcbiAgICAgKiBAcGFyYW0gb3B0cyBVcGRhdGVJbmdyZXNzT3B0aW9uc1xuICAgICAqL1xuICAgIHVwZGF0ZUluZ3Jlc3MoaW5ncmVzc0lkLCBvcHRzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gb3B0cy5uYW1lIHx8ICcnO1xuICAgICAgICAgICAgY29uc3Qgcm9vbU5hbWUgPSBvcHRzLnJvb21OYW1lIHx8ICcnO1xuICAgICAgICAgICAgY29uc3QgcGFydGljaXBhbnROYW1lID0gb3B0cy5wYXJ0aWNpcGFudE5hbWUgfHwgJyc7XG4gICAgICAgICAgICBjb25zdCBwYXJ0aWNpcGFudElkZW50aXR5ID0gb3B0cy5wYXJ0aWNpcGFudElkZW50aXR5IHx8ICcnO1xuICAgICAgICAgICAgY29uc3QgeyBhdWRpbywgdmlkZW8sIGJ5cGFzc1RyYW5zY29kaW5nIH0gPSBvcHRzO1xuICAgICAgICAgICAgY29uc3QgcmVxID0gbGl2ZWtpdF9pbmdyZXNzXzEuVXBkYXRlSW5ncmVzc1JlcXVlc3QudG9KU09OKHtcbiAgICAgICAgICAgICAgICBpbmdyZXNzSWQsXG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICByb29tTmFtZSxcbiAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudElkZW50aXR5LFxuICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50TmFtZSxcbiAgICAgICAgICAgICAgICBieXBhc3NUcmFuc2NvZGluZyxcbiAgICAgICAgICAgICAgICBhdWRpbyxcbiAgICAgICAgICAgICAgICB2aWRlbyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHRoaXMucnBjLnJlcXVlc3Qoc3ZjLCAnVXBkYXRlSW5ncmVzcycsIHJlcSwgdGhpcy5hdXRoSGVhZGVyKHsgaW5ncmVzc0FkbWluOiB0cnVlIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBsaXZla2l0X2luZ3Jlc3NfMS5JbmdyZXNzSW5mby5mcm9tSlNPTihkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxpc3RJbmdyZXNzKGFyZykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBsZXQgcmVxID0ge307XG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICByZXEucm9vbU5hbWUgPSBhcmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhcmcpIHtcbiAgICAgICAgICAgICAgICByZXEgPSBhcmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBkYXRhID0geWllbGQgdGhpcy5ycGMucmVxdWVzdChzdmMsICdMaXN0SW5ncmVzcycsIGxpdmVraXRfaW5ncmVzc18xLkxpc3RJbmdyZXNzUmVxdWVzdC50b0pTT04ocmVxKSwgdGhpcy5hdXRoSGVhZGVyKHsgaW5ncmVzc0FkbWluOiB0cnVlIH0pKTtcbiAgICAgICAgICAgIHJldHVybiAoX2EgPSBsaXZla2l0X2luZ3Jlc3NfMS5MaXN0SW5ncmVzc1Jlc3BvbnNlLmZyb21KU09OKGRhdGEpLml0ZW1zKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBpbmdyZXNzSWQgaW5ncmVzcyB0byBkZWxldGVcbiAgICAgKi9cbiAgICBkZWxldGVJbmdyZXNzKGluZ3Jlc3NJZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHRoaXMucnBjLnJlcXVlc3Qoc3ZjLCAnRGVsZXRlSW5ncmVzcycsIGxpdmVraXRfaW5ncmVzc18xLkRlbGV0ZUluZ3Jlc3NSZXF1ZXN0LnRvSlNPTih7IGluZ3Jlc3NJZCB9KSwgdGhpcy5hdXRoSGVhZGVyKHsgaW5ncmVzc0FkbWluOiB0cnVlIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBsaXZla2l0X2luZ3Jlc3NfMS5JbmdyZXNzSW5mby5mcm9tSlNPTihkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5JbmdyZXNzQ2xpZW50ID0gSW5ncmVzc0NsaWVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUluZ3Jlc3NDbGllbnQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/livekit-server-sdk/dist/IngressClient.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/livekit-server-sdk/dist/RoomServiceClient.js":
/*!*******************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/RoomServiceClient.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.RoomServiceClient = void 0;\nconst livekit_models_1 = __webpack_require__(/*! ./proto/livekit_models */ \"(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_models.js\");\nconst livekit_room_1 = __webpack_require__(/*! ./proto/livekit_room */ \"(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_room.js\");\nconst ServiceBase_1 = __importDefault(__webpack_require__(/*! ./ServiceBase */ \"(ssr)/./node_modules/livekit-server-sdk/dist/ServiceBase.js\"));\nconst TwirpRPC_1 = __webpack_require__(/*! ./TwirpRPC */ \"(ssr)/./node_modules/livekit-server-sdk/dist/TwirpRPC.js\");\nconst svc = 'RoomService';\n/**\n * Client to access Room APIs\n */\nclass RoomServiceClient extends ServiceBase_1.default {\n    /**\n     *\n     * @param host hostname including protocol. i.e. 'https://cluster.livekit.io'\n     * @param apiKey API Key, can be set in env var LIVEKIT_API_KEY\n     * @param secret API Secret, can be set in env var LIVEKIT_API_SECRET\n     */\n    constructor(host, apiKey, secret) {\n        super(apiKey, secret);\n        this.rpc = new TwirpRPC_1.TwirpRpc(host, TwirpRPC_1.livekitPackage);\n    }\n    /**\n     * Creates a new room. Explicit room creation is not required, since rooms will\n     * be automatically created when the first participant joins. This method can be\n     * used to customize room settings.\n     * @param options\n     */\n    createRoom(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = yield this.rpc.request(svc, 'CreateRoom', livekit_room_1.CreateRoomRequest.toJSON(livekit_room_1.CreateRoomRequest.fromPartial(options)), this.authHeader({ roomCreate: true }));\n            return livekit_models_1.Room.fromJSON(data);\n        });\n    }\n    /**\n     * List active rooms\n     * @param names when undefined or empty, list all rooms.\n     *              otherwise returns rooms with matching names\n     * @returns\n     */\n    listRooms(names) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = yield this.rpc.request(svc, 'ListRooms', livekit_room_1.ListRoomsRequest.toJSON({ names: names !== null && names !== void 0 ? names : [] }), this.authHeader({ roomList: true }));\n            const res = livekit_room_1.ListRoomsResponse.fromJSON(data);\n            return (_a = res.rooms) !== null && _a !== void 0 ? _a : [];\n        });\n    }\n    deleteRoom(room) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.rpc.request(svc, 'DeleteRoom', livekit_room_1.DeleteRoomRequest.toJSON({ room }), this.authHeader({ roomCreate: true }));\n        });\n    }\n    /**\n     * Update metadata of a room\n     * @param room name of the room\n     * @param metadata the new metadata for the room\n     */\n    updateRoomMetadata(room, metadata) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = yield this.rpc.request(svc, 'UpdateRoomMetadata', livekit_room_1.UpdateRoomMetadataRequest.toJSON({ room, metadata }), this.authHeader({ roomAdmin: true, room }));\n            return livekit_models_1.Room.fromJSON(data);\n        });\n    }\n    /**\n     * List participants in a room\n     * @param room name of the room\n     */\n    listParticipants(room) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = yield this.rpc.request(svc, 'ListParticipants', livekit_room_1.ListParticipantsRequest.toJSON({ room }), this.authHeader({ roomAdmin: true, room }));\n            const res = livekit_room_1.ListParticipantsResponse.fromJSON(data);\n            return (_a = res.participants) !== null && _a !== void 0 ? _a : [];\n        });\n    }\n    /**\n     * Get information on a specific participant, including the tracks that participant\n     * has published\n     * @param room name of the room\n     * @param identity identity of the participant to return\n     */\n    getParticipant(room, identity) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = yield this.rpc.request(svc, 'GetParticipant', livekit_room_1.RoomParticipantIdentity.toJSON({ room, identity }), this.authHeader({ roomAdmin: true, room }));\n            return livekit_models_1.ParticipantInfo.fromJSON(data);\n        });\n    }\n    /**\n     * Removes a participant in the room. This will disconnect the participant\n     * and will emit a Disconnected event for that participant.\n     * Even after being removed, the participant can still re-join the room.\n     * @param room\n     * @param identity\n     */\n    removeParticipant(room, identity) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.rpc.request(svc, 'RemoveParticipant', livekit_room_1.RoomParticipantIdentity.toJSON({ room, identity }), this.authHeader({ roomAdmin: true, room }));\n        });\n    }\n    /**\n     * Mutes a track that the participant has published.\n     * @param room\n     * @param identity\n     * @param trackSid sid of the track to be muted\n     * @param muted true to mute, false to unmute\n     */\n    mutePublishedTrack(room, identity, trackSid, muted) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const req = livekit_room_1.MuteRoomTrackRequest.toJSON({\n                room,\n                identity,\n                trackSid,\n                muted,\n            });\n            const data = yield this.rpc.request(svc, 'MutePublishedTrack', req, this.authHeader({ roomAdmin: true, room }));\n            const res = livekit_room_1.MuteRoomTrackResponse.fromJSON(data);\n            return res.track;\n        });\n    }\n    /**\n     * Updates a participant's metadata or permissions\n     * @param room\n     * @param identity\n     * @param metadata optional, metadata to update\n     * @param permission optional, new permissions to assign to participant\n     * @param name optional, new name for participant\n     */\n    updateParticipant(room, identity, metadata, permission, name) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const req = {\n                room,\n                identity,\n                metadata: metadata || '',\n                name: name || '',\n            };\n            if (permission) {\n                req.permission = livekit_models_1.ParticipantPermission.fromPartial(permission);\n            }\n            const data = yield this.rpc.request(svc, 'UpdateParticipant', livekit_room_1.UpdateParticipantRequest.toJSON(req), this.authHeader({ roomAdmin: true, room }));\n            return livekit_models_1.ParticipantInfo.fromJSON(data);\n        });\n    }\n    /**\n     * Updates a participant's subscription to tracks\n     * @param room\n     * @param identity\n     * @param trackSids\n     * @param subscribe true to subscribe, false to unsubscribe\n     */\n    updateSubscriptions(room, identity, trackSids, subscribe) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const req = livekit_room_1.UpdateSubscriptionsRequest.toJSON({\n                room,\n                identity,\n                trackSids,\n                subscribe,\n                participantTracks: [],\n            });\n            yield this.rpc.request(svc, 'UpdateSubscriptions', req, this.authHeader({ roomAdmin: true, room }));\n        });\n    }\n    sendData(room, data, kind, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const destinationSids = Array.isArray(options) ? options : options.destinationSids;\n            const topic = Array.isArray(options) ? undefined : options.topic;\n            const req = {\n                room,\n                data,\n                kind,\n                destinationSids: destinationSids !== null && destinationSids !== void 0 ? destinationSids : [],\n                topic,\n            };\n            if (!Array.isArray(options) && options.destinationIdentities) {\n                req.destinationIdentities = options.destinationIdentities;\n            }\n            yield this.rpc.request(svc, 'SendData', livekit_room_1.SendDataRequest.toJSON(req), this.authHeader({ roomAdmin: true, room }));\n        });\n    }\n}\nexports.RoomServiceClient = RoomServiceClient;\n//# sourceMappingURL=RoomServiceClient.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvUm9vbVNlcnZpY2VDbGllbnQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDRCQUE0QiwrREFBK0QsaUJBQWlCO0FBQzVHO0FBQ0Esb0NBQW9DLE1BQU0sK0JBQStCLFlBQVk7QUFDckYsbUNBQW1DLE1BQU0sbUNBQW1DLFlBQVk7QUFDeEYsZ0NBQWdDO0FBQ2hDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QseUJBQXlCO0FBQ3pCLHlCQUF5QixtQkFBTyxDQUFDLG9HQUF3QjtBQUN6RCx1QkFBdUIsbUJBQU8sQ0FBQyxnR0FBc0I7QUFDckQsc0NBQXNDLG1CQUFPLENBQUMsa0ZBQWU7QUFDN0QsbUJBQW1CLG1CQUFPLENBQUMsNEVBQVk7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFMQUFxTCxrQkFBa0I7QUFDdk07QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyR0FBMkcsd0RBQXdELHFCQUFxQixnQkFBZ0I7QUFDeE07QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxnR0FBZ0csTUFBTSxxQkFBcUIsa0JBQWtCO0FBQzdJLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkhBQTZILGdCQUFnQixxQkFBcUIsdUJBQXVCO0FBQ3pMO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5SEFBeUgsTUFBTSxxQkFBcUIsdUJBQXVCO0FBQzNLO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUhBQXVILGdCQUFnQixxQkFBcUIsdUJBQXVCO0FBQ25MO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkdBQTZHLGdCQUFnQixxQkFBcUIsdUJBQXVCO0FBQ3pLLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2Isa0dBQWtHLHVCQUF1QjtBQUN6SDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpSkFBaUosdUJBQXVCO0FBQ3hLO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLHNGQUFzRix1QkFBdUI7QUFDN0csU0FBUztBQUNUO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0hBQWtILHVCQUF1QjtBQUN6SSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QiIsInNvdXJjZXMiOlsid2VicGFjazovL2xpdmVzdHJlYW0vLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvUm9vbVNlcnZpY2VDbGllbnQuanM/OTZiYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Sb29tU2VydmljZUNsaWVudCA9IHZvaWQgMDtcbmNvbnN0IGxpdmVraXRfbW9kZWxzXzEgPSByZXF1aXJlKFwiLi9wcm90by9saXZla2l0X21vZGVsc1wiKTtcbmNvbnN0IGxpdmVraXRfcm9vbV8xID0gcmVxdWlyZShcIi4vcHJvdG8vbGl2ZWtpdF9yb29tXCIpO1xuY29uc3QgU2VydmljZUJhc2VfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9TZXJ2aWNlQmFzZVwiKSk7XG5jb25zdCBUd2lycFJQQ18xID0gcmVxdWlyZShcIi4vVHdpcnBSUENcIik7XG5jb25zdCBzdmMgPSAnUm9vbVNlcnZpY2UnO1xuLyoqXG4gKiBDbGllbnQgdG8gYWNjZXNzIFJvb20gQVBJc1xuICovXG5jbGFzcyBSb29tU2VydmljZUNsaWVudCBleHRlbmRzIFNlcnZpY2VCYXNlXzEuZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaG9zdCBob3N0bmFtZSBpbmNsdWRpbmcgcHJvdG9jb2wuIGkuZS4gJ2h0dHBzOi8vY2x1c3Rlci5saXZla2l0LmlvJ1xuICAgICAqIEBwYXJhbSBhcGlLZXkgQVBJIEtleSwgY2FuIGJlIHNldCBpbiBlbnYgdmFyIExJVkVLSVRfQVBJX0tFWVxuICAgICAqIEBwYXJhbSBzZWNyZXQgQVBJIFNlY3JldCwgY2FuIGJlIHNldCBpbiBlbnYgdmFyIExJVkVLSVRfQVBJX1NFQ1JFVFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGhvc3QsIGFwaUtleSwgc2VjcmV0KSB7XG4gICAgICAgIHN1cGVyKGFwaUtleSwgc2VjcmV0KTtcbiAgICAgICAgdGhpcy5ycGMgPSBuZXcgVHdpcnBSUENfMS5Ud2lycFJwYyhob3N0LCBUd2lycFJQQ18xLmxpdmVraXRQYWNrYWdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyByb29tLiBFeHBsaWNpdCByb29tIGNyZWF0aW9uIGlzIG5vdCByZXF1aXJlZCwgc2luY2Ugcm9vbXMgd2lsbFxuICAgICAqIGJlIGF1dG9tYXRpY2FsbHkgY3JlYXRlZCB3aGVuIHRoZSBmaXJzdCBwYXJ0aWNpcGFudCBqb2lucy4gVGhpcyBtZXRob2QgY2FuIGJlXG4gICAgICogdXNlZCB0byBjdXN0b21pemUgcm9vbSBzZXR0aW5ncy5cbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIGNyZWF0ZVJvb20ob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHRoaXMucnBjLnJlcXVlc3Qoc3ZjLCAnQ3JlYXRlUm9vbScsIGxpdmVraXRfcm9vbV8xLkNyZWF0ZVJvb21SZXF1ZXN0LnRvSlNPTihsaXZla2l0X3Jvb21fMS5DcmVhdGVSb29tUmVxdWVzdC5mcm9tUGFydGlhbChvcHRpb25zKSksIHRoaXMuYXV0aEhlYWRlcih7IHJvb21DcmVhdGU6IHRydWUgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIGxpdmVraXRfbW9kZWxzXzEuUm9vbS5mcm9tSlNPTihkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExpc3QgYWN0aXZlIHJvb21zXG4gICAgICogQHBhcmFtIG5hbWVzIHdoZW4gdW5kZWZpbmVkIG9yIGVtcHR5LCBsaXN0IGFsbCByb29tcy5cbiAgICAgKiAgICAgICAgICAgICAgb3RoZXJ3aXNlIHJldHVybnMgcm9vbXMgd2l0aCBtYXRjaGluZyBuYW1lc1xuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgbGlzdFJvb21zKG5hbWVzKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCB0aGlzLnJwYy5yZXF1ZXN0KHN2YywgJ0xpc3RSb29tcycsIGxpdmVraXRfcm9vbV8xLkxpc3RSb29tc1JlcXVlc3QudG9KU09OKHsgbmFtZXM6IG5hbWVzICE9PSBudWxsICYmIG5hbWVzICE9PSB2b2lkIDAgPyBuYW1lcyA6IFtdIH0pLCB0aGlzLmF1dGhIZWFkZXIoeyByb29tTGlzdDogdHJ1ZSB9KSk7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBsaXZla2l0X3Jvb21fMS5MaXN0Um9vbXNSZXNwb25zZS5mcm9tSlNPTihkYXRhKTtcbiAgICAgICAgICAgIHJldHVybiAoX2EgPSByZXMucm9vbXMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFtdO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGVsZXRlUm9vbShyb29tKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnJwYy5yZXF1ZXN0KHN2YywgJ0RlbGV0ZVJvb20nLCBsaXZla2l0X3Jvb21fMS5EZWxldGVSb29tUmVxdWVzdC50b0pTT04oeyByb29tIH0pLCB0aGlzLmF1dGhIZWFkZXIoeyByb29tQ3JlYXRlOiB0cnVlIH0pKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBtZXRhZGF0YSBvZiBhIHJvb21cbiAgICAgKiBAcGFyYW0gcm9vbSBuYW1lIG9mIHRoZSByb29tXG4gICAgICogQHBhcmFtIG1ldGFkYXRhIHRoZSBuZXcgbWV0YWRhdGEgZm9yIHRoZSByb29tXG4gICAgICovXG4gICAgdXBkYXRlUm9vbU1ldGFkYXRhKHJvb20sIG1ldGFkYXRhKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0geWllbGQgdGhpcy5ycGMucmVxdWVzdChzdmMsICdVcGRhdGVSb29tTWV0YWRhdGEnLCBsaXZla2l0X3Jvb21fMS5VcGRhdGVSb29tTWV0YWRhdGFSZXF1ZXN0LnRvSlNPTih7IHJvb20sIG1ldGFkYXRhIH0pLCB0aGlzLmF1dGhIZWFkZXIoeyByb29tQWRtaW46IHRydWUsIHJvb20gfSkpO1xuICAgICAgICAgICAgcmV0dXJuIGxpdmVraXRfbW9kZWxzXzEuUm9vbS5mcm9tSlNPTihkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExpc3QgcGFydGljaXBhbnRzIGluIGEgcm9vbVxuICAgICAqIEBwYXJhbSByb29tIG5hbWUgb2YgdGhlIHJvb21cbiAgICAgKi9cbiAgICBsaXN0UGFydGljaXBhbnRzKHJvb20pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHRoaXMucnBjLnJlcXVlc3Qoc3ZjLCAnTGlzdFBhcnRpY2lwYW50cycsIGxpdmVraXRfcm9vbV8xLkxpc3RQYXJ0aWNpcGFudHNSZXF1ZXN0LnRvSlNPTih7IHJvb20gfSksIHRoaXMuYXV0aEhlYWRlcih7IHJvb21BZG1pbjogdHJ1ZSwgcm9vbSB9KSk7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBsaXZla2l0X3Jvb21fMS5MaXN0UGFydGljaXBhbnRzUmVzcG9uc2UuZnJvbUpTT04oZGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gKF9hID0gcmVzLnBhcnRpY2lwYW50cykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW107XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgaW5mb3JtYXRpb24gb24gYSBzcGVjaWZpYyBwYXJ0aWNpcGFudCwgaW5jbHVkaW5nIHRoZSB0cmFja3MgdGhhdCBwYXJ0aWNpcGFudFxuICAgICAqIGhhcyBwdWJsaXNoZWRcbiAgICAgKiBAcGFyYW0gcm9vbSBuYW1lIG9mIHRoZSByb29tXG4gICAgICogQHBhcmFtIGlkZW50aXR5IGlkZW50aXR5IG9mIHRoZSBwYXJ0aWNpcGFudCB0byByZXR1cm5cbiAgICAgKi9cbiAgICBnZXRQYXJ0aWNpcGFudChyb29tLCBpZGVudGl0eSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHRoaXMucnBjLnJlcXVlc3Qoc3ZjLCAnR2V0UGFydGljaXBhbnQnLCBsaXZla2l0X3Jvb21fMS5Sb29tUGFydGljaXBhbnRJZGVudGl0eS50b0pTT04oeyByb29tLCBpZGVudGl0eSB9KSwgdGhpcy5hdXRoSGVhZGVyKHsgcm9vbUFkbWluOiB0cnVlLCByb29tIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBsaXZla2l0X21vZGVsc18xLlBhcnRpY2lwYW50SW5mby5mcm9tSlNPTihkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBwYXJ0aWNpcGFudCBpbiB0aGUgcm9vbS4gVGhpcyB3aWxsIGRpc2Nvbm5lY3QgdGhlIHBhcnRpY2lwYW50XG4gICAgICogYW5kIHdpbGwgZW1pdCBhIERpc2Nvbm5lY3RlZCBldmVudCBmb3IgdGhhdCBwYXJ0aWNpcGFudC5cbiAgICAgKiBFdmVuIGFmdGVyIGJlaW5nIHJlbW92ZWQsIHRoZSBwYXJ0aWNpcGFudCBjYW4gc3RpbGwgcmUtam9pbiB0aGUgcm9vbS5cbiAgICAgKiBAcGFyYW0gcm9vbVxuICAgICAqIEBwYXJhbSBpZGVudGl0eVxuICAgICAqL1xuICAgIHJlbW92ZVBhcnRpY2lwYW50KHJvb20sIGlkZW50aXR5KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnJwYy5yZXF1ZXN0KHN2YywgJ1JlbW92ZVBhcnRpY2lwYW50JywgbGl2ZWtpdF9yb29tXzEuUm9vbVBhcnRpY2lwYW50SWRlbnRpdHkudG9KU09OKHsgcm9vbSwgaWRlbnRpdHkgfSksIHRoaXMuYXV0aEhlYWRlcih7IHJvb21BZG1pbjogdHJ1ZSwgcm9vbSB9KSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNdXRlcyBhIHRyYWNrIHRoYXQgdGhlIHBhcnRpY2lwYW50IGhhcyBwdWJsaXNoZWQuXG4gICAgICogQHBhcmFtIHJvb21cbiAgICAgKiBAcGFyYW0gaWRlbnRpdHlcbiAgICAgKiBAcGFyYW0gdHJhY2tTaWQgc2lkIG9mIHRoZSB0cmFjayB0byBiZSBtdXRlZFxuICAgICAqIEBwYXJhbSBtdXRlZCB0cnVlIHRvIG11dGUsIGZhbHNlIHRvIHVubXV0ZVxuICAgICAqL1xuICAgIG11dGVQdWJsaXNoZWRUcmFjayhyb29tLCBpZGVudGl0eSwgdHJhY2tTaWQsIG11dGVkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXEgPSBsaXZla2l0X3Jvb21fMS5NdXRlUm9vbVRyYWNrUmVxdWVzdC50b0pTT04oe1xuICAgICAgICAgICAgICAgIHJvb20sXG4gICAgICAgICAgICAgICAgaWRlbnRpdHksXG4gICAgICAgICAgICAgICAgdHJhY2tTaWQsXG4gICAgICAgICAgICAgICAgbXV0ZWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCB0aGlzLnJwYy5yZXF1ZXN0KHN2YywgJ011dGVQdWJsaXNoZWRUcmFjaycsIHJlcSwgdGhpcy5hdXRoSGVhZGVyKHsgcm9vbUFkbWluOiB0cnVlLCByb29tIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGxpdmVraXRfcm9vbV8xLk11dGVSb29tVHJhY2tSZXNwb25zZS5mcm9tSlNPTihkYXRhKTtcbiAgICAgICAgICAgIHJldHVybiByZXMudHJhY2s7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGEgcGFydGljaXBhbnQncyBtZXRhZGF0YSBvciBwZXJtaXNzaW9uc1xuICAgICAqIEBwYXJhbSByb29tXG4gICAgICogQHBhcmFtIGlkZW50aXR5XG4gICAgICogQHBhcmFtIG1ldGFkYXRhIG9wdGlvbmFsLCBtZXRhZGF0YSB0byB1cGRhdGVcbiAgICAgKiBAcGFyYW0gcGVybWlzc2lvbiBvcHRpb25hbCwgbmV3IHBlcm1pc3Npb25zIHRvIGFzc2lnbiB0byBwYXJ0aWNpcGFudFxuICAgICAqIEBwYXJhbSBuYW1lIG9wdGlvbmFsLCBuZXcgbmFtZSBmb3IgcGFydGljaXBhbnRcbiAgICAgKi9cbiAgICB1cGRhdGVQYXJ0aWNpcGFudChyb29tLCBpZGVudGl0eSwgbWV0YWRhdGEsIHBlcm1pc3Npb24sIG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcSA9IHtcbiAgICAgICAgICAgICAgICByb29tLFxuICAgICAgICAgICAgICAgIGlkZW50aXR5LFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YSB8fCAnJyxcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lIHx8ICcnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChwZXJtaXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgcmVxLnBlcm1pc3Npb24gPSBsaXZla2l0X21vZGVsc18xLlBhcnRpY2lwYW50UGVybWlzc2lvbi5mcm9tUGFydGlhbChwZXJtaXNzaW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCB0aGlzLnJwYy5yZXF1ZXN0KHN2YywgJ1VwZGF0ZVBhcnRpY2lwYW50JywgbGl2ZWtpdF9yb29tXzEuVXBkYXRlUGFydGljaXBhbnRSZXF1ZXN0LnRvSlNPTihyZXEpLCB0aGlzLmF1dGhIZWFkZXIoeyByb29tQWRtaW46IHRydWUsIHJvb20gfSkpO1xuICAgICAgICAgICAgcmV0dXJuIGxpdmVraXRfbW9kZWxzXzEuUGFydGljaXBhbnRJbmZvLmZyb21KU09OKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBhIHBhcnRpY2lwYW50J3Mgc3Vic2NyaXB0aW9uIHRvIHRyYWNrc1xuICAgICAqIEBwYXJhbSByb29tXG4gICAgICogQHBhcmFtIGlkZW50aXR5XG4gICAgICogQHBhcmFtIHRyYWNrU2lkc1xuICAgICAqIEBwYXJhbSBzdWJzY3JpYmUgdHJ1ZSB0byBzdWJzY3JpYmUsIGZhbHNlIHRvIHVuc3Vic2NyaWJlXG4gICAgICovXG4gICAgdXBkYXRlU3Vic2NyaXB0aW9ucyhyb29tLCBpZGVudGl0eSwgdHJhY2tTaWRzLCBzdWJzY3JpYmUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcSA9IGxpdmVraXRfcm9vbV8xLlVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0LnRvSlNPTih7XG4gICAgICAgICAgICAgICAgcm9vbSxcbiAgICAgICAgICAgICAgICBpZGVudGl0eSxcbiAgICAgICAgICAgICAgICB0cmFja1NpZHMsXG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlLFxuICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50VHJhY2tzOiBbXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5ycGMucmVxdWVzdChzdmMsICdVcGRhdGVTdWJzY3JpcHRpb25zJywgcmVxLCB0aGlzLmF1dGhIZWFkZXIoeyByb29tQWRtaW46IHRydWUsIHJvb20gfSkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2VuZERhdGEocm9vbSwgZGF0YSwga2luZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBkZXN0aW5hdGlvblNpZHMgPSBBcnJheS5pc0FycmF5KG9wdGlvbnMpID8gb3B0aW9ucyA6IG9wdGlvbnMuZGVzdGluYXRpb25TaWRzO1xuICAgICAgICAgICAgY29uc3QgdG9waWMgPSBBcnJheS5pc0FycmF5KG9wdGlvbnMpID8gdW5kZWZpbmVkIDogb3B0aW9ucy50b3BpYztcbiAgICAgICAgICAgIGNvbnN0IHJlcSA9IHtcbiAgICAgICAgICAgICAgICByb29tLFxuICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvblNpZHM6IGRlc3RpbmF0aW9uU2lkcyAhPT0gbnVsbCAmJiBkZXN0aW5hdGlvblNpZHMgIT09IHZvaWQgMCA/IGRlc3RpbmF0aW9uU2lkcyA6IFtdLFxuICAgICAgICAgICAgICAgIHRvcGljLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShvcHRpb25zKSAmJiBvcHRpb25zLmRlc3RpbmF0aW9uSWRlbnRpdGllcykge1xuICAgICAgICAgICAgICAgIHJlcS5kZXN0aW5hdGlvbklkZW50aXRpZXMgPSBvcHRpb25zLmRlc3RpbmF0aW9uSWRlbnRpdGllcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHlpZWxkIHRoaXMucnBjLnJlcXVlc3Qoc3ZjLCAnU2VuZERhdGEnLCBsaXZla2l0X3Jvb21fMS5TZW5kRGF0YVJlcXVlc3QudG9KU09OKHJlcSksIHRoaXMuYXV0aEhlYWRlcih7IHJvb21BZG1pbjogdHJ1ZSwgcm9vbSB9KSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuUm9vbVNlcnZpY2VDbGllbnQgPSBSb29tU2VydmljZUNsaWVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJvb21TZXJ2aWNlQ2xpZW50LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/livekit-server-sdk/dist/RoomServiceClient.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/livekit-server-sdk/dist/ServiceBase.js":
/*!*************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/ServiceBase.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst AccessToken_1 = __webpack_require__(/*! ./AccessToken */ \"(ssr)/./node_modules/livekit-server-sdk/dist/AccessToken.js\");\n/**\n * Utilities to handle authentication\n */\nclass ServiceBase {\n    /**\n     * @param apiKey API Key.\n     * @param secret API Secret.\n     * @param ttl token TTL\n     */\n    constructor(apiKey, secret, ttl) {\n        this.apiKey = apiKey;\n        this.secret = secret;\n        this.ttl = ttl || '10m';\n    }\n    authHeader(grant) {\n        const at = new AccessToken_1.AccessToken(this.apiKey, this.secret, { ttl: this.ttl });\n        at.addGrant(grant);\n        return {\n            Authorization: `Bearer ${at.toJwt()}`,\n        };\n    }\n}\nexports[\"default\"] = ServiceBase;\n//# sourceMappingURL=ServiceBase.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvU2VydmljZUJhc2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsc0JBQXNCLG1CQUFPLENBQUMsa0ZBQWU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkVBQTZFLGVBQWU7QUFDNUY7QUFDQTtBQUNBLHFDQUFxQyxXQUFXO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLGtCQUFlO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saXZlc3RyZWFtLy4vbm9kZV9tb2R1bGVzL2xpdmVraXQtc2VydmVyLXNkay9kaXN0L1NlcnZpY2VCYXNlLmpzP2ZkNjciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBBY2Nlc3NUb2tlbl8xID0gcmVxdWlyZShcIi4vQWNjZXNzVG9rZW5cIik7XG4vKipcbiAqIFV0aWxpdGllcyB0byBoYW5kbGUgYXV0aGVudGljYXRpb25cbiAqL1xuY2xhc3MgU2VydmljZUJhc2Uge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBhcGlLZXkgQVBJIEtleS5cbiAgICAgKiBAcGFyYW0gc2VjcmV0IEFQSSBTZWNyZXQuXG4gICAgICogQHBhcmFtIHR0bCB0b2tlbiBUVExcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhcGlLZXksIHNlY3JldCwgdHRsKSB7XG4gICAgICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xuICAgICAgICB0aGlzLnNlY3JldCA9IHNlY3JldDtcbiAgICAgICAgdGhpcy50dGwgPSB0dGwgfHwgJzEwbSc7XG4gICAgfVxuICAgIGF1dGhIZWFkZXIoZ3JhbnQpIHtcbiAgICAgICAgY29uc3QgYXQgPSBuZXcgQWNjZXNzVG9rZW5fMS5BY2Nlc3NUb2tlbih0aGlzLmFwaUtleSwgdGhpcy5zZWNyZXQsIHsgdHRsOiB0aGlzLnR0bCB9KTtcbiAgICAgICAgYXQuYWRkR3JhbnQoZ3JhbnQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2F0LnRvSnd0KCl9YCxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBTZXJ2aWNlQmFzZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNlcnZpY2VCYXNlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/livekit-server-sdk/dist/ServiceBase.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/livekit-server-sdk/dist/TwirpRPC.js":
/*!**********************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/TwirpRPC.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.TwirpRpc = exports.livekitPackage = void 0;\nconst axios_1 = __importDefault(__webpack_require__(/*! axios */ \"(ssr)/./node_modules/axios/dist/node/axios.cjs\"));\nconst camelcase_keys_1 = __importDefault(__webpack_require__(/*! camelcase-keys */ \"(ssr)/./node_modules/camelcase-keys/index.js\"));\n// twirp RPC adapter for client implementation\nconst defaultPrefix = '/twirp';\nexports.livekitPackage = 'livekit';\n/**\n * JSON based Twirp V7 RPC\n */\nclass TwirpRpc {\n    constructor(host, pkg, prefix) {\n        if (host.startsWith('ws')) {\n            host = host.replace('ws', 'http');\n        }\n        this.host = host;\n        this.pkg = pkg;\n        this.prefix = prefix || defaultPrefix;\n        this.instance = axios_1.default.create({\n            baseURL: host,\n        });\n    }\n    request(service, method, data, headers) {\n        return new Promise((resolve, reject) => {\n            const path = `${this.prefix}/${this.pkg}.${service}/${method}`;\n            this.instance\n                .post(path, data, { headers })\n                .then((res) => {\n                resolve(camelcase_keys_1.default(res.data, { deep: true }));\n            })\n                .catch(reject);\n        });\n    }\n}\nexports.TwirpRpc = TwirpRpc;\n//# sourceMappingURL=TwirpRPC.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvVHdpcnBSUEMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxnQkFBZ0IsR0FBRyxzQkFBc0I7QUFDekMsZ0NBQWdDLG1CQUFPLENBQUMsNkRBQU87QUFDL0MseUNBQXlDLG1CQUFPLENBQUMsb0VBQWdCO0FBQ2pFO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLFlBQVksR0FBRyxTQUFTLEdBQUcsUUFBUSxHQUFHLE9BQU87QUFDekU7QUFDQSxvQ0FBb0MsU0FBUztBQUM3QztBQUNBLDZEQUE2RCxZQUFZO0FBQ3pFLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGl2ZXN0cmVhbS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9Ud2lycFJQQy5qcz9mZDRlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Ud2lycFJwYyA9IGV4cG9ydHMubGl2ZWtpdFBhY2thZ2UgPSB2b2lkIDA7XG5jb25zdCBheGlvc18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJheGlvc1wiKSk7XG5jb25zdCBjYW1lbGNhc2Vfa2V5c18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJjYW1lbGNhc2Uta2V5c1wiKSk7XG4vLyB0d2lycCBSUEMgYWRhcHRlciBmb3IgY2xpZW50IGltcGxlbWVudGF0aW9uXG5jb25zdCBkZWZhdWx0UHJlZml4ID0gJy90d2lycCc7XG5leHBvcnRzLmxpdmVraXRQYWNrYWdlID0gJ2xpdmVraXQnO1xuLyoqXG4gKiBKU09OIGJhc2VkIFR3aXJwIFY3IFJQQ1xuICovXG5jbGFzcyBUd2lycFJwYyB7XG4gICAgY29uc3RydWN0b3IoaG9zdCwgcGtnLCBwcmVmaXgpIHtcbiAgICAgICAgaWYgKGhvc3Quc3RhcnRzV2l0aCgnd3MnKSkge1xuICAgICAgICAgICAgaG9zdCA9IGhvc3QucmVwbGFjZSgnd3MnLCAnaHR0cCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaG9zdCA9IGhvc3Q7XG4gICAgICAgIHRoaXMucGtnID0gcGtnO1xuICAgICAgICB0aGlzLnByZWZpeCA9IHByZWZpeCB8fCBkZWZhdWx0UHJlZml4O1xuICAgICAgICB0aGlzLmluc3RhbmNlID0gYXhpb3NfMS5kZWZhdWx0LmNyZWF0ZSh7XG4gICAgICAgICAgICBiYXNlVVJMOiBob3N0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVxdWVzdChzZXJ2aWNlLCBtZXRob2QsIGRhdGEsIGhlYWRlcnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLnByZWZpeH0vJHt0aGlzLnBrZ30uJHtzZXJ2aWNlfS8ke21ldGhvZH1gO1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZVxuICAgICAgICAgICAgICAgIC5wb3N0KHBhdGgsIGRhdGEsIHsgaGVhZGVycyB9KVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGNhbWVsY2FzZV9rZXlzXzEuZGVmYXVsdChyZXMuZGF0YSwgeyBkZWVwOiB0cnVlIH0pKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuVHdpcnBScGMgPSBUd2lycFJwYztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVR3aXJwUlBDLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/livekit-server-sdk/dist/TwirpRPC.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/livekit-server-sdk/dist/WebhookReceiver.js":
/*!*****************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/WebhookReceiver.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.WebhookReceiver = exports.authorizeHeader = void 0;\nconst crypto_1 = __importDefault(__webpack_require__(/*! crypto */ \"crypto\"));\nconst AccessToken_1 = __webpack_require__(/*! ./AccessToken */ \"(ssr)/./node_modules/livekit-server-sdk/dist/AccessToken.js\");\nconst livekit_webhook_1 = __webpack_require__(/*! ./proto/livekit_webhook */ \"(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_webhook.js\");\nexports.authorizeHeader = 'Authorize';\nclass WebhookReceiver {\n    constructor(apiKey, apiSecret) {\n        this.verifier = new AccessToken_1.TokenVerifier(apiKey, apiSecret);\n    }\n    /**\n     *\n     * @param body string of the posted body\n     * @param authHeader `Authorization` header from the request\n     * @param skipAuth true to skip auth validation\n     * @returns\n     */\n    receive(body, authHeader, skipAuth = false) {\n        // verify token\n        if (!skipAuth) {\n            if (!authHeader) {\n                throw new Error('authorization header is empty');\n            }\n            const claims = this.verifier.verify(authHeader);\n            // confirm sha\n            const hash = crypto_1.default.createHash('sha256');\n            hash.update(body);\n            if (claims.sha256 !== hash.digest('base64')) {\n                throw new Error('sha256 checksum of body does not match');\n            }\n        }\n        return livekit_webhook_1.WebhookEvent.fromJSON(JSON.parse(body));\n    }\n}\nexports.WebhookReceiver = WebhookReceiver;\n//# sourceMappingURL=WebhookReceiver.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvV2ViaG9va1JlY2VpdmVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsdUJBQXVCLEdBQUcsdUJBQXVCO0FBQ2pELGlDQUFpQyxtQkFBTyxDQUFDLHNCQUFRO0FBQ2pELHNCQUFzQixtQkFBTyxDQUFDLGtGQUFlO0FBQzdDLDBCQUEwQixtQkFBTyxDQUFDLHNHQUF5QjtBQUMzRCx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saXZlc3RyZWFtLy4vbm9kZV9tb2R1bGVzL2xpdmVraXQtc2VydmVyLXNkay9kaXN0L1dlYmhvb2tSZWNlaXZlci5qcz84NTU3Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5XZWJob29rUmVjZWl2ZXIgPSBleHBvcnRzLmF1dGhvcml6ZUhlYWRlciA9IHZvaWQgMDtcbmNvbnN0IGNyeXB0b18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJjcnlwdG9cIikpO1xuY29uc3QgQWNjZXNzVG9rZW5fMSA9IHJlcXVpcmUoXCIuL0FjY2Vzc1Rva2VuXCIpO1xuY29uc3QgbGl2ZWtpdF93ZWJob29rXzEgPSByZXF1aXJlKFwiLi9wcm90by9saXZla2l0X3dlYmhvb2tcIik7XG5leHBvcnRzLmF1dGhvcml6ZUhlYWRlciA9ICdBdXRob3JpemUnO1xuY2xhc3MgV2ViaG9va1JlY2VpdmVyIHtcbiAgICBjb25zdHJ1Y3RvcihhcGlLZXksIGFwaVNlY3JldCkge1xuICAgICAgICB0aGlzLnZlcmlmaWVyID0gbmV3IEFjY2Vzc1Rva2VuXzEuVG9rZW5WZXJpZmllcihhcGlLZXksIGFwaVNlY3JldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIGJvZHkgc3RyaW5nIG9mIHRoZSBwb3N0ZWQgYm9keVxuICAgICAqIEBwYXJhbSBhdXRoSGVhZGVyIGBBdXRob3JpemF0aW9uYCBoZWFkZXIgZnJvbSB0aGUgcmVxdWVzdFxuICAgICAqIEBwYXJhbSBza2lwQXV0aCB0cnVlIHRvIHNraXAgYXV0aCB2YWxpZGF0aW9uXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICByZWNlaXZlKGJvZHksIGF1dGhIZWFkZXIsIHNraXBBdXRoID0gZmFsc2UpIHtcbiAgICAgICAgLy8gdmVyaWZ5IHRva2VuXG4gICAgICAgIGlmICghc2tpcEF1dGgpIHtcbiAgICAgICAgICAgIGlmICghYXV0aEhlYWRlcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYXV0aG9yaXphdGlvbiBoZWFkZXIgaXMgZW1wdHknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNsYWltcyA9IHRoaXMudmVyaWZpZXIudmVyaWZ5KGF1dGhIZWFkZXIpO1xuICAgICAgICAgICAgLy8gY29uZmlybSBzaGFcbiAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBjcnlwdG9fMS5kZWZhdWx0LmNyZWF0ZUhhc2goJ3NoYTI1NicpO1xuICAgICAgICAgICAgaGFzaC51cGRhdGUoYm9keSk7XG4gICAgICAgICAgICBpZiAoY2xhaW1zLnNoYTI1NiAhPT0gaGFzaC5kaWdlc3QoJ2Jhc2U2NCcpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzaGEyNTYgY2hlY2tzdW0gb2YgYm9keSBkb2VzIG5vdCBtYXRjaCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaXZla2l0X3dlYmhvb2tfMS5XZWJob29rRXZlbnQuZnJvbUpTT04oSlNPTi5wYXJzZShib2R5KSk7XG4gICAgfVxufVxuZXhwb3J0cy5XZWJob29rUmVjZWl2ZXIgPSBXZWJob29rUmVjZWl2ZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1XZWJob29rUmVjZWl2ZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/livekit-server-sdk/dist/WebhookReceiver.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/livekit-server-sdk/dist/grants.js":
/*!********************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/grants.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.TrackSource = void 0;\nvar TrackSource;\n(function (TrackSource) {\n    TrackSource[\"CAMERA\"] = \"camera\";\n    TrackSource[\"MICROPHONE\"] = \"microphone\";\n    TrackSource[\"SCREEN_SHARE\"] = \"screen_share\";\n    TrackSource[\"SCREEN_SHARE_AUDIO\"] = \"screen_share_audio\";\n})(TrackSource = exports.TrackSource || (exports.TrackSource = {}));\n//# sourceMappingURL=grants.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvZ3JhbnRzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHdDQUF3QyxtQkFBbUIsS0FBSztBQUNqRSIsInNvdXJjZXMiOlsid2VicGFjazovL2xpdmVzdHJlYW0vLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvZ3JhbnRzLmpzP2M3YzEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlRyYWNrU291cmNlID0gdm9pZCAwO1xudmFyIFRyYWNrU291cmNlO1xuKGZ1bmN0aW9uIChUcmFja1NvdXJjZSkge1xuICAgIFRyYWNrU291cmNlW1wiQ0FNRVJBXCJdID0gXCJjYW1lcmFcIjtcbiAgICBUcmFja1NvdXJjZVtcIk1JQ1JPUEhPTkVcIl0gPSBcIm1pY3JvcGhvbmVcIjtcbiAgICBUcmFja1NvdXJjZVtcIlNDUkVFTl9TSEFSRVwiXSA9IFwic2NyZWVuX3NoYXJlXCI7XG4gICAgVHJhY2tTb3VyY2VbXCJTQ1JFRU5fU0hBUkVfQVVESU9cIl0gPSBcInNjcmVlbl9zaGFyZV9hdWRpb1wiO1xufSkoVHJhY2tTb3VyY2UgPSBleHBvcnRzLlRyYWNrU291cmNlIHx8IChleHBvcnRzLlRyYWNrU291cmNlID0ge30pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdyYW50cy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/livekit-server-sdk/dist/grants.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/livekit-server-sdk/dist/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/index.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.TrackType = exports.TrackInfo = exports.Room = exports.ParticipantPermission = exports.ParticipantInfo_State = exports.ParticipantInfo = exports.DataPacket_Kind = exports.IngressVideoOptions = exports.IngressVideoEncodingPreset = exports.IngressVideoEncodingOptions = exports.IngressState = exports.IngressInput = exports.IngressInfo = exports.IngressAudioOptions = exports.IngressAudioEncodingPreset = exports.IngressAudioEncodingOptions = exports.StreamProtocol = exports.StreamOutput = exports.SegmentedFileProtocol = exports.SegmentedFileOutput = exports.EncodingOptionsPreset = exports.EncodingOptions = exports.EncodedFileType = exports.EncodedFileOutput = exports.EgressInfo = exports.DirectFileOutput = void 0;\n__exportStar(__webpack_require__(/*! ./AccessToken */ \"(ssr)/./node_modules/livekit-server-sdk/dist/AccessToken.js\"), exports);\n__exportStar(__webpack_require__(/*! ./EgressClient */ \"(ssr)/./node_modules/livekit-server-sdk/dist/EgressClient.js\"), exports);\n__exportStar(__webpack_require__(/*! ./IngressClient */ \"(ssr)/./node_modules/livekit-server-sdk/dist/IngressClient.js\"), exports);\n__exportStar(__webpack_require__(/*! ./RoomServiceClient */ \"(ssr)/./node_modules/livekit-server-sdk/dist/RoomServiceClient.js\"), exports);\n__exportStar(__webpack_require__(/*! ./WebhookReceiver */ \"(ssr)/./node_modules/livekit-server-sdk/dist/WebhookReceiver.js\"), exports);\n__exportStar(__webpack_require__(/*! ./grants */ \"(ssr)/./node_modules/livekit-server-sdk/dist/grants.js\"), exports);\nvar livekit_egress_1 = __webpack_require__(/*! ./proto/livekit_egress */ \"(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_egress.js\");\nObject.defineProperty(exports, \"DirectFileOutput\", ({ enumerable: true, get: function () { return livekit_egress_1.DirectFileOutput; } }));\nObject.defineProperty(exports, \"EgressInfo\", ({ enumerable: true, get: function () { return livekit_egress_1.EgressInfo; } }));\nObject.defineProperty(exports, \"EncodedFileOutput\", ({ enumerable: true, get: function () { return livekit_egress_1.EncodedFileOutput; } }));\nObject.defineProperty(exports, \"EncodedFileType\", ({ enumerable: true, get: function () { return livekit_egress_1.EncodedFileType; } }));\nObject.defineProperty(exports, \"EncodingOptions\", ({ enumerable: true, get: function () { return livekit_egress_1.EncodingOptions; } }));\nObject.defineProperty(exports, \"EncodingOptionsPreset\", ({ enumerable: true, get: function () { return livekit_egress_1.EncodingOptionsPreset; } }));\nObject.defineProperty(exports, \"SegmentedFileOutput\", ({ enumerable: true, get: function () { return livekit_egress_1.SegmentedFileOutput; } }));\nObject.defineProperty(exports, \"SegmentedFileProtocol\", ({ enumerable: true, get: function () { return livekit_egress_1.SegmentedFileProtocol; } }));\nObject.defineProperty(exports, \"StreamOutput\", ({ enumerable: true, get: function () { return livekit_egress_1.StreamOutput; } }));\nObject.defineProperty(exports, \"StreamProtocol\", ({ enumerable: true, get: function () { return livekit_egress_1.StreamProtocol; } }));\nvar livekit_ingress_1 = __webpack_require__(/*! ./proto/livekit_ingress */ \"(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_ingress.js\");\nObject.defineProperty(exports, \"IngressAudioEncodingOptions\", ({ enumerable: true, get: function () { return livekit_ingress_1.IngressAudioEncodingOptions; } }));\nObject.defineProperty(exports, \"IngressAudioEncodingPreset\", ({ enumerable: true, get: function () { return livekit_ingress_1.IngressAudioEncodingPreset; } }));\nObject.defineProperty(exports, \"IngressAudioOptions\", ({ enumerable: true, get: function () { return livekit_ingress_1.IngressAudioOptions; } }));\nObject.defineProperty(exports, \"IngressInfo\", ({ enumerable: true, get: function () { return livekit_ingress_1.IngressInfo; } }));\nObject.defineProperty(exports, \"IngressInput\", ({ enumerable: true, get: function () { return livekit_ingress_1.IngressInput; } }));\nObject.defineProperty(exports, \"IngressState\", ({ enumerable: true, get: function () { return livekit_ingress_1.IngressState; } }));\nObject.defineProperty(exports, \"IngressVideoEncodingOptions\", ({ enumerable: true, get: function () { return livekit_ingress_1.IngressVideoEncodingOptions; } }));\nObject.defineProperty(exports, \"IngressVideoEncodingPreset\", ({ enumerable: true, get: function () { return livekit_ingress_1.IngressVideoEncodingPreset; } }));\nObject.defineProperty(exports, \"IngressVideoOptions\", ({ enumerable: true, get: function () { return livekit_ingress_1.IngressVideoOptions; } }));\nvar livekit_models_1 = __webpack_require__(/*! ./proto/livekit_models */ \"(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_models.js\");\nObject.defineProperty(exports, \"DataPacket_Kind\", ({ enumerable: true, get: function () { return livekit_models_1.DataPacket_Kind; } }));\nObject.defineProperty(exports, \"ParticipantInfo\", ({ enumerable: true, get: function () { return livekit_models_1.ParticipantInfo; } }));\nObject.defineProperty(exports, \"ParticipantInfo_State\", ({ enumerable: true, get: function () { return livekit_models_1.ParticipantInfo_State; } }));\nObject.defineProperty(exports, \"ParticipantPermission\", ({ enumerable: true, get: function () { return livekit_models_1.ParticipantPermission; } }));\nObject.defineProperty(exports, \"Room\", ({ enumerable: true, get: function () { return livekit_models_1.Room; } }));\nObject.defineProperty(exports, \"TrackInfo\", ({ enumerable: true, get: function () { return livekit_models_1.TrackInfo; } }));\nObject.defineProperty(exports, \"TrackType\", ({ enumerable: true, get: function () { return livekit_models_1.TrackType; } }));\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0EsbUNBQW1DLG9DQUFvQyxnQkFBZ0I7QUFDdkYsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGlCQUFpQixHQUFHLGlCQUFpQixHQUFHLFlBQVksR0FBRyw2QkFBNkIsR0FBRyw2QkFBNkIsR0FBRyx1QkFBdUIsR0FBRyx1QkFBdUIsR0FBRywyQkFBMkIsR0FBRyxrQ0FBa0MsR0FBRyxtQ0FBbUMsR0FBRyxvQkFBb0IsR0FBRyxvQkFBb0IsR0FBRyxtQkFBbUIsR0FBRywyQkFBMkIsR0FBRyxrQ0FBa0MsR0FBRyxtQ0FBbUMsR0FBRyxzQkFBc0IsR0FBRyxvQkFBb0IsR0FBRyw2QkFBNkIsR0FBRywyQkFBMkIsR0FBRyw2QkFBNkIsR0FBRyx1QkFBdUIsR0FBRyx1QkFBdUIsR0FBRyx5QkFBeUIsR0FBRyxrQkFBa0IsR0FBRyx3QkFBd0I7QUFDNXNCLGFBQWEsbUJBQU8sQ0FBQyxrRkFBZTtBQUNwQyxhQUFhLG1CQUFPLENBQUMsb0ZBQWdCO0FBQ3JDLGFBQWEsbUJBQU8sQ0FBQyxzRkFBaUI7QUFDdEMsYUFBYSxtQkFBTyxDQUFDLDhGQUFxQjtBQUMxQyxhQUFhLG1CQUFPLENBQUMsMEZBQW1CO0FBQ3hDLGFBQWEsbUJBQU8sQ0FBQyx3RUFBVTtBQUMvQix1QkFBdUIsbUJBQU8sQ0FBQyxvR0FBd0I7QUFDdkQsb0RBQW1ELEVBQUUscUNBQXFDLDZDQUE2QyxFQUFDO0FBQ3hJLDhDQUE2QyxFQUFFLHFDQUFxQyx1Q0FBdUMsRUFBQztBQUM1SCxxREFBb0QsRUFBRSxxQ0FBcUMsOENBQThDLEVBQUM7QUFDMUksbURBQWtELEVBQUUscUNBQXFDLDRDQUE0QyxFQUFDO0FBQ3RJLG1EQUFrRCxFQUFFLHFDQUFxQyw0Q0FBNEMsRUFBQztBQUN0SSx5REFBd0QsRUFBRSxxQ0FBcUMsa0RBQWtELEVBQUM7QUFDbEosdURBQXNELEVBQUUscUNBQXFDLGdEQUFnRCxFQUFDO0FBQzlJLHlEQUF3RCxFQUFFLHFDQUFxQyxrREFBa0QsRUFBQztBQUNsSixnREFBK0MsRUFBRSxxQ0FBcUMseUNBQXlDLEVBQUM7QUFDaEksa0RBQWlELEVBQUUscUNBQXFDLDJDQUEyQyxFQUFDO0FBQ3BJLHdCQUF3QixtQkFBTyxDQUFDLHNHQUF5QjtBQUN6RCwrREFBOEQsRUFBRSxxQ0FBcUMseURBQXlELEVBQUM7QUFDL0osOERBQTZELEVBQUUscUNBQXFDLHdEQUF3RCxFQUFDO0FBQzdKLHVEQUFzRCxFQUFFLHFDQUFxQyxpREFBaUQsRUFBQztBQUMvSSwrQ0FBOEMsRUFBRSxxQ0FBcUMseUNBQXlDLEVBQUM7QUFDL0gsZ0RBQStDLEVBQUUscUNBQXFDLDBDQUEwQyxFQUFDO0FBQ2pJLGdEQUErQyxFQUFFLHFDQUFxQywwQ0FBMEMsRUFBQztBQUNqSSwrREFBOEQsRUFBRSxxQ0FBcUMseURBQXlELEVBQUM7QUFDL0osOERBQTZELEVBQUUscUNBQXFDLHdEQUF3RCxFQUFDO0FBQzdKLHVEQUFzRCxFQUFFLHFDQUFxQyxpREFBaUQsRUFBQztBQUMvSSx1QkFBdUIsbUJBQU8sQ0FBQyxvR0FBd0I7QUFDdkQsbURBQWtELEVBQUUscUNBQXFDLDRDQUE0QyxFQUFDO0FBQ3RJLG1EQUFrRCxFQUFFLHFDQUFxQyw0Q0FBNEMsRUFBQztBQUN0SSx5REFBd0QsRUFBRSxxQ0FBcUMsa0RBQWtELEVBQUM7QUFDbEoseURBQXdELEVBQUUscUNBQXFDLGtEQUFrRCxFQUFDO0FBQ2xKLHdDQUF1QyxFQUFFLHFDQUFxQyxpQ0FBaUMsRUFBQztBQUNoSCw2Q0FBNEMsRUFBRSxxQ0FBcUMsc0NBQXNDLEVBQUM7QUFDMUgsNkNBQTRDLEVBQUUscUNBQXFDLHNDQUFzQyxFQUFDO0FBQzFIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGl2ZXN0cmVhbS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9pbmRleC5qcz81ODhkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX2V4cG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9fZXhwb3J0U3RhcikgfHwgZnVuY3Rpb24obSwgZXhwb3J0cykge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZXhwb3J0cywgcCkpIF9fY3JlYXRlQmluZGluZyhleHBvcnRzLCBtLCBwKTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlRyYWNrVHlwZSA9IGV4cG9ydHMuVHJhY2tJbmZvID0gZXhwb3J0cy5Sb29tID0gZXhwb3J0cy5QYXJ0aWNpcGFudFBlcm1pc3Npb24gPSBleHBvcnRzLlBhcnRpY2lwYW50SW5mb19TdGF0ZSA9IGV4cG9ydHMuUGFydGljaXBhbnRJbmZvID0gZXhwb3J0cy5EYXRhUGFja2V0X0tpbmQgPSBleHBvcnRzLkluZ3Jlc3NWaWRlb09wdGlvbnMgPSBleHBvcnRzLkluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0ID0gZXhwb3J0cy5JbmdyZXNzVmlkZW9FbmNvZGluZ09wdGlvbnMgPSBleHBvcnRzLkluZ3Jlc3NTdGF0ZSA9IGV4cG9ydHMuSW5ncmVzc0lucHV0ID0gZXhwb3J0cy5JbmdyZXNzSW5mbyA9IGV4cG9ydHMuSW5ncmVzc0F1ZGlvT3B0aW9ucyA9IGV4cG9ydHMuSW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXQgPSBleHBvcnRzLkluZ3Jlc3NBdWRpb0VuY29kaW5nT3B0aW9ucyA9IGV4cG9ydHMuU3RyZWFtUHJvdG9jb2wgPSBleHBvcnRzLlN0cmVhbU91dHB1dCA9IGV4cG9ydHMuU2VnbWVudGVkRmlsZVByb3RvY29sID0gZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0ID0gZXhwb3J0cy5FbmNvZGluZ09wdGlvbnNQcmVzZXQgPSBleHBvcnRzLkVuY29kaW5nT3B0aW9ucyA9IGV4cG9ydHMuRW5jb2RlZEZpbGVUeXBlID0gZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dCA9IGV4cG9ydHMuRWdyZXNzSW5mbyA9IGV4cG9ydHMuRGlyZWN0RmlsZU91dHB1dCA9IHZvaWQgMDtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9BY2Nlc3NUb2tlblwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vRWdyZXNzQ2xpZW50XCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9JbmdyZXNzQ2xpZW50XCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9Sb29tU2VydmljZUNsaWVudFwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vV2ViaG9va1JlY2VpdmVyXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9ncmFudHNcIiksIGV4cG9ydHMpO1xudmFyIGxpdmVraXRfZWdyZXNzXzEgPSByZXF1aXJlKFwiLi9wcm90by9saXZla2l0X2VncmVzc1wiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkRpcmVjdEZpbGVPdXRwdXRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGxpdmVraXRfZWdyZXNzXzEuRGlyZWN0RmlsZU91dHB1dDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkVncmVzc0luZm9cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGxpdmVraXRfZWdyZXNzXzEuRWdyZXNzSW5mbzsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkVuY29kZWRGaWxlT3V0cHV0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXZla2l0X2VncmVzc18xLkVuY29kZWRGaWxlT3V0cHV0OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRW5jb2RlZEZpbGVUeXBlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXZla2l0X2VncmVzc18xLkVuY29kZWRGaWxlVHlwZTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkVuY29kaW5nT3B0aW9uc1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGl2ZWtpdF9lZ3Jlc3NfMS5FbmNvZGluZ09wdGlvbnM7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJFbmNvZGluZ09wdGlvbnNQcmVzZXRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGxpdmVraXRfZWdyZXNzXzEuRW5jb2RpbmdPcHRpb25zUHJlc2V0OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiU2VnbWVudGVkRmlsZU91dHB1dFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGl2ZWtpdF9lZ3Jlc3NfMS5TZWdtZW50ZWRGaWxlT3V0cHV0OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiU2VnbWVudGVkRmlsZVByb3RvY29sXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXZla2l0X2VncmVzc18xLlNlZ21lbnRlZEZpbGVQcm90b2NvbDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlN0cmVhbU91dHB1dFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGl2ZWtpdF9lZ3Jlc3NfMS5TdHJlYW1PdXRwdXQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJTdHJlYW1Qcm90b2NvbFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGl2ZWtpdF9lZ3Jlc3NfMS5TdHJlYW1Qcm90b2NvbDsgfSB9KTtcbnZhciBsaXZla2l0X2luZ3Jlc3NfMSA9IHJlcXVpcmUoXCIuL3Byb3RvL2xpdmVraXRfaW5ncmVzc1wiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkluZ3Jlc3NBdWRpb0VuY29kaW5nT3B0aW9uc1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGl2ZWtpdF9pbmdyZXNzXzEuSW5ncmVzc0F1ZGlvRW5jb2RpbmdPcHRpb25zOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiSW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGxpdmVraXRfaW5ncmVzc18xLkluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiSW5ncmVzc0F1ZGlvT3B0aW9uc1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGl2ZWtpdF9pbmdyZXNzXzEuSW5ncmVzc0F1ZGlvT3B0aW9uczsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkluZ3Jlc3NJbmZvXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXZla2l0X2luZ3Jlc3NfMS5JbmdyZXNzSW5mbzsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkluZ3Jlc3NJbnB1dFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGl2ZWtpdF9pbmdyZXNzXzEuSW5ncmVzc0lucHV0OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiSW5ncmVzc1N0YXRlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXZla2l0X2luZ3Jlc3NfMS5JbmdyZXNzU3RhdGU7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJJbmdyZXNzVmlkZW9FbmNvZGluZ09wdGlvbnNcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGxpdmVraXRfaW5ncmVzc18xLkluZ3Jlc3NWaWRlb0VuY29kaW5nT3B0aW9uczsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXZla2l0X2luZ3Jlc3NfMS5JbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkluZ3Jlc3NWaWRlb09wdGlvbnNcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGxpdmVraXRfaW5ncmVzc18xLkluZ3Jlc3NWaWRlb09wdGlvbnM7IH0gfSk7XG52YXIgbGl2ZWtpdF9tb2RlbHNfMSA9IHJlcXVpcmUoXCIuL3Byb3RvL2xpdmVraXRfbW9kZWxzXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRGF0YVBhY2tldF9LaW5kXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXZla2l0X21vZGVsc18xLkRhdGFQYWNrZXRfS2luZDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlBhcnRpY2lwYW50SW5mb1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGl2ZWtpdF9tb2RlbHNfMS5QYXJ0aWNpcGFudEluZm87IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJQYXJ0aWNpcGFudEluZm9fU3RhdGVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGxpdmVraXRfbW9kZWxzXzEuUGFydGljaXBhbnRJbmZvX1N0YXRlOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUGFydGljaXBhbnRQZXJtaXNzaW9uXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXZla2l0X21vZGVsc18xLlBhcnRpY2lwYW50UGVybWlzc2lvbjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlJvb21cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGxpdmVraXRfbW9kZWxzXzEuUm9vbTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlRyYWNrSW5mb1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGl2ZWtpdF9tb2RlbHNfMS5UcmFja0luZm87IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJUcmFja1R5cGVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGxpdmVraXRfbW9kZWxzXzEuVHJhY2tUeXBlOyB9IH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/livekit-server-sdk/dist/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/livekit-server-sdk/dist/proto/google/protobuf/timestamp.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/proto/google/protobuf/timestamp.js ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Timestamp = exports.protobufPackage = void 0;\n/* eslint-disable */\nconst long_1 = __importDefault(__webpack_require__(/*! long */ \"(ssr)/./node_modules/long/umd/index.js\"));\nconst minimal_1 = __importDefault(__webpack_require__(/*! protobufjs/minimal */ \"(ssr)/./node_modules/protobufjs/minimal.js\"));\nexports.protobufPackage = \"google.protobuf\";\nfunction createBaseTimestamp() {\n    return { seconds: 0, nanos: 0 };\n}\nexports.Timestamp = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.seconds !== 0) {\n            writer.uint32(8).int64(message.seconds);\n        }\n        if (message.nanos !== 0) {\n            writer.uint32(16).int32(message.nanos);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseTimestamp();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.seconds = longToNumber(reader.int64());\n                    break;\n                case 2:\n                    message.nanos = reader.int32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            seconds: isSet(object.seconds) ? Number(object.seconds) : 0,\n            nanos: isSet(object.nanos) ? Number(object.nanos) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.seconds !== undefined && (obj.seconds = Math.round(message.seconds));\n        message.nanos !== undefined && (obj.nanos = Math.round(message.nanos));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseTimestamp();\n        message.seconds = (_a = object.seconds) !== null && _a !== void 0 ? _a : 0;\n        message.nanos = (_b = object.nanos) !== null && _b !== void 0 ? _b : 0;\n        return message;\n    },\n};\nvar globalThis = (() => {\n    if (typeof globalThis !== \"undefined\") {\n        return globalThis;\n    }\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    if (typeof window !== \"undefined\") {\n        return window;\n    }\n    if (typeof global !== \"undefined\") {\n        return global;\n    }\n    throw \"Unable to locate global object\";\n})();\nfunction longToNumber(long) {\n    if (long.gt(Number.MAX_SAFE_INTEGER)) {\n        throw new globalThis.Error(\"Value is larger than Number.MAX_SAFE_INTEGER\");\n    }\n    return long.toNumber();\n}\nif (minimal_1.default.util.Long !== long_1.default) {\n    minimal_1.default.util.Long = long_1.default;\n    minimal_1.default.configure();\n}\nfunction isSet(value) {\n    return value !== null && value !== undefined;\n}\n//# sourceMappingURL=timestamp.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvcHJvdG8vZ29vZ2xlL3Byb3RvYnVmL3RpbWVzdGFtcC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGlCQUFpQixHQUFHLHVCQUF1QjtBQUMzQztBQUNBLCtCQUErQixtQkFBTyxDQUFDLG9EQUFNO0FBQzdDLGtDQUFrQyxtQkFBTyxDQUFDLHNFQUFvQjtBQUM5RCx1QkFBdUI7QUFDdkI7QUFDQSxhQUFhO0FBQ2I7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGl2ZXN0cmVhbS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9wcm90by9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wLmpzPzljNGYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlRpbWVzdGFtcCA9IGV4cG9ydHMucHJvdG9idWZQYWNrYWdlID0gdm9pZCAwO1xuLyogZXNsaW50LWRpc2FibGUgKi9cbmNvbnN0IGxvbmdfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwibG9uZ1wiKSk7XG5jb25zdCBtaW5pbWFsXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcInByb3RvYnVmanMvbWluaW1hbFwiKSk7XG5leHBvcnRzLnByb3RvYnVmUGFja2FnZSA9IFwiZ29vZ2xlLnByb3RvYnVmXCI7XG5mdW5jdGlvbiBjcmVhdGVCYXNlVGltZXN0YW1wKCkge1xuICAgIHJldHVybiB7IHNlY29uZHM6IDAsIG5hbm9zOiAwIH07XG59XG5leHBvcnRzLlRpbWVzdGFtcCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnNlY29uZHMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoOCkuaW50NjQobWVzc2FnZS5zZWNvbmRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5uYW5vcyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNikuaW50MzIobWVzc2FnZS5uYW5vcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVGltZXN0YW1wKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZWNvbmRzID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm5hbm9zID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlY29uZHM6IGlzU2V0KG9iamVjdC5zZWNvbmRzKSA/IE51bWJlcihvYmplY3Quc2Vjb25kcykgOiAwLFxuICAgICAgICAgICAgbmFub3M6IGlzU2V0KG9iamVjdC5uYW5vcykgPyBOdW1iZXIob2JqZWN0Lm5hbm9zKSA6IDAsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5zZWNvbmRzICE9PSB1bmRlZmluZWQgJiYgKG9iai5zZWNvbmRzID0gTWF0aC5yb3VuZChtZXNzYWdlLnNlY29uZHMpKTtcbiAgICAgICAgbWVzc2FnZS5uYW5vcyAhPT0gdW5kZWZpbmVkICYmIChvYmoubmFub3MgPSBNYXRoLnJvdW5kKG1lc3NhZ2UubmFub3MpKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRpbWVzdGFtcCgpO1xuICAgICAgICBtZXNzYWdlLnNlY29uZHMgPSAoX2EgPSBvYmplY3Quc2Vjb25kcykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcbiAgICAgICAgbWVzc2FnZS5uYW5vcyA9IChfYiA9IG9iamVjdC5uYW5vcykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG52YXIgZ2xvYmFsVGhpcyA9ICgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWxUaGlzO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWw7XG4gICAgfVxuICAgIHRocm93IFwiVW5hYmxlIHRvIGxvY2F0ZSBnbG9iYWwgb2JqZWN0XCI7XG59KSgpO1xuZnVuY3Rpb24gbG9uZ1RvTnVtYmVyKGxvbmcpIHtcbiAgICBpZiAobG9uZy5ndChOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikpIHtcbiAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXCJWYWx1ZSBpcyBsYXJnZXIgdGhhbiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGxvbmcudG9OdW1iZXIoKTtcbn1cbmlmIChtaW5pbWFsXzEuZGVmYXVsdC51dGlsLkxvbmcgIT09IGxvbmdfMS5kZWZhdWx0KSB7XG4gICAgbWluaW1hbF8xLmRlZmF1bHQudXRpbC5Mb25nID0gbG9uZ18xLmRlZmF1bHQ7XG4gICAgbWluaW1hbF8xLmRlZmF1bHQuY29uZmlndXJlKCk7XG59XG5mdW5jdGlvbiBpc1NldCh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZXN0YW1wLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/livekit-server-sdk/dist/proto/google/protobuf/timestamp.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_egress.js":
/*!**********************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/proto/livekit_egress.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.StreamInfo = exports.StreamInfoList = exports.EgressInfo = exports.StopEgressRequest = exports.ListEgressResponse = exports.ListEgressRequest = exports.UpdateOutputsRequest = exports.UpdateStreamRequest = exports.UpdateLayoutRequest = exports.EncodingOptions = exports.StreamOutput = exports.AliOSSUpload = exports.AzureBlobUpload = exports.GCPUpload = exports.S3Upload_MetadataEntry = exports.S3Upload = exports.ImageOutput = exports.DirectFileOutput = exports.SegmentedFileOutput = exports.EncodedFileOutput = exports.TrackEgressRequest = exports.TrackCompositeEgressRequest = exports.ParticipantEgressRequest = exports.WebEgressRequest = exports.RoomCompositeEgressRequest = exports.streamInfo_StatusToJSON = exports.streamInfo_StatusFromJSON = exports.StreamInfo_Status = exports.egressStatusToJSON = exports.egressStatusFromJSON = exports.EgressStatus = exports.encodingOptionsPresetToJSON = exports.encodingOptionsPresetFromJSON = exports.EncodingOptionsPreset = exports.streamProtocolToJSON = exports.streamProtocolFromJSON = exports.StreamProtocol = exports.imageFileSuffixToJSON = exports.imageFileSuffixFromJSON = exports.ImageFileSuffix = exports.segmentedFileSuffixToJSON = exports.segmentedFileSuffixFromJSON = exports.SegmentedFileSuffix = exports.segmentedFileProtocolToJSON = exports.segmentedFileProtocolFromJSON = exports.SegmentedFileProtocol = exports.encodedFileTypeToJSON = exports.encodedFileTypeFromJSON = exports.EncodedFileType = exports.protobufPackage = void 0;\nexports.AutoTrackEgress = exports.AutoParticipantEgress = exports.ImagesInfo = exports.SegmentsInfo = exports.FileInfo = void 0;\n/* eslint-disable */\nconst long_1 = __importDefault(__webpack_require__(/*! long */ \"(ssr)/./node_modules/long/umd/index.js\"));\nconst minimal_1 = __importDefault(__webpack_require__(/*! protobufjs/minimal */ \"(ssr)/./node_modules/protobufjs/minimal.js\"));\nconst livekit_models_1 = __webpack_require__(/*! ./livekit_models */ \"(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_models.js\");\nexports.protobufPackage = \"livekit\";\nvar EncodedFileType;\n(function (EncodedFileType) {\n    /** DEFAULT_FILETYPE - file type chosen based on codecs */\n    EncodedFileType[EncodedFileType[\"DEFAULT_FILETYPE\"] = 0] = \"DEFAULT_FILETYPE\";\n    EncodedFileType[EncodedFileType[\"MP4\"] = 1] = \"MP4\";\n    EncodedFileType[EncodedFileType[\"OGG\"] = 2] = \"OGG\";\n    EncodedFileType[EncodedFileType[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(EncodedFileType = exports.EncodedFileType || (exports.EncodedFileType = {}));\nfunction encodedFileTypeFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"DEFAULT_FILETYPE\":\n            return EncodedFileType.DEFAULT_FILETYPE;\n        case 1:\n        case \"MP4\":\n            return EncodedFileType.MP4;\n        case 2:\n        case \"OGG\":\n            return EncodedFileType.OGG;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return EncodedFileType.UNRECOGNIZED;\n    }\n}\nexports.encodedFileTypeFromJSON = encodedFileTypeFromJSON;\nfunction encodedFileTypeToJSON(object) {\n    switch (object) {\n        case EncodedFileType.DEFAULT_FILETYPE:\n            return \"DEFAULT_FILETYPE\";\n        case EncodedFileType.MP4:\n            return \"MP4\";\n        case EncodedFileType.OGG:\n            return \"OGG\";\n        case EncodedFileType.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.encodedFileTypeToJSON = encodedFileTypeToJSON;\nvar SegmentedFileProtocol;\n(function (SegmentedFileProtocol) {\n    SegmentedFileProtocol[SegmentedFileProtocol[\"DEFAULT_SEGMENTED_FILE_PROTOCOL\"] = 0] = \"DEFAULT_SEGMENTED_FILE_PROTOCOL\";\n    SegmentedFileProtocol[SegmentedFileProtocol[\"HLS_PROTOCOL\"] = 1] = \"HLS_PROTOCOL\";\n    SegmentedFileProtocol[SegmentedFileProtocol[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(SegmentedFileProtocol = exports.SegmentedFileProtocol || (exports.SegmentedFileProtocol = {}));\nfunction segmentedFileProtocolFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"DEFAULT_SEGMENTED_FILE_PROTOCOL\":\n            return SegmentedFileProtocol.DEFAULT_SEGMENTED_FILE_PROTOCOL;\n        case 1:\n        case \"HLS_PROTOCOL\":\n            return SegmentedFileProtocol.HLS_PROTOCOL;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return SegmentedFileProtocol.UNRECOGNIZED;\n    }\n}\nexports.segmentedFileProtocolFromJSON = segmentedFileProtocolFromJSON;\nfunction segmentedFileProtocolToJSON(object) {\n    switch (object) {\n        case SegmentedFileProtocol.DEFAULT_SEGMENTED_FILE_PROTOCOL:\n            return \"DEFAULT_SEGMENTED_FILE_PROTOCOL\";\n        case SegmentedFileProtocol.HLS_PROTOCOL:\n            return \"HLS_PROTOCOL\";\n        case SegmentedFileProtocol.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.segmentedFileProtocolToJSON = segmentedFileProtocolToJSON;\nvar SegmentedFileSuffix;\n(function (SegmentedFileSuffix) {\n    SegmentedFileSuffix[SegmentedFileSuffix[\"INDEX\"] = 0] = \"INDEX\";\n    SegmentedFileSuffix[SegmentedFileSuffix[\"TIMESTAMP\"] = 1] = \"TIMESTAMP\";\n    SegmentedFileSuffix[SegmentedFileSuffix[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(SegmentedFileSuffix = exports.SegmentedFileSuffix || (exports.SegmentedFileSuffix = {}));\nfunction segmentedFileSuffixFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"INDEX\":\n            return SegmentedFileSuffix.INDEX;\n        case 1:\n        case \"TIMESTAMP\":\n            return SegmentedFileSuffix.TIMESTAMP;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return SegmentedFileSuffix.UNRECOGNIZED;\n    }\n}\nexports.segmentedFileSuffixFromJSON = segmentedFileSuffixFromJSON;\nfunction segmentedFileSuffixToJSON(object) {\n    switch (object) {\n        case SegmentedFileSuffix.INDEX:\n            return \"INDEX\";\n        case SegmentedFileSuffix.TIMESTAMP:\n            return \"TIMESTAMP\";\n        case SegmentedFileSuffix.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.segmentedFileSuffixToJSON = segmentedFileSuffixToJSON;\nvar ImageFileSuffix;\n(function (ImageFileSuffix) {\n    ImageFileSuffix[ImageFileSuffix[\"IMAGE_SUFFIX_INDEX\"] = 0] = \"IMAGE_SUFFIX_INDEX\";\n    ImageFileSuffix[ImageFileSuffix[\"IMAGE_SUFFIX_TIMESTAMP\"] = 1] = \"IMAGE_SUFFIX_TIMESTAMP\";\n    ImageFileSuffix[ImageFileSuffix[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ImageFileSuffix = exports.ImageFileSuffix || (exports.ImageFileSuffix = {}));\nfunction imageFileSuffixFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"IMAGE_SUFFIX_INDEX\":\n            return ImageFileSuffix.IMAGE_SUFFIX_INDEX;\n        case 1:\n        case \"IMAGE_SUFFIX_TIMESTAMP\":\n            return ImageFileSuffix.IMAGE_SUFFIX_TIMESTAMP;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ImageFileSuffix.UNRECOGNIZED;\n    }\n}\nexports.imageFileSuffixFromJSON = imageFileSuffixFromJSON;\nfunction imageFileSuffixToJSON(object) {\n    switch (object) {\n        case ImageFileSuffix.IMAGE_SUFFIX_INDEX:\n            return \"IMAGE_SUFFIX_INDEX\";\n        case ImageFileSuffix.IMAGE_SUFFIX_TIMESTAMP:\n            return \"IMAGE_SUFFIX_TIMESTAMP\";\n        case ImageFileSuffix.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.imageFileSuffixToJSON = imageFileSuffixToJSON;\nvar StreamProtocol;\n(function (StreamProtocol) {\n    /** DEFAULT_PROTOCOL - protocol chosen based on urls */\n    StreamProtocol[StreamProtocol[\"DEFAULT_PROTOCOL\"] = 0] = \"DEFAULT_PROTOCOL\";\n    StreamProtocol[StreamProtocol[\"RTMP\"] = 1] = \"RTMP\";\n    StreamProtocol[StreamProtocol[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(StreamProtocol = exports.StreamProtocol || (exports.StreamProtocol = {}));\nfunction streamProtocolFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"DEFAULT_PROTOCOL\":\n            return StreamProtocol.DEFAULT_PROTOCOL;\n        case 1:\n        case \"RTMP\":\n            return StreamProtocol.RTMP;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return StreamProtocol.UNRECOGNIZED;\n    }\n}\nexports.streamProtocolFromJSON = streamProtocolFromJSON;\nfunction streamProtocolToJSON(object) {\n    switch (object) {\n        case StreamProtocol.DEFAULT_PROTOCOL:\n            return \"DEFAULT_PROTOCOL\";\n        case StreamProtocol.RTMP:\n            return \"RTMP\";\n        case StreamProtocol.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.streamProtocolToJSON = streamProtocolToJSON;\nvar EncodingOptionsPreset;\n(function (EncodingOptionsPreset) {\n    /** H264_720P_30 - 1280x720, 30fps, 3000kpbs, H.264_MAIN / OPUS */\n    EncodingOptionsPreset[EncodingOptionsPreset[\"H264_720P_30\"] = 0] = \"H264_720P_30\";\n    /** H264_720P_60 - 1280x720, 60fps, 4500kbps, H.264_MAIN / OPUS */\n    EncodingOptionsPreset[EncodingOptionsPreset[\"H264_720P_60\"] = 1] = \"H264_720P_60\";\n    /** H264_1080P_30 - 1920x1080, 30fps, 4500kbps, H.264_MAIN / OPUS */\n    EncodingOptionsPreset[EncodingOptionsPreset[\"H264_1080P_30\"] = 2] = \"H264_1080P_30\";\n    /** H264_1080P_60 - 1920x1080, 60fps, 6000kbps, H.264_MAIN / OPUS */\n    EncodingOptionsPreset[EncodingOptionsPreset[\"H264_1080P_60\"] = 3] = \"H264_1080P_60\";\n    /** PORTRAIT_H264_720P_30 - 720x1280, 30fps, 3000kpbs, H.264_MAIN / OPUS */\n    EncodingOptionsPreset[EncodingOptionsPreset[\"PORTRAIT_H264_720P_30\"] = 4] = \"PORTRAIT_H264_720P_30\";\n    /** PORTRAIT_H264_720P_60 - 720x1280, 60fps, 4500kbps, H.264_MAIN / OPUS */\n    EncodingOptionsPreset[EncodingOptionsPreset[\"PORTRAIT_H264_720P_60\"] = 5] = \"PORTRAIT_H264_720P_60\";\n    /** PORTRAIT_H264_1080P_30 - 1080x1920, 30fps, 4500kbps, H.264_MAIN / OPUS */\n    EncodingOptionsPreset[EncodingOptionsPreset[\"PORTRAIT_H264_1080P_30\"] = 6] = \"PORTRAIT_H264_1080P_30\";\n    /** PORTRAIT_H264_1080P_60 - 1080x1920, 60fps, 6000kbps, H.264_MAIN / OPUS */\n    EncodingOptionsPreset[EncodingOptionsPreset[\"PORTRAIT_H264_1080P_60\"] = 7] = \"PORTRAIT_H264_1080P_60\";\n    EncodingOptionsPreset[EncodingOptionsPreset[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(EncodingOptionsPreset = exports.EncodingOptionsPreset || (exports.EncodingOptionsPreset = {}));\nfunction encodingOptionsPresetFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"H264_720P_30\":\n            return EncodingOptionsPreset.H264_720P_30;\n        case 1:\n        case \"H264_720P_60\":\n            return EncodingOptionsPreset.H264_720P_60;\n        case 2:\n        case \"H264_1080P_30\":\n            return EncodingOptionsPreset.H264_1080P_30;\n        case 3:\n        case \"H264_1080P_60\":\n            return EncodingOptionsPreset.H264_1080P_60;\n        case 4:\n        case \"PORTRAIT_H264_720P_30\":\n            return EncodingOptionsPreset.PORTRAIT_H264_720P_30;\n        case 5:\n        case \"PORTRAIT_H264_720P_60\":\n            return EncodingOptionsPreset.PORTRAIT_H264_720P_60;\n        case 6:\n        case \"PORTRAIT_H264_1080P_30\":\n            return EncodingOptionsPreset.PORTRAIT_H264_1080P_30;\n        case 7:\n        case \"PORTRAIT_H264_1080P_60\":\n            return EncodingOptionsPreset.PORTRAIT_H264_1080P_60;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return EncodingOptionsPreset.UNRECOGNIZED;\n    }\n}\nexports.encodingOptionsPresetFromJSON = encodingOptionsPresetFromJSON;\nfunction encodingOptionsPresetToJSON(object) {\n    switch (object) {\n        case EncodingOptionsPreset.H264_720P_30:\n            return \"H264_720P_30\";\n        case EncodingOptionsPreset.H264_720P_60:\n            return \"H264_720P_60\";\n        case EncodingOptionsPreset.H264_1080P_30:\n            return \"H264_1080P_30\";\n        case EncodingOptionsPreset.H264_1080P_60:\n            return \"H264_1080P_60\";\n        case EncodingOptionsPreset.PORTRAIT_H264_720P_30:\n            return \"PORTRAIT_H264_720P_30\";\n        case EncodingOptionsPreset.PORTRAIT_H264_720P_60:\n            return \"PORTRAIT_H264_720P_60\";\n        case EncodingOptionsPreset.PORTRAIT_H264_1080P_30:\n            return \"PORTRAIT_H264_1080P_30\";\n        case EncodingOptionsPreset.PORTRAIT_H264_1080P_60:\n            return \"PORTRAIT_H264_1080P_60\";\n        case EncodingOptionsPreset.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.encodingOptionsPresetToJSON = encodingOptionsPresetToJSON;\nvar EgressStatus;\n(function (EgressStatus) {\n    EgressStatus[EgressStatus[\"EGRESS_STARTING\"] = 0] = \"EGRESS_STARTING\";\n    EgressStatus[EgressStatus[\"EGRESS_ACTIVE\"] = 1] = \"EGRESS_ACTIVE\";\n    EgressStatus[EgressStatus[\"EGRESS_ENDING\"] = 2] = \"EGRESS_ENDING\";\n    EgressStatus[EgressStatus[\"EGRESS_COMPLETE\"] = 3] = \"EGRESS_COMPLETE\";\n    EgressStatus[EgressStatus[\"EGRESS_FAILED\"] = 4] = \"EGRESS_FAILED\";\n    EgressStatus[EgressStatus[\"EGRESS_ABORTED\"] = 5] = \"EGRESS_ABORTED\";\n    EgressStatus[EgressStatus[\"EGRESS_LIMIT_REACHED\"] = 6] = \"EGRESS_LIMIT_REACHED\";\n    EgressStatus[EgressStatus[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(EgressStatus = exports.EgressStatus || (exports.EgressStatus = {}));\nfunction egressStatusFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"EGRESS_STARTING\":\n            return EgressStatus.EGRESS_STARTING;\n        case 1:\n        case \"EGRESS_ACTIVE\":\n            return EgressStatus.EGRESS_ACTIVE;\n        case 2:\n        case \"EGRESS_ENDING\":\n            return EgressStatus.EGRESS_ENDING;\n        case 3:\n        case \"EGRESS_COMPLETE\":\n            return EgressStatus.EGRESS_COMPLETE;\n        case 4:\n        case \"EGRESS_FAILED\":\n            return EgressStatus.EGRESS_FAILED;\n        case 5:\n        case \"EGRESS_ABORTED\":\n            return EgressStatus.EGRESS_ABORTED;\n        case 6:\n        case \"EGRESS_LIMIT_REACHED\":\n            return EgressStatus.EGRESS_LIMIT_REACHED;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return EgressStatus.UNRECOGNIZED;\n    }\n}\nexports.egressStatusFromJSON = egressStatusFromJSON;\nfunction egressStatusToJSON(object) {\n    switch (object) {\n        case EgressStatus.EGRESS_STARTING:\n            return \"EGRESS_STARTING\";\n        case EgressStatus.EGRESS_ACTIVE:\n            return \"EGRESS_ACTIVE\";\n        case EgressStatus.EGRESS_ENDING:\n            return \"EGRESS_ENDING\";\n        case EgressStatus.EGRESS_COMPLETE:\n            return \"EGRESS_COMPLETE\";\n        case EgressStatus.EGRESS_FAILED:\n            return \"EGRESS_FAILED\";\n        case EgressStatus.EGRESS_ABORTED:\n            return \"EGRESS_ABORTED\";\n        case EgressStatus.EGRESS_LIMIT_REACHED:\n            return \"EGRESS_LIMIT_REACHED\";\n        case EgressStatus.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.egressStatusToJSON = egressStatusToJSON;\nvar StreamInfo_Status;\n(function (StreamInfo_Status) {\n    StreamInfo_Status[StreamInfo_Status[\"ACTIVE\"] = 0] = \"ACTIVE\";\n    StreamInfo_Status[StreamInfo_Status[\"FINISHED\"] = 1] = \"FINISHED\";\n    StreamInfo_Status[StreamInfo_Status[\"FAILED\"] = 2] = \"FAILED\";\n    StreamInfo_Status[StreamInfo_Status[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(StreamInfo_Status = exports.StreamInfo_Status || (exports.StreamInfo_Status = {}));\nfunction streamInfo_StatusFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"ACTIVE\":\n            return StreamInfo_Status.ACTIVE;\n        case 1:\n        case \"FINISHED\":\n            return StreamInfo_Status.FINISHED;\n        case 2:\n        case \"FAILED\":\n            return StreamInfo_Status.FAILED;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return StreamInfo_Status.UNRECOGNIZED;\n    }\n}\nexports.streamInfo_StatusFromJSON = streamInfo_StatusFromJSON;\nfunction streamInfo_StatusToJSON(object) {\n    switch (object) {\n        case StreamInfo_Status.ACTIVE:\n            return \"ACTIVE\";\n        case StreamInfo_Status.FINISHED:\n            return \"FINISHED\";\n        case StreamInfo_Status.FAILED:\n            return \"FAILED\";\n        case StreamInfo_Status.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.streamInfo_StatusToJSON = streamInfo_StatusToJSON;\nfunction createBaseRoomCompositeEgressRequest() {\n    return {\n        roomName: \"\",\n        layout: \"\",\n        audioOnly: false,\n        videoOnly: false,\n        customBaseUrl: \"\",\n        file: undefined,\n        stream: undefined,\n        segments: undefined,\n        preset: undefined,\n        advanced: undefined,\n        fileOutputs: [],\n        streamOutputs: [],\n        segmentOutputs: [],\n        imageOutputs: [],\n    };\n}\nexports.RoomCompositeEgressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(10).string(message.roomName);\n        }\n        if (message.layout !== undefined && message.layout !== \"\") {\n            writer.uint32(18).string(message.layout);\n        }\n        if (message.audioOnly === true) {\n            writer.uint32(24).bool(message.audioOnly);\n        }\n        if (message.videoOnly === true) {\n            writer.uint32(32).bool(message.videoOnly);\n        }\n        if (message.customBaseUrl !== undefined && message.customBaseUrl !== \"\") {\n            writer.uint32(42).string(message.customBaseUrl);\n        }\n        if (message.file !== undefined) {\n            exports.EncodedFileOutput.encode(message.file, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.stream !== undefined) {\n            exports.StreamOutput.encode(message.stream, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.segments !== undefined) {\n            exports.SegmentedFileOutput.encode(message.segments, writer.uint32(82).fork()).ldelim();\n        }\n        if (message.preset !== undefined) {\n            writer.uint32(64).int32(message.preset);\n        }\n        if (message.advanced !== undefined) {\n            exports.EncodingOptions.encode(message.advanced, writer.uint32(74).fork()).ldelim();\n        }\n        if (message.fileOutputs !== undefined && message.fileOutputs.length !== 0) {\n            for (const v of message.fileOutputs) {\n                exports.EncodedFileOutput.encode(v, writer.uint32(90).fork()).ldelim();\n            }\n        }\n        if (message.streamOutputs !== undefined && message.streamOutputs.length !== 0) {\n            for (const v of message.streamOutputs) {\n                exports.StreamOutput.encode(v, writer.uint32(98).fork()).ldelim();\n            }\n        }\n        if (message.segmentOutputs !== undefined && message.segmentOutputs.length !== 0) {\n            for (const v of message.segmentOutputs) {\n                exports.SegmentedFileOutput.encode(v, writer.uint32(106).fork()).ldelim();\n            }\n        }\n        if (message.imageOutputs !== undefined && message.imageOutputs.length !== 0) {\n            for (const v of message.imageOutputs) {\n                exports.ImageOutput.encode(v, writer.uint32(114).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseRoomCompositeEgressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.roomName = reader.string();\n                    break;\n                case 2:\n                    message.layout = reader.string();\n                    break;\n                case 3:\n                    message.audioOnly = reader.bool();\n                    break;\n                case 4:\n                    message.videoOnly = reader.bool();\n                    break;\n                case 5:\n                    message.customBaseUrl = reader.string();\n                    break;\n                case 6:\n                    message.file = exports.EncodedFileOutput.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.stream = exports.StreamOutput.decode(reader, reader.uint32());\n                    break;\n                case 10:\n                    message.segments = exports.SegmentedFileOutput.decode(reader, reader.uint32());\n                    break;\n                case 8:\n                    message.preset = reader.int32();\n                    break;\n                case 9:\n                    message.advanced = exports.EncodingOptions.decode(reader, reader.uint32());\n                    break;\n                case 11:\n                    message.fileOutputs.push(exports.EncodedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                case 12:\n                    message.streamOutputs.push(exports.StreamOutput.decode(reader, reader.uint32()));\n                    break;\n                case 13:\n                    message.segmentOutputs.push(exports.SegmentedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                case 14:\n                    message.imageOutputs.push(exports.ImageOutput.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            layout: isSet(object.layout) ? String(object.layout) : \"\",\n            audioOnly: isSet(object.audioOnly) ? Boolean(object.audioOnly) : false,\n            videoOnly: isSet(object.videoOnly) ? Boolean(object.videoOnly) : false,\n            customBaseUrl: isSet(object.customBaseUrl) ? String(object.customBaseUrl) : \"\",\n            file: isSet(object.file) ? exports.EncodedFileOutput.fromJSON(object.file) : undefined,\n            stream: isSet(object.stream) ? exports.StreamOutput.fromJSON(object.stream) : undefined,\n            segments: isSet(object.segments) ? exports.SegmentedFileOutput.fromJSON(object.segments) : undefined,\n            preset: isSet(object.preset) ? encodingOptionsPresetFromJSON(object.preset) : undefined,\n            advanced: isSet(object.advanced) ? exports.EncodingOptions.fromJSON(object.advanced) : undefined,\n            fileOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.fileOutputs)\n                ? object.fileOutputs.map((e) => exports.EncodedFileOutput.fromJSON(e))\n                : [],\n            streamOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.streamOutputs)\n                ? object.streamOutputs.map((e) => exports.StreamOutput.fromJSON(e))\n                : [],\n            segmentOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.segmentOutputs)\n                ? object.segmentOutputs.map((e) => exports.SegmentedFileOutput.fromJSON(e))\n                : [],\n            imageOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.imageOutputs)\n                ? object.imageOutputs.map((e) => exports.ImageOutput.fromJSON(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.layout !== undefined && (obj.layout = message.layout);\n        message.audioOnly !== undefined && (obj.audioOnly = message.audioOnly);\n        message.videoOnly !== undefined && (obj.videoOnly = message.videoOnly);\n        message.customBaseUrl !== undefined && (obj.customBaseUrl = message.customBaseUrl);\n        message.file !== undefined && (obj.file = message.file ? exports.EncodedFileOutput.toJSON(message.file) : undefined);\n        message.stream !== undefined && (obj.stream = message.stream ? exports.StreamOutput.toJSON(message.stream) : undefined);\n        message.segments !== undefined &&\n            (obj.segments = message.segments ? exports.SegmentedFileOutput.toJSON(message.segments) : undefined);\n        message.preset !== undefined &&\n            (obj.preset = message.preset !== undefined ? encodingOptionsPresetToJSON(message.preset) : undefined);\n        message.advanced !== undefined &&\n            (obj.advanced = message.advanced ? exports.EncodingOptions.toJSON(message.advanced) : undefined);\n        if (message.fileOutputs) {\n            obj.fileOutputs = message.fileOutputs.map((e) => e ? exports.EncodedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.fileOutputs = [];\n        }\n        if (message.streamOutputs) {\n            obj.streamOutputs = message.streamOutputs.map((e) => e ? exports.StreamOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.streamOutputs = [];\n        }\n        if (message.segmentOutputs) {\n            obj.segmentOutputs = message.segmentOutputs.map((e) => e ? exports.SegmentedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.segmentOutputs = [];\n        }\n        if (message.imageOutputs) {\n            obj.imageOutputs = message.imageOutputs.map((e) => e ? exports.ImageOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.imageOutputs = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        const message = createBaseRoomCompositeEgressRequest();\n        message.roomName = (_a = object.roomName) !== null && _a !== void 0 ? _a : \"\";\n        message.layout = (_b = object.layout) !== null && _b !== void 0 ? _b : \"\";\n        message.audioOnly = (_c = object.audioOnly) !== null && _c !== void 0 ? _c : false;\n        message.videoOnly = (_d = object.videoOnly) !== null && _d !== void 0 ? _d : false;\n        message.customBaseUrl = (_e = object.customBaseUrl) !== null && _e !== void 0 ? _e : \"\";\n        message.file = (object.file !== undefined && object.file !== null)\n            ? exports.EncodedFileOutput.fromPartial(object.file)\n            : undefined;\n        message.stream = (object.stream !== undefined && object.stream !== null)\n            ? exports.StreamOutput.fromPartial(object.stream)\n            : undefined;\n        message.segments = (object.segments !== undefined && object.segments !== null)\n            ? exports.SegmentedFileOutput.fromPartial(object.segments)\n            : undefined;\n        message.preset = (_f = object.preset) !== null && _f !== void 0 ? _f : undefined;\n        message.advanced = (object.advanced !== undefined && object.advanced !== null)\n            ? exports.EncodingOptions.fromPartial(object.advanced)\n            : undefined;\n        message.fileOutputs = ((_g = object.fileOutputs) === null || _g === void 0 ? void 0 : _g.map((e) => exports.EncodedFileOutput.fromPartial(e))) || [];\n        message.streamOutputs = ((_h = object.streamOutputs) === null || _h === void 0 ? void 0 : _h.map((e) => exports.StreamOutput.fromPartial(e))) || [];\n        message.segmentOutputs = ((_j = object.segmentOutputs) === null || _j === void 0 ? void 0 : _j.map((e) => exports.SegmentedFileOutput.fromPartial(e))) || [];\n        message.imageOutputs = ((_k = object.imageOutputs) === null || _k === void 0 ? void 0 : _k.map((e) => exports.ImageOutput.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseWebEgressRequest() {\n    return {\n        url: \"\",\n        audioOnly: false,\n        videoOnly: false,\n        awaitStartSignal: false,\n        file: undefined,\n        stream: undefined,\n        segments: undefined,\n        preset: undefined,\n        advanced: undefined,\n        fileOutputs: [],\n        streamOutputs: [],\n        segmentOutputs: [],\n        imageOutputs: [],\n    };\n}\nexports.WebEgressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.url !== undefined && message.url !== \"\") {\n            writer.uint32(10).string(message.url);\n        }\n        if (message.audioOnly === true) {\n            writer.uint32(16).bool(message.audioOnly);\n        }\n        if (message.videoOnly === true) {\n            writer.uint32(24).bool(message.videoOnly);\n        }\n        if (message.awaitStartSignal === true) {\n            writer.uint32(96).bool(message.awaitStartSignal);\n        }\n        if (message.file !== undefined) {\n            exports.EncodedFileOutput.encode(message.file, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.stream !== undefined) {\n            exports.StreamOutput.encode(message.stream, writer.uint32(42).fork()).ldelim();\n        }\n        if (message.segments !== undefined) {\n            exports.SegmentedFileOutput.encode(message.segments, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.preset !== undefined) {\n            writer.uint32(56).int32(message.preset);\n        }\n        if (message.advanced !== undefined) {\n            exports.EncodingOptions.encode(message.advanced, writer.uint32(66).fork()).ldelim();\n        }\n        if (message.fileOutputs !== undefined && message.fileOutputs.length !== 0) {\n            for (const v of message.fileOutputs) {\n                exports.EncodedFileOutput.encode(v, writer.uint32(74).fork()).ldelim();\n            }\n        }\n        if (message.streamOutputs !== undefined && message.streamOutputs.length !== 0) {\n            for (const v of message.streamOutputs) {\n                exports.StreamOutput.encode(v, writer.uint32(82).fork()).ldelim();\n            }\n        }\n        if (message.segmentOutputs !== undefined && message.segmentOutputs.length !== 0) {\n            for (const v of message.segmentOutputs) {\n                exports.SegmentedFileOutput.encode(v, writer.uint32(90).fork()).ldelim();\n            }\n        }\n        if (message.imageOutputs !== undefined && message.imageOutputs.length !== 0) {\n            for (const v of message.imageOutputs) {\n                exports.ImageOutput.encode(v, writer.uint32(106).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseWebEgressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.url = reader.string();\n                    break;\n                case 2:\n                    message.audioOnly = reader.bool();\n                    break;\n                case 3:\n                    message.videoOnly = reader.bool();\n                    break;\n                case 12:\n                    message.awaitStartSignal = reader.bool();\n                    break;\n                case 4:\n                    message.file = exports.EncodedFileOutput.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.stream = exports.StreamOutput.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.segments = exports.SegmentedFileOutput.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.preset = reader.int32();\n                    break;\n                case 8:\n                    message.advanced = exports.EncodingOptions.decode(reader, reader.uint32());\n                    break;\n                case 9:\n                    message.fileOutputs.push(exports.EncodedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                case 10:\n                    message.streamOutputs.push(exports.StreamOutput.decode(reader, reader.uint32()));\n                    break;\n                case 11:\n                    message.segmentOutputs.push(exports.SegmentedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                case 13:\n                    message.imageOutputs.push(exports.ImageOutput.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            url: isSet(object.url) ? String(object.url) : \"\",\n            audioOnly: isSet(object.audioOnly) ? Boolean(object.audioOnly) : false,\n            videoOnly: isSet(object.videoOnly) ? Boolean(object.videoOnly) : false,\n            awaitStartSignal: isSet(object.awaitStartSignal) ? Boolean(object.awaitStartSignal) : false,\n            file: isSet(object.file) ? exports.EncodedFileOutput.fromJSON(object.file) : undefined,\n            stream: isSet(object.stream) ? exports.StreamOutput.fromJSON(object.stream) : undefined,\n            segments: isSet(object.segments) ? exports.SegmentedFileOutput.fromJSON(object.segments) : undefined,\n            preset: isSet(object.preset) ? encodingOptionsPresetFromJSON(object.preset) : undefined,\n            advanced: isSet(object.advanced) ? exports.EncodingOptions.fromJSON(object.advanced) : undefined,\n            fileOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.fileOutputs)\n                ? object.fileOutputs.map((e) => exports.EncodedFileOutput.fromJSON(e))\n                : [],\n            streamOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.streamOutputs)\n                ? object.streamOutputs.map((e) => exports.StreamOutput.fromJSON(e))\n                : [],\n            segmentOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.segmentOutputs)\n                ? object.segmentOutputs.map((e) => exports.SegmentedFileOutput.fromJSON(e))\n                : [],\n            imageOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.imageOutputs)\n                ? object.imageOutputs.map((e) => exports.ImageOutput.fromJSON(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.url !== undefined && (obj.url = message.url);\n        message.audioOnly !== undefined && (obj.audioOnly = message.audioOnly);\n        message.videoOnly !== undefined && (obj.videoOnly = message.videoOnly);\n        message.awaitStartSignal !== undefined && (obj.awaitStartSignal = message.awaitStartSignal);\n        message.file !== undefined && (obj.file = message.file ? exports.EncodedFileOutput.toJSON(message.file) : undefined);\n        message.stream !== undefined && (obj.stream = message.stream ? exports.StreamOutput.toJSON(message.stream) : undefined);\n        message.segments !== undefined &&\n            (obj.segments = message.segments ? exports.SegmentedFileOutput.toJSON(message.segments) : undefined);\n        message.preset !== undefined &&\n            (obj.preset = message.preset !== undefined ? encodingOptionsPresetToJSON(message.preset) : undefined);\n        message.advanced !== undefined &&\n            (obj.advanced = message.advanced ? exports.EncodingOptions.toJSON(message.advanced) : undefined);\n        if (message.fileOutputs) {\n            obj.fileOutputs = message.fileOutputs.map((e) => e ? exports.EncodedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.fileOutputs = [];\n        }\n        if (message.streamOutputs) {\n            obj.streamOutputs = message.streamOutputs.map((e) => e ? exports.StreamOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.streamOutputs = [];\n        }\n        if (message.segmentOutputs) {\n            obj.segmentOutputs = message.segmentOutputs.map((e) => e ? exports.SegmentedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.segmentOutputs = [];\n        }\n        if (message.imageOutputs) {\n            obj.imageOutputs = message.imageOutputs.map((e) => e ? exports.ImageOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.imageOutputs = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        const message = createBaseWebEgressRequest();\n        message.url = (_a = object.url) !== null && _a !== void 0 ? _a : \"\";\n        message.audioOnly = (_b = object.audioOnly) !== null && _b !== void 0 ? _b : false;\n        message.videoOnly = (_c = object.videoOnly) !== null && _c !== void 0 ? _c : false;\n        message.awaitStartSignal = (_d = object.awaitStartSignal) !== null && _d !== void 0 ? _d : false;\n        message.file = (object.file !== undefined && object.file !== null)\n            ? exports.EncodedFileOutput.fromPartial(object.file)\n            : undefined;\n        message.stream = (object.stream !== undefined && object.stream !== null)\n            ? exports.StreamOutput.fromPartial(object.stream)\n            : undefined;\n        message.segments = (object.segments !== undefined && object.segments !== null)\n            ? exports.SegmentedFileOutput.fromPartial(object.segments)\n            : undefined;\n        message.preset = (_e = object.preset) !== null && _e !== void 0 ? _e : undefined;\n        message.advanced = (object.advanced !== undefined && object.advanced !== null)\n            ? exports.EncodingOptions.fromPartial(object.advanced)\n            : undefined;\n        message.fileOutputs = ((_f = object.fileOutputs) === null || _f === void 0 ? void 0 : _f.map((e) => exports.EncodedFileOutput.fromPartial(e))) || [];\n        message.streamOutputs = ((_g = object.streamOutputs) === null || _g === void 0 ? void 0 : _g.map((e) => exports.StreamOutput.fromPartial(e))) || [];\n        message.segmentOutputs = ((_h = object.segmentOutputs) === null || _h === void 0 ? void 0 : _h.map((e) => exports.SegmentedFileOutput.fromPartial(e))) || [];\n        message.imageOutputs = ((_j = object.imageOutputs) === null || _j === void 0 ? void 0 : _j.map((e) => exports.ImageOutput.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseParticipantEgressRequest() {\n    return {\n        roomName: \"\",\n        identity: \"\",\n        screenShare: false,\n        preset: undefined,\n        advanced: undefined,\n        fileOutputs: [],\n        streamOutputs: [],\n        segmentOutputs: [],\n        imageOutputs: [],\n    };\n}\nexports.ParticipantEgressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(10).string(message.roomName);\n        }\n        if (message.identity !== undefined && message.identity !== \"\") {\n            writer.uint32(18).string(message.identity);\n        }\n        if (message.screenShare === true) {\n            writer.uint32(24).bool(message.screenShare);\n        }\n        if (message.preset !== undefined) {\n            writer.uint32(32).int32(message.preset);\n        }\n        if (message.advanced !== undefined) {\n            exports.EncodingOptions.encode(message.advanced, writer.uint32(42).fork()).ldelim();\n        }\n        if (message.fileOutputs !== undefined && message.fileOutputs.length !== 0) {\n            for (const v of message.fileOutputs) {\n                exports.EncodedFileOutput.encode(v, writer.uint32(50).fork()).ldelim();\n            }\n        }\n        if (message.streamOutputs !== undefined && message.streamOutputs.length !== 0) {\n            for (const v of message.streamOutputs) {\n                exports.StreamOutput.encode(v, writer.uint32(58).fork()).ldelim();\n            }\n        }\n        if (message.segmentOutputs !== undefined && message.segmentOutputs.length !== 0) {\n            for (const v of message.segmentOutputs) {\n                exports.SegmentedFileOutput.encode(v, writer.uint32(66).fork()).ldelim();\n            }\n        }\n        if (message.imageOutputs !== undefined && message.imageOutputs.length !== 0) {\n            for (const v of message.imageOutputs) {\n                exports.ImageOutput.encode(v, writer.uint32(74).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseParticipantEgressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.roomName = reader.string();\n                    break;\n                case 2:\n                    message.identity = reader.string();\n                    break;\n                case 3:\n                    message.screenShare = reader.bool();\n                    break;\n                case 4:\n                    message.preset = reader.int32();\n                    break;\n                case 5:\n                    message.advanced = exports.EncodingOptions.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.fileOutputs.push(exports.EncodedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                case 7:\n                    message.streamOutputs.push(exports.StreamOutput.decode(reader, reader.uint32()));\n                    break;\n                case 8:\n                    message.segmentOutputs.push(exports.SegmentedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                case 9:\n                    message.imageOutputs.push(exports.ImageOutput.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            identity: isSet(object.identity) ? String(object.identity) : \"\",\n            screenShare: isSet(object.screenShare) ? Boolean(object.screenShare) : false,\n            preset: isSet(object.preset) ? encodingOptionsPresetFromJSON(object.preset) : undefined,\n            advanced: isSet(object.advanced) ? exports.EncodingOptions.fromJSON(object.advanced) : undefined,\n            fileOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.fileOutputs)\n                ? object.fileOutputs.map((e) => exports.EncodedFileOutput.fromJSON(e))\n                : [],\n            streamOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.streamOutputs)\n                ? object.streamOutputs.map((e) => exports.StreamOutput.fromJSON(e))\n                : [],\n            segmentOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.segmentOutputs)\n                ? object.segmentOutputs.map((e) => exports.SegmentedFileOutput.fromJSON(e))\n                : [],\n            imageOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.imageOutputs)\n                ? object.imageOutputs.map((e) => exports.ImageOutput.fromJSON(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.identity !== undefined && (obj.identity = message.identity);\n        message.screenShare !== undefined && (obj.screenShare = message.screenShare);\n        message.preset !== undefined &&\n            (obj.preset = message.preset !== undefined ? encodingOptionsPresetToJSON(message.preset) : undefined);\n        message.advanced !== undefined &&\n            (obj.advanced = message.advanced ? exports.EncodingOptions.toJSON(message.advanced) : undefined);\n        if (message.fileOutputs) {\n            obj.fileOutputs = message.fileOutputs.map((e) => e ? exports.EncodedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.fileOutputs = [];\n        }\n        if (message.streamOutputs) {\n            obj.streamOutputs = message.streamOutputs.map((e) => e ? exports.StreamOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.streamOutputs = [];\n        }\n        if (message.segmentOutputs) {\n            obj.segmentOutputs = message.segmentOutputs.map((e) => e ? exports.SegmentedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.segmentOutputs = [];\n        }\n        if (message.imageOutputs) {\n            obj.imageOutputs = message.imageOutputs.map((e) => e ? exports.ImageOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.imageOutputs = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        const message = createBaseParticipantEgressRequest();\n        message.roomName = (_a = object.roomName) !== null && _a !== void 0 ? _a : \"\";\n        message.identity = (_b = object.identity) !== null && _b !== void 0 ? _b : \"\";\n        message.screenShare = (_c = object.screenShare) !== null && _c !== void 0 ? _c : false;\n        message.preset = (_d = object.preset) !== null && _d !== void 0 ? _d : undefined;\n        message.advanced = (object.advanced !== undefined && object.advanced !== null)\n            ? exports.EncodingOptions.fromPartial(object.advanced)\n            : undefined;\n        message.fileOutputs = ((_e = object.fileOutputs) === null || _e === void 0 ? void 0 : _e.map((e) => exports.EncodedFileOutput.fromPartial(e))) || [];\n        message.streamOutputs = ((_f = object.streamOutputs) === null || _f === void 0 ? void 0 : _f.map((e) => exports.StreamOutput.fromPartial(e))) || [];\n        message.segmentOutputs = ((_g = object.segmentOutputs) === null || _g === void 0 ? void 0 : _g.map((e) => exports.SegmentedFileOutput.fromPartial(e))) || [];\n        message.imageOutputs = ((_h = object.imageOutputs) === null || _h === void 0 ? void 0 : _h.map((e) => exports.ImageOutput.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseTrackCompositeEgressRequest() {\n    return {\n        roomName: \"\",\n        audioTrackId: \"\",\n        videoTrackId: \"\",\n        file: undefined,\n        stream: undefined,\n        segments: undefined,\n        preset: undefined,\n        advanced: undefined,\n        fileOutputs: [],\n        streamOutputs: [],\n        segmentOutputs: [],\n        imageOutputs: [],\n    };\n}\nexports.TrackCompositeEgressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(10).string(message.roomName);\n        }\n        if (message.audioTrackId !== undefined && message.audioTrackId !== \"\") {\n            writer.uint32(18).string(message.audioTrackId);\n        }\n        if (message.videoTrackId !== undefined && message.videoTrackId !== \"\") {\n            writer.uint32(26).string(message.videoTrackId);\n        }\n        if (message.file !== undefined) {\n            exports.EncodedFileOutput.encode(message.file, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.stream !== undefined) {\n            exports.StreamOutput.encode(message.stream, writer.uint32(42).fork()).ldelim();\n        }\n        if (message.segments !== undefined) {\n            exports.SegmentedFileOutput.encode(message.segments, writer.uint32(66).fork()).ldelim();\n        }\n        if (message.preset !== undefined) {\n            writer.uint32(48).int32(message.preset);\n        }\n        if (message.advanced !== undefined) {\n            exports.EncodingOptions.encode(message.advanced, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.fileOutputs !== undefined && message.fileOutputs.length !== 0) {\n            for (const v of message.fileOutputs) {\n                exports.EncodedFileOutput.encode(v, writer.uint32(90).fork()).ldelim();\n            }\n        }\n        if (message.streamOutputs !== undefined && message.streamOutputs.length !== 0) {\n            for (const v of message.streamOutputs) {\n                exports.StreamOutput.encode(v, writer.uint32(98).fork()).ldelim();\n            }\n        }\n        if (message.segmentOutputs !== undefined && message.segmentOutputs.length !== 0) {\n            for (const v of message.segmentOutputs) {\n                exports.SegmentedFileOutput.encode(v, writer.uint32(106).fork()).ldelim();\n            }\n        }\n        if (message.imageOutputs !== undefined && message.imageOutputs.length !== 0) {\n            for (const v of message.imageOutputs) {\n                exports.ImageOutput.encode(v, writer.uint32(114).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseTrackCompositeEgressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.roomName = reader.string();\n                    break;\n                case 2:\n                    message.audioTrackId = reader.string();\n                    break;\n                case 3:\n                    message.videoTrackId = reader.string();\n                    break;\n                case 4:\n                    message.file = exports.EncodedFileOutput.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.stream = exports.StreamOutput.decode(reader, reader.uint32());\n                    break;\n                case 8:\n                    message.segments = exports.SegmentedFileOutput.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.preset = reader.int32();\n                    break;\n                case 7:\n                    message.advanced = exports.EncodingOptions.decode(reader, reader.uint32());\n                    break;\n                case 11:\n                    message.fileOutputs.push(exports.EncodedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                case 12:\n                    message.streamOutputs.push(exports.StreamOutput.decode(reader, reader.uint32()));\n                    break;\n                case 13:\n                    message.segmentOutputs.push(exports.SegmentedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                case 14:\n                    message.imageOutputs.push(exports.ImageOutput.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            audioTrackId: isSet(object.audioTrackId) ? String(object.audioTrackId) : \"\",\n            videoTrackId: isSet(object.videoTrackId) ? String(object.videoTrackId) : \"\",\n            file: isSet(object.file) ? exports.EncodedFileOutput.fromJSON(object.file) : undefined,\n            stream: isSet(object.stream) ? exports.StreamOutput.fromJSON(object.stream) : undefined,\n            segments: isSet(object.segments) ? exports.SegmentedFileOutput.fromJSON(object.segments) : undefined,\n            preset: isSet(object.preset) ? encodingOptionsPresetFromJSON(object.preset) : undefined,\n            advanced: isSet(object.advanced) ? exports.EncodingOptions.fromJSON(object.advanced) : undefined,\n            fileOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.fileOutputs)\n                ? object.fileOutputs.map((e) => exports.EncodedFileOutput.fromJSON(e))\n                : [],\n            streamOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.streamOutputs)\n                ? object.streamOutputs.map((e) => exports.StreamOutput.fromJSON(e))\n                : [],\n            segmentOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.segmentOutputs)\n                ? object.segmentOutputs.map((e) => exports.SegmentedFileOutput.fromJSON(e))\n                : [],\n            imageOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.imageOutputs)\n                ? object.imageOutputs.map((e) => exports.ImageOutput.fromJSON(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.audioTrackId !== undefined && (obj.audioTrackId = message.audioTrackId);\n        message.videoTrackId !== undefined && (obj.videoTrackId = message.videoTrackId);\n        message.file !== undefined && (obj.file = message.file ? exports.EncodedFileOutput.toJSON(message.file) : undefined);\n        message.stream !== undefined && (obj.stream = message.stream ? exports.StreamOutput.toJSON(message.stream) : undefined);\n        message.segments !== undefined &&\n            (obj.segments = message.segments ? exports.SegmentedFileOutput.toJSON(message.segments) : undefined);\n        message.preset !== undefined &&\n            (obj.preset = message.preset !== undefined ? encodingOptionsPresetToJSON(message.preset) : undefined);\n        message.advanced !== undefined &&\n            (obj.advanced = message.advanced ? exports.EncodingOptions.toJSON(message.advanced) : undefined);\n        if (message.fileOutputs) {\n            obj.fileOutputs = message.fileOutputs.map((e) => e ? exports.EncodedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.fileOutputs = [];\n        }\n        if (message.streamOutputs) {\n            obj.streamOutputs = message.streamOutputs.map((e) => e ? exports.StreamOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.streamOutputs = [];\n        }\n        if (message.segmentOutputs) {\n            obj.segmentOutputs = message.segmentOutputs.map((e) => e ? exports.SegmentedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.segmentOutputs = [];\n        }\n        if (message.imageOutputs) {\n            obj.imageOutputs = message.imageOutputs.map((e) => e ? exports.ImageOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.imageOutputs = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        const message = createBaseTrackCompositeEgressRequest();\n        message.roomName = (_a = object.roomName) !== null && _a !== void 0 ? _a : \"\";\n        message.audioTrackId = (_b = object.audioTrackId) !== null && _b !== void 0 ? _b : \"\";\n        message.videoTrackId = (_c = object.videoTrackId) !== null && _c !== void 0 ? _c : \"\";\n        message.file = (object.file !== undefined && object.file !== null)\n            ? exports.EncodedFileOutput.fromPartial(object.file)\n            : undefined;\n        message.stream = (object.stream !== undefined && object.stream !== null)\n            ? exports.StreamOutput.fromPartial(object.stream)\n            : undefined;\n        message.segments = (object.segments !== undefined && object.segments !== null)\n            ? exports.SegmentedFileOutput.fromPartial(object.segments)\n            : undefined;\n        message.preset = (_d = object.preset) !== null && _d !== void 0 ? _d : undefined;\n        message.advanced = (object.advanced !== undefined && object.advanced !== null)\n            ? exports.EncodingOptions.fromPartial(object.advanced)\n            : undefined;\n        message.fileOutputs = ((_e = object.fileOutputs) === null || _e === void 0 ? void 0 : _e.map((e) => exports.EncodedFileOutput.fromPartial(e))) || [];\n        message.streamOutputs = ((_f = object.streamOutputs) === null || _f === void 0 ? void 0 : _f.map((e) => exports.StreamOutput.fromPartial(e))) || [];\n        message.segmentOutputs = ((_g = object.segmentOutputs) === null || _g === void 0 ? void 0 : _g.map((e) => exports.SegmentedFileOutput.fromPartial(e))) || [];\n        message.imageOutputs = ((_h = object.imageOutputs) === null || _h === void 0 ? void 0 : _h.map((e) => exports.ImageOutput.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseTrackEgressRequest() {\n    return { roomName: \"\", trackId: \"\", file: undefined, websocketUrl: undefined };\n}\nexports.TrackEgressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(10).string(message.roomName);\n        }\n        if (message.trackId !== undefined && message.trackId !== \"\") {\n            writer.uint32(18).string(message.trackId);\n        }\n        if (message.file !== undefined) {\n            exports.DirectFileOutput.encode(message.file, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.websocketUrl !== undefined) {\n            writer.uint32(34).string(message.websocketUrl);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseTrackEgressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.roomName = reader.string();\n                    break;\n                case 2:\n                    message.trackId = reader.string();\n                    break;\n                case 3:\n                    message.file = exports.DirectFileOutput.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.websocketUrl = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            trackId: isSet(object.trackId) ? String(object.trackId) : \"\",\n            file: isSet(object.file) ? exports.DirectFileOutput.fromJSON(object.file) : undefined,\n            websocketUrl: isSet(object.websocketUrl) ? String(object.websocketUrl) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.trackId !== undefined && (obj.trackId = message.trackId);\n        message.file !== undefined && (obj.file = message.file ? exports.DirectFileOutput.toJSON(message.file) : undefined);\n        message.websocketUrl !== undefined && (obj.websocketUrl = message.websocketUrl);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseTrackEgressRequest();\n        message.roomName = (_a = object.roomName) !== null && _a !== void 0 ? _a : \"\";\n        message.trackId = (_b = object.trackId) !== null && _b !== void 0 ? _b : \"\";\n        message.file = (object.file !== undefined && object.file !== null)\n            ? exports.DirectFileOutput.fromPartial(object.file)\n            : undefined;\n        message.websocketUrl = (_c = object.websocketUrl) !== null && _c !== void 0 ? _c : undefined;\n        return message;\n    },\n};\nfunction createBaseEncodedFileOutput() {\n    return {\n        fileType: 0,\n        filepath: \"\",\n        disableManifest: false,\n        s3: undefined,\n        gcp: undefined,\n        azure: undefined,\n        aliOSS: undefined,\n    };\n}\nexports.EncodedFileOutput = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.fileType !== undefined && message.fileType !== 0) {\n            writer.uint32(8).int32(message.fileType);\n        }\n        if (message.filepath !== undefined && message.filepath !== \"\") {\n            writer.uint32(18).string(message.filepath);\n        }\n        if (message.disableManifest === true) {\n            writer.uint32(48).bool(message.disableManifest);\n        }\n        if (message.s3 !== undefined) {\n            exports.S3Upload.encode(message.s3, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.gcp !== undefined) {\n            exports.GCPUpload.encode(message.gcp, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.azure !== undefined) {\n            exports.AzureBlobUpload.encode(message.azure, writer.uint32(42).fork()).ldelim();\n        }\n        if (message.aliOSS !== undefined) {\n            exports.AliOSSUpload.encode(message.aliOSS, writer.uint32(58).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseEncodedFileOutput();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.fileType = reader.int32();\n                    break;\n                case 2:\n                    message.filepath = reader.string();\n                    break;\n                case 6:\n                    message.disableManifest = reader.bool();\n                    break;\n                case 3:\n                    message.s3 = exports.S3Upload.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.gcp = exports.GCPUpload.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.azure = exports.AzureBlobUpload.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.aliOSS = exports.AliOSSUpload.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            fileType: isSet(object.fileType) ? encodedFileTypeFromJSON(object.fileType) : 0,\n            filepath: isSet(object.filepath) ? String(object.filepath) : \"\",\n            disableManifest: isSet(object.disableManifest) ? Boolean(object.disableManifest) : false,\n            s3: isSet(object.s3) ? exports.S3Upload.fromJSON(object.s3) : undefined,\n            gcp: isSet(object.gcp) ? exports.GCPUpload.fromJSON(object.gcp) : undefined,\n            azure: isSet(object.azure) ? exports.AzureBlobUpload.fromJSON(object.azure) : undefined,\n            aliOSS: isSet(object.aliOSS) ? exports.AliOSSUpload.fromJSON(object.aliOSS) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.fileType !== undefined && (obj.fileType = encodedFileTypeToJSON(message.fileType));\n        message.filepath !== undefined && (obj.filepath = message.filepath);\n        message.disableManifest !== undefined && (obj.disableManifest = message.disableManifest);\n        message.s3 !== undefined && (obj.s3 = message.s3 ? exports.S3Upload.toJSON(message.s3) : undefined);\n        message.gcp !== undefined && (obj.gcp = message.gcp ? exports.GCPUpload.toJSON(message.gcp) : undefined);\n        message.azure !== undefined && (obj.azure = message.azure ? exports.AzureBlobUpload.toJSON(message.azure) : undefined);\n        message.aliOSS !== undefined && (obj.aliOSS = message.aliOSS ? exports.AliOSSUpload.toJSON(message.aliOSS) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseEncodedFileOutput();\n        message.fileType = (_a = object.fileType) !== null && _a !== void 0 ? _a : 0;\n        message.filepath = (_b = object.filepath) !== null && _b !== void 0 ? _b : \"\";\n        message.disableManifest = (_c = object.disableManifest) !== null && _c !== void 0 ? _c : false;\n        message.s3 = (object.s3 !== undefined && object.s3 !== null) ? exports.S3Upload.fromPartial(object.s3) : undefined;\n        message.gcp = (object.gcp !== undefined && object.gcp !== null) ? exports.GCPUpload.fromPartial(object.gcp) : undefined;\n        message.azure = (object.azure !== undefined && object.azure !== null)\n            ? exports.AzureBlobUpload.fromPartial(object.azure)\n            : undefined;\n        message.aliOSS = (object.aliOSS !== undefined && object.aliOSS !== null)\n            ? exports.AliOSSUpload.fromPartial(object.aliOSS)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseSegmentedFileOutput() {\n    return {\n        protocol: 0,\n        filenamePrefix: \"\",\n        playlistName: \"\",\n        livePlaylistName: \"\",\n        segmentDuration: 0,\n        filenameSuffix: 0,\n        disableManifest: false,\n        s3: undefined,\n        gcp: undefined,\n        azure: undefined,\n        aliOSS: undefined,\n    };\n}\nexports.SegmentedFileOutput = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.protocol !== undefined && message.protocol !== 0) {\n            writer.uint32(8).int32(message.protocol);\n        }\n        if (message.filenamePrefix !== undefined && message.filenamePrefix !== \"\") {\n            writer.uint32(18).string(message.filenamePrefix);\n        }\n        if (message.playlistName !== undefined && message.playlistName !== \"\") {\n            writer.uint32(26).string(message.playlistName);\n        }\n        if (message.livePlaylistName !== undefined && message.livePlaylistName !== \"\") {\n            writer.uint32(90).string(message.livePlaylistName);\n        }\n        if (message.segmentDuration !== undefined && message.segmentDuration !== 0) {\n            writer.uint32(32).uint32(message.segmentDuration);\n        }\n        if (message.filenameSuffix !== undefined && message.filenameSuffix !== 0) {\n            writer.uint32(80).int32(message.filenameSuffix);\n        }\n        if (message.disableManifest === true) {\n            writer.uint32(64).bool(message.disableManifest);\n        }\n        if (message.s3 !== undefined) {\n            exports.S3Upload.encode(message.s3, writer.uint32(42).fork()).ldelim();\n        }\n        if (message.gcp !== undefined) {\n            exports.GCPUpload.encode(message.gcp, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.azure !== undefined) {\n            exports.AzureBlobUpload.encode(message.azure, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.aliOSS !== undefined) {\n            exports.AliOSSUpload.encode(message.aliOSS, writer.uint32(74).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseSegmentedFileOutput();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.protocol = reader.int32();\n                    break;\n                case 2:\n                    message.filenamePrefix = reader.string();\n                    break;\n                case 3:\n                    message.playlistName = reader.string();\n                    break;\n                case 11:\n                    message.livePlaylistName = reader.string();\n                    break;\n                case 4:\n                    message.segmentDuration = reader.uint32();\n                    break;\n                case 10:\n                    message.filenameSuffix = reader.int32();\n                    break;\n                case 8:\n                    message.disableManifest = reader.bool();\n                    break;\n                case 5:\n                    message.s3 = exports.S3Upload.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.gcp = exports.GCPUpload.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.azure = exports.AzureBlobUpload.decode(reader, reader.uint32());\n                    break;\n                case 9:\n                    message.aliOSS = exports.AliOSSUpload.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            protocol: isSet(object.protocol) ? segmentedFileProtocolFromJSON(object.protocol) : 0,\n            filenamePrefix: isSet(object.filenamePrefix) ? String(object.filenamePrefix) : \"\",\n            playlistName: isSet(object.playlistName) ? String(object.playlistName) : \"\",\n            livePlaylistName: isSet(object.livePlaylistName) ? String(object.livePlaylistName) : \"\",\n            segmentDuration: isSet(object.segmentDuration) ? Number(object.segmentDuration) : 0,\n            filenameSuffix: isSet(object.filenameSuffix) ? segmentedFileSuffixFromJSON(object.filenameSuffix) : 0,\n            disableManifest: isSet(object.disableManifest) ? Boolean(object.disableManifest) : false,\n            s3: isSet(object.s3) ? exports.S3Upload.fromJSON(object.s3) : undefined,\n            gcp: isSet(object.gcp) ? exports.GCPUpload.fromJSON(object.gcp) : undefined,\n            azure: isSet(object.azure) ? exports.AzureBlobUpload.fromJSON(object.azure) : undefined,\n            aliOSS: isSet(object.aliOSS) ? exports.AliOSSUpload.fromJSON(object.aliOSS) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.protocol !== undefined && (obj.protocol = segmentedFileProtocolToJSON(message.protocol));\n        message.filenamePrefix !== undefined && (obj.filenamePrefix = message.filenamePrefix);\n        message.playlistName !== undefined && (obj.playlistName = message.playlistName);\n        message.livePlaylistName !== undefined && (obj.livePlaylistName = message.livePlaylistName);\n        message.segmentDuration !== undefined && (obj.segmentDuration = Math.round(message.segmentDuration));\n        message.filenameSuffix !== undefined && (obj.filenameSuffix = segmentedFileSuffixToJSON(message.filenameSuffix));\n        message.disableManifest !== undefined && (obj.disableManifest = message.disableManifest);\n        message.s3 !== undefined && (obj.s3 = message.s3 ? exports.S3Upload.toJSON(message.s3) : undefined);\n        message.gcp !== undefined && (obj.gcp = message.gcp ? exports.GCPUpload.toJSON(message.gcp) : undefined);\n        message.azure !== undefined && (obj.azure = message.azure ? exports.AzureBlobUpload.toJSON(message.azure) : undefined);\n        message.aliOSS !== undefined && (obj.aliOSS = message.aliOSS ? exports.AliOSSUpload.toJSON(message.aliOSS) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        const message = createBaseSegmentedFileOutput();\n        message.protocol = (_a = object.protocol) !== null && _a !== void 0 ? _a : 0;\n        message.filenamePrefix = (_b = object.filenamePrefix) !== null && _b !== void 0 ? _b : \"\";\n        message.playlistName = (_c = object.playlistName) !== null && _c !== void 0 ? _c : \"\";\n        message.livePlaylistName = (_d = object.livePlaylistName) !== null && _d !== void 0 ? _d : \"\";\n        message.segmentDuration = (_e = object.segmentDuration) !== null && _e !== void 0 ? _e : 0;\n        message.filenameSuffix = (_f = object.filenameSuffix) !== null && _f !== void 0 ? _f : 0;\n        message.disableManifest = (_g = object.disableManifest) !== null && _g !== void 0 ? _g : false;\n        message.s3 = (object.s3 !== undefined && object.s3 !== null) ? exports.S3Upload.fromPartial(object.s3) : undefined;\n        message.gcp = (object.gcp !== undefined && object.gcp !== null) ? exports.GCPUpload.fromPartial(object.gcp) : undefined;\n        message.azure = (object.azure !== undefined && object.azure !== null)\n            ? exports.AzureBlobUpload.fromPartial(object.azure)\n            : undefined;\n        message.aliOSS = (object.aliOSS !== undefined && object.aliOSS !== null)\n            ? exports.AliOSSUpload.fromPartial(object.aliOSS)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseDirectFileOutput() {\n    return { filepath: \"\", disableManifest: false, s3: undefined, gcp: undefined, azure: undefined, aliOSS: undefined };\n}\nexports.DirectFileOutput = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.filepath !== undefined && message.filepath !== \"\") {\n            writer.uint32(10).string(message.filepath);\n        }\n        if (message.disableManifest === true) {\n            writer.uint32(40).bool(message.disableManifest);\n        }\n        if (message.s3 !== undefined) {\n            exports.S3Upload.encode(message.s3, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.gcp !== undefined) {\n            exports.GCPUpload.encode(message.gcp, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.azure !== undefined) {\n            exports.AzureBlobUpload.encode(message.azure, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.aliOSS !== undefined) {\n            exports.AliOSSUpload.encode(message.aliOSS, writer.uint32(50).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseDirectFileOutput();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.filepath = reader.string();\n                    break;\n                case 5:\n                    message.disableManifest = reader.bool();\n                    break;\n                case 2:\n                    message.s3 = exports.S3Upload.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.gcp = exports.GCPUpload.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.azure = exports.AzureBlobUpload.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.aliOSS = exports.AliOSSUpload.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            filepath: isSet(object.filepath) ? String(object.filepath) : \"\",\n            disableManifest: isSet(object.disableManifest) ? Boolean(object.disableManifest) : false,\n            s3: isSet(object.s3) ? exports.S3Upload.fromJSON(object.s3) : undefined,\n            gcp: isSet(object.gcp) ? exports.GCPUpload.fromJSON(object.gcp) : undefined,\n            azure: isSet(object.azure) ? exports.AzureBlobUpload.fromJSON(object.azure) : undefined,\n            aliOSS: isSet(object.aliOSS) ? exports.AliOSSUpload.fromJSON(object.aliOSS) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.filepath !== undefined && (obj.filepath = message.filepath);\n        message.disableManifest !== undefined && (obj.disableManifest = message.disableManifest);\n        message.s3 !== undefined && (obj.s3 = message.s3 ? exports.S3Upload.toJSON(message.s3) : undefined);\n        message.gcp !== undefined && (obj.gcp = message.gcp ? exports.GCPUpload.toJSON(message.gcp) : undefined);\n        message.azure !== undefined && (obj.azure = message.azure ? exports.AzureBlobUpload.toJSON(message.azure) : undefined);\n        message.aliOSS !== undefined && (obj.aliOSS = message.aliOSS ? exports.AliOSSUpload.toJSON(message.aliOSS) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseDirectFileOutput();\n        message.filepath = (_a = object.filepath) !== null && _a !== void 0 ? _a : \"\";\n        message.disableManifest = (_b = object.disableManifest) !== null && _b !== void 0 ? _b : false;\n        message.s3 = (object.s3 !== undefined && object.s3 !== null) ? exports.S3Upload.fromPartial(object.s3) : undefined;\n        message.gcp = (object.gcp !== undefined && object.gcp !== null) ? exports.GCPUpload.fromPartial(object.gcp) : undefined;\n        message.azure = (object.azure !== undefined && object.azure !== null)\n            ? exports.AzureBlobUpload.fromPartial(object.azure)\n            : undefined;\n        message.aliOSS = (object.aliOSS !== undefined && object.aliOSS !== null)\n            ? exports.AliOSSUpload.fromPartial(object.aliOSS)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseImageOutput() {\n    return {\n        captureInterval: 0,\n        width: 0,\n        height: 0,\n        filenamePrefix: \"\",\n        filenameSuffix: 0,\n        imageCodec: 0,\n        disableManifest: false,\n        s3: undefined,\n        gcp: undefined,\n        azure: undefined,\n        aliOSS: undefined,\n    };\n}\nexports.ImageOutput = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.captureInterval !== undefined && message.captureInterval !== 0) {\n            writer.uint32(8).uint32(message.captureInterval);\n        }\n        if (message.width !== undefined && message.width !== 0) {\n            writer.uint32(16).int32(message.width);\n        }\n        if (message.height !== undefined && message.height !== 0) {\n            writer.uint32(24).int32(message.height);\n        }\n        if (message.filenamePrefix !== undefined && message.filenamePrefix !== \"\") {\n            writer.uint32(34).string(message.filenamePrefix);\n        }\n        if (message.filenameSuffix !== undefined && message.filenameSuffix !== 0) {\n            writer.uint32(40).int32(message.filenameSuffix);\n        }\n        if (message.imageCodec !== undefined && message.imageCodec !== 0) {\n            writer.uint32(48).int32(message.imageCodec);\n        }\n        if (message.disableManifest === true) {\n            writer.uint32(56).bool(message.disableManifest);\n        }\n        if (message.s3 !== undefined) {\n            exports.S3Upload.encode(message.s3, writer.uint32(66).fork()).ldelim();\n        }\n        if (message.gcp !== undefined) {\n            exports.GCPUpload.encode(message.gcp, writer.uint32(74).fork()).ldelim();\n        }\n        if (message.azure !== undefined) {\n            exports.AzureBlobUpload.encode(message.azure, writer.uint32(82).fork()).ldelim();\n        }\n        if (message.aliOSS !== undefined) {\n            exports.AliOSSUpload.encode(message.aliOSS, writer.uint32(90).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseImageOutput();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.captureInterval = reader.uint32();\n                    break;\n                case 2:\n                    message.width = reader.int32();\n                    break;\n                case 3:\n                    message.height = reader.int32();\n                    break;\n                case 4:\n                    message.filenamePrefix = reader.string();\n                    break;\n                case 5:\n                    message.filenameSuffix = reader.int32();\n                    break;\n                case 6:\n                    message.imageCodec = reader.int32();\n                    break;\n                case 7:\n                    message.disableManifest = reader.bool();\n                    break;\n                case 8:\n                    message.s3 = exports.S3Upload.decode(reader, reader.uint32());\n                    break;\n                case 9:\n                    message.gcp = exports.GCPUpload.decode(reader, reader.uint32());\n                    break;\n                case 10:\n                    message.azure = exports.AzureBlobUpload.decode(reader, reader.uint32());\n                    break;\n                case 11:\n                    message.aliOSS = exports.AliOSSUpload.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            captureInterval: isSet(object.captureInterval) ? Number(object.captureInterval) : 0,\n            width: isSet(object.width) ? Number(object.width) : 0,\n            height: isSet(object.height) ? Number(object.height) : 0,\n            filenamePrefix: isSet(object.filenamePrefix) ? String(object.filenamePrefix) : \"\",\n            filenameSuffix: isSet(object.filenameSuffix) ? imageFileSuffixFromJSON(object.filenameSuffix) : 0,\n            imageCodec: isSet(object.imageCodec) ? livekit_models_1.imageCodecFromJSON(object.imageCodec) : 0,\n            disableManifest: isSet(object.disableManifest) ? Boolean(object.disableManifest) : false,\n            s3: isSet(object.s3) ? exports.S3Upload.fromJSON(object.s3) : undefined,\n            gcp: isSet(object.gcp) ? exports.GCPUpload.fromJSON(object.gcp) : undefined,\n            azure: isSet(object.azure) ? exports.AzureBlobUpload.fromJSON(object.azure) : undefined,\n            aliOSS: isSet(object.aliOSS) ? exports.AliOSSUpload.fromJSON(object.aliOSS) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.captureInterval !== undefined && (obj.captureInterval = Math.round(message.captureInterval));\n        message.width !== undefined && (obj.width = Math.round(message.width));\n        message.height !== undefined && (obj.height = Math.round(message.height));\n        message.filenamePrefix !== undefined && (obj.filenamePrefix = message.filenamePrefix);\n        message.filenameSuffix !== undefined && (obj.filenameSuffix = imageFileSuffixToJSON(message.filenameSuffix));\n        message.imageCodec !== undefined && (obj.imageCodec = livekit_models_1.imageCodecToJSON(message.imageCodec));\n        message.disableManifest !== undefined && (obj.disableManifest = message.disableManifest);\n        message.s3 !== undefined && (obj.s3 = message.s3 ? exports.S3Upload.toJSON(message.s3) : undefined);\n        message.gcp !== undefined && (obj.gcp = message.gcp ? exports.GCPUpload.toJSON(message.gcp) : undefined);\n        message.azure !== undefined && (obj.azure = message.azure ? exports.AzureBlobUpload.toJSON(message.azure) : undefined);\n        message.aliOSS !== undefined && (obj.aliOSS = message.aliOSS ? exports.AliOSSUpload.toJSON(message.aliOSS) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        const message = createBaseImageOutput();\n        message.captureInterval = (_a = object.captureInterval) !== null && _a !== void 0 ? _a : 0;\n        message.width = (_b = object.width) !== null && _b !== void 0 ? _b : 0;\n        message.height = (_c = object.height) !== null && _c !== void 0 ? _c : 0;\n        message.filenamePrefix = (_d = object.filenamePrefix) !== null && _d !== void 0 ? _d : \"\";\n        message.filenameSuffix = (_e = object.filenameSuffix) !== null && _e !== void 0 ? _e : 0;\n        message.imageCodec = (_f = object.imageCodec) !== null && _f !== void 0 ? _f : 0;\n        message.disableManifest = (_g = object.disableManifest) !== null && _g !== void 0 ? _g : false;\n        message.s3 = (object.s3 !== undefined && object.s3 !== null) ? exports.S3Upload.fromPartial(object.s3) : undefined;\n        message.gcp = (object.gcp !== undefined && object.gcp !== null) ? exports.GCPUpload.fromPartial(object.gcp) : undefined;\n        message.azure = (object.azure !== undefined && object.azure !== null)\n            ? exports.AzureBlobUpload.fromPartial(object.azure)\n            : undefined;\n        message.aliOSS = (object.aliOSS !== undefined && object.aliOSS !== null)\n            ? exports.AliOSSUpload.fromPartial(object.aliOSS)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseS3Upload() {\n    return {\n        accessKey: \"\",\n        secret: \"\",\n        region: \"\",\n        endpoint: \"\",\n        bucket: \"\",\n        forcePathStyle: false,\n        metadata: {},\n        tagging: \"\",\n    };\n}\nexports.S3Upload = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.accessKey !== undefined && message.accessKey !== \"\") {\n            writer.uint32(10).string(message.accessKey);\n        }\n        if (message.secret !== undefined && message.secret !== \"\") {\n            writer.uint32(18).string(message.secret);\n        }\n        if (message.region !== undefined && message.region !== \"\") {\n            writer.uint32(26).string(message.region);\n        }\n        if (message.endpoint !== undefined && message.endpoint !== \"\") {\n            writer.uint32(34).string(message.endpoint);\n        }\n        if (message.bucket !== undefined && message.bucket !== \"\") {\n            writer.uint32(42).string(message.bucket);\n        }\n        if (message.forcePathStyle === true) {\n            writer.uint32(48).bool(message.forcePathStyle);\n        }\n        Object.entries(message.metadata || {}).forEach(([key, value]) => {\n            exports.S3Upload_MetadataEntry.encode({ key: key, value }, writer.uint32(58).fork()).ldelim();\n        });\n        if (message.tagging !== undefined && message.tagging !== \"\") {\n            writer.uint32(66).string(message.tagging);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseS3Upload();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.accessKey = reader.string();\n                    break;\n                case 2:\n                    message.secret = reader.string();\n                    break;\n                case 3:\n                    message.region = reader.string();\n                    break;\n                case 4:\n                    message.endpoint = reader.string();\n                    break;\n                case 5:\n                    message.bucket = reader.string();\n                    break;\n                case 6:\n                    message.forcePathStyle = reader.bool();\n                    break;\n                case 7:\n                    const entry7 = exports.S3Upload_MetadataEntry.decode(reader, reader.uint32());\n                    if (entry7.value !== undefined) {\n                        message.metadata[entry7.key] = entry7.value;\n                    }\n                    break;\n                case 8:\n                    message.tagging = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            accessKey: isSet(object.accessKey) ? String(object.accessKey) : \"\",\n            secret: isSet(object.secret) ? String(object.secret) : \"\",\n            region: isSet(object.region) ? String(object.region) : \"\",\n            endpoint: isSet(object.endpoint) ? String(object.endpoint) : \"\",\n            bucket: isSet(object.bucket) ? String(object.bucket) : \"\",\n            forcePathStyle: isSet(object.forcePathStyle) ? Boolean(object.forcePathStyle) : false,\n            metadata: isObject(object.metadata)\n                ? Object.entries(object.metadata).reduce((acc, [key, value]) => {\n                    acc[key] = String(value);\n                    return acc;\n                }, {})\n                : {},\n            tagging: isSet(object.tagging) ? String(object.tagging) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.accessKey !== undefined && (obj.accessKey = message.accessKey);\n        message.secret !== undefined && (obj.secret = message.secret);\n        message.region !== undefined && (obj.region = message.region);\n        message.endpoint !== undefined && (obj.endpoint = message.endpoint);\n        message.bucket !== undefined && (obj.bucket = message.bucket);\n        message.forcePathStyle !== undefined && (obj.forcePathStyle = message.forcePathStyle);\n        obj.metadata = {};\n        if (message.metadata) {\n            Object.entries(message.metadata).forEach(([k, v]) => {\n                obj.metadata[k] = v;\n            });\n        }\n        message.tagging !== undefined && (obj.tagging = message.tagging);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        const message = createBaseS3Upload();\n        message.accessKey = (_a = object.accessKey) !== null && _a !== void 0 ? _a : \"\";\n        message.secret = (_b = object.secret) !== null && _b !== void 0 ? _b : \"\";\n        message.region = (_c = object.region) !== null && _c !== void 0 ? _c : \"\";\n        message.endpoint = (_d = object.endpoint) !== null && _d !== void 0 ? _d : \"\";\n        message.bucket = (_e = object.bucket) !== null && _e !== void 0 ? _e : \"\";\n        message.forcePathStyle = (_f = object.forcePathStyle) !== null && _f !== void 0 ? _f : false;\n        message.metadata = Object.entries((_g = object.metadata) !== null && _g !== void 0 ? _g : {}).reduce((acc, [key, value]) => {\n            if (value !== undefined) {\n                acc[key] = String(value);\n            }\n            return acc;\n        }, {});\n        message.tagging = (_h = object.tagging) !== null && _h !== void 0 ? _h : \"\";\n        return message;\n    },\n};\nfunction createBaseS3Upload_MetadataEntry() {\n    return { key: \"\", value: \"\" };\n}\nexports.S3Upload_MetadataEntry = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.key !== \"\") {\n            writer.uint32(10).string(message.key);\n        }\n        if (message.value !== \"\") {\n            writer.uint32(18).string(message.value);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseS3Upload_MetadataEntry();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.key = reader.string();\n                    break;\n                case 2:\n                    message.value = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { key: isSet(object.key) ? String(object.key) : \"\", value: isSet(object.value) ? String(object.value) : \"\" };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.key !== undefined && (obj.key = message.key);\n        message.value !== undefined && (obj.value = message.value);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseS3Upload_MetadataEntry();\n        message.key = (_a = object.key) !== null && _a !== void 0 ? _a : \"\";\n        message.value = (_b = object.value) !== null && _b !== void 0 ? _b : \"\";\n        return message;\n    },\n};\nfunction createBaseGCPUpload() {\n    return { credentials: \"\", bucket: \"\" };\n}\nexports.GCPUpload = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.credentials !== undefined && message.credentials !== \"\") {\n            writer.uint32(10).string(message.credentials);\n        }\n        if (message.bucket !== undefined && message.bucket !== \"\") {\n            writer.uint32(18).string(message.bucket);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseGCPUpload();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.credentials = reader.string();\n                    break;\n                case 2:\n                    message.bucket = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            credentials: isSet(object.credentials) ? String(object.credentials) : \"\",\n            bucket: isSet(object.bucket) ? String(object.bucket) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.credentials !== undefined && (obj.credentials = message.credentials);\n        message.bucket !== undefined && (obj.bucket = message.bucket);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseGCPUpload();\n        message.credentials = (_a = object.credentials) !== null && _a !== void 0 ? _a : \"\";\n        message.bucket = (_b = object.bucket) !== null && _b !== void 0 ? _b : \"\";\n        return message;\n    },\n};\nfunction createBaseAzureBlobUpload() {\n    return { accountName: \"\", accountKey: \"\", containerName: \"\" };\n}\nexports.AzureBlobUpload = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.accountName !== undefined && message.accountName !== \"\") {\n            writer.uint32(10).string(message.accountName);\n        }\n        if (message.accountKey !== undefined && message.accountKey !== \"\") {\n            writer.uint32(18).string(message.accountKey);\n        }\n        if (message.containerName !== undefined && message.containerName !== \"\") {\n            writer.uint32(26).string(message.containerName);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseAzureBlobUpload();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.accountName = reader.string();\n                    break;\n                case 2:\n                    message.accountKey = reader.string();\n                    break;\n                case 3:\n                    message.containerName = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            accountName: isSet(object.accountName) ? String(object.accountName) : \"\",\n            accountKey: isSet(object.accountKey) ? String(object.accountKey) : \"\",\n            containerName: isSet(object.containerName) ? String(object.containerName) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.accountName !== undefined && (obj.accountName = message.accountName);\n        message.accountKey !== undefined && (obj.accountKey = message.accountKey);\n        message.containerName !== undefined && (obj.containerName = message.containerName);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseAzureBlobUpload();\n        message.accountName = (_a = object.accountName) !== null && _a !== void 0 ? _a : \"\";\n        message.accountKey = (_b = object.accountKey) !== null && _b !== void 0 ? _b : \"\";\n        message.containerName = (_c = object.containerName) !== null && _c !== void 0 ? _c : \"\";\n        return message;\n    },\n};\nfunction createBaseAliOSSUpload() {\n    return { accessKey: \"\", secret: \"\", region: \"\", endpoint: \"\", bucket: \"\" };\n}\nexports.AliOSSUpload = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.accessKey !== undefined && message.accessKey !== \"\") {\n            writer.uint32(10).string(message.accessKey);\n        }\n        if (message.secret !== undefined && message.secret !== \"\") {\n            writer.uint32(18).string(message.secret);\n        }\n        if (message.region !== undefined && message.region !== \"\") {\n            writer.uint32(26).string(message.region);\n        }\n        if (message.endpoint !== undefined && message.endpoint !== \"\") {\n            writer.uint32(34).string(message.endpoint);\n        }\n        if (message.bucket !== undefined && message.bucket !== \"\") {\n            writer.uint32(42).string(message.bucket);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseAliOSSUpload();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.accessKey = reader.string();\n                    break;\n                case 2:\n                    message.secret = reader.string();\n                    break;\n                case 3:\n                    message.region = reader.string();\n                    break;\n                case 4:\n                    message.endpoint = reader.string();\n                    break;\n                case 5:\n                    message.bucket = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            accessKey: isSet(object.accessKey) ? String(object.accessKey) : \"\",\n            secret: isSet(object.secret) ? String(object.secret) : \"\",\n            region: isSet(object.region) ? String(object.region) : \"\",\n            endpoint: isSet(object.endpoint) ? String(object.endpoint) : \"\",\n            bucket: isSet(object.bucket) ? String(object.bucket) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.accessKey !== undefined && (obj.accessKey = message.accessKey);\n        message.secret !== undefined && (obj.secret = message.secret);\n        message.region !== undefined && (obj.region = message.region);\n        message.endpoint !== undefined && (obj.endpoint = message.endpoint);\n        message.bucket !== undefined && (obj.bucket = message.bucket);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e;\n        const message = createBaseAliOSSUpload();\n        message.accessKey = (_a = object.accessKey) !== null && _a !== void 0 ? _a : \"\";\n        message.secret = (_b = object.secret) !== null && _b !== void 0 ? _b : \"\";\n        message.region = (_c = object.region) !== null && _c !== void 0 ? _c : \"\";\n        message.endpoint = (_d = object.endpoint) !== null && _d !== void 0 ? _d : \"\";\n        message.bucket = (_e = object.bucket) !== null && _e !== void 0 ? _e : \"\";\n        return message;\n    },\n};\nfunction createBaseStreamOutput() {\n    return { protocol: 0, urls: [] };\n}\nexports.StreamOutput = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.protocol !== undefined && message.protocol !== 0) {\n            writer.uint32(8).int32(message.protocol);\n        }\n        if (message.urls !== undefined && message.urls.length !== 0) {\n            for (const v of message.urls) {\n                writer.uint32(18).string(v);\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseStreamOutput();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.protocol = reader.int32();\n                    break;\n                case 2:\n                    message.urls.push(reader.string());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            protocol: isSet(object.protocol) ? streamProtocolFromJSON(object.protocol) : 0,\n            urls: Array.isArray(object === null || object === void 0 ? void 0 : object.urls) ? object.urls.map((e) => String(e)) : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.protocol !== undefined && (obj.protocol = streamProtocolToJSON(message.protocol));\n        if (message.urls) {\n            obj.urls = message.urls.map((e) => e);\n        }\n        else {\n            obj.urls = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseStreamOutput();\n        message.protocol = (_a = object.protocol) !== null && _a !== void 0 ? _a : 0;\n        message.urls = ((_b = object.urls) === null || _b === void 0 ? void 0 : _b.map((e) => e)) || [];\n        return message;\n    },\n};\nfunction createBaseEncodingOptions() {\n    return {\n        width: 0,\n        height: 0,\n        depth: 0,\n        framerate: 0,\n        audioCodec: 0,\n        audioBitrate: 0,\n        audioFrequency: 0,\n        videoCodec: 0,\n        videoBitrate: 0,\n        keyFrameInterval: 0,\n    };\n}\nexports.EncodingOptions = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.width !== undefined && message.width !== 0) {\n            writer.uint32(8).int32(message.width);\n        }\n        if (message.height !== undefined && message.height !== 0) {\n            writer.uint32(16).int32(message.height);\n        }\n        if (message.depth !== undefined && message.depth !== 0) {\n            writer.uint32(24).int32(message.depth);\n        }\n        if (message.framerate !== undefined && message.framerate !== 0) {\n            writer.uint32(32).int32(message.framerate);\n        }\n        if (message.audioCodec !== undefined && message.audioCodec !== 0) {\n            writer.uint32(40).int32(message.audioCodec);\n        }\n        if (message.audioBitrate !== undefined && message.audioBitrate !== 0) {\n            writer.uint32(48).int32(message.audioBitrate);\n        }\n        if (message.audioFrequency !== undefined && message.audioFrequency !== 0) {\n            writer.uint32(56).int32(message.audioFrequency);\n        }\n        if (message.videoCodec !== undefined && message.videoCodec !== 0) {\n            writer.uint32(64).int32(message.videoCodec);\n        }\n        if (message.videoBitrate !== undefined && message.videoBitrate !== 0) {\n            writer.uint32(72).int32(message.videoBitrate);\n        }\n        if (message.keyFrameInterval !== undefined && message.keyFrameInterval !== 0) {\n            writer.uint32(81).double(message.keyFrameInterval);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseEncodingOptions();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.width = reader.int32();\n                    break;\n                case 2:\n                    message.height = reader.int32();\n                    break;\n                case 3:\n                    message.depth = reader.int32();\n                    break;\n                case 4:\n                    message.framerate = reader.int32();\n                    break;\n                case 5:\n                    message.audioCodec = reader.int32();\n                    break;\n                case 6:\n                    message.audioBitrate = reader.int32();\n                    break;\n                case 7:\n                    message.audioFrequency = reader.int32();\n                    break;\n                case 8:\n                    message.videoCodec = reader.int32();\n                    break;\n                case 9:\n                    message.videoBitrate = reader.int32();\n                    break;\n                case 10:\n                    message.keyFrameInterval = reader.double();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            width: isSet(object.width) ? Number(object.width) : 0,\n            height: isSet(object.height) ? Number(object.height) : 0,\n            depth: isSet(object.depth) ? Number(object.depth) : 0,\n            framerate: isSet(object.framerate) ? Number(object.framerate) : 0,\n            audioCodec: isSet(object.audioCodec) ? livekit_models_1.audioCodecFromJSON(object.audioCodec) : 0,\n            audioBitrate: isSet(object.audioBitrate) ? Number(object.audioBitrate) : 0,\n            audioFrequency: isSet(object.audioFrequency) ? Number(object.audioFrequency) : 0,\n            videoCodec: isSet(object.videoCodec) ? livekit_models_1.videoCodecFromJSON(object.videoCodec) : 0,\n            videoBitrate: isSet(object.videoBitrate) ? Number(object.videoBitrate) : 0,\n            keyFrameInterval: isSet(object.keyFrameInterval) ? Number(object.keyFrameInterval) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.width !== undefined && (obj.width = Math.round(message.width));\n        message.height !== undefined && (obj.height = Math.round(message.height));\n        message.depth !== undefined && (obj.depth = Math.round(message.depth));\n        message.framerate !== undefined && (obj.framerate = Math.round(message.framerate));\n        message.audioCodec !== undefined && (obj.audioCodec = livekit_models_1.audioCodecToJSON(message.audioCodec));\n        message.audioBitrate !== undefined && (obj.audioBitrate = Math.round(message.audioBitrate));\n        message.audioFrequency !== undefined && (obj.audioFrequency = Math.round(message.audioFrequency));\n        message.videoCodec !== undefined && (obj.videoCodec = livekit_models_1.videoCodecToJSON(message.videoCodec));\n        message.videoBitrate !== undefined && (obj.videoBitrate = Math.round(message.videoBitrate));\n        message.keyFrameInterval !== undefined && (obj.keyFrameInterval = message.keyFrameInterval);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        const message = createBaseEncodingOptions();\n        message.width = (_a = object.width) !== null && _a !== void 0 ? _a : 0;\n        message.height = (_b = object.height) !== null && _b !== void 0 ? _b : 0;\n        message.depth = (_c = object.depth) !== null && _c !== void 0 ? _c : 0;\n        message.framerate = (_d = object.framerate) !== null && _d !== void 0 ? _d : 0;\n        message.audioCodec = (_e = object.audioCodec) !== null && _e !== void 0 ? _e : 0;\n        message.audioBitrate = (_f = object.audioBitrate) !== null && _f !== void 0 ? _f : 0;\n        message.audioFrequency = (_g = object.audioFrequency) !== null && _g !== void 0 ? _g : 0;\n        message.videoCodec = (_h = object.videoCodec) !== null && _h !== void 0 ? _h : 0;\n        message.videoBitrate = (_j = object.videoBitrate) !== null && _j !== void 0 ? _j : 0;\n        message.keyFrameInterval = (_k = object.keyFrameInterval) !== null && _k !== void 0 ? _k : 0;\n        return message;\n    },\n};\nfunction createBaseUpdateLayoutRequest() {\n    return { egressId: \"\", layout: \"\" };\n}\nexports.UpdateLayoutRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.egressId !== undefined && message.egressId !== \"\") {\n            writer.uint32(10).string(message.egressId);\n        }\n        if (message.layout !== undefined && message.layout !== \"\") {\n            writer.uint32(18).string(message.layout);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseUpdateLayoutRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.egressId = reader.string();\n                    break;\n                case 2:\n                    message.layout = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            egressId: isSet(object.egressId) ? String(object.egressId) : \"\",\n            layout: isSet(object.layout) ? String(object.layout) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.egressId !== undefined && (obj.egressId = message.egressId);\n        message.layout !== undefined && (obj.layout = message.layout);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseUpdateLayoutRequest();\n        message.egressId = (_a = object.egressId) !== null && _a !== void 0 ? _a : \"\";\n        message.layout = (_b = object.layout) !== null && _b !== void 0 ? _b : \"\";\n        return message;\n    },\n};\nfunction createBaseUpdateStreamRequest() {\n    return { egressId: \"\", addOutputUrls: [], removeOutputUrls: [] };\n}\nexports.UpdateStreamRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.egressId !== undefined && message.egressId !== \"\") {\n            writer.uint32(10).string(message.egressId);\n        }\n        if (message.addOutputUrls !== undefined && message.addOutputUrls.length !== 0) {\n            for (const v of message.addOutputUrls) {\n                writer.uint32(18).string(v);\n            }\n        }\n        if (message.removeOutputUrls !== undefined && message.removeOutputUrls.length !== 0) {\n            for (const v of message.removeOutputUrls) {\n                writer.uint32(26).string(v);\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseUpdateStreamRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.egressId = reader.string();\n                    break;\n                case 2:\n                    message.addOutputUrls.push(reader.string());\n                    break;\n                case 3:\n                    message.removeOutputUrls.push(reader.string());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            egressId: isSet(object.egressId) ? String(object.egressId) : \"\",\n            addOutputUrls: Array.isArray(object === null || object === void 0 ? void 0 : object.addOutputUrls) ? object.addOutputUrls.map((e) => String(e)) : [],\n            removeOutputUrls: Array.isArray(object === null || object === void 0 ? void 0 : object.removeOutputUrls)\n                ? object.removeOutputUrls.map((e) => String(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.egressId !== undefined && (obj.egressId = message.egressId);\n        if (message.addOutputUrls) {\n            obj.addOutputUrls = message.addOutputUrls.map((e) => e);\n        }\n        else {\n            obj.addOutputUrls = [];\n        }\n        if (message.removeOutputUrls) {\n            obj.removeOutputUrls = message.removeOutputUrls.map((e) => e);\n        }\n        else {\n            obj.removeOutputUrls = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseUpdateStreamRequest();\n        message.egressId = (_a = object.egressId) !== null && _a !== void 0 ? _a : \"\";\n        message.addOutputUrls = ((_b = object.addOutputUrls) === null || _b === void 0 ? void 0 : _b.map((e) => e)) || [];\n        message.removeOutputUrls = ((_c = object.removeOutputUrls) === null || _c === void 0 ? void 0 : _c.map((e) => e)) || [];\n        return message;\n    },\n};\nfunction createBaseUpdateOutputsRequest() {\n    return { egressId: \"\", addImageOutputs: [], removeImageOutputs: [] };\n}\nexports.UpdateOutputsRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.egressId !== undefined && message.egressId !== \"\") {\n            writer.uint32(10).string(message.egressId);\n        }\n        if (message.addImageOutputs !== undefined && message.addImageOutputs.length !== 0) {\n            for (const v of message.addImageOutputs) {\n                exports.ImageOutput.encode(v, writer.uint32(18).fork()).ldelim();\n            }\n        }\n        if (message.removeImageOutputs !== undefined && message.removeImageOutputs.length !== 0) {\n            for (const v of message.removeImageOutputs) {\n                exports.ImageOutput.encode(v, writer.uint32(26).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseUpdateOutputsRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.egressId = reader.string();\n                    break;\n                case 2:\n                    message.addImageOutputs.push(exports.ImageOutput.decode(reader, reader.uint32()));\n                    break;\n                case 3:\n                    message.removeImageOutputs.push(exports.ImageOutput.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            egressId: isSet(object.egressId) ? String(object.egressId) : \"\",\n            addImageOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.addImageOutputs)\n                ? object.addImageOutputs.map((e) => exports.ImageOutput.fromJSON(e))\n                : [],\n            removeImageOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.removeImageOutputs)\n                ? object.removeImageOutputs.map((e) => exports.ImageOutput.fromJSON(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.egressId !== undefined && (obj.egressId = message.egressId);\n        if (message.addImageOutputs) {\n            obj.addImageOutputs = message.addImageOutputs.map((e) => e ? exports.ImageOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.addImageOutputs = [];\n        }\n        if (message.removeImageOutputs) {\n            obj.removeImageOutputs = message.removeImageOutputs.map((e) => e ? exports.ImageOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.removeImageOutputs = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseUpdateOutputsRequest();\n        message.egressId = (_a = object.egressId) !== null && _a !== void 0 ? _a : \"\";\n        message.addImageOutputs = ((_b = object.addImageOutputs) === null || _b === void 0 ? void 0 : _b.map((e) => exports.ImageOutput.fromPartial(e))) || [];\n        message.removeImageOutputs = ((_c = object.removeImageOutputs) === null || _c === void 0 ? void 0 : _c.map((e) => exports.ImageOutput.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseListEgressRequest() {\n    return { roomName: \"\", egressId: \"\", active: false };\n}\nexports.ListEgressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(10).string(message.roomName);\n        }\n        if (message.egressId !== undefined && message.egressId !== \"\") {\n            writer.uint32(18).string(message.egressId);\n        }\n        if (message.active === true) {\n            writer.uint32(24).bool(message.active);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseListEgressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.roomName = reader.string();\n                    break;\n                case 2:\n                    message.egressId = reader.string();\n                    break;\n                case 3:\n                    message.active = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            egressId: isSet(object.egressId) ? String(object.egressId) : \"\",\n            active: isSet(object.active) ? Boolean(object.active) : false,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.egressId !== undefined && (obj.egressId = message.egressId);\n        message.active !== undefined && (obj.active = message.active);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseListEgressRequest();\n        message.roomName = (_a = object.roomName) !== null && _a !== void 0 ? _a : \"\";\n        message.egressId = (_b = object.egressId) !== null && _b !== void 0 ? _b : \"\";\n        message.active = (_c = object.active) !== null && _c !== void 0 ? _c : false;\n        return message;\n    },\n};\nfunction createBaseListEgressResponse() {\n    return { items: [] };\n}\nexports.ListEgressResponse = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.items !== undefined && message.items.length !== 0) {\n            for (const v of message.items) {\n                exports.EgressInfo.encode(v, writer.uint32(10).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseListEgressResponse();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.items.push(exports.EgressInfo.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { items: Array.isArray(object === null || object === void 0 ? void 0 : object.items) ? object.items.map((e) => exports.EgressInfo.fromJSON(e)) : [] };\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.items) {\n            obj.items = message.items.map((e) => e ? exports.EgressInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.items = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseListEgressResponse();\n        message.items = ((_a = object.items) === null || _a === void 0 ? void 0 : _a.map((e) => exports.EgressInfo.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseStopEgressRequest() {\n    return { egressId: \"\" };\n}\nexports.StopEgressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.egressId !== undefined && message.egressId !== \"\") {\n            writer.uint32(10).string(message.egressId);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseStopEgressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.egressId = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { egressId: isSet(object.egressId) ? String(object.egressId) : \"\" };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.egressId !== undefined && (obj.egressId = message.egressId);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseStopEgressRequest();\n        message.egressId = (_a = object.egressId) !== null && _a !== void 0 ? _a : \"\";\n        return message;\n    },\n};\nfunction createBaseEgressInfo() {\n    return {\n        egressId: \"\",\n        roomId: \"\",\n        roomName: \"\",\n        status: 0,\n        startedAt: 0,\n        endedAt: 0,\n        updatedAt: 0,\n        error: \"\",\n        roomComposite: undefined,\n        web: undefined,\n        participant: undefined,\n        trackComposite: undefined,\n        track: undefined,\n        stream: undefined,\n        file: undefined,\n        segments: undefined,\n        streamResults: [],\n        fileResults: [],\n        segmentResults: [],\n        imageResults: [],\n    };\n}\nexports.EgressInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.egressId !== undefined && message.egressId !== \"\") {\n            writer.uint32(10).string(message.egressId);\n        }\n        if (message.roomId !== undefined && message.roomId !== \"\") {\n            writer.uint32(18).string(message.roomId);\n        }\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(106).string(message.roomName);\n        }\n        if (message.status !== undefined && message.status !== 0) {\n            writer.uint32(24).int32(message.status);\n        }\n        if (message.startedAt !== undefined && message.startedAt !== 0) {\n            writer.uint32(80).int64(message.startedAt);\n        }\n        if (message.endedAt !== undefined && message.endedAt !== 0) {\n            writer.uint32(88).int64(message.endedAt);\n        }\n        if (message.updatedAt !== undefined && message.updatedAt !== 0) {\n            writer.uint32(144).int64(message.updatedAt);\n        }\n        if (message.error !== undefined && message.error !== \"\") {\n            writer.uint32(74).string(message.error);\n        }\n        if (message.roomComposite !== undefined) {\n            exports.RoomCompositeEgressRequest.encode(message.roomComposite, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.web !== undefined) {\n            exports.WebEgressRequest.encode(message.web, writer.uint32(114).fork()).ldelim();\n        }\n        if (message.participant !== undefined) {\n            exports.ParticipantEgressRequest.encode(message.participant, writer.uint32(154).fork()).ldelim();\n        }\n        if (message.trackComposite !== undefined) {\n            exports.TrackCompositeEgressRequest.encode(message.trackComposite, writer.uint32(42).fork()).ldelim();\n        }\n        if (message.track !== undefined) {\n            exports.TrackEgressRequest.encode(message.track, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.stream !== undefined) {\n            exports.StreamInfoList.encode(message.stream, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.file !== undefined) {\n            exports.FileInfo.encode(message.file, writer.uint32(66).fork()).ldelim();\n        }\n        if (message.segments !== undefined) {\n            exports.SegmentsInfo.encode(message.segments, writer.uint32(98).fork()).ldelim();\n        }\n        if (message.streamResults !== undefined && message.streamResults.length !== 0) {\n            for (const v of message.streamResults) {\n                exports.StreamInfo.encode(v, writer.uint32(122).fork()).ldelim();\n            }\n        }\n        if (message.fileResults !== undefined && message.fileResults.length !== 0) {\n            for (const v of message.fileResults) {\n                exports.FileInfo.encode(v, writer.uint32(130).fork()).ldelim();\n            }\n        }\n        if (message.segmentResults !== undefined && message.segmentResults.length !== 0) {\n            for (const v of message.segmentResults) {\n                exports.SegmentsInfo.encode(v, writer.uint32(138).fork()).ldelim();\n            }\n        }\n        if (message.imageResults !== undefined && message.imageResults.length !== 0) {\n            for (const v of message.imageResults) {\n                exports.ImagesInfo.encode(v, writer.uint32(162).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseEgressInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.egressId = reader.string();\n                    break;\n                case 2:\n                    message.roomId = reader.string();\n                    break;\n                case 13:\n                    message.roomName = reader.string();\n                    break;\n                case 3:\n                    message.status = reader.int32();\n                    break;\n                case 10:\n                    message.startedAt = longToNumber(reader.int64());\n                    break;\n                case 11:\n                    message.endedAt = longToNumber(reader.int64());\n                    break;\n                case 18:\n                    message.updatedAt = longToNumber(reader.int64());\n                    break;\n                case 9:\n                    message.error = reader.string();\n                    break;\n                case 4:\n                    message.roomComposite = exports.RoomCompositeEgressRequest.decode(reader, reader.uint32());\n                    break;\n                case 14:\n                    message.web = exports.WebEgressRequest.decode(reader, reader.uint32());\n                    break;\n                case 19:\n                    message.participant = exports.ParticipantEgressRequest.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.trackComposite = exports.TrackCompositeEgressRequest.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.track = exports.TrackEgressRequest.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.stream = exports.StreamInfoList.decode(reader, reader.uint32());\n                    break;\n                case 8:\n                    message.file = exports.FileInfo.decode(reader, reader.uint32());\n                    break;\n                case 12:\n                    message.segments = exports.SegmentsInfo.decode(reader, reader.uint32());\n                    break;\n                case 15:\n                    message.streamResults.push(exports.StreamInfo.decode(reader, reader.uint32()));\n                    break;\n                case 16:\n                    message.fileResults.push(exports.FileInfo.decode(reader, reader.uint32()));\n                    break;\n                case 17:\n                    message.segmentResults.push(exports.SegmentsInfo.decode(reader, reader.uint32()));\n                    break;\n                case 20:\n                    message.imageResults.push(exports.ImagesInfo.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            egressId: isSet(object.egressId) ? String(object.egressId) : \"\",\n            roomId: isSet(object.roomId) ? String(object.roomId) : \"\",\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            status: isSet(object.status) ? egressStatusFromJSON(object.status) : 0,\n            startedAt: isSet(object.startedAt) ? Number(object.startedAt) : 0,\n            endedAt: isSet(object.endedAt) ? Number(object.endedAt) : 0,\n            updatedAt: isSet(object.updatedAt) ? Number(object.updatedAt) : 0,\n            error: isSet(object.error) ? String(object.error) : \"\",\n            roomComposite: isSet(object.roomComposite)\n                ? exports.RoomCompositeEgressRequest.fromJSON(object.roomComposite)\n                : undefined,\n            web: isSet(object.web) ? exports.WebEgressRequest.fromJSON(object.web) : undefined,\n            participant: isSet(object.participant) ? exports.ParticipantEgressRequest.fromJSON(object.participant) : undefined,\n            trackComposite: isSet(object.trackComposite)\n                ? exports.TrackCompositeEgressRequest.fromJSON(object.trackComposite)\n                : undefined,\n            track: isSet(object.track) ? exports.TrackEgressRequest.fromJSON(object.track) : undefined,\n            stream: isSet(object.stream) ? exports.StreamInfoList.fromJSON(object.stream) : undefined,\n            file: isSet(object.file) ? exports.FileInfo.fromJSON(object.file) : undefined,\n            segments: isSet(object.segments) ? exports.SegmentsInfo.fromJSON(object.segments) : undefined,\n            streamResults: Array.isArray(object === null || object === void 0 ? void 0 : object.streamResults)\n                ? object.streamResults.map((e) => exports.StreamInfo.fromJSON(e))\n                : [],\n            fileResults: Array.isArray(object === null || object === void 0 ? void 0 : object.fileResults) ? object.fileResults.map((e) => exports.FileInfo.fromJSON(e)) : [],\n            segmentResults: Array.isArray(object === null || object === void 0 ? void 0 : object.segmentResults)\n                ? object.segmentResults.map((e) => exports.SegmentsInfo.fromJSON(e))\n                : [],\n            imageResults: Array.isArray(object === null || object === void 0 ? void 0 : object.imageResults)\n                ? object.imageResults.map((e) => exports.ImagesInfo.fromJSON(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.egressId !== undefined && (obj.egressId = message.egressId);\n        message.roomId !== undefined && (obj.roomId = message.roomId);\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.status !== undefined && (obj.status = egressStatusToJSON(message.status));\n        message.startedAt !== undefined && (obj.startedAt = Math.round(message.startedAt));\n        message.endedAt !== undefined && (obj.endedAt = Math.round(message.endedAt));\n        message.updatedAt !== undefined && (obj.updatedAt = Math.round(message.updatedAt));\n        message.error !== undefined && (obj.error = message.error);\n        message.roomComposite !== undefined &&\n            (obj.roomComposite = message.roomComposite\n                ? exports.RoomCompositeEgressRequest.toJSON(message.roomComposite)\n                : undefined);\n        message.web !== undefined && (obj.web = message.web ? exports.WebEgressRequest.toJSON(message.web) : undefined);\n        message.participant !== undefined &&\n            (obj.participant = message.participant ? exports.ParticipantEgressRequest.toJSON(message.participant) : undefined);\n        message.trackComposite !== undefined && (obj.trackComposite = message.trackComposite\n            ? exports.TrackCompositeEgressRequest.toJSON(message.trackComposite)\n            : undefined);\n        message.track !== undefined && (obj.track = message.track ? exports.TrackEgressRequest.toJSON(message.track) : undefined);\n        message.stream !== undefined && (obj.stream = message.stream ? exports.StreamInfoList.toJSON(message.stream) : undefined);\n        message.file !== undefined && (obj.file = message.file ? exports.FileInfo.toJSON(message.file) : undefined);\n        message.segments !== undefined &&\n            (obj.segments = message.segments ? exports.SegmentsInfo.toJSON(message.segments) : undefined);\n        if (message.streamResults) {\n            obj.streamResults = message.streamResults.map((e) => e ? exports.StreamInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.streamResults = [];\n        }\n        if (message.fileResults) {\n            obj.fileResults = message.fileResults.map((e) => e ? exports.FileInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.fileResults = [];\n        }\n        if (message.segmentResults) {\n            obj.segmentResults = message.segmentResults.map((e) => e ? exports.SegmentsInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.segmentResults = [];\n        }\n        if (message.imageResults) {\n            obj.imageResults = message.imageResults.map((e) => e ? exports.ImagesInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.imageResults = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;\n        const message = createBaseEgressInfo();\n        message.egressId = (_a = object.egressId) !== null && _a !== void 0 ? _a : \"\";\n        message.roomId = (_b = object.roomId) !== null && _b !== void 0 ? _b : \"\";\n        message.roomName = (_c = object.roomName) !== null && _c !== void 0 ? _c : \"\";\n        message.status = (_d = object.status) !== null && _d !== void 0 ? _d : 0;\n        message.startedAt = (_e = object.startedAt) !== null && _e !== void 0 ? _e : 0;\n        message.endedAt = (_f = object.endedAt) !== null && _f !== void 0 ? _f : 0;\n        message.updatedAt = (_g = object.updatedAt) !== null && _g !== void 0 ? _g : 0;\n        message.error = (_h = object.error) !== null && _h !== void 0 ? _h : \"\";\n        message.roomComposite = (object.roomComposite !== undefined && object.roomComposite !== null)\n            ? exports.RoomCompositeEgressRequest.fromPartial(object.roomComposite)\n            : undefined;\n        message.web = (object.web !== undefined && object.web !== null)\n            ? exports.WebEgressRequest.fromPartial(object.web)\n            : undefined;\n        message.participant = (object.participant !== undefined && object.participant !== null)\n            ? exports.ParticipantEgressRequest.fromPartial(object.participant)\n            : undefined;\n        message.trackComposite = (object.trackComposite !== undefined && object.trackComposite !== null)\n            ? exports.TrackCompositeEgressRequest.fromPartial(object.trackComposite)\n            : undefined;\n        message.track = (object.track !== undefined && object.track !== null)\n            ? exports.TrackEgressRequest.fromPartial(object.track)\n            : undefined;\n        message.stream = (object.stream !== undefined && object.stream !== null)\n            ? exports.StreamInfoList.fromPartial(object.stream)\n            : undefined;\n        message.file = (object.file !== undefined && object.file !== null) ? exports.FileInfo.fromPartial(object.file) : undefined;\n        message.segments = (object.segments !== undefined && object.segments !== null)\n            ? exports.SegmentsInfo.fromPartial(object.segments)\n            : undefined;\n        message.streamResults = ((_j = object.streamResults) === null || _j === void 0 ? void 0 : _j.map((e) => exports.StreamInfo.fromPartial(e))) || [];\n        message.fileResults = ((_k = object.fileResults) === null || _k === void 0 ? void 0 : _k.map((e) => exports.FileInfo.fromPartial(e))) || [];\n        message.segmentResults = ((_l = object.segmentResults) === null || _l === void 0 ? void 0 : _l.map((e) => exports.SegmentsInfo.fromPartial(e))) || [];\n        message.imageResults = ((_m = object.imageResults) === null || _m === void 0 ? void 0 : _m.map((e) => exports.ImagesInfo.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseStreamInfoList() {\n    return { info: [] };\n}\nexports.StreamInfoList = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.info !== undefined && message.info.length !== 0) {\n            for (const v of message.info) {\n                exports.StreamInfo.encode(v, writer.uint32(10).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseStreamInfoList();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.info.push(exports.StreamInfo.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { info: Array.isArray(object === null || object === void 0 ? void 0 : object.info) ? object.info.map((e) => exports.StreamInfo.fromJSON(e)) : [] };\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.info) {\n            obj.info = message.info.map((e) => e ? exports.StreamInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.info = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseStreamInfoList();\n        message.info = ((_a = object.info) === null || _a === void 0 ? void 0 : _a.map((e) => exports.StreamInfo.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseStreamInfo() {\n    return { url: \"\", startedAt: 0, endedAt: 0, duration: 0, status: 0, error: \"\" };\n}\nexports.StreamInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.url !== undefined && message.url !== \"\") {\n            writer.uint32(10).string(message.url);\n        }\n        if (message.startedAt !== undefined && message.startedAt !== 0) {\n            writer.uint32(16).int64(message.startedAt);\n        }\n        if (message.endedAt !== undefined && message.endedAt !== 0) {\n            writer.uint32(24).int64(message.endedAt);\n        }\n        if (message.duration !== undefined && message.duration !== 0) {\n            writer.uint32(32).int64(message.duration);\n        }\n        if (message.status !== undefined && message.status !== 0) {\n            writer.uint32(40).int32(message.status);\n        }\n        if (message.error !== undefined && message.error !== \"\") {\n            writer.uint32(50).string(message.error);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseStreamInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.url = reader.string();\n                    break;\n                case 2:\n                    message.startedAt = longToNumber(reader.int64());\n                    break;\n                case 3:\n                    message.endedAt = longToNumber(reader.int64());\n                    break;\n                case 4:\n                    message.duration = longToNumber(reader.int64());\n                    break;\n                case 5:\n                    message.status = reader.int32();\n                    break;\n                case 6:\n                    message.error = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            url: isSet(object.url) ? String(object.url) : \"\",\n            startedAt: isSet(object.startedAt) ? Number(object.startedAt) : 0,\n            endedAt: isSet(object.endedAt) ? Number(object.endedAt) : 0,\n            duration: isSet(object.duration) ? Number(object.duration) : 0,\n            status: isSet(object.status) ? streamInfo_StatusFromJSON(object.status) : 0,\n            error: isSet(object.error) ? String(object.error) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.url !== undefined && (obj.url = message.url);\n        message.startedAt !== undefined && (obj.startedAt = Math.round(message.startedAt));\n        message.endedAt !== undefined && (obj.endedAt = Math.round(message.endedAt));\n        message.duration !== undefined && (obj.duration = Math.round(message.duration));\n        message.status !== undefined && (obj.status = streamInfo_StatusToJSON(message.status));\n        message.error !== undefined && (obj.error = message.error);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f;\n        const message = createBaseStreamInfo();\n        message.url = (_a = object.url) !== null && _a !== void 0 ? _a : \"\";\n        message.startedAt = (_b = object.startedAt) !== null && _b !== void 0 ? _b : 0;\n        message.endedAt = (_c = object.endedAt) !== null && _c !== void 0 ? _c : 0;\n        message.duration = (_d = object.duration) !== null && _d !== void 0 ? _d : 0;\n        message.status = (_e = object.status) !== null && _e !== void 0 ? _e : 0;\n        message.error = (_f = object.error) !== null && _f !== void 0 ? _f : \"\";\n        return message;\n    },\n};\nfunction createBaseFileInfo() {\n    return { filename: \"\", startedAt: 0, endedAt: 0, duration: 0, size: 0, location: \"\" };\n}\nexports.FileInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.filename !== undefined && message.filename !== \"\") {\n            writer.uint32(10).string(message.filename);\n        }\n        if (message.startedAt !== undefined && message.startedAt !== 0) {\n            writer.uint32(16).int64(message.startedAt);\n        }\n        if (message.endedAt !== undefined && message.endedAt !== 0) {\n            writer.uint32(24).int64(message.endedAt);\n        }\n        if (message.duration !== undefined && message.duration !== 0) {\n            writer.uint32(48).int64(message.duration);\n        }\n        if (message.size !== undefined && message.size !== 0) {\n            writer.uint32(32).int64(message.size);\n        }\n        if (message.location !== undefined && message.location !== \"\") {\n            writer.uint32(42).string(message.location);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseFileInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.filename = reader.string();\n                    break;\n                case 2:\n                    message.startedAt = longToNumber(reader.int64());\n                    break;\n                case 3:\n                    message.endedAt = longToNumber(reader.int64());\n                    break;\n                case 6:\n                    message.duration = longToNumber(reader.int64());\n                    break;\n                case 4:\n                    message.size = longToNumber(reader.int64());\n                    break;\n                case 5:\n                    message.location = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            filename: isSet(object.filename) ? String(object.filename) : \"\",\n            startedAt: isSet(object.startedAt) ? Number(object.startedAt) : 0,\n            endedAt: isSet(object.endedAt) ? Number(object.endedAt) : 0,\n            duration: isSet(object.duration) ? Number(object.duration) : 0,\n            size: isSet(object.size) ? Number(object.size) : 0,\n            location: isSet(object.location) ? String(object.location) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.filename !== undefined && (obj.filename = message.filename);\n        message.startedAt !== undefined && (obj.startedAt = Math.round(message.startedAt));\n        message.endedAt !== undefined && (obj.endedAt = Math.round(message.endedAt));\n        message.duration !== undefined && (obj.duration = Math.round(message.duration));\n        message.size !== undefined && (obj.size = Math.round(message.size));\n        message.location !== undefined && (obj.location = message.location);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f;\n        const message = createBaseFileInfo();\n        message.filename = (_a = object.filename) !== null && _a !== void 0 ? _a : \"\";\n        message.startedAt = (_b = object.startedAt) !== null && _b !== void 0 ? _b : 0;\n        message.endedAt = (_c = object.endedAt) !== null && _c !== void 0 ? _c : 0;\n        message.duration = (_d = object.duration) !== null && _d !== void 0 ? _d : 0;\n        message.size = (_e = object.size) !== null && _e !== void 0 ? _e : 0;\n        message.location = (_f = object.location) !== null && _f !== void 0 ? _f : \"\";\n        return message;\n    },\n};\nfunction createBaseSegmentsInfo() {\n    return {\n        playlistName: \"\",\n        livePlaylistName: \"\",\n        duration: 0,\n        size: 0,\n        playlistLocation: \"\",\n        livePlaylistLocation: \"\",\n        segmentCount: 0,\n        startedAt: 0,\n        endedAt: 0,\n    };\n}\nexports.SegmentsInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.playlistName !== undefined && message.playlistName !== \"\") {\n            writer.uint32(10).string(message.playlistName);\n        }\n        if (message.livePlaylistName !== undefined && message.livePlaylistName !== \"\") {\n            writer.uint32(66).string(message.livePlaylistName);\n        }\n        if (message.duration !== undefined && message.duration !== 0) {\n            writer.uint32(16).int64(message.duration);\n        }\n        if (message.size !== undefined && message.size !== 0) {\n            writer.uint32(24).int64(message.size);\n        }\n        if (message.playlistLocation !== undefined && message.playlistLocation !== \"\") {\n            writer.uint32(34).string(message.playlistLocation);\n        }\n        if (message.livePlaylistLocation !== undefined && message.livePlaylistLocation !== \"\") {\n            writer.uint32(74).string(message.livePlaylistLocation);\n        }\n        if (message.segmentCount !== undefined && message.segmentCount !== 0) {\n            writer.uint32(40).int64(message.segmentCount);\n        }\n        if (message.startedAt !== undefined && message.startedAt !== 0) {\n            writer.uint32(48).int64(message.startedAt);\n        }\n        if (message.endedAt !== undefined && message.endedAt !== 0) {\n            writer.uint32(56).int64(message.endedAt);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseSegmentsInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.playlistName = reader.string();\n                    break;\n                case 8:\n                    message.livePlaylistName = reader.string();\n                    break;\n                case 2:\n                    message.duration = longToNumber(reader.int64());\n                    break;\n                case 3:\n                    message.size = longToNumber(reader.int64());\n                    break;\n                case 4:\n                    message.playlistLocation = reader.string();\n                    break;\n                case 9:\n                    message.livePlaylistLocation = reader.string();\n                    break;\n                case 5:\n                    message.segmentCount = longToNumber(reader.int64());\n                    break;\n                case 6:\n                    message.startedAt = longToNumber(reader.int64());\n                    break;\n                case 7:\n                    message.endedAt = longToNumber(reader.int64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            playlistName: isSet(object.playlistName) ? String(object.playlistName) : \"\",\n            livePlaylistName: isSet(object.livePlaylistName) ? String(object.livePlaylistName) : \"\",\n            duration: isSet(object.duration) ? Number(object.duration) : 0,\n            size: isSet(object.size) ? Number(object.size) : 0,\n            playlistLocation: isSet(object.playlistLocation) ? String(object.playlistLocation) : \"\",\n            livePlaylistLocation: isSet(object.livePlaylistLocation) ? String(object.livePlaylistLocation) : \"\",\n            segmentCount: isSet(object.segmentCount) ? Number(object.segmentCount) : 0,\n            startedAt: isSet(object.startedAt) ? Number(object.startedAt) : 0,\n            endedAt: isSet(object.endedAt) ? Number(object.endedAt) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.playlistName !== undefined && (obj.playlistName = message.playlistName);\n        message.livePlaylistName !== undefined && (obj.livePlaylistName = message.livePlaylistName);\n        message.duration !== undefined && (obj.duration = Math.round(message.duration));\n        message.size !== undefined && (obj.size = Math.round(message.size));\n        message.playlistLocation !== undefined && (obj.playlistLocation = message.playlistLocation);\n        message.livePlaylistLocation !== undefined && (obj.livePlaylistLocation = message.livePlaylistLocation);\n        message.segmentCount !== undefined && (obj.segmentCount = Math.round(message.segmentCount));\n        message.startedAt !== undefined && (obj.startedAt = Math.round(message.startedAt));\n        message.endedAt !== undefined && (obj.endedAt = Math.round(message.endedAt));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        const message = createBaseSegmentsInfo();\n        message.playlistName = (_a = object.playlistName) !== null && _a !== void 0 ? _a : \"\";\n        message.livePlaylistName = (_b = object.livePlaylistName) !== null && _b !== void 0 ? _b : \"\";\n        message.duration = (_c = object.duration) !== null && _c !== void 0 ? _c : 0;\n        message.size = (_d = object.size) !== null && _d !== void 0 ? _d : 0;\n        message.playlistLocation = (_e = object.playlistLocation) !== null && _e !== void 0 ? _e : \"\";\n        message.livePlaylistLocation = (_f = object.livePlaylistLocation) !== null && _f !== void 0 ? _f : \"\";\n        message.segmentCount = (_g = object.segmentCount) !== null && _g !== void 0 ? _g : 0;\n        message.startedAt = (_h = object.startedAt) !== null && _h !== void 0 ? _h : 0;\n        message.endedAt = (_j = object.endedAt) !== null && _j !== void 0 ? _j : 0;\n        return message;\n    },\n};\nfunction createBaseImagesInfo() {\n    return { imageCount: 0, startedAt: 0, endedAt: 0 };\n}\nexports.ImagesInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.imageCount !== undefined && message.imageCount !== 0) {\n            writer.uint32(8).int64(message.imageCount);\n        }\n        if (message.startedAt !== undefined && message.startedAt !== 0) {\n            writer.uint32(16).int64(message.startedAt);\n        }\n        if (message.endedAt !== undefined && message.endedAt !== 0) {\n            writer.uint32(24).int64(message.endedAt);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseImagesInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.imageCount = longToNumber(reader.int64());\n                    break;\n                case 2:\n                    message.startedAt = longToNumber(reader.int64());\n                    break;\n                case 3:\n                    message.endedAt = longToNumber(reader.int64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            imageCount: isSet(object.imageCount) ? Number(object.imageCount) : 0,\n            startedAt: isSet(object.startedAt) ? Number(object.startedAt) : 0,\n            endedAt: isSet(object.endedAt) ? Number(object.endedAt) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.imageCount !== undefined && (obj.imageCount = Math.round(message.imageCount));\n        message.startedAt !== undefined && (obj.startedAt = Math.round(message.startedAt));\n        message.endedAt !== undefined && (obj.endedAt = Math.round(message.endedAt));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseImagesInfo();\n        message.imageCount = (_a = object.imageCount) !== null && _a !== void 0 ? _a : 0;\n        message.startedAt = (_b = object.startedAt) !== null && _b !== void 0 ? _b : 0;\n        message.endedAt = (_c = object.endedAt) !== null && _c !== void 0 ? _c : 0;\n        return message;\n    },\n};\nfunction createBaseAutoParticipantEgress() {\n    return { preset: undefined, advanced: undefined, fileOutputs: [], segmentOutputs: [] };\n}\nexports.AutoParticipantEgress = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.preset !== undefined) {\n            writer.uint32(8).int32(message.preset);\n        }\n        if (message.advanced !== undefined) {\n            exports.EncodingOptions.encode(message.advanced, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.fileOutputs !== undefined && message.fileOutputs.length !== 0) {\n            for (const v of message.fileOutputs) {\n                exports.EncodedFileOutput.encode(v, writer.uint32(26).fork()).ldelim();\n            }\n        }\n        if (message.segmentOutputs !== undefined && message.segmentOutputs.length !== 0) {\n            for (const v of message.segmentOutputs) {\n                exports.SegmentedFileOutput.encode(v, writer.uint32(34).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseAutoParticipantEgress();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.preset = reader.int32();\n                    break;\n                case 2:\n                    message.advanced = exports.EncodingOptions.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.fileOutputs.push(exports.EncodedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                case 4:\n                    message.segmentOutputs.push(exports.SegmentedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            preset: isSet(object.preset) ? encodingOptionsPresetFromJSON(object.preset) : undefined,\n            advanced: isSet(object.advanced) ? exports.EncodingOptions.fromJSON(object.advanced) : undefined,\n            fileOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.fileOutputs)\n                ? object.fileOutputs.map((e) => exports.EncodedFileOutput.fromJSON(e))\n                : [],\n            segmentOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.segmentOutputs)\n                ? object.segmentOutputs.map((e) => exports.SegmentedFileOutput.fromJSON(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.preset !== undefined &&\n            (obj.preset = message.preset !== undefined ? encodingOptionsPresetToJSON(message.preset) : undefined);\n        message.advanced !== undefined &&\n            (obj.advanced = message.advanced ? exports.EncodingOptions.toJSON(message.advanced) : undefined);\n        if (message.fileOutputs) {\n            obj.fileOutputs = message.fileOutputs.map((e) => e ? exports.EncodedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.fileOutputs = [];\n        }\n        if (message.segmentOutputs) {\n            obj.segmentOutputs = message.segmentOutputs.map((e) => e ? exports.SegmentedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.segmentOutputs = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseAutoParticipantEgress();\n        message.preset = (_a = object.preset) !== null && _a !== void 0 ? _a : undefined;\n        message.advanced = (object.advanced !== undefined && object.advanced !== null)\n            ? exports.EncodingOptions.fromPartial(object.advanced)\n            : undefined;\n        message.fileOutputs = ((_b = object.fileOutputs) === null || _b === void 0 ? void 0 : _b.map((e) => exports.EncodedFileOutput.fromPartial(e))) || [];\n        message.segmentOutputs = ((_c = object.segmentOutputs) === null || _c === void 0 ? void 0 : _c.map((e) => exports.SegmentedFileOutput.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseAutoTrackEgress() {\n    return { filepath: \"\", disableManifest: false, s3: undefined, gcp: undefined, azure: undefined };\n}\nexports.AutoTrackEgress = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.filepath !== undefined && message.filepath !== \"\") {\n            writer.uint32(10).string(message.filepath);\n        }\n        if (message.disableManifest === true) {\n            writer.uint32(40).bool(message.disableManifest);\n        }\n        if (message.s3 !== undefined) {\n            exports.S3Upload.encode(message.s3, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.gcp !== undefined) {\n            exports.GCPUpload.encode(message.gcp, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.azure !== undefined) {\n            exports.AzureBlobUpload.encode(message.azure, writer.uint32(34).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseAutoTrackEgress();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.filepath = reader.string();\n                    break;\n                case 5:\n                    message.disableManifest = reader.bool();\n                    break;\n                case 2:\n                    message.s3 = exports.S3Upload.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.gcp = exports.GCPUpload.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.azure = exports.AzureBlobUpload.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            filepath: isSet(object.filepath) ? String(object.filepath) : \"\",\n            disableManifest: isSet(object.disableManifest) ? Boolean(object.disableManifest) : false,\n            s3: isSet(object.s3) ? exports.S3Upload.fromJSON(object.s3) : undefined,\n            gcp: isSet(object.gcp) ? exports.GCPUpload.fromJSON(object.gcp) : undefined,\n            azure: isSet(object.azure) ? exports.AzureBlobUpload.fromJSON(object.azure) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.filepath !== undefined && (obj.filepath = message.filepath);\n        message.disableManifest !== undefined && (obj.disableManifest = message.disableManifest);\n        message.s3 !== undefined && (obj.s3 = message.s3 ? exports.S3Upload.toJSON(message.s3) : undefined);\n        message.gcp !== undefined && (obj.gcp = message.gcp ? exports.GCPUpload.toJSON(message.gcp) : undefined);\n        message.azure !== undefined && (obj.azure = message.azure ? exports.AzureBlobUpload.toJSON(message.azure) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseAutoTrackEgress();\n        message.filepath = (_a = object.filepath) !== null && _a !== void 0 ? _a : \"\";\n        message.disableManifest = (_b = object.disableManifest) !== null && _b !== void 0 ? _b : false;\n        message.s3 = (object.s3 !== undefined && object.s3 !== null) ? exports.S3Upload.fromPartial(object.s3) : undefined;\n        message.gcp = (object.gcp !== undefined && object.gcp !== null) ? exports.GCPUpload.fromPartial(object.gcp) : undefined;\n        message.azure = (object.azure !== undefined && object.azure !== null)\n            ? exports.AzureBlobUpload.fromPartial(object.azure)\n            : undefined;\n        return message;\n    },\n};\nvar globalThis = (() => {\n    if (typeof globalThis !== \"undefined\") {\n        return globalThis;\n    }\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    if (typeof window !== \"undefined\") {\n        return window;\n    }\n    if (typeof global !== \"undefined\") {\n        return global;\n    }\n    throw \"Unable to locate global object\";\n})();\nfunction longToNumber(long) {\n    if (long.gt(Number.MAX_SAFE_INTEGER)) {\n        throw new globalThis.Error(\"Value is larger than Number.MAX_SAFE_INTEGER\");\n    }\n    return long.toNumber();\n}\nif (minimal_1.default.util.Long !== long_1.default) {\n    minimal_1.default.util.Long = long_1.default;\n    minimal_1.default.configure();\n}\nfunction isObject(value) {\n    return typeof value === \"object\" && value !== null;\n}\nfunction isSet(value) {\n    return value !== null && value !== undefined;\n}\n//# sourceMappingURL=livekit_egress.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvcHJvdG8vbGl2ZWtpdF9lZ3Jlc3MuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxrQkFBa0IsR0FBRyxzQkFBc0IsR0FBRyxrQkFBa0IsR0FBRyx5QkFBeUIsR0FBRywwQkFBMEIsR0FBRyx5QkFBeUIsR0FBRyw0QkFBNEIsR0FBRywyQkFBMkIsR0FBRywyQkFBMkIsR0FBRyx1QkFBdUIsR0FBRyxvQkFBb0IsR0FBRyxvQkFBb0IsR0FBRyx1QkFBdUIsR0FBRyxpQkFBaUIsR0FBRyw4QkFBOEIsR0FBRyxnQkFBZ0IsR0FBRyxtQkFBbUIsR0FBRyx3QkFBd0IsR0FBRywyQkFBMkIsR0FBRyx5QkFBeUIsR0FBRywwQkFBMEIsR0FBRyxtQ0FBbUMsR0FBRyxnQ0FBZ0MsR0FBRyx3QkFBd0IsR0FBRyxrQ0FBa0MsR0FBRywrQkFBK0IsR0FBRyxpQ0FBaUMsR0FBRyx5QkFBeUIsR0FBRywwQkFBMEIsR0FBRyw0QkFBNEIsR0FBRyxvQkFBb0IsR0FBRyxtQ0FBbUMsR0FBRyxxQ0FBcUMsR0FBRyw2QkFBNkIsR0FBRyw0QkFBNEIsR0FBRyw4QkFBOEIsR0FBRyxzQkFBc0IsR0FBRyw2QkFBNkIsR0FBRywrQkFBK0IsR0FBRyx1QkFBdUIsR0FBRyxpQ0FBaUMsR0FBRyxtQ0FBbUMsR0FBRywyQkFBMkIsR0FBRyxtQ0FBbUMsR0FBRyxxQ0FBcUMsR0FBRyw2QkFBNkIsR0FBRyw2QkFBNkIsR0FBRywrQkFBK0IsR0FBRyx1QkFBdUIsR0FBRyx1QkFBdUI7QUFDLzhDLHVCQUF1QixHQUFHLDZCQUE2QixHQUFHLGtCQUFrQixHQUFHLG9CQUFvQixHQUFHLGdCQUFnQjtBQUN0SDtBQUNBLCtCQUErQixtQkFBTyxDQUFDLG9EQUFNO0FBQzdDLGtDQUFrQyxtQkFBTyxDQUFDLHNFQUFvQjtBQUM5RCx5QkFBeUIsbUJBQU8sQ0FBQyw4RkFBa0I7QUFDbkQsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnREFBZ0QsdUJBQXVCLEtBQUs7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw0REFBNEQsNkJBQTZCLEtBQUs7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHdEQUF3RCwyQkFBMkIsS0FBSztBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0RBQWdELHVCQUF1QixLQUFLO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDhDQUE4QyxzQkFBc0IsS0FBSztBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDREQUE0RCw2QkFBNkIsS0FBSztBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDBDQUEwQyxvQkFBb0IsS0FBSztBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLG9EQUFvRCx5QkFBeUIsS0FBSztBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDLG9EQUFvRCxpQkFBaUI7QUFDckUsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixJQUFJO0FBQ3JCLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0dBQW9HO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxJQUFJO0FBQ2I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxpQkFBaUI7QUFDakIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxpQkFBaUI7QUFDakIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGlCQUFpQjtBQUNqQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxpQkFBaUI7QUFDakIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGl2ZXN0cmVhbS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9wcm90by9saXZla2l0X2VncmVzcy5qcz9lNmNkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5TdHJlYW1JbmZvID0gZXhwb3J0cy5TdHJlYW1JbmZvTGlzdCA9IGV4cG9ydHMuRWdyZXNzSW5mbyA9IGV4cG9ydHMuU3RvcEVncmVzc1JlcXVlc3QgPSBleHBvcnRzLkxpc3RFZ3Jlc3NSZXNwb25zZSA9IGV4cG9ydHMuTGlzdEVncmVzc1JlcXVlc3QgPSBleHBvcnRzLlVwZGF0ZU91dHB1dHNSZXF1ZXN0ID0gZXhwb3J0cy5VcGRhdGVTdHJlYW1SZXF1ZXN0ID0gZXhwb3J0cy5VcGRhdGVMYXlvdXRSZXF1ZXN0ID0gZXhwb3J0cy5FbmNvZGluZ09wdGlvbnMgPSBleHBvcnRzLlN0cmVhbU91dHB1dCA9IGV4cG9ydHMuQWxpT1NTVXBsb2FkID0gZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQgPSBleHBvcnRzLkdDUFVwbG9hZCA9IGV4cG9ydHMuUzNVcGxvYWRfTWV0YWRhdGFFbnRyeSA9IGV4cG9ydHMuUzNVcGxvYWQgPSBleHBvcnRzLkltYWdlT3V0cHV0ID0gZXhwb3J0cy5EaXJlY3RGaWxlT3V0cHV0ID0gZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0ID0gZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dCA9IGV4cG9ydHMuVHJhY2tFZ3Jlc3NSZXF1ZXN0ID0gZXhwb3J0cy5UcmFja0NvbXBvc2l0ZUVncmVzc1JlcXVlc3QgPSBleHBvcnRzLlBhcnRpY2lwYW50RWdyZXNzUmVxdWVzdCA9IGV4cG9ydHMuV2ViRWdyZXNzUmVxdWVzdCA9IGV4cG9ydHMuUm9vbUNvbXBvc2l0ZUVncmVzc1JlcXVlc3QgPSBleHBvcnRzLnN0cmVhbUluZm9fU3RhdHVzVG9KU09OID0gZXhwb3J0cy5zdHJlYW1JbmZvX1N0YXR1c0Zyb21KU09OID0gZXhwb3J0cy5TdHJlYW1JbmZvX1N0YXR1cyA9IGV4cG9ydHMuZWdyZXNzU3RhdHVzVG9KU09OID0gZXhwb3J0cy5lZ3Jlc3NTdGF0dXNGcm9tSlNPTiA9IGV4cG9ydHMuRWdyZXNzU3RhdHVzID0gZXhwb3J0cy5lbmNvZGluZ09wdGlvbnNQcmVzZXRUb0pTT04gPSBleHBvcnRzLmVuY29kaW5nT3B0aW9uc1ByZXNldEZyb21KU09OID0gZXhwb3J0cy5FbmNvZGluZ09wdGlvbnNQcmVzZXQgPSBleHBvcnRzLnN0cmVhbVByb3RvY29sVG9KU09OID0gZXhwb3J0cy5zdHJlYW1Qcm90b2NvbEZyb21KU09OID0gZXhwb3J0cy5TdHJlYW1Qcm90b2NvbCA9IGV4cG9ydHMuaW1hZ2VGaWxlU3VmZml4VG9KU09OID0gZXhwb3J0cy5pbWFnZUZpbGVTdWZmaXhGcm9tSlNPTiA9IGV4cG9ydHMuSW1hZ2VGaWxlU3VmZml4ID0gZXhwb3J0cy5zZWdtZW50ZWRGaWxlU3VmZml4VG9KU09OID0gZXhwb3J0cy5zZWdtZW50ZWRGaWxlU3VmZml4RnJvbUpTT04gPSBleHBvcnRzLlNlZ21lbnRlZEZpbGVTdWZmaXggPSBleHBvcnRzLnNlZ21lbnRlZEZpbGVQcm90b2NvbFRvSlNPTiA9IGV4cG9ydHMuc2VnbWVudGVkRmlsZVByb3RvY29sRnJvbUpTT04gPSBleHBvcnRzLlNlZ21lbnRlZEZpbGVQcm90b2NvbCA9IGV4cG9ydHMuZW5jb2RlZEZpbGVUeXBlVG9KU09OID0gZXhwb3J0cy5lbmNvZGVkRmlsZVR5cGVGcm9tSlNPTiA9IGV4cG9ydHMuRW5jb2RlZEZpbGVUeXBlID0gZXhwb3J0cy5wcm90b2J1ZlBhY2thZ2UgPSB2b2lkIDA7XG5leHBvcnRzLkF1dG9UcmFja0VncmVzcyA9IGV4cG9ydHMuQXV0b1BhcnRpY2lwYW50RWdyZXNzID0gZXhwb3J0cy5JbWFnZXNJbmZvID0gZXhwb3J0cy5TZWdtZW50c0luZm8gPSBleHBvcnRzLkZpbGVJbmZvID0gdm9pZCAwO1xuLyogZXNsaW50LWRpc2FibGUgKi9cbmNvbnN0IGxvbmdfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwibG9uZ1wiKSk7XG5jb25zdCBtaW5pbWFsXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcInByb3RvYnVmanMvbWluaW1hbFwiKSk7XG5jb25zdCBsaXZla2l0X21vZGVsc18xID0gcmVxdWlyZShcIi4vbGl2ZWtpdF9tb2RlbHNcIik7XG5leHBvcnRzLnByb3RvYnVmUGFja2FnZSA9IFwibGl2ZWtpdFwiO1xudmFyIEVuY29kZWRGaWxlVHlwZTtcbihmdW5jdGlvbiAoRW5jb2RlZEZpbGVUeXBlKSB7XG4gICAgLyoqIERFRkFVTFRfRklMRVRZUEUgLSBmaWxlIHR5cGUgY2hvc2VuIGJhc2VkIG9uIGNvZGVjcyAqL1xuICAgIEVuY29kZWRGaWxlVHlwZVtFbmNvZGVkRmlsZVR5cGVbXCJERUZBVUxUX0ZJTEVUWVBFXCJdID0gMF0gPSBcIkRFRkFVTFRfRklMRVRZUEVcIjtcbiAgICBFbmNvZGVkRmlsZVR5cGVbRW5jb2RlZEZpbGVUeXBlW1wiTVA0XCJdID0gMV0gPSBcIk1QNFwiO1xuICAgIEVuY29kZWRGaWxlVHlwZVtFbmNvZGVkRmlsZVR5cGVbXCJPR0dcIl0gPSAyXSA9IFwiT0dHXCI7XG4gICAgRW5jb2RlZEZpbGVUeXBlW0VuY29kZWRGaWxlVHlwZVtcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShFbmNvZGVkRmlsZVR5cGUgPSBleHBvcnRzLkVuY29kZWRGaWxlVHlwZSB8fCAoZXhwb3J0cy5FbmNvZGVkRmlsZVR5cGUgPSB7fSkpO1xuZnVuY3Rpb24gZW5jb2RlZEZpbGVUeXBlRnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiREVGQVVMVF9GSUxFVFlQRVwiOlxuICAgICAgICAgICAgcmV0dXJuIEVuY29kZWRGaWxlVHlwZS5ERUZBVUxUX0ZJTEVUWVBFO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJNUDRcIjpcbiAgICAgICAgICAgIHJldHVybiBFbmNvZGVkRmlsZVR5cGUuTVA0O1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgXCJPR0dcIjpcbiAgICAgICAgICAgIHJldHVybiBFbmNvZGVkRmlsZVR5cGUuT0dHO1xuICAgICAgICBjYXNlIC0xOlxuICAgICAgICBjYXNlIFwiVU5SRUNPR05JWkVEXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gRW5jb2RlZEZpbGVUeXBlLlVOUkVDT0dOSVpFRDtcbiAgICB9XG59XG5leHBvcnRzLmVuY29kZWRGaWxlVHlwZUZyb21KU09OID0gZW5jb2RlZEZpbGVUeXBlRnJvbUpTT047XG5mdW5jdGlvbiBlbmNvZGVkRmlsZVR5cGVUb0pTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSBFbmNvZGVkRmlsZVR5cGUuREVGQVVMVF9GSUxFVFlQRTpcbiAgICAgICAgICAgIHJldHVybiBcIkRFRkFVTFRfRklMRVRZUEVcIjtcbiAgICAgICAgY2FzZSBFbmNvZGVkRmlsZVR5cGUuTVA0OlxuICAgICAgICAgICAgcmV0dXJuIFwiTVA0XCI7XG4gICAgICAgIGNhc2UgRW5jb2RlZEZpbGVUeXBlLk9HRzpcbiAgICAgICAgICAgIHJldHVybiBcIk9HR1wiO1xuICAgICAgICBjYXNlIEVuY29kZWRGaWxlVHlwZS5VTlJFQ09HTklaRUQ6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJVTlJFQ09HTklaRURcIjtcbiAgICB9XG59XG5leHBvcnRzLmVuY29kZWRGaWxlVHlwZVRvSlNPTiA9IGVuY29kZWRGaWxlVHlwZVRvSlNPTjtcbnZhciBTZWdtZW50ZWRGaWxlUHJvdG9jb2w7XG4oZnVuY3Rpb24gKFNlZ21lbnRlZEZpbGVQcm90b2NvbCkge1xuICAgIFNlZ21lbnRlZEZpbGVQcm90b2NvbFtTZWdtZW50ZWRGaWxlUHJvdG9jb2xbXCJERUZBVUxUX1NFR01FTlRFRF9GSUxFX1BST1RPQ09MXCJdID0gMF0gPSBcIkRFRkFVTFRfU0VHTUVOVEVEX0ZJTEVfUFJPVE9DT0xcIjtcbiAgICBTZWdtZW50ZWRGaWxlUHJvdG9jb2xbU2VnbWVudGVkRmlsZVByb3RvY29sW1wiSExTX1BST1RPQ09MXCJdID0gMV0gPSBcIkhMU19QUk9UT0NPTFwiO1xuICAgIFNlZ21lbnRlZEZpbGVQcm90b2NvbFtTZWdtZW50ZWRGaWxlUHJvdG9jb2xbXCJVTlJFQ09HTklaRURcIl0gPSAtMV0gPSBcIlVOUkVDT0dOSVpFRFwiO1xufSkoU2VnbWVudGVkRmlsZVByb3RvY29sID0gZXhwb3J0cy5TZWdtZW50ZWRGaWxlUHJvdG9jb2wgfHwgKGV4cG9ydHMuU2VnbWVudGVkRmlsZVByb3RvY29sID0ge30pKTtcbmZ1bmN0aW9uIHNlZ21lbnRlZEZpbGVQcm90b2NvbEZyb21KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSBcIkRFRkFVTFRfU0VHTUVOVEVEX0ZJTEVfUFJPVE9DT0xcIjpcbiAgICAgICAgICAgIHJldHVybiBTZWdtZW50ZWRGaWxlUHJvdG9jb2wuREVGQVVMVF9TRUdNRU5URURfRklMRV9QUk9UT0NPTDtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIFwiSExTX1BST1RPQ09MXCI6XG4gICAgICAgICAgICByZXR1cm4gU2VnbWVudGVkRmlsZVByb3RvY29sLkhMU19QUk9UT0NPTDtcbiAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgY2FzZSBcIlVOUkVDT0dOSVpFRFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFNlZ21lbnRlZEZpbGVQcm90b2NvbC5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy5zZWdtZW50ZWRGaWxlUHJvdG9jb2xGcm9tSlNPTiA9IHNlZ21lbnRlZEZpbGVQcm90b2NvbEZyb21KU09OO1xuZnVuY3Rpb24gc2VnbWVudGVkRmlsZVByb3RvY29sVG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgU2VnbWVudGVkRmlsZVByb3RvY29sLkRFRkFVTFRfU0VHTUVOVEVEX0ZJTEVfUFJPVE9DT0w6XG4gICAgICAgICAgICByZXR1cm4gXCJERUZBVUxUX1NFR01FTlRFRF9GSUxFX1BST1RPQ09MXCI7XG4gICAgICAgIGNhc2UgU2VnbWVudGVkRmlsZVByb3RvY29sLkhMU19QUk9UT0NPTDpcbiAgICAgICAgICAgIHJldHVybiBcIkhMU19QUk9UT0NPTFwiO1xuICAgICAgICBjYXNlIFNlZ21lbnRlZEZpbGVQcm90b2NvbC5VTlJFQ09HTklaRUQ6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJVTlJFQ09HTklaRURcIjtcbiAgICB9XG59XG5leHBvcnRzLnNlZ21lbnRlZEZpbGVQcm90b2NvbFRvSlNPTiA9IHNlZ21lbnRlZEZpbGVQcm90b2NvbFRvSlNPTjtcbnZhciBTZWdtZW50ZWRGaWxlU3VmZml4O1xuKGZ1bmN0aW9uIChTZWdtZW50ZWRGaWxlU3VmZml4KSB7XG4gICAgU2VnbWVudGVkRmlsZVN1ZmZpeFtTZWdtZW50ZWRGaWxlU3VmZml4W1wiSU5ERVhcIl0gPSAwXSA9IFwiSU5ERVhcIjtcbiAgICBTZWdtZW50ZWRGaWxlU3VmZml4W1NlZ21lbnRlZEZpbGVTdWZmaXhbXCJUSU1FU1RBTVBcIl0gPSAxXSA9IFwiVElNRVNUQU1QXCI7XG4gICAgU2VnbWVudGVkRmlsZVN1ZmZpeFtTZWdtZW50ZWRGaWxlU3VmZml4W1wiVU5SRUNPR05JWkVEXCJdID0gLTFdID0gXCJVTlJFQ09HTklaRURcIjtcbn0pKFNlZ21lbnRlZEZpbGVTdWZmaXggPSBleHBvcnRzLlNlZ21lbnRlZEZpbGVTdWZmaXggfHwgKGV4cG9ydHMuU2VnbWVudGVkRmlsZVN1ZmZpeCA9IHt9KSk7XG5mdW5jdGlvbiBzZWdtZW50ZWRGaWxlU3VmZml4RnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiSU5ERVhcIjpcbiAgICAgICAgICAgIHJldHVybiBTZWdtZW50ZWRGaWxlU3VmZml4LklOREVYO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJUSU1FU1RBTVBcIjpcbiAgICAgICAgICAgIHJldHVybiBTZWdtZW50ZWRGaWxlU3VmZml4LlRJTUVTVEFNUDtcbiAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgY2FzZSBcIlVOUkVDT0dOSVpFRFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFNlZ21lbnRlZEZpbGVTdWZmaXguVU5SRUNPR05JWkVEO1xuICAgIH1cbn1cbmV4cG9ydHMuc2VnbWVudGVkRmlsZVN1ZmZpeEZyb21KU09OID0gc2VnbWVudGVkRmlsZVN1ZmZpeEZyb21KU09OO1xuZnVuY3Rpb24gc2VnbWVudGVkRmlsZVN1ZmZpeFRvSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIFNlZ21lbnRlZEZpbGVTdWZmaXguSU5ERVg6XG4gICAgICAgICAgICByZXR1cm4gXCJJTkRFWFwiO1xuICAgICAgICBjYXNlIFNlZ21lbnRlZEZpbGVTdWZmaXguVElNRVNUQU1QOlxuICAgICAgICAgICAgcmV0dXJuIFwiVElNRVNUQU1QXCI7XG4gICAgICAgIGNhc2UgU2VnbWVudGVkRmlsZVN1ZmZpeC5VTlJFQ09HTklaRUQ6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJVTlJFQ09HTklaRURcIjtcbiAgICB9XG59XG5leHBvcnRzLnNlZ21lbnRlZEZpbGVTdWZmaXhUb0pTT04gPSBzZWdtZW50ZWRGaWxlU3VmZml4VG9KU09OO1xudmFyIEltYWdlRmlsZVN1ZmZpeDtcbihmdW5jdGlvbiAoSW1hZ2VGaWxlU3VmZml4KSB7XG4gICAgSW1hZ2VGaWxlU3VmZml4W0ltYWdlRmlsZVN1ZmZpeFtcIklNQUdFX1NVRkZJWF9JTkRFWFwiXSA9IDBdID0gXCJJTUFHRV9TVUZGSVhfSU5ERVhcIjtcbiAgICBJbWFnZUZpbGVTdWZmaXhbSW1hZ2VGaWxlU3VmZml4W1wiSU1BR0VfU1VGRklYX1RJTUVTVEFNUFwiXSA9IDFdID0gXCJJTUFHRV9TVUZGSVhfVElNRVNUQU1QXCI7XG4gICAgSW1hZ2VGaWxlU3VmZml4W0ltYWdlRmlsZVN1ZmZpeFtcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShJbWFnZUZpbGVTdWZmaXggPSBleHBvcnRzLkltYWdlRmlsZVN1ZmZpeCB8fCAoZXhwb3J0cy5JbWFnZUZpbGVTdWZmaXggPSB7fSkpO1xuZnVuY3Rpb24gaW1hZ2VGaWxlU3VmZml4RnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiSU1BR0VfU1VGRklYX0lOREVYXCI6XG4gICAgICAgICAgICByZXR1cm4gSW1hZ2VGaWxlU3VmZml4LklNQUdFX1NVRkZJWF9JTkRFWDtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIFwiSU1BR0VfU1VGRklYX1RJTUVTVEFNUFwiOlxuICAgICAgICAgICAgcmV0dXJuIEltYWdlRmlsZVN1ZmZpeC5JTUFHRV9TVUZGSVhfVElNRVNUQU1QO1xuICAgICAgICBjYXNlIC0xOlxuICAgICAgICBjYXNlIFwiVU5SRUNPR05JWkVEXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gSW1hZ2VGaWxlU3VmZml4LlVOUkVDT0dOSVpFRDtcbiAgICB9XG59XG5leHBvcnRzLmltYWdlRmlsZVN1ZmZpeEZyb21KU09OID0gaW1hZ2VGaWxlU3VmZml4RnJvbUpTT047XG5mdW5jdGlvbiBpbWFnZUZpbGVTdWZmaXhUb0pTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSBJbWFnZUZpbGVTdWZmaXguSU1BR0VfU1VGRklYX0lOREVYOlxuICAgICAgICAgICAgcmV0dXJuIFwiSU1BR0VfU1VGRklYX0lOREVYXCI7XG4gICAgICAgIGNhc2UgSW1hZ2VGaWxlU3VmZml4LklNQUdFX1NVRkZJWF9USU1FU1RBTVA6XG4gICAgICAgICAgICByZXR1cm4gXCJJTUFHRV9TVUZGSVhfVElNRVNUQU1QXCI7XG4gICAgICAgIGNhc2UgSW1hZ2VGaWxlU3VmZml4LlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMuaW1hZ2VGaWxlU3VmZml4VG9KU09OID0gaW1hZ2VGaWxlU3VmZml4VG9KU09OO1xudmFyIFN0cmVhbVByb3RvY29sO1xuKGZ1bmN0aW9uIChTdHJlYW1Qcm90b2NvbCkge1xuICAgIC8qKiBERUZBVUxUX1BST1RPQ09MIC0gcHJvdG9jb2wgY2hvc2VuIGJhc2VkIG9uIHVybHMgKi9cbiAgICBTdHJlYW1Qcm90b2NvbFtTdHJlYW1Qcm90b2NvbFtcIkRFRkFVTFRfUFJPVE9DT0xcIl0gPSAwXSA9IFwiREVGQVVMVF9QUk9UT0NPTFwiO1xuICAgIFN0cmVhbVByb3RvY29sW1N0cmVhbVByb3RvY29sW1wiUlRNUFwiXSA9IDFdID0gXCJSVE1QXCI7XG4gICAgU3RyZWFtUHJvdG9jb2xbU3RyZWFtUHJvdG9jb2xbXCJVTlJFQ09HTklaRURcIl0gPSAtMV0gPSBcIlVOUkVDT0dOSVpFRFwiO1xufSkoU3RyZWFtUHJvdG9jb2wgPSBleHBvcnRzLlN0cmVhbVByb3RvY29sIHx8IChleHBvcnRzLlN0cmVhbVByb3RvY29sID0ge30pKTtcbmZ1bmN0aW9uIHN0cmVhbVByb3RvY29sRnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiREVGQVVMVF9QUk9UT0NPTFwiOlxuICAgICAgICAgICAgcmV0dXJuIFN0cmVhbVByb3RvY29sLkRFRkFVTFRfUFJPVE9DT0w7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSBcIlJUTVBcIjpcbiAgICAgICAgICAgIHJldHVybiBTdHJlYW1Qcm90b2NvbC5SVE1QO1xuICAgICAgICBjYXNlIC0xOlxuICAgICAgICBjYXNlIFwiVU5SRUNPR05JWkVEXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gU3RyZWFtUHJvdG9jb2wuVU5SRUNPR05JWkVEO1xuICAgIH1cbn1cbmV4cG9ydHMuc3RyZWFtUHJvdG9jb2xGcm9tSlNPTiA9IHN0cmVhbVByb3RvY29sRnJvbUpTT047XG5mdW5jdGlvbiBzdHJlYW1Qcm90b2NvbFRvSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIFN0cmVhbVByb3RvY29sLkRFRkFVTFRfUFJPVE9DT0w6XG4gICAgICAgICAgICByZXR1cm4gXCJERUZBVUxUX1BST1RPQ09MXCI7XG4gICAgICAgIGNhc2UgU3RyZWFtUHJvdG9jb2wuUlRNUDpcbiAgICAgICAgICAgIHJldHVybiBcIlJUTVBcIjtcbiAgICAgICAgY2FzZSBTdHJlYW1Qcm90b2NvbC5VTlJFQ09HTklaRUQ6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJVTlJFQ09HTklaRURcIjtcbiAgICB9XG59XG5leHBvcnRzLnN0cmVhbVByb3RvY29sVG9KU09OID0gc3RyZWFtUHJvdG9jb2xUb0pTT047XG52YXIgRW5jb2RpbmdPcHRpb25zUHJlc2V0O1xuKGZ1bmN0aW9uIChFbmNvZGluZ09wdGlvbnNQcmVzZXQpIHtcbiAgICAvKiogSDI2NF83MjBQXzMwIC0gMTI4MHg3MjAsIDMwZnBzLCAzMDAwa3BicywgSC4yNjRfTUFJTiAvIE9QVVMgKi9cbiAgICBFbmNvZGluZ09wdGlvbnNQcmVzZXRbRW5jb2RpbmdPcHRpb25zUHJlc2V0W1wiSDI2NF83MjBQXzMwXCJdID0gMF0gPSBcIkgyNjRfNzIwUF8zMFwiO1xuICAgIC8qKiBIMjY0XzcyMFBfNjAgLSAxMjgweDcyMCwgNjBmcHMsIDQ1MDBrYnBzLCBILjI2NF9NQUlOIC8gT1BVUyAqL1xuICAgIEVuY29kaW5nT3B0aW9uc1ByZXNldFtFbmNvZGluZ09wdGlvbnNQcmVzZXRbXCJIMjY0XzcyMFBfNjBcIl0gPSAxXSA9IFwiSDI2NF83MjBQXzYwXCI7XG4gICAgLyoqIEgyNjRfMTA4MFBfMzAgLSAxOTIweDEwODAsIDMwZnBzLCA0NTAwa2JwcywgSC4yNjRfTUFJTiAvIE9QVVMgKi9cbiAgICBFbmNvZGluZ09wdGlvbnNQcmVzZXRbRW5jb2RpbmdPcHRpb25zUHJlc2V0W1wiSDI2NF8xMDgwUF8zMFwiXSA9IDJdID0gXCJIMjY0XzEwODBQXzMwXCI7XG4gICAgLyoqIEgyNjRfMTA4MFBfNjAgLSAxOTIweDEwODAsIDYwZnBzLCA2MDAwa2JwcywgSC4yNjRfTUFJTiAvIE9QVVMgKi9cbiAgICBFbmNvZGluZ09wdGlvbnNQcmVzZXRbRW5jb2RpbmdPcHRpb25zUHJlc2V0W1wiSDI2NF8xMDgwUF82MFwiXSA9IDNdID0gXCJIMjY0XzEwODBQXzYwXCI7XG4gICAgLyoqIFBPUlRSQUlUX0gyNjRfNzIwUF8zMCAtIDcyMHgxMjgwLCAzMGZwcywgMzAwMGtwYnMsIEguMjY0X01BSU4gLyBPUFVTICovXG4gICAgRW5jb2RpbmdPcHRpb25zUHJlc2V0W0VuY29kaW5nT3B0aW9uc1ByZXNldFtcIlBPUlRSQUlUX0gyNjRfNzIwUF8zMFwiXSA9IDRdID0gXCJQT1JUUkFJVF9IMjY0XzcyMFBfMzBcIjtcbiAgICAvKiogUE9SVFJBSVRfSDI2NF83MjBQXzYwIC0gNzIweDEyODAsIDYwZnBzLCA0NTAwa2JwcywgSC4yNjRfTUFJTiAvIE9QVVMgKi9cbiAgICBFbmNvZGluZ09wdGlvbnNQcmVzZXRbRW5jb2RpbmdPcHRpb25zUHJlc2V0W1wiUE9SVFJBSVRfSDI2NF83MjBQXzYwXCJdID0gNV0gPSBcIlBPUlRSQUlUX0gyNjRfNzIwUF82MFwiO1xuICAgIC8qKiBQT1JUUkFJVF9IMjY0XzEwODBQXzMwIC0gMTA4MHgxOTIwLCAzMGZwcywgNDUwMGticHMsIEguMjY0X01BSU4gLyBPUFVTICovXG4gICAgRW5jb2RpbmdPcHRpb25zUHJlc2V0W0VuY29kaW5nT3B0aW9uc1ByZXNldFtcIlBPUlRSQUlUX0gyNjRfMTA4MFBfMzBcIl0gPSA2XSA9IFwiUE9SVFJBSVRfSDI2NF8xMDgwUF8zMFwiO1xuICAgIC8qKiBQT1JUUkFJVF9IMjY0XzEwODBQXzYwIC0gMTA4MHgxOTIwLCA2MGZwcywgNjAwMGticHMsIEguMjY0X01BSU4gLyBPUFVTICovXG4gICAgRW5jb2RpbmdPcHRpb25zUHJlc2V0W0VuY29kaW5nT3B0aW9uc1ByZXNldFtcIlBPUlRSQUlUX0gyNjRfMTA4MFBfNjBcIl0gPSA3XSA9IFwiUE9SVFJBSVRfSDI2NF8xMDgwUF82MFwiO1xuICAgIEVuY29kaW5nT3B0aW9uc1ByZXNldFtFbmNvZGluZ09wdGlvbnNQcmVzZXRbXCJVTlJFQ09HTklaRURcIl0gPSAtMV0gPSBcIlVOUkVDT0dOSVpFRFwiO1xufSkoRW5jb2RpbmdPcHRpb25zUHJlc2V0ID0gZXhwb3J0cy5FbmNvZGluZ09wdGlvbnNQcmVzZXQgfHwgKGV4cG9ydHMuRW5jb2RpbmdPcHRpb25zUHJlc2V0ID0ge30pKTtcbmZ1bmN0aW9uIGVuY29kaW5nT3B0aW9uc1ByZXNldEZyb21KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSBcIkgyNjRfNzIwUF8zMFwiOlxuICAgICAgICAgICAgcmV0dXJuIEVuY29kaW5nT3B0aW9uc1ByZXNldC5IMjY0XzcyMFBfMzA7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSBcIkgyNjRfNzIwUF82MFwiOlxuICAgICAgICAgICAgcmV0dXJuIEVuY29kaW5nT3B0aW9uc1ByZXNldC5IMjY0XzcyMFBfNjA7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSBcIkgyNjRfMTA4MFBfMzBcIjpcbiAgICAgICAgICAgIHJldHVybiBFbmNvZGluZ09wdGlvbnNQcmVzZXQuSDI2NF8xMDgwUF8zMDtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICBjYXNlIFwiSDI2NF8xMDgwUF82MFwiOlxuICAgICAgICAgICAgcmV0dXJuIEVuY29kaW5nT3B0aW9uc1ByZXNldC5IMjY0XzEwODBQXzYwO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgIGNhc2UgXCJQT1JUUkFJVF9IMjY0XzcyMFBfMzBcIjpcbiAgICAgICAgICAgIHJldHVybiBFbmNvZGluZ09wdGlvbnNQcmVzZXQuUE9SVFJBSVRfSDI2NF83MjBQXzMwO1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgIGNhc2UgXCJQT1JUUkFJVF9IMjY0XzcyMFBfNjBcIjpcbiAgICAgICAgICAgIHJldHVybiBFbmNvZGluZ09wdGlvbnNQcmVzZXQuUE9SVFJBSVRfSDI2NF83MjBQXzYwO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgIGNhc2UgXCJQT1JUUkFJVF9IMjY0XzEwODBQXzMwXCI6XG4gICAgICAgICAgICByZXR1cm4gRW5jb2RpbmdPcHRpb25zUHJlc2V0LlBPUlRSQUlUX0gyNjRfMTA4MFBfMzA7XG4gICAgICAgIGNhc2UgNzpcbiAgICAgICAgY2FzZSBcIlBPUlRSQUlUX0gyNjRfMTA4MFBfNjBcIjpcbiAgICAgICAgICAgIHJldHVybiBFbmNvZGluZ09wdGlvbnNQcmVzZXQuUE9SVFJBSVRfSDI2NF8xMDgwUF82MDtcbiAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgY2FzZSBcIlVOUkVDT0dOSVpFRFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIEVuY29kaW5nT3B0aW9uc1ByZXNldC5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy5lbmNvZGluZ09wdGlvbnNQcmVzZXRGcm9tSlNPTiA9IGVuY29kaW5nT3B0aW9uc1ByZXNldEZyb21KU09OO1xuZnVuY3Rpb24gZW5jb2RpbmdPcHRpb25zUHJlc2V0VG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgRW5jb2RpbmdPcHRpb25zUHJlc2V0LkgyNjRfNzIwUF8zMDpcbiAgICAgICAgICAgIHJldHVybiBcIkgyNjRfNzIwUF8zMFwiO1xuICAgICAgICBjYXNlIEVuY29kaW5nT3B0aW9uc1ByZXNldC5IMjY0XzcyMFBfNjA6XG4gICAgICAgICAgICByZXR1cm4gXCJIMjY0XzcyMFBfNjBcIjtcbiAgICAgICAgY2FzZSBFbmNvZGluZ09wdGlvbnNQcmVzZXQuSDI2NF8xMDgwUF8zMDpcbiAgICAgICAgICAgIHJldHVybiBcIkgyNjRfMTA4MFBfMzBcIjtcbiAgICAgICAgY2FzZSBFbmNvZGluZ09wdGlvbnNQcmVzZXQuSDI2NF8xMDgwUF82MDpcbiAgICAgICAgICAgIHJldHVybiBcIkgyNjRfMTA4MFBfNjBcIjtcbiAgICAgICAgY2FzZSBFbmNvZGluZ09wdGlvbnNQcmVzZXQuUE9SVFJBSVRfSDI2NF83MjBQXzMwOlxuICAgICAgICAgICAgcmV0dXJuIFwiUE9SVFJBSVRfSDI2NF83MjBQXzMwXCI7XG4gICAgICAgIGNhc2UgRW5jb2RpbmdPcHRpb25zUHJlc2V0LlBPUlRSQUlUX0gyNjRfNzIwUF82MDpcbiAgICAgICAgICAgIHJldHVybiBcIlBPUlRSQUlUX0gyNjRfNzIwUF82MFwiO1xuICAgICAgICBjYXNlIEVuY29kaW5nT3B0aW9uc1ByZXNldC5QT1JUUkFJVF9IMjY0XzEwODBQXzMwOlxuICAgICAgICAgICAgcmV0dXJuIFwiUE9SVFJBSVRfSDI2NF8xMDgwUF8zMFwiO1xuICAgICAgICBjYXNlIEVuY29kaW5nT3B0aW9uc1ByZXNldC5QT1JUUkFJVF9IMjY0XzEwODBQXzYwOlxuICAgICAgICAgICAgcmV0dXJuIFwiUE9SVFJBSVRfSDI2NF8xMDgwUF82MFwiO1xuICAgICAgICBjYXNlIEVuY29kaW5nT3B0aW9uc1ByZXNldC5VTlJFQ09HTklaRUQ6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJVTlJFQ09HTklaRURcIjtcbiAgICB9XG59XG5leHBvcnRzLmVuY29kaW5nT3B0aW9uc1ByZXNldFRvSlNPTiA9IGVuY29kaW5nT3B0aW9uc1ByZXNldFRvSlNPTjtcbnZhciBFZ3Jlc3NTdGF0dXM7XG4oZnVuY3Rpb24gKEVncmVzc1N0YXR1cykge1xuICAgIEVncmVzc1N0YXR1c1tFZ3Jlc3NTdGF0dXNbXCJFR1JFU1NfU1RBUlRJTkdcIl0gPSAwXSA9IFwiRUdSRVNTX1NUQVJUSU5HXCI7XG4gICAgRWdyZXNzU3RhdHVzW0VncmVzc1N0YXR1c1tcIkVHUkVTU19BQ1RJVkVcIl0gPSAxXSA9IFwiRUdSRVNTX0FDVElWRVwiO1xuICAgIEVncmVzc1N0YXR1c1tFZ3Jlc3NTdGF0dXNbXCJFR1JFU1NfRU5ESU5HXCJdID0gMl0gPSBcIkVHUkVTU19FTkRJTkdcIjtcbiAgICBFZ3Jlc3NTdGF0dXNbRWdyZXNzU3RhdHVzW1wiRUdSRVNTX0NPTVBMRVRFXCJdID0gM10gPSBcIkVHUkVTU19DT01QTEVURVwiO1xuICAgIEVncmVzc1N0YXR1c1tFZ3Jlc3NTdGF0dXNbXCJFR1JFU1NfRkFJTEVEXCJdID0gNF0gPSBcIkVHUkVTU19GQUlMRURcIjtcbiAgICBFZ3Jlc3NTdGF0dXNbRWdyZXNzU3RhdHVzW1wiRUdSRVNTX0FCT1JURURcIl0gPSA1XSA9IFwiRUdSRVNTX0FCT1JURURcIjtcbiAgICBFZ3Jlc3NTdGF0dXNbRWdyZXNzU3RhdHVzW1wiRUdSRVNTX0xJTUlUX1JFQUNIRURcIl0gPSA2XSA9IFwiRUdSRVNTX0xJTUlUX1JFQUNIRURcIjtcbiAgICBFZ3Jlc3NTdGF0dXNbRWdyZXNzU3RhdHVzW1wiVU5SRUNPR05JWkVEXCJdID0gLTFdID0gXCJVTlJFQ09HTklaRURcIjtcbn0pKEVncmVzc1N0YXR1cyA9IGV4cG9ydHMuRWdyZXNzU3RhdHVzIHx8IChleHBvcnRzLkVncmVzc1N0YXR1cyA9IHt9KSk7XG5mdW5jdGlvbiBlZ3Jlc3NTdGF0dXNGcm9tSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgXCJFR1JFU1NfU1RBUlRJTkdcIjpcbiAgICAgICAgICAgIHJldHVybiBFZ3Jlc3NTdGF0dXMuRUdSRVNTX1NUQVJUSU5HO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJFR1JFU1NfQUNUSVZFXCI6XG4gICAgICAgICAgICByZXR1cm4gRWdyZXNzU3RhdHVzLkVHUkVTU19BQ1RJVkU7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSBcIkVHUkVTU19FTkRJTkdcIjpcbiAgICAgICAgICAgIHJldHVybiBFZ3Jlc3NTdGF0dXMuRUdSRVNTX0VORElORztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICBjYXNlIFwiRUdSRVNTX0NPTVBMRVRFXCI6XG4gICAgICAgICAgICByZXR1cm4gRWdyZXNzU3RhdHVzLkVHUkVTU19DT01QTEVURTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICBjYXNlIFwiRUdSRVNTX0ZBSUxFRFwiOlxuICAgICAgICAgICAgcmV0dXJuIEVncmVzc1N0YXR1cy5FR1JFU1NfRkFJTEVEO1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgIGNhc2UgXCJFR1JFU1NfQUJPUlRFRFwiOlxuICAgICAgICAgICAgcmV0dXJuIEVncmVzc1N0YXR1cy5FR1JFU1NfQUJPUlRFRDtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICBjYXNlIFwiRUdSRVNTX0xJTUlUX1JFQUNIRURcIjpcbiAgICAgICAgICAgIHJldHVybiBFZ3Jlc3NTdGF0dXMuRUdSRVNTX0xJTUlUX1JFQUNIRUQ7XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBFZ3Jlc3NTdGF0dXMuVU5SRUNPR05JWkVEO1xuICAgIH1cbn1cbmV4cG9ydHMuZWdyZXNzU3RhdHVzRnJvbUpTT04gPSBlZ3Jlc3NTdGF0dXNGcm9tSlNPTjtcbmZ1bmN0aW9uIGVncmVzc1N0YXR1c1RvSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIEVncmVzc1N0YXR1cy5FR1JFU1NfU1RBUlRJTkc6XG4gICAgICAgICAgICByZXR1cm4gXCJFR1JFU1NfU1RBUlRJTkdcIjtcbiAgICAgICAgY2FzZSBFZ3Jlc3NTdGF0dXMuRUdSRVNTX0FDVElWRTpcbiAgICAgICAgICAgIHJldHVybiBcIkVHUkVTU19BQ1RJVkVcIjtcbiAgICAgICAgY2FzZSBFZ3Jlc3NTdGF0dXMuRUdSRVNTX0VORElORzpcbiAgICAgICAgICAgIHJldHVybiBcIkVHUkVTU19FTkRJTkdcIjtcbiAgICAgICAgY2FzZSBFZ3Jlc3NTdGF0dXMuRUdSRVNTX0NPTVBMRVRFOlxuICAgICAgICAgICAgcmV0dXJuIFwiRUdSRVNTX0NPTVBMRVRFXCI7XG4gICAgICAgIGNhc2UgRWdyZXNzU3RhdHVzLkVHUkVTU19GQUlMRUQ6XG4gICAgICAgICAgICByZXR1cm4gXCJFR1JFU1NfRkFJTEVEXCI7XG4gICAgICAgIGNhc2UgRWdyZXNzU3RhdHVzLkVHUkVTU19BQk9SVEVEOlxuICAgICAgICAgICAgcmV0dXJuIFwiRUdSRVNTX0FCT1JURURcIjtcbiAgICAgICAgY2FzZSBFZ3Jlc3NTdGF0dXMuRUdSRVNTX0xJTUlUX1JFQUNIRUQ6XG4gICAgICAgICAgICByZXR1cm4gXCJFR1JFU1NfTElNSVRfUkVBQ0hFRFwiO1xuICAgICAgICBjYXNlIEVncmVzc1N0YXR1cy5VTlJFQ09HTklaRUQ6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJVTlJFQ09HTklaRURcIjtcbiAgICB9XG59XG5leHBvcnRzLmVncmVzc1N0YXR1c1RvSlNPTiA9IGVncmVzc1N0YXR1c1RvSlNPTjtcbnZhciBTdHJlYW1JbmZvX1N0YXR1cztcbihmdW5jdGlvbiAoU3RyZWFtSW5mb19TdGF0dXMpIHtcbiAgICBTdHJlYW1JbmZvX1N0YXR1c1tTdHJlYW1JbmZvX1N0YXR1c1tcIkFDVElWRVwiXSA9IDBdID0gXCJBQ1RJVkVcIjtcbiAgICBTdHJlYW1JbmZvX1N0YXR1c1tTdHJlYW1JbmZvX1N0YXR1c1tcIkZJTklTSEVEXCJdID0gMV0gPSBcIkZJTklTSEVEXCI7XG4gICAgU3RyZWFtSW5mb19TdGF0dXNbU3RyZWFtSW5mb19TdGF0dXNbXCJGQUlMRURcIl0gPSAyXSA9IFwiRkFJTEVEXCI7XG4gICAgU3RyZWFtSW5mb19TdGF0dXNbU3RyZWFtSW5mb19TdGF0dXNbXCJVTlJFQ09HTklaRURcIl0gPSAtMV0gPSBcIlVOUkVDT0dOSVpFRFwiO1xufSkoU3RyZWFtSW5mb19TdGF0dXMgPSBleHBvcnRzLlN0cmVhbUluZm9fU3RhdHVzIHx8IChleHBvcnRzLlN0cmVhbUluZm9fU3RhdHVzID0ge30pKTtcbmZ1bmN0aW9uIHN0cmVhbUluZm9fU3RhdHVzRnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiQUNUSVZFXCI6XG4gICAgICAgICAgICByZXR1cm4gU3RyZWFtSW5mb19TdGF0dXMuQUNUSVZFO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJGSU5JU0hFRFwiOlxuICAgICAgICAgICAgcmV0dXJuIFN0cmVhbUluZm9fU3RhdHVzLkZJTklTSEVEO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgXCJGQUlMRURcIjpcbiAgICAgICAgICAgIHJldHVybiBTdHJlYW1JbmZvX1N0YXR1cy5GQUlMRUQ7XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBTdHJlYW1JbmZvX1N0YXR1cy5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy5zdHJlYW1JbmZvX1N0YXR1c0Zyb21KU09OID0gc3RyZWFtSW5mb19TdGF0dXNGcm9tSlNPTjtcbmZ1bmN0aW9uIHN0cmVhbUluZm9fU3RhdHVzVG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgU3RyZWFtSW5mb19TdGF0dXMuQUNUSVZFOlxuICAgICAgICAgICAgcmV0dXJuIFwiQUNUSVZFXCI7XG4gICAgICAgIGNhc2UgU3RyZWFtSW5mb19TdGF0dXMuRklOSVNIRUQ6XG4gICAgICAgICAgICByZXR1cm4gXCJGSU5JU0hFRFwiO1xuICAgICAgICBjYXNlIFN0cmVhbUluZm9fU3RhdHVzLkZBSUxFRDpcbiAgICAgICAgICAgIHJldHVybiBcIkZBSUxFRFwiO1xuICAgICAgICBjYXNlIFN0cmVhbUluZm9fU3RhdHVzLlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMuc3RyZWFtSW5mb19TdGF0dXNUb0pTT04gPSBzdHJlYW1JbmZvX1N0YXR1c1RvSlNPTjtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VSb29tQ29tcG9zaXRlRWdyZXNzUmVxdWVzdCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByb29tTmFtZTogXCJcIixcbiAgICAgICAgbGF5b3V0OiBcIlwiLFxuICAgICAgICBhdWRpb09ubHk6IGZhbHNlLFxuICAgICAgICB2aWRlb09ubHk6IGZhbHNlLFxuICAgICAgICBjdXN0b21CYXNlVXJsOiBcIlwiLFxuICAgICAgICBmaWxlOiB1bmRlZmluZWQsXG4gICAgICAgIHN0cmVhbTogdW5kZWZpbmVkLFxuICAgICAgICBzZWdtZW50czogdW5kZWZpbmVkLFxuICAgICAgICBwcmVzZXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgYWR2YW5jZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgZmlsZU91dHB1dHM6IFtdLFxuICAgICAgICBzdHJlYW1PdXRwdXRzOiBbXSxcbiAgICAgICAgc2VnbWVudE91dHB1dHM6IFtdLFxuICAgICAgICBpbWFnZU91dHB1dHM6IFtdLFxuICAgIH07XG59XG5leHBvcnRzLlJvb21Db21wb3NpdGVFZ3Jlc3NSZXF1ZXN0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vbU5hbWUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnJvb21OYW1lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5yb29tTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubGF5b3V0ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5sYXlvdXQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLmxheW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYXVkaW9Pbmx5ID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI0KS5ib29sKG1lc3NhZ2UuYXVkaW9Pbmx5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS52aWRlb09ubHkgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzIpLmJvb2wobWVzc2FnZS52aWRlb09ubHkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmN1c3RvbUJhc2VVcmwgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmN1c3RvbUJhc2VVcmwgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDIpLnN0cmluZyhtZXNzYWdlLmN1c3RvbUJhc2VVcmwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZpbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC5lbmNvZGUobWVzc2FnZS5maWxlLCB3cml0ZXIudWludDMyKDUwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0cmVhbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlN0cmVhbU91dHB1dC5lbmNvZGUobWVzc2FnZS5zdHJlYW0sIHdyaXRlci51aW50MzIoNTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VnbWVudHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LmVuY29kZShtZXNzYWdlLnNlZ21lbnRzLCB3cml0ZXIudWludDMyKDgyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnByZXNldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDY0KS5pbnQzMihtZXNzYWdlLnByZXNldCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYWR2YW5jZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5FbmNvZGluZ09wdGlvbnMuZW5jb2RlKG1lc3NhZ2UuYWR2YW5jZWQsIHdyaXRlci51aW50MzIoNzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZU91dHB1dHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmZpbGVPdXRwdXRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UuZmlsZU91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmVuY29kZSh2LCB3cml0ZXIudWludDMyKDkwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0cmVhbU91dHB1dHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnN0cmVhbU91dHB1dHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5zdHJlYW1PdXRwdXRzKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5TdHJlYW1PdXRwdXQuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoOTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnNlZ21lbnRPdXRwdXRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTA2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmltYWdlT3V0cHV0cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaW1hZ2VPdXRwdXRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UuaW1hZ2VPdXRwdXRzKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5JbWFnZU91dHB1dC5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxMTQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUm9vbUNvbXBvc2l0ZUVncmVzc1JlcXVlc3QoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvb21OYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGF5b3V0ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYXVkaW9Pbmx5ID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZpZGVvT25seSA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jdXN0b21CYXNlVXJsID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZmlsZSA9IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0cmVhbSA9IGV4cG9ydHMuU3RyZWFtT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VnbWVudHMgPSBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnByZXNldCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWR2YW5jZWQgPSBleHBvcnRzLkVuY29kaW5nT3B0aW9ucy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZpbGVPdXRwdXRzLnB1c2goZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdHJlYW1PdXRwdXRzLnB1c2goZXhwb3J0cy5TdHJlYW1PdXRwdXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMucHVzaChleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW1hZ2VPdXRwdXRzLnB1c2goZXhwb3J0cy5JbWFnZU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcm9vbU5hbWU6IGlzU2V0KG9iamVjdC5yb29tTmFtZSkgPyBTdHJpbmcob2JqZWN0LnJvb21OYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBsYXlvdXQ6IGlzU2V0KG9iamVjdC5sYXlvdXQpID8gU3RyaW5nKG9iamVjdC5sYXlvdXQpIDogXCJcIixcbiAgICAgICAgICAgIGF1ZGlvT25seTogaXNTZXQob2JqZWN0LmF1ZGlvT25seSkgPyBCb29sZWFuKG9iamVjdC5hdWRpb09ubHkpIDogZmFsc2UsXG4gICAgICAgICAgICB2aWRlb09ubHk6IGlzU2V0KG9iamVjdC52aWRlb09ubHkpID8gQm9vbGVhbihvYmplY3QudmlkZW9Pbmx5KSA6IGZhbHNlLFxuICAgICAgICAgICAgY3VzdG9tQmFzZVVybDogaXNTZXQob2JqZWN0LmN1c3RvbUJhc2VVcmwpID8gU3RyaW5nKG9iamVjdC5jdXN0b21CYXNlVXJsKSA6IFwiXCIsXG4gICAgICAgICAgICBmaWxlOiBpc1NldChvYmplY3QuZmlsZSkgPyBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmZyb21KU09OKG9iamVjdC5maWxlKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHN0cmVhbTogaXNTZXQob2JqZWN0LnN0cmVhbSkgPyBleHBvcnRzLlN0cmVhbU91dHB1dC5mcm9tSlNPTihvYmplY3Quc3RyZWFtKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHNlZ21lbnRzOiBpc1NldChvYmplY3Quc2VnbWVudHMpID8gZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LmZyb21KU09OKG9iamVjdC5zZWdtZW50cykgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBwcmVzZXQ6IGlzU2V0KG9iamVjdC5wcmVzZXQpID8gZW5jb2RpbmdPcHRpb25zUHJlc2V0RnJvbUpTT04ob2JqZWN0LnByZXNldCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBhZHZhbmNlZDogaXNTZXQob2JqZWN0LmFkdmFuY2VkKSA/IGV4cG9ydHMuRW5jb2RpbmdPcHRpb25zLmZyb21KU09OKG9iamVjdC5hZHZhbmNlZCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBmaWxlT3V0cHV0czogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QuZmlsZU91dHB1dHMpXG4gICAgICAgICAgICAgICAgPyBvYmplY3QuZmlsZU91dHB1dHMubWFwKChlKSA9PiBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmZyb21KU09OKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgICAgICBzdHJlYW1PdXRwdXRzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5zdHJlYW1PdXRwdXRzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LnN0cmVhbU91dHB1dHMubWFwKChlKSA9PiBleHBvcnRzLlN0cmVhbU91dHB1dC5mcm9tSlNPTihlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgc2VnbWVudE91dHB1dHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LnNlZ21lbnRPdXRwdXRzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LnNlZ21lbnRPdXRwdXRzLm1hcCgoZSkgPT4gZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LmZyb21KU09OKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgICAgICBpbWFnZU91dHB1dHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmltYWdlT3V0cHV0cylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5pbWFnZU91dHB1dHMubWFwKChlKSA9PiBleHBvcnRzLkltYWdlT3V0cHV0LmZyb21KU09OKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5yb29tTmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmoucm9vbU5hbWUgPSBtZXNzYWdlLnJvb21OYW1lKTtcbiAgICAgICAgbWVzc2FnZS5sYXlvdXQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmxheW91dCA9IG1lc3NhZ2UubGF5b3V0KTtcbiAgICAgICAgbWVzc2FnZS5hdWRpb09ubHkgIT09IHVuZGVmaW5lZCAmJiAob2JqLmF1ZGlvT25seSA9IG1lc3NhZ2UuYXVkaW9Pbmx5KTtcbiAgICAgICAgbWVzc2FnZS52aWRlb09ubHkgIT09IHVuZGVmaW5lZCAmJiAob2JqLnZpZGVvT25seSA9IG1lc3NhZ2UudmlkZW9Pbmx5KTtcbiAgICAgICAgbWVzc2FnZS5jdXN0b21CYXNlVXJsICE9PSB1bmRlZmluZWQgJiYgKG9iai5jdXN0b21CYXNlVXJsID0gbWVzc2FnZS5jdXN0b21CYXNlVXJsKTtcbiAgICAgICAgbWVzc2FnZS5maWxlICE9PSB1bmRlZmluZWQgJiYgKG9iai5maWxlID0gbWVzc2FnZS5maWxlID8gZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC50b0pTT04obWVzc2FnZS5maWxlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2Uuc3RyZWFtICE9PSB1bmRlZmluZWQgJiYgKG9iai5zdHJlYW0gPSBtZXNzYWdlLnN0cmVhbSA/IGV4cG9ydHMuU3RyZWFtT3V0cHV0LnRvSlNPTihtZXNzYWdlLnN0cmVhbSkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLnNlZ21lbnRzICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmouc2VnbWVudHMgPSBtZXNzYWdlLnNlZ21lbnRzID8gZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LnRvSlNPTihtZXNzYWdlLnNlZ21lbnRzKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UucHJlc2V0ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmoucHJlc2V0ID0gbWVzc2FnZS5wcmVzZXQgIT09IHVuZGVmaW5lZCA/IGVuY29kaW5nT3B0aW9uc1ByZXNldFRvSlNPTihtZXNzYWdlLnByZXNldCkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLmFkdmFuY2VkICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmouYWR2YW5jZWQgPSBtZXNzYWdlLmFkdmFuY2VkID8gZXhwb3J0cy5FbmNvZGluZ09wdGlvbnMudG9KU09OKG1lc3NhZ2UuYWR2YW5jZWQpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZU91dHB1dHMpIHtcbiAgICAgICAgICAgIG9iai5maWxlT3V0cHV0cyA9IG1lc3NhZ2UuZmlsZU91dHB1dHMubWFwKChlKSA9PiBlID8gZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLmZpbGVPdXRwdXRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RyZWFtT3V0cHV0cykge1xuICAgICAgICAgICAgb2JqLnN0cmVhbU91dHB1dHMgPSBtZXNzYWdlLnN0cmVhbU91dHB1dHMubWFwKChlKSA9PiBlID8gZXhwb3J0cy5TdHJlYW1PdXRwdXQudG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5zdHJlYW1PdXRwdXRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMpIHtcbiAgICAgICAgICAgIG9iai5zZWdtZW50T3V0cHV0cyA9IG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMubWFwKChlKSA9PiBlID8gZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouc2VnbWVudE91dHB1dHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5pbWFnZU91dHB1dHMpIHtcbiAgICAgICAgICAgIG9iai5pbWFnZU91dHB1dHMgPSBtZXNzYWdlLmltYWdlT3V0cHV0cy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLkltYWdlT3V0cHV0LnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouaW1hZ2VPdXRwdXRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaiwgX2s7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUm9vbUNvbXBvc2l0ZUVncmVzc1JlcXVlc3QoKTtcbiAgICAgICAgbWVzc2FnZS5yb29tTmFtZSA9IChfYSA9IG9iamVjdC5yb29tTmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5sYXlvdXQgPSAoX2IgPSBvYmplY3QubGF5b3V0KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmF1ZGlvT25seSA9IChfYyA9IG9iamVjdC5hdWRpb09ubHkpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLnZpZGVvT25seSA9IChfZCA9IG9iamVjdC52aWRlb09ubHkpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLmN1c3RvbUJhc2VVcmwgPSAoX2UgPSBvYmplY3QuY3VzdG9tQmFzZVVybCkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5maWxlID0gKG9iamVjdC5maWxlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmZpbGUgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZnJvbVBhcnRpYWwob2JqZWN0LmZpbGUpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5zdHJlYW0gPSAob2JqZWN0LnN0cmVhbSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5zdHJlYW0gIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuU3RyZWFtT3V0cHV0LmZyb21QYXJ0aWFsKG9iamVjdC5zdHJlYW0pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5zZWdtZW50cyA9IChvYmplY3Quc2VnbWVudHMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc2VnbWVudHMgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5mcm9tUGFydGlhbChvYmplY3Quc2VnbWVudHMpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5wcmVzZXQgPSAoX2YgPSBvYmplY3QucHJlc2V0KSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuYWR2YW5jZWQgPSAob2JqZWN0LmFkdmFuY2VkICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmFkdmFuY2VkICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkVuY29kaW5nT3B0aW9ucy5mcm9tUGFydGlhbChvYmplY3QuYWR2YW5jZWQpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5maWxlT3V0cHV0cyA9ICgoX2cgPSBvYmplY3QuZmlsZU91dHB1dHMpID09PSBudWxsIHx8IF9nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZy5tYXAoKGUpID0+IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgbWVzc2FnZS5zdHJlYW1PdXRwdXRzID0gKChfaCA9IG9iamVjdC5zdHJlYW1PdXRwdXRzKSA9PT0gbnVsbCB8fCBfaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2gubWFwKChlKSA9PiBleHBvcnRzLlN0cmVhbU91dHB1dC5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLnNlZ21lbnRPdXRwdXRzID0gKChfaiA9IG9iamVjdC5zZWdtZW50T3V0cHV0cykgPT09IG51bGwgfHwgX2ogPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9qLm1hcCgoZSkgPT4gZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2UuaW1hZ2VPdXRwdXRzID0gKChfayA9IG9iamVjdC5pbWFnZU91dHB1dHMpID09PSBudWxsIHx8IF9rID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfay5tYXAoKGUpID0+IGV4cG9ydHMuSW1hZ2VPdXRwdXQuZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlV2ViRWdyZXNzUmVxdWVzdCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB1cmw6IFwiXCIsXG4gICAgICAgIGF1ZGlvT25seTogZmFsc2UsXG4gICAgICAgIHZpZGVvT25seTogZmFsc2UsXG4gICAgICAgIGF3YWl0U3RhcnRTaWduYWw6IGZhbHNlLFxuICAgICAgICBmaWxlOiB1bmRlZmluZWQsXG4gICAgICAgIHN0cmVhbTogdW5kZWZpbmVkLFxuICAgICAgICBzZWdtZW50czogdW5kZWZpbmVkLFxuICAgICAgICBwcmVzZXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgYWR2YW5jZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgZmlsZU91dHB1dHM6IFtdLFxuICAgICAgICBzdHJlYW1PdXRwdXRzOiBbXSxcbiAgICAgICAgc2VnbWVudE91dHB1dHM6IFtdLFxuICAgICAgICBpbWFnZU91dHB1dHM6IFtdLFxuICAgIH07XG59XG5leHBvcnRzLldlYkVncmVzc1JlcXVlc3QgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS51cmwgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnVybCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UudXJsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5hdWRpb09ubHkgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTYpLmJvb2wobWVzc2FnZS5hdWRpb09ubHkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnZpZGVvT25seSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkuYm9vbChtZXNzYWdlLnZpZGVvT25seSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYXdhaXRTdGFydFNpZ25hbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig5NikuYm9vbChtZXNzYWdlLmF3YWl0U3RhcnRTaWduYWwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZpbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC5lbmNvZGUobWVzc2FnZS5maWxlLCB3cml0ZXIudWludDMyKDM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0cmVhbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlN0cmVhbU91dHB1dC5lbmNvZGUobWVzc2FnZS5zdHJlYW0sIHdyaXRlci51aW50MzIoNDIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VnbWVudHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LmVuY29kZShtZXNzYWdlLnNlZ21lbnRzLCB3cml0ZXIudWludDMyKDUwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnByZXNldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDU2KS5pbnQzMihtZXNzYWdlLnByZXNldCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYWR2YW5jZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5FbmNvZGluZ09wdGlvbnMuZW5jb2RlKG1lc3NhZ2UuYWR2YW5jZWQsIHdyaXRlci51aW50MzIoNjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZU91dHB1dHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmZpbGVPdXRwdXRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UuZmlsZU91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmVuY29kZSh2LCB3cml0ZXIudWludDMyKDc0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0cmVhbU91dHB1dHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnN0cmVhbU91dHB1dHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5zdHJlYW1PdXRwdXRzKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5TdHJlYW1PdXRwdXQuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoODIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnNlZ21lbnRPdXRwdXRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoOTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaW1hZ2VPdXRwdXRzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5pbWFnZU91dHB1dHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5pbWFnZU91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLkltYWdlT3V0cHV0LmVuY29kZSh2LCB3cml0ZXIudWludDMyKDEwNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VXZWJFZ3Jlc3NSZXF1ZXN0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51cmwgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hdWRpb09ubHkgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudmlkZW9Pbmx5ID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hd2FpdFN0YXJ0U2lnbmFsID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZpbGUgPSBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdHJlYW0gPSBleHBvcnRzLlN0cmVhbU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VnbWVudHMgPSBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnByZXNldCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWR2YW5jZWQgPSBleHBvcnRzLkVuY29kaW5nT3B0aW9ucy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZmlsZU91dHB1dHMucHVzaChleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0cmVhbU91dHB1dHMucHVzaChleHBvcnRzLlN0cmVhbU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZWdtZW50T3V0cHV0cy5wdXNoKGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbWFnZU91dHB1dHMucHVzaChleHBvcnRzLkltYWdlT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1cmw6IGlzU2V0KG9iamVjdC51cmwpID8gU3RyaW5nKG9iamVjdC51cmwpIDogXCJcIixcbiAgICAgICAgICAgIGF1ZGlvT25seTogaXNTZXQob2JqZWN0LmF1ZGlvT25seSkgPyBCb29sZWFuKG9iamVjdC5hdWRpb09ubHkpIDogZmFsc2UsXG4gICAgICAgICAgICB2aWRlb09ubHk6IGlzU2V0KG9iamVjdC52aWRlb09ubHkpID8gQm9vbGVhbihvYmplY3QudmlkZW9Pbmx5KSA6IGZhbHNlLFxuICAgICAgICAgICAgYXdhaXRTdGFydFNpZ25hbDogaXNTZXQob2JqZWN0LmF3YWl0U3RhcnRTaWduYWwpID8gQm9vbGVhbihvYmplY3QuYXdhaXRTdGFydFNpZ25hbCkgOiBmYWxzZSxcbiAgICAgICAgICAgIGZpbGU6IGlzU2V0KG9iamVjdC5maWxlKSA/IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZnJvbUpTT04ob2JqZWN0LmZpbGUpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc3RyZWFtOiBpc1NldChvYmplY3Quc3RyZWFtKSA/IGV4cG9ydHMuU3RyZWFtT3V0cHV0LmZyb21KU09OKG9iamVjdC5zdHJlYW0pIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc2VnbWVudHM6IGlzU2V0KG9iamVjdC5zZWdtZW50cykgPyBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZnJvbUpTT04ob2JqZWN0LnNlZ21lbnRzKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHByZXNldDogaXNTZXQob2JqZWN0LnByZXNldCkgPyBlbmNvZGluZ09wdGlvbnNQcmVzZXRGcm9tSlNPTihvYmplY3QucHJlc2V0KSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGFkdmFuY2VkOiBpc1NldChvYmplY3QuYWR2YW5jZWQpID8gZXhwb3J0cy5FbmNvZGluZ09wdGlvbnMuZnJvbUpTT04ob2JqZWN0LmFkdmFuY2VkKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGZpbGVPdXRwdXRzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5maWxlT3V0cHV0cylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5maWxlT3V0cHV0cy5tYXAoKGUpID0+IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZnJvbUpTT04oZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgIHN0cmVhbU91dHB1dHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LnN0cmVhbU91dHB1dHMpXG4gICAgICAgICAgICAgICAgPyBvYmplY3Quc3RyZWFtT3V0cHV0cy5tYXAoKGUpID0+IGV4cG9ydHMuU3RyZWFtT3V0cHV0LmZyb21KU09OKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgICAgICBzZWdtZW50T3V0cHV0czogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3Quc2VnbWVudE91dHB1dHMpXG4gICAgICAgICAgICAgICAgPyBvYmplY3Quc2VnbWVudE91dHB1dHMubWFwKChlKSA9PiBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZnJvbUpTT04oZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgIGltYWdlT3V0cHV0czogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QuaW1hZ2VPdXRwdXRzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LmltYWdlT3V0cHV0cy5tYXAoKGUpID0+IGV4cG9ydHMuSW1hZ2VPdXRwdXQuZnJvbUpTT04oZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnVybCAhPT0gdW5kZWZpbmVkICYmIChvYmoudXJsID0gbWVzc2FnZS51cmwpO1xuICAgICAgICBtZXNzYWdlLmF1ZGlvT25seSAhPT0gdW5kZWZpbmVkICYmIChvYmouYXVkaW9Pbmx5ID0gbWVzc2FnZS5hdWRpb09ubHkpO1xuICAgICAgICBtZXNzYWdlLnZpZGVvT25seSAhPT0gdW5kZWZpbmVkICYmIChvYmoudmlkZW9Pbmx5ID0gbWVzc2FnZS52aWRlb09ubHkpO1xuICAgICAgICBtZXNzYWdlLmF3YWl0U3RhcnRTaWduYWwgIT09IHVuZGVmaW5lZCAmJiAob2JqLmF3YWl0U3RhcnRTaWduYWwgPSBtZXNzYWdlLmF3YWl0U3RhcnRTaWduYWwpO1xuICAgICAgICBtZXNzYWdlLmZpbGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmZpbGUgPSBtZXNzYWdlLmZpbGUgPyBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LnRvSlNPTihtZXNzYWdlLmZpbGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5zdHJlYW0gIT09IHVuZGVmaW5lZCAmJiAob2JqLnN0cmVhbSA9IG1lc3NhZ2Uuc3RyZWFtID8gZXhwb3J0cy5TdHJlYW1PdXRwdXQudG9KU09OKG1lc3NhZ2Uuc3RyZWFtKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2Uuc2VnbWVudHMgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5zZWdtZW50cyA9IG1lc3NhZ2Uuc2VnbWVudHMgPyBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQudG9KU09OKG1lc3NhZ2Uuc2VnbWVudHMpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5wcmVzZXQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5wcmVzZXQgPSBtZXNzYWdlLnByZXNldCAhPT0gdW5kZWZpbmVkID8gZW5jb2RpbmdPcHRpb25zUHJlc2V0VG9KU09OKG1lc3NhZ2UucHJlc2V0KSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UuYWR2YW5jZWQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5hZHZhbmNlZCA9IG1lc3NhZ2UuYWR2YW5jZWQgPyBleHBvcnRzLkVuY29kaW5nT3B0aW9ucy50b0pTT04obWVzc2FnZS5hZHZhbmNlZCkgOiB1bmRlZmluZWQpO1xuICAgICAgICBpZiAobWVzc2FnZS5maWxlT3V0cHV0cykge1xuICAgICAgICAgICAgb2JqLmZpbGVPdXRwdXRzID0gbWVzc2FnZS5maWxlT3V0cHV0cy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouZmlsZU91dHB1dHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zdHJlYW1PdXRwdXRzKSB7XG4gICAgICAgICAgICBvYmouc3RyZWFtT3V0cHV0cyA9IG1lc3NhZ2Uuc3RyZWFtT3V0cHV0cy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLlN0cmVhbU91dHB1dC50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLnN0cmVhbU91dHB1dHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zZWdtZW50T3V0cHV0cykge1xuICAgICAgICAgICAgb2JqLnNlZ21lbnRPdXRwdXRzID0gbWVzc2FnZS5zZWdtZW50T3V0cHV0cy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQudG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5zZWdtZW50T3V0cHV0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmltYWdlT3V0cHV0cykge1xuICAgICAgICAgICAgb2JqLmltYWdlT3V0cHV0cyA9IG1lc3NhZ2UuaW1hZ2VPdXRwdXRzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuSW1hZ2VPdXRwdXQudG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5pbWFnZU91dHB1dHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9qO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVdlYkVncmVzc1JlcXVlc3QoKTtcbiAgICAgICAgbWVzc2FnZS51cmwgPSAoX2EgPSBvYmplY3QudXJsKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmF1ZGlvT25seSA9IChfYiA9IG9iamVjdC5hdWRpb09ubHkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLnZpZGVvT25seSA9IChfYyA9IG9iamVjdC52aWRlb09ubHkpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLmF3YWl0U3RhcnRTaWduYWwgPSAoX2QgPSBvYmplY3QuYXdhaXRTdGFydFNpZ25hbCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2UuZmlsZSA9IChvYmplY3QuZmlsZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5maWxlICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmZyb21QYXJ0aWFsKG9iamVjdC5maWxlKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2Uuc3RyZWFtID0gKG9iamVjdC5zdHJlYW0gIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc3RyZWFtICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLlN0cmVhbU91dHB1dC5mcm9tUGFydGlhbChvYmplY3Quc3RyZWFtKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2Uuc2VnbWVudHMgPSAob2JqZWN0LnNlZ21lbnRzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnNlZ21lbnRzICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZnJvbVBhcnRpYWwob2JqZWN0LnNlZ21lbnRzKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UucHJlc2V0ID0gKF9lID0gb2JqZWN0LnByZXNldCkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmFkdmFuY2VkID0gKG9iamVjdC5hZHZhbmNlZCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hZHZhbmNlZCAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5FbmNvZGluZ09wdGlvbnMuZnJvbVBhcnRpYWwob2JqZWN0LmFkdmFuY2VkKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuZmlsZU91dHB1dHMgPSAoKF9mID0gb2JqZWN0LmZpbGVPdXRwdXRzKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2YubWFwKChlKSA9PiBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2Uuc3RyZWFtT3V0cHV0cyA9ICgoX2cgPSBvYmplY3Quc3RyZWFtT3V0cHV0cykgPT09IG51bGwgfHwgX2cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nLm1hcCgoZSkgPT4gZXhwb3J0cy5TdHJlYW1PdXRwdXQuZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgbWVzc2FnZS5zZWdtZW50T3V0cHV0cyA9ICgoX2ggPSBvYmplY3Quc2VnbWVudE91dHB1dHMpID09PSBudWxsIHx8IF9oID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaC5tYXAoKGUpID0+IGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLmltYWdlT3V0cHV0cyA9ICgoX2ogPSBvYmplY3QuaW1hZ2VPdXRwdXRzKSA9PT0gbnVsbCB8fCBfaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2oubWFwKChlKSA9PiBleHBvcnRzLkltYWdlT3V0cHV0LmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVBhcnRpY2lwYW50RWdyZXNzUmVxdWVzdCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByb29tTmFtZTogXCJcIixcbiAgICAgICAgaWRlbnRpdHk6IFwiXCIsXG4gICAgICAgIHNjcmVlblNoYXJlOiBmYWxzZSxcbiAgICAgICAgcHJlc2V0OiB1bmRlZmluZWQsXG4gICAgICAgIGFkdmFuY2VkOiB1bmRlZmluZWQsXG4gICAgICAgIGZpbGVPdXRwdXRzOiBbXSxcbiAgICAgICAgc3RyZWFtT3V0cHV0czogW10sXG4gICAgICAgIHNlZ21lbnRPdXRwdXRzOiBbXSxcbiAgICAgICAgaW1hZ2VPdXRwdXRzOiBbXSxcbiAgICB9O1xufVxuZXhwb3J0cy5QYXJ0aWNpcGFudEVncmVzc1JlcXVlc3QgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5yb29tTmFtZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uucm9vbU5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLnJvb21OYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5pZGVudGl0eSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaWRlbnRpdHkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLmlkZW50aXR5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zY3JlZW5TaGFyZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkuYm9vbChtZXNzYWdlLnNjcmVlblNoYXJlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wcmVzZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigzMikuaW50MzIobWVzc2FnZS5wcmVzZXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmFkdmFuY2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuRW5jb2RpbmdPcHRpb25zLmVuY29kZShtZXNzYWdlLmFkdmFuY2VkLCB3cml0ZXIudWludDMyKDQyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZpbGVPdXRwdXRzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5maWxlT3V0cHV0cy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLmZpbGVPdXRwdXRzKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMig1MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zdHJlYW1PdXRwdXRzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5zdHJlYW1PdXRwdXRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2Uuc3RyZWFtT3V0cHV0cykge1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuU3RyZWFtT3V0cHV0LmVuY29kZSh2LCB3cml0ZXIudWludDMyKDU4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnNlZ21lbnRPdXRwdXRzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5zZWdtZW50T3V0cHV0cy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLnNlZ21lbnRPdXRwdXRzKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LmVuY29kZSh2LCB3cml0ZXIudWludDMyKDY2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmltYWdlT3V0cHV0cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaW1hZ2VPdXRwdXRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UuaW1hZ2VPdXRwdXRzKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5JbWFnZU91dHB1dC5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMig3NCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VQYXJ0aWNpcGFudEVncmVzc1JlcXVlc3QoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvb21OYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWRlbnRpdHkgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zY3JlZW5TaGFyZSA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wcmVzZXQgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFkdmFuY2VkID0gZXhwb3J0cy5FbmNvZGluZ09wdGlvbnMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZpbGVPdXRwdXRzLnB1c2goZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0cmVhbU91dHB1dHMucHVzaChleHBvcnRzLlN0cmVhbU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlZ21lbnRPdXRwdXRzLnB1c2goZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW1hZ2VPdXRwdXRzLnB1c2goZXhwb3J0cy5JbWFnZU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcm9vbU5hbWU6IGlzU2V0KG9iamVjdC5yb29tTmFtZSkgPyBTdHJpbmcob2JqZWN0LnJvb21OYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBpZGVudGl0eTogaXNTZXQob2JqZWN0LmlkZW50aXR5KSA/IFN0cmluZyhvYmplY3QuaWRlbnRpdHkpIDogXCJcIixcbiAgICAgICAgICAgIHNjcmVlblNoYXJlOiBpc1NldChvYmplY3Quc2NyZWVuU2hhcmUpID8gQm9vbGVhbihvYmplY3Quc2NyZWVuU2hhcmUpIDogZmFsc2UsXG4gICAgICAgICAgICBwcmVzZXQ6IGlzU2V0KG9iamVjdC5wcmVzZXQpID8gZW5jb2RpbmdPcHRpb25zUHJlc2V0RnJvbUpTT04ob2JqZWN0LnByZXNldCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBhZHZhbmNlZDogaXNTZXQob2JqZWN0LmFkdmFuY2VkKSA/IGV4cG9ydHMuRW5jb2RpbmdPcHRpb25zLmZyb21KU09OKG9iamVjdC5hZHZhbmNlZCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBmaWxlT3V0cHV0czogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QuZmlsZU91dHB1dHMpXG4gICAgICAgICAgICAgICAgPyBvYmplY3QuZmlsZU91dHB1dHMubWFwKChlKSA9PiBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmZyb21KU09OKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgICAgICBzdHJlYW1PdXRwdXRzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5zdHJlYW1PdXRwdXRzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LnN0cmVhbU91dHB1dHMubWFwKChlKSA9PiBleHBvcnRzLlN0cmVhbU91dHB1dC5mcm9tSlNPTihlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgc2VnbWVudE91dHB1dHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LnNlZ21lbnRPdXRwdXRzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LnNlZ21lbnRPdXRwdXRzLm1hcCgoZSkgPT4gZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LmZyb21KU09OKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgICAgICBpbWFnZU91dHB1dHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmltYWdlT3V0cHV0cylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5pbWFnZU91dHB1dHMubWFwKChlKSA9PiBleHBvcnRzLkltYWdlT3V0cHV0LmZyb21KU09OKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5yb29tTmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmoucm9vbU5hbWUgPSBtZXNzYWdlLnJvb21OYW1lKTtcbiAgICAgICAgbWVzc2FnZS5pZGVudGl0eSAhPT0gdW5kZWZpbmVkICYmIChvYmouaWRlbnRpdHkgPSBtZXNzYWdlLmlkZW50aXR5KTtcbiAgICAgICAgbWVzc2FnZS5zY3JlZW5TaGFyZSAhPT0gdW5kZWZpbmVkICYmIChvYmouc2NyZWVuU2hhcmUgPSBtZXNzYWdlLnNjcmVlblNoYXJlKTtcbiAgICAgICAgbWVzc2FnZS5wcmVzZXQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5wcmVzZXQgPSBtZXNzYWdlLnByZXNldCAhPT0gdW5kZWZpbmVkID8gZW5jb2RpbmdPcHRpb25zUHJlc2V0VG9KU09OKG1lc3NhZ2UucHJlc2V0KSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UuYWR2YW5jZWQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5hZHZhbmNlZCA9IG1lc3NhZ2UuYWR2YW5jZWQgPyBleHBvcnRzLkVuY29kaW5nT3B0aW9ucy50b0pTT04obWVzc2FnZS5hZHZhbmNlZCkgOiB1bmRlZmluZWQpO1xuICAgICAgICBpZiAobWVzc2FnZS5maWxlT3V0cHV0cykge1xuICAgICAgICAgICAgb2JqLmZpbGVPdXRwdXRzID0gbWVzc2FnZS5maWxlT3V0cHV0cy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouZmlsZU91dHB1dHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zdHJlYW1PdXRwdXRzKSB7XG4gICAgICAgICAgICBvYmouc3RyZWFtT3V0cHV0cyA9IG1lc3NhZ2Uuc3RyZWFtT3V0cHV0cy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLlN0cmVhbU91dHB1dC50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLnN0cmVhbU91dHB1dHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zZWdtZW50T3V0cHV0cykge1xuICAgICAgICAgICAgb2JqLnNlZ21lbnRPdXRwdXRzID0gbWVzc2FnZS5zZWdtZW50T3V0cHV0cy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQudG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5zZWdtZW50T3V0cHV0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmltYWdlT3V0cHV0cykge1xuICAgICAgICAgICAgb2JqLmltYWdlT3V0cHV0cyA9IG1lc3NhZ2UuaW1hZ2VPdXRwdXRzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuSW1hZ2VPdXRwdXQudG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5pbWFnZU91dHB1dHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2g7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUGFydGljaXBhbnRFZ3Jlc3NSZXF1ZXN0KCk7XG4gICAgICAgIG1lc3NhZ2Uucm9vbU5hbWUgPSAoX2EgPSBvYmplY3Qucm9vbU5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuaWRlbnRpdHkgPSAoX2IgPSBvYmplY3QuaWRlbnRpdHkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2Uuc2NyZWVuU2hhcmUgPSAoX2MgPSBvYmplY3Quc2NyZWVuU2hhcmUpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLnByZXNldCA9IChfZCA9IG9iamVjdC5wcmVzZXQpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5hZHZhbmNlZCA9IChvYmplY3QuYWR2YW5jZWQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYWR2YW5jZWQgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuRW5jb2RpbmdPcHRpb25zLmZyb21QYXJ0aWFsKG9iamVjdC5hZHZhbmNlZClcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmZpbGVPdXRwdXRzID0gKChfZSA9IG9iamVjdC5maWxlT3V0cHV0cykgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLm1hcCgoZSkgPT4gZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLnN0cmVhbU91dHB1dHMgPSAoKF9mID0gb2JqZWN0LnN0cmVhbU91dHB1dHMpID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZi5tYXAoKGUpID0+IGV4cG9ydHMuU3RyZWFtT3V0cHV0LmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMgPSAoKF9nID0gb2JqZWN0LnNlZ21lbnRPdXRwdXRzKSA9PT0gbnVsbCB8fCBfZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2cubWFwKChlKSA9PiBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgbWVzc2FnZS5pbWFnZU91dHB1dHMgPSAoKF9oID0gb2JqZWN0LmltYWdlT3V0cHV0cykgPT09IG51bGwgfHwgX2ggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9oLm1hcCgoZSkgPT4gZXhwb3J0cy5JbWFnZU91dHB1dC5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VUcmFja0NvbXBvc2l0ZUVncmVzc1JlcXVlc3QoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcm9vbU5hbWU6IFwiXCIsXG4gICAgICAgIGF1ZGlvVHJhY2tJZDogXCJcIixcbiAgICAgICAgdmlkZW9UcmFja0lkOiBcIlwiLFxuICAgICAgICBmaWxlOiB1bmRlZmluZWQsXG4gICAgICAgIHN0cmVhbTogdW5kZWZpbmVkLFxuICAgICAgICBzZWdtZW50czogdW5kZWZpbmVkLFxuICAgICAgICBwcmVzZXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgYWR2YW5jZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgZmlsZU91dHB1dHM6IFtdLFxuICAgICAgICBzdHJlYW1PdXRwdXRzOiBbXSxcbiAgICAgICAgc2VnbWVudE91dHB1dHM6IFtdLFxuICAgICAgICBpbWFnZU91dHB1dHM6IFtdLFxuICAgIH07XG59XG5leHBvcnRzLlRyYWNrQ29tcG9zaXRlRWdyZXNzUmVxdWVzdCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb21OYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yb29tTmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2Uucm9vbU5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmF1ZGlvVHJhY2tJZCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuYXVkaW9UcmFja0lkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5hdWRpb1RyYWNrSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnZpZGVvVHJhY2tJZCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UudmlkZW9UcmFja0lkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS52aWRlb1RyYWNrSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZpbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC5lbmNvZGUobWVzc2FnZS5maWxlLCB3cml0ZXIudWludDMyKDM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0cmVhbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlN0cmVhbU91dHB1dC5lbmNvZGUobWVzc2FnZS5zdHJlYW0sIHdyaXRlci51aW50MzIoNDIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VnbWVudHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LmVuY29kZShtZXNzYWdlLnNlZ21lbnRzLCB3cml0ZXIudWludDMyKDY2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnByZXNldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQ4KS5pbnQzMihtZXNzYWdlLnByZXNldCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYWR2YW5jZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5FbmNvZGluZ09wdGlvbnMuZW5jb2RlKG1lc3NhZ2UuYWR2YW5jZWQsIHdyaXRlci51aW50MzIoNTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZU91dHB1dHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmZpbGVPdXRwdXRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UuZmlsZU91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmVuY29kZSh2LCB3cml0ZXIudWludDMyKDkwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0cmVhbU91dHB1dHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnN0cmVhbU91dHB1dHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5zdHJlYW1PdXRwdXRzKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5TdHJlYW1PdXRwdXQuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoOTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnNlZ21lbnRPdXRwdXRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTA2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmltYWdlT3V0cHV0cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaW1hZ2VPdXRwdXRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UuaW1hZ2VPdXRwdXRzKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5JbWFnZU91dHB1dC5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxMTQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVHJhY2tDb21wb3NpdGVFZ3Jlc3NSZXF1ZXN0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb29tTmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmF1ZGlvVHJhY2tJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZpZGVvVHJhY2tJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZpbGUgPSBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdHJlYW0gPSBleHBvcnRzLlN0cmVhbU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VnbWVudHMgPSBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnByZXNldCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWR2YW5jZWQgPSBleHBvcnRzLkVuY29kaW5nT3B0aW9ucy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZpbGVPdXRwdXRzLnB1c2goZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdHJlYW1PdXRwdXRzLnB1c2goZXhwb3J0cy5TdHJlYW1PdXRwdXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMucHVzaChleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW1hZ2VPdXRwdXRzLnB1c2goZXhwb3J0cy5JbWFnZU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcm9vbU5hbWU6IGlzU2V0KG9iamVjdC5yb29tTmFtZSkgPyBTdHJpbmcob2JqZWN0LnJvb21OYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBhdWRpb1RyYWNrSWQ6IGlzU2V0KG9iamVjdC5hdWRpb1RyYWNrSWQpID8gU3RyaW5nKG9iamVjdC5hdWRpb1RyYWNrSWQpIDogXCJcIixcbiAgICAgICAgICAgIHZpZGVvVHJhY2tJZDogaXNTZXQob2JqZWN0LnZpZGVvVHJhY2tJZCkgPyBTdHJpbmcob2JqZWN0LnZpZGVvVHJhY2tJZCkgOiBcIlwiLFxuICAgICAgICAgICAgZmlsZTogaXNTZXQob2JqZWN0LmZpbGUpID8gZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC5mcm9tSlNPTihvYmplY3QuZmlsZSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzdHJlYW06IGlzU2V0KG9iamVjdC5zdHJlYW0pID8gZXhwb3J0cy5TdHJlYW1PdXRwdXQuZnJvbUpTT04ob2JqZWN0LnN0cmVhbSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzZWdtZW50czogaXNTZXQob2JqZWN0LnNlZ21lbnRzKSA/IGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5mcm9tSlNPTihvYmplY3Quc2VnbWVudHMpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcHJlc2V0OiBpc1NldChvYmplY3QucHJlc2V0KSA/IGVuY29kaW5nT3B0aW9uc1ByZXNldEZyb21KU09OKG9iamVjdC5wcmVzZXQpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgYWR2YW5jZWQ6IGlzU2V0KG9iamVjdC5hZHZhbmNlZCkgPyBleHBvcnRzLkVuY29kaW5nT3B0aW9ucy5mcm9tSlNPTihvYmplY3QuYWR2YW5jZWQpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZmlsZU91dHB1dHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmZpbGVPdXRwdXRzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LmZpbGVPdXRwdXRzLm1hcCgoZSkgPT4gZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC5mcm9tSlNPTihlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgc3RyZWFtT3V0cHV0czogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3Quc3RyZWFtT3V0cHV0cylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5zdHJlYW1PdXRwdXRzLm1hcCgoZSkgPT4gZXhwb3J0cy5TdHJlYW1PdXRwdXQuZnJvbUpTT04oZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgIHNlZ21lbnRPdXRwdXRzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5zZWdtZW50T3V0cHV0cylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5zZWdtZW50T3V0cHV0cy5tYXAoKGUpID0+IGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5mcm9tSlNPTihlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgaW1hZ2VPdXRwdXRzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5pbWFnZU91dHB1dHMpXG4gICAgICAgICAgICAgICAgPyBvYmplY3QuaW1hZ2VPdXRwdXRzLm1hcCgoZSkgPT4gZXhwb3J0cy5JbWFnZU91dHB1dC5mcm9tSlNPTihlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2Uucm9vbU5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnJvb21OYW1lID0gbWVzc2FnZS5yb29tTmFtZSk7XG4gICAgICAgIG1lc3NhZ2UuYXVkaW9UcmFja0lkICE9PSB1bmRlZmluZWQgJiYgKG9iai5hdWRpb1RyYWNrSWQgPSBtZXNzYWdlLmF1ZGlvVHJhY2tJZCk7XG4gICAgICAgIG1lc3NhZ2UudmlkZW9UcmFja0lkICE9PSB1bmRlZmluZWQgJiYgKG9iai52aWRlb1RyYWNrSWQgPSBtZXNzYWdlLnZpZGVvVHJhY2tJZCk7XG4gICAgICAgIG1lc3NhZ2UuZmlsZSAhPT0gdW5kZWZpbmVkICYmIChvYmouZmlsZSA9IG1lc3NhZ2UuZmlsZSA/IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQudG9KU09OKG1lc3NhZ2UuZmlsZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLnN0cmVhbSAhPT0gdW5kZWZpbmVkICYmIChvYmouc3RyZWFtID0gbWVzc2FnZS5zdHJlYW0gPyBleHBvcnRzLlN0cmVhbU91dHB1dC50b0pTT04obWVzc2FnZS5zdHJlYW0pIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5zZWdtZW50cyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLnNlZ21lbnRzID0gbWVzc2FnZS5zZWdtZW50cyA/IGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC50b0pTT04obWVzc2FnZS5zZWdtZW50cykgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLnByZXNldCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLnByZXNldCA9IG1lc3NhZ2UucHJlc2V0ICE9PSB1bmRlZmluZWQgPyBlbmNvZGluZ09wdGlvbnNQcmVzZXRUb0pTT04obWVzc2FnZS5wcmVzZXQpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5hZHZhbmNlZCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLmFkdmFuY2VkID0gbWVzc2FnZS5hZHZhbmNlZCA/IGV4cG9ydHMuRW5jb2RpbmdPcHRpb25zLnRvSlNPTihtZXNzYWdlLmFkdmFuY2VkKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmZpbGVPdXRwdXRzKSB7XG4gICAgICAgICAgICBvYmouZmlsZU91dHB1dHMgPSBtZXNzYWdlLmZpbGVPdXRwdXRzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQudG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5maWxlT3V0cHV0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0cmVhbU91dHB1dHMpIHtcbiAgICAgICAgICAgIG9iai5zdHJlYW1PdXRwdXRzID0gbWVzc2FnZS5zdHJlYW1PdXRwdXRzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuU3RyZWFtT3V0cHV0LnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouc3RyZWFtT3V0cHV0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnNlZ21lbnRPdXRwdXRzKSB7XG4gICAgICAgICAgICBvYmouc2VnbWVudE91dHB1dHMgPSBtZXNzYWdlLnNlZ21lbnRPdXRwdXRzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLnNlZ21lbnRPdXRwdXRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaW1hZ2VPdXRwdXRzKSB7XG4gICAgICAgICAgICBvYmouaW1hZ2VPdXRwdXRzID0gbWVzc2FnZS5pbWFnZU91dHB1dHMubWFwKChlKSA9PiBlID8gZXhwb3J0cy5JbWFnZU91dHB1dC50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLmltYWdlT3V0cHV0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUcmFja0NvbXBvc2l0ZUVncmVzc1JlcXVlc3QoKTtcbiAgICAgICAgbWVzc2FnZS5yb29tTmFtZSA9IChfYSA9IG9iamVjdC5yb29tTmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5hdWRpb1RyYWNrSWQgPSAoX2IgPSBvYmplY3QuYXVkaW9UcmFja0lkKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnZpZGVvVHJhY2tJZCA9IChfYyA9IG9iamVjdC52aWRlb1RyYWNrSWQpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuZmlsZSA9IChvYmplY3QuZmlsZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5maWxlICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmZyb21QYXJ0aWFsKG9iamVjdC5maWxlKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2Uuc3RyZWFtID0gKG9iamVjdC5zdHJlYW0gIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc3RyZWFtICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLlN0cmVhbU91dHB1dC5mcm9tUGFydGlhbChvYmplY3Quc3RyZWFtKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2Uuc2VnbWVudHMgPSAob2JqZWN0LnNlZ21lbnRzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnNlZ21lbnRzICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZnJvbVBhcnRpYWwob2JqZWN0LnNlZ21lbnRzKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UucHJlc2V0ID0gKF9kID0gb2JqZWN0LnByZXNldCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmFkdmFuY2VkID0gKG9iamVjdC5hZHZhbmNlZCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hZHZhbmNlZCAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5FbmNvZGluZ09wdGlvbnMuZnJvbVBhcnRpYWwob2JqZWN0LmFkdmFuY2VkKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuZmlsZU91dHB1dHMgPSAoKF9lID0gb2JqZWN0LmZpbGVPdXRwdXRzKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UubWFwKChlKSA9PiBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2Uuc3RyZWFtT3V0cHV0cyA9ICgoX2YgPSBvYmplY3Quc3RyZWFtT3V0cHV0cykgPT09IG51bGwgfHwgX2YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mLm1hcCgoZSkgPT4gZXhwb3J0cy5TdHJlYW1PdXRwdXQuZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgbWVzc2FnZS5zZWdtZW50T3V0cHV0cyA9ICgoX2cgPSBvYmplY3Quc2VnbWVudE91dHB1dHMpID09PSBudWxsIHx8IF9nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZy5tYXAoKGUpID0+IGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLmltYWdlT3V0cHV0cyA9ICgoX2ggPSBvYmplY3QuaW1hZ2VPdXRwdXRzKSA9PT0gbnVsbCB8fCBfaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2gubWFwKChlKSA9PiBleHBvcnRzLkltYWdlT3V0cHV0LmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVRyYWNrRWdyZXNzUmVxdWVzdCgpIHtcbiAgICByZXR1cm4geyByb29tTmFtZTogXCJcIiwgdHJhY2tJZDogXCJcIiwgZmlsZTogdW5kZWZpbmVkLCB3ZWJzb2NrZXRVcmw6IHVuZGVmaW5lZCB9O1xufVxuZXhwb3J0cy5UcmFja0VncmVzc1JlcXVlc3QgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5yb29tTmFtZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uucm9vbU5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLnJvb21OYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS50cmFja0lkICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS50cmFja0lkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS50cmFja0lkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5maWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuRGlyZWN0RmlsZU91dHB1dC5lbmNvZGUobWVzc2FnZS5maWxlLCB3cml0ZXIudWludDMyKDI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLndlYnNvY2tldFVybCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcobWVzc2FnZS53ZWJzb2NrZXRVcmwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRyYWNrRWdyZXNzUmVxdWVzdCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbU5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmFja0lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZmlsZSA9IGV4cG9ydHMuRGlyZWN0RmlsZU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uud2Vic29ja2V0VXJsID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb29tTmFtZTogaXNTZXQob2JqZWN0LnJvb21OYW1lKSA/IFN0cmluZyhvYmplY3Qucm9vbU5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIHRyYWNrSWQ6IGlzU2V0KG9iamVjdC50cmFja0lkKSA/IFN0cmluZyhvYmplY3QudHJhY2tJZCkgOiBcIlwiLFxuICAgICAgICAgICAgZmlsZTogaXNTZXQob2JqZWN0LmZpbGUpID8gZXhwb3J0cy5EaXJlY3RGaWxlT3V0cHV0LmZyb21KU09OKG9iamVjdC5maWxlKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHdlYnNvY2tldFVybDogaXNTZXQob2JqZWN0LndlYnNvY2tldFVybCkgPyBTdHJpbmcob2JqZWN0LndlYnNvY2tldFVybCkgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5yb29tTmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmoucm9vbU5hbWUgPSBtZXNzYWdlLnJvb21OYW1lKTtcbiAgICAgICAgbWVzc2FnZS50cmFja0lkICE9PSB1bmRlZmluZWQgJiYgKG9iai50cmFja0lkID0gbWVzc2FnZS50cmFja0lkKTtcbiAgICAgICAgbWVzc2FnZS5maWxlICE9PSB1bmRlZmluZWQgJiYgKG9iai5maWxlID0gbWVzc2FnZS5maWxlID8gZXhwb3J0cy5EaXJlY3RGaWxlT3V0cHV0LnRvSlNPTihtZXNzYWdlLmZpbGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS53ZWJzb2NrZXRVcmwgIT09IHVuZGVmaW5lZCAmJiAob2JqLndlYnNvY2tldFVybCA9IG1lc3NhZ2Uud2Vic29ja2V0VXJsKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUcmFja0VncmVzc1JlcXVlc3QoKTtcbiAgICAgICAgbWVzc2FnZS5yb29tTmFtZSA9IChfYSA9IG9iamVjdC5yb29tTmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS50cmFja0lkID0gKF9iID0gb2JqZWN0LnRyYWNrSWQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuZmlsZSA9IChvYmplY3QuZmlsZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5maWxlICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkRpcmVjdEZpbGVPdXRwdXQuZnJvbVBhcnRpYWwob2JqZWN0LmZpbGUpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS53ZWJzb2NrZXRVcmwgPSAoX2MgPSBvYmplY3Qud2Vic29ja2V0VXJsKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUVuY29kZWRGaWxlT3V0cHV0KCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGZpbGVUeXBlOiAwLFxuICAgICAgICBmaWxlcGF0aDogXCJcIixcbiAgICAgICAgZGlzYWJsZU1hbmlmZXN0OiBmYWxzZSxcbiAgICAgICAgczM6IHVuZGVmaW5lZCxcbiAgICAgICAgZ2NwOiB1bmRlZmluZWQsXG4gICAgICAgIGF6dXJlOiB1bmRlZmluZWQsXG4gICAgICAgIGFsaU9TUzogdW5kZWZpbmVkLFxuICAgIH07XG59XG5leHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZVR5cGUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmZpbGVUeXBlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDgpLmludDMyKG1lc3NhZ2UuZmlsZVR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZpbGVwYXRoICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5maWxlcGF0aCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UuZmlsZXBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmRpc2FibGVNYW5pZmVzdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0OCkuYm9vbChtZXNzYWdlLmRpc2FibGVNYW5pZmVzdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuczMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5TM1VwbG9hZC5lbmNvZGUobWVzc2FnZS5zMywgd3JpdGVyLnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5nY3AgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5HQ1BVcGxvYWQuZW5jb2RlKG1lc3NhZ2UuZ2NwLCB3cml0ZXIudWludDMyKDM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmF6dXJlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuQXp1cmVCbG9iVXBsb2FkLmVuY29kZShtZXNzYWdlLmF6dXJlLCB3cml0ZXIudWludDMyKDQyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmFsaU9TUyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkFsaU9TU1VwbG9hZC5lbmNvZGUobWVzc2FnZS5hbGlPU1MsIHdyaXRlci51aW50MzIoNTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlRW5jb2RlZEZpbGVPdXRwdXQoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZpbGVUeXBlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5maWxlcGF0aCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRpc2FibGVNYW5pZmVzdCA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zMyA9IGV4cG9ydHMuUzNVcGxvYWQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmdjcCA9IGV4cG9ydHMuR0NQVXBsb2FkLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5henVyZSA9IGV4cG9ydHMuQXp1cmVCbG9iVXBsb2FkLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hbGlPU1MgPSBleHBvcnRzLkFsaU9TU1VwbG9hZC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaWxlVHlwZTogaXNTZXQob2JqZWN0LmZpbGVUeXBlKSA/IGVuY29kZWRGaWxlVHlwZUZyb21KU09OKG9iamVjdC5maWxlVHlwZSkgOiAwLFxuICAgICAgICAgICAgZmlsZXBhdGg6IGlzU2V0KG9iamVjdC5maWxlcGF0aCkgPyBTdHJpbmcob2JqZWN0LmZpbGVwYXRoKSA6IFwiXCIsXG4gICAgICAgICAgICBkaXNhYmxlTWFuaWZlc3Q6IGlzU2V0KG9iamVjdC5kaXNhYmxlTWFuaWZlc3QpID8gQm9vbGVhbihvYmplY3QuZGlzYWJsZU1hbmlmZXN0KSA6IGZhbHNlLFxuICAgICAgICAgICAgczM6IGlzU2V0KG9iamVjdC5zMykgPyBleHBvcnRzLlMzVXBsb2FkLmZyb21KU09OKG9iamVjdC5zMykgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBnY3A6IGlzU2V0KG9iamVjdC5nY3ApID8gZXhwb3J0cy5HQ1BVcGxvYWQuZnJvbUpTT04ob2JqZWN0LmdjcCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBhenVyZTogaXNTZXQob2JqZWN0LmF6dXJlKSA/IGV4cG9ydHMuQXp1cmVCbG9iVXBsb2FkLmZyb21KU09OKG9iamVjdC5henVyZSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBhbGlPU1M6IGlzU2V0KG9iamVjdC5hbGlPU1MpID8gZXhwb3J0cy5BbGlPU1NVcGxvYWQuZnJvbUpTT04ob2JqZWN0LmFsaU9TUykgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5maWxlVHlwZSAhPT0gdW5kZWZpbmVkICYmIChvYmouZmlsZVR5cGUgPSBlbmNvZGVkRmlsZVR5cGVUb0pTT04obWVzc2FnZS5maWxlVHlwZSkpO1xuICAgICAgICBtZXNzYWdlLmZpbGVwYXRoICE9PSB1bmRlZmluZWQgJiYgKG9iai5maWxlcGF0aCA9IG1lc3NhZ2UuZmlsZXBhdGgpO1xuICAgICAgICBtZXNzYWdlLmRpc2FibGVNYW5pZmVzdCAhPT0gdW5kZWZpbmVkICYmIChvYmouZGlzYWJsZU1hbmlmZXN0ID0gbWVzc2FnZS5kaXNhYmxlTWFuaWZlc3QpO1xuICAgICAgICBtZXNzYWdlLnMzICE9PSB1bmRlZmluZWQgJiYgKG9iai5zMyA9IG1lc3NhZ2UuczMgPyBleHBvcnRzLlMzVXBsb2FkLnRvSlNPTihtZXNzYWdlLnMzKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UuZ2NwICE9PSB1bmRlZmluZWQgJiYgKG9iai5nY3AgPSBtZXNzYWdlLmdjcCA/IGV4cG9ydHMuR0NQVXBsb2FkLnRvSlNPTihtZXNzYWdlLmdjcCkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLmF6dXJlICE9PSB1bmRlZmluZWQgJiYgKG9iai5henVyZSA9IG1lc3NhZ2UuYXp1cmUgPyBleHBvcnRzLkF6dXJlQmxvYlVwbG9hZC50b0pTT04obWVzc2FnZS5henVyZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLmFsaU9TUyAhPT0gdW5kZWZpbmVkICYmIChvYmouYWxpT1NTID0gbWVzc2FnZS5hbGlPU1MgPyBleHBvcnRzLkFsaU9TU1VwbG9hZC50b0pTT04obWVzc2FnZS5hbGlPU1MpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VFbmNvZGVkRmlsZU91dHB1dCgpO1xuICAgICAgICBtZXNzYWdlLmZpbGVUeXBlID0gKF9hID0gb2JqZWN0LmZpbGVUeXBlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xuICAgICAgICBtZXNzYWdlLmZpbGVwYXRoID0gKF9iID0gb2JqZWN0LmZpbGVwYXRoKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmRpc2FibGVNYW5pZmVzdCA9IChfYyA9IG9iamVjdC5kaXNhYmxlTWFuaWZlc3QpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLnMzID0gKG9iamVjdC5zMyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5zMyAhPT0gbnVsbCkgPyBleHBvcnRzLlMzVXBsb2FkLmZyb21QYXJ0aWFsKG9iamVjdC5zMykgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuZ2NwID0gKG9iamVjdC5nY3AgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZ2NwICE9PSBudWxsKSA/IGV4cG9ydHMuR0NQVXBsb2FkLmZyb21QYXJ0aWFsKG9iamVjdC5nY3ApIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmF6dXJlID0gKG9iamVjdC5henVyZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5henVyZSAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQuZnJvbVBhcnRpYWwob2JqZWN0LmF6dXJlKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuYWxpT1NTID0gKG9iamVjdC5hbGlPU1MgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYWxpT1NTICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkFsaU9TU1VwbG9hZC5mcm9tUGFydGlhbChvYmplY3QuYWxpT1NTKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVNlZ21lbnRlZEZpbGVPdXRwdXQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJvdG9jb2w6IDAsXG4gICAgICAgIGZpbGVuYW1lUHJlZml4OiBcIlwiLFxuICAgICAgICBwbGF5bGlzdE5hbWU6IFwiXCIsXG4gICAgICAgIGxpdmVQbGF5bGlzdE5hbWU6IFwiXCIsXG4gICAgICAgIHNlZ21lbnREdXJhdGlvbjogMCxcbiAgICAgICAgZmlsZW5hbWVTdWZmaXg6IDAsXG4gICAgICAgIGRpc2FibGVNYW5pZmVzdDogZmFsc2UsXG4gICAgICAgIHMzOiB1bmRlZmluZWQsXG4gICAgICAgIGdjcDogdW5kZWZpbmVkLFxuICAgICAgICBhenVyZTogdW5kZWZpbmVkLFxuICAgICAgICBhbGlPU1M6IHVuZGVmaW5lZCxcbiAgICB9O1xufVxuZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UucHJvdG9jb2wgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnByb3RvY29sICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDgpLmludDMyKG1lc3NhZ2UucHJvdG9jb2wpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZpbGVuYW1lUHJlZml4ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5maWxlbmFtZVByZWZpeCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UuZmlsZW5hbWVQcmVmaXgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBsYXlsaXN0TmFtZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UucGxheWxpc3ROYW1lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5wbGF5bGlzdE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmxpdmVQbGF5bGlzdE5hbWUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmxpdmVQbGF5bGlzdE5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoOTApLnN0cmluZyhtZXNzYWdlLmxpdmVQbGF5bGlzdE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnNlZ21lbnREdXJhdGlvbiAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc2VnbWVudER1cmF0aW9uICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDMyKS51aW50MzIobWVzc2FnZS5zZWdtZW50RHVyYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZpbGVuYW1lU3VmZml4ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5maWxlbmFtZVN1ZmZpeCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4MCkuaW50MzIobWVzc2FnZS5maWxlbmFtZVN1ZmZpeCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDY0KS5ib29sKG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zMyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlMzVXBsb2FkLmVuY29kZShtZXNzYWdlLnMzLCB3cml0ZXIudWludDMyKDQyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmdjcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkdDUFVwbG9hZC5lbmNvZGUobWVzc2FnZS5nY3AsIHdyaXRlci51aW50MzIoNTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYXp1cmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQuZW5jb2RlKG1lc3NhZ2UuYXp1cmUsIHdyaXRlci51aW50MzIoNTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYWxpT1NTICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuQWxpT1NTVXBsb2FkLmVuY29kZShtZXNzYWdlLmFsaU9TUywgd3JpdGVyLnVpbnQzMig3NCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTZWdtZW50ZWRGaWxlT3V0cHV0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wcm90b2NvbCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZmlsZW5hbWVQcmVmaXggPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wbGF5bGlzdE5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGl2ZVBsYXlsaXN0TmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlZ21lbnREdXJhdGlvbiA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5maWxlbmFtZVN1ZmZpeCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0ID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnMzID0gZXhwb3J0cy5TM1VwbG9hZC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ2NwID0gZXhwb3J0cy5HQ1BVcGxvYWQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmF6dXJlID0gZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFsaU9TUyA9IGV4cG9ydHMuQWxpT1NTVXBsb2FkLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHByb3RvY29sOiBpc1NldChvYmplY3QucHJvdG9jb2wpID8gc2VnbWVudGVkRmlsZVByb3RvY29sRnJvbUpTT04ob2JqZWN0LnByb3RvY29sKSA6IDAsXG4gICAgICAgICAgICBmaWxlbmFtZVByZWZpeDogaXNTZXQob2JqZWN0LmZpbGVuYW1lUHJlZml4KSA/IFN0cmluZyhvYmplY3QuZmlsZW5hbWVQcmVmaXgpIDogXCJcIixcbiAgICAgICAgICAgIHBsYXlsaXN0TmFtZTogaXNTZXQob2JqZWN0LnBsYXlsaXN0TmFtZSkgPyBTdHJpbmcob2JqZWN0LnBsYXlsaXN0TmFtZSkgOiBcIlwiLFxuICAgICAgICAgICAgbGl2ZVBsYXlsaXN0TmFtZTogaXNTZXQob2JqZWN0LmxpdmVQbGF5bGlzdE5hbWUpID8gU3RyaW5nKG9iamVjdC5saXZlUGxheWxpc3ROYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBzZWdtZW50RHVyYXRpb246IGlzU2V0KG9iamVjdC5zZWdtZW50RHVyYXRpb24pID8gTnVtYmVyKG9iamVjdC5zZWdtZW50RHVyYXRpb24pIDogMCxcbiAgICAgICAgICAgIGZpbGVuYW1lU3VmZml4OiBpc1NldChvYmplY3QuZmlsZW5hbWVTdWZmaXgpID8gc2VnbWVudGVkRmlsZVN1ZmZpeEZyb21KU09OKG9iamVjdC5maWxlbmFtZVN1ZmZpeCkgOiAwLFxuICAgICAgICAgICAgZGlzYWJsZU1hbmlmZXN0OiBpc1NldChvYmplY3QuZGlzYWJsZU1hbmlmZXN0KSA/IEJvb2xlYW4ob2JqZWN0LmRpc2FibGVNYW5pZmVzdCkgOiBmYWxzZSxcbiAgICAgICAgICAgIHMzOiBpc1NldChvYmplY3QuczMpID8gZXhwb3J0cy5TM1VwbG9hZC5mcm9tSlNPTihvYmplY3QuczMpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZ2NwOiBpc1NldChvYmplY3QuZ2NwKSA/IGV4cG9ydHMuR0NQVXBsb2FkLmZyb21KU09OKG9iamVjdC5nY3ApIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgYXp1cmU6IGlzU2V0KG9iamVjdC5henVyZSkgPyBleHBvcnRzLkF6dXJlQmxvYlVwbG9hZC5mcm9tSlNPTihvYmplY3QuYXp1cmUpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgYWxpT1NTOiBpc1NldChvYmplY3QuYWxpT1NTKSA/IGV4cG9ydHMuQWxpT1NTVXBsb2FkLmZyb21KU09OKG9iamVjdC5hbGlPU1MpIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UucHJvdG9jb2wgIT09IHVuZGVmaW5lZCAmJiAob2JqLnByb3RvY29sID0gc2VnbWVudGVkRmlsZVByb3RvY29sVG9KU09OKG1lc3NhZ2UucHJvdG9jb2wpKTtcbiAgICAgICAgbWVzc2FnZS5maWxlbmFtZVByZWZpeCAhPT0gdW5kZWZpbmVkICYmIChvYmouZmlsZW5hbWVQcmVmaXggPSBtZXNzYWdlLmZpbGVuYW1lUHJlZml4KTtcbiAgICAgICAgbWVzc2FnZS5wbGF5bGlzdE5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnBsYXlsaXN0TmFtZSA9IG1lc3NhZ2UucGxheWxpc3ROYW1lKTtcbiAgICAgICAgbWVzc2FnZS5saXZlUGxheWxpc3ROYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5saXZlUGxheWxpc3ROYW1lID0gbWVzc2FnZS5saXZlUGxheWxpc3ROYW1lKTtcbiAgICAgICAgbWVzc2FnZS5zZWdtZW50RHVyYXRpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLnNlZ21lbnREdXJhdGlvbiA9IE1hdGgucm91bmQobWVzc2FnZS5zZWdtZW50RHVyYXRpb24pKTtcbiAgICAgICAgbWVzc2FnZS5maWxlbmFtZVN1ZmZpeCAhPT0gdW5kZWZpbmVkICYmIChvYmouZmlsZW5hbWVTdWZmaXggPSBzZWdtZW50ZWRGaWxlU3VmZml4VG9KU09OKG1lc3NhZ2UuZmlsZW5hbWVTdWZmaXgpKTtcbiAgICAgICAgbWVzc2FnZS5kaXNhYmxlTWFuaWZlc3QgIT09IHVuZGVmaW5lZCAmJiAob2JqLmRpc2FibGVNYW5pZmVzdCA9IG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0KTtcbiAgICAgICAgbWVzc2FnZS5zMyAhPT0gdW5kZWZpbmVkICYmIChvYmouczMgPSBtZXNzYWdlLnMzID8gZXhwb3J0cy5TM1VwbG9hZC50b0pTT04obWVzc2FnZS5zMykgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLmdjcCAhPT0gdW5kZWZpbmVkICYmIChvYmouZ2NwID0gbWVzc2FnZS5nY3AgPyBleHBvcnRzLkdDUFVwbG9hZC50b0pTT04obWVzc2FnZS5nY3ApIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5henVyZSAhPT0gdW5kZWZpbmVkICYmIChvYmouYXp1cmUgPSBtZXNzYWdlLmF6dXJlID8gZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQudG9KU09OKG1lc3NhZ2UuYXp1cmUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5hbGlPU1MgIT09IHVuZGVmaW5lZCAmJiAob2JqLmFsaU9TUyA9IG1lc3NhZ2UuYWxpT1NTID8gZXhwb3J0cy5BbGlPU1NVcGxvYWQudG9KU09OKG1lc3NhZ2UuYWxpT1NTKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVNlZ21lbnRlZEZpbGVPdXRwdXQoKTtcbiAgICAgICAgbWVzc2FnZS5wcm90b2NvbCA9IChfYSA9IG9iamVjdC5wcm90b2NvbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcbiAgICAgICAgbWVzc2FnZS5maWxlbmFtZVByZWZpeCA9IChfYiA9IG9iamVjdC5maWxlbmFtZVByZWZpeCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5wbGF5bGlzdE5hbWUgPSAoX2MgPSBvYmplY3QucGxheWxpc3ROYW1lKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmxpdmVQbGF5bGlzdE5hbWUgPSAoX2QgPSBvYmplY3QubGl2ZVBsYXlsaXN0TmFtZSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5zZWdtZW50RHVyYXRpb24gPSAoX2UgPSBvYmplY3Quc2VnbWVudER1cmF0aW9uKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiAwO1xuICAgICAgICBtZXNzYWdlLmZpbGVuYW1lU3VmZml4ID0gKF9mID0gb2JqZWN0LmZpbGVuYW1lU3VmZml4KSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiAwO1xuICAgICAgICBtZXNzYWdlLmRpc2FibGVNYW5pZmVzdCA9IChfZyA9IG9iamVjdC5kaXNhYmxlTWFuaWZlc3QpICE9PSBudWxsICYmIF9nICE9PSB2b2lkIDAgPyBfZyA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLnMzID0gKG9iamVjdC5zMyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5zMyAhPT0gbnVsbCkgPyBleHBvcnRzLlMzVXBsb2FkLmZyb21QYXJ0aWFsKG9iamVjdC5zMykgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuZ2NwID0gKG9iamVjdC5nY3AgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZ2NwICE9PSBudWxsKSA/IGV4cG9ydHMuR0NQVXBsb2FkLmZyb21QYXJ0aWFsKG9iamVjdC5nY3ApIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmF6dXJlID0gKG9iamVjdC5henVyZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5henVyZSAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQuZnJvbVBhcnRpYWwob2JqZWN0LmF6dXJlKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuYWxpT1NTID0gKG9iamVjdC5hbGlPU1MgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYWxpT1NTICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkFsaU9TU1VwbG9hZC5mcm9tUGFydGlhbChvYmplY3QuYWxpT1NTKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZURpcmVjdEZpbGVPdXRwdXQoKSB7XG4gICAgcmV0dXJuIHsgZmlsZXBhdGg6IFwiXCIsIGRpc2FibGVNYW5pZmVzdDogZmFsc2UsIHMzOiB1bmRlZmluZWQsIGdjcDogdW5kZWZpbmVkLCBhenVyZTogdW5kZWZpbmVkLCBhbGlPU1M6IHVuZGVmaW5lZCB9O1xufVxuZXhwb3J0cy5EaXJlY3RGaWxlT3V0cHV0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZXBhdGggIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmZpbGVwYXRoICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5maWxlcGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQwKS5ib29sKG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zMyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlMzVXBsb2FkLmVuY29kZShtZXNzYWdlLnMzLCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmdjcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkdDUFVwbG9hZC5lbmNvZGUobWVzc2FnZS5nY3AsIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYXp1cmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQuZW5jb2RlKG1lc3NhZ2UuYXp1cmUsIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYWxpT1NTICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuQWxpT1NTVXBsb2FkLmVuY29kZShtZXNzYWdlLmFsaU9TUywgd3JpdGVyLnVpbnQzMig1MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VEaXJlY3RGaWxlT3V0cHV0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5maWxlcGF0aCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRpc2FibGVNYW5pZmVzdCA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zMyA9IGV4cG9ydHMuUzNVcGxvYWQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmdjcCA9IGV4cG9ydHMuR0NQVXBsb2FkLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5henVyZSA9IGV4cG9ydHMuQXp1cmVCbG9iVXBsb2FkLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hbGlPU1MgPSBleHBvcnRzLkFsaU9TU1VwbG9hZC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaWxlcGF0aDogaXNTZXQob2JqZWN0LmZpbGVwYXRoKSA/IFN0cmluZyhvYmplY3QuZmlsZXBhdGgpIDogXCJcIixcbiAgICAgICAgICAgIGRpc2FibGVNYW5pZmVzdDogaXNTZXQob2JqZWN0LmRpc2FibGVNYW5pZmVzdCkgPyBCb29sZWFuKG9iamVjdC5kaXNhYmxlTWFuaWZlc3QpIDogZmFsc2UsXG4gICAgICAgICAgICBzMzogaXNTZXQob2JqZWN0LnMzKSA/IGV4cG9ydHMuUzNVcGxvYWQuZnJvbUpTT04ob2JqZWN0LnMzKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGdjcDogaXNTZXQob2JqZWN0LmdjcCkgPyBleHBvcnRzLkdDUFVwbG9hZC5mcm9tSlNPTihvYmplY3QuZ2NwKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGF6dXJlOiBpc1NldChvYmplY3QuYXp1cmUpID8gZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQuZnJvbUpTT04ob2JqZWN0LmF6dXJlKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGFsaU9TUzogaXNTZXQob2JqZWN0LmFsaU9TUykgPyBleHBvcnRzLkFsaU9TU1VwbG9hZC5mcm9tSlNPTihvYmplY3QuYWxpT1NTKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmZpbGVwYXRoICE9PSB1bmRlZmluZWQgJiYgKG9iai5maWxlcGF0aCA9IG1lc3NhZ2UuZmlsZXBhdGgpO1xuICAgICAgICBtZXNzYWdlLmRpc2FibGVNYW5pZmVzdCAhPT0gdW5kZWZpbmVkICYmIChvYmouZGlzYWJsZU1hbmlmZXN0ID0gbWVzc2FnZS5kaXNhYmxlTWFuaWZlc3QpO1xuICAgICAgICBtZXNzYWdlLnMzICE9PSB1bmRlZmluZWQgJiYgKG9iai5zMyA9IG1lc3NhZ2UuczMgPyBleHBvcnRzLlMzVXBsb2FkLnRvSlNPTihtZXNzYWdlLnMzKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UuZ2NwICE9PSB1bmRlZmluZWQgJiYgKG9iai5nY3AgPSBtZXNzYWdlLmdjcCA/IGV4cG9ydHMuR0NQVXBsb2FkLnRvSlNPTihtZXNzYWdlLmdjcCkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLmF6dXJlICE9PSB1bmRlZmluZWQgJiYgKG9iai5henVyZSA9IG1lc3NhZ2UuYXp1cmUgPyBleHBvcnRzLkF6dXJlQmxvYlVwbG9hZC50b0pTT04obWVzc2FnZS5henVyZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLmFsaU9TUyAhPT0gdW5kZWZpbmVkICYmIChvYmouYWxpT1NTID0gbWVzc2FnZS5hbGlPU1MgPyBleHBvcnRzLkFsaU9TU1VwbG9hZC50b0pTT04obWVzc2FnZS5hbGlPU1MpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZURpcmVjdEZpbGVPdXRwdXQoKTtcbiAgICAgICAgbWVzc2FnZS5maWxlcGF0aCA9IChfYSA9IG9iamVjdC5maWxlcGF0aCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5kaXNhYmxlTWFuaWZlc3QgPSAoX2IgPSBvYmplY3QuZGlzYWJsZU1hbmlmZXN0KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBmYWxzZTtcbiAgICAgICAgbWVzc2FnZS5zMyA9IChvYmplY3QuczMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuczMgIT09IG51bGwpID8gZXhwb3J0cy5TM1VwbG9hZC5mcm9tUGFydGlhbChvYmplY3QuczMpIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmdjcCA9IChvYmplY3QuZ2NwICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmdjcCAhPT0gbnVsbCkgPyBleHBvcnRzLkdDUFVwbG9hZC5mcm9tUGFydGlhbChvYmplY3QuZ2NwKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5henVyZSA9IChvYmplY3QuYXp1cmUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYXp1cmUgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuQXp1cmVCbG9iVXBsb2FkLmZyb21QYXJ0aWFsKG9iamVjdC5henVyZSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmFsaU9TUyA9IChvYmplY3QuYWxpT1NTICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmFsaU9TUyAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5BbGlPU1NVcGxvYWQuZnJvbVBhcnRpYWwob2JqZWN0LmFsaU9TUylcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VJbWFnZU91dHB1dCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjYXB0dXJlSW50ZXJ2YWw6IDAsXG4gICAgICAgIHdpZHRoOiAwLFxuICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgIGZpbGVuYW1lUHJlZml4OiBcIlwiLFxuICAgICAgICBmaWxlbmFtZVN1ZmZpeDogMCxcbiAgICAgICAgaW1hZ2VDb2RlYzogMCxcbiAgICAgICAgZGlzYWJsZU1hbmlmZXN0OiBmYWxzZSxcbiAgICAgICAgczM6IHVuZGVmaW5lZCxcbiAgICAgICAgZ2NwOiB1bmRlZmluZWQsXG4gICAgICAgIGF6dXJlOiB1bmRlZmluZWQsXG4gICAgICAgIGFsaU9TUzogdW5kZWZpbmVkLFxuICAgIH07XG59XG5leHBvcnRzLkltYWdlT3V0cHV0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY2FwdHVyZUludGVydmFsICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5jYXB0dXJlSW50ZXJ2YWwgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoOCkudWludDMyKG1lc3NhZ2UuY2FwdHVyZUludGVydmFsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS53aWR0aCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uud2lkdGggIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTYpLmludDMyKG1lc3NhZ2Uud2lkdGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaGVpZ2h0ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI0KS5pbnQzMihtZXNzYWdlLmhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZW5hbWVQcmVmaXggIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmZpbGVuYW1lUHJlZml4ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcobWVzc2FnZS5maWxlbmFtZVByZWZpeCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZW5hbWVTdWZmaXggIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmZpbGVuYW1lU3VmZml4ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQwKS5pbnQzMihtZXNzYWdlLmZpbGVuYW1lU3VmZml4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5pbWFnZUNvZGVjICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5pbWFnZUNvZGVjICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQ4KS5pbnQzMihtZXNzYWdlLmltYWdlQ29kZWMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmRpc2FibGVNYW5pZmVzdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig1NikuYm9vbChtZXNzYWdlLmRpc2FibGVNYW5pZmVzdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuczMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5TM1VwbG9hZC5lbmNvZGUobWVzc2FnZS5zMywgd3JpdGVyLnVpbnQzMig2NikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5nY3AgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5HQ1BVcGxvYWQuZW5jb2RlKG1lc3NhZ2UuZ2NwLCB3cml0ZXIudWludDMyKDc0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmF6dXJlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuQXp1cmVCbG9iVXBsb2FkLmVuY29kZShtZXNzYWdlLmF6dXJlLCB3cml0ZXIudWludDMyKDgyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmFsaU9TUyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkFsaU9TU1VwbG9hZC5lbmNvZGUobWVzc2FnZS5hbGlPU1MsIHdyaXRlci51aW50MzIoOTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlSW1hZ2VPdXRwdXQoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNhcHR1cmVJbnRlcnZhbCA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLndpZHRoID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5oZWlnaHQgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZpbGVuYW1lUHJlZml4ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZmlsZW5hbWVTdWZmaXggPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmltYWdlQ29kZWMgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRpc2FibGVNYW5pZmVzdCA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zMyA9IGV4cG9ydHMuUzNVcGxvYWQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmdjcCA9IGV4cG9ydHMuR0NQVXBsb2FkLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYXp1cmUgPSBleHBvcnRzLkF6dXJlQmxvYlVwbG9hZC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFsaU9TUyA9IGV4cG9ydHMuQWxpT1NTVXBsb2FkLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNhcHR1cmVJbnRlcnZhbDogaXNTZXQob2JqZWN0LmNhcHR1cmVJbnRlcnZhbCkgPyBOdW1iZXIob2JqZWN0LmNhcHR1cmVJbnRlcnZhbCkgOiAwLFxuICAgICAgICAgICAgd2lkdGg6IGlzU2V0KG9iamVjdC53aWR0aCkgPyBOdW1iZXIob2JqZWN0LndpZHRoKSA6IDAsXG4gICAgICAgICAgICBoZWlnaHQ6IGlzU2V0KG9iamVjdC5oZWlnaHQpID8gTnVtYmVyKG9iamVjdC5oZWlnaHQpIDogMCxcbiAgICAgICAgICAgIGZpbGVuYW1lUHJlZml4OiBpc1NldChvYmplY3QuZmlsZW5hbWVQcmVmaXgpID8gU3RyaW5nKG9iamVjdC5maWxlbmFtZVByZWZpeCkgOiBcIlwiLFxuICAgICAgICAgICAgZmlsZW5hbWVTdWZmaXg6IGlzU2V0KG9iamVjdC5maWxlbmFtZVN1ZmZpeCkgPyBpbWFnZUZpbGVTdWZmaXhGcm9tSlNPTihvYmplY3QuZmlsZW5hbWVTdWZmaXgpIDogMCxcbiAgICAgICAgICAgIGltYWdlQ29kZWM6IGlzU2V0KG9iamVjdC5pbWFnZUNvZGVjKSA/IGxpdmVraXRfbW9kZWxzXzEuaW1hZ2VDb2RlY0Zyb21KU09OKG9iamVjdC5pbWFnZUNvZGVjKSA6IDAsXG4gICAgICAgICAgICBkaXNhYmxlTWFuaWZlc3Q6IGlzU2V0KG9iamVjdC5kaXNhYmxlTWFuaWZlc3QpID8gQm9vbGVhbihvYmplY3QuZGlzYWJsZU1hbmlmZXN0KSA6IGZhbHNlLFxuICAgICAgICAgICAgczM6IGlzU2V0KG9iamVjdC5zMykgPyBleHBvcnRzLlMzVXBsb2FkLmZyb21KU09OKG9iamVjdC5zMykgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBnY3A6IGlzU2V0KG9iamVjdC5nY3ApID8gZXhwb3J0cy5HQ1BVcGxvYWQuZnJvbUpTT04ob2JqZWN0LmdjcCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBhenVyZTogaXNTZXQob2JqZWN0LmF6dXJlKSA/IGV4cG9ydHMuQXp1cmVCbG9iVXBsb2FkLmZyb21KU09OKG9iamVjdC5henVyZSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBhbGlPU1M6IGlzU2V0KG9iamVjdC5hbGlPU1MpID8gZXhwb3J0cy5BbGlPU1NVcGxvYWQuZnJvbUpTT04ob2JqZWN0LmFsaU9TUykgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5jYXB0dXJlSW50ZXJ2YWwgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNhcHR1cmVJbnRlcnZhbCA9IE1hdGgucm91bmQobWVzc2FnZS5jYXB0dXJlSW50ZXJ2YWwpKTtcbiAgICAgICAgbWVzc2FnZS53aWR0aCAhPT0gdW5kZWZpbmVkICYmIChvYmoud2lkdGggPSBNYXRoLnJvdW5kKG1lc3NhZ2Uud2lkdGgpKTtcbiAgICAgICAgbWVzc2FnZS5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmhlaWdodCA9IE1hdGgucm91bmQobWVzc2FnZS5oZWlnaHQpKTtcbiAgICAgICAgbWVzc2FnZS5maWxlbmFtZVByZWZpeCAhPT0gdW5kZWZpbmVkICYmIChvYmouZmlsZW5hbWVQcmVmaXggPSBtZXNzYWdlLmZpbGVuYW1lUHJlZml4KTtcbiAgICAgICAgbWVzc2FnZS5maWxlbmFtZVN1ZmZpeCAhPT0gdW5kZWZpbmVkICYmIChvYmouZmlsZW5hbWVTdWZmaXggPSBpbWFnZUZpbGVTdWZmaXhUb0pTT04obWVzc2FnZS5maWxlbmFtZVN1ZmZpeCkpO1xuICAgICAgICBtZXNzYWdlLmltYWdlQ29kZWMgIT09IHVuZGVmaW5lZCAmJiAob2JqLmltYWdlQ29kZWMgPSBsaXZla2l0X21vZGVsc18xLmltYWdlQ29kZWNUb0pTT04obWVzc2FnZS5pbWFnZUNvZGVjKSk7XG4gICAgICAgIG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5kaXNhYmxlTWFuaWZlc3QgPSBtZXNzYWdlLmRpc2FibGVNYW5pZmVzdCk7XG4gICAgICAgIG1lc3NhZ2UuczMgIT09IHVuZGVmaW5lZCAmJiAob2JqLnMzID0gbWVzc2FnZS5zMyA/IGV4cG9ydHMuUzNVcGxvYWQudG9KU09OKG1lc3NhZ2UuczMpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5nY3AgIT09IHVuZGVmaW5lZCAmJiAob2JqLmdjcCA9IG1lc3NhZ2UuZ2NwID8gZXhwb3J0cy5HQ1BVcGxvYWQudG9KU09OKG1lc3NhZ2UuZ2NwKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UuYXp1cmUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmF6dXJlID0gbWVzc2FnZS5henVyZSA/IGV4cG9ydHMuQXp1cmVCbG9iVXBsb2FkLnRvSlNPTihtZXNzYWdlLmF6dXJlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UuYWxpT1NTICE9PSB1bmRlZmluZWQgJiYgKG9iai5hbGlPU1MgPSBtZXNzYWdlLmFsaU9TUyA/IGV4cG9ydHMuQWxpT1NTVXBsb2FkLnRvSlNPTihtZXNzYWdlLmFsaU9TUykgOiB1bmRlZmluZWQpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZztcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VJbWFnZU91dHB1dCgpO1xuICAgICAgICBtZXNzYWdlLmNhcHR1cmVJbnRlcnZhbCA9IChfYSA9IG9iamVjdC5jYXB0dXJlSW50ZXJ2YWwpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDA7XG4gICAgICAgIG1lc3NhZ2Uud2lkdGggPSAoX2IgPSBvYmplY3Qud2lkdGgpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDA7XG4gICAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gKF9jID0gb2JqZWN0LmhlaWdodCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMDtcbiAgICAgICAgbWVzc2FnZS5maWxlbmFtZVByZWZpeCA9IChfZCA9IG9iamVjdC5maWxlbmFtZVByZWZpeCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5maWxlbmFtZVN1ZmZpeCA9IChfZSA9IG9iamVjdC5maWxlbmFtZVN1ZmZpeCkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogMDtcbiAgICAgICAgbWVzc2FnZS5pbWFnZUNvZGVjID0gKF9mID0gb2JqZWN0LmltYWdlQ29kZWMpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IDA7XG4gICAgICAgIG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0ID0gKF9nID0gb2JqZWN0LmRpc2FibGVNYW5pZmVzdCkgIT09IG51bGwgJiYgX2cgIT09IHZvaWQgMCA/IF9nIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2UuczMgPSAob2JqZWN0LnMzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnMzICE9PSBudWxsKSA/IGV4cG9ydHMuUzNVcGxvYWQuZnJvbVBhcnRpYWwob2JqZWN0LnMzKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5nY3AgPSAob2JqZWN0LmdjcCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5nY3AgIT09IG51bGwpID8gZXhwb3J0cy5HQ1BVcGxvYWQuZnJvbVBhcnRpYWwob2JqZWN0LmdjcCkgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuYXp1cmUgPSAob2JqZWN0LmF6dXJlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmF6dXJlICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkF6dXJlQmxvYlVwbG9hZC5mcm9tUGFydGlhbChvYmplY3QuYXp1cmUpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5hbGlPU1MgPSAob2JqZWN0LmFsaU9TUyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hbGlPU1MgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuQWxpT1NTVXBsb2FkLmZyb21QYXJ0aWFsKG9iamVjdC5hbGlPU1MpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlUzNVcGxvYWQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWNjZXNzS2V5OiBcIlwiLFxuICAgICAgICBzZWNyZXQ6IFwiXCIsXG4gICAgICAgIHJlZ2lvbjogXCJcIixcbiAgICAgICAgZW5kcG9pbnQ6IFwiXCIsXG4gICAgICAgIGJ1Y2tldDogXCJcIixcbiAgICAgICAgZm9yY2VQYXRoU3R5bGU6IGZhbHNlLFxuICAgICAgICBtZXRhZGF0YToge30sXG4gICAgICAgIHRhZ2dpbmc6IFwiXCIsXG4gICAgfTtcbn1cbmV4cG9ydHMuUzNVcGxvYWQgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5hY2Nlc3NLZXkgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmFjY2Vzc0tleSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UuYWNjZXNzS2V5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zZWNyZXQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnNlY3JldCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2Uuc2VjcmV0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5yZWdpb24gIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnJlZ2lvbiAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2UucmVnaW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5lbmRwb2ludCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZW5kcG9pbnQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzQpLnN0cmluZyhtZXNzYWdlLmVuZHBvaW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5idWNrZXQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmJ1Y2tldCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0Mikuc3RyaW5nKG1lc3NhZ2UuYnVja2V0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5mb3JjZVBhdGhTdHlsZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0OCkuYm9vbChtZXNzYWdlLmZvcmNlUGF0aFN0eWxlKTtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QuZW50cmllcyhtZXNzYWdlLm1ldGFkYXRhIHx8IHt9KS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgIGV4cG9ydHMuUzNVcGxvYWRfTWV0YWRhdGFFbnRyeS5lbmNvZGUoeyBrZXk6IGtleSwgdmFsdWUgfSwgd3JpdGVyLnVpbnQzMig1OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChtZXNzYWdlLnRhZ2dpbmcgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnRhZ2dpbmcgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNjYpLnN0cmluZyhtZXNzYWdlLnRhZ2dpbmcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVMzVXBsb2FkKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hY2Nlc3NLZXkgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZWNyZXQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWdpb24gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmJ1Y2tldCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZvcmNlUGF0aFN0eWxlID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRyeTcgPSBleHBvcnRzLlMzVXBsb2FkX01ldGFkYXRhRW50cnkuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5Ny52YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1ldGFkYXRhW2VudHJ5Ny5rZXldID0gZW50cnk3LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50YWdnaW5nID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhY2Nlc3NLZXk6IGlzU2V0KG9iamVjdC5hY2Nlc3NLZXkpID8gU3RyaW5nKG9iamVjdC5hY2Nlc3NLZXkpIDogXCJcIixcbiAgICAgICAgICAgIHNlY3JldDogaXNTZXQob2JqZWN0LnNlY3JldCkgPyBTdHJpbmcob2JqZWN0LnNlY3JldCkgOiBcIlwiLFxuICAgICAgICAgICAgcmVnaW9uOiBpc1NldChvYmplY3QucmVnaW9uKSA/IFN0cmluZyhvYmplY3QucmVnaW9uKSA6IFwiXCIsXG4gICAgICAgICAgICBlbmRwb2ludDogaXNTZXQob2JqZWN0LmVuZHBvaW50KSA/IFN0cmluZyhvYmplY3QuZW5kcG9pbnQpIDogXCJcIixcbiAgICAgICAgICAgIGJ1Y2tldDogaXNTZXQob2JqZWN0LmJ1Y2tldCkgPyBTdHJpbmcob2JqZWN0LmJ1Y2tldCkgOiBcIlwiLFxuICAgICAgICAgICAgZm9yY2VQYXRoU3R5bGU6IGlzU2V0KG9iamVjdC5mb3JjZVBhdGhTdHlsZSkgPyBCb29sZWFuKG9iamVjdC5mb3JjZVBhdGhTdHlsZSkgOiBmYWxzZSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBpc09iamVjdChvYmplY3QubWV0YWRhdGEpXG4gICAgICAgICAgICAgICAgPyBPYmplY3QuZW50cmllcyhvYmplY3QubWV0YWRhdGEpLnJlZHVjZSgoYWNjLCBba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYWNjW2tleV0gPSBTdHJpbmcodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgICAgIH0sIHt9KVxuICAgICAgICAgICAgICAgIDoge30sXG4gICAgICAgICAgICB0YWdnaW5nOiBpc1NldChvYmplY3QudGFnZ2luZykgPyBTdHJpbmcob2JqZWN0LnRhZ2dpbmcpIDogXCJcIixcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmFjY2Vzc0tleSAhPT0gdW5kZWZpbmVkICYmIChvYmouYWNjZXNzS2V5ID0gbWVzc2FnZS5hY2Nlc3NLZXkpO1xuICAgICAgICBtZXNzYWdlLnNlY3JldCAhPT0gdW5kZWZpbmVkICYmIChvYmouc2VjcmV0ID0gbWVzc2FnZS5zZWNyZXQpO1xuICAgICAgICBtZXNzYWdlLnJlZ2lvbiAhPT0gdW5kZWZpbmVkICYmIChvYmoucmVnaW9uID0gbWVzc2FnZS5yZWdpb24pO1xuICAgICAgICBtZXNzYWdlLmVuZHBvaW50ICE9PSB1bmRlZmluZWQgJiYgKG9iai5lbmRwb2ludCA9IG1lc3NhZ2UuZW5kcG9pbnQpO1xuICAgICAgICBtZXNzYWdlLmJ1Y2tldCAhPT0gdW5kZWZpbmVkICYmIChvYmouYnVja2V0ID0gbWVzc2FnZS5idWNrZXQpO1xuICAgICAgICBtZXNzYWdlLmZvcmNlUGF0aFN0eWxlICE9PSB1bmRlZmluZWQgJiYgKG9iai5mb3JjZVBhdGhTdHlsZSA9IG1lc3NhZ2UuZm9yY2VQYXRoU3R5bGUpO1xuICAgICAgICBvYmoubWV0YWRhdGEgPSB7fTtcbiAgICAgICAgaWYgKG1lc3NhZ2UubWV0YWRhdGEpIHtcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKG1lc3NhZ2UubWV0YWRhdGEpLmZvckVhY2goKFtrLCB2XSkgPT4ge1xuICAgICAgICAgICAgICAgIG9iai5tZXRhZGF0YVtrXSA9IHY7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBtZXNzYWdlLnRhZ2dpbmcgIT09IHVuZGVmaW5lZCAmJiAob2JqLnRhZ2dpbmcgPSBtZXNzYWdlLnRhZ2dpbmcpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2g7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUzNVcGxvYWQoKTtcbiAgICAgICAgbWVzc2FnZS5hY2Nlc3NLZXkgPSAoX2EgPSBvYmplY3QuYWNjZXNzS2V5KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnNlY3JldCA9IChfYiA9IG9iamVjdC5zZWNyZXQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UucmVnaW9uID0gKF9jID0gb2JqZWN0LnJlZ2lvbikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IChfZCA9IG9iamVjdC5lbmRwb2ludCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5idWNrZXQgPSAoX2UgPSBvYmplY3QuYnVja2V0KSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmZvcmNlUGF0aFN0eWxlID0gKF9mID0gb2JqZWN0LmZvcmNlUGF0aFN0eWxlKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiBmYWxzZTtcbiAgICAgICAgbWVzc2FnZS5tZXRhZGF0YSA9IE9iamVjdC5lbnRyaWVzKChfZyA9IG9iamVjdC5tZXRhZGF0YSkgIT09IG51bGwgJiYgX2cgIT09IHZvaWQgMCA/IF9nIDoge30pLnJlZHVjZSgoYWNjLCBba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYWNjW2tleV0gPSBTdHJpbmcodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30pO1xuICAgICAgICBtZXNzYWdlLnRhZ2dpbmcgPSAoX2ggPSBvYmplY3QudGFnZ2luZykgIT09IG51bGwgJiYgX2ggIT09IHZvaWQgMCA/IF9oIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlUzNVcGxvYWRfTWV0YWRhdGFFbnRyeSgpIHtcbiAgICByZXR1cm4geyBrZXk6IFwiXCIsIHZhbHVlOiBcIlwiIH07XG59XG5leHBvcnRzLlMzVXBsb2FkX01ldGFkYXRhRW50cnkgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5rZXkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLmtleSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudmFsdWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTM1VwbG9hZF9NZXRhZGF0YUVudHJ5KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5rZXkgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52YWx1ZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4geyBrZXk6IGlzU2V0KG9iamVjdC5rZXkpID8gU3RyaW5nKG9iamVjdC5rZXkpIDogXCJcIiwgdmFsdWU6IGlzU2V0KG9iamVjdC52YWx1ZSkgPyBTdHJpbmcob2JqZWN0LnZhbHVlKSA6IFwiXCIgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmtleSAhPT0gdW5kZWZpbmVkICYmIChvYmoua2V5ID0gbWVzc2FnZS5rZXkpO1xuICAgICAgICBtZXNzYWdlLnZhbHVlICE9PSB1bmRlZmluZWQgJiYgKG9iai52YWx1ZSA9IG1lc3NhZ2UudmFsdWUpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUzNVcGxvYWRfTWV0YWRhdGFFbnRyeSgpO1xuICAgICAgICBtZXNzYWdlLmtleSA9IChfYSA9IG9iamVjdC5rZXkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UudmFsdWUgPSAoX2IgPSBvYmplY3QudmFsdWUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUdDUFVwbG9hZCgpIHtcbiAgICByZXR1cm4geyBjcmVkZW50aWFsczogXCJcIiwgYnVja2V0OiBcIlwiIH07XG59XG5leHBvcnRzLkdDUFVwbG9hZCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmNyZWRlbnRpYWxzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5jcmVkZW50aWFscyAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UuY3JlZGVudGlhbHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmJ1Y2tldCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuYnVja2V0ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5idWNrZXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUdDUFVwbG9hZCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY3JlZGVudGlhbHMgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5idWNrZXQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzOiBpc1NldChvYmplY3QuY3JlZGVudGlhbHMpID8gU3RyaW5nKG9iamVjdC5jcmVkZW50aWFscykgOiBcIlwiLFxuICAgICAgICAgICAgYnVja2V0OiBpc1NldChvYmplY3QuYnVja2V0KSA/IFN0cmluZyhvYmplY3QuYnVja2V0KSA6IFwiXCIsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5jcmVkZW50aWFscyAhPT0gdW5kZWZpbmVkICYmIChvYmouY3JlZGVudGlhbHMgPSBtZXNzYWdlLmNyZWRlbnRpYWxzKTtcbiAgICAgICAgbWVzc2FnZS5idWNrZXQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmJ1Y2tldCA9IG1lc3NhZ2UuYnVja2V0KTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUdDUFVwbG9hZCgpO1xuICAgICAgICBtZXNzYWdlLmNyZWRlbnRpYWxzID0gKF9hID0gb2JqZWN0LmNyZWRlbnRpYWxzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmJ1Y2tldCA9IChfYiA9IG9iamVjdC5idWNrZXQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUF6dXJlQmxvYlVwbG9hZCgpIHtcbiAgICByZXR1cm4geyBhY2NvdW50TmFtZTogXCJcIiwgYWNjb3VudEtleTogXCJcIiwgY29udGFpbmVyTmFtZTogXCJcIiB9O1xufVxuZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5hY2NvdW50TmFtZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuYWNjb3VudE5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLmFjY291bnROYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5hY2NvdW50S2V5ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5hY2NvdW50S2V5ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5hY2NvdW50S2V5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5jb250YWluZXJOYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5jb250YWluZXJOYW1lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5jb250YWluZXJOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VBenVyZUJsb2JVcGxvYWQoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFjY291bnROYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWNjb3VudEtleSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNvbnRhaW5lck5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFjY291bnROYW1lOiBpc1NldChvYmplY3QuYWNjb3VudE5hbWUpID8gU3RyaW5nKG9iamVjdC5hY2NvdW50TmFtZSkgOiBcIlwiLFxuICAgICAgICAgICAgYWNjb3VudEtleTogaXNTZXQob2JqZWN0LmFjY291bnRLZXkpID8gU3RyaW5nKG9iamVjdC5hY2NvdW50S2V5KSA6IFwiXCIsXG4gICAgICAgICAgICBjb250YWluZXJOYW1lOiBpc1NldChvYmplY3QuY29udGFpbmVyTmFtZSkgPyBTdHJpbmcob2JqZWN0LmNvbnRhaW5lck5hbWUpIDogXCJcIixcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmFjY291bnROYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5hY2NvdW50TmFtZSA9IG1lc3NhZ2UuYWNjb3VudE5hbWUpO1xuICAgICAgICBtZXNzYWdlLmFjY291bnRLZXkgIT09IHVuZGVmaW5lZCAmJiAob2JqLmFjY291bnRLZXkgPSBtZXNzYWdlLmFjY291bnRLZXkpO1xuICAgICAgICBtZXNzYWdlLmNvbnRhaW5lck5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNvbnRhaW5lck5hbWUgPSBtZXNzYWdlLmNvbnRhaW5lck5hbWUpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUF6dXJlQmxvYlVwbG9hZCgpO1xuICAgICAgICBtZXNzYWdlLmFjY291bnROYW1lID0gKF9hID0gb2JqZWN0LmFjY291bnROYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmFjY291bnRLZXkgPSAoX2IgPSBvYmplY3QuYWNjb3VudEtleSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5jb250YWluZXJOYW1lID0gKF9jID0gb2JqZWN0LmNvbnRhaW5lck5hbWUpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IFwiXCI7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUFsaU9TU1VwbG9hZCgpIHtcbiAgICByZXR1cm4geyBhY2Nlc3NLZXk6IFwiXCIsIHNlY3JldDogXCJcIiwgcmVnaW9uOiBcIlwiLCBlbmRwb2ludDogXCJcIiwgYnVja2V0OiBcIlwiIH07XG59XG5leHBvcnRzLkFsaU9TU1VwbG9hZCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmFjY2Vzc0tleSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuYWNjZXNzS2V5ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5hY2Nlc3NLZXkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnNlY3JldCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc2VjcmV0ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5zZWNyZXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJlZ2lvbiAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UucmVnaW9uICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5yZWdpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmVuZHBvaW50ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5lbmRwb2ludCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigzNCkuc3RyaW5nKG1lc3NhZ2UuZW5kcG9pbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmJ1Y2tldCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuYnVja2V0ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQyKS5zdHJpbmcobWVzc2FnZS5idWNrZXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUFsaU9TU1VwbG9hZCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWNjZXNzS2V5ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VjcmV0ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVnaW9uID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5idWNrZXQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFjY2Vzc0tleTogaXNTZXQob2JqZWN0LmFjY2Vzc0tleSkgPyBTdHJpbmcob2JqZWN0LmFjY2Vzc0tleSkgOiBcIlwiLFxuICAgICAgICAgICAgc2VjcmV0OiBpc1NldChvYmplY3Quc2VjcmV0KSA/IFN0cmluZyhvYmplY3Quc2VjcmV0KSA6IFwiXCIsXG4gICAgICAgICAgICByZWdpb246IGlzU2V0KG9iamVjdC5yZWdpb24pID8gU3RyaW5nKG9iamVjdC5yZWdpb24pIDogXCJcIixcbiAgICAgICAgICAgIGVuZHBvaW50OiBpc1NldChvYmplY3QuZW5kcG9pbnQpID8gU3RyaW5nKG9iamVjdC5lbmRwb2ludCkgOiBcIlwiLFxuICAgICAgICAgICAgYnVja2V0OiBpc1NldChvYmplY3QuYnVja2V0KSA/IFN0cmluZyhvYmplY3QuYnVja2V0KSA6IFwiXCIsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5hY2Nlc3NLZXkgIT09IHVuZGVmaW5lZCAmJiAob2JqLmFjY2Vzc0tleSA9IG1lc3NhZ2UuYWNjZXNzS2V5KTtcbiAgICAgICAgbWVzc2FnZS5zZWNyZXQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnNlY3JldCA9IG1lc3NhZ2Uuc2VjcmV0KTtcbiAgICAgICAgbWVzc2FnZS5yZWdpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLnJlZ2lvbiA9IG1lc3NhZ2UucmVnaW9uKTtcbiAgICAgICAgbWVzc2FnZS5lbmRwb2ludCAhPT0gdW5kZWZpbmVkICYmIChvYmouZW5kcG9pbnQgPSBtZXNzYWdlLmVuZHBvaW50KTtcbiAgICAgICAgbWVzc2FnZS5idWNrZXQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmJ1Y2tldCA9IG1lc3NhZ2UuYnVja2V0KTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUFsaU9TU1VwbG9hZCgpO1xuICAgICAgICBtZXNzYWdlLmFjY2Vzc0tleSA9IChfYSA9IG9iamVjdC5hY2Nlc3NLZXkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2Uuc2VjcmV0ID0gKF9iID0gb2JqZWN0LnNlY3JldCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5yZWdpb24gPSAoX2MgPSBvYmplY3QucmVnaW9uKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gKF9kID0gb2JqZWN0LmVuZHBvaW50KSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmJ1Y2tldCA9IChfZSA9IG9iamVjdC5idWNrZXQpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IFwiXCI7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVN0cmVhbU91dHB1dCgpIHtcbiAgICByZXR1cm4geyBwcm90b2NvbDogMCwgdXJsczogW10gfTtcbn1cbmV4cG9ydHMuU3RyZWFtT3V0cHV0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UucHJvdG9jb2wgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnByb3RvY29sICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDgpLmludDMyKG1lc3NhZ2UucHJvdG9jb2wpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnVybHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnVybHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS51cmxzKSB7XG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKHYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVN0cmVhbU91dHB1dCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucHJvdG9jb2wgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVybHMucHVzaChyZWFkZXIuc3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwcm90b2NvbDogaXNTZXQob2JqZWN0LnByb3RvY29sKSA/IHN0cmVhbVByb3RvY29sRnJvbUpTT04ob2JqZWN0LnByb3RvY29sKSA6IDAsXG4gICAgICAgICAgICB1cmxzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC51cmxzKSA/IG9iamVjdC51cmxzLm1hcCgoZSkgPT4gU3RyaW5nKGUpKSA6IFtdLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UucHJvdG9jb2wgIT09IHVuZGVmaW5lZCAmJiAob2JqLnByb3RvY29sID0gc3RyZWFtUHJvdG9jb2xUb0pTT04obWVzc2FnZS5wcm90b2NvbCkpO1xuICAgICAgICBpZiAobWVzc2FnZS51cmxzKSB7XG4gICAgICAgICAgICBvYmoudXJscyA9IG1lc3NhZ2UudXJscy5tYXAoKGUpID0+IGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLnVybHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3RyZWFtT3V0cHV0KCk7XG4gICAgICAgIG1lc3NhZ2UucHJvdG9jb2wgPSAoX2EgPSBvYmplY3QucHJvdG9jb2wpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDA7XG4gICAgICAgIG1lc3NhZ2UudXJscyA9ICgoX2IgPSBvYmplY3QudXJscykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLm1hcCgoZSkgPT4gZSkpIHx8IFtdO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VFbmNvZGluZ09wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgZGVwdGg6IDAsXG4gICAgICAgIGZyYW1lcmF0ZTogMCxcbiAgICAgICAgYXVkaW9Db2RlYzogMCxcbiAgICAgICAgYXVkaW9CaXRyYXRlOiAwLFxuICAgICAgICBhdWRpb0ZyZXF1ZW5jeTogMCxcbiAgICAgICAgdmlkZW9Db2RlYzogMCxcbiAgICAgICAgdmlkZW9CaXRyYXRlOiAwLFxuICAgICAgICBrZXlGcmFtZUludGVydmFsOiAwLFxuICAgIH07XG59XG5leHBvcnRzLkVuY29kaW5nT3B0aW9ucyA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLndpZHRoICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS53aWR0aCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4KS5pbnQzMihtZXNzYWdlLndpZHRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmhlaWdodCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNikuaW50MzIobWVzc2FnZS5oZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmRlcHRoICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5kZXB0aCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkuaW50MzIobWVzc2FnZS5kZXB0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZnJhbWVyYXRlICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5mcmFtZXJhdGUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzIpLmludDMyKG1lc3NhZ2UuZnJhbWVyYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5hdWRpb0NvZGVjICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5hdWRpb0NvZGVjICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQwKS5pbnQzMihtZXNzYWdlLmF1ZGlvQ29kZWMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmF1ZGlvQml0cmF0ZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuYXVkaW9CaXRyYXRlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQ4KS5pbnQzMihtZXNzYWdlLmF1ZGlvQml0cmF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYXVkaW9GcmVxdWVuY3kgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmF1ZGlvRnJlcXVlbmN5ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDU2KS5pbnQzMihtZXNzYWdlLmF1ZGlvRnJlcXVlbmN5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS52aWRlb0NvZGVjICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS52aWRlb0NvZGVjICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDY0KS5pbnQzMihtZXNzYWdlLnZpZGVvQ29kZWMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnZpZGVvQml0cmF0ZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UudmlkZW9CaXRyYXRlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDcyKS5pbnQzMihtZXNzYWdlLnZpZGVvQml0cmF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uua2V5RnJhbWVJbnRlcnZhbCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uua2V5RnJhbWVJbnRlcnZhbCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4MSkuZG91YmxlKG1lc3NhZ2Uua2V5RnJhbWVJbnRlcnZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlRW5jb2RpbmdPcHRpb25zKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS53aWR0aCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZXB0aCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZnJhbWVyYXRlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hdWRpb0NvZGVjID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hdWRpb0JpdHJhdGUgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmF1ZGlvRnJlcXVlbmN5ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52aWRlb0NvZGVjID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52aWRlb0JpdHJhdGUgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5rZXlGcmFtZUludGVydmFsID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB3aWR0aDogaXNTZXQob2JqZWN0LndpZHRoKSA/IE51bWJlcihvYmplY3Qud2lkdGgpIDogMCxcbiAgICAgICAgICAgIGhlaWdodDogaXNTZXQob2JqZWN0LmhlaWdodCkgPyBOdW1iZXIob2JqZWN0LmhlaWdodCkgOiAwLFxuICAgICAgICAgICAgZGVwdGg6IGlzU2V0KG9iamVjdC5kZXB0aCkgPyBOdW1iZXIob2JqZWN0LmRlcHRoKSA6IDAsXG4gICAgICAgICAgICBmcmFtZXJhdGU6IGlzU2V0KG9iamVjdC5mcmFtZXJhdGUpID8gTnVtYmVyKG9iamVjdC5mcmFtZXJhdGUpIDogMCxcbiAgICAgICAgICAgIGF1ZGlvQ29kZWM6IGlzU2V0KG9iamVjdC5hdWRpb0NvZGVjKSA/IGxpdmVraXRfbW9kZWxzXzEuYXVkaW9Db2RlY0Zyb21KU09OKG9iamVjdC5hdWRpb0NvZGVjKSA6IDAsXG4gICAgICAgICAgICBhdWRpb0JpdHJhdGU6IGlzU2V0KG9iamVjdC5hdWRpb0JpdHJhdGUpID8gTnVtYmVyKG9iamVjdC5hdWRpb0JpdHJhdGUpIDogMCxcbiAgICAgICAgICAgIGF1ZGlvRnJlcXVlbmN5OiBpc1NldChvYmplY3QuYXVkaW9GcmVxdWVuY3kpID8gTnVtYmVyKG9iamVjdC5hdWRpb0ZyZXF1ZW5jeSkgOiAwLFxuICAgICAgICAgICAgdmlkZW9Db2RlYzogaXNTZXQob2JqZWN0LnZpZGVvQ29kZWMpID8gbGl2ZWtpdF9tb2RlbHNfMS52aWRlb0NvZGVjRnJvbUpTT04ob2JqZWN0LnZpZGVvQ29kZWMpIDogMCxcbiAgICAgICAgICAgIHZpZGVvQml0cmF0ZTogaXNTZXQob2JqZWN0LnZpZGVvQml0cmF0ZSkgPyBOdW1iZXIob2JqZWN0LnZpZGVvQml0cmF0ZSkgOiAwLFxuICAgICAgICAgICAga2V5RnJhbWVJbnRlcnZhbDogaXNTZXQob2JqZWN0LmtleUZyYW1lSW50ZXJ2YWwpID8gTnVtYmVyKG9iamVjdC5rZXlGcmFtZUludGVydmFsKSA6IDAsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS53aWR0aCAhPT0gdW5kZWZpbmVkICYmIChvYmoud2lkdGggPSBNYXRoLnJvdW5kKG1lc3NhZ2Uud2lkdGgpKTtcbiAgICAgICAgbWVzc2FnZS5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmhlaWdodCA9IE1hdGgucm91bmQobWVzc2FnZS5oZWlnaHQpKTtcbiAgICAgICAgbWVzc2FnZS5kZXB0aCAhPT0gdW5kZWZpbmVkICYmIChvYmouZGVwdGggPSBNYXRoLnJvdW5kKG1lc3NhZ2UuZGVwdGgpKTtcbiAgICAgICAgbWVzc2FnZS5mcmFtZXJhdGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmZyYW1lcmF0ZSA9IE1hdGgucm91bmQobWVzc2FnZS5mcmFtZXJhdGUpKTtcbiAgICAgICAgbWVzc2FnZS5hdWRpb0NvZGVjICE9PSB1bmRlZmluZWQgJiYgKG9iai5hdWRpb0NvZGVjID0gbGl2ZWtpdF9tb2RlbHNfMS5hdWRpb0NvZGVjVG9KU09OKG1lc3NhZ2UuYXVkaW9Db2RlYykpO1xuICAgICAgICBtZXNzYWdlLmF1ZGlvQml0cmF0ZSAhPT0gdW5kZWZpbmVkICYmIChvYmouYXVkaW9CaXRyYXRlID0gTWF0aC5yb3VuZChtZXNzYWdlLmF1ZGlvQml0cmF0ZSkpO1xuICAgICAgICBtZXNzYWdlLmF1ZGlvRnJlcXVlbmN5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5hdWRpb0ZyZXF1ZW5jeSA9IE1hdGgucm91bmQobWVzc2FnZS5hdWRpb0ZyZXF1ZW5jeSkpO1xuICAgICAgICBtZXNzYWdlLnZpZGVvQ29kZWMgIT09IHVuZGVmaW5lZCAmJiAob2JqLnZpZGVvQ29kZWMgPSBsaXZla2l0X21vZGVsc18xLnZpZGVvQ29kZWNUb0pTT04obWVzc2FnZS52aWRlb0NvZGVjKSk7XG4gICAgICAgIG1lc3NhZ2UudmlkZW9CaXRyYXRlICE9PSB1bmRlZmluZWQgJiYgKG9iai52aWRlb0JpdHJhdGUgPSBNYXRoLnJvdW5kKG1lc3NhZ2UudmlkZW9CaXRyYXRlKSk7XG4gICAgICAgIG1lc3NhZ2Uua2V5RnJhbWVJbnRlcnZhbCAhPT0gdW5kZWZpbmVkICYmIChvYmoua2V5RnJhbWVJbnRlcnZhbCA9IG1lc3NhZ2Uua2V5RnJhbWVJbnRlcnZhbCk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2osIF9rO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUVuY29kaW5nT3B0aW9ucygpO1xuICAgICAgICBtZXNzYWdlLndpZHRoID0gKF9hID0gb2JqZWN0LndpZHRoKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xuICAgICAgICBtZXNzYWdlLmhlaWdodCA9IChfYiA9IG9iamVjdC5oZWlnaHQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDA7XG4gICAgICAgIG1lc3NhZ2UuZGVwdGggPSAoX2MgPSBvYmplY3QuZGVwdGgpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IDA7XG4gICAgICAgIG1lc3NhZ2UuZnJhbWVyYXRlID0gKF9kID0gb2JqZWN0LmZyYW1lcmF0ZSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogMDtcbiAgICAgICAgbWVzc2FnZS5hdWRpb0NvZGVjID0gKF9lID0gb2JqZWN0LmF1ZGlvQ29kZWMpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IDA7XG4gICAgICAgIG1lc3NhZ2UuYXVkaW9CaXRyYXRlID0gKF9mID0gb2JqZWN0LmF1ZGlvQml0cmF0ZSkgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogMDtcbiAgICAgICAgbWVzc2FnZS5hdWRpb0ZyZXF1ZW5jeSA9IChfZyA9IG9iamVjdC5hdWRpb0ZyZXF1ZW5jeSkgIT09IG51bGwgJiYgX2cgIT09IHZvaWQgMCA/IF9nIDogMDtcbiAgICAgICAgbWVzc2FnZS52aWRlb0NvZGVjID0gKF9oID0gb2JqZWN0LnZpZGVvQ29kZWMpICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IDA7XG4gICAgICAgIG1lc3NhZ2UudmlkZW9CaXRyYXRlID0gKF9qID0gb2JqZWN0LnZpZGVvQml0cmF0ZSkgIT09IG51bGwgJiYgX2ogIT09IHZvaWQgMCA/IF9qIDogMDtcbiAgICAgICAgbWVzc2FnZS5rZXlGcmFtZUludGVydmFsID0gKF9rID0gb2JqZWN0LmtleUZyYW1lSW50ZXJ2YWwpICE9PSBudWxsICYmIF9rICE9PSB2b2lkIDAgPyBfayA6IDA7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVVwZGF0ZUxheW91dFJlcXVlc3QoKSB7XG4gICAgcmV0dXJuIHsgZWdyZXNzSWQ6IFwiXCIsIGxheW91dDogXCJcIiB9O1xufVxuZXhwb3J0cy5VcGRhdGVMYXlvdXRSZXF1ZXN0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZWdyZXNzSWQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmVncmVzc0lkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5lZ3Jlc3NJZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubGF5b3V0ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5sYXlvdXQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLmxheW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVXBkYXRlTGF5b3V0UmVxdWVzdCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZWdyZXNzSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXlvdXQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVncmVzc0lkOiBpc1NldChvYmplY3QuZWdyZXNzSWQpID8gU3RyaW5nKG9iamVjdC5lZ3Jlc3NJZCkgOiBcIlwiLFxuICAgICAgICAgICAgbGF5b3V0OiBpc1NldChvYmplY3QubGF5b3V0KSA/IFN0cmluZyhvYmplY3QubGF5b3V0KSA6IFwiXCIsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5lZ3Jlc3NJZCAhPT0gdW5kZWZpbmVkICYmIChvYmouZWdyZXNzSWQgPSBtZXNzYWdlLmVncmVzc0lkKTtcbiAgICAgICAgbWVzc2FnZS5sYXlvdXQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmxheW91dCA9IG1lc3NhZ2UubGF5b3V0KTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVVwZGF0ZUxheW91dFJlcXVlc3QoKTtcbiAgICAgICAgbWVzc2FnZS5lZ3Jlc3NJZCA9IChfYSA9IG9iamVjdC5lZ3Jlc3NJZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5sYXlvdXQgPSAoX2IgPSBvYmplY3QubGF5b3V0KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VVcGRhdGVTdHJlYW1SZXF1ZXN0KCkge1xuICAgIHJldHVybiB7IGVncmVzc0lkOiBcIlwiLCBhZGRPdXRwdXRVcmxzOiBbXSwgcmVtb3ZlT3V0cHV0VXJsczogW10gfTtcbn1cbmV4cG9ydHMuVXBkYXRlU3RyZWFtUmVxdWVzdCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmVncmVzc0lkICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5lZ3Jlc3NJZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UuZWdyZXNzSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmFkZE91dHB1dFVybHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmFkZE91dHB1dFVybHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5hZGRPdXRwdXRVcmxzKSB7XG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKHYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJlbW92ZU91dHB1dFVybHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnJlbW92ZU91dHB1dFVybHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5yZW1vdmVPdXRwdXRVcmxzKSB7XG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKHYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVVwZGF0ZVN0cmVhbVJlcXVlc3QoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVncmVzc0lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWRkT3V0cHV0VXJscy5wdXNoKHJlYWRlci5zdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZW1vdmVPdXRwdXRVcmxzLnB1c2gocmVhZGVyLnN0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZWdyZXNzSWQ6IGlzU2V0KG9iamVjdC5lZ3Jlc3NJZCkgPyBTdHJpbmcob2JqZWN0LmVncmVzc0lkKSA6IFwiXCIsXG4gICAgICAgICAgICBhZGRPdXRwdXRVcmxzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5hZGRPdXRwdXRVcmxzKSA/IG9iamVjdC5hZGRPdXRwdXRVcmxzLm1hcCgoZSkgPT4gU3RyaW5nKGUpKSA6IFtdLFxuICAgICAgICAgICAgcmVtb3ZlT3V0cHV0VXJsczogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QucmVtb3ZlT3V0cHV0VXJscylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5yZW1vdmVPdXRwdXRVcmxzLm1hcCgoZSkgPT4gU3RyaW5nKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5lZ3Jlc3NJZCAhPT0gdW5kZWZpbmVkICYmIChvYmouZWdyZXNzSWQgPSBtZXNzYWdlLmVncmVzc0lkKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuYWRkT3V0cHV0VXJscykge1xuICAgICAgICAgICAgb2JqLmFkZE91dHB1dFVybHMgPSBtZXNzYWdlLmFkZE91dHB1dFVybHMubWFwKChlKSA9PiBlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5hZGRPdXRwdXRVcmxzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucmVtb3ZlT3V0cHV0VXJscykge1xuICAgICAgICAgICAgb2JqLnJlbW92ZU91dHB1dFVybHMgPSBtZXNzYWdlLnJlbW92ZU91dHB1dFVybHMubWFwKChlKSA9PiBlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5yZW1vdmVPdXRwdXRVcmxzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VVcGRhdGVTdHJlYW1SZXF1ZXN0KCk7XG4gICAgICAgIG1lc3NhZ2UuZWdyZXNzSWQgPSAoX2EgPSBvYmplY3QuZWdyZXNzSWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuYWRkT3V0cHV0VXJscyA9ICgoX2IgPSBvYmplY3QuYWRkT3V0cHV0VXJscykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLm1hcCgoZSkgPT4gZSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLnJlbW92ZU91dHB1dFVybHMgPSAoKF9jID0gb2JqZWN0LnJlbW92ZU91dHB1dFVybHMpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5tYXAoKGUpID0+IGUpKSB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVXBkYXRlT3V0cHV0c1JlcXVlc3QoKSB7XG4gICAgcmV0dXJuIHsgZWdyZXNzSWQ6IFwiXCIsIGFkZEltYWdlT3V0cHV0czogW10sIHJlbW92ZUltYWdlT3V0cHV0czogW10gfTtcbn1cbmV4cG9ydHMuVXBkYXRlT3V0cHV0c1JlcXVlc3QgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5lZ3Jlc3NJZCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZWdyZXNzSWQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLmVncmVzc0lkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5hZGRJbWFnZU91dHB1dHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmFkZEltYWdlT3V0cHV0cy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLmFkZEltYWdlT3V0cHV0cykge1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuSW1hZ2VPdXRwdXQuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucmVtb3ZlSW1hZ2VPdXRwdXRzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yZW1vdmVJbWFnZU91dHB1dHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5yZW1vdmVJbWFnZU91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLkltYWdlT3V0cHV0LmVuY29kZSh2LCB3cml0ZXIudWludDMyKDI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVVwZGF0ZU91dHB1dHNSZXF1ZXN0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lZ3Jlc3NJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFkZEltYWdlT3V0cHV0cy5wdXNoKGV4cG9ydHMuSW1hZ2VPdXRwdXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZW1vdmVJbWFnZU91dHB1dHMucHVzaChleHBvcnRzLkltYWdlT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlZ3Jlc3NJZDogaXNTZXQob2JqZWN0LmVncmVzc0lkKSA/IFN0cmluZyhvYmplY3QuZWdyZXNzSWQpIDogXCJcIixcbiAgICAgICAgICAgIGFkZEltYWdlT3V0cHV0czogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QuYWRkSW1hZ2VPdXRwdXRzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LmFkZEltYWdlT3V0cHV0cy5tYXAoKGUpID0+IGV4cG9ydHMuSW1hZ2VPdXRwdXQuZnJvbUpTT04oZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgIHJlbW92ZUltYWdlT3V0cHV0czogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QucmVtb3ZlSW1hZ2VPdXRwdXRzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LnJlbW92ZUltYWdlT3V0cHV0cy5tYXAoKGUpID0+IGV4cG9ydHMuSW1hZ2VPdXRwdXQuZnJvbUpTT04oZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmVncmVzc0lkICE9PSB1bmRlZmluZWQgJiYgKG9iai5lZ3Jlc3NJZCA9IG1lc3NhZ2UuZWdyZXNzSWQpO1xuICAgICAgICBpZiAobWVzc2FnZS5hZGRJbWFnZU91dHB1dHMpIHtcbiAgICAgICAgICAgIG9iai5hZGRJbWFnZU91dHB1dHMgPSBtZXNzYWdlLmFkZEltYWdlT3V0cHV0cy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLkltYWdlT3V0cHV0LnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouYWRkSW1hZ2VPdXRwdXRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucmVtb3ZlSW1hZ2VPdXRwdXRzKSB7XG4gICAgICAgICAgICBvYmoucmVtb3ZlSW1hZ2VPdXRwdXRzID0gbWVzc2FnZS5yZW1vdmVJbWFnZU91dHB1dHMubWFwKChlKSA9PiBlID8gZXhwb3J0cy5JbWFnZU91dHB1dC50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLnJlbW92ZUltYWdlT3V0cHV0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVXBkYXRlT3V0cHV0c1JlcXVlc3QoKTtcbiAgICAgICAgbWVzc2FnZS5lZ3Jlc3NJZCA9IChfYSA9IG9iamVjdC5lZ3Jlc3NJZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5hZGRJbWFnZU91dHB1dHMgPSAoKF9iID0gb2JqZWN0LmFkZEltYWdlT3V0cHV0cykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLm1hcCgoZSkgPT4gZXhwb3J0cy5JbWFnZU91dHB1dC5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLnJlbW92ZUltYWdlT3V0cHV0cyA9ICgoX2MgPSBvYmplY3QucmVtb3ZlSW1hZ2VPdXRwdXRzKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MubWFwKChlKSA9PiBleHBvcnRzLkltYWdlT3V0cHV0LmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUxpc3RFZ3Jlc3NSZXF1ZXN0KCkge1xuICAgIHJldHVybiB7IHJvb21OYW1lOiBcIlwiLCBlZ3Jlc3NJZDogXCJcIiwgYWN0aXZlOiBmYWxzZSB9O1xufVxuZXhwb3J0cy5MaXN0RWdyZXNzUmVxdWVzdCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb21OYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yb29tTmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2Uucm9vbU5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmVncmVzc0lkICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5lZ3Jlc3NJZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UuZWdyZXNzSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmFjdGl2ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkuYm9vbChtZXNzYWdlLmFjdGl2ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTGlzdEVncmVzc1JlcXVlc3QoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvb21OYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZWdyZXNzSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hY3RpdmUgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb29tTmFtZTogaXNTZXQob2JqZWN0LnJvb21OYW1lKSA/IFN0cmluZyhvYmplY3Qucm9vbU5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIGVncmVzc0lkOiBpc1NldChvYmplY3QuZWdyZXNzSWQpID8gU3RyaW5nKG9iamVjdC5lZ3Jlc3NJZCkgOiBcIlwiLFxuICAgICAgICAgICAgYWN0aXZlOiBpc1NldChvYmplY3QuYWN0aXZlKSA/IEJvb2xlYW4ob2JqZWN0LmFjdGl2ZSkgOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnJvb21OYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5yb29tTmFtZSA9IG1lc3NhZ2Uucm9vbU5hbWUpO1xuICAgICAgICBtZXNzYWdlLmVncmVzc0lkICE9PSB1bmRlZmluZWQgJiYgKG9iai5lZ3Jlc3NJZCA9IG1lc3NhZ2UuZWdyZXNzSWQpO1xuICAgICAgICBtZXNzYWdlLmFjdGl2ZSAhPT0gdW5kZWZpbmVkICYmIChvYmouYWN0aXZlID0gbWVzc2FnZS5hY3RpdmUpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUxpc3RFZ3Jlc3NSZXF1ZXN0KCk7XG4gICAgICAgIG1lc3NhZ2Uucm9vbU5hbWUgPSAoX2EgPSBvYmplY3Qucm9vbU5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuZWdyZXNzSWQgPSAoX2IgPSBvYmplY3QuZWdyZXNzSWQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuYWN0aXZlID0gKF9jID0gb2JqZWN0LmFjdGl2ZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogZmFsc2U7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUxpc3RFZ3Jlc3NSZXNwb25zZSgpIHtcbiAgICByZXR1cm4geyBpdGVtczogW10gfTtcbn1cbmV4cG9ydHMuTGlzdEVncmVzc1Jlc3BvbnNlID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuaXRlbXMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLml0ZW1zLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UuaXRlbXMpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLkVncmVzc0luZm8uZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTGlzdEVncmVzc1Jlc3BvbnNlKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pdGVtcy5wdXNoKGV4cG9ydHMuRWdyZXNzSW5mby5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4geyBpdGVtczogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QuaXRlbXMpID8gb2JqZWN0Lml0ZW1zLm1hcCgoZSkgPT4gZXhwb3J0cy5FZ3Jlc3NJbmZvLmZyb21KU09OKGUpKSA6IFtdIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuaXRlbXMpIHtcbiAgICAgICAgICAgIG9iai5pdGVtcyA9IG1lc3NhZ2UuaXRlbXMubWFwKChlKSA9PiBlID8gZXhwb3J0cy5FZ3Jlc3NJbmZvLnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouaXRlbXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VMaXN0RWdyZXNzUmVzcG9uc2UoKTtcbiAgICAgICAgbWVzc2FnZS5pdGVtcyA9ICgoX2EgPSBvYmplY3QuaXRlbXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYXAoKGUpID0+IGV4cG9ydHMuRWdyZXNzSW5mby5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VTdG9wRWdyZXNzUmVxdWVzdCgpIHtcbiAgICByZXR1cm4geyBlZ3Jlc3NJZDogXCJcIiB9O1xufVxuZXhwb3J0cy5TdG9wRWdyZXNzUmVxdWVzdCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmVncmVzc0lkICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5lZ3Jlc3NJZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UuZWdyZXNzSWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVN0b3BFZ3Jlc3NSZXF1ZXN0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lZ3Jlc3NJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4geyBlZ3Jlc3NJZDogaXNTZXQob2JqZWN0LmVncmVzc0lkKSA/IFN0cmluZyhvYmplY3QuZWdyZXNzSWQpIDogXCJcIiB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UuZWdyZXNzSWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmVncmVzc0lkID0gbWVzc2FnZS5lZ3Jlc3NJZCk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVN0b3BFZ3Jlc3NSZXF1ZXN0KCk7XG4gICAgICAgIG1lc3NhZ2UuZWdyZXNzSWQgPSAoX2EgPSBvYmplY3QuZWdyZXNzSWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUVncmVzc0luZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZWdyZXNzSWQ6IFwiXCIsXG4gICAgICAgIHJvb21JZDogXCJcIixcbiAgICAgICAgcm9vbU5hbWU6IFwiXCIsXG4gICAgICAgIHN0YXR1czogMCxcbiAgICAgICAgc3RhcnRlZEF0OiAwLFxuICAgICAgICBlbmRlZEF0OiAwLFxuICAgICAgICB1cGRhdGVkQXQ6IDAsXG4gICAgICAgIGVycm9yOiBcIlwiLFxuICAgICAgICByb29tQ29tcG9zaXRlOiB1bmRlZmluZWQsXG4gICAgICAgIHdlYjogdW5kZWZpbmVkLFxuICAgICAgICBwYXJ0aWNpcGFudDogdW5kZWZpbmVkLFxuICAgICAgICB0cmFja0NvbXBvc2l0ZTogdW5kZWZpbmVkLFxuICAgICAgICB0cmFjazogdW5kZWZpbmVkLFxuICAgICAgICBzdHJlYW06IHVuZGVmaW5lZCxcbiAgICAgICAgZmlsZTogdW5kZWZpbmVkLFxuICAgICAgICBzZWdtZW50czogdW5kZWZpbmVkLFxuICAgICAgICBzdHJlYW1SZXN1bHRzOiBbXSxcbiAgICAgICAgZmlsZVJlc3VsdHM6IFtdLFxuICAgICAgICBzZWdtZW50UmVzdWx0czogW10sXG4gICAgICAgIGltYWdlUmVzdWx0czogW10sXG4gICAgfTtcbn1cbmV4cG9ydHMuRWdyZXNzSW5mbyA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmVncmVzc0lkICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5lZ3Jlc3NJZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UuZWdyZXNzSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb21JZCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uucm9vbUlkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5yb29tSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb21OYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yb29tTmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMDYpLnN0cmluZyhtZXNzYWdlLnJvb21OYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zdGF0dXMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnN0YXR1cyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkuaW50MzIobWVzc2FnZS5zdGF0dXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0ZWRBdCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc3RhcnRlZEF0ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDgwKS5pbnQ2NChtZXNzYWdlLnN0YXJ0ZWRBdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZW5kZWRBdCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZW5kZWRBdCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4OCkuaW50NjQobWVzc2FnZS5lbmRlZEF0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS51cGRhdGVkQXQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnVwZGF0ZWRBdCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNDQpLmludDY0KG1lc3NhZ2UudXBkYXRlZEF0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5lcnJvciAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZXJyb3IgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNzQpLnN0cmluZyhtZXNzYWdlLmVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5yb29tQ29tcG9zaXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuUm9vbUNvbXBvc2l0ZUVncmVzc1JlcXVlc3QuZW5jb2RlKG1lc3NhZ2Uucm9vbUNvbXBvc2l0ZSwgd3JpdGVyLnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS53ZWIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5XZWJFZ3Jlc3NSZXF1ZXN0LmVuY29kZShtZXNzYWdlLndlYiwgd3JpdGVyLnVpbnQzMigxMTQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucGFydGljaXBhbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5QYXJ0aWNpcGFudEVncmVzc1JlcXVlc3QuZW5jb2RlKG1lc3NhZ2UucGFydGljaXBhbnQsIHdyaXRlci51aW50MzIoMTU0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnRyYWNrQ29tcG9zaXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuVHJhY2tDb21wb3NpdGVFZ3Jlc3NSZXF1ZXN0LmVuY29kZShtZXNzYWdlLnRyYWNrQ29tcG9zaXRlLCB3cml0ZXIudWludDMyKDQyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnRyYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuVHJhY2tFZ3Jlc3NSZXF1ZXN0LmVuY29kZShtZXNzYWdlLnRyYWNrLCB3cml0ZXIudWludDMyKDUwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0cmVhbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlN0cmVhbUluZm9MaXN0LmVuY29kZShtZXNzYWdlLnN0cmVhbSwgd3JpdGVyLnVpbnQzMig1OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5maWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuRmlsZUluZm8uZW5jb2RlKG1lc3NhZ2UuZmlsZSwgd3JpdGVyLnVpbnQzMig2NikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zZWdtZW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlNlZ21lbnRzSW5mby5lbmNvZGUobWVzc2FnZS5zZWdtZW50cywgd3JpdGVyLnVpbnQzMig5OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zdHJlYW1SZXN1bHRzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5zdHJlYW1SZXN1bHRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2Uuc3RyZWFtUmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuU3RyZWFtSW5mby5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxMjIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZVJlc3VsdHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmZpbGVSZXN1bHRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UuZmlsZVJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLkZpbGVJbmZvLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDEzMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zZWdtZW50UmVzdWx0cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc2VnbWVudFJlc3VsdHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5zZWdtZW50UmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuU2VnbWVudHNJbmZvLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDEzOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5pbWFnZVJlc3VsdHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmltYWdlUmVzdWx0cy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLmltYWdlUmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuSW1hZ2VzSW5mby5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxNjIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlRWdyZXNzSW5mbygpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZWdyZXNzSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb29tSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbU5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdGF0dXMgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdGFydGVkQXQgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZGVkQXQgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVwZGF0ZWRBdCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lcnJvciA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvb21Db21wb3NpdGUgPSBleHBvcnRzLlJvb21Db21wb3NpdGVFZ3Jlc3NSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uud2ViID0gZXhwb3J0cy5XZWJFZ3Jlc3NSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTk6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnQgPSBleHBvcnRzLlBhcnRpY2lwYW50RWdyZXNzUmVxdWVzdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJhY2tDb21wb3NpdGUgPSBleHBvcnRzLlRyYWNrQ29tcG9zaXRlRWdyZXNzUmVxdWVzdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJhY2sgPSBleHBvcnRzLlRyYWNrRWdyZXNzUmVxdWVzdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RyZWFtID0gZXhwb3J0cy5TdHJlYW1JbmZvTGlzdC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZmlsZSA9IGV4cG9ydHMuRmlsZUluZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZWdtZW50cyA9IGV4cG9ydHMuU2VnbWVudHNJbmZvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RyZWFtUmVzdWx0cy5wdXNoKGV4cG9ydHMuU3RyZWFtSW5mby5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5maWxlUmVzdWx0cy5wdXNoKGV4cG9ydHMuRmlsZUluZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VnbWVudFJlc3VsdHMucHVzaChleHBvcnRzLlNlZ21lbnRzSW5mby5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyMDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbWFnZVJlc3VsdHMucHVzaChleHBvcnRzLkltYWdlc0luZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVncmVzc0lkOiBpc1NldChvYmplY3QuZWdyZXNzSWQpID8gU3RyaW5nKG9iamVjdC5lZ3Jlc3NJZCkgOiBcIlwiLFxuICAgICAgICAgICAgcm9vbUlkOiBpc1NldChvYmplY3Qucm9vbUlkKSA/IFN0cmluZyhvYmplY3Qucm9vbUlkKSA6IFwiXCIsXG4gICAgICAgICAgICByb29tTmFtZTogaXNTZXQob2JqZWN0LnJvb21OYW1lKSA/IFN0cmluZyhvYmplY3Qucm9vbU5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIHN0YXR1czogaXNTZXQob2JqZWN0LnN0YXR1cykgPyBlZ3Jlc3NTdGF0dXNGcm9tSlNPTihvYmplY3Quc3RhdHVzKSA6IDAsXG4gICAgICAgICAgICBzdGFydGVkQXQ6IGlzU2V0KG9iamVjdC5zdGFydGVkQXQpID8gTnVtYmVyKG9iamVjdC5zdGFydGVkQXQpIDogMCxcbiAgICAgICAgICAgIGVuZGVkQXQ6IGlzU2V0KG9iamVjdC5lbmRlZEF0KSA/IE51bWJlcihvYmplY3QuZW5kZWRBdCkgOiAwLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBpc1NldChvYmplY3QudXBkYXRlZEF0KSA/IE51bWJlcihvYmplY3QudXBkYXRlZEF0KSA6IDAsXG4gICAgICAgICAgICBlcnJvcjogaXNTZXQob2JqZWN0LmVycm9yKSA/IFN0cmluZyhvYmplY3QuZXJyb3IpIDogXCJcIixcbiAgICAgICAgICAgIHJvb21Db21wb3NpdGU6IGlzU2V0KG9iamVjdC5yb29tQ29tcG9zaXRlKVxuICAgICAgICAgICAgICAgID8gZXhwb3J0cy5Sb29tQ29tcG9zaXRlRWdyZXNzUmVxdWVzdC5mcm9tSlNPTihvYmplY3Qucm9vbUNvbXBvc2l0ZSlcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHdlYjogaXNTZXQob2JqZWN0LndlYikgPyBleHBvcnRzLldlYkVncmVzc1JlcXVlc3QuZnJvbUpTT04ob2JqZWN0LndlYikgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBwYXJ0aWNpcGFudDogaXNTZXQob2JqZWN0LnBhcnRpY2lwYW50KSA/IGV4cG9ydHMuUGFydGljaXBhbnRFZ3Jlc3NSZXF1ZXN0LmZyb21KU09OKG9iamVjdC5wYXJ0aWNpcGFudCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB0cmFja0NvbXBvc2l0ZTogaXNTZXQob2JqZWN0LnRyYWNrQ29tcG9zaXRlKVxuICAgICAgICAgICAgICAgID8gZXhwb3J0cy5UcmFja0NvbXBvc2l0ZUVncmVzc1JlcXVlc3QuZnJvbUpTT04ob2JqZWN0LnRyYWNrQ29tcG9zaXRlKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdHJhY2s6IGlzU2V0KG9iamVjdC50cmFjaykgPyBleHBvcnRzLlRyYWNrRWdyZXNzUmVxdWVzdC5mcm9tSlNPTihvYmplY3QudHJhY2spIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc3RyZWFtOiBpc1NldChvYmplY3Quc3RyZWFtKSA/IGV4cG9ydHMuU3RyZWFtSW5mb0xpc3QuZnJvbUpTT04ob2JqZWN0LnN0cmVhbSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBmaWxlOiBpc1NldChvYmplY3QuZmlsZSkgPyBleHBvcnRzLkZpbGVJbmZvLmZyb21KU09OKG9iamVjdC5maWxlKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHNlZ21lbnRzOiBpc1NldChvYmplY3Quc2VnbWVudHMpID8gZXhwb3J0cy5TZWdtZW50c0luZm8uZnJvbUpTT04ob2JqZWN0LnNlZ21lbnRzKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHN0cmVhbVJlc3VsdHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LnN0cmVhbVJlc3VsdHMpXG4gICAgICAgICAgICAgICAgPyBvYmplY3Quc3RyZWFtUmVzdWx0cy5tYXAoKGUpID0+IGV4cG9ydHMuU3RyZWFtSW5mby5mcm9tSlNPTihlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgZmlsZVJlc3VsdHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmZpbGVSZXN1bHRzKSA/IG9iamVjdC5maWxlUmVzdWx0cy5tYXAoKGUpID0+IGV4cG9ydHMuRmlsZUluZm8uZnJvbUpTT04oZSkpIDogW10sXG4gICAgICAgICAgICBzZWdtZW50UmVzdWx0czogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3Quc2VnbWVudFJlc3VsdHMpXG4gICAgICAgICAgICAgICAgPyBvYmplY3Quc2VnbWVudFJlc3VsdHMubWFwKChlKSA9PiBleHBvcnRzLlNlZ21lbnRzSW5mby5mcm9tSlNPTihlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgaW1hZ2VSZXN1bHRzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5pbWFnZVJlc3VsdHMpXG4gICAgICAgICAgICAgICAgPyBvYmplY3QuaW1hZ2VSZXN1bHRzLm1hcCgoZSkgPT4gZXhwb3J0cy5JbWFnZXNJbmZvLmZyb21KU09OKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5lZ3Jlc3NJZCAhPT0gdW5kZWZpbmVkICYmIChvYmouZWdyZXNzSWQgPSBtZXNzYWdlLmVncmVzc0lkKTtcbiAgICAgICAgbWVzc2FnZS5yb29tSWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnJvb21JZCA9IG1lc3NhZ2Uucm9vbUlkKTtcbiAgICAgICAgbWVzc2FnZS5yb29tTmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmoucm9vbU5hbWUgPSBtZXNzYWdlLnJvb21OYW1lKTtcbiAgICAgICAgbWVzc2FnZS5zdGF0dXMgIT09IHVuZGVmaW5lZCAmJiAob2JqLnN0YXR1cyA9IGVncmVzc1N0YXR1c1RvSlNPTihtZXNzYWdlLnN0YXR1cykpO1xuICAgICAgICBtZXNzYWdlLnN0YXJ0ZWRBdCAhPT0gdW5kZWZpbmVkICYmIChvYmouc3RhcnRlZEF0ID0gTWF0aC5yb3VuZChtZXNzYWdlLnN0YXJ0ZWRBdCkpO1xuICAgICAgICBtZXNzYWdlLmVuZGVkQXQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmVuZGVkQXQgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuZW5kZWRBdCkpO1xuICAgICAgICBtZXNzYWdlLnVwZGF0ZWRBdCAhPT0gdW5kZWZpbmVkICYmIChvYmoudXBkYXRlZEF0ID0gTWF0aC5yb3VuZChtZXNzYWdlLnVwZGF0ZWRBdCkpO1xuICAgICAgICBtZXNzYWdlLmVycm9yICE9PSB1bmRlZmluZWQgJiYgKG9iai5lcnJvciA9IG1lc3NhZ2UuZXJyb3IpO1xuICAgICAgICBtZXNzYWdlLnJvb21Db21wb3NpdGUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5yb29tQ29tcG9zaXRlID0gbWVzc2FnZS5yb29tQ29tcG9zaXRlXG4gICAgICAgICAgICAgICAgPyBleHBvcnRzLlJvb21Db21wb3NpdGVFZ3Jlc3NSZXF1ZXN0LnRvSlNPTihtZXNzYWdlLnJvb21Db21wb3NpdGUpXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLndlYiAhPT0gdW5kZWZpbmVkICYmIChvYmoud2ViID0gbWVzc2FnZS53ZWIgPyBleHBvcnRzLldlYkVncmVzc1JlcXVlc3QudG9KU09OKG1lc3NhZ2Uud2ViKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5wYXJ0aWNpcGFudCA9IG1lc3NhZ2UucGFydGljaXBhbnQgPyBleHBvcnRzLlBhcnRpY2lwYW50RWdyZXNzUmVxdWVzdC50b0pTT04obWVzc2FnZS5wYXJ0aWNpcGFudCkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLnRyYWNrQ29tcG9zaXRlICE9PSB1bmRlZmluZWQgJiYgKG9iai50cmFja0NvbXBvc2l0ZSA9IG1lc3NhZ2UudHJhY2tDb21wb3NpdGVcbiAgICAgICAgICAgID8gZXhwb3J0cy5UcmFja0NvbXBvc2l0ZUVncmVzc1JlcXVlc3QudG9KU09OKG1lc3NhZ2UudHJhY2tDb21wb3NpdGUpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UudHJhY2sgIT09IHVuZGVmaW5lZCAmJiAob2JqLnRyYWNrID0gbWVzc2FnZS50cmFjayA/IGV4cG9ydHMuVHJhY2tFZ3Jlc3NSZXF1ZXN0LnRvSlNPTihtZXNzYWdlLnRyYWNrKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2Uuc3RyZWFtICE9PSB1bmRlZmluZWQgJiYgKG9iai5zdHJlYW0gPSBtZXNzYWdlLnN0cmVhbSA/IGV4cG9ydHMuU3RyZWFtSW5mb0xpc3QudG9KU09OKG1lc3NhZ2Uuc3RyZWFtKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UuZmlsZSAhPT0gdW5kZWZpbmVkICYmIChvYmouZmlsZSA9IG1lc3NhZ2UuZmlsZSA/IGV4cG9ydHMuRmlsZUluZm8udG9KU09OKG1lc3NhZ2UuZmlsZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLnNlZ21lbnRzICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmouc2VnbWVudHMgPSBtZXNzYWdlLnNlZ21lbnRzID8gZXhwb3J0cy5TZWdtZW50c0luZm8udG9KU09OKG1lc3NhZ2Uuc2VnbWVudHMpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RyZWFtUmVzdWx0cykge1xuICAgICAgICAgICAgb2JqLnN0cmVhbVJlc3VsdHMgPSBtZXNzYWdlLnN0cmVhbVJlc3VsdHMubWFwKChlKSA9PiBlID8gZXhwb3J0cy5TdHJlYW1JbmZvLnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouc3RyZWFtUmVzdWx0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZpbGVSZXN1bHRzKSB7XG4gICAgICAgICAgICBvYmouZmlsZVJlc3VsdHMgPSBtZXNzYWdlLmZpbGVSZXN1bHRzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuRmlsZUluZm8udG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5maWxlUmVzdWx0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnNlZ21lbnRSZXN1bHRzKSB7XG4gICAgICAgICAgICBvYmouc2VnbWVudFJlc3VsdHMgPSBtZXNzYWdlLnNlZ21lbnRSZXN1bHRzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuU2VnbWVudHNJbmZvLnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouc2VnbWVudFJlc3VsdHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5pbWFnZVJlc3VsdHMpIHtcbiAgICAgICAgICAgIG9iai5pbWFnZVJlc3VsdHMgPSBtZXNzYWdlLmltYWdlUmVzdWx0cy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLkltYWdlc0luZm8udG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5pbWFnZVJlc3VsdHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9qLCBfaywgX2wsIF9tO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUVncmVzc0luZm8oKTtcbiAgICAgICAgbWVzc2FnZS5lZ3Jlc3NJZCA9IChfYSA9IG9iamVjdC5lZ3Jlc3NJZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5yb29tSWQgPSAoX2IgPSBvYmplY3Qucm9vbUlkKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnJvb21OYW1lID0gKF9jID0gb2JqZWN0LnJvb21OYW1lKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnN0YXR1cyA9IChfZCA9IG9iamVjdC5zdGF0dXMpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IDA7XG4gICAgICAgIG1lc3NhZ2Uuc3RhcnRlZEF0ID0gKF9lID0gb2JqZWN0LnN0YXJ0ZWRBdCkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogMDtcbiAgICAgICAgbWVzc2FnZS5lbmRlZEF0ID0gKF9mID0gb2JqZWN0LmVuZGVkQXQpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IDA7XG4gICAgICAgIG1lc3NhZ2UudXBkYXRlZEF0ID0gKF9nID0gb2JqZWN0LnVwZGF0ZWRBdCkgIT09IG51bGwgJiYgX2cgIT09IHZvaWQgMCA/IF9nIDogMDtcbiAgICAgICAgbWVzc2FnZS5lcnJvciA9IChfaCA9IG9iamVjdC5lcnJvcikgIT09IG51bGwgJiYgX2ggIT09IHZvaWQgMCA/IF9oIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5yb29tQ29tcG9zaXRlID0gKG9iamVjdC5yb29tQ29tcG9zaXRlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnJvb21Db21wb3NpdGUgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuUm9vbUNvbXBvc2l0ZUVncmVzc1JlcXVlc3QuZnJvbVBhcnRpYWwob2JqZWN0LnJvb21Db21wb3NpdGUpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS53ZWIgPSAob2JqZWN0LndlYiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC53ZWIgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuV2ViRWdyZXNzUmVxdWVzdC5mcm9tUGFydGlhbChvYmplY3Qud2ViKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnQgPSAob2JqZWN0LnBhcnRpY2lwYW50ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnBhcnRpY2lwYW50ICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLlBhcnRpY2lwYW50RWdyZXNzUmVxdWVzdC5mcm9tUGFydGlhbChvYmplY3QucGFydGljaXBhbnQpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS50cmFja0NvbXBvc2l0ZSA9IChvYmplY3QudHJhY2tDb21wb3NpdGUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudHJhY2tDb21wb3NpdGUgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuVHJhY2tDb21wb3NpdGVFZ3Jlc3NSZXF1ZXN0LmZyb21QYXJ0aWFsKG9iamVjdC50cmFja0NvbXBvc2l0ZSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLnRyYWNrID0gKG9iamVjdC50cmFjayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC50cmFjayAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5UcmFja0VncmVzc1JlcXVlc3QuZnJvbVBhcnRpYWwob2JqZWN0LnRyYWNrKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2Uuc3RyZWFtID0gKG9iamVjdC5zdHJlYW0gIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc3RyZWFtICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLlN0cmVhbUluZm9MaXN0LmZyb21QYXJ0aWFsKG9iamVjdC5zdHJlYW0pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5maWxlID0gKG9iamVjdC5maWxlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmZpbGUgIT09IG51bGwpID8gZXhwb3J0cy5GaWxlSW5mby5mcm9tUGFydGlhbChvYmplY3QuZmlsZSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2Uuc2VnbWVudHMgPSAob2JqZWN0LnNlZ21lbnRzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnNlZ21lbnRzICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLlNlZ21lbnRzSW5mby5mcm9tUGFydGlhbChvYmplY3Quc2VnbWVudHMpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5zdHJlYW1SZXN1bHRzID0gKChfaiA9IG9iamVjdC5zdHJlYW1SZXN1bHRzKSA9PT0gbnVsbCB8fCBfaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2oubWFwKChlKSA9PiBleHBvcnRzLlN0cmVhbUluZm8uZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgbWVzc2FnZS5maWxlUmVzdWx0cyA9ICgoX2sgPSBvYmplY3QuZmlsZVJlc3VsdHMpID09PSBudWxsIHx8IF9rID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfay5tYXAoKGUpID0+IGV4cG9ydHMuRmlsZUluZm8uZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgbWVzc2FnZS5zZWdtZW50UmVzdWx0cyA9ICgoX2wgPSBvYmplY3Quc2VnbWVudFJlc3VsdHMpID09PSBudWxsIHx8IF9sID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbC5tYXAoKGUpID0+IGV4cG9ydHMuU2VnbWVudHNJbmZvLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2UuaW1hZ2VSZXN1bHRzID0gKChfbSA9IG9iamVjdC5pbWFnZVJlc3VsdHMpID09PSBudWxsIHx8IF9tID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbS5tYXAoKGUpID0+IGV4cG9ydHMuSW1hZ2VzSW5mby5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VTdHJlYW1JbmZvTGlzdCgpIHtcbiAgICByZXR1cm4geyBpbmZvOiBbXSB9O1xufVxuZXhwb3J0cy5TdHJlYW1JbmZvTGlzdCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmluZm8gIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmluZm8ubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5pbmZvKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5TdHJlYW1JbmZvLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVN0cmVhbUluZm9MaXN0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbmZvLnB1c2goZXhwb3J0cy5TdHJlYW1JbmZvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7IGluZm86IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmluZm8pID8gb2JqZWN0LmluZm8ubWFwKChlKSA9PiBleHBvcnRzLlN0cmVhbUluZm8uZnJvbUpTT04oZSkpIDogW10gfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBpZiAobWVzc2FnZS5pbmZvKSB7XG4gICAgICAgICAgICBvYmouaW5mbyA9IG1lc3NhZ2UuaW5mby5tYXAoKGUpID0+IGUgPyBleHBvcnRzLlN0cmVhbUluZm8udG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5pbmZvID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3RyZWFtSW5mb0xpc3QoKTtcbiAgICAgICAgbWVzc2FnZS5pbmZvID0gKChfYSA9IG9iamVjdC5pbmZvKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWFwKChlKSA9PiBleHBvcnRzLlN0cmVhbUluZm8uZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlU3RyZWFtSW5mbygpIHtcbiAgICByZXR1cm4geyB1cmw6IFwiXCIsIHN0YXJ0ZWRBdDogMCwgZW5kZWRBdDogMCwgZHVyYXRpb246IDAsIHN0YXR1czogMCwgZXJyb3I6IFwiXCIgfTtcbn1cbmV4cG9ydHMuU3RyZWFtSW5mbyA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnVybCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UudXJsICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS51cmwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0ZWRBdCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc3RhcnRlZEF0ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE2KS5pbnQ2NChtZXNzYWdlLnN0YXJ0ZWRBdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZW5kZWRBdCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZW5kZWRBdCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkuaW50NjQobWVzc2FnZS5lbmRlZEF0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZHVyYXRpb24gIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzIpLmludDY0KG1lc3NhZ2UuZHVyYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0YXR1cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc3RhdHVzICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQwKS5pbnQzMihtZXNzYWdlLnN0YXR1cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZXJyb3IgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmVycm9yICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDUwKS5zdHJpbmcobWVzc2FnZS5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3RyZWFtSW5mbygpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXJsID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhcnRlZEF0ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZGVkQXQgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZHVyYXRpb24gPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhdHVzID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lcnJvciA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdXJsOiBpc1NldChvYmplY3QudXJsKSA/IFN0cmluZyhvYmplY3QudXJsKSA6IFwiXCIsXG4gICAgICAgICAgICBzdGFydGVkQXQ6IGlzU2V0KG9iamVjdC5zdGFydGVkQXQpID8gTnVtYmVyKG9iamVjdC5zdGFydGVkQXQpIDogMCxcbiAgICAgICAgICAgIGVuZGVkQXQ6IGlzU2V0KG9iamVjdC5lbmRlZEF0KSA/IE51bWJlcihvYmplY3QuZW5kZWRBdCkgOiAwLFxuICAgICAgICAgICAgZHVyYXRpb246IGlzU2V0KG9iamVjdC5kdXJhdGlvbikgPyBOdW1iZXIob2JqZWN0LmR1cmF0aW9uKSA6IDAsXG4gICAgICAgICAgICBzdGF0dXM6IGlzU2V0KG9iamVjdC5zdGF0dXMpID8gc3RyZWFtSW5mb19TdGF0dXNGcm9tSlNPTihvYmplY3Quc3RhdHVzKSA6IDAsXG4gICAgICAgICAgICBlcnJvcjogaXNTZXQob2JqZWN0LmVycm9yKSA/IFN0cmluZyhvYmplY3QuZXJyb3IpIDogXCJcIixcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnVybCAhPT0gdW5kZWZpbmVkICYmIChvYmoudXJsID0gbWVzc2FnZS51cmwpO1xuICAgICAgICBtZXNzYWdlLnN0YXJ0ZWRBdCAhPT0gdW5kZWZpbmVkICYmIChvYmouc3RhcnRlZEF0ID0gTWF0aC5yb3VuZChtZXNzYWdlLnN0YXJ0ZWRBdCkpO1xuICAgICAgICBtZXNzYWdlLmVuZGVkQXQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmVuZGVkQXQgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuZW5kZWRBdCkpO1xuICAgICAgICBtZXNzYWdlLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai5kdXJhdGlvbiA9IE1hdGgucm91bmQobWVzc2FnZS5kdXJhdGlvbikpO1xuICAgICAgICBtZXNzYWdlLnN0YXR1cyAhPT0gdW5kZWZpbmVkICYmIChvYmouc3RhdHVzID0gc3RyZWFtSW5mb19TdGF0dXNUb0pTT04obWVzc2FnZS5zdGF0dXMpKTtcbiAgICAgICAgbWVzc2FnZS5lcnJvciAhPT0gdW5kZWZpbmVkICYmIChvYmouZXJyb3IgPSBtZXNzYWdlLmVycm9yKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTdHJlYW1JbmZvKCk7XG4gICAgICAgIG1lc3NhZ2UudXJsID0gKF9hID0gb2JqZWN0LnVybCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5zdGFydGVkQXQgPSAoX2IgPSBvYmplY3Quc3RhcnRlZEF0KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwO1xuICAgICAgICBtZXNzYWdlLmVuZGVkQXQgPSAoX2MgPSBvYmplY3QuZW5kZWRBdCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMDtcbiAgICAgICAgbWVzc2FnZS5kdXJhdGlvbiA9IChfZCA9IG9iamVjdC5kdXJhdGlvbikgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogMDtcbiAgICAgICAgbWVzc2FnZS5zdGF0dXMgPSAoX2UgPSBvYmplY3Quc3RhdHVzKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiAwO1xuICAgICAgICBtZXNzYWdlLmVycm9yID0gKF9mID0gb2JqZWN0LmVycm9yKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiBcIlwiO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VGaWxlSW5mbygpIHtcbiAgICByZXR1cm4geyBmaWxlbmFtZTogXCJcIiwgc3RhcnRlZEF0OiAwLCBlbmRlZEF0OiAwLCBkdXJhdGlvbjogMCwgc2l6ZTogMCwgbG9jYXRpb246IFwiXCIgfTtcbn1cbmV4cG9ydHMuRmlsZUluZm8gPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5maWxlbmFtZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZmlsZW5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLmZpbGVuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zdGFydGVkQXQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnN0YXJ0ZWRBdCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNikuaW50NjQobWVzc2FnZS5zdGFydGVkQXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmVuZGVkQXQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmVuZGVkQXQgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjQpLmludDY0KG1lc3NhZ2UuZW5kZWRBdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZHVyYXRpb24gIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmR1cmF0aW9uICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQ4KS5pbnQ2NChtZXNzYWdlLmR1cmF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zaXplICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5zaXplICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDMyKS5pbnQ2NChtZXNzYWdlLnNpemUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmxvY2F0aW9uICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5sb2NhdGlvbiAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0Mikuc3RyaW5nKG1lc3NhZ2UubG9jYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUZpbGVJbmZvKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5maWxlbmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXJ0ZWRBdCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRlZEF0ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmR1cmF0aW9uID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNpemUgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubG9jYXRpb24gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpbGVuYW1lOiBpc1NldChvYmplY3QuZmlsZW5hbWUpID8gU3RyaW5nKG9iamVjdC5maWxlbmFtZSkgOiBcIlwiLFxuICAgICAgICAgICAgc3RhcnRlZEF0OiBpc1NldChvYmplY3Quc3RhcnRlZEF0KSA/IE51bWJlcihvYmplY3Quc3RhcnRlZEF0KSA6IDAsXG4gICAgICAgICAgICBlbmRlZEF0OiBpc1NldChvYmplY3QuZW5kZWRBdCkgPyBOdW1iZXIob2JqZWN0LmVuZGVkQXQpIDogMCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBpc1NldChvYmplY3QuZHVyYXRpb24pID8gTnVtYmVyKG9iamVjdC5kdXJhdGlvbikgOiAwLFxuICAgICAgICAgICAgc2l6ZTogaXNTZXQob2JqZWN0LnNpemUpID8gTnVtYmVyKG9iamVjdC5zaXplKSA6IDAsXG4gICAgICAgICAgICBsb2NhdGlvbjogaXNTZXQob2JqZWN0LmxvY2F0aW9uKSA/IFN0cmluZyhvYmplY3QubG9jYXRpb24pIDogXCJcIixcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmZpbGVuYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5maWxlbmFtZSA9IG1lc3NhZ2UuZmlsZW5hbWUpO1xuICAgICAgICBtZXNzYWdlLnN0YXJ0ZWRBdCAhPT0gdW5kZWZpbmVkICYmIChvYmouc3RhcnRlZEF0ID0gTWF0aC5yb3VuZChtZXNzYWdlLnN0YXJ0ZWRBdCkpO1xuICAgICAgICBtZXNzYWdlLmVuZGVkQXQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmVuZGVkQXQgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuZW5kZWRBdCkpO1xuICAgICAgICBtZXNzYWdlLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai5kdXJhdGlvbiA9IE1hdGgucm91bmQobWVzc2FnZS5kdXJhdGlvbikpO1xuICAgICAgICBtZXNzYWdlLnNpemUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnNpemUgPSBNYXRoLnJvdW5kKG1lc3NhZ2Uuc2l6ZSkpO1xuICAgICAgICBtZXNzYWdlLmxvY2F0aW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai5sb2NhdGlvbiA9IG1lc3NhZ2UubG9jYXRpb24pO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUZpbGVJbmZvKCk7XG4gICAgICAgIG1lc3NhZ2UuZmlsZW5hbWUgPSAoX2EgPSBvYmplY3QuZmlsZW5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2Uuc3RhcnRlZEF0ID0gKF9iID0gb2JqZWN0LnN0YXJ0ZWRBdCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMDtcbiAgICAgICAgbWVzc2FnZS5lbmRlZEF0ID0gKF9jID0gb2JqZWN0LmVuZGVkQXQpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IDA7XG4gICAgICAgIG1lc3NhZ2UuZHVyYXRpb24gPSAoX2QgPSBvYmplY3QuZHVyYXRpb24pICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IDA7XG4gICAgICAgIG1lc3NhZ2Uuc2l6ZSA9IChfZSA9IG9iamVjdC5zaXplKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiAwO1xuICAgICAgICBtZXNzYWdlLmxvY2F0aW9uID0gKF9mID0gb2JqZWN0LmxvY2F0aW9uKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiBcIlwiO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VTZWdtZW50c0luZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcGxheWxpc3ROYW1lOiBcIlwiLFxuICAgICAgICBsaXZlUGxheWxpc3ROYW1lOiBcIlwiLFxuICAgICAgICBkdXJhdGlvbjogMCxcbiAgICAgICAgc2l6ZTogMCxcbiAgICAgICAgcGxheWxpc3RMb2NhdGlvbjogXCJcIixcbiAgICAgICAgbGl2ZVBsYXlsaXN0TG9jYXRpb246IFwiXCIsXG4gICAgICAgIHNlZ21lbnRDb3VudDogMCxcbiAgICAgICAgc3RhcnRlZEF0OiAwLFxuICAgICAgICBlbmRlZEF0OiAwLFxuICAgIH07XG59XG5leHBvcnRzLlNlZ21lbnRzSW5mbyA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnBsYXlsaXN0TmFtZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UucGxheWxpc3ROYW1lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5wbGF5bGlzdE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmxpdmVQbGF5bGlzdE5hbWUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmxpdmVQbGF5bGlzdE5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNjYpLnN0cmluZyhtZXNzYWdlLmxpdmVQbGF5bGlzdE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5kdXJhdGlvbiAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNikuaW50NjQobWVzc2FnZS5kdXJhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2l6ZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc2l6ZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkuaW50NjQobWVzc2FnZS5zaXplKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wbGF5bGlzdExvY2F0aW9uICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5wbGF5bGlzdExvY2F0aW9uICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcobWVzc2FnZS5wbGF5bGlzdExvY2F0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5saXZlUGxheWxpc3RMb2NhdGlvbiAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UubGl2ZVBsYXlsaXN0TG9jYXRpb24gIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNzQpLnN0cmluZyhtZXNzYWdlLmxpdmVQbGF5bGlzdExvY2F0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zZWdtZW50Q291bnQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnNlZ21lbnRDb3VudCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0MCkuaW50NjQobWVzc2FnZS5zZWdtZW50Q291bnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0ZWRBdCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc3RhcnRlZEF0ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQ4KS5pbnQ2NChtZXNzYWdlLnN0YXJ0ZWRBdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZW5kZWRBdCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZW5kZWRBdCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig1NikuaW50NjQobWVzc2FnZS5lbmRlZEF0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTZWdtZW50c0luZm8oKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBsYXlsaXN0TmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxpdmVQbGF5bGlzdE5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kdXJhdGlvbiA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zaXplID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBsYXlsaXN0TG9jYXRpb24gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5saXZlUGxheWxpc3RMb2NhdGlvbiA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlZ21lbnRDb3VudCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdGFydGVkQXQgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kZWRBdCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBsYXlsaXN0TmFtZTogaXNTZXQob2JqZWN0LnBsYXlsaXN0TmFtZSkgPyBTdHJpbmcob2JqZWN0LnBsYXlsaXN0TmFtZSkgOiBcIlwiLFxuICAgICAgICAgICAgbGl2ZVBsYXlsaXN0TmFtZTogaXNTZXQob2JqZWN0LmxpdmVQbGF5bGlzdE5hbWUpID8gU3RyaW5nKG9iamVjdC5saXZlUGxheWxpc3ROYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogaXNTZXQob2JqZWN0LmR1cmF0aW9uKSA/IE51bWJlcihvYmplY3QuZHVyYXRpb24pIDogMCxcbiAgICAgICAgICAgIHNpemU6IGlzU2V0KG9iamVjdC5zaXplKSA/IE51bWJlcihvYmplY3Quc2l6ZSkgOiAwLFxuICAgICAgICAgICAgcGxheWxpc3RMb2NhdGlvbjogaXNTZXQob2JqZWN0LnBsYXlsaXN0TG9jYXRpb24pID8gU3RyaW5nKG9iamVjdC5wbGF5bGlzdExvY2F0aW9uKSA6IFwiXCIsXG4gICAgICAgICAgICBsaXZlUGxheWxpc3RMb2NhdGlvbjogaXNTZXQob2JqZWN0LmxpdmVQbGF5bGlzdExvY2F0aW9uKSA/IFN0cmluZyhvYmplY3QubGl2ZVBsYXlsaXN0TG9jYXRpb24pIDogXCJcIixcbiAgICAgICAgICAgIHNlZ21lbnRDb3VudDogaXNTZXQob2JqZWN0LnNlZ21lbnRDb3VudCkgPyBOdW1iZXIob2JqZWN0LnNlZ21lbnRDb3VudCkgOiAwLFxuICAgICAgICAgICAgc3RhcnRlZEF0OiBpc1NldChvYmplY3Quc3RhcnRlZEF0KSA/IE51bWJlcihvYmplY3Quc3RhcnRlZEF0KSA6IDAsXG4gICAgICAgICAgICBlbmRlZEF0OiBpc1NldChvYmplY3QuZW5kZWRBdCkgPyBOdW1iZXIob2JqZWN0LmVuZGVkQXQpIDogMCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnBsYXlsaXN0TmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmoucGxheWxpc3ROYW1lID0gbWVzc2FnZS5wbGF5bGlzdE5hbWUpO1xuICAgICAgICBtZXNzYWdlLmxpdmVQbGF5bGlzdE5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmxpdmVQbGF5bGlzdE5hbWUgPSBtZXNzYWdlLmxpdmVQbGF5bGlzdE5hbWUpO1xuICAgICAgICBtZXNzYWdlLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai5kdXJhdGlvbiA9IE1hdGgucm91bmQobWVzc2FnZS5kdXJhdGlvbikpO1xuICAgICAgICBtZXNzYWdlLnNpemUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnNpemUgPSBNYXRoLnJvdW5kKG1lc3NhZ2Uuc2l6ZSkpO1xuICAgICAgICBtZXNzYWdlLnBsYXlsaXN0TG9jYXRpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLnBsYXlsaXN0TG9jYXRpb24gPSBtZXNzYWdlLnBsYXlsaXN0TG9jYXRpb24pO1xuICAgICAgICBtZXNzYWdlLmxpdmVQbGF5bGlzdExvY2F0aW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai5saXZlUGxheWxpc3RMb2NhdGlvbiA9IG1lc3NhZ2UubGl2ZVBsYXlsaXN0TG9jYXRpb24pO1xuICAgICAgICBtZXNzYWdlLnNlZ21lbnRDb3VudCAhPT0gdW5kZWZpbmVkICYmIChvYmouc2VnbWVudENvdW50ID0gTWF0aC5yb3VuZChtZXNzYWdlLnNlZ21lbnRDb3VudCkpO1xuICAgICAgICBtZXNzYWdlLnN0YXJ0ZWRBdCAhPT0gdW5kZWZpbmVkICYmIChvYmouc3RhcnRlZEF0ID0gTWF0aC5yb3VuZChtZXNzYWdlLnN0YXJ0ZWRBdCkpO1xuICAgICAgICBtZXNzYWdlLmVuZGVkQXQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmVuZGVkQXQgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuZW5kZWRBdCkpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9qO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVNlZ21lbnRzSW5mbygpO1xuICAgICAgICBtZXNzYWdlLnBsYXlsaXN0TmFtZSA9IChfYSA9IG9iamVjdC5wbGF5bGlzdE5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UubGl2ZVBsYXlsaXN0TmFtZSA9IChfYiA9IG9iamVjdC5saXZlUGxheWxpc3ROYW1lKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmR1cmF0aW9uID0gKF9jID0gb2JqZWN0LmR1cmF0aW9uKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAwO1xuICAgICAgICBtZXNzYWdlLnNpemUgPSAoX2QgPSBvYmplY3Quc2l6ZSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogMDtcbiAgICAgICAgbWVzc2FnZS5wbGF5bGlzdExvY2F0aW9uID0gKF9lID0gb2JqZWN0LnBsYXlsaXN0TG9jYXRpb24pICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UubGl2ZVBsYXlsaXN0TG9jYXRpb24gPSAoX2YgPSBvYmplY3QubGl2ZVBsYXlsaXN0TG9jYXRpb24pICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2Uuc2VnbWVudENvdW50ID0gKF9nID0gb2JqZWN0LnNlZ21lbnRDb3VudCkgIT09IG51bGwgJiYgX2cgIT09IHZvaWQgMCA/IF9nIDogMDtcbiAgICAgICAgbWVzc2FnZS5zdGFydGVkQXQgPSAoX2ggPSBvYmplY3Quc3RhcnRlZEF0KSAhPT0gbnVsbCAmJiBfaCAhPT0gdm9pZCAwID8gX2ggOiAwO1xuICAgICAgICBtZXNzYWdlLmVuZGVkQXQgPSAoX2ogPSBvYmplY3QuZW5kZWRBdCkgIT09IG51bGwgJiYgX2ogIT09IHZvaWQgMCA/IF9qIDogMDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlSW1hZ2VzSW5mbygpIHtcbiAgICByZXR1cm4geyBpbWFnZUNvdW50OiAwLCBzdGFydGVkQXQ6IDAsIGVuZGVkQXQ6IDAgfTtcbn1cbmV4cG9ydHMuSW1hZ2VzSW5mbyA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmltYWdlQ291bnQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmltYWdlQ291bnQgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoOCkuaW50NjQobWVzc2FnZS5pbWFnZUNvdW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zdGFydGVkQXQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnN0YXJ0ZWRBdCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNikuaW50NjQobWVzc2FnZS5zdGFydGVkQXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmVuZGVkQXQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmVuZGVkQXQgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjQpLmludDY0KG1lc3NhZ2UuZW5kZWRBdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlSW1hZ2VzSW5mbygpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW1hZ2VDb3VudCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdGFydGVkQXQgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kZWRBdCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGltYWdlQ291bnQ6IGlzU2V0KG9iamVjdC5pbWFnZUNvdW50KSA/IE51bWJlcihvYmplY3QuaW1hZ2VDb3VudCkgOiAwLFxuICAgICAgICAgICAgc3RhcnRlZEF0OiBpc1NldChvYmplY3Quc3RhcnRlZEF0KSA/IE51bWJlcihvYmplY3Quc3RhcnRlZEF0KSA6IDAsXG4gICAgICAgICAgICBlbmRlZEF0OiBpc1NldChvYmplY3QuZW5kZWRBdCkgPyBOdW1iZXIob2JqZWN0LmVuZGVkQXQpIDogMCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmltYWdlQ291bnQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmltYWdlQ291bnQgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuaW1hZ2VDb3VudCkpO1xuICAgICAgICBtZXNzYWdlLnN0YXJ0ZWRBdCAhPT0gdW5kZWZpbmVkICYmIChvYmouc3RhcnRlZEF0ID0gTWF0aC5yb3VuZChtZXNzYWdlLnN0YXJ0ZWRBdCkpO1xuICAgICAgICBtZXNzYWdlLmVuZGVkQXQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmVuZGVkQXQgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuZW5kZWRBdCkpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUltYWdlc0luZm8oKTtcbiAgICAgICAgbWVzc2FnZS5pbWFnZUNvdW50ID0gKF9hID0gb2JqZWN0LmltYWdlQ291bnQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDA7XG4gICAgICAgIG1lc3NhZ2Uuc3RhcnRlZEF0ID0gKF9iID0gb2JqZWN0LnN0YXJ0ZWRBdCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMDtcbiAgICAgICAgbWVzc2FnZS5lbmRlZEF0ID0gKF9jID0gb2JqZWN0LmVuZGVkQXQpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IDA7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUF1dG9QYXJ0aWNpcGFudEVncmVzcygpIHtcbiAgICByZXR1cm4geyBwcmVzZXQ6IHVuZGVmaW5lZCwgYWR2YW5jZWQ6IHVuZGVmaW5lZCwgZmlsZU91dHB1dHM6IFtdLCBzZWdtZW50T3V0cHV0czogW10gfTtcbn1cbmV4cG9ydHMuQXV0b1BhcnRpY2lwYW50RWdyZXNzID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UucHJlc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoOCkuaW50MzIobWVzc2FnZS5wcmVzZXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmFkdmFuY2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuRW5jb2RpbmdPcHRpb25zLmVuY29kZShtZXNzYWdlLmFkdmFuY2VkLCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZpbGVPdXRwdXRzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5maWxlT3V0cHV0cy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLmZpbGVPdXRwdXRzKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zZWdtZW50T3V0cHV0cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5zZWdtZW50T3V0cHV0cykge1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VBdXRvUGFydGljaXBhbnRFZ3Jlc3MoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnByZXNldCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWR2YW5jZWQgPSBleHBvcnRzLkVuY29kaW5nT3B0aW9ucy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZmlsZU91dHB1dHMucHVzaChleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMucHVzaChleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHByZXNldDogaXNTZXQob2JqZWN0LnByZXNldCkgPyBlbmNvZGluZ09wdGlvbnNQcmVzZXRGcm9tSlNPTihvYmplY3QucHJlc2V0KSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGFkdmFuY2VkOiBpc1NldChvYmplY3QuYWR2YW5jZWQpID8gZXhwb3J0cy5FbmNvZGluZ09wdGlvbnMuZnJvbUpTT04ob2JqZWN0LmFkdmFuY2VkKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGZpbGVPdXRwdXRzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5maWxlT3V0cHV0cylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5maWxlT3V0cHV0cy5tYXAoKGUpID0+IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZnJvbUpTT04oZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgIHNlZ21lbnRPdXRwdXRzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5zZWdtZW50T3V0cHV0cylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5zZWdtZW50T3V0cHV0cy5tYXAoKGUpID0+IGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5mcm9tSlNPTihlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UucHJlc2V0ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmoucHJlc2V0ID0gbWVzc2FnZS5wcmVzZXQgIT09IHVuZGVmaW5lZCA/IGVuY29kaW5nT3B0aW9uc1ByZXNldFRvSlNPTihtZXNzYWdlLnByZXNldCkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLmFkdmFuY2VkICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmouYWR2YW5jZWQgPSBtZXNzYWdlLmFkdmFuY2VkID8gZXhwb3J0cy5FbmNvZGluZ09wdGlvbnMudG9KU09OKG1lc3NhZ2UuYWR2YW5jZWQpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZU91dHB1dHMpIHtcbiAgICAgICAgICAgIG9iai5maWxlT3V0cHV0cyA9IG1lc3NhZ2UuZmlsZU91dHB1dHMubWFwKChlKSA9PiBlID8gZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLmZpbGVPdXRwdXRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMpIHtcbiAgICAgICAgICAgIG9iai5zZWdtZW50T3V0cHV0cyA9IG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMubWFwKChlKSA9PiBlID8gZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouc2VnbWVudE91dHB1dHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUF1dG9QYXJ0aWNpcGFudEVncmVzcygpO1xuICAgICAgICBtZXNzYWdlLnByZXNldCA9IChfYSA9IG9iamVjdC5wcmVzZXQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5hZHZhbmNlZCA9IChvYmplY3QuYWR2YW5jZWQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYWR2YW5jZWQgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuRW5jb2RpbmdPcHRpb25zLmZyb21QYXJ0aWFsKG9iamVjdC5hZHZhbmNlZClcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmZpbGVPdXRwdXRzID0gKChfYiA9IG9iamVjdC5maWxlT3V0cHV0cykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLm1hcCgoZSkgPT4gZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLnNlZ21lbnRPdXRwdXRzID0gKChfYyA9IG9iamVjdC5zZWdtZW50T3V0cHV0cykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLm1hcCgoZSkgPT4gZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUF1dG9UcmFja0VncmVzcygpIHtcbiAgICByZXR1cm4geyBmaWxlcGF0aDogXCJcIiwgZGlzYWJsZU1hbmlmZXN0OiBmYWxzZSwgczM6IHVuZGVmaW5lZCwgZ2NwOiB1bmRlZmluZWQsIGF6dXJlOiB1bmRlZmluZWQgfTtcbn1cbmV4cG9ydHMuQXV0b1RyYWNrRWdyZXNzID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZXBhdGggIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmZpbGVwYXRoICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5maWxlcGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQwKS5ib29sKG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zMyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlMzVXBsb2FkLmVuY29kZShtZXNzYWdlLnMzLCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmdjcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkdDUFVwbG9hZC5lbmNvZGUobWVzc2FnZS5nY3AsIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYXp1cmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQuZW5jb2RlKG1lc3NhZ2UuYXp1cmUsIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlQXV0b1RyYWNrRWdyZXNzKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5maWxlcGF0aCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRpc2FibGVNYW5pZmVzdCA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zMyA9IGV4cG9ydHMuUzNVcGxvYWQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmdjcCA9IGV4cG9ydHMuR0NQVXBsb2FkLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5henVyZSA9IGV4cG9ydHMuQXp1cmVCbG9iVXBsb2FkLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpbGVwYXRoOiBpc1NldChvYmplY3QuZmlsZXBhdGgpID8gU3RyaW5nKG9iamVjdC5maWxlcGF0aCkgOiBcIlwiLFxuICAgICAgICAgICAgZGlzYWJsZU1hbmlmZXN0OiBpc1NldChvYmplY3QuZGlzYWJsZU1hbmlmZXN0KSA/IEJvb2xlYW4ob2JqZWN0LmRpc2FibGVNYW5pZmVzdCkgOiBmYWxzZSxcbiAgICAgICAgICAgIHMzOiBpc1NldChvYmplY3QuczMpID8gZXhwb3J0cy5TM1VwbG9hZC5mcm9tSlNPTihvYmplY3QuczMpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZ2NwOiBpc1NldChvYmplY3QuZ2NwKSA/IGV4cG9ydHMuR0NQVXBsb2FkLmZyb21KU09OKG9iamVjdC5nY3ApIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgYXp1cmU6IGlzU2V0KG9iamVjdC5henVyZSkgPyBleHBvcnRzLkF6dXJlQmxvYlVwbG9hZC5mcm9tSlNPTihvYmplY3QuYXp1cmUpIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UuZmlsZXBhdGggIT09IHVuZGVmaW5lZCAmJiAob2JqLmZpbGVwYXRoID0gbWVzc2FnZS5maWxlcGF0aCk7XG4gICAgICAgIG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5kaXNhYmxlTWFuaWZlc3QgPSBtZXNzYWdlLmRpc2FibGVNYW5pZmVzdCk7XG4gICAgICAgIG1lc3NhZ2UuczMgIT09IHVuZGVmaW5lZCAmJiAob2JqLnMzID0gbWVzc2FnZS5zMyA/IGV4cG9ydHMuUzNVcGxvYWQudG9KU09OKG1lc3NhZ2UuczMpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5nY3AgIT09IHVuZGVmaW5lZCAmJiAob2JqLmdjcCA9IG1lc3NhZ2UuZ2NwID8gZXhwb3J0cy5HQ1BVcGxvYWQudG9KU09OKG1lc3NhZ2UuZ2NwKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UuYXp1cmUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmF6dXJlID0gbWVzc2FnZS5henVyZSA/IGV4cG9ydHMuQXp1cmVCbG9iVXBsb2FkLnRvSlNPTihtZXNzYWdlLmF6dXJlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VBdXRvVHJhY2tFZ3Jlc3MoKTtcbiAgICAgICAgbWVzc2FnZS5maWxlcGF0aCA9IChfYSA9IG9iamVjdC5maWxlcGF0aCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5kaXNhYmxlTWFuaWZlc3QgPSAoX2IgPSBvYmplY3QuZGlzYWJsZU1hbmlmZXN0KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBmYWxzZTtcbiAgICAgICAgbWVzc2FnZS5zMyA9IChvYmplY3QuczMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuczMgIT09IG51bGwpID8gZXhwb3J0cy5TM1VwbG9hZC5mcm9tUGFydGlhbChvYmplY3QuczMpIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmdjcCA9IChvYmplY3QuZ2NwICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmdjcCAhPT0gbnVsbCkgPyBleHBvcnRzLkdDUFVwbG9hZC5mcm9tUGFydGlhbChvYmplY3QuZ2NwKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5henVyZSA9IChvYmplY3QuYXp1cmUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYXp1cmUgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuQXp1cmVCbG9iVXBsb2FkLmZyb21QYXJ0aWFsKG9iamVjdC5henVyZSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbnZhciBnbG9iYWxUaGlzID0gKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbFRoaXM7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG4gICAgdGhyb3cgXCJVbmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3RcIjtcbn0pKCk7XG5mdW5jdGlvbiBsb25nVG9OdW1iZXIobG9uZykge1xuICAgIGlmIChsb25nLmd0KE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSkge1xuICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcIlZhbHVlIGlzIGxhcmdlciB0aGFuIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSXCIpO1xuICAgIH1cbiAgICByZXR1cm4gbG9uZy50b051bWJlcigpO1xufVxuaWYgKG1pbmltYWxfMS5kZWZhdWx0LnV0aWwuTG9uZyAhPT0gbG9uZ18xLmRlZmF1bHQpIHtcbiAgICBtaW5pbWFsXzEuZGVmYXVsdC51dGlsLkxvbmcgPSBsb25nXzEuZGVmYXVsdDtcbiAgICBtaW5pbWFsXzEuZGVmYXVsdC5jb25maWd1cmUoKTtcbn1cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbDtcbn1cbmZ1bmN0aW9uIGlzU2V0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXZla2l0X2VncmVzcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_egress.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_ingress.js":
/*!***********************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/proto/livekit_ingress.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.DeleteIngressRequest = exports.ListIngressResponse = exports.ListIngressRequest = exports.UpdateIngressRequest = exports.InputAudioState = exports.InputVideoState = exports.IngressState = exports.IngressInfo = exports.IngressVideoEncodingOptions = exports.IngressAudioEncodingOptions = exports.IngressVideoOptions = exports.IngressAudioOptions = exports.CreateIngressRequest = exports.ingressState_StatusToJSON = exports.ingressState_StatusFromJSON = exports.IngressState_Status = exports.ingressVideoEncodingPresetToJSON = exports.ingressVideoEncodingPresetFromJSON = exports.IngressVideoEncodingPreset = exports.ingressAudioEncodingPresetToJSON = exports.ingressAudioEncodingPresetFromJSON = exports.IngressAudioEncodingPreset = exports.ingressInputToJSON = exports.ingressInputFromJSON = exports.IngressInput = exports.protobufPackage = void 0;\n/* eslint-disable */\nconst long_1 = __importDefault(__webpack_require__(/*! long */ \"(ssr)/./node_modules/long/umd/index.js\"));\nconst minimal_1 = __importDefault(__webpack_require__(/*! protobufjs/minimal */ \"(ssr)/./node_modules/protobufjs/minimal.js\"));\nconst livekit_models_1 = __webpack_require__(/*! ./livekit_models */ \"(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_models.js\");\nexports.protobufPackage = \"livekit\";\nvar IngressInput;\n(function (IngressInput) {\n    IngressInput[IngressInput[\"RTMP_INPUT\"] = 0] = \"RTMP_INPUT\";\n    IngressInput[IngressInput[\"WHIP_INPUT\"] = 1] = \"WHIP_INPUT\";\n    /** URL_INPUT - Pull from the provided URL. Only HTTP url are supported, serving either a single media file or a HLS stream */\n    IngressInput[IngressInput[\"URL_INPUT\"] = 2] = \"URL_INPUT\";\n    IngressInput[IngressInput[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(IngressInput = exports.IngressInput || (exports.IngressInput = {}));\nfunction ingressInputFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"RTMP_INPUT\":\n            return IngressInput.RTMP_INPUT;\n        case 1:\n        case \"WHIP_INPUT\":\n            return IngressInput.WHIP_INPUT;\n        case 2:\n        case \"URL_INPUT\":\n            return IngressInput.URL_INPUT;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return IngressInput.UNRECOGNIZED;\n    }\n}\nexports.ingressInputFromJSON = ingressInputFromJSON;\nfunction ingressInputToJSON(object) {\n    switch (object) {\n        case IngressInput.RTMP_INPUT:\n            return \"RTMP_INPUT\";\n        case IngressInput.WHIP_INPUT:\n            return \"WHIP_INPUT\";\n        case IngressInput.URL_INPUT:\n            return \"URL_INPUT\";\n        case IngressInput.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.ingressInputToJSON = ingressInputToJSON;\nvar IngressAudioEncodingPreset;\n(function (IngressAudioEncodingPreset) {\n    /** OPUS_STEREO_96KBPS - OPUS, 2 channels, 96kbps */\n    IngressAudioEncodingPreset[IngressAudioEncodingPreset[\"OPUS_STEREO_96KBPS\"] = 0] = \"OPUS_STEREO_96KBPS\";\n    /** OPUS_MONO_64KBS - OPUS, 1 channel, 64kbps */\n    IngressAudioEncodingPreset[IngressAudioEncodingPreset[\"OPUS_MONO_64KBS\"] = 1] = \"OPUS_MONO_64KBS\";\n    IngressAudioEncodingPreset[IngressAudioEncodingPreset[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(IngressAudioEncodingPreset = exports.IngressAudioEncodingPreset || (exports.IngressAudioEncodingPreset = {}));\nfunction ingressAudioEncodingPresetFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"OPUS_STEREO_96KBPS\":\n            return IngressAudioEncodingPreset.OPUS_STEREO_96KBPS;\n        case 1:\n        case \"OPUS_MONO_64KBS\":\n            return IngressAudioEncodingPreset.OPUS_MONO_64KBS;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return IngressAudioEncodingPreset.UNRECOGNIZED;\n    }\n}\nexports.ingressAudioEncodingPresetFromJSON = ingressAudioEncodingPresetFromJSON;\nfunction ingressAudioEncodingPresetToJSON(object) {\n    switch (object) {\n        case IngressAudioEncodingPreset.OPUS_STEREO_96KBPS:\n            return \"OPUS_STEREO_96KBPS\";\n        case IngressAudioEncodingPreset.OPUS_MONO_64KBS:\n            return \"OPUS_MONO_64KBS\";\n        case IngressAudioEncodingPreset.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.ingressAudioEncodingPresetToJSON = ingressAudioEncodingPresetToJSON;\nvar IngressVideoEncodingPreset;\n(function (IngressVideoEncodingPreset) {\n    /** H264_720P_30FPS_3_LAYERS - 1280x720,  30fps, 1900kbps main layer, 3 layers total */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_720P_30FPS_3_LAYERS\"] = 0] = \"H264_720P_30FPS_3_LAYERS\";\n    /** H264_1080P_30FPS_3_LAYERS - 1980x1080, 30fps, 3500kbps main layer, 3 layers total */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_1080P_30FPS_3_LAYERS\"] = 1] = \"H264_1080P_30FPS_3_LAYERS\";\n    /** H264_540P_25FPS_2_LAYERS - 960x540,  25fps, 1000kbps  main layer, 2 layers total */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_540P_25FPS_2_LAYERS\"] = 2] = \"H264_540P_25FPS_2_LAYERS\";\n    /** H264_720P_30FPS_1_LAYER - 1280x720,  30fps, 1900kbps, no simulcast */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_720P_30FPS_1_LAYER\"] = 3] = \"H264_720P_30FPS_1_LAYER\";\n    /** H264_1080P_30FPS_1_LAYER - 1980x1080, 30fps, 3500kbps, no simulcast */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_1080P_30FPS_1_LAYER\"] = 4] = \"H264_1080P_30FPS_1_LAYER\";\n    /** H264_720P_30FPS_3_LAYERS_HIGH_MOTION - 1280x720,  30fps, 2500kbps main layer, 3 layers total, higher bitrate for high motion, harder to encode content */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_720P_30FPS_3_LAYERS_HIGH_MOTION\"] = 5] = \"H264_720P_30FPS_3_LAYERS_HIGH_MOTION\";\n    /** H264_1080P_30FPS_3_LAYERS_HIGH_MOTION - 1980x1080, 30fps, 4500kbps main layer, 3 layers total, higher bitrate for high motion, harder to encode content */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_1080P_30FPS_3_LAYERS_HIGH_MOTION\"] = 6] = \"H264_1080P_30FPS_3_LAYERS_HIGH_MOTION\";\n    /** H264_540P_25FPS_2_LAYERS_HIGH_MOTION - 960x540,  25fps, 1300kbps  main layer, 2 layers total, higher bitrate for high motion, harder to encode content */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_540P_25FPS_2_LAYERS_HIGH_MOTION\"] = 7] = \"H264_540P_25FPS_2_LAYERS_HIGH_MOTION\";\n    /** H264_720P_30FPS_1_LAYER_HIGH_MOTION - 1280x720,  30fps, 2500kbps, no simulcast, higher bitrate for high motion, harder to encode content */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_720P_30FPS_1_LAYER_HIGH_MOTION\"] = 8] = \"H264_720P_30FPS_1_LAYER_HIGH_MOTION\";\n    /** H264_1080P_30FPS_1_LAYER_HIGH_MOTION - 1980x1080, 30fps, 4500kbps, no simulcast, higher bitrate for high motion, harder to encode content */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_1080P_30FPS_1_LAYER_HIGH_MOTION\"] = 9] = \"H264_1080P_30FPS_1_LAYER_HIGH_MOTION\";\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(IngressVideoEncodingPreset = exports.IngressVideoEncodingPreset || (exports.IngressVideoEncodingPreset = {}));\nfunction ingressVideoEncodingPresetFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"H264_720P_30FPS_3_LAYERS\":\n            return IngressVideoEncodingPreset.H264_720P_30FPS_3_LAYERS;\n        case 1:\n        case \"H264_1080P_30FPS_3_LAYERS\":\n            return IngressVideoEncodingPreset.H264_1080P_30FPS_3_LAYERS;\n        case 2:\n        case \"H264_540P_25FPS_2_LAYERS\":\n            return IngressVideoEncodingPreset.H264_540P_25FPS_2_LAYERS;\n        case 3:\n        case \"H264_720P_30FPS_1_LAYER\":\n            return IngressVideoEncodingPreset.H264_720P_30FPS_1_LAYER;\n        case 4:\n        case \"H264_1080P_30FPS_1_LAYER\":\n            return IngressVideoEncodingPreset.H264_1080P_30FPS_1_LAYER;\n        case 5:\n        case \"H264_720P_30FPS_3_LAYERS_HIGH_MOTION\":\n            return IngressVideoEncodingPreset.H264_720P_30FPS_3_LAYERS_HIGH_MOTION;\n        case 6:\n        case \"H264_1080P_30FPS_3_LAYERS_HIGH_MOTION\":\n            return IngressVideoEncodingPreset.H264_1080P_30FPS_3_LAYERS_HIGH_MOTION;\n        case 7:\n        case \"H264_540P_25FPS_2_LAYERS_HIGH_MOTION\":\n            return IngressVideoEncodingPreset.H264_540P_25FPS_2_LAYERS_HIGH_MOTION;\n        case 8:\n        case \"H264_720P_30FPS_1_LAYER_HIGH_MOTION\":\n            return IngressVideoEncodingPreset.H264_720P_30FPS_1_LAYER_HIGH_MOTION;\n        case 9:\n        case \"H264_1080P_30FPS_1_LAYER_HIGH_MOTION\":\n            return IngressVideoEncodingPreset.H264_1080P_30FPS_1_LAYER_HIGH_MOTION;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return IngressVideoEncodingPreset.UNRECOGNIZED;\n    }\n}\nexports.ingressVideoEncodingPresetFromJSON = ingressVideoEncodingPresetFromJSON;\nfunction ingressVideoEncodingPresetToJSON(object) {\n    switch (object) {\n        case IngressVideoEncodingPreset.H264_720P_30FPS_3_LAYERS:\n            return \"H264_720P_30FPS_3_LAYERS\";\n        case IngressVideoEncodingPreset.H264_1080P_30FPS_3_LAYERS:\n            return \"H264_1080P_30FPS_3_LAYERS\";\n        case IngressVideoEncodingPreset.H264_540P_25FPS_2_LAYERS:\n            return \"H264_540P_25FPS_2_LAYERS\";\n        case IngressVideoEncodingPreset.H264_720P_30FPS_1_LAYER:\n            return \"H264_720P_30FPS_1_LAYER\";\n        case IngressVideoEncodingPreset.H264_1080P_30FPS_1_LAYER:\n            return \"H264_1080P_30FPS_1_LAYER\";\n        case IngressVideoEncodingPreset.H264_720P_30FPS_3_LAYERS_HIGH_MOTION:\n            return \"H264_720P_30FPS_3_LAYERS_HIGH_MOTION\";\n        case IngressVideoEncodingPreset.H264_1080P_30FPS_3_LAYERS_HIGH_MOTION:\n            return \"H264_1080P_30FPS_3_LAYERS_HIGH_MOTION\";\n        case IngressVideoEncodingPreset.H264_540P_25FPS_2_LAYERS_HIGH_MOTION:\n            return \"H264_540P_25FPS_2_LAYERS_HIGH_MOTION\";\n        case IngressVideoEncodingPreset.H264_720P_30FPS_1_LAYER_HIGH_MOTION:\n            return \"H264_720P_30FPS_1_LAYER_HIGH_MOTION\";\n        case IngressVideoEncodingPreset.H264_1080P_30FPS_1_LAYER_HIGH_MOTION:\n            return \"H264_1080P_30FPS_1_LAYER_HIGH_MOTION\";\n        case IngressVideoEncodingPreset.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.ingressVideoEncodingPresetToJSON = ingressVideoEncodingPresetToJSON;\nvar IngressState_Status;\n(function (IngressState_Status) {\n    IngressState_Status[IngressState_Status[\"ENDPOINT_INACTIVE\"] = 0] = \"ENDPOINT_INACTIVE\";\n    IngressState_Status[IngressState_Status[\"ENDPOINT_BUFFERING\"] = 1] = \"ENDPOINT_BUFFERING\";\n    IngressState_Status[IngressState_Status[\"ENDPOINT_PUBLISHING\"] = 2] = \"ENDPOINT_PUBLISHING\";\n    IngressState_Status[IngressState_Status[\"ENDPOINT_ERROR\"] = 3] = \"ENDPOINT_ERROR\";\n    IngressState_Status[IngressState_Status[\"ENDPOINT_COMPLETE\"] = 4] = \"ENDPOINT_COMPLETE\";\n    IngressState_Status[IngressState_Status[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(IngressState_Status = exports.IngressState_Status || (exports.IngressState_Status = {}));\nfunction ingressState_StatusFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"ENDPOINT_INACTIVE\":\n            return IngressState_Status.ENDPOINT_INACTIVE;\n        case 1:\n        case \"ENDPOINT_BUFFERING\":\n            return IngressState_Status.ENDPOINT_BUFFERING;\n        case 2:\n        case \"ENDPOINT_PUBLISHING\":\n            return IngressState_Status.ENDPOINT_PUBLISHING;\n        case 3:\n        case \"ENDPOINT_ERROR\":\n            return IngressState_Status.ENDPOINT_ERROR;\n        case 4:\n        case \"ENDPOINT_COMPLETE\":\n            return IngressState_Status.ENDPOINT_COMPLETE;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return IngressState_Status.UNRECOGNIZED;\n    }\n}\nexports.ingressState_StatusFromJSON = ingressState_StatusFromJSON;\nfunction ingressState_StatusToJSON(object) {\n    switch (object) {\n        case IngressState_Status.ENDPOINT_INACTIVE:\n            return \"ENDPOINT_INACTIVE\";\n        case IngressState_Status.ENDPOINT_BUFFERING:\n            return \"ENDPOINT_BUFFERING\";\n        case IngressState_Status.ENDPOINT_PUBLISHING:\n            return \"ENDPOINT_PUBLISHING\";\n        case IngressState_Status.ENDPOINT_ERROR:\n            return \"ENDPOINT_ERROR\";\n        case IngressState_Status.ENDPOINT_COMPLETE:\n            return \"ENDPOINT_COMPLETE\";\n        case IngressState_Status.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.ingressState_StatusToJSON = ingressState_StatusToJSON;\nfunction createBaseCreateIngressRequest() {\n    return {\n        inputType: 0,\n        url: \"\",\n        name: \"\",\n        roomName: \"\",\n        participantIdentity: \"\",\n        participantName: \"\",\n        bypassTranscoding: false,\n        audio: undefined,\n        video: undefined,\n    };\n}\nexports.CreateIngressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.inputType !== undefined && message.inputType !== 0) {\n            writer.uint32(8).int32(message.inputType);\n        }\n        if (message.url !== undefined && message.url !== \"\") {\n            writer.uint32(74).string(message.url);\n        }\n        if (message.name !== undefined && message.name !== \"\") {\n            writer.uint32(18).string(message.name);\n        }\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(26).string(message.roomName);\n        }\n        if (message.participantIdentity !== undefined && message.participantIdentity !== \"\") {\n            writer.uint32(34).string(message.participantIdentity);\n        }\n        if (message.participantName !== undefined && message.participantName !== \"\") {\n            writer.uint32(42).string(message.participantName);\n        }\n        if (message.bypassTranscoding === true) {\n            writer.uint32(64).bool(message.bypassTranscoding);\n        }\n        if (message.audio !== undefined) {\n            exports.IngressAudioOptions.encode(message.audio, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.video !== undefined) {\n            exports.IngressVideoOptions.encode(message.video, writer.uint32(58).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseCreateIngressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.inputType = reader.int32();\n                    break;\n                case 9:\n                    message.url = reader.string();\n                    break;\n                case 2:\n                    message.name = reader.string();\n                    break;\n                case 3:\n                    message.roomName = reader.string();\n                    break;\n                case 4:\n                    message.participantIdentity = reader.string();\n                    break;\n                case 5:\n                    message.participantName = reader.string();\n                    break;\n                case 8:\n                    message.bypassTranscoding = reader.bool();\n                    break;\n                case 6:\n                    message.audio = exports.IngressAudioOptions.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.video = exports.IngressVideoOptions.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            inputType: isSet(object.inputType) ? ingressInputFromJSON(object.inputType) : 0,\n            url: isSet(object.url) ? String(object.url) : \"\",\n            name: isSet(object.name) ? String(object.name) : \"\",\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            participantIdentity: isSet(object.participantIdentity) ? String(object.participantIdentity) : \"\",\n            participantName: isSet(object.participantName) ? String(object.participantName) : \"\",\n            bypassTranscoding: isSet(object.bypassTranscoding) ? Boolean(object.bypassTranscoding) : false,\n            audio: isSet(object.audio) ? exports.IngressAudioOptions.fromJSON(object.audio) : undefined,\n            video: isSet(object.video) ? exports.IngressVideoOptions.fromJSON(object.video) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.inputType !== undefined && (obj.inputType = ingressInputToJSON(message.inputType));\n        message.url !== undefined && (obj.url = message.url);\n        message.name !== undefined && (obj.name = message.name);\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.participantIdentity !== undefined && (obj.participantIdentity = message.participantIdentity);\n        message.participantName !== undefined && (obj.participantName = message.participantName);\n        message.bypassTranscoding !== undefined && (obj.bypassTranscoding = message.bypassTranscoding);\n        message.audio !== undefined && (obj.audio = message.audio ? exports.IngressAudioOptions.toJSON(message.audio) : undefined);\n        message.video !== undefined && (obj.video = message.video ? exports.IngressVideoOptions.toJSON(message.video) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        const message = createBaseCreateIngressRequest();\n        message.inputType = (_a = object.inputType) !== null && _a !== void 0 ? _a : 0;\n        message.url = (_b = object.url) !== null && _b !== void 0 ? _b : \"\";\n        message.name = (_c = object.name) !== null && _c !== void 0 ? _c : \"\";\n        message.roomName = (_d = object.roomName) !== null && _d !== void 0 ? _d : \"\";\n        message.participantIdentity = (_e = object.participantIdentity) !== null && _e !== void 0 ? _e : \"\";\n        message.participantName = (_f = object.participantName) !== null && _f !== void 0 ? _f : \"\";\n        message.bypassTranscoding = (_g = object.bypassTranscoding) !== null && _g !== void 0 ? _g : false;\n        message.audio = (object.audio !== undefined && object.audio !== null)\n            ? exports.IngressAudioOptions.fromPartial(object.audio)\n            : undefined;\n        message.video = (object.video !== undefined && object.video !== null)\n            ? exports.IngressVideoOptions.fromPartial(object.video)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseIngressAudioOptions() {\n    return { name: \"\", source: 0, preset: undefined, options: undefined };\n}\nexports.IngressAudioOptions = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.name !== undefined && message.name !== \"\") {\n            writer.uint32(10).string(message.name);\n        }\n        if (message.source !== undefined && message.source !== 0) {\n            writer.uint32(16).int32(message.source);\n        }\n        if (message.preset !== undefined) {\n            writer.uint32(24).int32(message.preset);\n        }\n        if (message.options !== undefined) {\n            exports.IngressAudioEncodingOptions.encode(message.options, writer.uint32(34).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseIngressAudioOptions();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.name = reader.string();\n                    break;\n                case 2:\n                    message.source = reader.int32();\n                    break;\n                case 3:\n                    message.preset = reader.int32();\n                    break;\n                case 4:\n                    message.options = exports.IngressAudioEncodingOptions.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            name: isSet(object.name) ? String(object.name) : \"\",\n            source: isSet(object.source) ? livekit_models_1.trackSourceFromJSON(object.source) : 0,\n            preset: isSet(object.preset) ? ingressAudioEncodingPresetFromJSON(object.preset) : undefined,\n            options: isSet(object.options) ? exports.IngressAudioEncodingOptions.fromJSON(object.options) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.name !== undefined && (obj.name = message.name);\n        message.source !== undefined && (obj.source = livekit_models_1.trackSourceToJSON(message.source));\n        message.preset !== undefined &&\n            (obj.preset = message.preset !== undefined ? ingressAudioEncodingPresetToJSON(message.preset) : undefined);\n        message.options !== undefined &&\n            (obj.options = message.options ? exports.IngressAudioEncodingOptions.toJSON(message.options) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseIngressAudioOptions();\n        message.name = (_a = object.name) !== null && _a !== void 0 ? _a : \"\";\n        message.source = (_b = object.source) !== null && _b !== void 0 ? _b : 0;\n        message.preset = (_c = object.preset) !== null && _c !== void 0 ? _c : undefined;\n        message.options = (object.options !== undefined && object.options !== null)\n            ? exports.IngressAudioEncodingOptions.fromPartial(object.options)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseIngressVideoOptions() {\n    return { name: \"\", source: 0, preset: undefined, options: undefined };\n}\nexports.IngressVideoOptions = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.name !== undefined && message.name !== \"\") {\n            writer.uint32(10).string(message.name);\n        }\n        if (message.source !== undefined && message.source !== 0) {\n            writer.uint32(16).int32(message.source);\n        }\n        if (message.preset !== undefined) {\n            writer.uint32(24).int32(message.preset);\n        }\n        if (message.options !== undefined) {\n            exports.IngressVideoEncodingOptions.encode(message.options, writer.uint32(34).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseIngressVideoOptions();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.name = reader.string();\n                    break;\n                case 2:\n                    message.source = reader.int32();\n                    break;\n                case 3:\n                    message.preset = reader.int32();\n                    break;\n                case 4:\n                    message.options = exports.IngressVideoEncodingOptions.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            name: isSet(object.name) ? String(object.name) : \"\",\n            source: isSet(object.source) ? livekit_models_1.trackSourceFromJSON(object.source) : 0,\n            preset: isSet(object.preset) ? ingressVideoEncodingPresetFromJSON(object.preset) : undefined,\n            options: isSet(object.options) ? exports.IngressVideoEncodingOptions.fromJSON(object.options) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.name !== undefined && (obj.name = message.name);\n        message.source !== undefined && (obj.source = livekit_models_1.trackSourceToJSON(message.source));\n        message.preset !== undefined &&\n            (obj.preset = message.preset !== undefined ? ingressVideoEncodingPresetToJSON(message.preset) : undefined);\n        message.options !== undefined &&\n            (obj.options = message.options ? exports.IngressVideoEncodingOptions.toJSON(message.options) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseIngressVideoOptions();\n        message.name = (_a = object.name) !== null && _a !== void 0 ? _a : \"\";\n        message.source = (_b = object.source) !== null && _b !== void 0 ? _b : 0;\n        message.preset = (_c = object.preset) !== null && _c !== void 0 ? _c : undefined;\n        message.options = (object.options !== undefined && object.options !== null)\n            ? exports.IngressVideoEncodingOptions.fromPartial(object.options)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseIngressAudioEncodingOptions() {\n    return { audioCodec: 0, bitrate: 0, disableDtx: false, channels: 0 };\n}\nexports.IngressAudioEncodingOptions = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.audioCodec !== undefined && message.audioCodec !== 0) {\n            writer.uint32(8).int32(message.audioCodec);\n        }\n        if (message.bitrate !== undefined && message.bitrate !== 0) {\n            writer.uint32(16).uint32(message.bitrate);\n        }\n        if (message.disableDtx === true) {\n            writer.uint32(24).bool(message.disableDtx);\n        }\n        if (message.channels !== undefined && message.channels !== 0) {\n            writer.uint32(32).uint32(message.channels);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseIngressAudioEncodingOptions();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.audioCodec = reader.int32();\n                    break;\n                case 2:\n                    message.bitrate = reader.uint32();\n                    break;\n                case 3:\n                    message.disableDtx = reader.bool();\n                    break;\n                case 4:\n                    message.channels = reader.uint32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            audioCodec: isSet(object.audioCodec) ? livekit_models_1.audioCodecFromJSON(object.audioCodec) : 0,\n            bitrate: isSet(object.bitrate) ? Number(object.bitrate) : 0,\n            disableDtx: isSet(object.disableDtx) ? Boolean(object.disableDtx) : false,\n            channels: isSet(object.channels) ? Number(object.channels) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.audioCodec !== undefined && (obj.audioCodec = livekit_models_1.audioCodecToJSON(message.audioCodec));\n        message.bitrate !== undefined && (obj.bitrate = Math.round(message.bitrate));\n        message.disableDtx !== undefined && (obj.disableDtx = message.disableDtx);\n        message.channels !== undefined && (obj.channels = Math.round(message.channels));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d;\n        const message = createBaseIngressAudioEncodingOptions();\n        message.audioCodec = (_a = object.audioCodec) !== null && _a !== void 0 ? _a : 0;\n        message.bitrate = (_b = object.bitrate) !== null && _b !== void 0 ? _b : 0;\n        message.disableDtx = (_c = object.disableDtx) !== null && _c !== void 0 ? _c : false;\n        message.channels = (_d = object.channels) !== null && _d !== void 0 ? _d : 0;\n        return message;\n    },\n};\nfunction createBaseIngressVideoEncodingOptions() {\n    return { videoCodec: 0, frameRate: 0, layers: [] };\n}\nexports.IngressVideoEncodingOptions = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.videoCodec !== undefined && message.videoCodec !== 0) {\n            writer.uint32(8).int32(message.videoCodec);\n        }\n        if (message.frameRate !== undefined && message.frameRate !== 0) {\n            writer.uint32(17).double(message.frameRate);\n        }\n        if (message.layers !== undefined && message.layers.length !== 0) {\n            for (const v of message.layers) {\n                livekit_models_1.VideoLayer.encode(v, writer.uint32(26).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseIngressVideoEncodingOptions();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.videoCodec = reader.int32();\n                    break;\n                case 2:\n                    message.frameRate = reader.double();\n                    break;\n                case 3:\n                    message.layers.push(livekit_models_1.VideoLayer.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            videoCodec: isSet(object.videoCodec) ? livekit_models_1.videoCodecFromJSON(object.videoCodec) : 0,\n            frameRate: isSet(object.frameRate) ? Number(object.frameRate) : 0,\n            layers: Array.isArray(object === null || object === void 0 ? void 0 : object.layers) ? object.layers.map((e) => livekit_models_1.VideoLayer.fromJSON(e)) : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.videoCodec !== undefined && (obj.videoCodec = livekit_models_1.videoCodecToJSON(message.videoCodec));\n        message.frameRate !== undefined && (obj.frameRate = message.frameRate);\n        if (message.layers) {\n            obj.layers = message.layers.map((e) => e ? livekit_models_1.VideoLayer.toJSON(e) : undefined);\n        }\n        else {\n            obj.layers = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseIngressVideoEncodingOptions();\n        message.videoCodec = (_a = object.videoCodec) !== null && _a !== void 0 ? _a : 0;\n        message.frameRate = (_b = object.frameRate) !== null && _b !== void 0 ? _b : 0;\n        message.layers = ((_c = object.layers) === null || _c === void 0 ? void 0 : _c.map((e) => livekit_models_1.VideoLayer.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseIngressInfo() {\n    return {\n        ingressId: \"\",\n        name: \"\",\n        streamKey: \"\",\n        url: \"\",\n        inputType: 0,\n        bypassTranscoding: false,\n        audio: undefined,\n        video: undefined,\n        roomName: \"\",\n        participantIdentity: \"\",\n        participantName: \"\",\n        reusable: false,\n        state: undefined,\n    };\n}\nexports.IngressInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.ingressId !== undefined && message.ingressId !== \"\") {\n            writer.uint32(10).string(message.ingressId);\n        }\n        if (message.name !== undefined && message.name !== \"\") {\n            writer.uint32(18).string(message.name);\n        }\n        if (message.streamKey !== undefined && message.streamKey !== \"\") {\n            writer.uint32(26).string(message.streamKey);\n        }\n        if (message.url !== undefined && message.url !== \"\") {\n            writer.uint32(34).string(message.url);\n        }\n        if (message.inputType !== undefined && message.inputType !== 0) {\n            writer.uint32(40).int32(message.inputType);\n        }\n        if (message.bypassTranscoding === true) {\n            writer.uint32(104).bool(message.bypassTranscoding);\n        }\n        if (message.audio !== undefined) {\n            exports.IngressAudioOptions.encode(message.audio, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.video !== undefined) {\n            exports.IngressVideoOptions.encode(message.video, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(66).string(message.roomName);\n        }\n        if (message.participantIdentity !== undefined && message.participantIdentity !== \"\") {\n            writer.uint32(74).string(message.participantIdentity);\n        }\n        if (message.participantName !== undefined && message.participantName !== \"\") {\n            writer.uint32(82).string(message.participantName);\n        }\n        if (message.reusable === true) {\n            writer.uint32(88).bool(message.reusable);\n        }\n        if (message.state !== undefined) {\n            exports.IngressState.encode(message.state, writer.uint32(98).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseIngressInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.ingressId = reader.string();\n                    break;\n                case 2:\n                    message.name = reader.string();\n                    break;\n                case 3:\n                    message.streamKey = reader.string();\n                    break;\n                case 4:\n                    message.url = reader.string();\n                    break;\n                case 5:\n                    message.inputType = reader.int32();\n                    break;\n                case 13:\n                    message.bypassTranscoding = reader.bool();\n                    break;\n                case 6:\n                    message.audio = exports.IngressAudioOptions.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.video = exports.IngressVideoOptions.decode(reader, reader.uint32());\n                    break;\n                case 8:\n                    message.roomName = reader.string();\n                    break;\n                case 9:\n                    message.participantIdentity = reader.string();\n                    break;\n                case 10:\n                    message.participantName = reader.string();\n                    break;\n                case 11:\n                    message.reusable = reader.bool();\n                    break;\n                case 12:\n                    message.state = exports.IngressState.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            ingressId: isSet(object.ingressId) ? String(object.ingressId) : \"\",\n            name: isSet(object.name) ? String(object.name) : \"\",\n            streamKey: isSet(object.streamKey) ? String(object.streamKey) : \"\",\n            url: isSet(object.url) ? String(object.url) : \"\",\n            inputType: isSet(object.inputType) ? ingressInputFromJSON(object.inputType) : 0,\n            bypassTranscoding: isSet(object.bypassTranscoding) ? Boolean(object.bypassTranscoding) : false,\n            audio: isSet(object.audio) ? exports.IngressAudioOptions.fromJSON(object.audio) : undefined,\n            video: isSet(object.video) ? exports.IngressVideoOptions.fromJSON(object.video) : undefined,\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            participantIdentity: isSet(object.participantIdentity) ? String(object.participantIdentity) : \"\",\n            participantName: isSet(object.participantName) ? String(object.participantName) : \"\",\n            reusable: isSet(object.reusable) ? Boolean(object.reusable) : false,\n            state: isSet(object.state) ? exports.IngressState.fromJSON(object.state) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.ingressId !== undefined && (obj.ingressId = message.ingressId);\n        message.name !== undefined && (obj.name = message.name);\n        message.streamKey !== undefined && (obj.streamKey = message.streamKey);\n        message.url !== undefined && (obj.url = message.url);\n        message.inputType !== undefined && (obj.inputType = ingressInputToJSON(message.inputType));\n        message.bypassTranscoding !== undefined && (obj.bypassTranscoding = message.bypassTranscoding);\n        message.audio !== undefined && (obj.audio = message.audio ? exports.IngressAudioOptions.toJSON(message.audio) : undefined);\n        message.video !== undefined && (obj.video = message.video ? exports.IngressVideoOptions.toJSON(message.video) : undefined);\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.participantIdentity !== undefined && (obj.participantIdentity = message.participantIdentity);\n        message.participantName !== undefined && (obj.participantName = message.participantName);\n        message.reusable !== undefined && (obj.reusable = message.reusable);\n        message.state !== undefined && (obj.state = message.state ? exports.IngressState.toJSON(message.state) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        const message = createBaseIngressInfo();\n        message.ingressId = (_a = object.ingressId) !== null && _a !== void 0 ? _a : \"\";\n        message.name = (_b = object.name) !== null && _b !== void 0 ? _b : \"\";\n        message.streamKey = (_c = object.streamKey) !== null && _c !== void 0 ? _c : \"\";\n        message.url = (_d = object.url) !== null && _d !== void 0 ? _d : \"\";\n        message.inputType = (_e = object.inputType) !== null && _e !== void 0 ? _e : 0;\n        message.bypassTranscoding = (_f = object.bypassTranscoding) !== null && _f !== void 0 ? _f : false;\n        message.audio = (object.audio !== undefined && object.audio !== null)\n            ? exports.IngressAudioOptions.fromPartial(object.audio)\n            : undefined;\n        message.video = (object.video !== undefined && object.video !== null)\n            ? exports.IngressVideoOptions.fromPartial(object.video)\n            : undefined;\n        message.roomName = (_g = object.roomName) !== null && _g !== void 0 ? _g : \"\";\n        message.participantIdentity = (_h = object.participantIdentity) !== null && _h !== void 0 ? _h : \"\";\n        message.participantName = (_j = object.participantName) !== null && _j !== void 0 ? _j : \"\";\n        message.reusable = (_k = object.reusable) !== null && _k !== void 0 ? _k : false;\n        message.state = (object.state !== undefined && object.state !== null)\n            ? exports.IngressState.fromPartial(object.state)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseIngressState() {\n    return {\n        status: 0,\n        error: \"\",\n        video: undefined,\n        audio: undefined,\n        roomId: \"\",\n        startedAt: 0,\n        endedAt: 0,\n        resourceId: \"\",\n        tracks: [],\n    };\n}\nexports.IngressState = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.status !== undefined && message.status !== 0) {\n            writer.uint32(8).int32(message.status);\n        }\n        if (message.error !== undefined && message.error !== \"\") {\n            writer.uint32(18).string(message.error);\n        }\n        if (message.video !== undefined) {\n            exports.InputVideoState.encode(message.video, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.audio !== undefined) {\n            exports.InputAudioState.encode(message.audio, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.roomId !== undefined && message.roomId !== \"\") {\n            writer.uint32(42).string(message.roomId);\n        }\n        if (message.startedAt !== undefined && message.startedAt !== 0) {\n            writer.uint32(56).int64(message.startedAt);\n        }\n        if (message.endedAt !== undefined && message.endedAt !== 0) {\n            writer.uint32(64).int64(message.endedAt);\n        }\n        if (message.resourceId !== undefined && message.resourceId !== \"\") {\n            writer.uint32(74).string(message.resourceId);\n        }\n        if (message.tracks !== undefined && message.tracks.length !== 0) {\n            for (const v of message.tracks) {\n                livekit_models_1.TrackInfo.encode(v, writer.uint32(50).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseIngressState();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.status = reader.int32();\n                    break;\n                case 2:\n                    message.error = reader.string();\n                    break;\n                case 3:\n                    message.video = exports.InputVideoState.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.audio = exports.InputAudioState.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.roomId = reader.string();\n                    break;\n                case 7:\n                    message.startedAt = longToNumber(reader.int64());\n                    break;\n                case 8:\n                    message.endedAt = longToNumber(reader.int64());\n                    break;\n                case 9:\n                    message.resourceId = reader.string();\n                    break;\n                case 6:\n                    message.tracks.push(livekit_models_1.TrackInfo.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            status: isSet(object.status) ? ingressState_StatusFromJSON(object.status) : 0,\n            error: isSet(object.error) ? String(object.error) : \"\",\n            video: isSet(object.video) ? exports.InputVideoState.fromJSON(object.video) : undefined,\n            audio: isSet(object.audio) ? exports.InputAudioState.fromJSON(object.audio) : undefined,\n            roomId: isSet(object.roomId) ? String(object.roomId) : \"\",\n            startedAt: isSet(object.startedAt) ? Number(object.startedAt) : 0,\n            endedAt: isSet(object.endedAt) ? Number(object.endedAt) : 0,\n            resourceId: isSet(object.resourceId) ? String(object.resourceId) : \"\",\n            tracks: Array.isArray(object === null || object === void 0 ? void 0 : object.tracks) ? object.tracks.map((e) => livekit_models_1.TrackInfo.fromJSON(e)) : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.status !== undefined && (obj.status = ingressState_StatusToJSON(message.status));\n        message.error !== undefined && (obj.error = message.error);\n        message.video !== undefined && (obj.video = message.video ? exports.InputVideoState.toJSON(message.video) : undefined);\n        message.audio !== undefined && (obj.audio = message.audio ? exports.InputAudioState.toJSON(message.audio) : undefined);\n        message.roomId !== undefined && (obj.roomId = message.roomId);\n        message.startedAt !== undefined && (obj.startedAt = Math.round(message.startedAt));\n        message.endedAt !== undefined && (obj.endedAt = Math.round(message.endedAt));\n        message.resourceId !== undefined && (obj.resourceId = message.resourceId);\n        if (message.tracks) {\n            obj.tracks = message.tracks.map((e) => e ? livekit_models_1.TrackInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.tracks = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        const message = createBaseIngressState();\n        message.status = (_a = object.status) !== null && _a !== void 0 ? _a : 0;\n        message.error = (_b = object.error) !== null && _b !== void 0 ? _b : \"\";\n        message.video = (object.video !== undefined && object.video !== null)\n            ? exports.InputVideoState.fromPartial(object.video)\n            : undefined;\n        message.audio = (object.audio !== undefined && object.audio !== null)\n            ? exports.InputAudioState.fromPartial(object.audio)\n            : undefined;\n        message.roomId = (_c = object.roomId) !== null && _c !== void 0 ? _c : \"\";\n        message.startedAt = (_d = object.startedAt) !== null && _d !== void 0 ? _d : 0;\n        message.endedAt = (_e = object.endedAt) !== null && _e !== void 0 ? _e : 0;\n        message.resourceId = (_f = object.resourceId) !== null && _f !== void 0 ? _f : \"\";\n        message.tracks = ((_g = object.tracks) === null || _g === void 0 ? void 0 : _g.map((e) => livekit_models_1.TrackInfo.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseInputVideoState() {\n    return { mimeType: \"\", averageBitrate: 0, width: 0, height: 0, framerate: 0 };\n}\nexports.InputVideoState = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.mimeType !== undefined && message.mimeType !== \"\") {\n            writer.uint32(10).string(message.mimeType);\n        }\n        if (message.averageBitrate !== undefined && message.averageBitrate !== 0) {\n            writer.uint32(16).uint32(message.averageBitrate);\n        }\n        if (message.width !== undefined && message.width !== 0) {\n            writer.uint32(24).uint32(message.width);\n        }\n        if (message.height !== undefined && message.height !== 0) {\n            writer.uint32(32).uint32(message.height);\n        }\n        if (message.framerate !== undefined && message.framerate !== 0) {\n            writer.uint32(41).double(message.framerate);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseInputVideoState();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.mimeType = reader.string();\n                    break;\n                case 2:\n                    message.averageBitrate = reader.uint32();\n                    break;\n                case 3:\n                    message.width = reader.uint32();\n                    break;\n                case 4:\n                    message.height = reader.uint32();\n                    break;\n                case 5:\n                    message.framerate = reader.double();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            mimeType: isSet(object.mimeType) ? String(object.mimeType) : \"\",\n            averageBitrate: isSet(object.averageBitrate) ? Number(object.averageBitrate) : 0,\n            width: isSet(object.width) ? Number(object.width) : 0,\n            height: isSet(object.height) ? Number(object.height) : 0,\n            framerate: isSet(object.framerate) ? Number(object.framerate) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.mimeType !== undefined && (obj.mimeType = message.mimeType);\n        message.averageBitrate !== undefined && (obj.averageBitrate = Math.round(message.averageBitrate));\n        message.width !== undefined && (obj.width = Math.round(message.width));\n        message.height !== undefined && (obj.height = Math.round(message.height));\n        message.framerate !== undefined && (obj.framerate = message.framerate);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e;\n        const message = createBaseInputVideoState();\n        message.mimeType = (_a = object.mimeType) !== null && _a !== void 0 ? _a : \"\";\n        message.averageBitrate = (_b = object.averageBitrate) !== null && _b !== void 0 ? _b : 0;\n        message.width = (_c = object.width) !== null && _c !== void 0 ? _c : 0;\n        message.height = (_d = object.height) !== null && _d !== void 0 ? _d : 0;\n        message.framerate = (_e = object.framerate) !== null && _e !== void 0 ? _e : 0;\n        return message;\n    },\n};\nfunction createBaseInputAudioState() {\n    return { mimeType: \"\", averageBitrate: 0, channels: 0, sampleRate: 0 };\n}\nexports.InputAudioState = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.mimeType !== undefined && message.mimeType !== \"\") {\n            writer.uint32(10).string(message.mimeType);\n        }\n        if (message.averageBitrate !== undefined && message.averageBitrate !== 0) {\n            writer.uint32(16).uint32(message.averageBitrate);\n        }\n        if (message.channels !== undefined && message.channels !== 0) {\n            writer.uint32(24).uint32(message.channels);\n        }\n        if (message.sampleRate !== undefined && message.sampleRate !== 0) {\n            writer.uint32(32).uint32(message.sampleRate);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseInputAudioState();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.mimeType = reader.string();\n                    break;\n                case 2:\n                    message.averageBitrate = reader.uint32();\n                    break;\n                case 3:\n                    message.channels = reader.uint32();\n                    break;\n                case 4:\n                    message.sampleRate = reader.uint32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            mimeType: isSet(object.mimeType) ? String(object.mimeType) : \"\",\n            averageBitrate: isSet(object.averageBitrate) ? Number(object.averageBitrate) : 0,\n            channels: isSet(object.channels) ? Number(object.channels) : 0,\n            sampleRate: isSet(object.sampleRate) ? Number(object.sampleRate) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.mimeType !== undefined && (obj.mimeType = message.mimeType);\n        message.averageBitrate !== undefined && (obj.averageBitrate = Math.round(message.averageBitrate));\n        message.channels !== undefined && (obj.channels = Math.round(message.channels));\n        message.sampleRate !== undefined && (obj.sampleRate = Math.round(message.sampleRate));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d;\n        const message = createBaseInputAudioState();\n        message.mimeType = (_a = object.mimeType) !== null && _a !== void 0 ? _a : \"\";\n        message.averageBitrate = (_b = object.averageBitrate) !== null && _b !== void 0 ? _b : 0;\n        message.channels = (_c = object.channels) !== null && _c !== void 0 ? _c : 0;\n        message.sampleRate = (_d = object.sampleRate) !== null && _d !== void 0 ? _d : 0;\n        return message;\n    },\n};\nfunction createBaseUpdateIngressRequest() {\n    return {\n        ingressId: \"\",\n        name: \"\",\n        roomName: \"\",\n        participantIdentity: \"\",\n        participantName: \"\",\n        bypassTranscoding: undefined,\n        audio: undefined,\n        video: undefined,\n    };\n}\nexports.UpdateIngressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.ingressId !== undefined && message.ingressId !== \"\") {\n            writer.uint32(10).string(message.ingressId);\n        }\n        if (message.name !== undefined && message.name !== \"\") {\n            writer.uint32(18).string(message.name);\n        }\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(26).string(message.roomName);\n        }\n        if (message.participantIdentity !== undefined && message.participantIdentity !== \"\") {\n            writer.uint32(34).string(message.participantIdentity);\n        }\n        if (message.participantName !== undefined && message.participantName !== \"\") {\n            writer.uint32(42).string(message.participantName);\n        }\n        if (message.bypassTranscoding !== undefined) {\n            writer.uint32(64).bool(message.bypassTranscoding);\n        }\n        if (message.audio !== undefined) {\n            exports.IngressAudioOptions.encode(message.audio, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.video !== undefined) {\n            exports.IngressVideoOptions.encode(message.video, writer.uint32(58).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseUpdateIngressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.ingressId = reader.string();\n                    break;\n                case 2:\n                    message.name = reader.string();\n                    break;\n                case 3:\n                    message.roomName = reader.string();\n                    break;\n                case 4:\n                    message.participantIdentity = reader.string();\n                    break;\n                case 5:\n                    message.participantName = reader.string();\n                    break;\n                case 8:\n                    message.bypassTranscoding = reader.bool();\n                    break;\n                case 6:\n                    message.audio = exports.IngressAudioOptions.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.video = exports.IngressVideoOptions.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            ingressId: isSet(object.ingressId) ? String(object.ingressId) : \"\",\n            name: isSet(object.name) ? String(object.name) : \"\",\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            participantIdentity: isSet(object.participantIdentity) ? String(object.participantIdentity) : \"\",\n            participantName: isSet(object.participantName) ? String(object.participantName) : \"\",\n            bypassTranscoding: isSet(object.bypassTranscoding) ? Boolean(object.bypassTranscoding) : undefined,\n            audio: isSet(object.audio) ? exports.IngressAudioOptions.fromJSON(object.audio) : undefined,\n            video: isSet(object.video) ? exports.IngressVideoOptions.fromJSON(object.video) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.ingressId !== undefined && (obj.ingressId = message.ingressId);\n        message.name !== undefined && (obj.name = message.name);\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.participantIdentity !== undefined && (obj.participantIdentity = message.participantIdentity);\n        message.participantName !== undefined && (obj.participantName = message.participantName);\n        message.bypassTranscoding !== undefined && (obj.bypassTranscoding = message.bypassTranscoding);\n        message.audio !== undefined && (obj.audio = message.audio ? exports.IngressAudioOptions.toJSON(message.audio) : undefined);\n        message.video !== undefined && (obj.video = message.video ? exports.IngressVideoOptions.toJSON(message.video) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f;\n        const message = createBaseUpdateIngressRequest();\n        message.ingressId = (_a = object.ingressId) !== null && _a !== void 0 ? _a : \"\";\n        message.name = (_b = object.name) !== null && _b !== void 0 ? _b : \"\";\n        message.roomName = (_c = object.roomName) !== null && _c !== void 0 ? _c : \"\";\n        message.participantIdentity = (_d = object.participantIdentity) !== null && _d !== void 0 ? _d : \"\";\n        message.participantName = (_e = object.participantName) !== null && _e !== void 0 ? _e : \"\";\n        message.bypassTranscoding = (_f = object.bypassTranscoding) !== null && _f !== void 0 ? _f : undefined;\n        message.audio = (object.audio !== undefined && object.audio !== null)\n            ? exports.IngressAudioOptions.fromPartial(object.audio)\n            : undefined;\n        message.video = (object.video !== undefined && object.video !== null)\n            ? exports.IngressVideoOptions.fromPartial(object.video)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseListIngressRequest() {\n    return { roomName: \"\", ingressId: \"\" };\n}\nexports.ListIngressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(10).string(message.roomName);\n        }\n        if (message.ingressId !== undefined && message.ingressId !== \"\") {\n            writer.uint32(18).string(message.ingressId);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseListIngressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.roomName = reader.string();\n                    break;\n                case 2:\n                    message.ingressId = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            ingressId: isSet(object.ingressId) ? String(object.ingressId) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.ingressId !== undefined && (obj.ingressId = message.ingressId);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseListIngressRequest();\n        message.roomName = (_a = object.roomName) !== null && _a !== void 0 ? _a : \"\";\n        message.ingressId = (_b = object.ingressId) !== null && _b !== void 0 ? _b : \"\";\n        return message;\n    },\n};\nfunction createBaseListIngressResponse() {\n    return { items: [] };\n}\nexports.ListIngressResponse = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.items !== undefined && message.items.length !== 0) {\n            for (const v of message.items) {\n                exports.IngressInfo.encode(v, writer.uint32(10).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseListIngressResponse();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.items.push(exports.IngressInfo.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { items: Array.isArray(object === null || object === void 0 ? void 0 : object.items) ? object.items.map((e) => exports.IngressInfo.fromJSON(e)) : [] };\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.items) {\n            obj.items = message.items.map((e) => e ? exports.IngressInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.items = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseListIngressResponse();\n        message.items = ((_a = object.items) === null || _a === void 0 ? void 0 : _a.map((e) => exports.IngressInfo.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseDeleteIngressRequest() {\n    return { ingressId: \"\" };\n}\nexports.DeleteIngressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.ingressId !== undefined && message.ingressId !== \"\") {\n            writer.uint32(10).string(message.ingressId);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseDeleteIngressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.ingressId = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { ingressId: isSet(object.ingressId) ? String(object.ingressId) : \"\" };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.ingressId !== undefined && (obj.ingressId = message.ingressId);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseDeleteIngressRequest();\n        message.ingressId = (_a = object.ingressId) !== null && _a !== void 0 ? _a : \"\";\n        return message;\n    },\n};\nvar globalThis = (() => {\n    if (typeof globalThis !== \"undefined\") {\n        return globalThis;\n    }\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    if (typeof window !== \"undefined\") {\n        return window;\n    }\n    if (typeof global !== \"undefined\") {\n        return global;\n    }\n    throw \"Unable to locate global object\";\n})();\nfunction longToNumber(long) {\n    if (long.gt(Number.MAX_SAFE_INTEGER)) {\n        throw new globalThis.Error(\"Value is larger than Number.MAX_SAFE_INTEGER\");\n    }\n    return long.toNumber();\n}\nif (minimal_1.default.util.Long !== long_1.default) {\n    minimal_1.default.util.Long = long_1.default;\n    minimal_1.default.configure();\n}\nfunction isSet(value) {\n    return value !== null && value !== undefined;\n}\n//# sourceMappingURL=livekit_ingress.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvcHJvdG8vbGl2ZWtpdF9pbmdyZXNzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsNEJBQTRCLEdBQUcsMkJBQTJCLEdBQUcsMEJBQTBCLEdBQUcsNEJBQTRCLEdBQUcsdUJBQXVCLEdBQUcsdUJBQXVCLEdBQUcsb0JBQW9CLEdBQUcsbUJBQW1CLEdBQUcsbUNBQW1DLEdBQUcsbUNBQW1DLEdBQUcsMkJBQTJCLEdBQUcsMkJBQTJCLEdBQUcsNEJBQTRCLEdBQUcsaUNBQWlDLEdBQUcsbUNBQW1DLEdBQUcsMkJBQTJCLEdBQUcsd0NBQXdDLEdBQUcsMENBQTBDLEdBQUcsa0NBQWtDLEdBQUcsd0NBQXdDLEdBQUcsMENBQTBDLEdBQUcsa0NBQWtDLEdBQUcsMEJBQTBCLEdBQUcsNEJBQTRCLEdBQUcsb0JBQW9CLEdBQUcsdUJBQXVCO0FBQzcwQjtBQUNBLCtCQUErQixtQkFBTyxDQUFDLG9EQUFNO0FBQzdDLGtDQUFrQyxtQkFBTyxDQUFDLHNFQUFvQjtBQUM5RCx5QkFBeUIsbUJBQU8sQ0FBQyw4RkFBa0I7QUFDbkQsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQywwQ0FBMEMsb0JBQW9CLEtBQUs7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsc0VBQXNFLGtDQUFrQyxLQUFLO0FBQzlHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxzRUFBc0Usa0NBQWtDLEtBQUs7QUFDOUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsd0RBQXdELDJCQUEyQixLQUFLO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsaUJBQWlCO0FBQ2pCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxpQkFBaUI7QUFDakIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saXZlc3RyZWFtLy4vbm9kZV9tb2R1bGVzL2xpdmVraXQtc2VydmVyLXNkay9kaXN0L3Byb3RvL2xpdmVraXRfaW5ncmVzcy5qcz9hMTQ3Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5EZWxldGVJbmdyZXNzUmVxdWVzdCA9IGV4cG9ydHMuTGlzdEluZ3Jlc3NSZXNwb25zZSA9IGV4cG9ydHMuTGlzdEluZ3Jlc3NSZXF1ZXN0ID0gZXhwb3J0cy5VcGRhdGVJbmdyZXNzUmVxdWVzdCA9IGV4cG9ydHMuSW5wdXRBdWRpb1N0YXRlID0gZXhwb3J0cy5JbnB1dFZpZGVvU3RhdGUgPSBleHBvcnRzLkluZ3Jlc3NTdGF0ZSA9IGV4cG9ydHMuSW5ncmVzc0luZm8gPSBleHBvcnRzLkluZ3Jlc3NWaWRlb0VuY29kaW5nT3B0aW9ucyA9IGV4cG9ydHMuSW5ncmVzc0F1ZGlvRW5jb2RpbmdPcHRpb25zID0gZXhwb3J0cy5JbmdyZXNzVmlkZW9PcHRpb25zID0gZXhwb3J0cy5JbmdyZXNzQXVkaW9PcHRpb25zID0gZXhwb3J0cy5DcmVhdGVJbmdyZXNzUmVxdWVzdCA9IGV4cG9ydHMuaW5ncmVzc1N0YXRlX1N0YXR1c1RvSlNPTiA9IGV4cG9ydHMuaW5ncmVzc1N0YXRlX1N0YXR1c0Zyb21KU09OID0gZXhwb3J0cy5JbmdyZXNzU3RhdGVfU3RhdHVzID0gZXhwb3J0cy5pbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFRvSlNPTiA9IGV4cG9ydHMuaW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRGcm9tSlNPTiA9IGV4cG9ydHMuSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQgPSBleHBvcnRzLmluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0VG9KU09OID0gZXhwb3J0cy5pbmdyZXNzQXVkaW9FbmNvZGluZ1ByZXNldEZyb21KU09OID0gZXhwb3J0cy5JbmdyZXNzQXVkaW9FbmNvZGluZ1ByZXNldCA9IGV4cG9ydHMuaW5ncmVzc0lucHV0VG9KU09OID0gZXhwb3J0cy5pbmdyZXNzSW5wdXRGcm9tSlNPTiA9IGV4cG9ydHMuSW5ncmVzc0lucHV0ID0gZXhwb3J0cy5wcm90b2J1ZlBhY2thZ2UgPSB2b2lkIDA7XG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuY29uc3QgbG9uZ18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJsb25nXCIpKTtcbmNvbnN0IG1pbmltYWxfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwicHJvdG9idWZqcy9taW5pbWFsXCIpKTtcbmNvbnN0IGxpdmVraXRfbW9kZWxzXzEgPSByZXF1aXJlKFwiLi9saXZla2l0X21vZGVsc1wiKTtcbmV4cG9ydHMucHJvdG9idWZQYWNrYWdlID0gXCJsaXZla2l0XCI7XG52YXIgSW5ncmVzc0lucHV0O1xuKGZ1bmN0aW9uIChJbmdyZXNzSW5wdXQpIHtcbiAgICBJbmdyZXNzSW5wdXRbSW5ncmVzc0lucHV0W1wiUlRNUF9JTlBVVFwiXSA9IDBdID0gXCJSVE1QX0lOUFVUXCI7XG4gICAgSW5ncmVzc0lucHV0W0luZ3Jlc3NJbnB1dFtcIldISVBfSU5QVVRcIl0gPSAxXSA9IFwiV0hJUF9JTlBVVFwiO1xuICAgIC8qKiBVUkxfSU5QVVQgLSBQdWxsIGZyb20gdGhlIHByb3ZpZGVkIFVSTC4gT25seSBIVFRQIHVybCBhcmUgc3VwcG9ydGVkLCBzZXJ2aW5nIGVpdGhlciBhIHNpbmdsZSBtZWRpYSBmaWxlIG9yIGEgSExTIHN0cmVhbSAqL1xuICAgIEluZ3Jlc3NJbnB1dFtJbmdyZXNzSW5wdXRbXCJVUkxfSU5QVVRcIl0gPSAyXSA9IFwiVVJMX0lOUFVUXCI7XG4gICAgSW5ncmVzc0lucHV0W0luZ3Jlc3NJbnB1dFtcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShJbmdyZXNzSW5wdXQgPSBleHBvcnRzLkluZ3Jlc3NJbnB1dCB8fCAoZXhwb3J0cy5JbmdyZXNzSW5wdXQgPSB7fSkpO1xuZnVuY3Rpb24gaW5ncmVzc0lucHV0RnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiUlRNUF9JTlBVVFwiOlxuICAgICAgICAgICAgcmV0dXJuIEluZ3Jlc3NJbnB1dC5SVE1QX0lOUFVUO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJXSElQX0lOUFVUXCI6XG4gICAgICAgICAgICByZXR1cm4gSW5ncmVzc0lucHV0LldISVBfSU5QVVQ7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSBcIlVSTF9JTlBVVFwiOlxuICAgICAgICAgICAgcmV0dXJuIEluZ3Jlc3NJbnB1dC5VUkxfSU5QVVQ7XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBJbmdyZXNzSW5wdXQuVU5SRUNPR05JWkVEO1xuICAgIH1cbn1cbmV4cG9ydHMuaW5ncmVzc0lucHV0RnJvbUpTT04gPSBpbmdyZXNzSW5wdXRGcm9tSlNPTjtcbmZ1bmN0aW9uIGluZ3Jlc3NJbnB1dFRvSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIEluZ3Jlc3NJbnB1dC5SVE1QX0lOUFVUOlxuICAgICAgICAgICAgcmV0dXJuIFwiUlRNUF9JTlBVVFwiO1xuICAgICAgICBjYXNlIEluZ3Jlc3NJbnB1dC5XSElQX0lOUFVUOlxuICAgICAgICAgICAgcmV0dXJuIFwiV0hJUF9JTlBVVFwiO1xuICAgICAgICBjYXNlIEluZ3Jlc3NJbnB1dC5VUkxfSU5QVVQ6XG4gICAgICAgICAgICByZXR1cm4gXCJVUkxfSU5QVVRcIjtcbiAgICAgICAgY2FzZSBJbmdyZXNzSW5wdXQuVU5SRUNPR05JWkVEOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5SRUNPR05JWkVEXCI7XG4gICAgfVxufVxuZXhwb3J0cy5pbmdyZXNzSW5wdXRUb0pTT04gPSBpbmdyZXNzSW5wdXRUb0pTT047XG52YXIgSW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXQ7XG4oZnVuY3Rpb24gKEluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0KSB7XG4gICAgLyoqIE9QVVNfU1RFUkVPXzk2S0JQUyAtIE9QVVMsIDIgY2hhbm5lbHMsIDk2a2JwcyAqL1xuICAgIEluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0W0luZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0W1wiT1BVU19TVEVSRU9fOTZLQlBTXCJdID0gMF0gPSBcIk9QVVNfU1RFUkVPXzk2S0JQU1wiO1xuICAgIC8qKiBPUFVTX01PTk9fNjRLQlMgLSBPUFVTLCAxIGNoYW5uZWwsIDY0a2JwcyAqL1xuICAgIEluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0W0luZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0W1wiT1BVU19NT05PXzY0S0JTXCJdID0gMV0gPSBcIk9QVVNfTU9OT182NEtCU1wiO1xuICAgIEluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0W0luZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0W1wiVU5SRUNPR05JWkVEXCJdID0gLTFdID0gXCJVTlJFQ09HTklaRURcIjtcbn0pKEluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0ID0gZXhwb3J0cy5JbmdyZXNzQXVkaW9FbmNvZGluZ1ByZXNldCB8fCAoZXhwb3J0cy5JbmdyZXNzQXVkaW9FbmNvZGluZ1ByZXNldCA9IHt9KSk7XG5mdW5jdGlvbiBpbmdyZXNzQXVkaW9FbmNvZGluZ1ByZXNldEZyb21KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSBcIk9QVVNfU1RFUkVPXzk2S0JQU1wiOlxuICAgICAgICAgICAgcmV0dXJuIEluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0Lk9QVVNfU1RFUkVPXzk2S0JQUztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIFwiT1BVU19NT05PXzY0S0JTXCI6XG4gICAgICAgICAgICByZXR1cm4gSW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXQuT1BVU19NT05PXzY0S0JTO1xuICAgICAgICBjYXNlIC0xOlxuICAgICAgICBjYXNlIFwiVU5SRUNPR05JWkVEXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gSW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXQuVU5SRUNPR05JWkVEO1xuICAgIH1cbn1cbmV4cG9ydHMuaW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXRGcm9tSlNPTiA9IGluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0RnJvbUpTT047XG5mdW5jdGlvbiBpbmdyZXNzQXVkaW9FbmNvZGluZ1ByZXNldFRvSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIEluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0Lk9QVVNfU1RFUkVPXzk2S0JQUzpcbiAgICAgICAgICAgIHJldHVybiBcIk9QVVNfU1RFUkVPXzk2S0JQU1wiO1xuICAgICAgICBjYXNlIEluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0Lk9QVVNfTU9OT182NEtCUzpcbiAgICAgICAgICAgIHJldHVybiBcIk9QVVNfTU9OT182NEtCU1wiO1xuICAgICAgICBjYXNlIEluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0LlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMuaW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXRUb0pTT04gPSBpbmdyZXNzQXVkaW9FbmNvZGluZ1ByZXNldFRvSlNPTjtcbnZhciBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldDtcbihmdW5jdGlvbiAoSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQpIHtcbiAgICAvKiogSDI2NF83MjBQXzMwRlBTXzNfTEFZRVJTIC0gMTI4MHg3MjAsICAzMGZwcywgMTkwMGticHMgbWFpbiBsYXllciwgMyBsYXllcnMgdG90YWwgKi9cbiAgICBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtcIkgyNjRfNzIwUF8zMEZQU18zX0xBWUVSU1wiXSA9IDBdID0gXCJIMjY0XzcyMFBfMzBGUFNfM19MQVlFUlNcIjtcbiAgICAvKiogSDI2NF8xMDgwUF8zMEZQU18zX0xBWUVSUyAtIDE5ODB4MTA4MCwgMzBmcHMsIDM1MDBrYnBzIG1haW4gbGF5ZXIsIDMgbGF5ZXJzIHRvdGFsICovXG4gICAgSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRbSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRbXCJIMjY0XzEwODBQXzMwRlBTXzNfTEFZRVJTXCJdID0gMV0gPSBcIkgyNjRfMTA4MFBfMzBGUFNfM19MQVlFUlNcIjtcbiAgICAvKiogSDI2NF81NDBQXzI1RlBTXzJfTEFZRVJTIC0gOTYweDU0MCwgIDI1ZnBzLCAxMDAwa2JwcyAgbWFpbiBsYXllciwgMiBsYXllcnMgdG90YWwgKi9cbiAgICBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtcIkgyNjRfNTQwUF8yNUZQU18yX0xBWUVSU1wiXSA9IDJdID0gXCJIMjY0XzU0MFBfMjVGUFNfMl9MQVlFUlNcIjtcbiAgICAvKiogSDI2NF83MjBQXzMwRlBTXzFfTEFZRVIgLSAxMjgweDcyMCwgIDMwZnBzLCAxOTAwa2Jwcywgbm8gc2ltdWxjYXN0ICovXG4gICAgSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRbSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRbXCJIMjY0XzcyMFBfMzBGUFNfMV9MQVlFUlwiXSA9IDNdID0gXCJIMjY0XzcyMFBfMzBGUFNfMV9MQVlFUlwiO1xuICAgIC8qKiBIMjY0XzEwODBQXzMwRlBTXzFfTEFZRVIgLSAxOTgweDEwODAsIDMwZnBzLCAzNTAwa2Jwcywgbm8gc2ltdWxjYXN0ICovXG4gICAgSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRbSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRbXCJIMjY0XzEwODBQXzMwRlBTXzFfTEFZRVJcIl0gPSA0XSA9IFwiSDI2NF8xMDgwUF8zMEZQU18xX0xBWUVSXCI7XG4gICAgLyoqIEgyNjRfNzIwUF8zMEZQU18zX0xBWUVSU19ISUdIX01PVElPTiAtIDEyODB4NzIwLCAgMzBmcHMsIDI1MDBrYnBzIG1haW4gbGF5ZXIsIDMgbGF5ZXJzIHRvdGFsLCBoaWdoZXIgYml0cmF0ZSBmb3IgaGlnaCBtb3Rpb24sIGhhcmRlciB0byBlbmNvZGUgY29udGVudCAqL1xuICAgIEluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0W0luZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0W1wiSDI2NF83MjBQXzMwRlBTXzNfTEFZRVJTX0hJR0hfTU9USU9OXCJdID0gNV0gPSBcIkgyNjRfNzIwUF8zMEZQU18zX0xBWUVSU19ISUdIX01PVElPTlwiO1xuICAgIC8qKiBIMjY0XzEwODBQXzMwRlBTXzNfTEFZRVJTX0hJR0hfTU9USU9OIC0gMTk4MHgxMDgwLCAzMGZwcywgNDUwMGticHMgbWFpbiBsYXllciwgMyBsYXllcnMgdG90YWwsIGhpZ2hlciBiaXRyYXRlIGZvciBoaWdoIG1vdGlvbiwgaGFyZGVyIHRvIGVuY29kZSBjb250ZW50ICovXG4gICAgSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRbSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRbXCJIMjY0XzEwODBQXzMwRlBTXzNfTEFZRVJTX0hJR0hfTU9USU9OXCJdID0gNl0gPSBcIkgyNjRfMTA4MFBfMzBGUFNfM19MQVlFUlNfSElHSF9NT1RJT05cIjtcbiAgICAvKiogSDI2NF81NDBQXzI1RlBTXzJfTEFZRVJTX0hJR0hfTU9USU9OIC0gOTYweDU0MCwgIDI1ZnBzLCAxMzAwa2JwcyAgbWFpbiBsYXllciwgMiBsYXllcnMgdG90YWwsIGhpZ2hlciBiaXRyYXRlIGZvciBoaWdoIG1vdGlvbiwgaGFyZGVyIHRvIGVuY29kZSBjb250ZW50ICovXG4gICAgSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRbSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRbXCJIMjY0XzU0MFBfMjVGUFNfMl9MQVlFUlNfSElHSF9NT1RJT05cIl0gPSA3XSA9IFwiSDI2NF81NDBQXzI1RlBTXzJfTEFZRVJTX0hJR0hfTU9USU9OXCI7XG4gICAgLyoqIEgyNjRfNzIwUF8zMEZQU18xX0xBWUVSX0hJR0hfTU9USU9OIC0gMTI4MHg3MjAsICAzMGZwcywgMjUwMGticHMsIG5vIHNpbXVsY2FzdCwgaGlnaGVyIGJpdHJhdGUgZm9yIGhpZ2ggbW90aW9uLCBoYXJkZXIgdG8gZW5jb2RlIGNvbnRlbnQgKi9cbiAgICBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtcIkgyNjRfNzIwUF8zMEZQU18xX0xBWUVSX0hJR0hfTU9USU9OXCJdID0gOF0gPSBcIkgyNjRfNzIwUF8zMEZQU18xX0xBWUVSX0hJR0hfTU9USU9OXCI7XG4gICAgLyoqIEgyNjRfMTA4MFBfMzBGUFNfMV9MQVlFUl9ISUdIX01PVElPTiAtIDE5ODB4MTA4MCwgMzBmcHMsIDQ1MDBrYnBzLCBubyBzaW11bGNhc3QsIGhpZ2hlciBiaXRyYXRlIGZvciBoaWdoIG1vdGlvbiwgaGFyZGVyIHRvIGVuY29kZSBjb250ZW50ICovXG4gICAgSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRbSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRbXCJIMjY0XzEwODBQXzMwRlBTXzFfTEFZRVJfSElHSF9NT1RJT05cIl0gPSA5XSA9IFwiSDI2NF8xMDgwUF8zMEZQU18xX0xBWUVSX0hJR0hfTU9USU9OXCI7XG4gICAgSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRbSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRbXCJVTlJFQ09HTklaRURcIl0gPSAtMV0gPSBcIlVOUkVDT0dOSVpFRFwiO1xufSkoSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQgPSBleHBvcnRzLkluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0IHx8IChleHBvcnRzLkluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0ID0ge30pKTtcbmZ1bmN0aW9uIGluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0RnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiSDI2NF83MjBQXzMwRlBTXzNfTEFZRVJTXCI6XG4gICAgICAgICAgICByZXR1cm4gSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuSDI2NF83MjBQXzMwRlBTXzNfTEFZRVJTO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJIMjY0XzEwODBQXzMwRlBTXzNfTEFZRVJTXCI6XG4gICAgICAgICAgICByZXR1cm4gSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuSDI2NF8xMDgwUF8zMEZQU18zX0xBWUVSUztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIFwiSDI2NF81NDBQXzI1RlBTXzJfTEFZRVJTXCI6XG4gICAgICAgICAgICByZXR1cm4gSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuSDI2NF81NDBQXzI1RlBTXzJfTEFZRVJTO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgIGNhc2UgXCJIMjY0XzcyMFBfMzBGUFNfMV9MQVlFUlwiOlxuICAgICAgICAgICAgcmV0dXJuIEluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0LkgyNjRfNzIwUF8zMEZQU18xX0xBWUVSO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgIGNhc2UgXCJIMjY0XzEwODBQXzMwRlBTXzFfTEFZRVJcIjpcbiAgICAgICAgICAgIHJldHVybiBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldC5IMjY0XzEwODBQXzMwRlBTXzFfTEFZRVI7XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgY2FzZSBcIkgyNjRfNzIwUF8zMEZQU18zX0xBWUVSU19ISUdIX01PVElPTlwiOlxuICAgICAgICAgICAgcmV0dXJuIEluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0LkgyNjRfNzIwUF8zMEZQU18zX0xBWUVSU19ISUdIX01PVElPTjtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICBjYXNlIFwiSDI2NF8xMDgwUF8zMEZQU18zX0xBWUVSU19ISUdIX01PVElPTlwiOlxuICAgICAgICAgICAgcmV0dXJuIEluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0LkgyNjRfMTA4MFBfMzBGUFNfM19MQVlFUlNfSElHSF9NT1RJT047XG4gICAgICAgIGNhc2UgNzpcbiAgICAgICAgY2FzZSBcIkgyNjRfNTQwUF8yNUZQU18yX0xBWUVSU19ISUdIX01PVElPTlwiOlxuICAgICAgICAgICAgcmV0dXJuIEluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0LkgyNjRfNTQwUF8yNUZQU18yX0xBWUVSU19ISUdIX01PVElPTjtcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICBjYXNlIFwiSDI2NF83MjBQXzMwRlBTXzFfTEFZRVJfSElHSF9NT1RJT05cIjpcbiAgICAgICAgICAgIHJldHVybiBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldC5IMjY0XzcyMFBfMzBGUFNfMV9MQVlFUl9ISUdIX01PVElPTjtcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICBjYXNlIFwiSDI2NF8xMDgwUF8zMEZQU18xX0xBWUVSX0hJR0hfTU9USU9OXCI6XG4gICAgICAgICAgICByZXR1cm4gSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuSDI2NF8xMDgwUF8zMEZQU18xX0xBWUVSX0hJR0hfTU9USU9OO1xuICAgICAgICBjYXNlIC0xOlxuICAgICAgICBjYXNlIFwiVU5SRUNPR05JWkVEXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuVU5SRUNPR05JWkVEO1xuICAgIH1cbn1cbmV4cG9ydHMuaW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRGcm9tSlNPTiA9IGluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0RnJvbUpTT047XG5mdW5jdGlvbiBpbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFRvSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIEluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0LkgyNjRfNzIwUF8zMEZQU18zX0xBWUVSUzpcbiAgICAgICAgICAgIHJldHVybiBcIkgyNjRfNzIwUF8zMEZQU18zX0xBWUVSU1wiO1xuICAgICAgICBjYXNlIEluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0LkgyNjRfMTA4MFBfMzBGUFNfM19MQVlFUlM6XG4gICAgICAgICAgICByZXR1cm4gXCJIMjY0XzEwODBQXzMwRlBTXzNfTEFZRVJTXCI7XG4gICAgICAgIGNhc2UgSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuSDI2NF81NDBQXzI1RlBTXzJfTEFZRVJTOlxuICAgICAgICAgICAgcmV0dXJuIFwiSDI2NF81NDBQXzI1RlBTXzJfTEFZRVJTXCI7XG4gICAgICAgIGNhc2UgSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuSDI2NF83MjBQXzMwRlBTXzFfTEFZRVI6XG4gICAgICAgICAgICByZXR1cm4gXCJIMjY0XzcyMFBfMzBGUFNfMV9MQVlFUlwiO1xuICAgICAgICBjYXNlIEluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0LkgyNjRfMTA4MFBfMzBGUFNfMV9MQVlFUjpcbiAgICAgICAgICAgIHJldHVybiBcIkgyNjRfMTA4MFBfMzBGUFNfMV9MQVlFUlwiO1xuICAgICAgICBjYXNlIEluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0LkgyNjRfNzIwUF8zMEZQU18zX0xBWUVSU19ISUdIX01PVElPTjpcbiAgICAgICAgICAgIHJldHVybiBcIkgyNjRfNzIwUF8zMEZQU18zX0xBWUVSU19ISUdIX01PVElPTlwiO1xuICAgICAgICBjYXNlIEluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0LkgyNjRfMTA4MFBfMzBGUFNfM19MQVlFUlNfSElHSF9NT1RJT046XG4gICAgICAgICAgICByZXR1cm4gXCJIMjY0XzEwODBQXzMwRlBTXzNfTEFZRVJTX0hJR0hfTU9USU9OXCI7XG4gICAgICAgIGNhc2UgSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuSDI2NF81NDBQXzI1RlBTXzJfTEFZRVJTX0hJR0hfTU9USU9OOlxuICAgICAgICAgICAgcmV0dXJuIFwiSDI2NF81NDBQXzI1RlBTXzJfTEFZRVJTX0hJR0hfTU9USU9OXCI7XG4gICAgICAgIGNhc2UgSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuSDI2NF83MjBQXzMwRlBTXzFfTEFZRVJfSElHSF9NT1RJT046XG4gICAgICAgICAgICByZXR1cm4gXCJIMjY0XzcyMFBfMzBGUFNfMV9MQVlFUl9ISUdIX01PVElPTlwiO1xuICAgICAgICBjYXNlIEluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0LkgyNjRfMTA4MFBfMzBGUFNfMV9MQVlFUl9ISUdIX01PVElPTjpcbiAgICAgICAgICAgIHJldHVybiBcIkgyNjRfMTA4MFBfMzBGUFNfMV9MQVlFUl9ISUdIX01PVElPTlwiO1xuICAgICAgICBjYXNlIEluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0LlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMuaW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRUb0pTT04gPSBpbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFRvSlNPTjtcbnZhciBJbmdyZXNzU3RhdGVfU3RhdHVzO1xuKGZ1bmN0aW9uIChJbmdyZXNzU3RhdGVfU3RhdHVzKSB7XG4gICAgSW5ncmVzc1N0YXRlX1N0YXR1c1tJbmdyZXNzU3RhdGVfU3RhdHVzW1wiRU5EUE9JTlRfSU5BQ1RJVkVcIl0gPSAwXSA9IFwiRU5EUE9JTlRfSU5BQ1RJVkVcIjtcbiAgICBJbmdyZXNzU3RhdGVfU3RhdHVzW0luZ3Jlc3NTdGF0ZV9TdGF0dXNbXCJFTkRQT0lOVF9CVUZGRVJJTkdcIl0gPSAxXSA9IFwiRU5EUE9JTlRfQlVGRkVSSU5HXCI7XG4gICAgSW5ncmVzc1N0YXRlX1N0YXR1c1tJbmdyZXNzU3RhdGVfU3RhdHVzW1wiRU5EUE9JTlRfUFVCTElTSElOR1wiXSA9IDJdID0gXCJFTkRQT0lOVF9QVUJMSVNISU5HXCI7XG4gICAgSW5ncmVzc1N0YXRlX1N0YXR1c1tJbmdyZXNzU3RhdGVfU3RhdHVzW1wiRU5EUE9JTlRfRVJST1JcIl0gPSAzXSA9IFwiRU5EUE9JTlRfRVJST1JcIjtcbiAgICBJbmdyZXNzU3RhdGVfU3RhdHVzW0luZ3Jlc3NTdGF0ZV9TdGF0dXNbXCJFTkRQT0lOVF9DT01QTEVURVwiXSA9IDRdID0gXCJFTkRQT0lOVF9DT01QTEVURVwiO1xuICAgIEluZ3Jlc3NTdGF0ZV9TdGF0dXNbSW5ncmVzc1N0YXRlX1N0YXR1c1tcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShJbmdyZXNzU3RhdGVfU3RhdHVzID0gZXhwb3J0cy5JbmdyZXNzU3RhdGVfU3RhdHVzIHx8IChleHBvcnRzLkluZ3Jlc3NTdGF0ZV9TdGF0dXMgPSB7fSkpO1xuZnVuY3Rpb24gaW5ncmVzc1N0YXRlX1N0YXR1c0Zyb21KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSBcIkVORFBPSU5UX0lOQUNUSVZFXCI6XG4gICAgICAgICAgICByZXR1cm4gSW5ncmVzc1N0YXRlX1N0YXR1cy5FTkRQT0lOVF9JTkFDVElWRTtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIFwiRU5EUE9JTlRfQlVGRkVSSU5HXCI6XG4gICAgICAgICAgICByZXR1cm4gSW5ncmVzc1N0YXRlX1N0YXR1cy5FTkRQT0lOVF9CVUZGRVJJTkc7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSBcIkVORFBPSU5UX1BVQkxJU0hJTkdcIjpcbiAgICAgICAgICAgIHJldHVybiBJbmdyZXNzU3RhdGVfU3RhdHVzLkVORFBPSU5UX1BVQkxJU0hJTkc7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgY2FzZSBcIkVORFBPSU5UX0VSUk9SXCI6XG4gICAgICAgICAgICByZXR1cm4gSW5ncmVzc1N0YXRlX1N0YXR1cy5FTkRQT0lOVF9FUlJPUjtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICBjYXNlIFwiRU5EUE9JTlRfQ09NUExFVEVcIjpcbiAgICAgICAgICAgIHJldHVybiBJbmdyZXNzU3RhdGVfU3RhdHVzLkVORFBPSU5UX0NPTVBMRVRFO1xuICAgICAgICBjYXNlIC0xOlxuICAgICAgICBjYXNlIFwiVU5SRUNPR05JWkVEXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gSW5ncmVzc1N0YXRlX1N0YXR1cy5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy5pbmdyZXNzU3RhdGVfU3RhdHVzRnJvbUpTT04gPSBpbmdyZXNzU3RhdGVfU3RhdHVzRnJvbUpTT047XG5mdW5jdGlvbiBpbmdyZXNzU3RhdGVfU3RhdHVzVG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgSW5ncmVzc1N0YXRlX1N0YXR1cy5FTkRQT0lOVF9JTkFDVElWRTpcbiAgICAgICAgICAgIHJldHVybiBcIkVORFBPSU5UX0lOQUNUSVZFXCI7XG4gICAgICAgIGNhc2UgSW5ncmVzc1N0YXRlX1N0YXR1cy5FTkRQT0lOVF9CVUZGRVJJTkc6XG4gICAgICAgICAgICByZXR1cm4gXCJFTkRQT0lOVF9CVUZGRVJJTkdcIjtcbiAgICAgICAgY2FzZSBJbmdyZXNzU3RhdGVfU3RhdHVzLkVORFBPSU5UX1BVQkxJU0hJTkc6XG4gICAgICAgICAgICByZXR1cm4gXCJFTkRQT0lOVF9QVUJMSVNISU5HXCI7XG4gICAgICAgIGNhc2UgSW5ncmVzc1N0YXRlX1N0YXR1cy5FTkRQT0lOVF9FUlJPUjpcbiAgICAgICAgICAgIHJldHVybiBcIkVORFBPSU5UX0VSUk9SXCI7XG4gICAgICAgIGNhc2UgSW5ncmVzc1N0YXRlX1N0YXR1cy5FTkRQT0lOVF9DT01QTEVURTpcbiAgICAgICAgICAgIHJldHVybiBcIkVORFBPSU5UX0NPTVBMRVRFXCI7XG4gICAgICAgIGNhc2UgSW5ncmVzc1N0YXRlX1N0YXR1cy5VTlJFQ09HTklaRUQ6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJVTlJFQ09HTklaRURcIjtcbiAgICB9XG59XG5leHBvcnRzLmluZ3Jlc3NTdGF0ZV9TdGF0dXNUb0pTT04gPSBpbmdyZXNzU3RhdGVfU3RhdHVzVG9KU09OO1xuZnVuY3Rpb24gY3JlYXRlQmFzZUNyZWF0ZUluZ3Jlc3NSZXF1ZXN0KCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGlucHV0VHlwZTogMCxcbiAgICAgICAgdXJsOiBcIlwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICByb29tTmFtZTogXCJcIixcbiAgICAgICAgcGFydGljaXBhbnRJZGVudGl0eTogXCJcIixcbiAgICAgICAgcGFydGljaXBhbnROYW1lOiBcIlwiLFxuICAgICAgICBieXBhc3NUcmFuc2NvZGluZzogZmFsc2UsXG4gICAgICAgIGF1ZGlvOiB1bmRlZmluZWQsXG4gICAgICAgIHZpZGVvOiB1bmRlZmluZWQsXG4gICAgfTtcbn1cbmV4cG9ydHMuQ3JlYXRlSW5ncmVzc1JlcXVlc3QgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5pbnB1dFR5cGUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmlucHV0VHlwZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4KS5pbnQzMihtZXNzYWdlLmlucHV0VHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudXJsICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS51cmwgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNzQpLnN0cmluZyhtZXNzYWdlLnVybCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubmFtZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UubmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vbU5hbWUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnJvb21OYW1lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5yb29tTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigzNCkuc3RyaW5nKG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucGFydGljaXBhbnROYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5wYXJ0aWNpcGFudE5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDIpLnN0cmluZyhtZXNzYWdlLnBhcnRpY2lwYW50TmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYnlwYXNzVHJhbnNjb2RpbmcgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNjQpLmJvb2wobWVzc2FnZS5ieXBhc3NUcmFuc2NvZGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYXVkaW8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5JbmdyZXNzQXVkaW9PcHRpb25zLmVuY29kZShtZXNzYWdlLmF1ZGlvLCB3cml0ZXIudWludDMyKDUwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnZpZGVvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuSW5ncmVzc1ZpZGVvT3B0aW9ucy5lbmNvZGUobWVzc2FnZS52aWRlbywgd3JpdGVyLnVpbnQzMig1OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VDcmVhdGVJbmdyZXNzUmVxdWVzdCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW5wdXRUeXBlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51cmwgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbU5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudElkZW50aXR5ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnROYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYnlwYXNzVHJhbnNjb2RpbmcgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYXVkaW8gPSBleHBvcnRzLkluZ3Jlc3NBdWRpb09wdGlvbnMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZpZGVvID0gZXhwb3J0cy5JbmdyZXNzVmlkZW9PcHRpb25zLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlucHV0VHlwZTogaXNTZXQob2JqZWN0LmlucHV0VHlwZSkgPyBpbmdyZXNzSW5wdXRGcm9tSlNPTihvYmplY3QuaW5wdXRUeXBlKSA6IDAsXG4gICAgICAgICAgICB1cmw6IGlzU2V0KG9iamVjdC51cmwpID8gU3RyaW5nKG9iamVjdC51cmwpIDogXCJcIixcbiAgICAgICAgICAgIG5hbWU6IGlzU2V0KG9iamVjdC5uYW1lKSA/IFN0cmluZyhvYmplY3QubmFtZSkgOiBcIlwiLFxuICAgICAgICAgICAgcm9vbU5hbWU6IGlzU2V0KG9iamVjdC5yb29tTmFtZSkgPyBTdHJpbmcob2JqZWN0LnJvb21OYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBwYXJ0aWNpcGFudElkZW50aXR5OiBpc1NldChvYmplY3QucGFydGljaXBhbnRJZGVudGl0eSkgPyBTdHJpbmcob2JqZWN0LnBhcnRpY2lwYW50SWRlbnRpdHkpIDogXCJcIixcbiAgICAgICAgICAgIHBhcnRpY2lwYW50TmFtZTogaXNTZXQob2JqZWN0LnBhcnRpY2lwYW50TmFtZSkgPyBTdHJpbmcob2JqZWN0LnBhcnRpY2lwYW50TmFtZSkgOiBcIlwiLFxuICAgICAgICAgICAgYnlwYXNzVHJhbnNjb2Rpbmc6IGlzU2V0KG9iamVjdC5ieXBhc3NUcmFuc2NvZGluZykgPyBCb29sZWFuKG9iamVjdC5ieXBhc3NUcmFuc2NvZGluZykgOiBmYWxzZSxcbiAgICAgICAgICAgIGF1ZGlvOiBpc1NldChvYmplY3QuYXVkaW8pID8gZXhwb3J0cy5JbmdyZXNzQXVkaW9PcHRpb25zLmZyb21KU09OKG9iamVjdC5hdWRpbykgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB2aWRlbzogaXNTZXQob2JqZWN0LnZpZGVvKSA/IGV4cG9ydHMuSW5ncmVzc1ZpZGVvT3B0aW9ucy5mcm9tSlNPTihvYmplY3QudmlkZW8pIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UuaW5wdXRUeXBlICE9PSB1bmRlZmluZWQgJiYgKG9iai5pbnB1dFR5cGUgPSBpbmdyZXNzSW5wdXRUb0pTT04obWVzc2FnZS5pbnB1dFR5cGUpKTtcbiAgICAgICAgbWVzc2FnZS51cmwgIT09IHVuZGVmaW5lZCAmJiAob2JqLnVybCA9IG1lc3NhZ2UudXJsKTtcbiAgICAgICAgbWVzc2FnZS5uYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5uYW1lID0gbWVzc2FnZS5uYW1lKTtcbiAgICAgICAgbWVzc2FnZS5yb29tTmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmoucm9vbU5hbWUgPSBtZXNzYWdlLnJvb21OYW1lKTtcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudElkZW50aXR5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5wYXJ0aWNpcGFudElkZW50aXR5ID0gbWVzc2FnZS5wYXJ0aWNpcGFudElkZW50aXR5KTtcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudE5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnBhcnRpY2lwYW50TmFtZSA9IG1lc3NhZ2UucGFydGljaXBhbnROYW1lKTtcbiAgICAgICAgbWVzc2FnZS5ieXBhc3NUcmFuc2NvZGluZyAhPT0gdW5kZWZpbmVkICYmIChvYmouYnlwYXNzVHJhbnNjb2RpbmcgPSBtZXNzYWdlLmJ5cGFzc1RyYW5zY29kaW5nKTtcbiAgICAgICAgbWVzc2FnZS5hdWRpbyAhPT0gdW5kZWZpbmVkICYmIChvYmouYXVkaW8gPSBtZXNzYWdlLmF1ZGlvID8gZXhwb3J0cy5JbmdyZXNzQXVkaW9PcHRpb25zLnRvSlNPTihtZXNzYWdlLmF1ZGlvKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UudmlkZW8gIT09IHVuZGVmaW5lZCAmJiAob2JqLnZpZGVvID0gbWVzc2FnZS52aWRlbyA/IGV4cG9ydHMuSW5ncmVzc1ZpZGVvT3B0aW9ucy50b0pTT04obWVzc2FnZS52aWRlbykgOiB1bmRlZmluZWQpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZztcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VDcmVhdGVJbmdyZXNzUmVxdWVzdCgpO1xuICAgICAgICBtZXNzYWdlLmlucHV0VHlwZSA9IChfYSA9IG9iamVjdC5pbnB1dFR5cGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDA7XG4gICAgICAgIG1lc3NhZ2UudXJsID0gKF9iID0gb2JqZWN0LnVybCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5uYW1lID0gKF9jID0gb2JqZWN0Lm5hbWUpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2Uucm9vbU5hbWUgPSAoX2QgPSBvYmplY3Qucm9vbU5hbWUpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSA9IChfZSA9IG9iamVjdC5wYXJ0aWNpcGFudElkZW50aXR5KSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50TmFtZSA9IChfZiA9IG9iamVjdC5wYXJ0aWNpcGFudE5hbWUpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuYnlwYXNzVHJhbnNjb2RpbmcgPSAoX2cgPSBvYmplY3QuYnlwYXNzVHJhbnNjb2RpbmcpICE9PSBudWxsICYmIF9nICE9PSB2b2lkIDAgPyBfZyA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLmF1ZGlvID0gKG9iamVjdC5hdWRpbyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hdWRpbyAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5JbmdyZXNzQXVkaW9PcHRpb25zLmZyb21QYXJ0aWFsKG9iamVjdC5hdWRpbylcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLnZpZGVvID0gKG9iamVjdC52aWRlbyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52aWRlbyAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5JbmdyZXNzVmlkZW9PcHRpb25zLmZyb21QYXJ0aWFsKG9iamVjdC52aWRlbylcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VJbmdyZXNzQXVkaW9PcHRpb25zKCkge1xuICAgIHJldHVybiB7IG5hbWU6IFwiXCIsIHNvdXJjZTogMCwgcHJlc2V0OiB1bmRlZmluZWQsIG9wdGlvbnM6IHVuZGVmaW5lZCB9O1xufVxuZXhwb3J0cy5JbmdyZXNzQXVkaW9PcHRpb25zID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UubmFtZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UubmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc291cmNlICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5zb3VyY2UgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTYpLmludDMyKG1lc3NhZ2Uuc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wcmVzZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkuaW50MzIobWVzc2FnZS5wcmVzZXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm9wdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5JbmdyZXNzQXVkaW9FbmNvZGluZ09wdGlvbnMuZW5jb2RlKG1lc3NhZ2Uub3B0aW9ucywgd3JpdGVyLnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VJbmdyZXNzQXVkaW9PcHRpb25zKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc291cmNlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wcmVzZXQgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm9wdGlvbnMgPSBleHBvcnRzLkluZ3Jlc3NBdWRpb0VuY29kaW5nT3B0aW9ucy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiBpc1NldChvYmplY3QubmFtZSkgPyBTdHJpbmcob2JqZWN0Lm5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIHNvdXJjZTogaXNTZXQob2JqZWN0LnNvdXJjZSkgPyBsaXZla2l0X21vZGVsc18xLnRyYWNrU291cmNlRnJvbUpTT04ob2JqZWN0LnNvdXJjZSkgOiAwLFxuICAgICAgICAgICAgcHJlc2V0OiBpc1NldChvYmplY3QucHJlc2V0KSA/IGluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0RnJvbUpTT04ob2JqZWN0LnByZXNldCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBvcHRpb25zOiBpc1NldChvYmplY3Qub3B0aW9ucykgPyBleHBvcnRzLkluZ3Jlc3NBdWRpb0VuY29kaW5nT3B0aW9ucy5mcm9tSlNPTihvYmplY3Qub3B0aW9ucykgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5uYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5uYW1lID0gbWVzc2FnZS5uYW1lKTtcbiAgICAgICAgbWVzc2FnZS5zb3VyY2UgIT09IHVuZGVmaW5lZCAmJiAob2JqLnNvdXJjZSA9IGxpdmVraXRfbW9kZWxzXzEudHJhY2tTb3VyY2VUb0pTT04obWVzc2FnZS5zb3VyY2UpKTtcbiAgICAgICAgbWVzc2FnZS5wcmVzZXQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5wcmVzZXQgPSBtZXNzYWdlLnByZXNldCAhPT0gdW5kZWZpbmVkID8gaW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXRUb0pTT04obWVzc2FnZS5wcmVzZXQpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5vcHRpb25zICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmoub3B0aW9ucyA9IG1lc3NhZ2Uub3B0aW9ucyA/IGV4cG9ydHMuSW5ncmVzc0F1ZGlvRW5jb2RpbmdPcHRpb25zLnRvSlNPTihtZXNzYWdlLm9wdGlvbnMpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VJbmdyZXNzQXVkaW9PcHRpb25zKCk7XG4gICAgICAgIG1lc3NhZ2UubmFtZSA9IChfYSA9IG9iamVjdC5uYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnNvdXJjZSA9IChfYiA9IG9iamVjdC5zb3VyY2UpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDA7XG4gICAgICAgIG1lc3NhZ2UucHJlc2V0ID0gKF9jID0gb2JqZWN0LnByZXNldCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLm9wdGlvbnMgPSAob2JqZWN0Lm9wdGlvbnMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Qub3B0aW9ucyAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5JbmdyZXNzQXVkaW9FbmNvZGluZ09wdGlvbnMuZnJvbVBhcnRpYWwob2JqZWN0Lm9wdGlvbnMpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlSW5ncmVzc1ZpZGVvT3B0aW9ucygpIHtcbiAgICByZXR1cm4geyBuYW1lOiBcIlwiLCBzb3VyY2U6IDAsIHByZXNldDogdW5kZWZpbmVkLCBvcHRpb25zOiB1bmRlZmluZWQgfTtcbn1cbmV4cG9ydHMuSW5ncmVzc1ZpZGVvT3B0aW9ucyA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLm5hbWUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLm5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc291cmNlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE2KS5pbnQzMihtZXNzYWdlLnNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucHJlc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjQpLmludDMyKG1lc3NhZ2UucHJlc2V0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5vcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuSW5ncmVzc1ZpZGVvRW5jb2RpbmdPcHRpb25zLmVuY29kZShtZXNzYWdlLm9wdGlvbnMsIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlSW5ncmVzc1ZpZGVvT3B0aW9ucygpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNvdXJjZSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucHJlc2V0ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5vcHRpb25zID0gZXhwb3J0cy5JbmdyZXNzVmlkZW9FbmNvZGluZ09wdGlvbnMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogaXNTZXQob2JqZWN0Lm5hbWUpID8gU3RyaW5nKG9iamVjdC5uYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBzb3VyY2U6IGlzU2V0KG9iamVjdC5zb3VyY2UpID8gbGl2ZWtpdF9tb2RlbHNfMS50cmFja1NvdXJjZUZyb21KU09OKG9iamVjdC5zb3VyY2UpIDogMCxcbiAgICAgICAgICAgIHByZXNldDogaXNTZXQob2JqZWN0LnByZXNldCkgPyBpbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldEZyb21KU09OKG9iamVjdC5wcmVzZXQpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgb3B0aW9uczogaXNTZXQob2JqZWN0Lm9wdGlvbnMpID8gZXhwb3J0cy5JbmdyZXNzVmlkZW9FbmNvZGluZ09wdGlvbnMuZnJvbUpTT04ob2JqZWN0Lm9wdGlvbnMpIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UubmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmoubmFtZSA9IG1lc3NhZ2UubmFtZSk7XG4gICAgICAgIG1lc3NhZ2Uuc291cmNlICE9PSB1bmRlZmluZWQgJiYgKG9iai5zb3VyY2UgPSBsaXZla2l0X21vZGVsc18xLnRyYWNrU291cmNlVG9KU09OKG1lc3NhZ2Uuc291cmNlKSk7XG4gICAgICAgIG1lc3NhZ2UucHJlc2V0ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmoucHJlc2V0ID0gbWVzc2FnZS5wcmVzZXQgIT09IHVuZGVmaW5lZCA/IGluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0VG9KU09OKG1lc3NhZ2UucHJlc2V0KSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2Uub3B0aW9ucyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLm9wdGlvbnMgPSBtZXNzYWdlLm9wdGlvbnMgPyBleHBvcnRzLkluZ3Jlc3NWaWRlb0VuY29kaW5nT3B0aW9ucy50b0pTT04obWVzc2FnZS5vcHRpb25zKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlSW5ncmVzc1ZpZGVvT3B0aW9ucygpO1xuICAgICAgICBtZXNzYWdlLm5hbWUgPSAoX2EgPSBvYmplY3QubmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5zb3VyY2UgPSAoX2IgPSBvYmplY3Quc291cmNlKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwO1xuICAgICAgICBtZXNzYWdlLnByZXNldCA9IChfYyA9IG9iamVjdC5wcmVzZXQpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5vcHRpb25zID0gKG9iamVjdC5vcHRpb25zICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0Lm9wdGlvbnMgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuSW5ncmVzc1ZpZGVvRW5jb2RpbmdPcHRpb25zLmZyb21QYXJ0aWFsKG9iamVjdC5vcHRpb25zKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUluZ3Jlc3NBdWRpb0VuY29kaW5nT3B0aW9ucygpIHtcbiAgICByZXR1cm4geyBhdWRpb0NvZGVjOiAwLCBiaXRyYXRlOiAwLCBkaXNhYmxlRHR4OiBmYWxzZSwgY2hhbm5lbHM6IDAgfTtcbn1cbmV4cG9ydHMuSW5ncmVzc0F1ZGlvRW5jb2RpbmdPcHRpb25zID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuYXVkaW9Db2RlYyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuYXVkaW9Db2RlYyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4KS5pbnQzMihtZXNzYWdlLmF1ZGlvQ29kZWMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmJpdHJhdGUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmJpdHJhdGUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTYpLnVpbnQzMihtZXNzYWdlLmJpdHJhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmRpc2FibGVEdHggPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjQpLmJvb2wobWVzc2FnZS5kaXNhYmxlRHR4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5jaGFubmVscyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuY2hhbm5lbHMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzIpLnVpbnQzMihtZXNzYWdlLmNoYW5uZWxzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VJbmdyZXNzQXVkaW9FbmNvZGluZ09wdGlvbnMoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmF1ZGlvQ29kZWMgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmJpdHJhdGUgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kaXNhYmxlRHR4ID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNoYW5uZWxzID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhdWRpb0NvZGVjOiBpc1NldChvYmplY3QuYXVkaW9Db2RlYykgPyBsaXZla2l0X21vZGVsc18xLmF1ZGlvQ29kZWNGcm9tSlNPTihvYmplY3QuYXVkaW9Db2RlYykgOiAwLFxuICAgICAgICAgICAgYml0cmF0ZTogaXNTZXQob2JqZWN0LmJpdHJhdGUpID8gTnVtYmVyKG9iamVjdC5iaXRyYXRlKSA6IDAsXG4gICAgICAgICAgICBkaXNhYmxlRHR4OiBpc1NldChvYmplY3QuZGlzYWJsZUR0eCkgPyBCb29sZWFuKG9iamVjdC5kaXNhYmxlRHR4KSA6IGZhbHNlLFxuICAgICAgICAgICAgY2hhbm5lbHM6IGlzU2V0KG9iamVjdC5jaGFubmVscykgPyBOdW1iZXIob2JqZWN0LmNoYW5uZWxzKSA6IDAsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5hdWRpb0NvZGVjICE9PSB1bmRlZmluZWQgJiYgKG9iai5hdWRpb0NvZGVjID0gbGl2ZWtpdF9tb2RlbHNfMS5hdWRpb0NvZGVjVG9KU09OKG1lc3NhZ2UuYXVkaW9Db2RlYykpO1xuICAgICAgICBtZXNzYWdlLmJpdHJhdGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmJpdHJhdGUgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuYml0cmF0ZSkpO1xuICAgICAgICBtZXNzYWdlLmRpc2FibGVEdHggIT09IHVuZGVmaW5lZCAmJiAob2JqLmRpc2FibGVEdHggPSBtZXNzYWdlLmRpc2FibGVEdHgpO1xuICAgICAgICBtZXNzYWdlLmNoYW5uZWxzICE9PSB1bmRlZmluZWQgJiYgKG9iai5jaGFubmVscyA9IE1hdGgucm91bmQobWVzc2FnZS5jaGFubmVscykpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VJbmdyZXNzQXVkaW9FbmNvZGluZ09wdGlvbnMoKTtcbiAgICAgICAgbWVzc2FnZS5hdWRpb0NvZGVjID0gKF9hID0gb2JqZWN0LmF1ZGlvQ29kZWMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDA7XG4gICAgICAgIG1lc3NhZ2UuYml0cmF0ZSA9IChfYiA9IG9iamVjdC5iaXRyYXRlKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwO1xuICAgICAgICBtZXNzYWdlLmRpc2FibGVEdHggPSAoX2MgPSBvYmplY3QuZGlzYWJsZUR0eCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2UuY2hhbm5lbHMgPSAoX2QgPSBvYmplY3QuY2hhbm5lbHMpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IDA7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUluZ3Jlc3NWaWRlb0VuY29kaW5nT3B0aW9ucygpIHtcbiAgICByZXR1cm4geyB2aWRlb0NvZGVjOiAwLCBmcmFtZVJhdGU6IDAsIGxheWVyczogW10gfTtcbn1cbmV4cG9ydHMuSW5ncmVzc1ZpZGVvRW5jb2RpbmdPcHRpb25zID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UudmlkZW9Db2RlYyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UudmlkZW9Db2RlYyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4KS5pbnQzMihtZXNzYWdlLnZpZGVvQ29kZWMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZyYW1lUmF0ZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZnJhbWVSYXRlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE3KS5kb3VibGUobWVzc2FnZS5mcmFtZVJhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmxheWVycyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UubGF5ZXJzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UubGF5ZXJzKSB7XG4gICAgICAgICAgICAgICAgbGl2ZWtpdF9tb2RlbHNfMS5WaWRlb0xheWVyLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUluZ3Jlc3NWaWRlb0VuY29kaW5nT3B0aW9ucygpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudmlkZW9Db2RlYyA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZnJhbWVSYXRlID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGF5ZXJzLnB1c2gobGl2ZWtpdF9tb2RlbHNfMS5WaWRlb0xheWVyLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2aWRlb0NvZGVjOiBpc1NldChvYmplY3QudmlkZW9Db2RlYykgPyBsaXZla2l0X21vZGVsc18xLnZpZGVvQ29kZWNGcm9tSlNPTihvYmplY3QudmlkZW9Db2RlYykgOiAwLFxuICAgICAgICAgICAgZnJhbWVSYXRlOiBpc1NldChvYmplY3QuZnJhbWVSYXRlKSA/IE51bWJlcihvYmplY3QuZnJhbWVSYXRlKSA6IDAsXG4gICAgICAgICAgICBsYXllcnM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmxheWVycykgPyBvYmplY3QubGF5ZXJzLm1hcCgoZSkgPT4gbGl2ZWtpdF9tb2RlbHNfMS5WaWRlb0xheWVyLmZyb21KU09OKGUpKSA6IFtdLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UudmlkZW9Db2RlYyAhPT0gdW5kZWZpbmVkICYmIChvYmoudmlkZW9Db2RlYyA9IGxpdmVraXRfbW9kZWxzXzEudmlkZW9Db2RlY1RvSlNPTihtZXNzYWdlLnZpZGVvQ29kZWMpKTtcbiAgICAgICAgbWVzc2FnZS5mcmFtZVJhdGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmZyYW1lUmF0ZSA9IG1lc3NhZ2UuZnJhbWVSYXRlKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UubGF5ZXJzKSB7XG4gICAgICAgICAgICBvYmoubGF5ZXJzID0gbWVzc2FnZS5sYXllcnMubWFwKChlKSA9PiBlID8gbGl2ZWtpdF9tb2RlbHNfMS5WaWRlb0xheWVyLnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmoubGF5ZXJzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VJbmdyZXNzVmlkZW9FbmNvZGluZ09wdGlvbnMoKTtcbiAgICAgICAgbWVzc2FnZS52aWRlb0NvZGVjID0gKF9hID0gb2JqZWN0LnZpZGVvQ29kZWMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDA7XG4gICAgICAgIG1lc3NhZ2UuZnJhbWVSYXRlID0gKF9iID0gb2JqZWN0LmZyYW1lUmF0ZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMDtcbiAgICAgICAgbWVzc2FnZS5sYXllcnMgPSAoKF9jID0gb2JqZWN0LmxheWVycykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLm1hcCgoZSkgPT4gbGl2ZWtpdF9tb2RlbHNfMS5WaWRlb0xheWVyLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUluZ3Jlc3NJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGluZ3Jlc3NJZDogXCJcIixcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgc3RyZWFtS2V5OiBcIlwiLFxuICAgICAgICB1cmw6IFwiXCIsXG4gICAgICAgIGlucHV0VHlwZTogMCxcbiAgICAgICAgYnlwYXNzVHJhbnNjb2Rpbmc6IGZhbHNlLFxuICAgICAgICBhdWRpbzogdW5kZWZpbmVkLFxuICAgICAgICB2aWRlbzogdW5kZWZpbmVkLFxuICAgICAgICByb29tTmFtZTogXCJcIixcbiAgICAgICAgcGFydGljaXBhbnRJZGVudGl0eTogXCJcIixcbiAgICAgICAgcGFydGljaXBhbnROYW1lOiBcIlwiLFxuICAgICAgICByZXVzYWJsZTogZmFsc2UsXG4gICAgICAgIHN0YXRlOiB1bmRlZmluZWQsXG4gICAgfTtcbn1cbmV4cG9ydHMuSW5ncmVzc0luZm8gPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5pbmdyZXNzSWQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmluZ3Jlc3NJZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UuaW5ncmVzc0lkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5uYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5uYW1lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zdHJlYW1LZXkgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnN0cmVhbUtleSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2Uuc3RyZWFtS2V5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS51cmwgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnVybCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigzNCkuc3RyaW5nKG1lc3NhZ2UudXJsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5pbnB1dFR5cGUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmlucHV0VHlwZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0MCkuaW50MzIobWVzc2FnZS5pbnB1dFR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmJ5cGFzc1RyYW5zY29kaW5nID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwNCkuYm9vbChtZXNzYWdlLmJ5cGFzc1RyYW5zY29kaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5hdWRpbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkluZ3Jlc3NBdWRpb09wdGlvbnMuZW5jb2RlKG1lc3NhZ2UuYXVkaW8sIHdyaXRlci51aW50MzIoNTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudmlkZW8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5JbmdyZXNzVmlkZW9PcHRpb25zLmVuY29kZShtZXNzYWdlLnZpZGVvLCB3cml0ZXIudWludDMyKDU4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb21OYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yb29tTmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig2Nikuc3RyaW5nKG1lc3NhZ2Uucm9vbU5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBhcnRpY2lwYW50SWRlbnRpdHkgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnBhcnRpY2lwYW50SWRlbnRpdHkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNzQpLnN0cmluZyhtZXNzYWdlLnBhcnRpY2lwYW50SWRlbnRpdHkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBhcnRpY2lwYW50TmFtZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UucGFydGljaXBhbnROYW1lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDgyKS5zdHJpbmcobWVzc2FnZS5wYXJ0aWNpcGFudE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJldXNhYmxlID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDg4KS5ib29sKG1lc3NhZ2UucmV1c2FibGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0YXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuSW5ncmVzc1N0YXRlLmVuY29kZShtZXNzYWdlLnN0YXRlLCB3cml0ZXIudWludDMyKDk4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUluZ3Jlc3NJbmZvKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbmdyZXNzSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RyZWFtS2V5ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXJsID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW5wdXRUeXBlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYnlwYXNzVHJhbnNjb2RpbmcgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYXVkaW8gPSBleHBvcnRzLkluZ3Jlc3NBdWRpb09wdGlvbnMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZpZGVvID0gZXhwb3J0cy5JbmdyZXNzVmlkZW9PcHRpb25zLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb29tTmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50SWRlbnRpdHkgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnROYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJldXNhYmxlID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdGF0ZSA9IGV4cG9ydHMuSW5ncmVzc1N0YXRlLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGluZ3Jlc3NJZDogaXNTZXQob2JqZWN0LmluZ3Jlc3NJZCkgPyBTdHJpbmcob2JqZWN0LmluZ3Jlc3NJZCkgOiBcIlwiLFxuICAgICAgICAgICAgbmFtZTogaXNTZXQob2JqZWN0Lm5hbWUpID8gU3RyaW5nKG9iamVjdC5uYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBzdHJlYW1LZXk6IGlzU2V0KG9iamVjdC5zdHJlYW1LZXkpID8gU3RyaW5nKG9iamVjdC5zdHJlYW1LZXkpIDogXCJcIixcbiAgICAgICAgICAgIHVybDogaXNTZXQob2JqZWN0LnVybCkgPyBTdHJpbmcob2JqZWN0LnVybCkgOiBcIlwiLFxuICAgICAgICAgICAgaW5wdXRUeXBlOiBpc1NldChvYmplY3QuaW5wdXRUeXBlKSA/IGluZ3Jlc3NJbnB1dEZyb21KU09OKG9iamVjdC5pbnB1dFR5cGUpIDogMCxcbiAgICAgICAgICAgIGJ5cGFzc1RyYW5zY29kaW5nOiBpc1NldChvYmplY3QuYnlwYXNzVHJhbnNjb2RpbmcpID8gQm9vbGVhbihvYmplY3QuYnlwYXNzVHJhbnNjb2RpbmcpIDogZmFsc2UsXG4gICAgICAgICAgICBhdWRpbzogaXNTZXQob2JqZWN0LmF1ZGlvKSA/IGV4cG9ydHMuSW5ncmVzc0F1ZGlvT3B0aW9ucy5mcm9tSlNPTihvYmplY3QuYXVkaW8pIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdmlkZW86IGlzU2V0KG9iamVjdC52aWRlbykgPyBleHBvcnRzLkluZ3Jlc3NWaWRlb09wdGlvbnMuZnJvbUpTT04ob2JqZWN0LnZpZGVvKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJvb21OYW1lOiBpc1NldChvYmplY3Qucm9vbU5hbWUpID8gU3RyaW5nKG9iamVjdC5yb29tTmFtZSkgOiBcIlwiLFxuICAgICAgICAgICAgcGFydGljaXBhbnRJZGVudGl0eTogaXNTZXQob2JqZWN0LnBhcnRpY2lwYW50SWRlbnRpdHkpID8gU3RyaW5nKG9iamVjdC5wYXJ0aWNpcGFudElkZW50aXR5KSA6IFwiXCIsXG4gICAgICAgICAgICBwYXJ0aWNpcGFudE5hbWU6IGlzU2V0KG9iamVjdC5wYXJ0aWNpcGFudE5hbWUpID8gU3RyaW5nKG9iamVjdC5wYXJ0aWNpcGFudE5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIHJldXNhYmxlOiBpc1NldChvYmplY3QucmV1c2FibGUpID8gQm9vbGVhbihvYmplY3QucmV1c2FibGUpIDogZmFsc2UsXG4gICAgICAgICAgICBzdGF0ZTogaXNTZXQob2JqZWN0LnN0YXRlKSA/IGV4cG9ydHMuSW5ncmVzc1N0YXRlLmZyb21KU09OKG9iamVjdC5zdGF0ZSkgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5pbmdyZXNzSWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmluZ3Jlc3NJZCA9IG1lc3NhZ2UuaW5ncmVzc0lkKTtcbiAgICAgICAgbWVzc2FnZS5uYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5uYW1lID0gbWVzc2FnZS5uYW1lKTtcbiAgICAgICAgbWVzc2FnZS5zdHJlYW1LZXkgIT09IHVuZGVmaW5lZCAmJiAob2JqLnN0cmVhbUtleSA9IG1lc3NhZ2Uuc3RyZWFtS2V5KTtcbiAgICAgICAgbWVzc2FnZS51cmwgIT09IHVuZGVmaW5lZCAmJiAob2JqLnVybCA9IG1lc3NhZ2UudXJsKTtcbiAgICAgICAgbWVzc2FnZS5pbnB1dFR5cGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmlucHV0VHlwZSA9IGluZ3Jlc3NJbnB1dFRvSlNPTihtZXNzYWdlLmlucHV0VHlwZSkpO1xuICAgICAgICBtZXNzYWdlLmJ5cGFzc1RyYW5zY29kaW5nICE9PSB1bmRlZmluZWQgJiYgKG9iai5ieXBhc3NUcmFuc2NvZGluZyA9IG1lc3NhZ2UuYnlwYXNzVHJhbnNjb2RpbmcpO1xuICAgICAgICBtZXNzYWdlLmF1ZGlvICE9PSB1bmRlZmluZWQgJiYgKG9iai5hdWRpbyA9IG1lc3NhZ2UuYXVkaW8gPyBleHBvcnRzLkluZ3Jlc3NBdWRpb09wdGlvbnMudG9KU09OKG1lc3NhZ2UuYXVkaW8pIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS52aWRlbyAhPT0gdW5kZWZpbmVkICYmIChvYmoudmlkZW8gPSBtZXNzYWdlLnZpZGVvID8gZXhwb3J0cy5JbmdyZXNzVmlkZW9PcHRpb25zLnRvSlNPTihtZXNzYWdlLnZpZGVvKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2Uucm9vbU5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnJvb21OYW1lID0gbWVzc2FnZS5yb29tTmFtZSk7XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSAhPT0gdW5kZWZpbmVkICYmIChvYmoucGFydGljaXBhbnRJZGVudGl0eSA9IG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSk7XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnROYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5wYXJ0aWNpcGFudE5hbWUgPSBtZXNzYWdlLnBhcnRpY2lwYW50TmFtZSk7XG4gICAgICAgIG1lc3NhZ2UucmV1c2FibGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnJldXNhYmxlID0gbWVzc2FnZS5yZXVzYWJsZSk7XG4gICAgICAgIG1lc3NhZ2Uuc3RhdGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnN0YXRlID0gbWVzc2FnZS5zdGF0ZSA/IGV4cG9ydHMuSW5ncmVzc1N0YXRlLnRvSlNPTihtZXNzYWdlLnN0YXRlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2osIF9rO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUluZ3Jlc3NJbmZvKCk7XG4gICAgICAgIG1lc3NhZ2UuaW5ncmVzc0lkID0gKF9hID0gb2JqZWN0LmluZ3Jlc3NJZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5uYW1lID0gKF9iID0gb2JqZWN0Lm5hbWUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2Uuc3RyZWFtS2V5ID0gKF9jID0gb2JqZWN0LnN0cmVhbUtleSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS51cmwgPSAoX2QgPSBvYmplY3QudXJsKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmlucHV0VHlwZSA9IChfZSA9IG9iamVjdC5pbnB1dFR5cGUpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IDA7XG4gICAgICAgIG1lc3NhZ2UuYnlwYXNzVHJhbnNjb2RpbmcgPSAoX2YgPSBvYmplY3QuYnlwYXNzVHJhbnNjb2RpbmcpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLmF1ZGlvID0gKG9iamVjdC5hdWRpbyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hdWRpbyAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5JbmdyZXNzQXVkaW9PcHRpb25zLmZyb21QYXJ0aWFsKG9iamVjdC5hdWRpbylcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLnZpZGVvID0gKG9iamVjdC52aWRlbyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52aWRlbyAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5JbmdyZXNzVmlkZW9PcHRpb25zLmZyb21QYXJ0aWFsKG9iamVjdC52aWRlbylcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLnJvb21OYW1lID0gKF9nID0gb2JqZWN0LnJvb21OYW1lKSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50SWRlbnRpdHkgPSAoX2ggPSBvYmplY3QucGFydGljaXBhbnRJZGVudGl0eSkgIT09IG51bGwgJiYgX2ggIT09IHZvaWQgMCA/IF9oIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudE5hbWUgPSAoX2ogPSBvYmplY3QucGFydGljaXBhbnROYW1lKSAhPT0gbnVsbCAmJiBfaiAhPT0gdm9pZCAwID8gX2ogOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnJldXNhYmxlID0gKF9rID0gb2JqZWN0LnJldXNhYmxlKSAhPT0gbnVsbCAmJiBfayAhPT0gdm9pZCAwID8gX2sgOiBmYWxzZTtcbiAgICAgICAgbWVzc2FnZS5zdGF0ZSA9IChvYmplY3Quc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc3RhdGUgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuSW5ncmVzc1N0YXRlLmZyb21QYXJ0aWFsKG9iamVjdC5zdGF0ZSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VJbmdyZXNzU3RhdGUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdHVzOiAwLFxuICAgICAgICBlcnJvcjogXCJcIixcbiAgICAgICAgdmlkZW86IHVuZGVmaW5lZCxcbiAgICAgICAgYXVkaW86IHVuZGVmaW5lZCxcbiAgICAgICAgcm9vbUlkOiBcIlwiLFxuICAgICAgICBzdGFydGVkQXQ6IDAsXG4gICAgICAgIGVuZGVkQXQ6IDAsXG4gICAgICAgIHJlc291cmNlSWQ6IFwiXCIsXG4gICAgICAgIHRyYWNrczogW10sXG4gICAgfTtcbn1cbmV4cG9ydHMuSW5ncmVzc1N0YXRlID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhdHVzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5zdGF0dXMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoOCkuaW50MzIobWVzc2FnZS5zdGF0dXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmVycm9yICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5lcnJvciAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnZpZGVvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuSW5wdXRWaWRlb1N0YXRlLmVuY29kZShtZXNzYWdlLnZpZGVvLCB3cml0ZXIudWludDMyKDI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmF1ZGlvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuSW5wdXRBdWRpb1N0YXRlLmVuY29kZShtZXNzYWdlLmF1ZGlvLCB3cml0ZXIudWludDMyKDM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb21JZCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uucm9vbUlkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQyKS5zdHJpbmcobWVzc2FnZS5yb29tSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0ZWRBdCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc3RhcnRlZEF0ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDU2KS5pbnQ2NChtZXNzYWdlLnN0YXJ0ZWRBdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZW5kZWRBdCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZW5kZWRBdCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig2NCkuaW50NjQobWVzc2FnZS5lbmRlZEF0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5yZXNvdXJjZUlkICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yZXNvdXJjZUlkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDc0KS5zdHJpbmcobWVzc2FnZS5yZXNvdXJjZUlkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS50cmFja3MgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnRyYWNrcy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLnRyYWNrcykge1xuICAgICAgICAgICAgICAgIGxpdmVraXRfbW9kZWxzXzEuVHJhY2tJbmZvLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDUwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUluZ3Jlc3NTdGF0ZSgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhdHVzID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lcnJvciA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZpZGVvID0gZXhwb3J0cy5JbnB1dFZpZGVvU3RhdGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmF1ZGlvID0gZXhwb3J0cy5JbnB1dEF1ZGlvU3RhdGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvb21JZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXJ0ZWRBdCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRlZEF0ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlc291cmNlSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmFja3MucHVzaChsaXZla2l0X21vZGVsc18xLlRyYWNrSW5mby5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBpc1NldChvYmplY3Quc3RhdHVzKSA/IGluZ3Jlc3NTdGF0ZV9TdGF0dXNGcm9tSlNPTihvYmplY3Quc3RhdHVzKSA6IDAsXG4gICAgICAgICAgICBlcnJvcjogaXNTZXQob2JqZWN0LmVycm9yKSA/IFN0cmluZyhvYmplY3QuZXJyb3IpIDogXCJcIixcbiAgICAgICAgICAgIHZpZGVvOiBpc1NldChvYmplY3QudmlkZW8pID8gZXhwb3J0cy5JbnB1dFZpZGVvU3RhdGUuZnJvbUpTT04ob2JqZWN0LnZpZGVvKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGF1ZGlvOiBpc1NldChvYmplY3QuYXVkaW8pID8gZXhwb3J0cy5JbnB1dEF1ZGlvU3RhdGUuZnJvbUpTT04ob2JqZWN0LmF1ZGlvKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJvb21JZDogaXNTZXQob2JqZWN0LnJvb21JZCkgPyBTdHJpbmcob2JqZWN0LnJvb21JZCkgOiBcIlwiLFxuICAgICAgICAgICAgc3RhcnRlZEF0OiBpc1NldChvYmplY3Quc3RhcnRlZEF0KSA/IE51bWJlcihvYmplY3Quc3RhcnRlZEF0KSA6IDAsXG4gICAgICAgICAgICBlbmRlZEF0OiBpc1NldChvYmplY3QuZW5kZWRBdCkgPyBOdW1iZXIob2JqZWN0LmVuZGVkQXQpIDogMCxcbiAgICAgICAgICAgIHJlc291cmNlSWQ6IGlzU2V0KG9iamVjdC5yZXNvdXJjZUlkKSA/IFN0cmluZyhvYmplY3QucmVzb3VyY2VJZCkgOiBcIlwiLFxuICAgICAgICAgICAgdHJhY2tzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC50cmFja3MpID8gb2JqZWN0LnRyYWNrcy5tYXAoKGUpID0+IGxpdmVraXRfbW9kZWxzXzEuVHJhY2tJbmZvLmZyb21KU09OKGUpKSA6IFtdLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2Uuc3RhdHVzICE9PSB1bmRlZmluZWQgJiYgKG9iai5zdGF0dXMgPSBpbmdyZXNzU3RhdGVfU3RhdHVzVG9KU09OKG1lc3NhZ2Uuc3RhdHVzKSk7XG4gICAgICAgIG1lc3NhZ2UuZXJyb3IgIT09IHVuZGVmaW5lZCAmJiAob2JqLmVycm9yID0gbWVzc2FnZS5lcnJvcik7XG4gICAgICAgIG1lc3NhZ2UudmlkZW8gIT09IHVuZGVmaW5lZCAmJiAob2JqLnZpZGVvID0gbWVzc2FnZS52aWRlbyA/IGV4cG9ydHMuSW5wdXRWaWRlb1N0YXRlLnRvSlNPTihtZXNzYWdlLnZpZGVvKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UuYXVkaW8gIT09IHVuZGVmaW5lZCAmJiAob2JqLmF1ZGlvID0gbWVzc2FnZS5hdWRpbyA/IGV4cG9ydHMuSW5wdXRBdWRpb1N0YXRlLnRvSlNPTihtZXNzYWdlLmF1ZGlvKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2Uucm9vbUlkICE9PSB1bmRlZmluZWQgJiYgKG9iai5yb29tSWQgPSBtZXNzYWdlLnJvb21JZCk7XG4gICAgICAgIG1lc3NhZ2Uuc3RhcnRlZEF0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5zdGFydGVkQXQgPSBNYXRoLnJvdW5kKG1lc3NhZ2Uuc3RhcnRlZEF0KSk7XG4gICAgICAgIG1lc3NhZ2UuZW5kZWRBdCAhPT0gdW5kZWZpbmVkICYmIChvYmouZW5kZWRBdCA9IE1hdGgucm91bmQobWVzc2FnZS5lbmRlZEF0KSk7XG4gICAgICAgIG1lc3NhZ2UucmVzb3VyY2VJZCAhPT0gdW5kZWZpbmVkICYmIChvYmoucmVzb3VyY2VJZCA9IG1lc3NhZ2UucmVzb3VyY2VJZCk7XG4gICAgICAgIGlmIChtZXNzYWdlLnRyYWNrcykge1xuICAgICAgICAgICAgb2JqLnRyYWNrcyA9IG1lc3NhZ2UudHJhY2tzLm1hcCgoZSkgPT4gZSA/IGxpdmVraXRfbW9kZWxzXzEuVHJhY2tJbmZvLnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmoudHJhY2tzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2c7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlSW5ncmVzc1N0YXRlKCk7XG4gICAgICAgIG1lc3NhZ2Uuc3RhdHVzID0gKF9hID0gb2JqZWN0LnN0YXR1cykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcbiAgICAgICAgbWVzc2FnZS5lcnJvciA9IChfYiA9IG9iamVjdC5lcnJvcikgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS52aWRlbyA9IChvYmplY3QudmlkZW8gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmlkZW8gIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuSW5wdXRWaWRlb1N0YXRlLmZyb21QYXJ0aWFsKG9iamVjdC52aWRlbylcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmF1ZGlvID0gKG9iamVjdC5hdWRpbyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hdWRpbyAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5JbnB1dEF1ZGlvU3RhdGUuZnJvbVBhcnRpYWwob2JqZWN0LmF1ZGlvKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2Uucm9vbUlkID0gKF9jID0gb2JqZWN0LnJvb21JZCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5zdGFydGVkQXQgPSAoX2QgPSBvYmplY3Quc3RhcnRlZEF0KSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAwO1xuICAgICAgICBtZXNzYWdlLmVuZGVkQXQgPSAoX2UgPSBvYmplY3QuZW5kZWRBdCkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogMDtcbiAgICAgICAgbWVzc2FnZS5yZXNvdXJjZUlkID0gKF9mID0gb2JqZWN0LnJlc291cmNlSWQpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UudHJhY2tzID0gKChfZyA9IG9iamVjdC50cmFja3MpID09PSBudWxsIHx8IF9nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZy5tYXAoKGUpID0+IGxpdmVraXRfbW9kZWxzXzEuVHJhY2tJbmZvLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUlucHV0VmlkZW9TdGF0ZSgpIHtcbiAgICByZXR1cm4geyBtaW1lVHlwZTogXCJcIiwgYXZlcmFnZUJpdHJhdGU6IDAsIHdpZHRoOiAwLCBoZWlnaHQ6IDAsIGZyYW1lcmF0ZTogMCB9O1xufVxuZXhwb3J0cy5JbnB1dFZpZGVvU3RhdGUgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5taW1lVHlwZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UubWltZVR5cGUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLm1pbWVUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5hdmVyYWdlQml0cmF0ZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuYXZlcmFnZUJpdHJhdGUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTYpLnVpbnQzMihtZXNzYWdlLmF2ZXJhZ2VCaXRyYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS53aWR0aCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uud2lkdGggIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjQpLnVpbnQzMihtZXNzYWdlLndpZHRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmhlaWdodCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigzMikudWludDMyKG1lc3NhZ2UuaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5mcmFtZXJhdGUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmZyYW1lcmF0ZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0MSkuZG91YmxlKG1lc3NhZ2UuZnJhbWVyYXRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VJbnB1dFZpZGVvU3RhdGUoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1pbWVUeXBlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYXZlcmFnZUJpdHJhdGUgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS53aWR0aCA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmhlaWdodCA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZyYW1lcmF0ZSA9IHJlYWRlci5kb3VibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWltZVR5cGU6IGlzU2V0KG9iamVjdC5taW1lVHlwZSkgPyBTdHJpbmcob2JqZWN0Lm1pbWVUeXBlKSA6IFwiXCIsXG4gICAgICAgICAgICBhdmVyYWdlQml0cmF0ZTogaXNTZXQob2JqZWN0LmF2ZXJhZ2VCaXRyYXRlKSA/IE51bWJlcihvYmplY3QuYXZlcmFnZUJpdHJhdGUpIDogMCxcbiAgICAgICAgICAgIHdpZHRoOiBpc1NldChvYmplY3Qud2lkdGgpID8gTnVtYmVyKG9iamVjdC53aWR0aCkgOiAwLFxuICAgICAgICAgICAgaGVpZ2h0OiBpc1NldChvYmplY3QuaGVpZ2h0KSA/IE51bWJlcihvYmplY3QuaGVpZ2h0KSA6IDAsXG4gICAgICAgICAgICBmcmFtZXJhdGU6IGlzU2V0KG9iamVjdC5mcmFtZXJhdGUpID8gTnVtYmVyKG9iamVjdC5mcmFtZXJhdGUpIDogMCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLm1pbWVUeXBlICE9PSB1bmRlZmluZWQgJiYgKG9iai5taW1lVHlwZSA9IG1lc3NhZ2UubWltZVR5cGUpO1xuICAgICAgICBtZXNzYWdlLmF2ZXJhZ2VCaXRyYXRlICE9PSB1bmRlZmluZWQgJiYgKG9iai5hdmVyYWdlQml0cmF0ZSA9IE1hdGgucm91bmQobWVzc2FnZS5hdmVyYWdlQml0cmF0ZSkpO1xuICAgICAgICBtZXNzYWdlLndpZHRoICE9PSB1bmRlZmluZWQgJiYgKG9iai53aWR0aCA9IE1hdGgucm91bmQobWVzc2FnZS53aWR0aCkpO1xuICAgICAgICBtZXNzYWdlLmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIChvYmouaGVpZ2h0ID0gTWF0aC5yb3VuZChtZXNzYWdlLmhlaWdodCkpO1xuICAgICAgICBtZXNzYWdlLmZyYW1lcmF0ZSAhPT0gdW5kZWZpbmVkICYmIChvYmouZnJhbWVyYXRlID0gbWVzc2FnZS5mcmFtZXJhdGUpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlSW5wdXRWaWRlb1N0YXRlKCk7XG4gICAgICAgIG1lc3NhZ2UubWltZVR5cGUgPSAoX2EgPSBvYmplY3QubWltZVR5cGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuYXZlcmFnZUJpdHJhdGUgPSAoX2IgPSBvYmplY3QuYXZlcmFnZUJpdHJhdGUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDA7XG4gICAgICAgIG1lc3NhZ2Uud2lkdGggPSAoX2MgPSBvYmplY3Qud2lkdGgpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IDA7XG4gICAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gKF9kID0gb2JqZWN0LmhlaWdodCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogMDtcbiAgICAgICAgbWVzc2FnZS5mcmFtZXJhdGUgPSAoX2UgPSBvYmplY3QuZnJhbWVyYXRlKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiAwO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VJbnB1dEF1ZGlvU3RhdGUoKSB7XG4gICAgcmV0dXJuIHsgbWltZVR5cGU6IFwiXCIsIGF2ZXJhZ2VCaXRyYXRlOiAwLCBjaGFubmVsczogMCwgc2FtcGxlUmF0ZTogMCB9O1xufVxuZXhwb3J0cy5JbnB1dEF1ZGlvU3RhdGUgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5taW1lVHlwZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UubWltZVR5cGUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLm1pbWVUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5hdmVyYWdlQml0cmF0ZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuYXZlcmFnZUJpdHJhdGUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTYpLnVpbnQzMihtZXNzYWdlLmF2ZXJhZ2VCaXRyYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5jaGFubmVscyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuY2hhbm5lbHMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjQpLnVpbnQzMihtZXNzYWdlLmNoYW5uZWxzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zYW1wbGVSYXRlICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5zYW1wbGVSYXRlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDMyKS51aW50MzIobWVzc2FnZS5zYW1wbGVSYXRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VJbnB1dEF1ZGlvU3RhdGUoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1pbWVUeXBlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYXZlcmFnZUJpdHJhdGUgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jaGFubmVscyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNhbXBsZVJhdGUgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1pbWVUeXBlOiBpc1NldChvYmplY3QubWltZVR5cGUpID8gU3RyaW5nKG9iamVjdC5taW1lVHlwZSkgOiBcIlwiLFxuICAgICAgICAgICAgYXZlcmFnZUJpdHJhdGU6IGlzU2V0KG9iamVjdC5hdmVyYWdlQml0cmF0ZSkgPyBOdW1iZXIob2JqZWN0LmF2ZXJhZ2VCaXRyYXRlKSA6IDAsXG4gICAgICAgICAgICBjaGFubmVsczogaXNTZXQob2JqZWN0LmNoYW5uZWxzKSA/IE51bWJlcihvYmplY3QuY2hhbm5lbHMpIDogMCxcbiAgICAgICAgICAgIHNhbXBsZVJhdGU6IGlzU2V0KG9iamVjdC5zYW1wbGVSYXRlKSA/IE51bWJlcihvYmplY3Quc2FtcGxlUmF0ZSkgOiAwLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UubWltZVR5cGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLm1pbWVUeXBlID0gbWVzc2FnZS5taW1lVHlwZSk7XG4gICAgICAgIG1lc3NhZ2UuYXZlcmFnZUJpdHJhdGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmF2ZXJhZ2VCaXRyYXRlID0gTWF0aC5yb3VuZChtZXNzYWdlLmF2ZXJhZ2VCaXRyYXRlKSk7XG4gICAgICAgIG1lc3NhZ2UuY2hhbm5lbHMgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNoYW5uZWxzID0gTWF0aC5yb3VuZChtZXNzYWdlLmNoYW5uZWxzKSk7XG4gICAgICAgIG1lc3NhZ2Uuc2FtcGxlUmF0ZSAhPT0gdW5kZWZpbmVkICYmIChvYmouc2FtcGxlUmF0ZSA9IE1hdGgucm91bmQobWVzc2FnZS5zYW1wbGVSYXRlKSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUlucHV0QXVkaW9TdGF0ZSgpO1xuICAgICAgICBtZXNzYWdlLm1pbWVUeXBlID0gKF9hID0gb2JqZWN0Lm1pbWVUeXBlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmF2ZXJhZ2VCaXRyYXRlID0gKF9iID0gb2JqZWN0LmF2ZXJhZ2VCaXRyYXRlKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwO1xuICAgICAgICBtZXNzYWdlLmNoYW5uZWxzID0gKF9jID0gb2JqZWN0LmNoYW5uZWxzKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAwO1xuICAgICAgICBtZXNzYWdlLnNhbXBsZVJhdGUgPSAoX2QgPSBvYmplY3Quc2FtcGxlUmF0ZSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogMDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVXBkYXRlSW5ncmVzc1JlcXVlc3QoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5ncmVzc0lkOiBcIlwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICByb29tTmFtZTogXCJcIixcbiAgICAgICAgcGFydGljaXBhbnRJZGVudGl0eTogXCJcIixcbiAgICAgICAgcGFydGljaXBhbnROYW1lOiBcIlwiLFxuICAgICAgICBieXBhc3NUcmFuc2NvZGluZzogdW5kZWZpbmVkLFxuICAgICAgICBhdWRpbzogdW5kZWZpbmVkLFxuICAgICAgICB2aWRlbzogdW5kZWZpbmVkLFxuICAgIH07XG59XG5leHBvcnRzLlVwZGF0ZUluZ3Jlc3NSZXF1ZXN0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuaW5ncmVzc0lkICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5pbmdyZXNzSWQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLmluZ3Jlc3NJZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubmFtZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UubmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vbU5hbWUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnJvb21OYW1lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5yb29tTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigzNCkuc3RyaW5nKG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucGFydGljaXBhbnROYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5wYXJ0aWNpcGFudE5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDIpLnN0cmluZyhtZXNzYWdlLnBhcnRpY2lwYW50TmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYnlwYXNzVHJhbnNjb2RpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig2NCkuYm9vbChtZXNzYWdlLmJ5cGFzc1RyYW5zY29kaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5hdWRpbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkluZ3Jlc3NBdWRpb09wdGlvbnMuZW5jb2RlKG1lc3NhZ2UuYXVkaW8sIHdyaXRlci51aW50MzIoNTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudmlkZW8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5JbmdyZXNzVmlkZW9PcHRpb25zLmVuY29kZShtZXNzYWdlLnZpZGVvLCB3cml0ZXIudWludDMyKDU4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVVwZGF0ZUluZ3Jlc3NSZXF1ZXN0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbmdyZXNzSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbU5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudElkZW50aXR5ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnROYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYnlwYXNzVHJhbnNjb2RpbmcgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYXVkaW8gPSBleHBvcnRzLkluZ3Jlc3NBdWRpb09wdGlvbnMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZpZGVvID0gZXhwb3J0cy5JbmdyZXNzVmlkZW9PcHRpb25zLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGluZ3Jlc3NJZDogaXNTZXQob2JqZWN0LmluZ3Jlc3NJZCkgPyBTdHJpbmcob2JqZWN0LmluZ3Jlc3NJZCkgOiBcIlwiLFxuICAgICAgICAgICAgbmFtZTogaXNTZXQob2JqZWN0Lm5hbWUpID8gU3RyaW5nKG9iamVjdC5uYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICByb29tTmFtZTogaXNTZXQob2JqZWN0LnJvb21OYW1lKSA/IFN0cmluZyhvYmplY3Qucm9vbU5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIHBhcnRpY2lwYW50SWRlbnRpdHk6IGlzU2V0KG9iamVjdC5wYXJ0aWNpcGFudElkZW50aXR5KSA/IFN0cmluZyhvYmplY3QucGFydGljaXBhbnRJZGVudGl0eSkgOiBcIlwiLFxuICAgICAgICAgICAgcGFydGljaXBhbnROYW1lOiBpc1NldChvYmplY3QucGFydGljaXBhbnROYW1lKSA/IFN0cmluZyhvYmplY3QucGFydGljaXBhbnROYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBieXBhc3NUcmFuc2NvZGluZzogaXNTZXQob2JqZWN0LmJ5cGFzc1RyYW5zY29kaW5nKSA/IEJvb2xlYW4ob2JqZWN0LmJ5cGFzc1RyYW5zY29kaW5nKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGF1ZGlvOiBpc1NldChvYmplY3QuYXVkaW8pID8gZXhwb3J0cy5JbmdyZXNzQXVkaW9PcHRpb25zLmZyb21KU09OKG9iamVjdC5hdWRpbykgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB2aWRlbzogaXNTZXQob2JqZWN0LnZpZGVvKSA/IGV4cG9ydHMuSW5ncmVzc1ZpZGVvT3B0aW9ucy5mcm9tSlNPTihvYmplY3QudmlkZW8pIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UuaW5ncmVzc0lkICE9PSB1bmRlZmluZWQgJiYgKG9iai5pbmdyZXNzSWQgPSBtZXNzYWdlLmluZ3Jlc3NJZCk7XG4gICAgICAgIG1lc3NhZ2UubmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmoubmFtZSA9IG1lc3NhZ2UubmFtZSk7XG4gICAgICAgIG1lc3NhZ2Uucm9vbU5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnJvb21OYW1lID0gbWVzc2FnZS5yb29tTmFtZSk7XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSAhPT0gdW5kZWZpbmVkICYmIChvYmoucGFydGljaXBhbnRJZGVudGl0eSA9IG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSk7XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnROYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5wYXJ0aWNpcGFudE5hbWUgPSBtZXNzYWdlLnBhcnRpY2lwYW50TmFtZSk7XG4gICAgICAgIG1lc3NhZ2UuYnlwYXNzVHJhbnNjb2RpbmcgIT09IHVuZGVmaW5lZCAmJiAob2JqLmJ5cGFzc1RyYW5zY29kaW5nID0gbWVzc2FnZS5ieXBhc3NUcmFuc2NvZGluZyk7XG4gICAgICAgIG1lc3NhZ2UuYXVkaW8gIT09IHVuZGVmaW5lZCAmJiAob2JqLmF1ZGlvID0gbWVzc2FnZS5hdWRpbyA/IGV4cG9ydHMuSW5ncmVzc0F1ZGlvT3B0aW9ucy50b0pTT04obWVzc2FnZS5hdWRpbykgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLnZpZGVvICE9PSB1bmRlZmluZWQgJiYgKG9iai52aWRlbyA9IG1lc3NhZ2UudmlkZW8gPyBleHBvcnRzLkluZ3Jlc3NWaWRlb09wdGlvbnMudG9KU09OKG1lc3NhZ2UudmlkZW8pIDogdW5kZWZpbmVkKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VVcGRhdGVJbmdyZXNzUmVxdWVzdCgpO1xuICAgICAgICBtZXNzYWdlLmluZ3Jlc3NJZCA9IChfYSA9IG9iamVjdC5pbmdyZXNzSWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UubmFtZSA9IChfYiA9IG9iamVjdC5uYW1lKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnJvb21OYW1lID0gKF9jID0gb2JqZWN0LnJvb21OYW1lKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50SWRlbnRpdHkgPSAoX2QgPSBvYmplY3QucGFydGljaXBhbnRJZGVudGl0eSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudE5hbWUgPSAoX2UgPSBvYmplY3QucGFydGljaXBhbnROYW1lKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmJ5cGFzc1RyYW5zY29kaW5nID0gKF9mID0gb2JqZWN0LmJ5cGFzc1RyYW5zY29kaW5nKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuYXVkaW8gPSAob2JqZWN0LmF1ZGlvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmF1ZGlvICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkluZ3Jlc3NBdWRpb09wdGlvbnMuZnJvbVBhcnRpYWwob2JqZWN0LmF1ZGlvKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UudmlkZW8gPSAob2JqZWN0LnZpZGVvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZpZGVvICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkluZ3Jlc3NWaWRlb09wdGlvbnMuZnJvbVBhcnRpYWwob2JqZWN0LnZpZGVvKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUxpc3RJbmdyZXNzUmVxdWVzdCgpIHtcbiAgICByZXR1cm4geyByb29tTmFtZTogXCJcIiwgaW5ncmVzc0lkOiBcIlwiIH07XG59XG5leHBvcnRzLkxpc3RJbmdyZXNzUmVxdWVzdCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb21OYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yb29tTmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2Uucm9vbU5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmluZ3Jlc3NJZCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaW5ncmVzc0lkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5pbmdyZXNzSWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUxpc3RJbmdyZXNzUmVxdWVzdCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbU5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbmdyZXNzSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJvb21OYW1lOiBpc1NldChvYmplY3Qucm9vbU5hbWUpID8gU3RyaW5nKG9iamVjdC5yb29tTmFtZSkgOiBcIlwiLFxuICAgICAgICAgICAgaW5ncmVzc0lkOiBpc1NldChvYmplY3QuaW5ncmVzc0lkKSA/IFN0cmluZyhvYmplY3QuaW5ncmVzc0lkKSA6IFwiXCIsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5yb29tTmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmoucm9vbU5hbWUgPSBtZXNzYWdlLnJvb21OYW1lKTtcbiAgICAgICAgbWVzc2FnZS5pbmdyZXNzSWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmluZ3Jlc3NJZCA9IG1lc3NhZ2UuaW5ncmVzc0lkKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUxpc3RJbmdyZXNzUmVxdWVzdCgpO1xuICAgICAgICBtZXNzYWdlLnJvb21OYW1lID0gKF9hID0gb2JqZWN0LnJvb21OYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmluZ3Jlc3NJZCA9IChfYiA9IG9iamVjdC5pbmdyZXNzSWQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUxpc3RJbmdyZXNzUmVzcG9uc2UoKSB7XG4gICAgcmV0dXJuIHsgaXRlbXM6IFtdIH07XG59XG5leHBvcnRzLkxpc3RJbmdyZXNzUmVzcG9uc2UgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5pdGVtcyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaXRlbXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5pdGVtcykge1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuSW5ncmVzc0luZm8uZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTGlzdEluZ3Jlc3NSZXNwb25zZSgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaXRlbXMucHVzaChleHBvcnRzLkluZ3Jlc3NJbmZvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7IGl0ZW1zOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5pdGVtcykgPyBvYmplY3QuaXRlbXMubWFwKChlKSA9PiBleHBvcnRzLkluZ3Jlc3NJbmZvLmZyb21KU09OKGUpKSA6IFtdIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuaXRlbXMpIHtcbiAgICAgICAgICAgIG9iai5pdGVtcyA9IG1lc3NhZ2UuaXRlbXMubWFwKChlKSA9PiBlID8gZXhwb3J0cy5JbmdyZXNzSW5mby50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLml0ZW1zID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTGlzdEluZ3Jlc3NSZXNwb25zZSgpO1xuICAgICAgICBtZXNzYWdlLml0ZW1zID0gKChfYSA9IG9iamVjdC5pdGVtcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hcCgoZSkgPT4gZXhwb3J0cy5JbmdyZXNzSW5mby5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VEZWxldGVJbmdyZXNzUmVxdWVzdCgpIHtcbiAgICByZXR1cm4geyBpbmdyZXNzSWQ6IFwiXCIgfTtcbn1cbmV4cG9ydHMuRGVsZXRlSW5ncmVzc1JlcXVlc3QgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5pbmdyZXNzSWQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmluZ3Jlc3NJZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UuaW5ncmVzc0lkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VEZWxldGVJbmdyZXNzUmVxdWVzdCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW5ncmVzc0lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7IGluZ3Jlc3NJZDogaXNTZXQob2JqZWN0LmluZ3Jlc3NJZCkgPyBTdHJpbmcob2JqZWN0LmluZ3Jlc3NJZCkgOiBcIlwiIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5pbmdyZXNzSWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmluZ3Jlc3NJZCA9IG1lc3NhZ2UuaW5ncmVzc0lkKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlRGVsZXRlSW5ncmVzc1JlcXVlc3QoKTtcbiAgICAgICAgbWVzc2FnZS5pbmdyZXNzSWQgPSAoX2EgPSBvYmplY3QuaW5ncmVzc0lkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbnZhciBnbG9iYWxUaGlzID0gKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbFRoaXM7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG4gICAgdGhyb3cgXCJVbmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3RcIjtcbn0pKCk7XG5mdW5jdGlvbiBsb25nVG9OdW1iZXIobG9uZykge1xuICAgIGlmIChsb25nLmd0KE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSkge1xuICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcIlZhbHVlIGlzIGxhcmdlciB0aGFuIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSXCIpO1xuICAgIH1cbiAgICByZXR1cm4gbG9uZy50b051bWJlcigpO1xufVxuaWYgKG1pbmltYWxfMS5kZWZhdWx0LnV0aWwuTG9uZyAhPT0gbG9uZ18xLmRlZmF1bHQpIHtcbiAgICBtaW5pbWFsXzEuZGVmYXVsdC51dGlsLkxvbmcgPSBsb25nXzEuZGVmYXVsdDtcbiAgICBtaW5pbWFsXzEuZGVmYXVsdC5jb25maWd1cmUoKTtcbn1cbmZ1bmN0aW9uIGlzU2V0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXZla2l0X2luZ3Jlc3MuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_ingress.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_models.js":
/*!**********************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/proto/livekit_models.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Room = exports.clientInfo_SDKToJSON = exports.clientInfo_SDKFromJSON = exports.ClientInfo_SDK = exports.serverInfo_EditionToJSON = exports.serverInfo_EditionFromJSON = exports.ServerInfo_Edition = exports.dataPacket_KindToJSON = exports.dataPacket_KindFromJSON = exports.DataPacket_Kind = exports.encryption_TypeToJSON = exports.encryption_TypeFromJSON = exports.Encryption_Type = exports.participantInfo_StateToJSON = exports.participantInfo_StateFromJSON = exports.ParticipantInfo_State = exports.subscriptionErrorToJSON = exports.subscriptionErrorFromJSON = exports.SubscriptionError = exports.reconnectReasonToJSON = exports.reconnectReasonFromJSON = exports.ReconnectReason = exports.disconnectReasonToJSON = exports.disconnectReasonFromJSON = exports.DisconnectReason = exports.clientConfigSettingToJSON = exports.clientConfigSettingFromJSON = exports.ClientConfigSetting = exports.connectionQualityToJSON = exports.connectionQualityFromJSON = exports.ConnectionQuality = exports.videoQualityToJSON = exports.videoQualityFromJSON = exports.VideoQuality = exports.trackSourceToJSON = exports.trackSourceFromJSON = exports.TrackSource = exports.trackTypeToJSON = exports.trackTypeFromJSON = exports.TrackType = exports.imageCodecToJSON = exports.imageCodecFromJSON = exports.ImageCodec = exports.videoCodecToJSON = exports.videoCodecFromJSON = exports.VideoCodec = exports.audioCodecToJSON = exports.audioCodecFromJSON = exports.AudioCodec = exports.protobufPackage = void 0;\nexports.TimedVersion = exports.RTPStats_GapHistogramEntry = exports.RTPStats = exports.RTPDrift = exports.DisabledCodecs = exports.VideoConfiguration = exports.ClientConfiguration = exports.ClientInfo = exports.ServerInfo = exports.ParticipantTracks = exports.UserPacket = exports.SpeakerInfo = exports.ActiveSpeakerUpdate = exports.DataPacket = exports.VideoLayer = exports.TrackInfo = exports.SimulcastCodecInfo = exports.Encryption = exports.ParticipantInfo = exports.ParticipantPermission = exports.PlayoutDelay = exports.Codec = void 0;\n/* eslint-disable */\nconst long_1 = __importDefault(__webpack_require__(/*! long */ \"(ssr)/./node_modules/long/umd/index.js\"));\nconst minimal_1 = __importDefault(__webpack_require__(/*! protobufjs/minimal */ \"(ssr)/./node_modules/protobufjs/minimal.js\"));\nconst timestamp_1 = __webpack_require__(/*! ./google/protobuf/timestamp */ \"(ssr)/./node_modules/livekit-server-sdk/dist/proto/google/protobuf/timestamp.js\");\nexports.protobufPackage = \"livekit\";\nvar AudioCodec;\n(function (AudioCodec) {\n    AudioCodec[AudioCodec[\"DEFAULT_AC\"] = 0] = \"DEFAULT_AC\";\n    AudioCodec[AudioCodec[\"OPUS\"] = 1] = \"OPUS\";\n    AudioCodec[AudioCodec[\"AAC\"] = 2] = \"AAC\";\n    AudioCodec[AudioCodec[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(AudioCodec = exports.AudioCodec || (exports.AudioCodec = {}));\nfunction audioCodecFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"DEFAULT_AC\":\n            return AudioCodec.DEFAULT_AC;\n        case 1:\n        case \"OPUS\":\n            return AudioCodec.OPUS;\n        case 2:\n        case \"AAC\":\n            return AudioCodec.AAC;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return AudioCodec.UNRECOGNIZED;\n    }\n}\nexports.audioCodecFromJSON = audioCodecFromJSON;\nfunction audioCodecToJSON(object) {\n    switch (object) {\n        case AudioCodec.DEFAULT_AC:\n            return \"DEFAULT_AC\";\n        case AudioCodec.OPUS:\n            return \"OPUS\";\n        case AudioCodec.AAC:\n            return \"AAC\";\n        case AudioCodec.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.audioCodecToJSON = audioCodecToJSON;\nvar VideoCodec;\n(function (VideoCodec) {\n    VideoCodec[VideoCodec[\"DEFAULT_VC\"] = 0] = \"DEFAULT_VC\";\n    VideoCodec[VideoCodec[\"H264_BASELINE\"] = 1] = \"H264_BASELINE\";\n    VideoCodec[VideoCodec[\"H264_MAIN\"] = 2] = \"H264_MAIN\";\n    VideoCodec[VideoCodec[\"H264_HIGH\"] = 3] = \"H264_HIGH\";\n    VideoCodec[VideoCodec[\"VP8\"] = 4] = \"VP8\";\n    VideoCodec[VideoCodec[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(VideoCodec = exports.VideoCodec || (exports.VideoCodec = {}));\nfunction videoCodecFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"DEFAULT_VC\":\n            return VideoCodec.DEFAULT_VC;\n        case 1:\n        case \"H264_BASELINE\":\n            return VideoCodec.H264_BASELINE;\n        case 2:\n        case \"H264_MAIN\":\n            return VideoCodec.H264_MAIN;\n        case 3:\n        case \"H264_HIGH\":\n            return VideoCodec.H264_HIGH;\n        case 4:\n        case \"VP8\":\n            return VideoCodec.VP8;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return VideoCodec.UNRECOGNIZED;\n    }\n}\nexports.videoCodecFromJSON = videoCodecFromJSON;\nfunction videoCodecToJSON(object) {\n    switch (object) {\n        case VideoCodec.DEFAULT_VC:\n            return \"DEFAULT_VC\";\n        case VideoCodec.H264_BASELINE:\n            return \"H264_BASELINE\";\n        case VideoCodec.H264_MAIN:\n            return \"H264_MAIN\";\n        case VideoCodec.H264_HIGH:\n            return \"H264_HIGH\";\n        case VideoCodec.VP8:\n            return \"VP8\";\n        case VideoCodec.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.videoCodecToJSON = videoCodecToJSON;\nvar ImageCodec;\n(function (ImageCodec) {\n    ImageCodec[ImageCodec[\"IC_DEFAULT\"] = 0] = \"IC_DEFAULT\";\n    ImageCodec[ImageCodec[\"IC_JPEG\"] = 1] = \"IC_JPEG\";\n    ImageCodec[ImageCodec[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ImageCodec = exports.ImageCodec || (exports.ImageCodec = {}));\nfunction imageCodecFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"IC_DEFAULT\":\n            return ImageCodec.IC_DEFAULT;\n        case 1:\n        case \"IC_JPEG\":\n            return ImageCodec.IC_JPEG;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ImageCodec.UNRECOGNIZED;\n    }\n}\nexports.imageCodecFromJSON = imageCodecFromJSON;\nfunction imageCodecToJSON(object) {\n    switch (object) {\n        case ImageCodec.IC_DEFAULT:\n            return \"IC_DEFAULT\";\n        case ImageCodec.IC_JPEG:\n            return \"IC_JPEG\";\n        case ImageCodec.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.imageCodecToJSON = imageCodecToJSON;\nvar TrackType;\n(function (TrackType) {\n    TrackType[TrackType[\"AUDIO\"] = 0] = \"AUDIO\";\n    TrackType[TrackType[\"VIDEO\"] = 1] = \"VIDEO\";\n    TrackType[TrackType[\"DATA\"] = 2] = \"DATA\";\n    TrackType[TrackType[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(TrackType = exports.TrackType || (exports.TrackType = {}));\nfunction trackTypeFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"AUDIO\":\n            return TrackType.AUDIO;\n        case 1:\n        case \"VIDEO\":\n            return TrackType.VIDEO;\n        case 2:\n        case \"DATA\":\n            return TrackType.DATA;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return TrackType.UNRECOGNIZED;\n    }\n}\nexports.trackTypeFromJSON = trackTypeFromJSON;\nfunction trackTypeToJSON(object) {\n    switch (object) {\n        case TrackType.AUDIO:\n            return \"AUDIO\";\n        case TrackType.VIDEO:\n            return \"VIDEO\";\n        case TrackType.DATA:\n            return \"DATA\";\n        case TrackType.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.trackTypeToJSON = trackTypeToJSON;\nvar TrackSource;\n(function (TrackSource) {\n    TrackSource[TrackSource[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    TrackSource[TrackSource[\"CAMERA\"] = 1] = \"CAMERA\";\n    TrackSource[TrackSource[\"MICROPHONE\"] = 2] = \"MICROPHONE\";\n    TrackSource[TrackSource[\"SCREEN_SHARE\"] = 3] = \"SCREEN_SHARE\";\n    TrackSource[TrackSource[\"SCREEN_SHARE_AUDIO\"] = 4] = \"SCREEN_SHARE_AUDIO\";\n    TrackSource[TrackSource[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(TrackSource = exports.TrackSource || (exports.TrackSource = {}));\nfunction trackSourceFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"UNKNOWN\":\n            return TrackSource.UNKNOWN;\n        case 1:\n        case \"CAMERA\":\n            return TrackSource.CAMERA;\n        case 2:\n        case \"MICROPHONE\":\n            return TrackSource.MICROPHONE;\n        case 3:\n        case \"SCREEN_SHARE\":\n            return TrackSource.SCREEN_SHARE;\n        case 4:\n        case \"SCREEN_SHARE_AUDIO\":\n            return TrackSource.SCREEN_SHARE_AUDIO;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return TrackSource.UNRECOGNIZED;\n    }\n}\nexports.trackSourceFromJSON = trackSourceFromJSON;\nfunction trackSourceToJSON(object) {\n    switch (object) {\n        case TrackSource.UNKNOWN:\n            return \"UNKNOWN\";\n        case TrackSource.CAMERA:\n            return \"CAMERA\";\n        case TrackSource.MICROPHONE:\n            return \"MICROPHONE\";\n        case TrackSource.SCREEN_SHARE:\n            return \"SCREEN_SHARE\";\n        case TrackSource.SCREEN_SHARE_AUDIO:\n            return \"SCREEN_SHARE_AUDIO\";\n        case TrackSource.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.trackSourceToJSON = trackSourceToJSON;\nvar VideoQuality;\n(function (VideoQuality) {\n    VideoQuality[VideoQuality[\"LOW\"] = 0] = \"LOW\";\n    VideoQuality[VideoQuality[\"MEDIUM\"] = 1] = \"MEDIUM\";\n    VideoQuality[VideoQuality[\"HIGH\"] = 2] = \"HIGH\";\n    VideoQuality[VideoQuality[\"OFF\"] = 3] = \"OFF\";\n    VideoQuality[VideoQuality[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(VideoQuality = exports.VideoQuality || (exports.VideoQuality = {}));\nfunction videoQualityFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"LOW\":\n            return VideoQuality.LOW;\n        case 1:\n        case \"MEDIUM\":\n            return VideoQuality.MEDIUM;\n        case 2:\n        case \"HIGH\":\n            return VideoQuality.HIGH;\n        case 3:\n        case \"OFF\":\n            return VideoQuality.OFF;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return VideoQuality.UNRECOGNIZED;\n    }\n}\nexports.videoQualityFromJSON = videoQualityFromJSON;\nfunction videoQualityToJSON(object) {\n    switch (object) {\n        case VideoQuality.LOW:\n            return \"LOW\";\n        case VideoQuality.MEDIUM:\n            return \"MEDIUM\";\n        case VideoQuality.HIGH:\n            return \"HIGH\";\n        case VideoQuality.OFF:\n            return \"OFF\";\n        case VideoQuality.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.videoQualityToJSON = videoQualityToJSON;\nvar ConnectionQuality;\n(function (ConnectionQuality) {\n    ConnectionQuality[ConnectionQuality[\"POOR\"] = 0] = \"POOR\";\n    ConnectionQuality[ConnectionQuality[\"GOOD\"] = 1] = \"GOOD\";\n    ConnectionQuality[ConnectionQuality[\"EXCELLENT\"] = 2] = \"EXCELLENT\";\n    ConnectionQuality[ConnectionQuality[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ConnectionQuality = exports.ConnectionQuality || (exports.ConnectionQuality = {}));\nfunction connectionQualityFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"POOR\":\n            return ConnectionQuality.POOR;\n        case 1:\n        case \"GOOD\":\n            return ConnectionQuality.GOOD;\n        case 2:\n        case \"EXCELLENT\":\n            return ConnectionQuality.EXCELLENT;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ConnectionQuality.UNRECOGNIZED;\n    }\n}\nexports.connectionQualityFromJSON = connectionQualityFromJSON;\nfunction connectionQualityToJSON(object) {\n    switch (object) {\n        case ConnectionQuality.POOR:\n            return \"POOR\";\n        case ConnectionQuality.GOOD:\n            return \"GOOD\";\n        case ConnectionQuality.EXCELLENT:\n            return \"EXCELLENT\";\n        case ConnectionQuality.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.connectionQualityToJSON = connectionQualityToJSON;\nvar ClientConfigSetting;\n(function (ClientConfigSetting) {\n    ClientConfigSetting[ClientConfigSetting[\"UNSET\"] = 0] = \"UNSET\";\n    ClientConfigSetting[ClientConfigSetting[\"DISABLED\"] = 1] = \"DISABLED\";\n    ClientConfigSetting[ClientConfigSetting[\"ENABLED\"] = 2] = \"ENABLED\";\n    ClientConfigSetting[ClientConfigSetting[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ClientConfigSetting = exports.ClientConfigSetting || (exports.ClientConfigSetting = {}));\nfunction clientConfigSettingFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"UNSET\":\n            return ClientConfigSetting.UNSET;\n        case 1:\n        case \"DISABLED\":\n            return ClientConfigSetting.DISABLED;\n        case 2:\n        case \"ENABLED\":\n            return ClientConfigSetting.ENABLED;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ClientConfigSetting.UNRECOGNIZED;\n    }\n}\nexports.clientConfigSettingFromJSON = clientConfigSettingFromJSON;\nfunction clientConfigSettingToJSON(object) {\n    switch (object) {\n        case ClientConfigSetting.UNSET:\n            return \"UNSET\";\n        case ClientConfigSetting.DISABLED:\n            return \"DISABLED\";\n        case ClientConfigSetting.ENABLED:\n            return \"ENABLED\";\n        case ClientConfigSetting.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.clientConfigSettingToJSON = clientConfigSettingToJSON;\nvar DisconnectReason;\n(function (DisconnectReason) {\n    DisconnectReason[DisconnectReason[\"UNKNOWN_REASON\"] = 0] = \"UNKNOWN_REASON\";\n    DisconnectReason[DisconnectReason[\"CLIENT_INITIATED\"] = 1] = \"CLIENT_INITIATED\";\n    DisconnectReason[DisconnectReason[\"DUPLICATE_IDENTITY\"] = 2] = \"DUPLICATE_IDENTITY\";\n    DisconnectReason[DisconnectReason[\"SERVER_SHUTDOWN\"] = 3] = \"SERVER_SHUTDOWN\";\n    DisconnectReason[DisconnectReason[\"PARTICIPANT_REMOVED\"] = 4] = \"PARTICIPANT_REMOVED\";\n    DisconnectReason[DisconnectReason[\"ROOM_DELETED\"] = 5] = \"ROOM_DELETED\";\n    DisconnectReason[DisconnectReason[\"STATE_MISMATCH\"] = 6] = \"STATE_MISMATCH\";\n    DisconnectReason[DisconnectReason[\"JOIN_FAILURE\"] = 7] = \"JOIN_FAILURE\";\n    DisconnectReason[DisconnectReason[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(DisconnectReason = exports.DisconnectReason || (exports.DisconnectReason = {}));\nfunction disconnectReasonFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"UNKNOWN_REASON\":\n            return DisconnectReason.UNKNOWN_REASON;\n        case 1:\n        case \"CLIENT_INITIATED\":\n            return DisconnectReason.CLIENT_INITIATED;\n        case 2:\n        case \"DUPLICATE_IDENTITY\":\n            return DisconnectReason.DUPLICATE_IDENTITY;\n        case 3:\n        case \"SERVER_SHUTDOWN\":\n            return DisconnectReason.SERVER_SHUTDOWN;\n        case 4:\n        case \"PARTICIPANT_REMOVED\":\n            return DisconnectReason.PARTICIPANT_REMOVED;\n        case 5:\n        case \"ROOM_DELETED\":\n            return DisconnectReason.ROOM_DELETED;\n        case 6:\n        case \"STATE_MISMATCH\":\n            return DisconnectReason.STATE_MISMATCH;\n        case 7:\n        case \"JOIN_FAILURE\":\n            return DisconnectReason.JOIN_FAILURE;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return DisconnectReason.UNRECOGNIZED;\n    }\n}\nexports.disconnectReasonFromJSON = disconnectReasonFromJSON;\nfunction disconnectReasonToJSON(object) {\n    switch (object) {\n        case DisconnectReason.UNKNOWN_REASON:\n            return \"UNKNOWN_REASON\";\n        case DisconnectReason.CLIENT_INITIATED:\n            return \"CLIENT_INITIATED\";\n        case DisconnectReason.DUPLICATE_IDENTITY:\n            return \"DUPLICATE_IDENTITY\";\n        case DisconnectReason.SERVER_SHUTDOWN:\n            return \"SERVER_SHUTDOWN\";\n        case DisconnectReason.PARTICIPANT_REMOVED:\n            return \"PARTICIPANT_REMOVED\";\n        case DisconnectReason.ROOM_DELETED:\n            return \"ROOM_DELETED\";\n        case DisconnectReason.STATE_MISMATCH:\n            return \"STATE_MISMATCH\";\n        case DisconnectReason.JOIN_FAILURE:\n            return \"JOIN_FAILURE\";\n        case DisconnectReason.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.disconnectReasonToJSON = disconnectReasonToJSON;\nvar ReconnectReason;\n(function (ReconnectReason) {\n    ReconnectReason[ReconnectReason[\"RR_UNKNOWN\"] = 0] = \"RR_UNKNOWN\";\n    ReconnectReason[ReconnectReason[\"RR_SIGNAL_DISCONNECTED\"] = 1] = \"RR_SIGNAL_DISCONNECTED\";\n    ReconnectReason[ReconnectReason[\"RR_PUBLISHER_FAILED\"] = 2] = \"RR_PUBLISHER_FAILED\";\n    ReconnectReason[ReconnectReason[\"RR_SUBSCRIBER_FAILED\"] = 3] = \"RR_SUBSCRIBER_FAILED\";\n    ReconnectReason[ReconnectReason[\"RR_SWITCH_CANDIDATE\"] = 4] = \"RR_SWITCH_CANDIDATE\";\n    ReconnectReason[ReconnectReason[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ReconnectReason = exports.ReconnectReason || (exports.ReconnectReason = {}));\nfunction reconnectReasonFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"RR_UNKNOWN\":\n            return ReconnectReason.RR_UNKNOWN;\n        case 1:\n        case \"RR_SIGNAL_DISCONNECTED\":\n            return ReconnectReason.RR_SIGNAL_DISCONNECTED;\n        case 2:\n        case \"RR_PUBLISHER_FAILED\":\n            return ReconnectReason.RR_PUBLISHER_FAILED;\n        case 3:\n        case \"RR_SUBSCRIBER_FAILED\":\n            return ReconnectReason.RR_SUBSCRIBER_FAILED;\n        case 4:\n        case \"RR_SWITCH_CANDIDATE\":\n            return ReconnectReason.RR_SWITCH_CANDIDATE;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ReconnectReason.UNRECOGNIZED;\n    }\n}\nexports.reconnectReasonFromJSON = reconnectReasonFromJSON;\nfunction reconnectReasonToJSON(object) {\n    switch (object) {\n        case ReconnectReason.RR_UNKNOWN:\n            return \"RR_UNKNOWN\";\n        case ReconnectReason.RR_SIGNAL_DISCONNECTED:\n            return \"RR_SIGNAL_DISCONNECTED\";\n        case ReconnectReason.RR_PUBLISHER_FAILED:\n            return \"RR_PUBLISHER_FAILED\";\n        case ReconnectReason.RR_SUBSCRIBER_FAILED:\n            return \"RR_SUBSCRIBER_FAILED\";\n        case ReconnectReason.RR_SWITCH_CANDIDATE:\n            return \"RR_SWITCH_CANDIDATE\";\n        case ReconnectReason.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.reconnectReasonToJSON = reconnectReasonToJSON;\nvar SubscriptionError;\n(function (SubscriptionError) {\n    SubscriptionError[SubscriptionError[\"SE_UNKNOWN\"] = 0] = \"SE_UNKNOWN\";\n    SubscriptionError[SubscriptionError[\"SE_CODEC_UNSUPPORTED\"] = 1] = \"SE_CODEC_UNSUPPORTED\";\n    SubscriptionError[SubscriptionError[\"SE_TRACK_NOTFOUND\"] = 2] = \"SE_TRACK_NOTFOUND\";\n    SubscriptionError[SubscriptionError[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(SubscriptionError = exports.SubscriptionError || (exports.SubscriptionError = {}));\nfunction subscriptionErrorFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"SE_UNKNOWN\":\n            return SubscriptionError.SE_UNKNOWN;\n        case 1:\n        case \"SE_CODEC_UNSUPPORTED\":\n            return SubscriptionError.SE_CODEC_UNSUPPORTED;\n        case 2:\n        case \"SE_TRACK_NOTFOUND\":\n            return SubscriptionError.SE_TRACK_NOTFOUND;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return SubscriptionError.UNRECOGNIZED;\n    }\n}\nexports.subscriptionErrorFromJSON = subscriptionErrorFromJSON;\nfunction subscriptionErrorToJSON(object) {\n    switch (object) {\n        case SubscriptionError.SE_UNKNOWN:\n            return \"SE_UNKNOWN\";\n        case SubscriptionError.SE_CODEC_UNSUPPORTED:\n            return \"SE_CODEC_UNSUPPORTED\";\n        case SubscriptionError.SE_TRACK_NOTFOUND:\n            return \"SE_TRACK_NOTFOUND\";\n        case SubscriptionError.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.subscriptionErrorToJSON = subscriptionErrorToJSON;\nvar ParticipantInfo_State;\n(function (ParticipantInfo_State) {\n    /** JOINING - websocket' connected, but not offered yet */\n    ParticipantInfo_State[ParticipantInfo_State[\"JOINING\"] = 0] = \"JOINING\";\n    /** JOINED - server received client offer */\n    ParticipantInfo_State[ParticipantInfo_State[\"JOINED\"] = 1] = \"JOINED\";\n    /** ACTIVE - ICE connectivity established */\n    ParticipantInfo_State[ParticipantInfo_State[\"ACTIVE\"] = 2] = \"ACTIVE\";\n    /** DISCONNECTED - WS disconnected */\n    ParticipantInfo_State[ParticipantInfo_State[\"DISCONNECTED\"] = 3] = \"DISCONNECTED\";\n    ParticipantInfo_State[ParticipantInfo_State[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ParticipantInfo_State = exports.ParticipantInfo_State || (exports.ParticipantInfo_State = {}));\nfunction participantInfo_StateFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"JOINING\":\n            return ParticipantInfo_State.JOINING;\n        case 1:\n        case \"JOINED\":\n            return ParticipantInfo_State.JOINED;\n        case 2:\n        case \"ACTIVE\":\n            return ParticipantInfo_State.ACTIVE;\n        case 3:\n        case \"DISCONNECTED\":\n            return ParticipantInfo_State.DISCONNECTED;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ParticipantInfo_State.UNRECOGNIZED;\n    }\n}\nexports.participantInfo_StateFromJSON = participantInfo_StateFromJSON;\nfunction participantInfo_StateToJSON(object) {\n    switch (object) {\n        case ParticipantInfo_State.JOINING:\n            return \"JOINING\";\n        case ParticipantInfo_State.JOINED:\n            return \"JOINED\";\n        case ParticipantInfo_State.ACTIVE:\n            return \"ACTIVE\";\n        case ParticipantInfo_State.DISCONNECTED:\n            return \"DISCONNECTED\";\n        case ParticipantInfo_State.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.participantInfo_StateToJSON = participantInfo_StateToJSON;\nvar Encryption_Type;\n(function (Encryption_Type) {\n    Encryption_Type[Encryption_Type[\"NONE\"] = 0] = \"NONE\";\n    Encryption_Type[Encryption_Type[\"GCM\"] = 1] = \"GCM\";\n    Encryption_Type[Encryption_Type[\"CUSTOM\"] = 2] = \"CUSTOM\";\n    Encryption_Type[Encryption_Type[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(Encryption_Type = exports.Encryption_Type || (exports.Encryption_Type = {}));\nfunction encryption_TypeFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"NONE\":\n            return Encryption_Type.NONE;\n        case 1:\n        case \"GCM\":\n            return Encryption_Type.GCM;\n        case 2:\n        case \"CUSTOM\":\n            return Encryption_Type.CUSTOM;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return Encryption_Type.UNRECOGNIZED;\n    }\n}\nexports.encryption_TypeFromJSON = encryption_TypeFromJSON;\nfunction encryption_TypeToJSON(object) {\n    switch (object) {\n        case Encryption_Type.NONE:\n            return \"NONE\";\n        case Encryption_Type.GCM:\n            return \"GCM\";\n        case Encryption_Type.CUSTOM:\n            return \"CUSTOM\";\n        case Encryption_Type.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.encryption_TypeToJSON = encryption_TypeToJSON;\nvar DataPacket_Kind;\n(function (DataPacket_Kind) {\n    DataPacket_Kind[DataPacket_Kind[\"RELIABLE\"] = 0] = \"RELIABLE\";\n    DataPacket_Kind[DataPacket_Kind[\"LOSSY\"] = 1] = \"LOSSY\";\n    DataPacket_Kind[DataPacket_Kind[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(DataPacket_Kind = exports.DataPacket_Kind || (exports.DataPacket_Kind = {}));\nfunction dataPacket_KindFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"RELIABLE\":\n            return DataPacket_Kind.RELIABLE;\n        case 1:\n        case \"LOSSY\":\n            return DataPacket_Kind.LOSSY;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return DataPacket_Kind.UNRECOGNIZED;\n    }\n}\nexports.dataPacket_KindFromJSON = dataPacket_KindFromJSON;\nfunction dataPacket_KindToJSON(object) {\n    switch (object) {\n        case DataPacket_Kind.RELIABLE:\n            return \"RELIABLE\";\n        case DataPacket_Kind.LOSSY:\n            return \"LOSSY\";\n        case DataPacket_Kind.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.dataPacket_KindToJSON = dataPacket_KindToJSON;\nvar ServerInfo_Edition;\n(function (ServerInfo_Edition) {\n    ServerInfo_Edition[ServerInfo_Edition[\"Standard\"] = 0] = \"Standard\";\n    ServerInfo_Edition[ServerInfo_Edition[\"Cloud\"] = 1] = \"Cloud\";\n    ServerInfo_Edition[ServerInfo_Edition[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ServerInfo_Edition = exports.ServerInfo_Edition || (exports.ServerInfo_Edition = {}));\nfunction serverInfo_EditionFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"Standard\":\n            return ServerInfo_Edition.Standard;\n        case 1:\n        case \"Cloud\":\n            return ServerInfo_Edition.Cloud;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ServerInfo_Edition.UNRECOGNIZED;\n    }\n}\nexports.serverInfo_EditionFromJSON = serverInfo_EditionFromJSON;\nfunction serverInfo_EditionToJSON(object) {\n    switch (object) {\n        case ServerInfo_Edition.Standard:\n            return \"Standard\";\n        case ServerInfo_Edition.Cloud:\n            return \"Cloud\";\n        case ServerInfo_Edition.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.serverInfo_EditionToJSON = serverInfo_EditionToJSON;\nvar ClientInfo_SDK;\n(function (ClientInfo_SDK) {\n    ClientInfo_SDK[ClientInfo_SDK[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    ClientInfo_SDK[ClientInfo_SDK[\"JS\"] = 1] = \"JS\";\n    ClientInfo_SDK[ClientInfo_SDK[\"SWIFT\"] = 2] = \"SWIFT\";\n    ClientInfo_SDK[ClientInfo_SDK[\"ANDROID\"] = 3] = \"ANDROID\";\n    ClientInfo_SDK[ClientInfo_SDK[\"FLUTTER\"] = 4] = \"FLUTTER\";\n    ClientInfo_SDK[ClientInfo_SDK[\"GO\"] = 5] = \"GO\";\n    ClientInfo_SDK[ClientInfo_SDK[\"UNITY\"] = 6] = \"UNITY\";\n    ClientInfo_SDK[ClientInfo_SDK[\"REACT_NATIVE\"] = 7] = \"REACT_NATIVE\";\n    ClientInfo_SDK[ClientInfo_SDK[\"RUST\"] = 8] = \"RUST\";\n    ClientInfo_SDK[ClientInfo_SDK[\"PYTHON\"] = 9] = \"PYTHON\";\n    ClientInfo_SDK[ClientInfo_SDK[\"CPP\"] = 10] = \"CPP\";\n    ClientInfo_SDK[ClientInfo_SDK[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ClientInfo_SDK = exports.ClientInfo_SDK || (exports.ClientInfo_SDK = {}));\nfunction clientInfo_SDKFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"UNKNOWN\":\n            return ClientInfo_SDK.UNKNOWN;\n        case 1:\n        case \"JS\":\n            return ClientInfo_SDK.JS;\n        case 2:\n        case \"SWIFT\":\n            return ClientInfo_SDK.SWIFT;\n        case 3:\n        case \"ANDROID\":\n            return ClientInfo_SDK.ANDROID;\n        case 4:\n        case \"FLUTTER\":\n            return ClientInfo_SDK.FLUTTER;\n        case 5:\n        case \"GO\":\n            return ClientInfo_SDK.GO;\n        case 6:\n        case \"UNITY\":\n            return ClientInfo_SDK.UNITY;\n        case 7:\n        case \"REACT_NATIVE\":\n            return ClientInfo_SDK.REACT_NATIVE;\n        case 8:\n        case \"RUST\":\n            return ClientInfo_SDK.RUST;\n        case 9:\n        case \"PYTHON\":\n            return ClientInfo_SDK.PYTHON;\n        case 10:\n        case \"CPP\":\n            return ClientInfo_SDK.CPP;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ClientInfo_SDK.UNRECOGNIZED;\n    }\n}\nexports.clientInfo_SDKFromJSON = clientInfo_SDKFromJSON;\nfunction clientInfo_SDKToJSON(object) {\n    switch (object) {\n        case ClientInfo_SDK.UNKNOWN:\n            return \"UNKNOWN\";\n        case ClientInfo_SDK.JS:\n            return \"JS\";\n        case ClientInfo_SDK.SWIFT:\n            return \"SWIFT\";\n        case ClientInfo_SDK.ANDROID:\n            return \"ANDROID\";\n        case ClientInfo_SDK.FLUTTER:\n            return \"FLUTTER\";\n        case ClientInfo_SDK.GO:\n            return \"GO\";\n        case ClientInfo_SDK.UNITY:\n            return \"UNITY\";\n        case ClientInfo_SDK.REACT_NATIVE:\n            return \"REACT_NATIVE\";\n        case ClientInfo_SDK.RUST:\n            return \"RUST\";\n        case ClientInfo_SDK.PYTHON:\n            return \"PYTHON\";\n        case ClientInfo_SDK.CPP:\n            return \"CPP\";\n        case ClientInfo_SDK.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.clientInfo_SDKToJSON = clientInfo_SDKToJSON;\nfunction createBaseRoom() {\n    return {\n        sid: \"\",\n        name: \"\",\n        emptyTimeout: 0,\n        maxParticipants: 0,\n        creationTime: 0,\n        turnPassword: \"\",\n        enabledCodecs: [],\n        metadata: \"\",\n        numParticipants: 0,\n        numPublishers: 0,\n        activeRecording: false,\n    };\n}\nexports.Room = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.sid !== \"\") {\n            writer.uint32(10).string(message.sid);\n        }\n        if (message.name !== \"\") {\n            writer.uint32(18).string(message.name);\n        }\n        if (message.emptyTimeout !== 0) {\n            writer.uint32(24).uint32(message.emptyTimeout);\n        }\n        if (message.maxParticipants !== 0) {\n            writer.uint32(32).uint32(message.maxParticipants);\n        }\n        if (message.creationTime !== 0) {\n            writer.uint32(40).int64(message.creationTime);\n        }\n        if (message.turnPassword !== \"\") {\n            writer.uint32(50).string(message.turnPassword);\n        }\n        for (const v of message.enabledCodecs) {\n            exports.Codec.encode(v, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.metadata !== \"\") {\n            writer.uint32(66).string(message.metadata);\n        }\n        if (message.numParticipants !== 0) {\n            writer.uint32(72).uint32(message.numParticipants);\n        }\n        if (message.numPublishers !== 0) {\n            writer.uint32(88).uint32(message.numPublishers);\n        }\n        if (message.activeRecording === true) {\n            writer.uint32(80).bool(message.activeRecording);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseRoom();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.sid = reader.string();\n                    break;\n                case 2:\n                    message.name = reader.string();\n                    break;\n                case 3:\n                    message.emptyTimeout = reader.uint32();\n                    break;\n                case 4:\n                    message.maxParticipants = reader.uint32();\n                    break;\n                case 5:\n                    message.creationTime = longToNumber(reader.int64());\n                    break;\n                case 6:\n                    message.turnPassword = reader.string();\n                    break;\n                case 7:\n                    message.enabledCodecs.push(exports.Codec.decode(reader, reader.uint32()));\n                    break;\n                case 8:\n                    message.metadata = reader.string();\n                    break;\n                case 9:\n                    message.numParticipants = reader.uint32();\n                    break;\n                case 11:\n                    message.numPublishers = reader.uint32();\n                    break;\n                case 10:\n                    message.activeRecording = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            sid: isSet(object.sid) ? String(object.sid) : \"\",\n            name: isSet(object.name) ? String(object.name) : \"\",\n            emptyTimeout: isSet(object.emptyTimeout) ? Number(object.emptyTimeout) : 0,\n            maxParticipants: isSet(object.maxParticipants) ? Number(object.maxParticipants) : 0,\n            creationTime: isSet(object.creationTime) ? Number(object.creationTime) : 0,\n            turnPassword: isSet(object.turnPassword) ? String(object.turnPassword) : \"\",\n            enabledCodecs: Array.isArray(object === null || object === void 0 ? void 0 : object.enabledCodecs)\n                ? object.enabledCodecs.map((e) => exports.Codec.fromJSON(e))\n                : [],\n            metadata: isSet(object.metadata) ? String(object.metadata) : \"\",\n            numParticipants: isSet(object.numParticipants) ? Number(object.numParticipants) : 0,\n            numPublishers: isSet(object.numPublishers) ? Number(object.numPublishers) : 0,\n            activeRecording: isSet(object.activeRecording) ? Boolean(object.activeRecording) : false,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.sid !== undefined && (obj.sid = message.sid);\n        message.name !== undefined && (obj.name = message.name);\n        message.emptyTimeout !== undefined && (obj.emptyTimeout = Math.round(message.emptyTimeout));\n        message.maxParticipants !== undefined && (obj.maxParticipants = Math.round(message.maxParticipants));\n        message.creationTime !== undefined && (obj.creationTime = Math.round(message.creationTime));\n        message.turnPassword !== undefined && (obj.turnPassword = message.turnPassword);\n        if (message.enabledCodecs) {\n            obj.enabledCodecs = message.enabledCodecs.map((e) => e ? exports.Codec.toJSON(e) : undefined);\n        }\n        else {\n            obj.enabledCodecs = [];\n        }\n        message.metadata !== undefined && (obj.metadata = message.metadata);\n        message.numParticipants !== undefined && (obj.numParticipants = Math.round(message.numParticipants));\n        message.numPublishers !== undefined && (obj.numPublishers = Math.round(message.numPublishers));\n        message.activeRecording !== undefined && (obj.activeRecording = message.activeRecording);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n        const message = createBaseRoom();\n        message.sid = (_a = object.sid) !== null && _a !== void 0 ? _a : \"\";\n        message.name = (_b = object.name) !== null && _b !== void 0 ? _b : \"\";\n        message.emptyTimeout = (_c = object.emptyTimeout) !== null && _c !== void 0 ? _c : 0;\n        message.maxParticipants = (_d = object.maxParticipants) !== null && _d !== void 0 ? _d : 0;\n        message.creationTime = (_e = object.creationTime) !== null && _e !== void 0 ? _e : 0;\n        message.turnPassword = (_f = object.turnPassword) !== null && _f !== void 0 ? _f : \"\";\n        message.enabledCodecs = ((_g = object.enabledCodecs) === null || _g === void 0 ? void 0 : _g.map((e) => exports.Codec.fromPartial(e))) || [];\n        message.metadata = (_h = object.metadata) !== null && _h !== void 0 ? _h : \"\";\n        message.numParticipants = (_j = object.numParticipants) !== null && _j !== void 0 ? _j : 0;\n        message.numPublishers = (_k = object.numPublishers) !== null && _k !== void 0 ? _k : 0;\n        message.activeRecording = (_l = object.activeRecording) !== null && _l !== void 0 ? _l : false;\n        return message;\n    },\n};\nfunction createBaseCodec() {\n    return { mime: \"\", fmtpLine: \"\" };\n}\nexports.Codec = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.mime !== \"\") {\n            writer.uint32(10).string(message.mime);\n        }\n        if (message.fmtpLine !== \"\") {\n            writer.uint32(18).string(message.fmtpLine);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseCodec();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.mime = reader.string();\n                    break;\n                case 2:\n                    message.fmtpLine = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            mime: isSet(object.mime) ? String(object.mime) : \"\",\n            fmtpLine: isSet(object.fmtpLine) ? String(object.fmtpLine) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.mime !== undefined && (obj.mime = message.mime);\n        message.fmtpLine !== undefined && (obj.fmtpLine = message.fmtpLine);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseCodec();\n        message.mime = (_a = object.mime) !== null && _a !== void 0 ? _a : \"\";\n        message.fmtpLine = (_b = object.fmtpLine) !== null && _b !== void 0 ? _b : \"\";\n        return message;\n    },\n};\nfunction createBasePlayoutDelay() {\n    return { enabled: false, min: 0, max: 0 };\n}\nexports.PlayoutDelay = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.enabled === true) {\n            writer.uint32(8).bool(message.enabled);\n        }\n        if (message.min !== 0) {\n            writer.uint32(16).uint32(message.min);\n        }\n        if (message.max !== 0) {\n            writer.uint32(24).uint32(message.max);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBasePlayoutDelay();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.enabled = reader.bool();\n                    break;\n                case 2:\n                    message.min = reader.uint32();\n                    break;\n                case 3:\n                    message.max = reader.uint32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            enabled: isSet(object.enabled) ? Boolean(object.enabled) : false,\n            min: isSet(object.min) ? Number(object.min) : 0,\n            max: isSet(object.max) ? Number(object.max) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.enabled !== undefined && (obj.enabled = message.enabled);\n        message.min !== undefined && (obj.min = Math.round(message.min));\n        message.max !== undefined && (obj.max = Math.round(message.max));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBasePlayoutDelay();\n        message.enabled = (_a = object.enabled) !== null && _a !== void 0 ? _a : false;\n        message.min = (_b = object.min) !== null && _b !== void 0 ? _b : 0;\n        message.max = (_c = object.max) !== null && _c !== void 0 ? _c : 0;\n        return message;\n    },\n};\nfunction createBaseParticipantPermission() {\n    return {\n        canSubscribe: false,\n        canPublish: false,\n        canPublishData: false,\n        canPublishSources: [],\n        hidden: false,\n        recorder: false,\n        canUpdateMetadata: false,\n    };\n}\nexports.ParticipantPermission = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.canSubscribe === true) {\n            writer.uint32(8).bool(message.canSubscribe);\n        }\n        if (message.canPublish === true) {\n            writer.uint32(16).bool(message.canPublish);\n        }\n        if (message.canPublishData === true) {\n            writer.uint32(24).bool(message.canPublishData);\n        }\n        writer.uint32(74).fork();\n        for (const v of message.canPublishSources) {\n            writer.int32(v);\n        }\n        writer.ldelim();\n        if (message.hidden === true) {\n            writer.uint32(56).bool(message.hidden);\n        }\n        if (message.recorder === true) {\n            writer.uint32(64).bool(message.recorder);\n        }\n        if (message.canUpdateMetadata === true) {\n            writer.uint32(80).bool(message.canUpdateMetadata);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseParticipantPermission();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.canSubscribe = reader.bool();\n                    break;\n                case 2:\n                    message.canPublish = reader.bool();\n                    break;\n                case 3:\n                    message.canPublishData = reader.bool();\n                    break;\n                case 9:\n                    if ((tag & 7) === 2) {\n                        const end2 = reader.uint32() + reader.pos;\n                        while (reader.pos < end2) {\n                            message.canPublishSources.push(reader.int32());\n                        }\n                    }\n                    else {\n                        message.canPublishSources.push(reader.int32());\n                    }\n                    break;\n                case 7:\n                    message.hidden = reader.bool();\n                    break;\n                case 8:\n                    message.recorder = reader.bool();\n                    break;\n                case 10:\n                    message.canUpdateMetadata = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            canSubscribe: isSet(object.canSubscribe) ? Boolean(object.canSubscribe) : false,\n            canPublish: isSet(object.canPublish) ? Boolean(object.canPublish) : false,\n            canPublishData: isSet(object.canPublishData) ? Boolean(object.canPublishData) : false,\n            canPublishSources: Array.isArray(object === null || object === void 0 ? void 0 : object.canPublishSources)\n                ? object.canPublishSources.map((e) => trackSourceFromJSON(e))\n                : [],\n            hidden: isSet(object.hidden) ? Boolean(object.hidden) : false,\n            recorder: isSet(object.recorder) ? Boolean(object.recorder) : false,\n            canUpdateMetadata: isSet(object.canUpdateMetadata) ? Boolean(object.canUpdateMetadata) : false,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.canSubscribe !== undefined && (obj.canSubscribe = message.canSubscribe);\n        message.canPublish !== undefined && (obj.canPublish = message.canPublish);\n        message.canPublishData !== undefined && (obj.canPublishData = message.canPublishData);\n        if (message.canPublishSources) {\n            obj.canPublishSources = message.canPublishSources.map((e) => trackSourceToJSON(e));\n        }\n        else {\n            obj.canPublishSources = [];\n        }\n        message.hidden !== undefined && (obj.hidden = message.hidden);\n        message.recorder !== undefined && (obj.recorder = message.recorder);\n        message.canUpdateMetadata !== undefined && (obj.canUpdateMetadata = message.canUpdateMetadata);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        const message = createBaseParticipantPermission();\n        message.canSubscribe = (_a = object.canSubscribe) !== null && _a !== void 0 ? _a : false;\n        message.canPublish = (_b = object.canPublish) !== null && _b !== void 0 ? _b : false;\n        message.canPublishData = (_c = object.canPublishData) !== null && _c !== void 0 ? _c : false;\n        message.canPublishSources = ((_d = object.canPublishSources) === null || _d === void 0 ? void 0 : _d.map((e) => e)) || [];\n        message.hidden = (_e = object.hidden) !== null && _e !== void 0 ? _e : false;\n        message.recorder = (_f = object.recorder) !== null && _f !== void 0 ? _f : false;\n        message.canUpdateMetadata = (_g = object.canUpdateMetadata) !== null && _g !== void 0 ? _g : false;\n        return message;\n    },\n};\nfunction createBaseParticipantInfo() {\n    return {\n        sid: \"\",\n        identity: \"\",\n        state: 0,\n        tracks: [],\n        metadata: \"\",\n        joinedAt: 0,\n        name: \"\",\n        version: 0,\n        permission: undefined,\n        region: \"\",\n        isPublisher: false,\n    };\n}\nexports.ParticipantInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.sid !== \"\") {\n            writer.uint32(10).string(message.sid);\n        }\n        if (message.identity !== \"\") {\n            writer.uint32(18).string(message.identity);\n        }\n        if (message.state !== 0) {\n            writer.uint32(24).int32(message.state);\n        }\n        for (const v of message.tracks) {\n            exports.TrackInfo.encode(v, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.metadata !== \"\") {\n            writer.uint32(42).string(message.metadata);\n        }\n        if (message.joinedAt !== 0) {\n            writer.uint32(48).int64(message.joinedAt);\n        }\n        if (message.name !== \"\") {\n            writer.uint32(74).string(message.name);\n        }\n        if (message.version !== 0) {\n            writer.uint32(80).uint32(message.version);\n        }\n        if (message.permission !== undefined) {\n            exports.ParticipantPermission.encode(message.permission, writer.uint32(90).fork()).ldelim();\n        }\n        if (message.region !== \"\") {\n            writer.uint32(98).string(message.region);\n        }\n        if (message.isPublisher === true) {\n            writer.uint32(104).bool(message.isPublisher);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseParticipantInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.sid = reader.string();\n                    break;\n                case 2:\n                    message.identity = reader.string();\n                    break;\n                case 3:\n                    message.state = reader.int32();\n                    break;\n                case 4:\n                    message.tracks.push(exports.TrackInfo.decode(reader, reader.uint32()));\n                    break;\n                case 5:\n                    message.metadata = reader.string();\n                    break;\n                case 6:\n                    message.joinedAt = longToNumber(reader.int64());\n                    break;\n                case 9:\n                    message.name = reader.string();\n                    break;\n                case 10:\n                    message.version = reader.uint32();\n                    break;\n                case 11:\n                    message.permission = exports.ParticipantPermission.decode(reader, reader.uint32());\n                    break;\n                case 12:\n                    message.region = reader.string();\n                    break;\n                case 13:\n                    message.isPublisher = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            sid: isSet(object.sid) ? String(object.sid) : \"\",\n            identity: isSet(object.identity) ? String(object.identity) : \"\",\n            state: isSet(object.state) ? participantInfo_StateFromJSON(object.state) : 0,\n            tracks: Array.isArray(object === null || object === void 0 ? void 0 : object.tracks) ? object.tracks.map((e) => exports.TrackInfo.fromJSON(e)) : [],\n            metadata: isSet(object.metadata) ? String(object.metadata) : \"\",\n            joinedAt: isSet(object.joinedAt) ? Number(object.joinedAt) : 0,\n            name: isSet(object.name) ? String(object.name) : \"\",\n            version: isSet(object.version) ? Number(object.version) : 0,\n            permission: isSet(object.permission) ? exports.ParticipantPermission.fromJSON(object.permission) : undefined,\n            region: isSet(object.region) ? String(object.region) : \"\",\n            isPublisher: isSet(object.isPublisher) ? Boolean(object.isPublisher) : false,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.sid !== undefined && (obj.sid = message.sid);\n        message.identity !== undefined && (obj.identity = message.identity);\n        message.state !== undefined && (obj.state = participantInfo_StateToJSON(message.state));\n        if (message.tracks) {\n            obj.tracks = message.tracks.map((e) => e ? exports.TrackInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.tracks = [];\n        }\n        message.metadata !== undefined && (obj.metadata = message.metadata);\n        message.joinedAt !== undefined && (obj.joinedAt = Math.round(message.joinedAt));\n        message.name !== undefined && (obj.name = message.name);\n        message.version !== undefined && (obj.version = Math.round(message.version));\n        message.permission !== undefined &&\n            (obj.permission = message.permission ? exports.ParticipantPermission.toJSON(message.permission) : undefined);\n        message.region !== undefined && (obj.region = message.region);\n        message.isPublisher !== undefined && (obj.isPublisher = message.isPublisher);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        const message = createBaseParticipantInfo();\n        message.sid = (_a = object.sid) !== null && _a !== void 0 ? _a : \"\";\n        message.identity = (_b = object.identity) !== null && _b !== void 0 ? _b : \"\";\n        message.state = (_c = object.state) !== null && _c !== void 0 ? _c : 0;\n        message.tracks = ((_d = object.tracks) === null || _d === void 0 ? void 0 : _d.map((e) => exports.TrackInfo.fromPartial(e))) || [];\n        message.metadata = (_e = object.metadata) !== null && _e !== void 0 ? _e : \"\";\n        message.joinedAt = (_f = object.joinedAt) !== null && _f !== void 0 ? _f : 0;\n        message.name = (_g = object.name) !== null && _g !== void 0 ? _g : \"\";\n        message.version = (_h = object.version) !== null && _h !== void 0 ? _h : 0;\n        message.permission = (object.permission !== undefined && object.permission !== null)\n            ? exports.ParticipantPermission.fromPartial(object.permission)\n            : undefined;\n        message.region = (_j = object.region) !== null && _j !== void 0 ? _j : \"\";\n        message.isPublisher = (_k = object.isPublisher) !== null && _k !== void 0 ? _k : false;\n        return message;\n    },\n};\nfunction createBaseEncryption() {\n    return {};\n}\nexports.Encryption = {\n    encode(_, writer = minimal_1.default.Writer.create()) {\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseEncryption();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(_) {\n        return {};\n    },\n    toJSON(_) {\n        const obj = {};\n        return obj;\n    },\n    fromPartial(_) {\n        const message = createBaseEncryption();\n        return message;\n    },\n};\nfunction createBaseSimulcastCodecInfo() {\n    return { mimeType: \"\", mid: \"\", cid: \"\", layers: [] };\n}\nexports.SimulcastCodecInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.mimeType !== \"\") {\n            writer.uint32(10).string(message.mimeType);\n        }\n        if (message.mid !== \"\") {\n            writer.uint32(18).string(message.mid);\n        }\n        if (message.cid !== \"\") {\n            writer.uint32(26).string(message.cid);\n        }\n        for (const v of message.layers) {\n            exports.VideoLayer.encode(v, writer.uint32(34).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseSimulcastCodecInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.mimeType = reader.string();\n                    break;\n                case 2:\n                    message.mid = reader.string();\n                    break;\n                case 3:\n                    message.cid = reader.string();\n                    break;\n                case 4:\n                    message.layers.push(exports.VideoLayer.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            mimeType: isSet(object.mimeType) ? String(object.mimeType) : \"\",\n            mid: isSet(object.mid) ? String(object.mid) : \"\",\n            cid: isSet(object.cid) ? String(object.cid) : \"\",\n            layers: Array.isArray(object === null || object === void 0 ? void 0 : object.layers) ? object.layers.map((e) => exports.VideoLayer.fromJSON(e)) : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.mimeType !== undefined && (obj.mimeType = message.mimeType);\n        message.mid !== undefined && (obj.mid = message.mid);\n        message.cid !== undefined && (obj.cid = message.cid);\n        if (message.layers) {\n            obj.layers = message.layers.map((e) => e ? exports.VideoLayer.toJSON(e) : undefined);\n        }\n        else {\n            obj.layers = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d;\n        const message = createBaseSimulcastCodecInfo();\n        message.mimeType = (_a = object.mimeType) !== null && _a !== void 0 ? _a : \"\";\n        message.mid = (_b = object.mid) !== null && _b !== void 0 ? _b : \"\";\n        message.cid = (_c = object.cid) !== null && _c !== void 0 ? _c : \"\";\n        message.layers = ((_d = object.layers) === null || _d === void 0 ? void 0 : _d.map((e) => exports.VideoLayer.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseTrackInfo() {\n    return {\n        sid: \"\",\n        type: 0,\n        name: \"\",\n        muted: false,\n        width: 0,\n        height: 0,\n        simulcast: false,\n        disableDtx: false,\n        source: 0,\n        layers: [],\n        mimeType: \"\",\n        mid: \"\",\n        codecs: [],\n        stereo: false,\n        disableRed: false,\n        encryption: 0,\n        stream: \"\",\n    };\n}\nexports.TrackInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.sid !== \"\") {\n            writer.uint32(10).string(message.sid);\n        }\n        if (message.type !== 0) {\n            writer.uint32(16).int32(message.type);\n        }\n        if (message.name !== \"\") {\n            writer.uint32(26).string(message.name);\n        }\n        if (message.muted === true) {\n            writer.uint32(32).bool(message.muted);\n        }\n        if (message.width !== 0) {\n            writer.uint32(40).uint32(message.width);\n        }\n        if (message.height !== 0) {\n            writer.uint32(48).uint32(message.height);\n        }\n        if (message.simulcast === true) {\n            writer.uint32(56).bool(message.simulcast);\n        }\n        if (message.disableDtx === true) {\n            writer.uint32(64).bool(message.disableDtx);\n        }\n        if (message.source !== 0) {\n            writer.uint32(72).int32(message.source);\n        }\n        for (const v of message.layers) {\n            exports.VideoLayer.encode(v, writer.uint32(82).fork()).ldelim();\n        }\n        if (message.mimeType !== \"\") {\n            writer.uint32(90).string(message.mimeType);\n        }\n        if (message.mid !== \"\") {\n            writer.uint32(98).string(message.mid);\n        }\n        for (const v of message.codecs) {\n            exports.SimulcastCodecInfo.encode(v, writer.uint32(106).fork()).ldelim();\n        }\n        if (message.stereo === true) {\n            writer.uint32(112).bool(message.stereo);\n        }\n        if (message.disableRed === true) {\n            writer.uint32(120).bool(message.disableRed);\n        }\n        if (message.encryption !== 0) {\n            writer.uint32(128).int32(message.encryption);\n        }\n        if (message.stream !== \"\") {\n            writer.uint32(138).string(message.stream);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseTrackInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.sid = reader.string();\n                    break;\n                case 2:\n                    message.type = reader.int32();\n                    break;\n                case 3:\n                    message.name = reader.string();\n                    break;\n                case 4:\n                    message.muted = reader.bool();\n                    break;\n                case 5:\n                    message.width = reader.uint32();\n                    break;\n                case 6:\n                    message.height = reader.uint32();\n                    break;\n                case 7:\n                    message.simulcast = reader.bool();\n                    break;\n                case 8:\n                    message.disableDtx = reader.bool();\n                    break;\n                case 9:\n                    message.source = reader.int32();\n                    break;\n                case 10:\n                    message.layers.push(exports.VideoLayer.decode(reader, reader.uint32()));\n                    break;\n                case 11:\n                    message.mimeType = reader.string();\n                    break;\n                case 12:\n                    message.mid = reader.string();\n                    break;\n                case 13:\n                    message.codecs.push(exports.SimulcastCodecInfo.decode(reader, reader.uint32()));\n                    break;\n                case 14:\n                    message.stereo = reader.bool();\n                    break;\n                case 15:\n                    message.disableRed = reader.bool();\n                    break;\n                case 16:\n                    message.encryption = reader.int32();\n                    break;\n                case 17:\n                    message.stream = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            sid: isSet(object.sid) ? String(object.sid) : \"\",\n            type: isSet(object.type) ? trackTypeFromJSON(object.type) : 0,\n            name: isSet(object.name) ? String(object.name) : \"\",\n            muted: isSet(object.muted) ? Boolean(object.muted) : false,\n            width: isSet(object.width) ? Number(object.width) : 0,\n            height: isSet(object.height) ? Number(object.height) : 0,\n            simulcast: isSet(object.simulcast) ? Boolean(object.simulcast) : false,\n            disableDtx: isSet(object.disableDtx) ? Boolean(object.disableDtx) : false,\n            source: isSet(object.source) ? trackSourceFromJSON(object.source) : 0,\n            layers: Array.isArray(object === null || object === void 0 ? void 0 : object.layers) ? object.layers.map((e) => exports.VideoLayer.fromJSON(e)) : [],\n            mimeType: isSet(object.mimeType) ? String(object.mimeType) : \"\",\n            mid: isSet(object.mid) ? String(object.mid) : \"\",\n            codecs: Array.isArray(object === null || object === void 0 ? void 0 : object.codecs) ? object.codecs.map((e) => exports.SimulcastCodecInfo.fromJSON(e)) : [],\n            stereo: isSet(object.stereo) ? Boolean(object.stereo) : false,\n            disableRed: isSet(object.disableRed) ? Boolean(object.disableRed) : false,\n            encryption: isSet(object.encryption) ? encryption_TypeFromJSON(object.encryption) : 0,\n            stream: isSet(object.stream) ? String(object.stream) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.sid !== undefined && (obj.sid = message.sid);\n        message.type !== undefined && (obj.type = trackTypeToJSON(message.type));\n        message.name !== undefined && (obj.name = message.name);\n        message.muted !== undefined && (obj.muted = message.muted);\n        message.width !== undefined && (obj.width = Math.round(message.width));\n        message.height !== undefined && (obj.height = Math.round(message.height));\n        message.simulcast !== undefined && (obj.simulcast = message.simulcast);\n        message.disableDtx !== undefined && (obj.disableDtx = message.disableDtx);\n        message.source !== undefined && (obj.source = trackSourceToJSON(message.source));\n        if (message.layers) {\n            obj.layers = message.layers.map((e) => e ? exports.VideoLayer.toJSON(e) : undefined);\n        }\n        else {\n            obj.layers = [];\n        }\n        message.mimeType !== undefined && (obj.mimeType = message.mimeType);\n        message.mid !== undefined && (obj.mid = message.mid);\n        if (message.codecs) {\n            obj.codecs = message.codecs.map((e) => e ? exports.SimulcastCodecInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.codecs = [];\n        }\n        message.stereo !== undefined && (obj.stereo = message.stereo);\n        message.disableRed !== undefined && (obj.disableRed = message.disableRed);\n        message.encryption !== undefined && (obj.encryption = encryption_TypeToJSON(message.encryption));\n        message.stream !== undefined && (obj.stream = message.stream);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;\n        const message = createBaseTrackInfo();\n        message.sid = (_a = object.sid) !== null && _a !== void 0 ? _a : \"\";\n        message.type = (_b = object.type) !== null && _b !== void 0 ? _b : 0;\n        message.name = (_c = object.name) !== null && _c !== void 0 ? _c : \"\";\n        message.muted = (_d = object.muted) !== null && _d !== void 0 ? _d : false;\n        message.width = (_e = object.width) !== null && _e !== void 0 ? _e : 0;\n        message.height = (_f = object.height) !== null && _f !== void 0 ? _f : 0;\n        message.simulcast = (_g = object.simulcast) !== null && _g !== void 0 ? _g : false;\n        message.disableDtx = (_h = object.disableDtx) !== null && _h !== void 0 ? _h : false;\n        message.source = (_j = object.source) !== null && _j !== void 0 ? _j : 0;\n        message.layers = ((_k = object.layers) === null || _k === void 0 ? void 0 : _k.map((e) => exports.VideoLayer.fromPartial(e))) || [];\n        message.mimeType = (_l = object.mimeType) !== null && _l !== void 0 ? _l : \"\";\n        message.mid = (_m = object.mid) !== null && _m !== void 0 ? _m : \"\";\n        message.codecs = ((_o = object.codecs) === null || _o === void 0 ? void 0 : _o.map((e) => exports.SimulcastCodecInfo.fromPartial(e))) || [];\n        message.stereo = (_p = object.stereo) !== null && _p !== void 0 ? _p : false;\n        message.disableRed = (_q = object.disableRed) !== null && _q !== void 0 ? _q : false;\n        message.encryption = (_r = object.encryption) !== null && _r !== void 0 ? _r : 0;\n        message.stream = (_s = object.stream) !== null && _s !== void 0 ? _s : \"\";\n        return message;\n    },\n};\nfunction createBaseVideoLayer() {\n    return { quality: 0, width: 0, height: 0, bitrate: 0, ssrc: 0 };\n}\nexports.VideoLayer = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.quality !== 0) {\n            writer.uint32(8).int32(message.quality);\n        }\n        if (message.width !== 0) {\n            writer.uint32(16).uint32(message.width);\n        }\n        if (message.height !== 0) {\n            writer.uint32(24).uint32(message.height);\n        }\n        if (message.bitrate !== 0) {\n            writer.uint32(32).uint32(message.bitrate);\n        }\n        if (message.ssrc !== 0) {\n            writer.uint32(40).uint32(message.ssrc);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseVideoLayer();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.quality = reader.int32();\n                    break;\n                case 2:\n                    message.width = reader.uint32();\n                    break;\n                case 3:\n                    message.height = reader.uint32();\n                    break;\n                case 4:\n                    message.bitrate = reader.uint32();\n                    break;\n                case 5:\n                    message.ssrc = reader.uint32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            quality: isSet(object.quality) ? videoQualityFromJSON(object.quality) : 0,\n            width: isSet(object.width) ? Number(object.width) : 0,\n            height: isSet(object.height) ? Number(object.height) : 0,\n            bitrate: isSet(object.bitrate) ? Number(object.bitrate) : 0,\n            ssrc: isSet(object.ssrc) ? Number(object.ssrc) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.quality !== undefined && (obj.quality = videoQualityToJSON(message.quality));\n        message.width !== undefined && (obj.width = Math.round(message.width));\n        message.height !== undefined && (obj.height = Math.round(message.height));\n        message.bitrate !== undefined && (obj.bitrate = Math.round(message.bitrate));\n        message.ssrc !== undefined && (obj.ssrc = Math.round(message.ssrc));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e;\n        const message = createBaseVideoLayer();\n        message.quality = (_a = object.quality) !== null && _a !== void 0 ? _a : 0;\n        message.width = (_b = object.width) !== null && _b !== void 0 ? _b : 0;\n        message.height = (_c = object.height) !== null && _c !== void 0 ? _c : 0;\n        message.bitrate = (_d = object.bitrate) !== null && _d !== void 0 ? _d : 0;\n        message.ssrc = (_e = object.ssrc) !== null && _e !== void 0 ? _e : 0;\n        return message;\n    },\n};\nfunction createBaseDataPacket() {\n    return { kind: 0, user: undefined, speaker: undefined };\n}\nexports.DataPacket = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.kind !== 0) {\n            writer.uint32(8).int32(message.kind);\n        }\n        if (message.user !== undefined) {\n            exports.UserPacket.encode(message.user, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.speaker !== undefined) {\n            exports.ActiveSpeakerUpdate.encode(message.speaker, writer.uint32(26).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseDataPacket();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.kind = reader.int32();\n                    break;\n                case 2:\n                    message.user = exports.UserPacket.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.speaker = exports.ActiveSpeakerUpdate.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            kind: isSet(object.kind) ? dataPacket_KindFromJSON(object.kind) : 0,\n            user: isSet(object.user) ? exports.UserPacket.fromJSON(object.user) : undefined,\n            speaker: isSet(object.speaker) ? exports.ActiveSpeakerUpdate.fromJSON(object.speaker) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.kind !== undefined && (obj.kind = dataPacket_KindToJSON(message.kind));\n        message.user !== undefined && (obj.user = message.user ? exports.UserPacket.toJSON(message.user) : undefined);\n        message.speaker !== undefined &&\n            (obj.speaker = message.speaker ? exports.ActiveSpeakerUpdate.toJSON(message.speaker) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseDataPacket();\n        message.kind = (_a = object.kind) !== null && _a !== void 0 ? _a : 0;\n        message.user = (object.user !== undefined && object.user !== null)\n            ? exports.UserPacket.fromPartial(object.user)\n            : undefined;\n        message.speaker = (object.speaker !== undefined && object.speaker !== null)\n            ? exports.ActiveSpeakerUpdate.fromPartial(object.speaker)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseActiveSpeakerUpdate() {\n    return { speakers: [] };\n}\nexports.ActiveSpeakerUpdate = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        for (const v of message.speakers) {\n            exports.SpeakerInfo.encode(v, writer.uint32(10).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseActiveSpeakerUpdate();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.speakers.push(exports.SpeakerInfo.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            speakers: Array.isArray(object === null || object === void 0 ? void 0 : object.speakers) ? object.speakers.map((e) => exports.SpeakerInfo.fromJSON(e)) : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.speakers) {\n            obj.speakers = message.speakers.map((e) => e ? exports.SpeakerInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.speakers = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseActiveSpeakerUpdate();\n        message.speakers = ((_a = object.speakers) === null || _a === void 0 ? void 0 : _a.map((e) => exports.SpeakerInfo.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseSpeakerInfo() {\n    return { sid: \"\", level: 0, active: false };\n}\nexports.SpeakerInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.sid !== \"\") {\n            writer.uint32(10).string(message.sid);\n        }\n        if (message.level !== 0) {\n            writer.uint32(21).float(message.level);\n        }\n        if (message.active === true) {\n            writer.uint32(24).bool(message.active);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseSpeakerInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.sid = reader.string();\n                    break;\n                case 2:\n                    message.level = reader.float();\n                    break;\n                case 3:\n                    message.active = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            sid: isSet(object.sid) ? String(object.sid) : \"\",\n            level: isSet(object.level) ? Number(object.level) : 0,\n            active: isSet(object.active) ? Boolean(object.active) : false,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.sid !== undefined && (obj.sid = message.sid);\n        message.level !== undefined && (obj.level = message.level);\n        message.active !== undefined && (obj.active = message.active);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseSpeakerInfo();\n        message.sid = (_a = object.sid) !== null && _a !== void 0 ? _a : \"\";\n        message.level = (_b = object.level) !== null && _b !== void 0 ? _b : 0;\n        message.active = (_c = object.active) !== null && _c !== void 0 ? _c : false;\n        return message;\n    },\n};\nfunction createBaseUserPacket() {\n    return {\n        participantSid: \"\",\n        participantIdentity: \"\",\n        payload: new Uint8Array(),\n        destinationSids: [],\n        destinationIdentities: [],\n        topic: undefined,\n    };\n}\nexports.UserPacket = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.participantSid !== \"\") {\n            writer.uint32(10).string(message.participantSid);\n        }\n        if (message.participantIdentity !== \"\") {\n            writer.uint32(42).string(message.participantIdentity);\n        }\n        if (message.payload.length !== 0) {\n            writer.uint32(18).bytes(message.payload);\n        }\n        for (const v of message.destinationSids) {\n            writer.uint32(26).string(v);\n        }\n        for (const v of message.destinationIdentities) {\n            writer.uint32(50).string(v);\n        }\n        if (message.topic !== undefined) {\n            writer.uint32(34).string(message.topic);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseUserPacket();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.participantSid = reader.string();\n                    break;\n                case 5:\n                    message.participantIdentity = reader.string();\n                    break;\n                case 2:\n                    message.payload = reader.bytes();\n                    break;\n                case 3:\n                    message.destinationSids.push(reader.string());\n                    break;\n                case 6:\n                    message.destinationIdentities.push(reader.string());\n                    break;\n                case 4:\n                    message.topic = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            participantSid: isSet(object.participantSid) ? String(object.participantSid) : \"\",\n            participantIdentity: isSet(object.participantIdentity) ? String(object.participantIdentity) : \"\",\n            payload: isSet(object.payload) ? bytesFromBase64(object.payload) : new Uint8Array(),\n            destinationSids: Array.isArray(object === null || object === void 0 ? void 0 : object.destinationSids) ? object.destinationSids.map((e) => String(e)) : [],\n            destinationIdentities: Array.isArray(object === null || object === void 0 ? void 0 : object.destinationIdentities)\n                ? object.destinationIdentities.map((e) => String(e))\n                : [],\n            topic: isSet(object.topic) ? String(object.topic) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.participantSid !== undefined && (obj.participantSid = message.participantSid);\n        message.participantIdentity !== undefined && (obj.participantIdentity = message.participantIdentity);\n        message.payload !== undefined &&\n            (obj.payload = base64FromBytes(message.payload !== undefined ? message.payload : new Uint8Array()));\n        if (message.destinationSids) {\n            obj.destinationSids = message.destinationSids.map((e) => e);\n        }\n        else {\n            obj.destinationSids = [];\n        }\n        if (message.destinationIdentities) {\n            obj.destinationIdentities = message.destinationIdentities.map((e) => e);\n        }\n        else {\n            obj.destinationIdentities = [];\n        }\n        message.topic !== undefined && (obj.topic = message.topic);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f;\n        const message = createBaseUserPacket();\n        message.participantSid = (_a = object.participantSid) !== null && _a !== void 0 ? _a : \"\";\n        message.participantIdentity = (_b = object.participantIdentity) !== null && _b !== void 0 ? _b : \"\";\n        message.payload = (_c = object.payload) !== null && _c !== void 0 ? _c : new Uint8Array();\n        message.destinationSids = ((_d = object.destinationSids) === null || _d === void 0 ? void 0 : _d.map((e) => e)) || [];\n        message.destinationIdentities = ((_e = object.destinationIdentities) === null || _e === void 0 ? void 0 : _e.map((e) => e)) || [];\n        message.topic = (_f = object.topic) !== null && _f !== void 0 ? _f : undefined;\n        return message;\n    },\n};\nfunction createBaseParticipantTracks() {\n    return { participantSid: \"\", trackSids: [] };\n}\nexports.ParticipantTracks = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.participantSid !== \"\") {\n            writer.uint32(10).string(message.participantSid);\n        }\n        for (const v of message.trackSids) {\n            writer.uint32(18).string(v);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseParticipantTracks();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.participantSid = reader.string();\n                    break;\n                case 2:\n                    message.trackSids.push(reader.string());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            participantSid: isSet(object.participantSid) ? String(object.participantSid) : \"\",\n            trackSids: Array.isArray(object === null || object === void 0 ? void 0 : object.trackSids) ? object.trackSids.map((e) => String(e)) : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.participantSid !== undefined && (obj.participantSid = message.participantSid);\n        if (message.trackSids) {\n            obj.trackSids = message.trackSids.map((e) => e);\n        }\n        else {\n            obj.trackSids = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseParticipantTracks();\n        message.participantSid = (_a = object.participantSid) !== null && _a !== void 0 ? _a : \"\";\n        message.trackSids = ((_b = object.trackSids) === null || _b === void 0 ? void 0 : _b.map((e) => e)) || [];\n        return message;\n    },\n};\nfunction createBaseServerInfo() {\n    return { edition: 0, version: \"\", protocol: 0, region: \"\", nodeId: \"\", debugInfo: \"\" };\n}\nexports.ServerInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.edition !== 0) {\n            writer.uint32(8).int32(message.edition);\n        }\n        if (message.version !== \"\") {\n            writer.uint32(18).string(message.version);\n        }\n        if (message.protocol !== 0) {\n            writer.uint32(24).int32(message.protocol);\n        }\n        if (message.region !== \"\") {\n            writer.uint32(34).string(message.region);\n        }\n        if (message.nodeId !== \"\") {\n            writer.uint32(42).string(message.nodeId);\n        }\n        if (message.debugInfo !== \"\") {\n            writer.uint32(50).string(message.debugInfo);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseServerInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.edition = reader.int32();\n                    break;\n                case 2:\n                    message.version = reader.string();\n                    break;\n                case 3:\n                    message.protocol = reader.int32();\n                    break;\n                case 4:\n                    message.region = reader.string();\n                    break;\n                case 5:\n                    message.nodeId = reader.string();\n                    break;\n                case 6:\n                    message.debugInfo = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            edition: isSet(object.edition) ? serverInfo_EditionFromJSON(object.edition) : 0,\n            version: isSet(object.version) ? String(object.version) : \"\",\n            protocol: isSet(object.protocol) ? Number(object.protocol) : 0,\n            region: isSet(object.region) ? String(object.region) : \"\",\n            nodeId: isSet(object.nodeId) ? String(object.nodeId) : \"\",\n            debugInfo: isSet(object.debugInfo) ? String(object.debugInfo) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.edition !== undefined && (obj.edition = serverInfo_EditionToJSON(message.edition));\n        message.version !== undefined && (obj.version = message.version);\n        message.protocol !== undefined && (obj.protocol = Math.round(message.protocol));\n        message.region !== undefined && (obj.region = message.region);\n        message.nodeId !== undefined && (obj.nodeId = message.nodeId);\n        message.debugInfo !== undefined && (obj.debugInfo = message.debugInfo);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f;\n        const message = createBaseServerInfo();\n        message.edition = (_a = object.edition) !== null && _a !== void 0 ? _a : 0;\n        message.version = (_b = object.version) !== null && _b !== void 0 ? _b : \"\";\n        message.protocol = (_c = object.protocol) !== null && _c !== void 0 ? _c : 0;\n        message.region = (_d = object.region) !== null && _d !== void 0 ? _d : \"\";\n        message.nodeId = (_e = object.nodeId) !== null && _e !== void 0 ? _e : \"\";\n        message.debugInfo = (_f = object.debugInfo) !== null && _f !== void 0 ? _f : \"\";\n        return message;\n    },\n};\nfunction createBaseClientInfo() {\n    return {\n        sdk: 0,\n        version: \"\",\n        protocol: 0,\n        os: \"\",\n        osVersion: \"\",\n        deviceModel: \"\",\n        browser: \"\",\n        browserVersion: \"\",\n        address: \"\",\n        network: \"\",\n    };\n}\nexports.ClientInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.sdk !== 0) {\n            writer.uint32(8).int32(message.sdk);\n        }\n        if (message.version !== \"\") {\n            writer.uint32(18).string(message.version);\n        }\n        if (message.protocol !== 0) {\n            writer.uint32(24).int32(message.protocol);\n        }\n        if (message.os !== \"\") {\n            writer.uint32(34).string(message.os);\n        }\n        if (message.osVersion !== \"\") {\n            writer.uint32(42).string(message.osVersion);\n        }\n        if (message.deviceModel !== \"\") {\n            writer.uint32(50).string(message.deviceModel);\n        }\n        if (message.browser !== \"\") {\n            writer.uint32(58).string(message.browser);\n        }\n        if (message.browserVersion !== \"\") {\n            writer.uint32(66).string(message.browserVersion);\n        }\n        if (message.address !== \"\") {\n            writer.uint32(74).string(message.address);\n        }\n        if (message.network !== \"\") {\n            writer.uint32(82).string(message.network);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseClientInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.sdk = reader.int32();\n                    break;\n                case 2:\n                    message.version = reader.string();\n                    break;\n                case 3:\n                    message.protocol = reader.int32();\n                    break;\n                case 4:\n                    message.os = reader.string();\n                    break;\n                case 5:\n                    message.osVersion = reader.string();\n                    break;\n                case 6:\n                    message.deviceModel = reader.string();\n                    break;\n                case 7:\n                    message.browser = reader.string();\n                    break;\n                case 8:\n                    message.browserVersion = reader.string();\n                    break;\n                case 9:\n                    message.address = reader.string();\n                    break;\n                case 10:\n                    message.network = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            sdk: isSet(object.sdk) ? clientInfo_SDKFromJSON(object.sdk) : 0,\n            version: isSet(object.version) ? String(object.version) : \"\",\n            protocol: isSet(object.protocol) ? Number(object.protocol) : 0,\n            os: isSet(object.os) ? String(object.os) : \"\",\n            osVersion: isSet(object.osVersion) ? String(object.osVersion) : \"\",\n            deviceModel: isSet(object.deviceModel) ? String(object.deviceModel) : \"\",\n            browser: isSet(object.browser) ? String(object.browser) : \"\",\n            browserVersion: isSet(object.browserVersion) ? String(object.browserVersion) : \"\",\n            address: isSet(object.address) ? String(object.address) : \"\",\n            network: isSet(object.network) ? String(object.network) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.sdk !== undefined && (obj.sdk = clientInfo_SDKToJSON(message.sdk));\n        message.version !== undefined && (obj.version = message.version);\n        message.protocol !== undefined && (obj.protocol = Math.round(message.protocol));\n        message.os !== undefined && (obj.os = message.os);\n        message.osVersion !== undefined && (obj.osVersion = message.osVersion);\n        message.deviceModel !== undefined && (obj.deviceModel = message.deviceModel);\n        message.browser !== undefined && (obj.browser = message.browser);\n        message.browserVersion !== undefined && (obj.browserVersion = message.browserVersion);\n        message.address !== undefined && (obj.address = message.address);\n        message.network !== undefined && (obj.network = message.network);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        const message = createBaseClientInfo();\n        message.sdk = (_a = object.sdk) !== null && _a !== void 0 ? _a : 0;\n        message.version = (_b = object.version) !== null && _b !== void 0 ? _b : \"\";\n        message.protocol = (_c = object.protocol) !== null && _c !== void 0 ? _c : 0;\n        message.os = (_d = object.os) !== null && _d !== void 0 ? _d : \"\";\n        message.osVersion = (_e = object.osVersion) !== null && _e !== void 0 ? _e : \"\";\n        message.deviceModel = (_f = object.deviceModel) !== null && _f !== void 0 ? _f : \"\";\n        message.browser = (_g = object.browser) !== null && _g !== void 0 ? _g : \"\";\n        message.browserVersion = (_h = object.browserVersion) !== null && _h !== void 0 ? _h : \"\";\n        message.address = (_j = object.address) !== null && _j !== void 0 ? _j : \"\";\n        message.network = (_k = object.network) !== null && _k !== void 0 ? _k : \"\";\n        return message;\n    },\n};\nfunction createBaseClientConfiguration() {\n    return { video: undefined, screen: undefined, resumeConnection: 0, disabledCodecs: undefined, forceRelay: 0 };\n}\nexports.ClientConfiguration = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.video !== undefined) {\n            exports.VideoConfiguration.encode(message.video, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.screen !== undefined) {\n            exports.VideoConfiguration.encode(message.screen, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.resumeConnection !== 0) {\n            writer.uint32(24).int32(message.resumeConnection);\n        }\n        if (message.disabledCodecs !== undefined) {\n            exports.DisabledCodecs.encode(message.disabledCodecs, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.forceRelay !== 0) {\n            writer.uint32(40).int32(message.forceRelay);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseClientConfiguration();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.video = exports.VideoConfiguration.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.screen = exports.VideoConfiguration.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.resumeConnection = reader.int32();\n                    break;\n                case 4:\n                    message.disabledCodecs = exports.DisabledCodecs.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.forceRelay = reader.int32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            video: isSet(object.video) ? exports.VideoConfiguration.fromJSON(object.video) : undefined,\n            screen: isSet(object.screen) ? exports.VideoConfiguration.fromJSON(object.screen) : undefined,\n            resumeConnection: isSet(object.resumeConnection) ? clientConfigSettingFromJSON(object.resumeConnection) : 0,\n            disabledCodecs: isSet(object.disabledCodecs) ? exports.DisabledCodecs.fromJSON(object.disabledCodecs) : undefined,\n            forceRelay: isSet(object.forceRelay) ? clientConfigSettingFromJSON(object.forceRelay) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.video !== undefined && (obj.video = message.video ? exports.VideoConfiguration.toJSON(message.video) : undefined);\n        message.screen !== undefined &&\n            (obj.screen = message.screen ? exports.VideoConfiguration.toJSON(message.screen) : undefined);\n        message.resumeConnection !== undefined &&\n            (obj.resumeConnection = clientConfigSettingToJSON(message.resumeConnection));\n        message.disabledCodecs !== undefined &&\n            (obj.disabledCodecs = message.disabledCodecs ? exports.DisabledCodecs.toJSON(message.disabledCodecs) : undefined);\n        message.forceRelay !== undefined && (obj.forceRelay = clientConfigSettingToJSON(message.forceRelay));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseClientConfiguration();\n        message.video = (object.video !== undefined && object.video !== null)\n            ? exports.VideoConfiguration.fromPartial(object.video)\n            : undefined;\n        message.screen = (object.screen !== undefined && object.screen !== null)\n            ? exports.VideoConfiguration.fromPartial(object.screen)\n            : undefined;\n        message.resumeConnection = (_a = object.resumeConnection) !== null && _a !== void 0 ? _a : 0;\n        message.disabledCodecs = (object.disabledCodecs !== undefined && object.disabledCodecs !== null)\n            ? exports.DisabledCodecs.fromPartial(object.disabledCodecs)\n            : undefined;\n        message.forceRelay = (_b = object.forceRelay) !== null && _b !== void 0 ? _b : 0;\n        return message;\n    },\n};\nfunction createBaseVideoConfiguration() {\n    return { hardwareEncoder: 0 };\n}\nexports.VideoConfiguration = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.hardwareEncoder !== 0) {\n            writer.uint32(8).int32(message.hardwareEncoder);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseVideoConfiguration();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.hardwareEncoder = reader.int32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { hardwareEncoder: isSet(object.hardwareEncoder) ? clientConfigSettingFromJSON(object.hardwareEncoder) : 0 };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.hardwareEncoder !== undefined && (obj.hardwareEncoder = clientConfigSettingToJSON(message.hardwareEncoder));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseVideoConfiguration();\n        message.hardwareEncoder = (_a = object.hardwareEncoder) !== null && _a !== void 0 ? _a : 0;\n        return message;\n    },\n};\nfunction createBaseDisabledCodecs() {\n    return { codecs: [], publish: [] };\n}\nexports.DisabledCodecs = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        for (const v of message.codecs) {\n            exports.Codec.encode(v, writer.uint32(10).fork()).ldelim();\n        }\n        for (const v of message.publish) {\n            exports.Codec.encode(v, writer.uint32(18).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseDisabledCodecs();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.codecs.push(exports.Codec.decode(reader, reader.uint32()));\n                    break;\n                case 2:\n                    message.publish.push(exports.Codec.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            codecs: Array.isArray(object === null || object === void 0 ? void 0 : object.codecs) ? object.codecs.map((e) => exports.Codec.fromJSON(e)) : [],\n            publish: Array.isArray(object === null || object === void 0 ? void 0 : object.publish) ? object.publish.map((e) => exports.Codec.fromJSON(e)) : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.codecs) {\n            obj.codecs = message.codecs.map((e) => e ? exports.Codec.toJSON(e) : undefined);\n        }\n        else {\n            obj.codecs = [];\n        }\n        if (message.publish) {\n            obj.publish = message.publish.map((e) => e ? exports.Codec.toJSON(e) : undefined);\n        }\n        else {\n            obj.publish = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseDisabledCodecs();\n        message.codecs = ((_a = object.codecs) === null || _a === void 0 ? void 0 : _a.map((e) => exports.Codec.fromPartial(e))) || [];\n        message.publish = ((_b = object.publish) === null || _b === void 0 ? void 0 : _b.map((e) => exports.Codec.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseRTPDrift() {\n    return {\n        startTime: undefined,\n        endTime: undefined,\n        duration: 0,\n        startTimestamp: 0,\n        endTimestamp: 0,\n        rtpClockTicks: 0,\n        driftSamples: 0,\n        driftMs: 0,\n        clockRate: 0,\n    };\n}\nexports.RTPDrift = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.startTime !== undefined) {\n            timestamp_1.Timestamp.encode(toTimestamp(message.startTime), writer.uint32(10).fork()).ldelim();\n        }\n        if (message.endTime !== undefined) {\n            timestamp_1.Timestamp.encode(toTimestamp(message.endTime), writer.uint32(18).fork()).ldelim();\n        }\n        if (message.duration !== 0) {\n            writer.uint32(25).double(message.duration);\n        }\n        if (message.startTimestamp !== 0) {\n            writer.uint32(32).uint64(message.startTimestamp);\n        }\n        if (message.endTimestamp !== 0) {\n            writer.uint32(40).uint64(message.endTimestamp);\n        }\n        if (message.rtpClockTicks !== 0) {\n            writer.uint32(48).uint64(message.rtpClockTicks);\n        }\n        if (message.driftSamples !== 0) {\n            writer.uint32(56).int64(message.driftSamples);\n        }\n        if (message.driftMs !== 0) {\n            writer.uint32(65).double(message.driftMs);\n        }\n        if (message.clockRate !== 0) {\n            writer.uint32(73).double(message.clockRate);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseRTPDrift();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.startTime = fromTimestamp(timestamp_1.Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 2:\n                    message.endTime = fromTimestamp(timestamp_1.Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 3:\n                    message.duration = reader.double();\n                    break;\n                case 4:\n                    message.startTimestamp = longToNumber(reader.uint64());\n                    break;\n                case 5:\n                    message.endTimestamp = longToNumber(reader.uint64());\n                    break;\n                case 6:\n                    message.rtpClockTicks = longToNumber(reader.uint64());\n                    break;\n                case 7:\n                    message.driftSamples = longToNumber(reader.int64());\n                    break;\n                case 8:\n                    message.driftMs = reader.double();\n                    break;\n                case 9:\n                    message.clockRate = reader.double();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            startTime: isSet(object.startTime) ? fromJsonTimestamp(object.startTime) : undefined,\n            endTime: isSet(object.endTime) ? fromJsonTimestamp(object.endTime) : undefined,\n            duration: isSet(object.duration) ? Number(object.duration) : 0,\n            startTimestamp: isSet(object.startTimestamp) ? Number(object.startTimestamp) : 0,\n            endTimestamp: isSet(object.endTimestamp) ? Number(object.endTimestamp) : 0,\n            rtpClockTicks: isSet(object.rtpClockTicks) ? Number(object.rtpClockTicks) : 0,\n            driftSamples: isSet(object.driftSamples) ? Number(object.driftSamples) : 0,\n            driftMs: isSet(object.driftMs) ? Number(object.driftMs) : 0,\n            clockRate: isSet(object.clockRate) ? Number(object.clockRate) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.startTime !== undefined && (obj.startTime = message.startTime.toISOString());\n        message.endTime !== undefined && (obj.endTime = message.endTime.toISOString());\n        message.duration !== undefined && (obj.duration = message.duration);\n        message.startTimestamp !== undefined && (obj.startTimestamp = Math.round(message.startTimestamp));\n        message.endTimestamp !== undefined && (obj.endTimestamp = Math.round(message.endTimestamp));\n        message.rtpClockTicks !== undefined && (obj.rtpClockTicks = Math.round(message.rtpClockTicks));\n        message.driftSamples !== undefined && (obj.driftSamples = Math.round(message.driftSamples));\n        message.driftMs !== undefined && (obj.driftMs = message.driftMs);\n        message.clockRate !== undefined && (obj.clockRate = message.clockRate);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        const message = createBaseRTPDrift();\n        message.startTime = (_a = object.startTime) !== null && _a !== void 0 ? _a : undefined;\n        message.endTime = (_b = object.endTime) !== null && _b !== void 0 ? _b : undefined;\n        message.duration = (_c = object.duration) !== null && _c !== void 0 ? _c : 0;\n        message.startTimestamp = (_d = object.startTimestamp) !== null && _d !== void 0 ? _d : 0;\n        message.endTimestamp = (_e = object.endTimestamp) !== null && _e !== void 0 ? _e : 0;\n        message.rtpClockTicks = (_f = object.rtpClockTicks) !== null && _f !== void 0 ? _f : 0;\n        message.driftSamples = (_g = object.driftSamples) !== null && _g !== void 0 ? _g : 0;\n        message.driftMs = (_h = object.driftMs) !== null && _h !== void 0 ? _h : 0;\n        message.clockRate = (_j = object.clockRate) !== null && _j !== void 0 ? _j : 0;\n        return message;\n    },\n};\nfunction createBaseRTPStats() {\n    return {\n        startTime: undefined,\n        endTime: undefined,\n        duration: 0,\n        packets: 0,\n        packetRate: 0,\n        bytes: 0,\n        headerBytes: 0,\n        bitrate: 0,\n        packetsLost: 0,\n        packetLossRate: 0,\n        packetLossPercentage: 0,\n        packetsDuplicate: 0,\n        packetDuplicateRate: 0,\n        bytesDuplicate: 0,\n        headerBytesDuplicate: 0,\n        bitrateDuplicate: 0,\n        packetsPadding: 0,\n        packetPaddingRate: 0,\n        bytesPadding: 0,\n        headerBytesPadding: 0,\n        bitratePadding: 0,\n        packetsOutOfOrder: 0,\n        frames: 0,\n        frameRate: 0,\n        jitterCurrent: 0,\n        jitterMax: 0,\n        gapHistogram: {},\n        nacks: 0,\n        nackAcks: 0,\n        nackMisses: 0,\n        nackRepeated: 0,\n        plis: 0,\n        lastPli: undefined,\n        firs: 0,\n        lastFir: undefined,\n        rttCurrent: 0,\n        rttMax: 0,\n        keyFrames: 0,\n        lastKeyFrame: undefined,\n        layerLockPlis: 0,\n        lastLayerLockPli: undefined,\n        packetDrift: undefined,\n        reportDrift: undefined,\n    };\n}\nexports.RTPStats = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.startTime !== undefined) {\n            timestamp_1.Timestamp.encode(toTimestamp(message.startTime), writer.uint32(10).fork()).ldelim();\n        }\n        if (message.endTime !== undefined) {\n            timestamp_1.Timestamp.encode(toTimestamp(message.endTime), writer.uint32(18).fork()).ldelim();\n        }\n        if (message.duration !== 0) {\n            writer.uint32(25).double(message.duration);\n        }\n        if (message.packets !== 0) {\n            writer.uint32(32).uint32(message.packets);\n        }\n        if (message.packetRate !== 0) {\n            writer.uint32(41).double(message.packetRate);\n        }\n        if (message.bytes !== 0) {\n            writer.uint32(48).uint64(message.bytes);\n        }\n        if (message.headerBytes !== 0) {\n            writer.uint32(312).uint64(message.headerBytes);\n        }\n        if (message.bitrate !== 0) {\n            writer.uint32(57).double(message.bitrate);\n        }\n        if (message.packetsLost !== 0) {\n            writer.uint32(64).uint32(message.packetsLost);\n        }\n        if (message.packetLossRate !== 0) {\n            writer.uint32(73).double(message.packetLossRate);\n        }\n        if (message.packetLossPercentage !== 0) {\n            writer.uint32(85).float(message.packetLossPercentage);\n        }\n        if (message.packetsDuplicate !== 0) {\n            writer.uint32(88).uint32(message.packetsDuplicate);\n        }\n        if (message.packetDuplicateRate !== 0) {\n            writer.uint32(97).double(message.packetDuplicateRate);\n        }\n        if (message.bytesDuplicate !== 0) {\n            writer.uint32(104).uint64(message.bytesDuplicate);\n        }\n        if (message.headerBytesDuplicate !== 0) {\n            writer.uint32(320).uint64(message.headerBytesDuplicate);\n        }\n        if (message.bitrateDuplicate !== 0) {\n            writer.uint32(113).double(message.bitrateDuplicate);\n        }\n        if (message.packetsPadding !== 0) {\n            writer.uint32(120).uint32(message.packetsPadding);\n        }\n        if (message.packetPaddingRate !== 0) {\n            writer.uint32(129).double(message.packetPaddingRate);\n        }\n        if (message.bytesPadding !== 0) {\n            writer.uint32(136).uint64(message.bytesPadding);\n        }\n        if (message.headerBytesPadding !== 0) {\n            writer.uint32(328).uint64(message.headerBytesPadding);\n        }\n        if (message.bitratePadding !== 0) {\n            writer.uint32(145).double(message.bitratePadding);\n        }\n        if (message.packetsOutOfOrder !== 0) {\n            writer.uint32(152).uint32(message.packetsOutOfOrder);\n        }\n        if (message.frames !== 0) {\n            writer.uint32(160).uint32(message.frames);\n        }\n        if (message.frameRate !== 0) {\n            writer.uint32(169).double(message.frameRate);\n        }\n        if (message.jitterCurrent !== 0) {\n            writer.uint32(177).double(message.jitterCurrent);\n        }\n        if (message.jitterMax !== 0) {\n            writer.uint32(185).double(message.jitterMax);\n        }\n        Object.entries(message.gapHistogram).forEach(([key, value]) => {\n            exports.RTPStats_GapHistogramEntry.encode({ key: key, value }, writer.uint32(194).fork()).ldelim();\n        });\n        if (message.nacks !== 0) {\n            writer.uint32(200).uint32(message.nacks);\n        }\n        if (message.nackAcks !== 0) {\n            writer.uint32(296).uint32(message.nackAcks);\n        }\n        if (message.nackMisses !== 0) {\n            writer.uint32(208).uint32(message.nackMisses);\n        }\n        if (message.nackRepeated !== 0) {\n            writer.uint32(304).uint32(message.nackRepeated);\n        }\n        if (message.plis !== 0) {\n            writer.uint32(216).uint32(message.plis);\n        }\n        if (message.lastPli !== undefined) {\n            timestamp_1.Timestamp.encode(toTimestamp(message.lastPli), writer.uint32(226).fork()).ldelim();\n        }\n        if (message.firs !== 0) {\n            writer.uint32(232).uint32(message.firs);\n        }\n        if (message.lastFir !== undefined) {\n            timestamp_1.Timestamp.encode(toTimestamp(message.lastFir), writer.uint32(242).fork()).ldelim();\n        }\n        if (message.rttCurrent !== 0) {\n            writer.uint32(248).uint32(message.rttCurrent);\n        }\n        if (message.rttMax !== 0) {\n            writer.uint32(256).uint32(message.rttMax);\n        }\n        if (message.keyFrames !== 0) {\n            writer.uint32(264).uint32(message.keyFrames);\n        }\n        if (message.lastKeyFrame !== undefined) {\n            timestamp_1.Timestamp.encode(toTimestamp(message.lastKeyFrame), writer.uint32(274).fork()).ldelim();\n        }\n        if (message.layerLockPlis !== 0) {\n            writer.uint32(280).uint32(message.layerLockPlis);\n        }\n        if (message.lastLayerLockPli !== undefined) {\n            timestamp_1.Timestamp.encode(toTimestamp(message.lastLayerLockPli), writer.uint32(290).fork()).ldelim();\n        }\n        if (message.packetDrift !== undefined) {\n            exports.RTPDrift.encode(message.packetDrift, writer.uint32(354).fork()).ldelim();\n        }\n        if (message.reportDrift !== undefined) {\n            exports.RTPDrift.encode(message.reportDrift, writer.uint32(362).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseRTPStats();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.startTime = fromTimestamp(timestamp_1.Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 2:\n                    message.endTime = fromTimestamp(timestamp_1.Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 3:\n                    message.duration = reader.double();\n                    break;\n                case 4:\n                    message.packets = reader.uint32();\n                    break;\n                case 5:\n                    message.packetRate = reader.double();\n                    break;\n                case 6:\n                    message.bytes = longToNumber(reader.uint64());\n                    break;\n                case 39:\n                    message.headerBytes = longToNumber(reader.uint64());\n                    break;\n                case 7:\n                    message.bitrate = reader.double();\n                    break;\n                case 8:\n                    message.packetsLost = reader.uint32();\n                    break;\n                case 9:\n                    message.packetLossRate = reader.double();\n                    break;\n                case 10:\n                    message.packetLossPercentage = reader.float();\n                    break;\n                case 11:\n                    message.packetsDuplicate = reader.uint32();\n                    break;\n                case 12:\n                    message.packetDuplicateRate = reader.double();\n                    break;\n                case 13:\n                    message.bytesDuplicate = longToNumber(reader.uint64());\n                    break;\n                case 40:\n                    message.headerBytesDuplicate = longToNumber(reader.uint64());\n                    break;\n                case 14:\n                    message.bitrateDuplicate = reader.double();\n                    break;\n                case 15:\n                    message.packetsPadding = reader.uint32();\n                    break;\n                case 16:\n                    message.packetPaddingRate = reader.double();\n                    break;\n                case 17:\n                    message.bytesPadding = longToNumber(reader.uint64());\n                    break;\n                case 41:\n                    message.headerBytesPadding = longToNumber(reader.uint64());\n                    break;\n                case 18:\n                    message.bitratePadding = reader.double();\n                    break;\n                case 19:\n                    message.packetsOutOfOrder = reader.uint32();\n                    break;\n                case 20:\n                    message.frames = reader.uint32();\n                    break;\n                case 21:\n                    message.frameRate = reader.double();\n                    break;\n                case 22:\n                    message.jitterCurrent = reader.double();\n                    break;\n                case 23:\n                    message.jitterMax = reader.double();\n                    break;\n                case 24:\n                    const entry24 = exports.RTPStats_GapHistogramEntry.decode(reader, reader.uint32());\n                    if (entry24.value !== undefined) {\n                        message.gapHistogram[entry24.key] = entry24.value;\n                    }\n                    break;\n                case 25:\n                    message.nacks = reader.uint32();\n                    break;\n                case 37:\n                    message.nackAcks = reader.uint32();\n                    break;\n                case 26:\n                    message.nackMisses = reader.uint32();\n                    break;\n                case 38:\n                    message.nackRepeated = reader.uint32();\n                    break;\n                case 27:\n                    message.plis = reader.uint32();\n                    break;\n                case 28:\n                    message.lastPli = fromTimestamp(timestamp_1.Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 29:\n                    message.firs = reader.uint32();\n                    break;\n                case 30:\n                    message.lastFir = fromTimestamp(timestamp_1.Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 31:\n                    message.rttCurrent = reader.uint32();\n                    break;\n                case 32:\n                    message.rttMax = reader.uint32();\n                    break;\n                case 33:\n                    message.keyFrames = reader.uint32();\n                    break;\n                case 34:\n                    message.lastKeyFrame = fromTimestamp(timestamp_1.Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 35:\n                    message.layerLockPlis = reader.uint32();\n                    break;\n                case 36:\n                    message.lastLayerLockPli = fromTimestamp(timestamp_1.Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 44:\n                    message.packetDrift = exports.RTPDrift.decode(reader, reader.uint32());\n                    break;\n                case 45:\n                    message.reportDrift = exports.RTPDrift.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            startTime: isSet(object.startTime) ? fromJsonTimestamp(object.startTime) : undefined,\n            endTime: isSet(object.endTime) ? fromJsonTimestamp(object.endTime) : undefined,\n            duration: isSet(object.duration) ? Number(object.duration) : 0,\n            packets: isSet(object.packets) ? Number(object.packets) : 0,\n            packetRate: isSet(object.packetRate) ? Number(object.packetRate) : 0,\n            bytes: isSet(object.bytes) ? Number(object.bytes) : 0,\n            headerBytes: isSet(object.headerBytes) ? Number(object.headerBytes) : 0,\n            bitrate: isSet(object.bitrate) ? Number(object.bitrate) : 0,\n            packetsLost: isSet(object.packetsLost) ? Number(object.packetsLost) : 0,\n            packetLossRate: isSet(object.packetLossRate) ? Number(object.packetLossRate) : 0,\n            packetLossPercentage: isSet(object.packetLossPercentage) ? Number(object.packetLossPercentage) : 0,\n            packetsDuplicate: isSet(object.packetsDuplicate) ? Number(object.packetsDuplicate) : 0,\n            packetDuplicateRate: isSet(object.packetDuplicateRate) ? Number(object.packetDuplicateRate) : 0,\n            bytesDuplicate: isSet(object.bytesDuplicate) ? Number(object.bytesDuplicate) : 0,\n            headerBytesDuplicate: isSet(object.headerBytesDuplicate) ? Number(object.headerBytesDuplicate) : 0,\n            bitrateDuplicate: isSet(object.bitrateDuplicate) ? Number(object.bitrateDuplicate) : 0,\n            packetsPadding: isSet(object.packetsPadding) ? Number(object.packetsPadding) : 0,\n            packetPaddingRate: isSet(object.packetPaddingRate) ? Number(object.packetPaddingRate) : 0,\n            bytesPadding: isSet(object.bytesPadding) ? Number(object.bytesPadding) : 0,\n            headerBytesPadding: isSet(object.headerBytesPadding) ? Number(object.headerBytesPadding) : 0,\n            bitratePadding: isSet(object.bitratePadding) ? Number(object.bitratePadding) : 0,\n            packetsOutOfOrder: isSet(object.packetsOutOfOrder) ? Number(object.packetsOutOfOrder) : 0,\n            frames: isSet(object.frames) ? Number(object.frames) : 0,\n            frameRate: isSet(object.frameRate) ? Number(object.frameRate) : 0,\n            jitterCurrent: isSet(object.jitterCurrent) ? Number(object.jitterCurrent) : 0,\n            jitterMax: isSet(object.jitterMax) ? Number(object.jitterMax) : 0,\n            gapHistogram: isObject(object.gapHistogram)\n                ? Object.entries(object.gapHistogram).reduce((acc, [key, value]) => {\n                    acc[Number(key)] = Number(value);\n                    return acc;\n                }, {})\n                : {},\n            nacks: isSet(object.nacks) ? Number(object.nacks) : 0,\n            nackAcks: isSet(object.nackAcks) ? Number(object.nackAcks) : 0,\n            nackMisses: isSet(object.nackMisses) ? Number(object.nackMisses) : 0,\n            nackRepeated: isSet(object.nackRepeated) ? Number(object.nackRepeated) : 0,\n            plis: isSet(object.plis) ? Number(object.plis) : 0,\n            lastPli: isSet(object.lastPli) ? fromJsonTimestamp(object.lastPli) : undefined,\n            firs: isSet(object.firs) ? Number(object.firs) : 0,\n            lastFir: isSet(object.lastFir) ? fromJsonTimestamp(object.lastFir) : undefined,\n            rttCurrent: isSet(object.rttCurrent) ? Number(object.rttCurrent) : 0,\n            rttMax: isSet(object.rttMax) ? Number(object.rttMax) : 0,\n            keyFrames: isSet(object.keyFrames) ? Number(object.keyFrames) : 0,\n            lastKeyFrame: isSet(object.lastKeyFrame) ? fromJsonTimestamp(object.lastKeyFrame) : undefined,\n            layerLockPlis: isSet(object.layerLockPlis) ? Number(object.layerLockPlis) : 0,\n            lastLayerLockPli: isSet(object.lastLayerLockPli) ? fromJsonTimestamp(object.lastLayerLockPli) : undefined,\n            packetDrift: isSet(object.packetDrift) ? exports.RTPDrift.fromJSON(object.packetDrift) : undefined,\n            reportDrift: isSet(object.reportDrift) ? exports.RTPDrift.fromJSON(object.reportDrift) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.startTime !== undefined && (obj.startTime = message.startTime.toISOString());\n        message.endTime !== undefined && (obj.endTime = message.endTime.toISOString());\n        message.duration !== undefined && (obj.duration = message.duration);\n        message.packets !== undefined && (obj.packets = Math.round(message.packets));\n        message.packetRate !== undefined && (obj.packetRate = message.packetRate);\n        message.bytes !== undefined && (obj.bytes = Math.round(message.bytes));\n        message.headerBytes !== undefined && (obj.headerBytes = Math.round(message.headerBytes));\n        message.bitrate !== undefined && (obj.bitrate = message.bitrate);\n        message.packetsLost !== undefined && (obj.packetsLost = Math.round(message.packetsLost));\n        message.packetLossRate !== undefined && (obj.packetLossRate = message.packetLossRate);\n        message.packetLossPercentage !== undefined && (obj.packetLossPercentage = message.packetLossPercentage);\n        message.packetsDuplicate !== undefined && (obj.packetsDuplicate = Math.round(message.packetsDuplicate));\n        message.packetDuplicateRate !== undefined && (obj.packetDuplicateRate = message.packetDuplicateRate);\n        message.bytesDuplicate !== undefined && (obj.bytesDuplicate = Math.round(message.bytesDuplicate));\n        message.headerBytesDuplicate !== undefined && (obj.headerBytesDuplicate = Math.round(message.headerBytesDuplicate));\n        message.bitrateDuplicate !== undefined && (obj.bitrateDuplicate = message.bitrateDuplicate);\n        message.packetsPadding !== undefined && (obj.packetsPadding = Math.round(message.packetsPadding));\n        message.packetPaddingRate !== undefined && (obj.packetPaddingRate = message.packetPaddingRate);\n        message.bytesPadding !== undefined && (obj.bytesPadding = Math.round(message.bytesPadding));\n        message.headerBytesPadding !== undefined && (obj.headerBytesPadding = Math.round(message.headerBytesPadding));\n        message.bitratePadding !== undefined && (obj.bitratePadding = message.bitratePadding);\n        message.packetsOutOfOrder !== undefined && (obj.packetsOutOfOrder = Math.round(message.packetsOutOfOrder));\n        message.frames !== undefined && (obj.frames = Math.round(message.frames));\n        message.frameRate !== undefined && (obj.frameRate = message.frameRate);\n        message.jitterCurrent !== undefined && (obj.jitterCurrent = message.jitterCurrent);\n        message.jitterMax !== undefined && (obj.jitterMax = message.jitterMax);\n        obj.gapHistogram = {};\n        if (message.gapHistogram) {\n            Object.entries(message.gapHistogram).forEach(([k, v]) => {\n                obj.gapHistogram[k] = Math.round(v);\n            });\n        }\n        message.nacks !== undefined && (obj.nacks = Math.round(message.nacks));\n        message.nackAcks !== undefined && (obj.nackAcks = Math.round(message.nackAcks));\n        message.nackMisses !== undefined && (obj.nackMisses = Math.round(message.nackMisses));\n        message.nackRepeated !== undefined && (obj.nackRepeated = Math.round(message.nackRepeated));\n        message.plis !== undefined && (obj.plis = Math.round(message.plis));\n        message.lastPli !== undefined && (obj.lastPli = message.lastPli.toISOString());\n        message.firs !== undefined && (obj.firs = Math.round(message.firs));\n        message.lastFir !== undefined && (obj.lastFir = message.lastFir.toISOString());\n        message.rttCurrent !== undefined && (obj.rttCurrent = Math.round(message.rttCurrent));\n        message.rttMax !== undefined && (obj.rttMax = Math.round(message.rttMax));\n        message.keyFrames !== undefined && (obj.keyFrames = Math.round(message.keyFrames));\n        message.lastKeyFrame !== undefined && (obj.lastKeyFrame = message.lastKeyFrame.toISOString());\n        message.layerLockPlis !== undefined && (obj.layerLockPlis = Math.round(message.layerLockPlis));\n        message.lastLayerLockPli !== undefined && (obj.lastLayerLockPli = message.lastLayerLockPli.toISOString());\n        message.packetDrift !== undefined &&\n            (obj.packetDrift = message.packetDrift ? exports.RTPDrift.toJSON(message.packetDrift) : undefined);\n        message.reportDrift !== undefined &&\n            (obj.reportDrift = message.reportDrift ? exports.RTPDrift.toJSON(message.reportDrift) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16;\n        const message = createBaseRTPStats();\n        message.startTime = (_a = object.startTime) !== null && _a !== void 0 ? _a : undefined;\n        message.endTime = (_b = object.endTime) !== null && _b !== void 0 ? _b : undefined;\n        message.duration = (_c = object.duration) !== null && _c !== void 0 ? _c : 0;\n        message.packets = (_d = object.packets) !== null && _d !== void 0 ? _d : 0;\n        message.packetRate = (_e = object.packetRate) !== null && _e !== void 0 ? _e : 0;\n        message.bytes = (_f = object.bytes) !== null && _f !== void 0 ? _f : 0;\n        message.headerBytes = (_g = object.headerBytes) !== null && _g !== void 0 ? _g : 0;\n        message.bitrate = (_h = object.bitrate) !== null && _h !== void 0 ? _h : 0;\n        message.packetsLost = (_j = object.packetsLost) !== null && _j !== void 0 ? _j : 0;\n        message.packetLossRate = (_k = object.packetLossRate) !== null && _k !== void 0 ? _k : 0;\n        message.packetLossPercentage = (_l = object.packetLossPercentage) !== null && _l !== void 0 ? _l : 0;\n        message.packetsDuplicate = (_m = object.packetsDuplicate) !== null && _m !== void 0 ? _m : 0;\n        message.packetDuplicateRate = (_o = object.packetDuplicateRate) !== null && _o !== void 0 ? _o : 0;\n        message.bytesDuplicate = (_p = object.bytesDuplicate) !== null && _p !== void 0 ? _p : 0;\n        message.headerBytesDuplicate = (_q = object.headerBytesDuplicate) !== null && _q !== void 0 ? _q : 0;\n        message.bitrateDuplicate = (_r = object.bitrateDuplicate) !== null && _r !== void 0 ? _r : 0;\n        message.packetsPadding = (_s = object.packetsPadding) !== null && _s !== void 0 ? _s : 0;\n        message.packetPaddingRate = (_t = object.packetPaddingRate) !== null && _t !== void 0 ? _t : 0;\n        message.bytesPadding = (_u = object.bytesPadding) !== null && _u !== void 0 ? _u : 0;\n        message.headerBytesPadding = (_v = object.headerBytesPadding) !== null && _v !== void 0 ? _v : 0;\n        message.bitratePadding = (_w = object.bitratePadding) !== null && _w !== void 0 ? _w : 0;\n        message.packetsOutOfOrder = (_x = object.packetsOutOfOrder) !== null && _x !== void 0 ? _x : 0;\n        message.frames = (_y = object.frames) !== null && _y !== void 0 ? _y : 0;\n        message.frameRate = (_z = object.frameRate) !== null && _z !== void 0 ? _z : 0;\n        message.jitterCurrent = (_0 = object.jitterCurrent) !== null && _0 !== void 0 ? _0 : 0;\n        message.jitterMax = (_1 = object.jitterMax) !== null && _1 !== void 0 ? _1 : 0;\n        message.gapHistogram = Object.entries((_2 = object.gapHistogram) !== null && _2 !== void 0 ? _2 : {}).reduce((acc, [key, value]) => {\n            if (value !== undefined) {\n                acc[Number(key)] = Number(value);\n            }\n            return acc;\n        }, {});\n        message.nacks = (_3 = object.nacks) !== null && _3 !== void 0 ? _3 : 0;\n        message.nackAcks = (_4 = object.nackAcks) !== null && _4 !== void 0 ? _4 : 0;\n        message.nackMisses = (_5 = object.nackMisses) !== null && _5 !== void 0 ? _5 : 0;\n        message.nackRepeated = (_6 = object.nackRepeated) !== null && _6 !== void 0 ? _6 : 0;\n        message.plis = (_7 = object.plis) !== null && _7 !== void 0 ? _7 : 0;\n        message.lastPli = (_8 = object.lastPli) !== null && _8 !== void 0 ? _8 : undefined;\n        message.firs = (_9 = object.firs) !== null && _9 !== void 0 ? _9 : 0;\n        message.lastFir = (_10 = object.lastFir) !== null && _10 !== void 0 ? _10 : undefined;\n        message.rttCurrent = (_11 = object.rttCurrent) !== null && _11 !== void 0 ? _11 : 0;\n        message.rttMax = (_12 = object.rttMax) !== null && _12 !== void 0 ? _12 : 0;\n        message.keyFrames = (_13 = object.keyFrames) !== null && _13 !== void 0 ? _13 : 0;\n        message.lastKeyFrame = (_14 = object.lastKeyFrame) !== null && _14 !== void 0 ? _14 : undefined;\n        message.layerLockPlis = (_15 = object.layerLockPlis) !== null && _15 !== void 0 ? _15 : 0;\n        message.lastLayerLockPli = (_16 = object.lastLayerLockPli) !== null && _16 !== void 0 ? _16 : undefined;\n        message.packetDrift = (object.packetDrift !== undefined && object.packetDrift !== null)\n            ? exports.RTPDrift.fromPartial(object.packetDrift)\n            : undefined;\n        message.reportDrift = (object.reportDrift !== undefined && object.reportDrift !== null)\n            ? exports.RTPDrift.fromPartial(object.reportDrift)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseRTPStats_GapHistogramEntry() {\n    return { key: 0, value: 0 };\n}\nexports.RTPStats_GapHistogramEntry = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.key !== 0) {\n            writer.uint32(8).int32(message.key);\n        }\n        if (message.value !== 0) {\n            writer.uint32(16).uint32(message.value);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseRTPStats_GapHistogramEntry();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.key = reader.int32();\n                    break;\n                case 2:\n                    message.value = reader.uint32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { key: isSet(object.key) ? Number(object.key) : 0, value: isSet(object.value) ? Number(object.value) : 0 };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.key !== undefined && (obj.key = Math.round(message.key));\n        message.value !== undefined && (obj.value = Math.round(message.value));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseRTPStats_GapHistogramEntry();\n        message.key = (_a = object.key) !== null && _a !== void 0 ? _a : 0;\n        message.value = (_b = object.value) !== null && _b !== void 0 ? _b : 0;\n        return message;\n    },\n};\nfunction createBaseTimedVersion() {\n    return { unixMicro: 0, ticks: 0 };\n}\nexports.TimedVersion = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.unixMicro !== 0) {\n            writer.uint32(8).int64(message.unixMicro);\n        }\n        if (message.ticks !== 0) {\n            writer.uint32(16).int32(message.ticks);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseTimedVersion();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.unixMicro = longToNumber(reader.int64());\n                    break;\n                case 2:\n                    message.ticks = reader.int32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            unixMicro: isSet(object.unixMicro) ? Number(object.unixMicro) : 0,\n            ticks: isSet(object.ticks) ? Number(object.ticks) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.unixMicro !== undefined && (obj.unixMicro = Math.round(message.unixMicro));\n        message.ticks !== undefined && (obj.ticks = Math.round(message.ticks));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseTimedVersion();\n        message.unixMicro = (_a = object.unixMicro) !== null && _a !== void 0 ? _a : 0;\n        message.ticks = (_b = object.ticks) !== null && _b !== void 0 ? _b : 0;\n        return message;\n    },\n};\nvar globalThis = (() => {\n    if (typeof globalThis !== \"undefined\") {\n        return globalThis;\n    }\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    if (typeof window !== \"undefined\") {\n        return window;\n    }\n    if (typeof global !== \"undefined\") {\n        return global;\n    }\n    throw \"Unable to locate global object\";\n})();\nfunction bytesFromBase64(b64) {\n    if (globalThis.Buffer) {\n        return Uint8Array.from(globalThis.Buffer.from(b64, \"base64\"));\n    }\n    else {\n        const bin = globalThis.atob(b64);\n        const arr = new Uint8Array(bin.length);\n        for (let i = 0; i < bin.length; ++i) {\n            arr[i] = bin.charCodeAt(i);\n        }\n        return arr;\n    }\n}\nfunction base64FromBytes(arr) {\n    if (globalThis.Buffer) {\n        return globalThis.Buffer.from(arr).toString(\"base64\");\n    }\n    else {\n        const bin = [];\n        arr.forEach((byte) => {\n            bin.push(String.fromCharCode(byte));\n        });\n        return globalThis.btoa(bin.join(\"\"));\n    }\n}\nfunction toTimestamp(date) {\n    const seconds = date.getTime() / 1000;\n    const nanos = (date.getTime() % 1000) * 1000000;\n    return { seconds, nanos };\n}\nfunction fromTimestamp(t) {\n    let millis = t.seconds * 1000;\n    millis += t.nanos / 1000000;\n    return new Date(millis);\n}\nfunction fromJsonTimestamp(o) {\n    if (o instanceof Date) {\n        return o;\n    }\n    else if (typeof o === \"string\") {\n        return new Date(o);\n    }\n    else {\n        return fromTimestamp(timestamp_1.Timestamp.fromJSON(o));\n    }\n}\nfunction longToNumber(long) {\n    if (long.gt(Number.MAX_SAFE_INTEGER)) {\n        throw new globalThis.Error(\"Value is larger than Number.MAX_SAFE_INTEGER\");\n    }\n    return long.toNumber();\n}\nif (minimal_1.default.util.Long !== long_1.default) {\n    minimal_1.default.util.Long = long_1.default;\n    minimal_1.default.configure();\n}\nfunction isObject(value) {\n    return typeof value === \"object\" && value !== null;\n}\nfunction isSet(value) {\n    return value !== null && value !== undefined;\n}\n//# sourceMappingURL=livekit_models.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvcHJvdG8vbGl2ZWtpdF9tb2RlbHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxZQUFZLEdBQUcsNEJBQTRCLEdBQUcsOEJBQThCLEdBQUcsc0JBQXNCLEdBQUcsZ0NBQWdDLEdBQUcsa0NBQWtDLEdBQUcsMEJBQTBCLEdBQUcsNkJBQTZCLEdBQUcsK0JBQStCLEdBQUcsdUJBQXVCLEdBQUcsNkJBQTZCLEdBQUcsK0JBQStCLEdBQUcsdUJBQXVCLEdBQUcsbUNBQW1DLEdBQUcscUNBQXFDLEdBQUcsNkJBQTZCLEdBQUcsK0JBQStCLEdBQUcsaUNBQWlDLEdBQUcseUJBQXlCLEdBQUcsNkJBQTZCLEdBQUcsK0JBQStCLEdBQUcsdUJBQXVCLEdBQUcsOEJBQThCLEdBQUcsZ0NBQWdDLEdBQUcsd0JBQXdCLEdBQUcsaUNBQWlDLEdBQUcsbUNBQW1DLEdBQUcsMkJBQTJCLEdBQUcsK0JBQStCLEdBQUcsaUNBQWlDLEdBQUcseUJBQXlCLEdBQUcsMEJBQTBCLEdBQUcsNEJBQTRCLEdBQUcsb0JBQW9CLEdBQUcseUJBQXlCLEdBQUcsMkJBQTJCLEdBQUcsbUJBQW1CLEdBQUcsdUJBQXVCLEdBQUcseUJBQXlCLEdBQUcsaUJBQWlCLEdBQUcsd0JBQXdCLEdBQUcsMEJBQTBCLEdBQUcsa0JBQWtCLEdBQUcsd0JBQXdCLEdBQUcsMEJBQTBCLEdBQUcsa0JBQWtCLEdBQUcsd0JBQXdCLEdBQUcsMEJBQTBCLEdBQUcsa0JBQWtCLEdBQUcsdUJBQXVCO0FBQ3I4QyxvQkFBb0IsR0FBRyxrQ0FBa0MsR0FBRyxnQkFBZ0IsR0FBRyxnQkFBZ0IsR0FBRyxzQkFBc0IsR0FBRywwQkFBMEIsR0FBRywyQkFBMkIsR0FBRyxrQkFBa0IsR0FBRyxrQkFBa0IsR0FBRyx5QkFBeUIsR0FBRyxrQkFBa0IsR0FBRyxtQkFBbUIsR0FBRywyQkFBMkIsR0FBRyxrQkFBa0IsR0FBRyxrQkFBa0IsR0FBRyxpQkFBaUIsR0FBRywwQkFBMEIsR0FBRyxrQkFBa0IsR0FBRyx1QkFBdUIsR0FBRyw2QkFBNkIsR0FBRyxvQkFBb0IsR0FBRyxhQUFhO0FBQ25oQjtBQUNBLCtCQUErQixtQkFBTyxDQUFDLG9EQUFNO0FBQzdDLGtDQUFrQyxtQkFBTyxDQUFDLHNFQUFvQjtBQUM5RCxvQkFBb0IsbUJBQU8sQ0FBQyxvSEFBNkI7QUFDekQsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsc0NBQXNDLGtCQUFrQixLQUFLO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsc0NBQXNDLGtCQUFrQixLQUFLO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxzQ0FBc0Msa0JBQWtCLEtBQUs7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsb0NBQW9DLGlCQUFpQixLQUFLO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsd0NBQXdDLG1CQUFtQixLQUFLO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsMENBQTBDLG9CQUFvQixLQUFLO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsb0RBQW9ELHlCQUF5QixLQUFLO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyx3REFBd0QsMkJBQTJCLEtBQUs7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxrREFBa0Qsd0JBQXdCLEtBQUs7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdEQUFnRCx1QkFBdUIsS0FBSztBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxvREFBb0QseUJBQXlCLEtBQUs7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw0REFBNEQsNkJBQTZCLEtBQUs7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnREFBZ0QsdUJBQXVCLEtBQUs7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnREFBZ0QsdUJBQXVCLEtBQUs7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHNEQUFzRCwwQkFBMEIsS0FBSztBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsOENBQThDLHNCQUFzQixLQUFLO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGlCQUFpQjtBQUNqQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsaUJBQWlCO0FBQ3pFLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLElBQUk7QUFDckIsb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0R0FBNEc7QUFDNUc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLElBQUk7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsaUJBQWlCO0FBQ2pCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0JBQWdCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2xpdmVzdHJlYW0vLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvcHJvdG8vbGl2ZWtpdF9tb2RlbHMuanM/MjFmZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUm9vbSA9IGV4cG9ydHMuY2xpZW50SW5mb19TREtUb0pTT04gPSBleHBvcnRzLmNsaWVudEluZm9fU0RLRnJvbUpTT04gPSBleHBvcnRzLkNsaWVudEluZm9fU0RLID0gZXhwb3J0cy5zZXJ2ZXJJbmZvX0VkaXRpb25Ub0pTT04gPSBleHBvcnRzLnNlcnZlckluZm9fRWRpdGlvbkZyb21KU09OID0gZXhwb3J0cy5TZXJ2ZXJJbmZvX0VkaXRpb24gPSBleHBvcnRzLmRhdGFQYWNrZXRfS2luZFRvSlNPTiA9IGV4cG9ydHMuZGF0YVBhY2tldF9LaW5kRnJvbUpTT04gPSBleHBvcnRzLkRhdGFQYWNrZXRfS2luZCA9IGV4cG9ydHMuZW5jcnlwdGlvbl9UeXBlVG9KU09OID0gZXhwb3J0cy5lbmNyeXB0aW9uX1R5cGVGcm9tSlNPTiA9IGV4cG9ydHMuRW5jcnlwdGlvbl9UeXBlID0gZXhwb3J0cy5wYXJ0aWNpcGFudEluZm9fU3RhdGVUb0pTT04gPSBleHBvcnRzLnBhcnRpY2lwYW50SW5mb19TdGF0ZUZyb21KU09OID0gZXhwb3J0cy5QYXJ0aWNpcGFudEluZm9fU3RhdGUgPSBleHBvcnRzLnN1YnNjcmlwdGlvbkVycm9yVG9KU09OID0gZXhwb3J0cy5zdWJzY3JpcHRpb25FcnJvckZyb21KU09OID0gZXhwb3J0cy5TdWJzY3JpcHRpb25FcnJvciA9IGV4cG9ydHMucmVjb25uZWN0UmVhc29uVG9KU09OID0gZXhwb3J0cy5yZWNvbm5lY3RSZWFzb25Gcm9tSlNPTiA9IGV4cG9ydHMuUmVjb25uZWN0UmVhc29uID0gZXhwb3J0cy5kaXNjb25uZWN0UmVhc29uVG9KU09OID0gZXhwb3J0cy5kaXNjb25uZWN0UmVhc29uRnJvbUpTT04gPSBleHBvcnRzLkRpc2Nvbm5lY3RSZWFzb24gPSBleHBvcnRzLmNsaWVudENvbmZpZ1NldHRpbmdUb0pTT04gPSBleHBvcnRzLmNsaWVudENvbmZpZ1NldHRpbmdGcm9tSlNPTiA9IGV4cG9ydHMuQ2xpZW50Q29uZmlnU2V0dGluZyA9IGV4cG9ydHMuY29ubmVjdGlvblF1YWxpdHlUb0pTT04gPSBleHBvcnRzLmNvbm5lY3Rpb25RdWFsaXR5RnJvbUpTT04gPSBleHBvcnRzLkNvbm5lY3Rpb25RdWFsaXR5ID0gZXhwb3J0cy52aWRlb1F1YWxpdHlUb0pTT04gPSBleHBvcnRzLnZpZGVvUXVhbGl0eUZyb21KU09OID0gZXhwb3J0cy5WaWRlb1F1YWxpdHkgPSBleHBvcnRzLnRyYWNrU291cmNlVG9KU09OID0gZXhwb3J0cy50cmFja1NvdXJjZUZyb21KU09OID0gZXhwb3J0cy5UcmFja1NvdXJjZSA9IGV4cG9ydHMudHJhY2tUeXBlVG9KU09OID0gZXhwb3J0cy50cmFja1R5cGVGcm9tSlNPTiA9IGV4cG9ydHMuVHJhY2tUeXBlID0gZXhwb3J0cy5pbWFnZUNvZGVjVG9KU09OID0gZXhwb3J0cy5pbWFnZUNvZGVjRnJvbUpTT04gPSBleHBvcnRzLkltYWdlQ29kZWMgPSBleHBvcnRzLnZpZGVvQ29kZWNUb0pTT04gPSBleHBvcnRzLnZpZGVvQ29kZWNGcm9tSlNPTiA9IGV4cG9ydHMuVmlkZW9Db2RlYyA9IGV4cG9ydHMuYXVkaW9Db2RlY1RvSlNPTiA9IGV4cG9ydHMuYXVkaW9Db2RlY0Zyb21KU09OID0gZXhwb3J0cy5BdWRpb0NvZGVjID0gZXhwb3J0cy5wcm90b2J1ZlBhY2thZ2UgPSB2b2lkIDA7XG5leHBvcnRzLlRpbWVkVmVyc2lvbiA9IGV4cG9ydHMuUlRQU3RhdHNfR2FwSGlzdG9ncmFtRW50cnkgPSBleHBvcnRzLlJUUFN0YXRzID0gZXhwb3J0cy5SVFBEcmlmdCA9IGV4cG9ydHMuRGlzYWJsZWRDb2RlY3MgPSBleHBvcnRzLlZpZGVvQ29uZmlndXJhdGlvbiA9IGV4cG9ydHMuQ2xpZW50Q29uZmlndXJhdGlvbiA9IGV4cG9ydHMuQ2xpZW50SW5mbyA9IGV4cG9ydHMuU2VydmVySW5mbyA9IGV4cG9ydHMuUGFydGljaXBhbnRUcmFja3MgPSBleHBvcnRzLlVzZXJQYWNrZXQgPSBleHBvcnRzLlNwZWFrZXJJbmZvID0gZXhwb3J0cy5BY3RpdmVTcGVha2VyVXBkYXRlID0gZXhwb3J0cy5EYXRhUGFja2V0ID0gZXhwb3J0cy5WaWRlb0xheWVyID0gZXhwb3J0cy5UcmFja0luZm8gPSBleHBvcnRzLlNpbXVsY2FzdENvZGVjSW5mbyA9IGV4cG9ydHMuRW5jcnlwdGlvbiA9IGV4cG9ydHMuUGFydGljaXBhbnRJbmZvID0gZXhwb3J0cy5QYXJ0aWNpcGFudFBlcm1pc3Npb24gPSBleHBvcnRzLlBsYXlvdXREZWxheSA9IGV4cG9ydHMuQ29kZWMgPSB2b2lkIDA7XG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuY29uc3QgbG9uZ18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJsb25nXCIpKTtcbmNvbnN0IG1pbmltYWxfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwicHJvdG9idWZqcy9taW5pbWFsXCIpKTtcbmNvbnN0IHRpbWVzdGFtcF8xID0gcmVxdWlyZShcIi4vZ29vZ2xlL3Byb3RvYnVmL3RpbWVzdGFtcFwiKTtcbmV4cG9ydHMucHJvdG9idWZQYWNrYWdlID0gXCJsaXZla2l0XCI7XG52YXIgQXVkaW9Db2RlYztcbihmdW5jdGlvbiAoQXVkaW9Db2RlYykge1xuICAgIEF1ZGlvQ29kZWNbQXVkaW9Db2RlY1tcIkRFRkFVTFRfQUNcIl0gPSAwXSA9IFwiREVGQVVMVF9BQ1wiO1xuICAgIEF1ZGlvQ29kZWNbQXVkaW9Db2RlY1tcIk9QVVNcIl0gPSAxXSA9IFwiT1BVU1wiO1xuICAgIEF1ZGlvQ29kZWNbQXVkaW9Db2RlY1tcIkFBQ1wiXSA9IDJdID0gXCJBQUNcIjtcbiAgICBBdWRpb0NvZGVjW0F1ZGlvQ29kZWNbXCJVTlJFQ09HTklaRURcIl0gPSAtMV0gPSBcIlVOUkVDT0dOSVpFRFwiO1xufSkoQXVkaW9Db2RlYyA9IGV4cG9ydHMuQXVkaW9Db2RlYyB8fCAoZXhwb3J0cy5BdWRpb0NvZGVjID0ge30pKTtcbmZ1bmN0aW9uIGF1ZGlvQ29kZWNGcm9tSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgXCJERUZBVUxUX0FDXCI6XG4gICAgICAgICAgICByZXR1cm4gQXVkaW9Db2RlYy5ERUZBVUxUX0FDO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJPUFVTXCI6XG4gICAgICAgICAgICByZXR1cm4gQXVkaW9Db2RlYy5PUFVTO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgXCJBQUNcIjpcbiAgICAgICAgICAgIHJldHVybiBBdWRpb0NvZGVjLkFBQztcbiAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgY2FzZSBcIlVOUkVDT0dOSVpFRFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIEF1ZGlvQ29kZWMuVU5SRUNPR05JWkVEO1xuICAgIH1cbn1cbmV4cG9ydHMuYXVkaW9Db2RlY0Zyb21KU09OID0gYXVkaW9Db2RlY0Zyb21KU09OO1xuZnVuY3Rpb24gYXVkaW9Db2RlY1RvSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIEF1ZGlvQ29kZWMuREVGQVVMVF9BQzpcbiAgICAgICAgICAgIHJldHVybiBcIkRFRkFVTFRfQUNcIjtcbiAgICAgICAgY2FzZSBBdWRpb0NvZGVjLk9QVVM6XG4gICAgICAgICAgICByZXR1cm4gXCJPUFVTXCI7XG4gICAgICAgIGNhc2UgQXVkaW9Db2RlYy5BQUM6XG4gICAgICAgICAgICByZXR1cm4gXCJBQUNcIjtcbiAgICAgICAgY2FzZSBBdWRpb0NvZGVjLlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMuYXVkaW9Db2RlY1RvSlNPTiA9IGF1ZGlvQ29kZWNUb0pTT047XG52YXIgVmlkZW9Db2RlYztcbihmdW5jdGlvbiAoVmlkZW9Db2RlYykge1xuICAgIFZpZGVvQ29kZWNbVmlkZW9Db2RlY1tcIkRFRkFVTFRfVkNcIl0gPSAwXSA9IFwiREVGQVVMVF9WQ1wiO1xuICAgIFZpZGVvQ29kZWNbVmlkZW9Db2RlY1tcIkgyNjRfQkFTRUxJTkVcIl0gPSAxXSA9IFwiSDI2NF9CQVNFTElORVwiO1xuICAgIFZpZGVvQ29kZWNbVmlkZW9Db2RlY1tcIkgyNjRfTUFJTlwiXSA9IDJdID0gXCJIMjY0X01BSU5cIjtcbiAgICBWaWRlb0NvZGVjW1ZpZGVvQ29kZWNbXCJIMjY0X0hJR0hcIl0gPSAzXSA9IFwiSDI2NF9ISUdIXCI7XG4gICAgVmlkZW9Db2RlY1tWaWRlb0NvZGVjW1wiVlA4XCJdID0gNF0gPSBcIlZQOFwiO1xuICAgIFZpZGVvQ29kZWNbVmlkZW9Db2RlY1tcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShWaWRlb0NvZGVjID0gZXhwb3J0cy5WaWRlb0NvZGVjIHx8IChleHBvcnRzLlZpZGVvQ29kZWMgPSB7fSkpO1xuZnVuY3Rpb24gdmlkZW9Db2RlY0Zyb21KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSBcIkRFRkFVTFRfVkNcIjpcbiAgICAgICAgICAgIHJldHVybiBWaWRlb0NvZGVjLkRFRkFVTFRfVkM7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSBcIkgyNjRfQkFTRUxJTkVcIjpcbiAgICAgICAgICAgIHJldHVybiBWaWRlb0NvZGVjLkgyNjRfQkFTRUxJTkU7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSBcIkgyNjRfTUFJTlwiOlxuICAgICAgICAgICAgcmV0dXJuIFZpZGVvQ29kZWMuSDI2NF9NQUlOO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgIGNhc2UgXCJIMjY0X0hJR0hcIjpcbiAgICAgICAgICAgIHJldHVybiBWaWRlb0NvZGVjLkgyNjRfSElHSDtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICBjYXNlIFwiVlA4XCI6XG4gICAgICAgICAgICByZXR1cm4gVmlkZW9Db2RlYy5WUDg7XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBWaWRlb0NvZGVjLlVOUkVDT0dOSVpFRDtcbiAgICB9XG59XG5leHBvcnRzLnZpZGVvQ29kZWNGcm9tSlNPTiA9IHZpZGVvQ29kZWNGcm9tSlNPTjtcbmZ1bmN0aW9uIHZpZGVvQ29kZWNUb0pTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSBWaWRlb0NvZGVjLkRFRkFVTFRfVkM6XG4gICAgICAgICAgICByZXR1cm4gXCJERUZBVUxUX1ZDXCI7XG4gICAgICAgIGNhc2UgVmlkZW9Db2RlYy5IMjY0X0JBU0VMSU5FOlxuICAgICAgICAgICAgcmV0dXJuIFwiSDI2NF9CQVNFTElORVwiO1xuICAgICAgICBjYXNlIFZpZGVvQ29kZWMuSDI2NF9NQUlOOlxuICAgICAgICAgICAgcmV0dXJuIFwiSDI2NF9NQUlOXCI7XG4gICAgICAgIGNhc2UgVmlkZW9Db2RlYy5IMjY0X0hJR0g6XG4gICAgICAgICAgICByZXR1cm4gXCJIMjY0X0hJR0hcIjtcbiAgICAgICAgY2FzZSBWaWRlb0NvZGVjLlZQODpcbiAgICAgICAgICAgIHJldHVybiBcIlZQOFwiO1xuICAgICAgICBjYXNlIFZpZGVvQ29kZWMuVU5SRUNPR05JWkVEOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5SRUNPR05JWkVEXCI7XG4gICAgfVxufVxuZXhwb3J0cy52aWRlb0NvZGVjVG9KU09OID0gdmlkZW9Db2RlY1RvSlNPTjtcbnZhciBJbWFnZUNvZGVjO1xuKGZ1bmN0aW9uIChJbWFnZUNvZGVjKSB7XG4gICAgSW1hZ2VDb2RlY1tJbWFnZUNvZGVjW1wiSUNfREVGQVVMVFwiXSA9IDBdID0gXCJJQ19ERUZBVUxUXCI7XG4gICAgSW1hZ2VDb2RlY1tJbWFnZUNvZGVjW1wiSUNfSlBFR1wiXSA9IDFdID0gXCJJQ19KUEVHXCI7XG4gICAgSW1hZ2VDb2RlY1tJbWFnZUNvZGVjW1wiVU5SRUNPR05JWkVEXCJdID0gLTFdID0gXCJVTlJFQ09HTklaRURcIjtcbn0pKEltYWdlQ29kZWMgPSBleHBvcnRzLkltYWdlQ29kZWMgfHwgKGV4cG9ydHMuSW1hZ2VDb2RlYyA9IHt9KSk7XG5mdW5jdGlvbiBpbWFnZUNvZGVjRnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiSUNfREVGQVVMVFwiOlxuICAgICAgICAgICAgcmV0dXJuIEltYWdlQ29kZWMuSUNfREVGQVVMVDtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIFwiSUNfSlBFR1wiOlxuICAgICAgICAgICAgcmV0dXJuIEltYWdlQ29kZWMuSUNfSlBFRztcbiAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgY2FzZSBcIlVOUkVDT0dOSVpFRFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIEltYWdlQ29kZWMuVU5SRUNPR05JWkVEO1xuICAgIH1cbn1cbmV4cG9ydHMuaW1hZ2VDb2RlY0Zyb21KU09OID0gaW1hZ2VDb2RlY0Zyb21KU09OO1xuZnVuY3Rpb24gaW1hZ2VDb2RlY1RvSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIEltYWdlQ29kZWMuSUNfREVGQVVMVDpcbiAgICAgICAgICAgIHJldHVybiBcIklDX0RFRkFVTFRcIjtcbiAgICAgICAgY2FzZSBJbWFnZUNvZGVjLklDX0pQRUc6XG4gICAgICAgICAgICByZXR1cm4gXCJJQ19KUEVHXCI7XG4gICAgICAgIGNhc2UgSW1hZ2VDb2RlYy5VTlJFQ09HTklaRUQ6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJVTlJFQ09HTklaRURcIjtcbiAgICB9XG59XG5leHBvcnRzLmltYWdlQ29kZWNUb0pTT04gPSBpbWFnZUNvZGVjVG9KU09OO1xudmFyIFRyYWNrVHlwZTtcbihmdW5jdGlvbiAoVHJhY2tUeXBlKSB7XG4gICAgVHJhY2tUeXBlW1RyYWNrVHlwZVtcIkFVRElPXCJdID0gMF0gPSBcIkFVRElPXCI7XG4gICAgVHJhY2tUeXBlW1RyYWNrVHlwZVtcIlZJREVPXCJdID0gMV0gPSBcIlZJREVPXCI7XG4gICAgVHJhY2tUeXBlW1RyYWNrVHlwZVtcIkRBVEFcIl0gPSAyXSA9IFwiREFUQVwiO1xuICAgIFRyYWNrVHlwZVtUcmFja1R5cGVbXCJVTlJFQ09HTklaRURcIl0gPSAtMV0gPSBcIlVOUkVDT0dOSVpFRFwiO1xufSkoVHJhY2tUeXBlID0gZXhwb3J0cy5UcmFja1R5cGUgfHwgKGV4cG9ydHMuVHJhY2tUeXBlID0ge30pKTtcbmZ1bmN0aW9uIHRyYWNrVHlwZUZyb21KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSBcIkFVRElPXCI6XG4gICAgICAgICAgICByZXR1cm4gVHJhY2tUeXBlLkFVRElPO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJWSURFT1wiOlxuICAgICAgICAgICAgcmV0dXJuIFRyYWNrVHlwZS5WSURFTztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIFwiREFUQVwiOlxuICAgICAgICAgICAgcmV0dXJuIFRyYWNrVHlwZS5EQVRBO1xuICAgICAgICBjYXNlIC0xOlxuICAgICAgICBjYXNlIFwiVU5SRUNPR05JWkVEXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gVHJhY2tUeXBlLlVOUkVDT0dOSVpFRDtcbiAgICB9XG59XG5leHBvcnRzLnRyYWNrVHlwZUZyb21KU09OID0gdHJhY2tUeXBlRnJvbUpTT047XG5mdW5jdGlvbiB0cmFja1R5cGVUb0pTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSBUcmFja1R5cGUuQVVESU86XG4gICAgICAgICAgICByZXR1cm4gXCJBVURJT1wiO1xuICAgICAgICBjYXNlIFRyYWNrVHlwZS5WSURFTzpcbiAgICAgICAgICAgIHJldHVybiBcIlZJREVPXCI7XG4gICAgICAgIGNhc2UgVHJhY2tUeXBlLkRBVEE6XG4gICAgICAgICAgICByZXR1cm4gXCJEQVRBXCI7XG4gICAgICAgIGNhc2UgVHJhY2tUeXBlLlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMudHJhY2tUeXBlVG9KU09OID0gdHJhY2tUeXBlVG9KU09OO1xudmFyIFRyYWNrU291cmNlO1xuKGZ1bmN0aW9uIChUcmFja1NvdXJjZSkge1xuICAgIFRyYWNrU291cmNlW1RyYWNrU291cmNlW1wiVU5LTk9XTlwiXSA9IDBdID0gXCJVTktOT1dOXCI7XG4gICAgVHJhY2tTb3VyY2VbVHJhY2tTb3VyY2VbXCJDQU1FUkFcIl0gPSAxXSA9IFwiQ0FNRVJBXCI7XG4gICAgVHJhY2tTb3VyY2VbVHJhY2tTb3VyY2VbXCJNSUNST1BIT05FXCJdID0gMl0gPSBcIk1JQ1JPUEhPTkVcIjtcbiAgICBUcmFja1NvdXJjZVtUcmFja1NvdXJjZVtcIlNDUkVFTl9TSEFSRVwiXSA9IDNdID0gXCJTQ1JFRU5fU0hBUkVcIjtcbiAgICBUcmFja1NvdXJjZVtUcmFja1NvdXJjZVtcIlNDUkVFTl9TSEFSRV9BVURJT1wiXSA9IDRdID0gXCJTQ1JFRU5fU0hBUkVfQVVESU9cIjtcbiAgICBUcmFja1NvdXJjZVtUcmFja1NvdXJjZVtcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShUcmFja1NvdXJjZSA9IGV4cG9ydHMuVHJhY2tTb3VyY2UgfHwgKGV4cG9ydHMuVHJhY2tTb3VyY2UgPSB7fSkpO1xuZnVuY3Rpb24gdHJhY2tTb3VyY2VGcm9tSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgXCJVTktOT1dOXCI6XG4gICAgICAgICAgICByZXR1cm4gVHJhY2tTb3VyY2UuVU5LTk9XTjtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIFwiQ0FNRVJBXCI6XG4gICAgICAgICAgICByZXR1cm4gVHJhY2tTb3VyY2UuQ0FNRVJBO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgXCJNSUNST1BIT05FXCI6XG4gICAgICAgICAgICByZXR1cm4gVHJhY2tTb3VyY2UuTUlDUk9QSE9ORTtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICBjYXNlIFwiU0NSRUVOX1NIQVJFXCI6XG4gICAgICAgICAgICByZXR1cm4gVHJhY2tTb3VyY2UuU0NSRUVOX1NIQVJFO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgIGNhc2UgXCJTQ1JFRU5fU0hBUkVfQVVESU9cIjpcbiAgICAgICAgICAgIHJldHVybiBUcmFja1NvdXJjZS5TQ1JFRU5fU0hBUkVfQVVESU87XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBUcmFja1NvdXJjZS5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy50cmFja1NvdXJjZUZyb21KU09OID0gdHJhY2tTb3VyY2VGcm9tSlNPTjtcbmZ1bmN0aW9uIHRyYWNrU291cmNlVG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgVHJhY2tTb3VyY2UuVU5LTk9XTjpcbiAgICAgICAgICAgIHJldHVybiBcIlVOS05PV05cIjtcbiAgICAgICAgY2FzZSBUcmFja1NvdXJjZS5DQU1FUkE6XG4gICAgICAgICAgICByZXR1cm4gXCJDQU1FUkFcIjtcbiAgICAgICAgY2FzZSBUcmFja1NvdXJjZS5NSUNST1BIT05FOlxuICAgICAgICAgICAgcmV0dXJuIFwiTUlDUk9QSE9ORVwiO1xuICAgICAgICBjYXNlIFRyYWNrU291cmNlLlNDUkVFTl9TSEFSRTpcbiAgICAgICAgICAgIHJldHVybiBcIlNDUkVFTl9TSEFSRVwiO1xuICAgICAgICBjYXNlIFRyYWNrU291cmNlLlNDUkVFTl9TSEFSRV9BVURJTzpcbiAgICAgICAgICAgIHJldHVybiBcIlNDUkVFTl9TSEFSRV9BVURJT1wiO1xuICAgICAgICBjYXNlIFRyYWNrU291cmNlLlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMudHJhY2tTb3VyY2VUb0pTT04gPSB0cmFja1NvdXJjZVRvSlNPTjtcbnZhciBWaWRlb1F1YWxpdHk7XG4oZnVuY3Rpb24gKFZpZGVvUXVhbGl0eSkge1xuICAgIFZpZGVvUXVhbGl0eVtWaWRlb1F1YWxpdHlbXCJMT1dcIl0gPSAwXSA9IFwiTE9XXCI7XG4gICAgVmlkZW9RdWFsaXR5W1ZpZGVvUXVhbGl0eVtcIk1FRElVTVwiXSA9IDFdID0gXCJNRURJVU1cIjtcbiAgICBWaWRlb1F1YWxpdHlbVmlkZW9RdWFsaXR5W1wiSElHSFwiXSA9IDJdID0gXCJISUdIXCI7XG4gICAgVmlkZW9RdWFsaXR5W1ZpZGVvUXVhbGl0eVtcIk9GRlwiXSA9IDNdID0gXCJPRkZcIjtcbiAgICBWaWRlb1F1YWxpdHlbVmlkZW9RdWFsaXR5W1wiVU5SRUNPR05JWkVEXCJdID0gLTFdID0gXCJVTlJFQ09HTklaRURcIjtcbn0pKFZpZGVvUXVhbGl0eSA9IGV4cG9ydHMuVmlkZW9RdWFsaXR5IHx8IChleHBvcnRzLlZpZGVvUXVhbGl0eSA9IHt9KSk7XG5mdW5jdGlvbiB2aWRlb1F1YWxpdHlGcm9tSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgXCJMT1dcIjpcbiAgICAgICAgICAgIHJldHVybiBWaWRlb1F1YWxpdHkuTE9XO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJNRURJVU1cIjpcbiAgICAgICAgICAgIHJldHVybiBWaWRlb1F1YWxpdHkuTUVESVVNO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgXCJISUdIXCI6XG4gICAgICAgICAgICByZXR1cm4gVmlkZW9RdWFsaXR5LkhJR0g7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgY2FzZSBcIk9GRlwiOlxuICAgICAgICAgICAgcmV0dXJuIFZpZGVvUXVhbGl0eS5PRkY7XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBWaWRlb1F1YWxpdHkuVU5SRUNPR05JWkVEO1xuICAgIH1cbn1cbmV4cG9ydHMudmlkZW9RdWFsaXR5RnJvbUpTT04gPSB2aWRlb1F1YWxpdHlGcm9tSlNPTjtcbmZ1bmN0aW9uIHZpZGVvUXVhbGl0eVRvSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIFZpZGVvUXVhbGl0eS5MT1c6XG4gICAgICAgICAgICByZXR1cm4gXCJMT1dcIjtcbiAgICAgICAgY2FzZSBWaWRlb1F1YWxpdHkuTUVESVVNOlxuICAgICAgICAgICAgcmV0dXJuIFwiTUVESVVNXCI7XG4gICAgICAgIGNhc2UgVmlkZW9RdWFsaXR5LkhJR0g6XG4gICAgICAgICAgICByZXR1cm4gXCJISUdIXCI7XG4gICAgICAgIGNhc2UgVmlkZW9RdWFsaXR5Lk9GRjpcbiAgICAgICAgICAgIHJldHVybiBcIk9GRlwiO1xuICAgICAgICBjYXNlIFZpZGVvUXVhbGl0eS5VTlJFQ09HTklaRUQ6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJVTlJFQ09HTklaRURcIjtcbiAgICB9XG59XG5leHBvcnRzLnZpZGVvUXVhbGl0eVRvSlNPTiA9IHZpZGVvUXVhbGl0eVRvSlNPTjtcbnZhciBDb25uZWN0aW9uUXVhbGl0eTtcbihmdW5jdGlvbiAoQ29ubmVjdGlvblF1YWxpdHkpIHtcbiAgICBDb25uZWN0aW9uUXVhbGl0eVtDb25uZWN0aW9uUXVhbGl0eVtcIlBPT1JcIl0gPSAwXSA9IFwiUE9PUlwiO1xuICAgIENvbm5lY3Rpb25RdWFsaXR5W0Nvbm5lY3Rpb25RdWFsaXR5W1wiR09PRFwiXSA9IDFdID0gXCJHT09EXCI7XG4gICAgQ29ubmVjdGlvblF1YWxpdHlbQ29ubmVjdGlvblF1YWxpdHlbXCJFWENFTExFTlRcIl0gPSAyXSA9IFwiRVhDRUxMRU5UXCI7XG4gICAgQ29ubmVjdGlvblF1YWxpdHlbQ29ubmVjdGlvblF1YWxpdHlbXCJVTlJFQ09HTklaRURcIl0gPSAtMV0gPSBcIlVOUkVDT0dOSVpFRFwiO1xufSkoQ29ubmVjdGlvblF1YWxpdHkgPSBleHBvcnRzLkNvbm5lY3Rpb25RdWFsaXR5IHx8IChleHBvcnRzLkNvbm5lY3Rpb25RdWFsaXR5ID0ge30pKTtcbmZ1bmN0aW9uIGNvbm5lY3Rpb25RdWFsaXR5RnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiUE9PUlwiOlxuICAgICAgICAgICAgcmV0dXJuIENvbm5lY3Rpb25RdWFsaXR5LlBPT1I7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSBcIkdPT0RcIjpcbiAgICAgICAgICAgIHJldHVybiBDb25uZWN0aW9uUXVhbGl0eS5HT09EO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgXCJFWENFTExFTlRcIjpcbiAgICAgICAgICAgIHJldHVybiBDb25uZWN0aW9uUXVhbGl0eS5FWENFTExFTlQ7XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBDb25uZWN0aW9uUXVhbGl0eS5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy5jb25uZWN0aW9uUXVhbGl0eUZyb21KU09OID0gY29ubmVjdGlvblF1YWxpdHlGcm9tSlNPTjtcbmZ1bmN0aW9uIGNvbm5lY3Rpb25RdWFsaXR5VG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgQ29ubmVjdGlvblF1YWxpdHkuUE9PUjpcbiAgICAgICAgICAgIHJldHVybiBcIlBPT1JcIjtcbiAgICAgICAgY2FzZSBDb25uZWN0aW9uUXVhbGl0eS5HT09EOlxuICAgICAgICAgICAgcmV0dXJuIFwiR09PRFwiO1xuICAgICAgICBjYXNlIENvbm5lY3Rpb25RdWFsaXR5LkVYQ0VMTEVOVDpcbiAgICAgICAgICAgIHJldHVybiBcIkVYQ0VMTEVOVFwiO1xuICAgICAgICBjYXNlIENvbm5lY3Rpb25RdWFsaXR5LlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMuY29ubmVjdGlvblF1YWxpdHlUb0pTT04gPSBjb25uZWN0aW9uUXVhbGl0eVRvSlNPTjtcbnZhciBDbGllbnRDb25maWdTZXR0aW5nO1xuKGZ1bmN0aW9uIChDbGllbnRDb25maWdTZXR0aW5nKSB7XG4gICAgQ2xpZW50Q29uZmlnU2V0dGluZ1tDbGllbnRDb25maWdTZXR0aW5nW1wiVU5TRVRcIl0gPSAwXSA9IFwiVU5TRVRcIjtcbiAgICBDbGllbnRDb25maWdTZXR0aW5nW0NsaWVudENvbmZpZ1NldHRpbmdbXCJESVNBQkxFRFwiXSA9IDFdID0gXCJESVNBQkxFRFwiO1xuICAgIENsaWVudENvbmZpZ1NldHRpbmdbQ2xpZW50Q29uZmlnU2V0dGluZ1tcIkVOQUJMRURcIl0gPSAyXSA9IFwiRU5BQkxFRFwiO1xuICAgIENsaWVudENvbmZpZ1NldHRpbmdbQ2xpZW50Q29uZmlnU2V0dGluZ1tcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShDbGllbnRDb25maWdTZXR0aW5nID0gZXhwb3J0cy5DbGllbnRDb25maWdTZXR0aW5nIHx8IChleHBvcnRzLkNsaWVudENvbmZpZ1NldHRpbmcgPSB7fSkpO1xuZnVuY3Rpb24gY2xpZW50Q29uZmlnU2V0dGluZ0Zyb21KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSBcIlVOU0VUXCI6XG4gICAgICAgICAgICByZXR1cm4gQ2xpZW50Q29uZmlnU2V0dGluZy5VTlNFVDtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIFwiRElTQUJMRURcIjpcbiAgICAgICAgICAgIHJldHVybiBDbGllbnRDb25maWdTZXR0aW5nLkRJU0FCTEVEO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgXCJFTkFCTEVEXCI6XG4gICAgICAgICAgICByZXR1cm4gQ2xpZW50Q29uZmlnU2V0dGluZy5FTkFCTEVEO1xuICAgICAgICBjYXNlIC0xOlxuICAgICAgICBjYXNlIFwiVU5SRUNPR05JWkVEXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gQ2xpZW50Q29uZmlnU2V0dGluZy5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy5jbGllbnRDb25maWdTZXR0aW5nRnJvbUpTT04gPSBjbGllbnRDb25maWdTZXR0aW5nRnJvbUpTT047XG5mdW5jdGlvbiBjbGllbnRDb25maWdTZXR0aW5nVG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgQ2xpZW50Q29uZmlnU2V0dGluZy5VTlNFVDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOU0VUXCI7XG4gICAgICAgIGNhc2UgQ2xpZW50Q29uZmlnU2V0dGluZy5ESVNBQkxFRDpcbiAgICAgICAgICAgIHJldHVybiBcIkRJU0FCTEVEXCI7XG4gICAgICAgIGNhc2UgQ2xpZW50Q29uZmlnU2V0dGluZy5FTkFCTEVEOlxuICAgICAgICAgICAgcmV0dXJuIFwiRU5BQkxFRFwiO1xuICAgICAgICBjYXNlIENsaWVudENvbmZpZ1NldHRpbmcuVU5SRUNPR05JWkVEOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5SRUNPR05JWkVEXCI7XG4gICAgfVxufVxuZXhwb3J0cy5jbGllbnRDb25maWdTZXR0aW5nVG9KU09OID0gY2xpZW50Q29uZmlnU2V0dGluZ1RvSlNPTjtcbnZhciBEaXNjb25uZWN0UmVhc29uO1xuKGZ1bmN0aW9uIChEaXNjb25uZWN0UmVhc29uKSB7XG4gICAgRGlzY29ubmVjdFJlYXNvbltEaXNjb25uZWN0UmVhc29uW1wiVU5LTk9XTl9SRUFTT05cIl0gPSAwXSA9IFwiVU5LTk9XTl9SRUFTT05cIjtcbiAgICBEaXNjb25uZWN0UmVhc29uW0Rpc2Nvbm5lY3RSZWFzb25bXCJDTElFTlRfSU5JVElBVEVEXCJdID0gMV0gPSBcIkNMSUVOVF9JTklUSUFURURcIjtcbiAgICBEaXNjb25uZWN0UmVhc29uW0Rpc2Nvbm5lY3RSZWFzb25bXCJEVVBMSUNBVEVfSURFTlRJVFlcIl0gPSAyXSA9IFwiRFVQTElDQVRFX0lERU5USVRZXCI7XG4gICAgRGlzY29ubmVjdFJlYXNvbltEaXNjb25uZWN0UmVhc29uW1wiU0VSVkVSX1NIVVRET1dOXCJdID0gM10gPSBcIlNFUlZFUl9TSFVURE9XTlwiO1xuICAgIERpc2Nvbm5lY3RSZWFzb25bRGlzY29ubmVjdFJlYXNvbltcIlBBUlRJQ0lQQU5UX1JFTU9WRURcIl0gPSA0XSA9IFwiUEFSVElDSVBBTlRfUkVNT1ZFRFwiO1xuICAgIERpc2Nvbm5lY3RSZWFzb25bRGlzY29ubmVjdFJlYXNvbltcIlJPT01fREVMRVRFRFwiXSA9IDVdID0gXCJST09NX0RFTEVURURcIjtcbiAgICBEaXNjb25uZWN0UmVhc29uW0Rpc2Nvbm5lY3RSZWFzb25bXCJTVEFURV9NSVNNQVRDSFwiXSA9IDZdID0gXCJTVEFURV9NSVNNQVRDSFwiO1xuICAgIERpc2Nvbm5lY3RSZWFzb25bRGlzY29ubmVjdFJlYXNvbltcIkpPSU5fRkFJTFVSRVwiXSA9IDddID0gXCJKT0lOX0ZBSUxVUkVcIjtcbiAgICBEaXNjb25uZWN0UmVhc29uW0Rpc2Nvbm5lY3RSZWFzb25bXCJVTlJFQ09HTklaRURcIl0gPSAtMV0gPSBcIlVOUkVDT0dOSVpFRFwiO1xufSkoRGlzY29ubmVjdFJlYXNvbiA9IGV4cG9ydHMuRGlzY29ubmVjdFJlYXNvbiB8fCAoZXhwb3J0cy5EaXNjb25uZWN0UmVhc29uID0ge30pKTtcbmZ1bmN0aW9uIGRpc2Nvbm5lY3RSZWFzb25Gcm9tSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgXCJVTktOT1dOX1JFQVNPTlwiOlxuICAgICAgICAgICAgcmV0dXJuIERpc2Nvbm5lY3RSZWFzb24uVU5LTk9XTl9SRUFTT047XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSBcIkNMSUVOVF9JTklUSUFURURcIjpcbiAgICAgICAgICAgIHJldHVybiBEaXNjb25uZWN0UmVhc29uLkNMSUVOVF9JTklUSUFURUQ7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSBcIkRVUExJQ0FURV9JREVOVElUWVwiOlxuICAgICAgICAgICAgcmV0dXJuIERpc2Nvbm5lY3RSZWFzb24uRFVQTElDQVRFX0lERU5USVRZO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgIGNhc2UgXCJTRVJWRVJfU0hVVERPV05cIjpcbiAgICAgICAgICAgIHJldHVybiBEaXNjb25uZWN0UmVhc29uLlNFUlZFUl9TSFVURE9XTjtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICBjYXNlIFwiUEFSVElDSVBBTlRfUkVNT1ZFRFwiOlxuICAgICAgICAgICAgcmV0dXJuIERpc2Nvbm5lY3RSZWFzb24uUEFSVElDSVBBTlRfUkVNT1ZFRDtcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICBjYXNlIFwiUk9PTV9ERUxFVEVEXCI6XG4gICAgICAgICAgICByZXR1cm4gRGlzY29ubmVjdFJlYXNvbi5ST09NX0RFTEVURUQ7XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgY2FzZSBcIlNUQVRFX01JU01BVENIXCI6XG4gICAgICAgICAgICByZXR1cm4gRGlzY29ubmVjdFJlYXNvbi5TVEFURV9NSVNNQVRDSDtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICBjYXNlIFwiSk9JTl9GQUlMVVJFXCI6XG4gICAgICAgICAgICByZXR1cm4gRGlzY29ubmVjdFJlYXNvbi5KT0lOX0ZBSUxVUkU7XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBEaXNjb25uZWN0UmVhc29uLlVOUkVDT0dOSVpFRDtcbiAgICB9XG59XG5leHBvcnRzLmRpc2Nvbm5lY3RSZWFzb25Gcm9tSlNPTiA9IGRpc2Nvbm5lY3RSZWFzb25Gcm9tSlNPTjtcbmZ1bmN0aW9uIGRpc2Nvbm5lY3RSZWFzb25Ub0pTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSBEaXNjb25uZWN0UmVhc29uLlVOS05PV05fUkVBU09OOlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5LTk9XTl9SRUFTT05cIjtcbiAgICAgICAgY2FzZSBEaXNjb25uZWN0UmVhc29uLkNMSUVOVF9JTklUSUFURUQ6XG4gICAgICAgICAgICByZXR1cm4gXCJDTElFTlRfSU5JVElBVEVEXCI7XG4gICAgICAgIGNhc2UgRGlzY29ubmVjdFJlYXNvbi5EVVBMSUNBVEVfSURFTlRJVFk6XG4gICAgICAgICAgICByZXR1cm4gXCJEVVBMSUNBVEVfSURFTlRJVFlcIjtcbiAgICAgICAgY2FzZSBEaXNjb25uZWN0UmVhc29uLlNFUlZFUl9TSFVURE9XTjpcbiAgICAgICAgICAgIHJldHVybiBcIlNFUlZFUl9TSFVURE9XTlwiO1xuICAgICAgICBjYXNlIERpc2Nvbm5lY3RSZWFzb24uUEFSVElDSVBBTlRfUkVNT1ZFRDpcbiAgICAgICAgICAgIHJldHVybiBcIlBBUlRJQ0lQQU5UX1JFTU9WRURcIjtcbiAgICAgICAgY2FzZSBEaXNjb25uZWN0UmVhc29uLlJPT01fREVMRVRFRDpcbiAgICAgICAgICAgIHJldHVybiBcIlJPT01fREVMRVRFRFwiO1xuICAgICAgICBjYXNlIERpc2Nvbm5lY3RSZWFzb24uU1RBVEVfTUlTTUFUQ0g6XG4gICAgICAgICAgICByZXR1cm4gXCJTVEFURV9NSVNNQVRDSFwiO1xuICAgICAgICBjYXNlIERpc2Nvbm5lY3RSZWFzb24uSk9JTl9GQUlMVVJFOlxuICAgICAgICAgICAgcmV0dXJuIFwiSk9JTl9GQUlMVVJFXCI7XG4gICAgICAgIGNhc2UgRGlzY29ubmVjdFJlYXNvbi5VTlJFQ09HTklaRUQ6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJVTlJFQ09HTklaRURcIjtcbiAgICB9XG59XG5leHBvcnRzLmRpc2Nvbm5lY3RSZWFzb25Ub0pTT04gPSBkaXNjb25uZWN0UmVhc29uVG9KU09OO1xudmFyIFJlY29ubmVjdFJlYXNvbjtcbihmdW5jdGlvbiAoUmVjb25uZWN0UmVhc29uKSB7XG4gICAgUmVjb25uZWN0UmVhc29uW1JlY29ubmVjdFJlYXNvbltcIlJSX1VOS05PV05cIl0gPSAwXSA9IFwiUlJfVU5LTk9XTlwiO1xuICAgIFJlY29ubmVjdFJlYXNvbltSZWNvbm5lY3RSZWFzb25bXCJSUl9TSUdOQUxfRElTQ09OTkVDVEVEXCJdID0gMV0gPSBcIlJSX1NJR05BTF9ESVNDT05ORUNURURcIjtcbiAgICBSZWNvbm5lY3RSZWFzb25bUmVjb25uZWN0UmVhc29uW1wiUlJfUFVCTElTSEVSX0ZBSUxFRFwiXSA9IDJdID0gXCJSUl9QVUJMSVNIRVJfRkFJTEVEXCI7XG4gICAgUmVjb25uZWN0UmVhc29uW1JlY29ubmVjdFJlYXNvbltcIlJSX1NVQlNDUklCRVJfRkFJTEVEXCJdID0gM10gPSBcIlJSX1NVQlNDUklCRVJfRkFJTEVEXCI7XG4gICAgUmVjb25uZWN0UmVhc29uW1JlY29ubmVjdFJlYXNvbltcIlJSX1NXSVRDSF9DQU5ESURBVEVcIl0gPSA0XSA9IFwiUlJfU1dJVENIX0NBTkRJREFURVwiO1xuICAgIFJlY29ubmVjdFJlYXNvbltSZWNvbm5lY3RSZWFzb25bXCJVTlJFQ09HTklaRURcIl0gPSAtMV0gPSBcIlVOUkVDT0dOSVpFRFwiO1xufSkoUmVjb25uZWN0UmVhc29uID0gZXhwb3J0cy5SZWNvbm5lY3RSZWFzb24gfHwgKGV4cG9ydHMuUmVjb25uZWN0UmVhc29uID0ge30pKTtcbmZ1bmN0aW9uIHJlY29ubmVjdFJlYXNvbkZyb21KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSBcIlJSX1VOS05PV05cIjpcbiAgICAgICAgICAgIHJldHVybiBSZWNvbm5lY3RSZWFzb24uUlJfVU5LTk9XTjtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIFwiUlJfU0lHTkFMX0RJU0NPTk5FQ1RFRFwiOlxuICAgICAgICAgICAgcmV0dXJuIFJlY29ubmVjdFJlYXNvbi5SUl9TSUdOQUxfRElTQ09OTkVDVEVEO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgXCJSUl9QVUJMSVNIRVJfRkFJTEVEXCI6XG4gICAgICAgICAgICByZXR1cm4gUmVjb25uZWN0UmVhc29uLlJSX1BVQkxJU0hFUl9GQUlMRUQ7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgY2FzZSBcIlJSX1NVQlNDUklCRVJfRkFJTEVEXCI6XG4gICAgICAgICAgICByZXR1cm4gUmVjb25uZWN0UmVhc29uLlJSX1NVQlNDUklCRVJfRkFJTEVEO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgIGNhc2UgXCJSUl9TV0lUQ0hfQ0FORElEQVRFXCI6XG4gICAgICAgICAgICByZXR1cm4gUmVjb25uZWN0UmVhc29uLlJSX1NXSVRDSF9DQU5ESURBVEU7XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBSZWNvbm5lY3RSZWFzb24uVU5SRUNPR05JWkVEO1xuICAgIH1cbn1cbmV4cG9ydHMucmVjb25uZWN0UmVhc29uRnJvbUpTT04gPSByZWNvbm5lY3RSZWFzb25Gcm9tSlNPTjtcbmZ1bmN0aW9uIHJlY29ubmVjdFJlYXNvblRvSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIFJlY29ubmVjdFJlYXNvbi5SUl9VTktOT1dOOlxuICAgICAgICAgICAgcmV0dXJuIFwiUlJfVU5LTk9XTlwiO1xuICAgICAgICBjYXNlIFJlY29ubmVjdFJlYXNvbi5SUl9TSUdOQUxfRElTQ09OTkVDVEVEOlxuICAgICAgICAgICAgcmV0dXJuIFwiUlJfU0lHTkFMX0RJU0NPTk5FQ1RFRFwiO1xuICAgICAgICBjYXNlIFJlY29ubmVjdFJlYXNvbi5SUl9QVUJMSVNIRVJfRkFJTEVEOlxuICAgICAgICAgICAgcmV0dXJuIFwiUlJfUFVCTElTSEVSX0ZBSUxFRFwiO1xuICAgICAgICBjYXNlIFJlY29ubmVjdFJlYXNvbi5SUl9TVUJTQ1JJQkVSX0ZBSUxFRDpcbiAgICAgICAgICAgIHJldHVybiBcIlJSX1NVQlNDUklCRVJfRkFJTEVEXCI7XG4gICAgICAgIGNhc2UgUmVjb25uZWN0UmVhc29uLlJSX1NXSVRDSF9DQU5ESURBVEU6XG4gICAgICAgICAgICByZXR1cm4gXCJSUl9TV0lUQ0hfQ0FORElEQVRFXCI7XG4gICAgICAgIGNhc2UgUmVjb25uZWN0UmVhc29uLlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMucmVjb25uZWN0UmVhc29uVG9KU09OID0gcmVjb25uZWN0UmVhc29uVG9KU09OO1xudmFyIFN1YnNjcmlwdGlvbkVycm9yO1xuKGZ1bmN0aW9uIChTdWJzY3JpcHRpb25FcnJvcikge1xuICAgIFN1YnNjcmlwdGlvbkVycm9yW1N1YnNjcmlwdGlvbkVycm9yW1wiU0VfVU5LTk9XTlwiXSA9IDBdID0gXCJTRV9VTktOT1dOXCI7XG4gICAgU3Vic2NyaXB0aW9uRXJyb3JbU3Vic2NyaXB0aW9uRXJyb3JbXCJTRV9DT0RFQ19VTlNVUFBPUlRFRFwiXSA9IDFdID0gXCJTRV9DT0RFQ19VTlNVUFBPUlRFRFwiO1xuICAgIFN1YnNjcmlwdGlvbkVycm9yW1N1YnNjcmlwdGlvbkVycm9yW1wiU0VfVFJBQ0tfTk9URk9VTkRcIl0gPSAyXSA9IFwiU0VfVFJBQ0tfTk9URk9VTkRcIjtcbiAgICBTdWJzY3JpcHRpb25FcnJvcltTdWJzY3JpcHRpb25FcnJvcltcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShTdWJzY3JpcHRpb25FcnJvciA9IGV4cG9ydHMuU3Vic2NyaXB0aW9uRXJyb3IgfHwgKGV4cG9ydHMuU3Vic2NyaXB0aW9uRXJyb3IgPSB7fSkpO1xuZnVuY3Rpb24gc3Vic2NyaXB0aW9uRXJyb3JGcm9tSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgXCJTRV9VTktOT1dOXCI6XG4gICAgICAgICAgICByZXR1cm4gU3Vic2NyaXB0aW9uRXJyb3IuU0VfVU5LTk9XTjtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIFwiU0VfQ09ERUNfVU5TVVBQT1JURURcIjpcbiAgICAgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb25FcnJvci5TRV9DT0RFQ19VTlNVUFBPUlRFRDtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIFwiU0VfVFJBQ0tfTk9URk9VTkRcIjpcbiAgICAgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb25FcnJvci5TRV9UUkFDS19OT1RGT1VORDtcbiAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgY2FzZSBcIlVOUkVDT0dOSVpFRFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFN1YnNjcmlwdGlvbkVycm9yLlVOUkVDT0dOSVpFRDtcbiAgICB9XG59XG5leHBvcnRzLnN1YnNjcmlwdGlvbkVycm9yRnJvbUpTT04gPSBzdWJzY3JpcHRpb25FcnJvckZyb21KU09OO1xuZnVuY3Rpb24gc3Vic2NyaXB0aW9uRXJyb3JUb0pTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSBTdWJzY3JpcHRpb25FcnJvci5TRV9VTktOT1dOOlxuICAgICAgICAgICAgcmV0dXJuIFwiU0VfVU5LTk9XTlwiO1xuICAgICAgICBjYXNlIFN1YnNjcmlwdGlvbkVycm9yLlNFX0NPREVDX1VOU1VQUE9SVEVEOlxuICAgICAgICAgICAgcmV0dXJuIFwiU0VfQ09ERUNfVU5TVVBQT1JURURcIjtcbiAgICAgICAgY2FzZSBTdWJzY3JpcHRpb25FcnJvci5TRV9UUkFDS19OT1RGT1VORDpcbiAgICAgICAgICAgIHJldHVybiBcIlNFX1RSQUNLX05PVEZPVU5EXCI7XG4gICAgICAgIGNhc2UgU3Vic2NyaXB0aW9uRXJyb3IuVU5SRUNPR05JWkVEOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5SRUNPR05JWkVEXCI7XG4gICAgfVxufVxuZXhwb3J0cy5zdWJzY3JpcHRpb25FcnJvclRvSlNPTiA9IHN1YnNjcmlwdGlvbkVycm9yVG9KU09OO1xudmFyIFBhcnRpY2lwYW50SW5mb19TdGF0ZTtcbihmdW5jdGlvbiAoUGFydGljaXBhbnRJbmZvX1N0YXRlKSB7XG4gICAgLyoqIEpPSU5JTkcgLSB3ZWJzb2NrZXQnIGNvbm5lY3RlZCwgYnV0IG5vdCBvZmZlcmVkIHlldCAqL1xuICAgIFBhcnRpY2lwYW50SW5mb19TdGF0ZVtQYXJ0aWNpcGFudEluZm9fU3RhdGVbXCJKT0lOSU5HXCJdID0gMF0gPSBcIkpPSU5JTkdcIjtcbiAgICAvKiogSk9JTkVEIC0gc2VydmVyIHJlY2VpdmVkIGNsaWVudCBvZmZlciAqL1xuICAgIFBhcnRpY2lwYW50SW5mb19TdGF0ZVtQYXJ0aWNpcGFudEluZm9fU3RhdGVbXCJKT0lORURcIl0gPSAxXSA9IFwiSk9JTkVEXCI7XG4gICAgLyoqIEFDVElWRSAtIElDRSBjb25uZWN0aXZpdHkgZXN0YWJsaXNoZWQgKi9cbiAgICBQYXJ0aWNpcGFudEluZm9fU3RhdGVbUGFydGljaXBhbnRJbmZvX1N0YXRlW1wiQUNUSVZFXCJdID0gMl0gPSBcIkFDVElWRVwiO1xuICAgIC8qKiBESVNDT05ORUNURUQgLSBXUyBkaXNjb25uZWN0ZWQgKi9cbiAgICBQYXJ0aWNpcGFudEluZm9fU3RhdGVbUGFydGljaXBhbnRJbmZvX1N0YXRlW1wiRElTQ09OTkVDVEVEXCJdID0gM10gPSBcIkRJU0NPTk5FQ1RFRFwiO1xuICAgIFBhcnRpY2lwYW50SW5mb19TdGF0ZVtQYXJ0aWNpcGFudEluZm9fU3RhdGVbXCJVTlJFQ09HTklaRURcIl0gPSAtMV0gPSBcIlVOUkVDT0dOSVpFRFwiO1xufSkoUGFydGljaXBhbnRJbmZvX1N0YXRlID0gZXhwb3J0cy5QYXJ0aWNpcGFudEluZm9fU3RhdGUgfHwgKGV4cG9ydHMuUGFydGljaXBhbnRJbmZvX1N0YXRlID0ge30pKTtcbmZ1bmN0aW9uIHBhcnRpY2lwYW50SW5mb19TdGF0ZUZyb21KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSBcIkpPSU5JTkdcIjpcbiAgICAgICAgICAgIHJldHVybiBQYXJ0aWNpcGFudEluZm9fU3RhdGUuSk9JTklORztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIFwiSk9JTkVEXCI6XG4gICAgICAgICAgICByZXR1cm4gUGFydGljaXBhbnRJbmZvX1N0YXRlLkpPSU5FRDtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIFwiQUNUSVZFXCI6XG4gICAgICAgICAgICByZXR1cm4gUGFydGljaXBhbnRJbmZvX1N0YXRlLkFDVElWRTtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICBjYXNlIFwiRElTQ09OTkVDVEVEXCI6XG4gICAgICAgICAgICByZXR1cm4gUGFydGljaXBhbnRJbmZvX1N0YXRlLkRJU0NPTk5FQ1RFRDtcbiAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgY2FzZSBcIlVOUkVDT0dOSVpFRFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFBhcnRpY2lwYW50SW5mb19TdGF0ZS5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy5wYXJ0aWNpcGFudEluZm9fU3RhdGVGcm9tSlNPTiA9IHBhcnRpY2lwYW50SW5mb19TdGF0ZUZyb21KU09OO1xuZnVuY3Rpb24gcGFydGljaXBhbnRJbmZvX1N0YXRlVG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgUGFydGljaXBhbnRJbmZvX1N0YXRlLkpPSU5JTkc6XG4gICAgICAgICAgICByZXR1cm4gXCJKT0lOSU5HXCI7XG4gICAgICAgIGNhc2UgUGFydGljaXBhbnRJbmZvX1N0YXRlLkpPSU5FRDpcbiAgICAgICAgICAgIHJldHVybiBcIkpPSU5FRFwiO1xuICAgICAgICBjYXNlIFBhcnRpY2lwYW50SW5mb19TdGF0ZS5BQ1RJVkU6XG4gICAgICAgICAgICByZXR1cm4gXCJBQ1RJVkVcIjtcbiAgICAgICAgY2FzZSBQYXJ0aWNpcGFudEluZm9fU3RhdGUuRElTQ09OTkVDVEVEOlxuICAgICAgICAgICAgcmV0dXJuIFwiRElTQ09OTkVDVEVEXCI7XG4gICAgICAgIGNhc2UgUGFydGljaXBhbnRJbmZvX1N0YXRlLlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMucGFydGljaXBhbnRJbmZvX1N0YXRlVG9KU09OID0gcGFydGljaXBhbnRJbmZvX1N0YXRlVG9KU09OO1xudmFyIEVuY3J5cHRpb25fVHlwZTtcbihmdW5jdGlvbiAoRW5jcnlwdGlvbl9UeXBlKSB7XG4gICAgRW5jcnlwdGlvbl9UeXBlW0VuY3J5cHRpb25fVHlwZVtcIk5PTkVcIl0gPSAwXSA9IFwiTk9ORVwiO1xuICAgIEVuY3J5cHRpb25fVHlwZVtFbmNyeXB0aW9uX1R5cGVbXCJHQ01cIl0gPSAxXSA9IFwiR0NNXCI7XG4gICAgRW5jcnlwdGlvbl9UeXBlW0VuY3J5cHRpb25fVHlwZVtcIkNVU1RPTVwiXSA9IDJdID0gXCJDVVNUT01cIjtcbiAgICBFbmNyeXB0aW9uX1R5cGVbRW5jcnlwdGlvbl9UeXBlW1wiVU5SRUNPR05JWkVEXCJdID0gLTFdID0gXCJVTlJFQ09HTklaRURcIjtcbn0pKEVuY3J5cHRpb25fVHlwZSA9IGV4cG9ydHMuRW5jcnlwdGlvbl9UeXBlIHx8IChleHBvcnRzLkVuY3J5cHRpb25fVHlwZSA9IHt9KSk7XG5mdW5jdGlvbiBlbmNyeXB0aW9uX1R5cGVGcm9tSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgXCJOT05FXCI6XG4gICAgICAgICAgICByZXR1cm4gRW5jcnlwdGlvbl9UeXBlLk5PTkU7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSBcIkdDTVwiOlxuICAgICAgICAgICAgcmV0dXJuIEVuY3J5cHRpb25fVHlwZS5HQ007XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSBcIkNVU1RPTVwiOlxuICAgICAgICAgICAgcmV0dXJuIEVuY3J5cHRpb25fVHlwZS5DVVNUT007XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBFbmNyeXB0aW9uX1R5cGUuVU5SRUNPR05JWkVEO1xuICAgIH1cbn1cbmV4cG9ydHMuZW5jcnlwdGlvbl9UeXBlRnJvbUpTT04gPSBlbmNyeXB0aW9uX1R5cGVGcm9tSlNPTjtcbmZ1bmN0aW9uIGVuY3J5cHRpb25fVHlwZVRvSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIEVuY3J5cHRpb25fVHlwZS5OT05FOlxuICAgICAgICAgICAgcmV0dXJuIFwiTk9ORVwiO1xuICAgICAgICBjYXNlIEVuY3J5cHRpb25fVHlwZS5HQ006XG4gICAgICAgICAgICByZXR1cm4gXCJHQ01cIjtcbiAgICAgICAgY2FzZSBFbmNyeXB0aW9uX1R5cGUuQ1VTVE9NOlxuICAgICAgICAgICAgcmV0dXJuIFwiQ1VTVE9NXCI7XG4gICAgICAgIGNhc2UgRW5jcnlwdGlvbl9UeXBlLlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMuZW5jcnlwdGlvbl9UeXBlVG9KU09OID0gZW5jcnlwdGlvbl9UeXBlVG9KU09OO1xudmFyIERhdGFQYWNrZXRfS2luZDtcbihmdW5jdGlvbiAoRGF0YVBhY2tldF9LaW5kKSB7XG4gICAgRGF0YVBhY2tldF9LaW5kW0RhdGFQYWNrZXRfS2luZFtcIlJFTElBQkxFXCJdID0gMF0gPSBcIlJFTElBQkxFXCI7XG4gICAgRGF0YVBhY2tldF9LaW5kW0RhdGFQYWNrZXRfS2luZFtcIkxPU1NZXCJdID0gMV0gPSBcIkxPU1NZXCI7XG4gICAgRGF0YVBhY2tldF9LaW5kW0RhdGFQYWNrZXRfS2luZFtcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShEYXRhUGFja2V0X0tpbmQgPSBleHBvcnRzLkRhdGFQYWNrZXRfS2luZCB8fCAoZXhwb3J0cy5EYXRhUGFja2V0X0tpbmQgPSB7fSkpO1xuZnVuY3Rpb24gZGF0YVBhY2tldF9LaW5kRnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiUkVMSUFCTEVcIjpcbiAgICAgICAgICAgIHJldHVybiBEYXRhUGFja2V0X0tpbmQuUkVMSUFCTEU7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSBcIkxPU1NZXCI6XG4gICAgICAgICAgICByZXR1cm4gRGF0YVBhY2tldF9LaW5kLkxPU1NZO1xuICAgICAgICBjYXNlIC0xOlxuICAgICAgICBjYXNlIFwiVU5SRUNPR05JWkVEXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gRGF0YVBhY2tldF9LaW5kLlVOUkVDT0dOSVpFRDtcbiAgICB9XG59XG5leHBvcnRzLmRhdGFQYWNrZXRfS2luZEZyb21KU09OID0gZGF0YVBhY2tldF9LaW5kRnJvbUpTT047XG5mdW5jdGlvbiBkYXRhUGFja2V0X0tpbmRUb0pTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSBEYXRhUGFja2V0X0tpbmQuUkVMSUFCTEU6XG4gICAgICAgICAgICByZXR1cm4gXCJSRUxJQUJMRVwiO1xuICAgICAgICBjYXNlIERhdGFQYWNrZXRfS2luZC5MT1NTWTpcbiAgICAgICAgICAgIHJldHVybiBcIkxPU1NZXCI7XG4gICAgICAgIGNhc2UgRGF0YVBhY2tldF9LaW5kLlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMuZGF0YVBhY2tldF9LaW5kVG9KU09OID0gZGF0YVBhY2tldF9LaW5kVG9KU09OO1xudmFyIFNlcnZlckluZm9fRWRpdGlvbjtcbihmdW5jdGlvbiAoU2VydmVySW5mb19FZGl0aW9uKSB7XG4gICAgU2VydmVySW5mb19FZGl0aW9uW1NlcnZlckluZm9fRWRpdGlvbltcIlN0YW5kYXJkXCJdID0gMF0gPSBcIlN0YW5kYXJkXCI7XG4gICAgU2VydmVySW5mb19FZGl0aW9uW1NlcnZlckluZm9fRWRpdGlvbltcIkNsb3VkXCJdID0gMV0gPSBcIkNsb3VkXCI7XG4gICAgU2VydmVySW5mb19FZGl0aW9uW1NlcnZlckluZm9fRWRpdGlvbltcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShTZXJ2ZXJJbmZvX0VkaXRpb24gPSBleHBvcnRzLlNlcnZlckluZm9fRWRpdGlvbiB8fCAoZXhwb3J0cy5TZXJ2ZXJJbmZvX0VkaXRpb24gPSB7fSkpO1xuZnVuY3Rpb24gc2VydmVySW5mb19FZGl0aW9uRnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiU3RhbmRhcmRcIjpcbiAgICAgICAgICAgIHJldHVybiBTZXJ2ZXJJbmZvX0VkaXRpb24uU3RhbmRhcmQ7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSBcIkNsb3VkXCI6XG4gICAgICAgICAgICByZXR1cm4gU2VydmVySW5mb19FZGl0aW9uLkNsb3VkO1xuICAgICAgICBjYXNlIC0xOlxuICAgICAgICBjYXNlIFwiVU5SRUNPR05JWkVEXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gU2VydmVySW5mb19FZGl0aW9uLlVOUkVDT0dOSVpFRDtcbiAgICB9XG59XG5leHBvcnRzLnNlcnZlckluZm9fRWRpdGlvbkZyb21KU09OID0gc2VydmVySW5mb19FZGl0aW9uRnJvbUpTT047XG5mdW5jdGlvbiBzZXJ2ZXJJbmZvX0VkaXRpb25Ub0pTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSBTZXJ2ZXJJbmZvX0VkaXRpb24uU3RhbmRhcmQ6XG4gICAgICAgICAgICByZXR1cm4gXCJTdGFuZGFyZFwiO1xuICAgICAgICBjYXNlIFNlcnZlckluZm9fRWRpdGlvbi5DbG91ZDpcbiAgICAgICAgICAgIHJldHVybiBcIkNsb3VkXCI7XG4gICAgICAgIGNhc2UgU2VydmVySW5mb19FZGl0aW9uLlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMuc2VydmVySW5mb19FZGl0aW9uVG9KU09OID0gc2VydmVySW5mb19FZGl0aW9uVG9KU09OO1xudmFyIENsaWVudEluZm9fU0RLO1xuKGZ1bmN0aW9uIChDbGllbnRJbmZvX1NESykge1xuICAgIENsaWVudEluZm9fU0RLW0NsaWVudEluZm9fU0RLW1wiVU5LTk9XTlwiXSA9IDBdID0gXCJVTktOT1dOXCI7XG4gICAgQ2xpZW50SW5mb19TREtbQ2xpZW50SW5mb19TREtbXCJKU1wiXSA9IDFdID0gXCJKU1wiO1xuICAgIENsaWVudEluZm9fU0RLW0NsaWVudEluZm9fU0RLW1wiU1dJRlRcIl0gPSAyXSA9IFwiU1dJRlRcIjtcbiAgICBDbGllbnRJbmZvX1NES1tDbGllbnRJbmZvX1NES1tcIkFORFJPSURcIl0gPSAzXSA9IFwiQU5EUk9JRFwiO1xuICAgIENsaWVudEluZm9fU0RLW0NsaWVudEluZm9fU0RLW1wiRkxVVFRFUlwiXSA9IDRdID0gXCJGTFVUVEVSXCI7XG4gICAgQ2xpZW50SW5mb19TREtbQ2xpZW50SW5mb19TREtbXCJHT1wiXSA9IDVdID0gXCJHT1wiO1xuICAgIENsaWVudEluZm9fU0RLW0NsaWVudEluZm9fU0RLW1wiVU5JVFlcIl0gPSA2XSA9IFwiVU5JVFlcIjtcbiAgICBDbGllbnRJbmZvX1NES1tDbGllbnRJbmZvX1NES1tcIlJFQUNUX05BVElWRVwiXSA9IDddID0gXCJSRUFDVF9OQVRJVkVcIjtcbiAgICBDbGllbnRJbmZvX1NES1tDbGllbnRJbmZvX1NES1tcIlJVU1RcIl0gPSA4XSA9IFwiUlVTVFwiO1xuICAgIENsaWVudEluZm9fU0RLW0NsaWVudEluZm9fU0RLW1wiUFlUSE9OXCJdID0gOV0gPSBcIlBZVEhPTlwiO1xuICAgIENsaWVudEluZm9fU0RLW0NsaWVudEluZm9fU0RLW1wiQ1BQXCJdID0gMTBdID0gXCJDUFBcIjtcbiAgICBDbGllbnRJbmZvX1NES1tDbGllbnRJbmZvX1NES1tcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShDbGllbnRJbmZvX1NESyA9IGV4cG9ydHMuQ2xpZW50SW5mb19TREsgfHwgKGV4cG9ydHMuQ2xpZW50SW5mb19TREsgPSB7fSkpO1xuZnVuY3Rpb24gY2xpZW50SW5mb19TREtGcm9tSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgXCJVTktOT1dOXCI6XG4gICAgICAgICAgICByZXR1cm4gQ2xpZW50SW5mb19TREsuVU5LTk9XTjtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIFwiSlNcIjpcbiAgICAgICAgICAgIHJldHVybiBDbGllbnRJbmZvX1NESy5KUztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIFwiU1dJRlRcIjpcbiAgICAgICAgICAgIHJldHVybiBDbGllbnRJbmZvX1NESy5TV0lGVDtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICBjYXNlIFwiQU5EUk9JRFwiOlxuICAgICAgICAgICAgcmV0dXJuIENsaWVudEluZm9fU0RLLkFORFJPSUQ7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgY2FzZSBcIkZMVVRURVJcIjpcbiAgICAgICAgICAgIHJldHVybiBDbGllbnRJbmZvX1NESy5GTFVUVEVSO1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgIGNhc2UgXCJHT1wiOlxuICAgICAgICAgICAgcmV0dXJuIENsaWVudEluZm9fU0RLLkdPO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgIGNhc2UgXCJVTklUWVwiOlxuICAgICAgICAgICAgcmV0dXJuIENsaWVudEluZm9fU0RLLlVOSVRZO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgIGNhc2UgXCJSRUFDVF9OQVRJVkVcIjpcbiAgICAgICAgICAgIHJldHVybiBDbGllbnRJbmZvX1NESy5SRUFDVF9OQVRJVkU7XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgY2FzZSBcIlJVU1RcIjpcbiAgICAgICAgICAgIHJldHVybiBDbGllbnRJbmZvX1NESy5SVVNUO1xuICAgICAgICBjYXNlIDk6XG4gICAgICAgIGNhc2UgXCJQWVRIT05cIjpcbiAgICAgICAgICAgIHJldHVybiBDbGllbnRJbmZvX1NESy5QWVRIT047XG4gICAgICAgIGNhc2UgMTA6XG4gICAgICAgIGNhc2UgXCJDUFBcIjpcbiAgICAgICAgICAgIHJldHVybiBDbGllbnRJbmZvX1NESy5DUFA7XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBDbGllbnRJbmZvX1NESy5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy5jbGllbnRJbmZvX1NES0Zyb21KU09OID0gY2xpZW50SW5mb19TREtGcm9tSlNPTjtcbmZ1bmN0aW9uIGNsaWVudEluZm9fU0RLVG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgQ2xpZW50SW5mb19TREsuVU5LTk9XTjpcbiAgICAgICAgICAgIHJldHVybiBcIlVOS05PV05cIjtcbiAgICAgICAgY2FzZSBDbGllbnRJbmZvX1NESy5KUzpcbiAgICAgICAgICAgIHJldHVybiBcIkpTXCI7XG4gICAgICAgIGNhc2UgQ2xpZW50SW5mb19TREsuU1dJRlQ6XG4gICAgICAgICAgICByZXR1cm4gXCJTV0lGVFwiO1xuICAgICAgICBjYXNlIENsaWVudEluZm9fU0RLLkFORFJPSUQ6XG4gICAgICAgICAgICByZXR1cm4gXCJBTkRST0lEXCI7XG4gICAgICAgIGNhc2UgQ2xpZW50SW5mb19TREsuRkxVVFRFUjpcbiAgICAgICAgICAgIHJldHVybiBcIkZMVVRURVJcIjtcbiAgICAgICAgY2FzZSBDbGllbnRJbmZvX1NESy5HTzpcbiAgICAgICAgICAgIHJldHVybiBcIkdPXCI7XG4gICAgICAgIGNhc2UgQ2xpZW50SW5mb19TREsuVU5JVFk6XG4gICAgICAgICAgICByZXR1cm4gXCJVTklUWVwiO1xuICAgICAgICBjYXNlIENsaWVudEluZm9fU0RLLlJFQUNUX05BVElWRTpcbiAgICAgICAgICAgIHJldHVybiBcIlJFQUNUX05BVElWRVwiO1xuICAgICAgICBjYXNlIENsaWVudEluZm9fU0RLLlJVU1Q6XG4gICAgICAgICAgICByZXR1cm4gXCJSVVNUXCI7XG4gICAgICAgIGNhc2UgQ2xpZW50SW5mb19TREsuUFlUSE9OOlxuICAgICAgICAgICAgcmV0dXJuIFwiUFlUSE9OXCI7XG4gICAgICAgIGNhc2UgQ2xpZW50SW5mb19TREsuQ1BQOlxuICAgICAgICAgICAgcmV0dXJuIFwiQ1BQXCI7XG4gICAgICAgIGNhc2UgQ2xpZW50SW5mb19TREsuVU5SRUNPR05JWkVEOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5SRUNPR05JWkVEXCI7XG4gICAgfVxufVxuZXhwb3J0cy5jbGllbnRJbmZvX1NES1RvSlNPTiA9IGNsaWVudEluZm9fU0RLVG9KU09OO1xuZnVuY3Rpb24gY3JlYXRlQmFzZVJvb20oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2lkOiBcIlwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBlbXB0eVRpbWVvdXQ6IDAsXG4gICAgICAgIG1heFBhcnRpY2lwYW50czogMCxcbiAgICAgICAgY3JlYXRpb25UaW1lOiAwLFxuICAgICAgICB0dXJuUGFzc3dvcmQ6IFwiXCIsXG4gICAgICAgIGVuYWJsZWRDb2RlY3M6IFtdLFxuICAgICAgICBtZXRhZGF0YTogXCJcIixcbiAgICAgICAgbnVtUGFydGljaXBhbnRzOiAwLFxuICAgICAgICBudW1QdWJsaXNoZXJzOiAwLFxuICAgICAgICBhY3RpdmVSZWNvcmRpbmc6IGZhbHNlLFxuICAgIH07XG59XG5leHBvcnRzLlJvb20gPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5zaWQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLnNpZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZW1wdHlUaW1lb3V0ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI0KS51aW50MzIobWVzc2FnZS5lbXB0eVRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm1heFBhcnRpY2lwYW50cyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigzMikudWludDMyKG1lc3NhZ2UubWF4UGFydGljaXBhbnRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5jcmVhdGlvblRpbWUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDApLmludDY0KG1lc3NhZ2UuY3JlYXRpb25UaW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS50dXJuUGFzc3dvcmQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNTApLnN0cmluZyhtZXNzYWdlLnR1cm5QYXNzd29yZCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UuZW5hYmxlZENvZGVjcykge1xuICAgICAgICAgICAgZXhwb3J0cy5Db2RlYy5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMig1OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5tZXRhZGF0YSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig2Nikuc3RyaW5nKG1lc3NhZ2UubWV0YWRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm51bVBhcnRpY2lwYW50cyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig3MikudWludDMyKG1lc3NhZ2UubnVtUGFydGljaXBhbnRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5udW1QdWJsaXNoZXJzICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDg4KS51aW50MzIobWVzc2FnZS5udW1QdWJsaXNoZXJzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5hY3RpdmVSZWNvcmRpbmcgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoODApLmJvb2wobWVzc2FnZS5hY3RpdmVSZWNvcmRpbmcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVJvb20oKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNpZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbXB0eVRpbWVvdXQgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tYXhQYXJ0aWNpcGFudHMgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jcmVhdGlvblRpbWUgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHVyblBhc3N3b3JkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5hYmxlZENvZGVjcy5wdXNoKGV4cG9ydHMuQ29kZWMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZXRhZGF0YSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm51bVBhcnRpY2lwYW50cyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5udW1QdWJsaXNoZXJzID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFjdGl2ZVJlY29yZGluZyA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNpZDogaXNTZXQob2JqZWN0LnNpZCkgPyBTdHJpbmcob2JqZWN0LnNpZCkgOiBcIlwiLFxuICAgICAgICAgICAgbmFtZTogaXNTZXQob2JqZWN0Lm5hbWUpID8gU3RyaW5nKG9iamVjdC5uYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBlbXB0eVRpbWVvdXQ6IGlzU2V0KG9iamVjdC5lbXB0eVRpbWVvdXQpID8gTnVtYmVyKG9iamVjdC5lbXB0eVRpbWVvdXQpIDogMCxcbiAgICAgICAgICAgIG1heFBhcnRpY2lwYW50czogaXNTZXQob2JqZWN0Lm1heFBhcnRpY2lwYW50cykgPyBOdW1iZXIob2JqZWN0Lm1heFBhcnRpY2lwYW50cykgOiAwLFxuICAgICAgICAgICAgY3JlYXRpb25UaW1lOiBpc1NldChvYmplY3QuY3JlYXRpb25UaW1lKSA/IE51bWJlcihvYmplY3QuY3JlYXRpb25UaW1lKSA6IDAsXG4gICAgICAgICAgICB0dXJuUGFzc3dvcmQ6IGlzU2V0KG9iamVjdC50dXJuUGFzc3dvcmQpID8gU3RyaW5nKG9iamVjdC50dXJuUGFzc3dvcmQpIDogXCJcIixcbiAgICAgICAgICAgIGVuYWJsZWRDb2RlY3M6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmVuYWJsZWRDb2RlY3MpXG4gICAgICAgICAgICAgICAgPyBvYmplY3QuZW5hYmxlZENvZGVjcy5tYXAoKGUpID0+IGV4cG9ydHMuQ29kZWMuZnJvbUpTT04oZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBpc1NldChvYmplY3QubWV0YWRhdGEpID8gU3RyaW5nKG9iamVjdC5tZXRhZGF0YSkgOiBcIlwiLFxuICAgICAgICAgICAgbnVtUGFydGljaXBhbnRzOiBpc1NldChvYmplY3QubnVtUGFydGljaXBhbnRzKSA/IE51bWJlcihvYmplY3QubnVtUGFydGljaXBhbnRzKSA6IDAsXG4gICAgICAgICAgICBudW1QdWJsaXNoZXJzOiBpc1NldChvYmplY3QubnVtUHVibGlzaGVycykgPyBOdW1iZXIob2JqZWN0Lm51bVB1Ymxpc2hlcnMpIDogMCxcbiAgICAgICAgICAgIGFjdGl2ZVJlY29yZGluZzogaXNTZXQob2JqZWN0LmFjdGl2ZVJlY29yZGluZykgPyBCb29sZWFuKG9iamVjdC5hY3RpdmVSZWNvcmRpbmcpIDogZmFsc2UsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5zaWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnNpZCA9IG1lc3NhZ2Uuc2lkKTtcbiAgICAgICAgbWVzc2FnZS5uYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5uYW1lID0gbWVzc2FnZS5uYW1lKTtcbiAgICAgICAgbWVzc2FnZS5lbXB0eVRpbWVvdXQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmVtcHR5VGltZW91dCA9IE1hdGgucm91bmQobWVzc2FnZS5lbXB0eVRpbWVvdXQpKTtcbiAgICAgICAgbWVzc2FnZS5tYXhQYXJ0aWNpcGFudHMgIT09IHVuZGVmaW5lZCAmJiAob2JqLm1heFBhcnRpY2lwYW50cyA9IE1hdGgucm91bmQobWVzc2FnZS5tYXhQYXJ0aWNpcGFudHMpKTtcbiAgICAgICAgbWVzc2FnZS5jcmVhdGlvblRpbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNyZWF0aW9uVGltZSA9IE1hdGgucm91bmQobWVzc2FnZS5jcmVhdGlvblRpbWUpKTtcbiAgICAgICAgbWVzc2FnZS50dXJuUGFzc3dvcmQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnR1cm5QYXNzd29yZCA9IG1lc3NhZ2UudHVyblBhc3N3b3JkKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZW5hYmxlZENvZGVjcykge1xuICAgICAgICAgICAgb2JqLmVuYWJsZWRDb2RlY3MgPSBtZXNzYWdlLmVuYWJsZWRDb2RlY3MubWFwKChlKSA9PiBlID8gZXhwb3J0cy5Db2RlYy50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLmVuYWJsZWRDb2RlY3MgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBtZXNzYWdlLm1ldGFkYXRhICE9PSB1bmRlZmluZWQgJiYgKG9iai5tZXRhZGF0YSA9IG1lc3NhZ2UubWV0YWRhdGEpO1xuICAgICAgICBtZXNzYWdlLm51bVBhcnRpY2lwYW50cyAhPT0gdW5kZWZpbmVkICYmIChvYmoubnVtUGFydGljaXBhbnRzID0gTWF0aC5yb3VuZChtZXNzYWdlLm51bVBhcnRpY2lwYW50cykpO1xuICAgICAgICBtZXNzYWdlLm51bVB1Ymxpc2hlcnMgIT09IHVuZGVmaW5lZCAmJiAob2JqLm51bVB1Ymxpc2hlcnMgPSBNYXRoLnJvdW5kKG1lc3NhZ2UubnVtUHVibGlzaGVycykpO1xuICAgICAgICBtZXNzYWdlLmFjdGl2ZVJlY29yZGluZyAhPT0gdW5kZWZpbmVkICYmIChvYmouYWN0aXZlUmVjb3JkaW5nID0gbWVzc2FnZS5hY3RpdmVSZWNvcmRpbmcpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9qLCBfaywgX2w7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUm9vbSgpO1xuICAgICAgICBtZXNzYWdlLnNpZCA9IChfYSA9IG9iamVjdC5zaWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UubmFtZSA9IChfYiA9IG9iamVjdC5uYW1lKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmVtcHR5VGltZW91dCA9IChfYyA9IG9iamVjdC5lbXB0eVRpbWVvdXQpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IDA7XG4gICAgICAgIG1lc3NhZ2UubWF4UGFydGljaXBhbnRzID0gKF9kID0gb2JqZWN0Lm1heFBhcnRpY2lwYW50cykgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogMDtcbiAgICAgICAgbWVzc2FnZS5jcmVhdGlvblRpbWUgPSAoX2UgPSBvYmplY3QuY3JlYXRpb25UaW1lKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiAwO1xuICAgICAgICBtZXNzYWdlLnR1cm5QYXNzd29yZCA9IChfZiA9IG9iamVjdC50dXJuUGFzc3dvcmQpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuZW5hYmxlZENvZGVjcyA9ICgoX2cgPSBvYmplY3QuZW5hYmxlZENvZGVjcykgPT09IG51bGwgfHwgX2cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nLm1hcCgoZSkgPT4gZXhwb3J0cy5Db2RlYy5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLm1ldGFkYXRhID0gKF9oID0gb2JqZWN0Lm1ldGFkYXRhKSAhPT0gbnVsbCAmJiBfaCAhPT0gdm9pZCAwID8gX2ggOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLm51bVBhcnRpY2lwYW50cyA9IChfaiA9IG9iamVjdC5udW1QYXJ0aWNpcGFudHMpICE9PSBudWxsICYmIF9qICE9PSB2b2lkIDAgPyBfaiA6IDA7XG4gICAgICAgIG1lc3NhZ2UubnVtUHVibGlzaGVycyA9IChfayA9IG9iamVjdC5udW1QdWJsaXNoZXJzKSAhPT0gbnVsbCAmJiBfayAhPT0gdm9pZCAwID8gX2sgOiAwO1xuICAgICAgICBtZXNzYWdlLmFjdGl2ZVJlY29yZGluZyA9IChfbCA9IG9iamVjdC5hY3RpdmVSZWNvcmRpbmcpICE9PSBudWxsICYmIF9sICE9PSB2b2lkIDAgPyBfbCA6IGZhbHNlO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VDb2RlYygpIHtcbiAgICByZXR1cm4geyBtaW1lOiBcIlwiLCBmbXRwTGluZTogXCJcIiB9O1xufVxuZXhwb3J0cy5Db2RlYyA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLm1pbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLm1pbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZtdHBMaW5lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5mbXRwTGluZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlQ29kZWMoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1pbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5mbXRwTGluZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWltZTogaXNTZXQob2JqZWN0Lm1pbWUpID8gU3RyaW5nKG9iamVjdC5taW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBmbXRwTGluZTogaXNTZXQob2JqZWN0LmZtdHBMaW5lKSA/IFN0cmluZyhvYmplY3QuZm10cExpbmUpIDogXCJcIixcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLm1pbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLm1pbWUgPSBtZXNzYWdlLm1pbWUpO1xuICAgICAgICBtZXNzYWdlLmZtdHBMaW5lICE9PSB1bmRlZmluZWQgJiYgKG9iai5mbXRwTGluZSA9IG1lc3NhZ2UuZm10cExpbmUpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlQ29kZWMoKTtcbiAgICAgICAgbWVzc2FnZS5taW1lID0gKF9hID0gb2JqZWN0Lm1pbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuZm10cExpbmUgPSAoX2IgPSBvYmplY3QuZm10cExpbmUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVBsYXlvdXREZWxheSgpIHtcbiAgICByZXR1cm4geyBlbmFibGVkOiBmYWxzZSwgbWluOiAwLCBtYXg6IDAgfTtcbn1cbmV4cG9ydHMuUGxheW91dERlbGF5ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZW5hYmxlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4KS5ib29sKG1lc3NhZ2UuZW5hYmxlZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubWluICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE2KS51aW50MzIobWVzc2FnZS5taW4pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm1heCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkudWludDMyKG1lc3NhZ2UubWF4KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VQbGF5b3V0RGVsYXkoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuYWJsZWQgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWluID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWF4ID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlbmFibGVkOiBpc1NldChvYmplY3QuZW5hYmxlZCkgPyBCb29sZWFuKG9iamVjdC5lbmFibGVkKSA6IGZhbHNlLFxuICAgICAgICAgICAgbWluOiBpc1NldChvYmplY3QubWluKSA/IE51bWJlcihvYmplY3QubWluKSA6IDAsXG4gICAgICAgICAgICBtYXg6IGlzU2V0KG9iamVjdC5tYXgpID8gTnVtYmVyKG9iamVjdC5tYXgpIDogMCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmVuYWJsZWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmVuYWJsZWQgPSBtZXNzYWdlLmVuYWJsZWQpO1xuICAgICAgICBtZXNzYWdlLm1pbiAhPT0gdW5kZWZpbmVkICYmIChvYmoubWluID0gTWF0aC5yb3VuZChtZXNzYWdlLm1pbikpO1xuICAgICAgICBtZXNzYWdlLm1heCAhPT0gdW5kZWZpbmVkICYmIChvYmoubWF4ID0gTWF0aC5yb3VuZChtZXNzYWdlLm1heCkpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVBsYXlvdXREZWxheSgpO1xuICAgICAgICBtZXNzYWdlLmVuYWJsZWQgPSAoX2EgPSBvYmplY3QuZW5hYmxlZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2UubWluID0gKF9iID0gb2JqZWN0Lm1pbikgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMDtcbiAgICAgICAgbWVzc2FnZS5tYXggPSAoX2MgPSBvYmplY3QubWF4KSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAwO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VQYXJ0aWNpcGFudFBlcm1pc3Npb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2FuU3Vic2NyaWJlOiBmYWxzZSxcbiAgICAgICAgY2FuUHVibGlzaDogZmFsc2UsXG4gICAgICAgIGNhblB1Ymxpc2hEYXRhOiBmYWxzZSxcbiAgICAgICAgY2FuUHVibGlzaFNvdXJjZXM6IFtdLFxuICAgICAgICBoaWRkZW46IGZhbHNlLFxuICAgICAgICByZWNvcmRlcjogZmFsc2UsXG4gICAgICAgIGNhblVwZGF0ZU1ldGFkYXRhOiBmYWxzZSxcbiAgICB9O1xufVxuZXhwb3J0cy5QYXJ0aWNpcGFudFBlcm1pc3Npb24gPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5jYW5TdWJzY3JpYmUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoOCkuYm9vbChtZXNzYWdlLmNhblN1YnNjcmliZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuY2FuUHVibGlzaCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNikuYm9vbChtZXNzYWdlLmNhblB1Ymxpc2gpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmNhblB1Ymxpc2hEYXRhID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI0KS5ib29sKG1lc3NhZ2UuY2FuUHVibGlzaERhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHdyaXRlci51aW50MzIoNzQpLmZvcmsoKTtcbiAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UuY2FuUHVibGlzaFNvdXJjZXMpIHtcbiAgICAgICAgICAgIHdyaXRlci5pbnQzMih2KTtcbiAgICAgICAgfVxuICAgICAgICB3cml0ZXIubGRlbGltKCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmhpZGRlbiA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig1NikuYm9vbChtZXNzYWdlLmhpZGRlbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucmVjb3JkZXIgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNjQpLmJvb2wobWVzc2FnZS5yZWNvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuY2FuVXBkYXRlTWV0YWRhdGEgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoODApLmJvb2wobWVzc2FnZS5jYW5VcGRhdGVNZXRhZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUGFydGljaXBhbnRQZXJtaXNzaW9uKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jYW5TdWJzY3JpYmUgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2FuUHVibGlzaCA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jYW5QdWJsaXNoRGF0YSA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh0YWcgJiA3KSA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kMiA9IHJlYWRlci51aW50MzIoKSArIHJlYWRlci5wb3M7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNhblB1Ymxpc2hTb3VyY2VzLnB1c2gocmVhZGVyLmludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jYW5QdWJsaXNoU291cmNlcy5wdXNoKHJlYWRlci5pbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaGlkZGVuID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlY29yZGVyID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jYW5VcGRhdGVNZXRhZGF0YSA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNhblN1YnNjcmliZTogaXNTZXQob2JqZWN0LmNhblN1YnNjcmliZSkgPyBCb29sZWFuKG9iamVjdC5jYW5TdWJzY3JpYmUpIDogZmFsc2UsXG4gICAgICAgICAgICBjYW5QdWJsaXNoOiBpc1NldChvYmplY3QuY2FuUHVibGlzaCkgPyBCb29sZWFuKG9iamVjdC5jYW5QdWJsaXNoKSA6IGZhbHNlLFxuICAgICAgICAgICAgY2FuUHVibGlzaERhdGE6IGlzU2V0KG9iamVjdC5jYW5QdWJsaXNoRGF0YSkgPyBCb29sZWFuKG9iamVjdC5jYW5QdWJsaXNoRGF0YSkgOiBmYWxzZSxcbiAgICAgICAgICAgIGNhblB1Ymxpc2hTb3VyY2VzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5jYW5QdWJsaXNoU291cmNlcylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5jYW5QdWJsaXNoU291cmNlcy5tYXAoKGUpID0+IHRyYWNrU291cmNlRnJvbUpTT04oZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgIGhpZGRlbjogaXNTZXQob2JqZWN0LmhpZGRlbikgPyBCb29sZWFuKG9iamVjdC5oaWRkZW4pIDogZmFsc2UsXG4gICAgICAgICAgICByZWNvcmRlcjogaXNTZXQob2JqZWN0LnJlY29yZGVyKSA/IEJvb2xlYW4ob2JqZWN0LnJlY29yZGVyKSA6IGZhbHNlLFxuICAgICAgICAgICAgY2FuVXBkYXRlTWV0YWRhdGE6IGlzU2V0KG9iamVjdC5jYW5VcGRhdGVNZXRhZGF0YSkgPyBCb29sZWFuKG9iamVjdC5jYW5VcGRhdGVNZXRhZGF0YSkgOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmNhblN1YnNjcmliZSAhPT0gdW5kZWZpbmVkICYmIChvYmouY2FuU3Vic2NyaWJlID0gbWVzc2FnZS5jYW5TdWJzY3JpYmUpO1xuICAgICAgICBtZXNzYWdlLmNhblB1Ymxpc2ggIT09IHVuZGVmaW5lZCAmJiAob2JqLmNhblB1Ymxpc2ggPSBtZXNzYWdlLmNhblB1Ymxpc2gpO1xuICAgICAgICBtZXNzYWdlLmNhblB1Ymxpc2hEYXRhICE9PSB1bmRlZmluZWQgJiYgKG9iai5jYW5QdWJsaXNoRGF0YSA9IG1lc3NhZ2UuY2FuUHVibGlzaERhdGEpO1xuICAgICAgICBpZiAobWVzc2FnZS5jYW5QdWJsaXNoU291cmNlcykge1xuICAgICAgICAgICAgb2JqLmNhblB1Ymxpc2hTb3VyY2VzID0gbWVzc2FnZS5jYW5QdWJsaXNoU291cmNlcy5tYXAoKGUpID0+IHRyYWNrU291cmNlVG9KU09OKGUpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5jYW5QdWJsaXNoU291cmNlcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIG1lc3NhZ2UuaGlkZGVuICE9PSB1bmRlZmluZWQgJiYgKG9iai5oaWRkZW4gPSBtZXNzYWdlLmhpZGRlbik7XG4gICAgICAgIG1lc3NhZ2UucmVjb3JkZXIgIT09IHVuZGVmaW5lZCAmJiAob2JqLnJlY29yZGVyID0gbWVzc2FnZS5yZWNvcmRlcik7XG4gICAgICAgIG1lc3NhZ2UuY2FuVXBkYXRlTWV0YWRhdGEgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNhblVwZGF0ZU1ldGFkYXRhID0gbWVzc2FnZS5jYW5VcGRhdGVNZXRhZGF0YSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVBhcnRpY2lwYW50UGVybWlzc2lvbigpO1xuICAgICAgICBtZXNzYWdlLmNhblN1YnNjcmliZSA9IChfYSA9IG9iamVjdC5jYW5TdWJzY3JpYmUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLmNhblB1Ymxpc2ggPSAoX2IgPSBvYmplY3QuY2FuUHVibGlzaCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2UuY2FuUHVibGlzaERhdGEgPSAoX2MgPSBvYmplY3QuY2FuUHVibGlzaERhdGEpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLmNhblB1Ymxpc2hTb3VyY2VzID0gKChfZCA9IG9iamVjdC5jYW5QdWJsaXNoU291cmNlcykgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLm1hcCgoZSkgPT4gZSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLmhpZGRlbiA9IChfZSA9IG9iamVjdC5oaWRkZW4pICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLnJlY29yZGVyID0gKF9mID0gb2JqZWN0LnJlY29yZGVyKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiBmYWxzZTtcbiAgICAgICAgbWVzc2FnZS5jYW5VcGRhdGVNZXRhZGF0YSA9IChfZyA9IG9iamVjdC5jYW5VcGRhdGVNZXRhZGF0YSkgIT09IG51bGwgJiYgX2cgIT09IHZvaWQgMCA/IF9nIDogZmFsc2U7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVBhcnRpY2lwYW50SW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzaWQ6IFwiXCIsXG4gICAgICAgIGlkZW50aXR5OiBcIlwiLFxuICAgICAgICBzdGF0ZTogMCxcbiAgICAgICAgdHJhY2tzOiBbXSxcbiAgICAgICAgbWV0YWRhdGE6IFwiXCIsXG4gICAgICAgIGpvaW5lZEF0OiAwLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICB2ZXJzaW9uOiAwLFxuICAgICAgICBwZXJtaXNzaW9uOiB1bmRlZmluZWQsXG4gICAgICAgIHJlZ2lvbjogXCJcIixcbiAgICAgICAgaXNQdWJsaXNoZXI6IGZhbHNlLFxuICAgIH07XG59XG5leHBvcnRzLlBhcnRpY2lwYW50SW5mbyA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnNpZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2Uuc2lkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5pZGVudGl0eSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UuaWRlbnRpdHkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0YXRlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI0KS5pbnQzMihtZXNzYWdlLnN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS50cmFja3MpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuVHJhY2tJbmZvLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm1ldGFkYXRhICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQyKS5zdHJpbmcobWVzc2FnZS5tZXRhZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuam9pbmVkQXQgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDgpLmludDY0KG1lc3NhZ2Uuam9pbmVkQXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNzQpLnN0cmluZyhtZXNzYWdlLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnZlcnNpb24gIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoODApLnVpbnQzMihtZXNzYWdlLnZlcnNpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBlcm1pc3Npb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5QYXJ0aWNpcGFudFBlcm1pc3Npb24uZW5jb2RlKG1lc3NhZ2UucGVybWlzc2lvbiwgd3JpdGVyLnVpbnQzMig5MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5yZWdpb24gIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoOTgpLnN0cmluZyhtZXNzYWdlLnJlZ2lvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaXNQdWJsaXNoZXIgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTA0KS5ib29sKG1lc3NhZ2UuaXNQdWJsaXNoZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVBhcnRpY2lwYW50SW5mbygpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWRlbnRpdHkgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdGF0ZSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJhY2tzLnB1c2goZXhwb3J0cy5UcmFja0luZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZXRhZGF0YSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmpvaW5lZEF0ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudmVyc2lvbiA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wZXJtaXNzaW9uID0gZXhwb3J0cy5QYXJ0aWNpcGFudFBlcm1pc3Npb24uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWdpb24gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaXNQdWJsaXNoZXIgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzaWQ6IGlzU2V0KG9iamVjdC5zaWQpID8gU3RyaW5nKG9iamVjdC5zaWQpIDogXCJcIixcbiAgICAgICAgICAgIGlkZW50aXR5OiBpc1NldChvYmplY3QuaWRlbnRpdHkpID8gU3RyaW5nKG9iamVjdC5pZGVudGl0eSkgOiBcIlwiLFxuICAgICAgICAgICAgc3RhdGU6IGlzU2V0KG9iamVjdC5zdGF0ZSkgPyBwYXJ0aWNpcGFudEluZm9fU3RhdGVGcm9tSlNPTihvYmplY3Quc3RhdGUpIDogMCxcbiAgICAgICAgICAgIHRyYWNrczogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QudHJhY2tzKSA/IG9iamVjdC50cmFja3MubWFwKChlKSA9PiBleHBvcnRzLlRyYWNrSW5mby5mcm9tSlNPTihlKSkgOiBbXSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBpc1NldChvYmplY3QubWV0YWRhdGEpID8gU3RyaW5nKG9iamVjdC5tZXRhZGF0YSkgOiBcIlwiLFxuICAgICAgICAgICAgam9pbmVkQXQ6IGlzU2V0KG9iamVjdC5qb2luZWRBdCkgPyBOdW1iZXIob2JqZWN0LmpvaW5lZEF0KSA6IDAsXG4gICAgICAgICAgICBuYW1lOiBpc1NldChvYmplY3QubmFtZSkgPyBTdHJpbmcob2JqZWN0Lm5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIHZlcnNpb246IGlzU2V0KG9iamVjdC52ZXJzaW9uKSA/IE51bWJlcihvYmplY3QudmVyc2lvbikgOiAwLFxuICAgICAgICAgICAgcGVybWlzc2lvbjogaXNTZXQob2JqZWN0LnBlcm1pc3Npb24pID8gZXhwb3J0cy5QYXJ0aWNpcGFudFBlcm1pc3Npb24uZnJvbUpTT04ob2JqZWN0LnBlcm1pc3Npb24pIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcmVnaW9uOiBpc1NldChvYmplY3QucmVnaW9uKSA/IFN0cmluZyhvYmplY3QucmVnaW9uKSA6IFwiXCIsXG4gICAgICAgICAgICBpc1B1Ymxpc2hlcjogaXNTZXQob2JqZWN0LmlzUHVibGlzaGVyKSA/IEJvb2xlYW4ob2JqZWN0LmlzUHVibGlzaGVyKSA6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2Uuc2lkICE9PSB1bmRlZmluZWQgJiYgKG9iai5zaWQgPSBtZXNzYWdlLnNpZCk7XG4gICAgICAgIG1lc3NhZ2UuaWRlbnRpdHkgIT09IHVuZGVmaW5lZCAmJiAob2JqLmlkZW50aXR5ID0gbWVzc2FnZS5pZGVudGl0eSk7XG4gICAgICAgIG1lc3NhZ2Uuc3RhdGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnN0YXRlID0gcGFydGljaXBhbnRJbmZvX1N0YXRlVG9KU09OKG1lc3NhZ2Uuc3RhdGUpKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UudHJhY2tzKSB7XG4gICAgICAgICAgICBvYmoudHJhY2tzID0gbWVzc2FnZS50cmFja3MubWFwKChlKSA9PiBlID8gZXhwb3J0cy5UcmFja0luZm8udG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai50cmFja3MgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBtZXNzYWdlLm1ldGFkYXRhICE9PSB1bmRlZmluZWQgJiYgKG9iai5tZXRhZGF0YSA9IG1lc3NhZ2UubWV0YWRhdGEpO1xuICAgICAgICBtZXNzYWdlLmpvaW5lZEF0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5qb2luZWRBdCA9IE1hdGgucm91bmQobWVzc2FnZS5qb2luZWRBdCkpO1xuICAgICAgICBtZXNzYWdlLm5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLm5hbWUgPSBtZXNzYWdlLm5hbWUpO1xuICAgICAgICBtZXNzYWdlLnZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLnZlcnNpb24gPSBNYXRoLnJvdW5kKG1lc3NhZ2UudmVyc2lvbikpO1xuICAgICAgICBtZXNzYWdlLnBlcm1pc3Npb24gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5wZXJtaXNzaW9uID0gbWVzc2FnZS5wZXJtaXNzaW9uID8gZXhwb3J0cy5QYXJ0aWNpcGFudFBlcm1pc3Npb24udG9KU09OKG1lc3NhZ2UucGVybWlzc2lvbikgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLnJlZ2lvbiAhPT0gdW5kZWZpbmVkICYmIChvYmoucmVnaW9uID0gbWVzc2FnZS5yZWdpb24pO1xuICAgICAgICBtZXNzYWdlLmlzUHVibGlzaGVyICE9PSB1bmRlZmluZWQgJiYgKG9iai5pc1B1Ymxpc2hlciA9IG1lc3NhZ2UuaXNQdWJsaXNoZXIpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9qLCBfaztcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VQYXJ0aWNpcGFudEluZm8oKTtcbiAgICAgICAgbWVzc2FnZS5zaWQgPSAoX2EgPSBvYmplY3Quc2lkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmlkZW50aXR5ID0gKF9iID0gb2JqZWN0LmlkZW50aXR5KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnN0YXRlID0gKF9jID0gb2JqZWN0LnN0YXRlKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAwO1xuICAgICAgICBtZXNzYWdlLnRyYWNrcyA9ICgoX2QgPSBvYmplY3QudHJhY2tzKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QubWFwKChlKSA9PiBleHBvcnRzLlRyYWNrSW5mby5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLm1ldGFkYXRhID0gKF9lID0gb2JqZWN0Lm1ldGFkYXRhKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmpvaW5lZEF0ID0gKF9mID0gb2JqZWN0LmpvaW5lZEF0KSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiAwO1xuICAgICAgICBtZXNzYWdlLm5hbWUgPSAoX2cgPSBvYmplY3QubmFtZSkgIT09IG51bGwgJiYgX2cgIT09IHZvaWQgMCA/IF9nIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS52ZXJzaW9uID0gKF9oID0gb2JqZWN0LnZlcnNpb24pICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IDA7XG4gICAgICAgIG1lc3NhZ2UucGVybWlzc2lvbiA9IChvYmplY3QucGVybWlzc2lvbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wZXJtaXNzaW9uICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLlBhcnRpY2lwYW50UGVybWlzc2lvbi5mcm9tUGFydGlhbChvYmplY3QucGVybWlzc2lvbilcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLnJlZ2lvbiA9IChfaiA9IG9iamVjdC5yZWdpb24pICE9PSBudWxsICYmIF9qICE9PSB2b2lkIDAgPyBfaiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuaXNQdWJsaXNoZXIgPSAoX2sgPSBvYmplY3QuaXNQdWJsaXNoZXIpICE9PSBudWxsICYmIF9rICE9PSB2b2lkIDAgPyBfayA6IGZhbHNlO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VFbmNyeXB0aW9uKCkge1xuICAgIHJldHVybiB7fTtcbn1cbmV4cG9ydHMuRW5jcnlwdGlvbiA9IHtcbiAgICBlbmNvZGUoXywgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUVuY3J5cHRpb24oKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKF8pIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH0sXG4gICAgdG9KU09OKF8pIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChfKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlRW5jcnlwdGlvbigpO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VTaW11bGNhc3RDb2RlY0luZm8oKSB7XG4gICAgcmV0dXJuIHsgbWltZVR5cGU6IFwiXCIsIG1pZDogXCJcIiwgY2lkOiBcIlwiLCBsYXllcnM6IFtdIH07XG59XG5leHBvcnRzLlNpbXVsY2FzdENvZGVjSW5mbyA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLm1pbWVUeXBlICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5taW1lVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubWlkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5taWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmNpZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2UuY2lkKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5sYXllcnMpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuVmlkZW9MYXllci5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTaW11bGNhc3RDb2RlY0luZm8oKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1pbWVUeXBlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWlkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGF5ZXJzLnB1c2goZXhwb3J0cy5WaWRlb0xheWVyLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtaW1lVHlwZTogaXNTZXQob2JqZWN0Lm1pbWVUeXBlKSA/IFN0cmluZyhvYmplY3QubWltZVR5cGUpIDogXCJcIixcbiAgICAgICAgICAgIG1pZDogaXNTZXQob2JqZWN0Lm1pZCkgPyBTdHJpbmcob2JqZWN0Lm1pZCkgOiBcIlwiLFxuICAgICAgICAgICAgY2lkOiBpc1NldChvYmplY3QuY2lkKSA/IFN0cmluZyhvYmplY3QuY2lkKSA6IFwiXCIsXG4gICAgICAgICAgICBsYXllcnM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmxheWVycykgPyBvYmplY3QubGF5ZXJzLm1hcCgoZSkgPT4gZXhwb3J0cy5WaWRlb0xheWVyLmZyb21KU09OKGUpKSA6IFtdLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UubWltZVR5cGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLm1pbWVUeXBlID0gbWVzc2FnZS5taW1lVHlwZSk7XG4gICAgICAgIG1lc3NhZ2UubWlkICE9PSB1bmRlZmluZWQgJiYgKG9iai5taWQgPSBtZXNzYWdlLm1pZCk7XG4gICAgICAgIG1lc3NhZ2UuY2lkICE9PSB1bmRlZmluZWQgJiYgKG9iai5jaWQgPSBtZXNzYWdlLmNpZCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmxheWVycykge1xuICAgICAgICAgICAgb2JqLmxheWVycyA9IG1lc3NhZ2UubGF5ZXJzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuVmlkZW9MYXllci50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLmxheWVycyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVNpbXVsY2FzdENvZGVjSW5mbygpO1xuICAgICAgICBtZXNzYWdlLm1pbWVUeXBlID0gKF9hID0gb2JqZWN0Lm1pbWVUeXBlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLm1pZCA9IChfYiA9IG9iamVjdC5taWQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuY2lkID0gKF9jID0gb2JqZWN0LmNpZCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5sYXllcnMgPSAoKF9kID0gb2JqZWN0LmxheWVycykgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLm1hcCgoZSkgPT4gZXhwb3J0cy5WaWRlb0xheWVyLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVRyYWNrSW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzaWQ6IFwiXCIsXG4gICAgICAgIHR5cGU6IDAsXG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIG11dGVkOiBmYWxzZSxcbiAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgc2ltdWxjYXN0OiBmYWxzZSxcbiAgICAgICAgZGlzYWJsZUR0eDogZmFsc2UsXG4gICAgICAgIHNvdXJjZTogMCxcbiAgICAgICAgbGF5ZXJzOiBbXSxcbiAgICAgICAgbWltZVR5cGU6IFwiXCIsXG4gICAgICAgIG1pZDogXCJcIixcbiAgICAgICAgY29kZWNzOiBbXSxcbiAgICAgICAgc3RlcmVvOiBmYWxzZSxcbiAgICAgICAgZGlzYWJsZVJlZDogZmFsc2UsXG4gICAgICAgIGVuY3J5cHRpb246IDAsXG4gICAgICAgIHN0cmVhbTogXCJcIixcbiAgICB9O1xufVxuZXhwb3J0cy5UcmFja0luZm8gPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5zaWQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLnNpZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNikuaW50MzIobWVzc2FnZS50eXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5uYW1lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5tdXRlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigzMikuYm9vbChtZXNzYWdlLm11dGVkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS53aWR0aCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0MCkudWludDMyKG1lc3NhZ2Uud2lkdGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmhlaWdodCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0OCkudWludDMyKG1lc3NhZ2UuaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zaW11bGNhc3QgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNTYpLmJvb2wobWVzc2FnZS5zaW11bGNhc3QpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmRpc2FibGVEdHggPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNjQpLmJvb2wobWVzc2FnZS5kaXNhYmxlRHR4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zb3VyY2UgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNzIpLmludDMyKG1lc3NhZ2Uuc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5sYXllcnMpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuVmlkZW9MYXllci5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMig4MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5taW1lVHlwZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig5MCkuc3RyaW5nKG1lc3NhZ2UubWltZVR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm1pZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig5OCkuc3RyaW5nKG1lc3NhZ2UubWlkKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5jb2RlY3MpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuU2ltdWxjYXN0Q29kZWNJbmZvLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDEwNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zdGVyZW8gPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTEyKS5ib29sKG1lc3NhZ2Uuc3RlcmVvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5kaXNhYmxlUmVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEyMCkuYm9vbChtZXNzYWdlLmRpc2FibGVSZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmVuY3J5cHRpb24gIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTI4KS5pbnQzMihtZXNzYWdlLmVuY3J5cHRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0cmVhbSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMzgpLnN0cmluZyhtZXNzYWdlLnN0cmVhbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVHJhY2tJbmZvKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zaWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50eXBlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubXV0ZWQgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uud2lkdGggPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5oZWlnaHQgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zaW11bGNhc3QgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGlzYWJsZUR0eCA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zb3VyY2UgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXllcnMucHVzaChleHBvcnRzLlZpZGVvTGF5ZXIuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWltZVR5cGUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWlkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNvZGVjcy5wdXNoKGV4cG9ydHMuU2ltdWxjYXN0Q29kZWNJbmZvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0ZXJlbyA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGlzYWJsZVJlZCA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5jcnlwdGlvbiA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0cmVhbSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2lkOiBpc1NldChvYmplY3Quc2lkKSA/IFN0cmluZyhvYmplY3Quc2lkKSA6IFwiXCIsXG4gICAgICAgICAgICB0eXBlOiBpc1NldChvYmplY3QudHlwZSkgPyB0cmFja1R5cGVGcm9tSlNPTihvYmplY3QudHlwZSkgOiAwLFxuICAgICAgICAgICAgbmFtZTogaXNTZXQob2JqZWN0Lm5hbWUpID8gU3RyaW5nKG9iamVjdC5uYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBtdXRlZDogaXNTZXQob2JqZWN0Lm11dGVkKSA/IEJvb2xlYW4ob2JqZWN0Lm11dGVkKSA6IGZhbHNlLFxuICAgICAgICAgICAgd2lkdGg6IGlzU2V0KG9iamVjdC53aWR0aCkgPyBOdW1iZXIob2JqZWN0LndpZHRoKSA6IDAsXG4gICAgICAgICAgICBoZWlnaHQ6IGlzU2V0KG9iamVjdC5oZWlnaHQpID8gTnVtYmVyKG9iamVjdC5oZWlnaHQpIDogMCxcbiAgICAgICAgICAgIHNpbXVsY2FzdDogaXNTZXQob2JqZWN0LnNpbXVsY2FzdCkgPyBCb29sZWFuKG9iamVjdC5zaW11bGNhc3QpIDogZmFsc2UsXG4gICAgICAgICAgICBkaXNhYmxlRHR4OiBpc1NldChvYmplY3QuZGlzYWJsZUR0eCkgPyBCb29sZWFuKG9iamVjdC5kaXNhYmxlRHR4KSA6IGZhbHNlLFxuICAgICAgICAgICAgc291cmNlOiBpc1NldChvYmplY3Quc291cmNlKSA/IHRyYWNrU291cmNlRnJvbUpTT04ob2JqZWN0LnNvdXJjZSkgOiAwLFxuICAgICAgICAgICAgbGF5ZXJzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5sYXllcnMpID8gb2JqZWN0LmxheWVycy5tYXAoKGUpID0+IGV4cG9ydHMuVmlkZW9MYXllci5mcm9tSlNPTihlKSkgOiBbXSxcbiAgICAgICAgICAgIG1pbWVUeXBlOiBpc1NldChvYmplY3QubWltZVR5cGUpID8gU3RyaW5nKG9iamVjdC5taW1lVHlwZSkgOiBcIlwiLFxuICAgICAgICAgICAgbWlkOiBpc1NldChvYmplY3QubWlkKSA/IFN0cmluZyhvYmplY3QubWlkKSA6IFwiXCIsXG4gICAgICAgICAgICBjb2RlY3M6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmNvZGVjcykgPyBvYmplY3QuY29kZWNzLm1hcCgoZSkgPT4gZXhwb3J0cy5TaW11bGNhc3RDb2RlY0luZm8uZnJvbUpTT04oZSkpIDogW10sXG4gICAgICAgICAgICBzdGVyZW86IGlzU2V0KG9iamVjdC5zdGVyZW8pID8gQm9vbGVhbihvYmplY3Quc3RlcmVvKSA6IGZhbHNlLFxuICAgICAgICAgICAgZGlzYWJsZVJlZDogaXNTZXQob2JqZWN0LmRpc2FibGVSZWQpID8gQm9vbGVhbihvYmplY3QuZGlzYWJsZVJlZCkgOiBmYWxzZSxcbiAgICAgICAgICAgIGVuY3J5cHRpb246IGlzU2V0KG9iamVjdC5lbmNyeXB0aW9uKSA/IGVuY3J5cHRpb25fVHlwZUZyb21KU09OKG9iamVjdC5lbmNyeXB0aW9uKSA6IDAsXG4gICAgICAgICAgICBzdHJlYW06IGlzU2V0KG9iamVjdC5zdHJlYW0pID8gU3RyaW5nKG9iamVjdC5zdHJlYW0pIDogXCJcIixcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnNpZCAhPT0gdW5kZWZpbmVkICYmIChvYmouc2lkID0gbWVzc2FnZS5zaWQpO1xuICAgICAgICBtZXNzYWdlLnR5cGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnR5cGUgPSB0cmFja1R5cGVUb0pTT04obWVzc2FnZS50eXBlKSk7XG4gICAgICAgIG1lc3NhZ2UubmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmoubmFtZSA9IG1lc3NhZ2UubmFtZSk7XG4gICAgICAgIG1lc3NhZ2UubXV0ZWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLm11dGVkID0gbWVzc2FnZS5tdXRlZCk7XG4gICAgICAgIG1lc3NhZ2Uud2lkdGggIT09IHVuZGVmaW5lZCAmJiAob2JqLndpZHRoID0gTWF0aC5yb3VuZChtZXNzYWdlLndpZHRoKSk7XG4gICAgICAgIG1lc3NhZ2UuaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5oZWlnaHQgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuaGVpZ2h0KSk7XG4gICAgICAgIG1lc3NhZ2Uuc2ltdWxjYXN0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5zaW11bGNhc3QgPSBtZXNzYWdlLnNpbXVsY2FzdCk7XG4gICAgICAgIG1lc3NhZ2UuZGlzYWJsZUR0eCAhPT0gdW5kZWZpbmVkICYmIChvYmouZGlzYWJsZUR0eCA9IG1lc3NhZ2UuZGlzYWJsZUR0eCk7XG4gICAgICAgIG1lc3NhZ2Uuc291cmNlICE9PSB1bmRlZmluZWQgJiYgKG9iai5zb3VyY2UgPSB0cmFja1NvdXJjZVRvSlNPTihtZXNzYWdlLnNvdXJjZSkpO1xuICAgICAgICBpZiAobWVzc2FnZS5sYXllcnMpIHtcbiAgICAgICAgICAgIG9iai5sYXllcnMgPSBtZXNzYWdlLmxheWVycy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLlZpZGVvTGF5ZXIudG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5sYXllcnMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBtZXNzYWdlLm1pbWVUeXBlICE9PSB1bmRlZmluZWQgJiYgKG9iai5taW1lVHlwZSA9IG1lc3NhZ2UubWltZVR5cGUpO1xuICAgICAgICBtZXNzYWdlLm1pZCAhPT0gdW5kZWZpbmVkICYmIChvYmoubWlkID0gbWVzc2FnZS5taWQpO1xuICAgICAgICBpZiAobWVzc2FnZS5jb2RlY3MpIHtcbiAgICAgICAgICAgIG9iai5jb2RlY3MgPSBtZXNzYWdlLmNvZGVjcy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLlNpbXVsY2FzdENvZGVjSW5mby50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLmNvZGVjcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIG1lc3NhZ2Uuc3RlcmVvICE9PSB1bmRlZmluZWQgJiYgKG9iai5zdGVyZW8gPSBtZXNzYWdlLnN0ZXJlbyk7XG4gICAgICAgIG1lc3NhZ2UuZGlzYWJsZVJlZCAhPT0gdW5kZWZpbmVkICYmIChvYmouZGlzYWJsZVJlZCA9IG1lc3NhZ2UuZGlzYWJsZVJlZCk7XG4gICAgICAgIG1lc3NhZ2UuZW5jcnlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIChvYmouZW5jcnlwdGlvbiA9IGVuY3J5cHRpb25fVHlwZVRvSlNPTihtZXNzYWdlLmVuY3J5cHRpb24pKTtcbiAgICAgICAgbWVzc2FnZS5zdHJlYW0gIT09IHVuZGVmaW5lZCAmJiAob2JqLnN0cmVhbSA9IG1lc3NhZ2Uuc3RyZWFtKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaiwgX2ssIF9sLCBfbSwgX28sIF9wLCBfcSwgX3IsIF9zO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRyYWNrSW5mbygpO1xuICAgICAgICBtZXNzYWdlLnNpZCA9IChfYSA9IG9iamVjdC5zaWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UudHlwZSA9IChfYiA9IG9iamVjdC50eXBlKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwO1xuICAgICAgICBtZXNzYWdlLm5hbWUgPSAoX2MgPSBvYmplY3QubmFtZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5tdXRlZCA9IChfZCA9IG9iamVjdC5tdXRlZCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2Uud2lkdGggPSAoX2UgPSBvYmplY3Qud2lkdGgpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IDA7XG4gICAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gKF9mID0gb2JqZWN0LmhlaWdodCkgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogMDtcbiAgICAgICAgbWVzc2FnZS5zaW11bGNhc3QgPSAoX2cgPSBvYmplY3Quc2ltdWxjYXN0KSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiBmYWxzZTtcbiAgICAgICAgbWVzc2FnZS5kaXNhYmxlRHR4ID0gKF9oID0gb2JqZWN0LmRpc2FibGVEdHgpICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLnNvdXJjZSA9IChfaiA9IG9iamVjdC5zb3VyY2UpICE9PSBudWxsICYmIF9qICE9PSB2b2lkIDAgPyBfaiA6IDA7XG4gICAgICAgIG1lc3NhZ2UubGF5ZXJzID0gKChfayA9IG9iamVjdC5sYXllcnMpID09PSBudWxsIHx8IF9rID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfay5tYXAoKGUpID0+IGV4cG9ydHMuVmlkZW9MYXllci5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLm1pbWVUeXBlID0gKF9sID0gb2JqZWN0Lm1pbWVUeXBlKSAhPT0gbnVsbCAmJiBfbCAhPT0gdm9pZCAwID8gX2wgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLm1pZCA9IChfbSA9IG9iamVjdC5taWQpICE9PSBudWxsICYmIF9tICE9PSB2b2lkIDAgPyBfbSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuY29kZWNzID0gKChfbyA9IG9iamVjdC5jb2RlY3MpID09PSBudWxsIHx8IF9vID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfby5tYXAoKGUpID0+IGV4cG9ydHMuU2ltdWxjYXN0Q29kZWNJbmZvLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2Uuc3RlcmVvID0gKF9wID0gb2JqZWN0LnN0ZXJlbykgIT09IG51bGwgJiYgX3AgIT09IHZvaWQgMCA/IF9wIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2UuZGlzYWJsZVJlZCA9IChfcSA9IG9iamVjdC5kaXNhYmxlUmVkKSAhPT0gbnVsbCAmJiBfcSAhPT0gdm9pZCAwID8gX3EgOiBmYWxzZTtcbiAgICAgICAgbWVzc2FnZS5lbmNyeXB0aW9uID0gKF9yID0gb2JqZWN0LmVuY3J5cHRpb24pICE9PSBudWxsICYmIF9yICE9PSB2b2lkIDAgPyBfciA6IDA7XG4gICAgICAgIG1lc3NhZ2Uuc3RyZWFtID0gKF9zID0gb2JqZWN0LnN0cmVhbSkgIT09IG51bGwgJiYgX3MgIT09IHZvaWQgMCA/IF9zIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVmlkZW9MYXllcigpIHtcbiAgICByZXR1cm4geyBxdWFsaXR5OiAwLCB3aWR0aDogMCwgaGVpZ2h0OiAwLCBiaXRyYXRlOiAwLCBzc3JjOiAwIH07XG59XG5leHBvcnRzLlZpZGVvTGF5ZXIgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5xdWFsaXR5ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDgpLmludDMyKG1lc3NhZ2UucXVhbGl0eSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uud2lkdGggIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTYpLnVpbnQzMihtZXNzYWdlLndpZHRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5oZWlnaHQgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjQpLnVpbnQzMihtZXNzYWdlLmhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYml0cmF0ZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigzMikudWludDMyKG1lc3NhZ2UuYml0cmF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3NyYyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0MCkudWludDMyKG1lc3NhZ2Uuc3NyYyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVmlkZW9MYXllcigpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucXVhbGl0eSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uud2lkdGggPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5oZWlnaHQgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5iaXRyYXRlID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3NyYyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcXVhbGl0eTogaXNTZXQob2JqZWN0LnF1YWxpdHkpID8gdmlkZW9RdWFsaXR5RnJvbUpTT04ob2JqZWN0LnF1YWxpdHkpIDogMCxcbiAgICAgICAgICAgIHdpZHRoOiBpc1NldChvYmplY3Qud2lkdGgpID8gTnVtYmVyKG9iamVjdC53aWR0aCkgOiAwLFxuICAgICAgICAgICAgaGVpZ2h0OiBpc1NldChvYmplY3QuaGVpZ2h0KSA/IE51bWJlcihvYmplY3QuaGVpZ2h0KSA6IDAsXG4gICAgICAgICAgICBiaXRyYXRlOiBpc1NldChvYmplY3QuYml0cmF0ZSkgPyBOdW1iZXIob2JqZWN0LmJpdHJhdGUpIDogMCxcbiAgICAgICAgICAgIHNzcmM6IGlzU2V0KG9iamVjdC5zc3JjKSA/IE51bWJlcihvYmplY3Quc3NyYykgOiAwLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UucXVhbGl0eSAhPT0gdW5kZWZpbmVkICYmIChvYmoucXVhbGl0eSA9IHZpZGVvUXVhbGl0eVRvSlNPTihtZXNzYWdlLnF1YWxpdHkpKTtcbiAgICAgICAgbWVzc2FnZS53aWR0aCAhPT0gdW5kZWZpbmVkICYmIChvYmoud2lkdGggPSBNYXRoLnJvdW5kKG1lc3NhZ2Uud2lkdGgpKTtcbiAgICAgICAgbWVzc2FnZS5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmhlaWdodCA9IE1hdGgucm91bmQobWVzc2FnZS5oZWlnaHQpKTtcbiAgICAgICAgbWVzc2FnZS5iaXRyYXRlICE9PSB1bmRlZmluZWQgJiYgKG9iai5iaXRyYXRlID0gTWF0aC5yb3VuZChtZXNzYWdlLmJpdHJhdGUpKTtcbiAgICAgICAgbWVzc2FnZS5zc3JjICE9PSB1bmRlZmluZWQgJiYgKG9iai5zc3JjID0gTWF0aC5yb3VuZChtZXNzYWdlLnNzcmMpKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVZpZGVvTGF5ZXIoKTtcbiAgICAgICAgbWVzc2FnZS5xdWFsaXR5ID0gKF9hID0gb2JqZWN0LnF1YWxpdHkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDA7XG4gICAgICAgIG1lc3NhZ2Uud2lkdGggPSAoX2IgPSBvYmplY3Qud2lkdGgpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDA7XG4gICAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gKF9jID0gb2JqZWN0LmhlaWdodCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMDtcbiAgICAgICAgbWVzc2FnZS5iaXRyYXRlID0gKF9kID0gb2JqZWN0LmJpdHJhdGUpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IDA7XG4gICAgICAgIG1lc3NhZ2Uuc3NyYyA9IChfZSA9IG9iamVjdC5zc3JjKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiAwO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VEYXRhUGFja2V0KCkge1xuICAgIHJldHVybiB7IGtpbmQ6IDAsIHVzZXI6IHVuZGVmaW5lZCwgc3BlYWtlcjogdW5kZWZpbmVkIH07XG59XG5leHBvcnRzLkRhdGFQYWNrZXQgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5raW5kICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDgpLmludDMyKG1lc3NhZ2Uua2luZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudXNlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlVzZXJQYWNrZXQuZW5jb2RlKG1lc3NhZ2UudXNlciwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zcGVha2VyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuQWN0aXZlU3BlYWtlclVwZGF0ZS5lbmNvZGUobWVzc2FnZS5zcGVha2VyLCB3cml0ZXIudWludDMyKDI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZURhdGFQYWNrZXQoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmtpbmQgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVzZXIgPSBleHBvcnRzLlVzZXJQYWNrZXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNwZWFrZXIgPSBleHBvcnRzLkFjdGl2ZVNwZWFrZXJVcGRhdGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2luZDogaXNTZXQob2JqZWN0LmtpbmQpID8gZGF0YVBhY2tldF9LaW5kRnJvbUpTT04ob2JqZWN0LmtpbmQpIDogMCxcbiAgICAgICAgICAgIHVzZXI6IGlzU2V0KG9iamVjdC51c2VyKSA/IGV4cG9ydHMuVXNlclBhY2tldC5mcm9tSlNPTihvYmplY3QudXNlcikgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzcGVha2VyOiBpc1NldChvYmplY3Quc3BlYWtlcikgPyBleHBvcnRzLkFjdGl2ZVNwZWFrZXJVcGRhdGUuZnJvbUpTT04ob2JqZWN0LnNwZWFrZXIpIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2Uua2luZCAhPT0gdW5kZWZpbmVkICYmIChvYmoua2luZCA9IGRhdGFQYWNrZXRfS2luZFRvSlNPTihtZXNzYWdlLmtpbmQpKTtcbiAgICAgICAgbWVzc2FnZS51c2VyICE9PSB1bmRlZmluZWQgJiYgKG9iai51c2VyID0gbWVzc2FnZS51c2VyID8gZXhwb3J0cy5Vc2VyUGFja2V0LnRvSlNPTihtZXNzYWdlLnVzZXIpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5zcGVha2VyICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmouc3BlYWtlciA9IG1lc3NhZ2Uuc3BlYWtlciA/IGV4cG9ydHMuQWN0aXZlU3BlYWtlclVwZGF0ZS50b0pTT04obWVzc2FnZS5zcGVha2VyKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZURhdGFQYWNrZXQoKTtcbiAgICAgICAgbWVzc2FnZS5raW5kID0gKF9hID0gb2JqZWN0LmtpbmQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDA7XG4gICAgICAgIG1lc3NhZ2UudXNlciA9IChvYmplY3QudXNlciAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC51c2VyICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLlVzZXJQYWNrZXQuZnJvbVBhcnRpYWwob2JqZWN0LnVzZXIpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5zcGVha2VyID0gKG9iamVjdC5zcGVha2VyICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnNwZWFrZXIgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuQWN0aXZlU3BlYWtlclVwZGF0ZS5mcm9tUGFydGlhbChvYmplY3Quc3BlYWtlcilcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VBY3RpdmVTcGVha2VyVXBkYXRlKCkge1xuICAgIHJldHVybiB7IHNwZWFrZXJzOiBbXSB9O1xufVxuZXhwb3J0cy5BY3RpdmVTcGVha2VyVXBkYXRlID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2Uuc3BlYWtlcnMpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuU3BlYWtlckluZm8uZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlQWN0aXZlU3BlYWtlclVwZGF0ZSgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3BlYWtlcnMucHVzaChleHBvcnRzLlNwZWFrZXJJbmZvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzcGVha2VyczogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3Quc3BlYWtlcnMpID8gb2JqZWN0LnNwZWFrZXJzLm1hcCgoZSkgPT4gZXhwb3J0cy5TcGVha2VySW5mby5mcm9tSlNPTihlKSkgOiBbXSxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBpZiAobWVzc2FnZS5zcGVha2Vycykge1xuICAgICAgICAgICAgb2JqLnNwZWFrZXJzID0gbWVzc2FnZS5zcGVha2Vycy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLlNwZWFrZXJJbmZvLnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouc3BlYWtlcnMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VBY3RpdmVTcGVha2VyVXBkYXRlKCk7XG4gICAgICAgIG1lc3NhZ2Uuc3BlYWtlcnMgPSAoKF9hID0gb2JqZWN0LnNwZWFrZXJzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWFwKChlKSA9PiBleHBvcnRzLlNwZWFrZXJJbmZvLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVNwZWFrZXJJbmZvKCkge1xuICAgIHJldHVybiB7IHNpZDogXCJcIiwgbGV2ZWw6IDAsIGFjdGl2ZTogZmFsc2UgfTtcbn1cbmV4cG9ydHMuU3BlYWtlckluZm8gPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5zaWQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLnNpZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubGV2ZWwgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjEpLmZsb2F0KG1lc3NhZ2UubGV2ZWwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmFjdGl2ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkuYm9vbChtZXNzYWdlLmFjdGl2ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3BlYWtlckluZm8oKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNpZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxldmVsID0gcmVhZGVyLmZsb2F0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hY3RpdmUgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzaWQ6IGlzU2V0KG9iamVjdC5zaWQpID8gU3RyaW5nKG9iamVjdC5zaWQpIDogXCJcIixcbiAgICAgICAgICAgIGxldmVsOiBpc1NldChvYmplY3QubGV2ZWwpID8gTnVtYmVyKG9iamVjdC5sZXZlbCkgOiAwLFxuICAgICAgICAgICAgYWN0aXZlOiBpc1NldChvYmplY3QuYWN0aXZlKSA/IEJvb2xlYW4ob2JqZWN0LmFjdGl2ZSkgOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnNpZCAhPT0gdW5kZWZpbmVkICYmIChvYmouc2lkID0gbWVzc2FnZS5zaWQpO1xuICAgICAgICBtZXNzYWdlLmxldmVsICE9PSB1bmRlZmluZWQgJiYgKG9iai5sZXZlbCA9IG1lc3NhZ2UubGV2ZWwpO1xuICAgICAgICBtZXNzYWdlLmFjdGl2ZSAhPT0gdW5kZWZpbmVkICYmIChvYmouYWN0aXZlID0gbWVzc2FnZS5hY3RpdmUpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVNwZWFrZXJJbmZvKCk7XG4gICAgICAgIG1lc3NhZ2Uuc2lkID0gKF9hID0gb2JqZWN0LnNpZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5sZXZlbCA9IChfYiA9IG9iamVjdC5sZXZlbCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMDtcbiAgICAgICAgbWVzc2FnZS5hY3RpdmUgPSAoX2MgPSBvYmplY3QuYWN0aXZlKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVXNlclBhY2tldCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBwYXJ0aWNpcGFudFNpZDogXCJcIixcbiAgICAgICAgcGFydGljaXBhbnRJZGVudGl0eTogXCJcIixcbiAgICAgICAgcGF5bG9hZDogbmV3IFVpbnQ4QXJyYXkoKSxcbiAgICAgICAgZGVzdGluYXRpb25TaWRzOiBbXSxcbiAgICAgICAgZGVzdGluYXRpb25JZGVudGl0aWVzOiBbXSxcbiAgICAgICAgdG9waWM6IHVuZGVmaW5lZCxcbiAgICB9O1xufVxuZXhwb3J0cy5Vc2VyUGFja2V0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGFydGljaXBhbnRTaWQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLnBhcnRpY2lwYW50U2lkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wYXJ0aWNpcGFudElkZW50aXR5ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQyKS5zdHJpbmcobWVzc2FnZS5wYXJ0aWNpcGFudElkZW50aXR5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wYXlsb2FkLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuYnl0ZXMobWVzc2FnZS5wYXlsb2FkKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5kZXN0aW5hdGlvblNpZHMpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyh2KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5kZXN0aW5hdGlvbklkZW50aXRpZXMpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNTApLnN0cmluZyh2KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS50b3BpYyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcobWVzc2FnZS50b3BpYyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVXNlclBhY2tldCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnRTaWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudElkZW50aXR5ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGF5bG9hZCA9IHJlYWRlci5ieXRlcygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVzdGluYXRpb25TaWRzLnB1c2gocmVhZGVyLnN0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlc3RpbmF0aW9uSWRlbnRpdGllcy5wdXNoKHJlYWRlci5zdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50b3BpYyA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGFydGljaXBhbnRTaWQ6IGlzU2V0KG9iamVjdC5wYXJ0aWNpcGFudFNpZCkgPyBTdHJpbmcob2JqZWN0LnBhcnRpY2lwYW50U2lkKSA6IFwiXCIsXG4gICAgICAgICAgICBwYXJ0aWNpcGFudElkZW50aXR5OiBpc1NldChvYmplY3QucGFydGljaXBhbnRJZGVudGl0eSkgPyBTdHJpbmcob2JqZWN0LnBhcnRpY2lwYW50SWRlbnRpdHkpIDogXCJcIixcbiAgICAgICAgICAgIHBheWxvYWQ6IGlzU2V0KG9iamVjdC5wYXlsb2FkKSA/IGJ5dGVzRnJvbUJhc2U2NChvYmplY3QucGF5bG9hZCkgOiBuZXcgVWludDhBcnJheSgpLFxuICAgICAgICAgICAgZGVzdGluYXRpb25TaWRzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5kZXN0aW5hdGlvblNpZHMpID8gb2JqZWN0LmRlc3RpbmF0aW9uU2lkcy5tYXAoKGUpID0+IFN0cmluZyhlKSkgOiBbXSxcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uSWRlbnRpdGllczogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QuZGVzdGluYXRpb25JZGVudGl0aWVzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LmRlc3RpbmF0aW9uSWRlbnRpdGllcy5tYXAoKGUpID0+IFN0cmluZyhlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgdG9waWM6IGlzU2V0KG9iamVjdC50b3BpYykgPyBTdHJpbmcob2JqZWN0LnRvcGljKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50U2lkICE9PSB1bmRlZmluZWQgJiYgKG9iai5wYXJ0aWNpcGFudFNpZCA9IG1lc3NhZ2UucGFydGljaXBhbnRTaWQpO1xuICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50SWRlbnRpdHkgIT09IHVuZGVmaW5lZCAmJiAob2JqLnBhcnRpY2lwYW50SWRlbnRpdHkgPSBtZXNzYWdlLnBhcnRpY2lwYW50SWRlbnRpdHkpO1xuICAgICAgICBtZXNzYWdlLnBheWxvYWQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5wYXlsb2FkID0gYmFzZTY0RnJvbUJ5dGVzKG1lc3NhZ2UucGF5bG9hZCAhPT0gdW5kZWZpbmVkID8gbWVzc2FnZS5wYXlsb2FkIDogbmV3IFVpbnQ4QXJyYXkoKSkpO1xuICAgICAgICBpZiAobWVzc2FnZS5kZXN0aW5hdGlvblNpZHMpIHtcbiAgICAgICAgICAgIG9iai5kZXN0aW5hdGlvblNpZHMgPSBtZXNzYWdlLmRlc3RpbmF0aW9uU2lkcy5tYXAoKGUpID0+IGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLmRlc3RpbmF0aW9uU2lkcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmRlc3RpbmF0aW9uSWRlbnRpdGllcykge1xuICAgICAgICAgICAgb2JqLmRlc3RpbmF0aW9uSWRlbnRpdGllcyA9IG1lc3NhZ2UuZGVzdGluYXRpb25JZGVudGl0aWVzLm1hcCgoZSkgPT4gZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouZGVzdGluYXRpb25JZGVudGl0aWVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgbWVzc2FnZS50b3BpYyAhPT0gdW5kZWZpbmVkICYmIChvYmoudG9waWMgPSBtZXNzYWdlLnRvcGljKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VVc2VyUGFja2V0KCk7XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnRTaWQgPSAoX2EgPSBvYmplY3QucGFydGljaXBhbnRTaWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSA9IChfYiA9IG9iamVjdC5wYXJ0aWNpcGFudElkZW50aXR5KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnBheWxvYWQgPSAoX2MgPSBvYmplY3QucGF5bG9hZCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogbmV3IFVpbnQ4QXJyYXkoKTtcbiAgICAgICAgbWVzc2FnZS5kZXN0aW5hdGlvblNpZHMgPSAoKF9kID0gb2JqZWN0LmRlc3RpbmF0aW9uU2lkcykgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLm1hcCgoZSkgPT4gZSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLmRlc3RpbmF0aW9uSWRlbnRpdGllcyA9ICgoX2UgPSBvYmplY3QuZGVzdGluYXRpb25JZGVudGl0aWVzKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UubWFwKChlKSA9PiBlKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2UudG9waWMgPSAoX2YgPSBvYmplY3QudG9waWMpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlUGFydGljaXBhbnRUcmFja3MoKSB7XG4gICAgcmV0dXJuIHsgcGFydGljaXBhbnRTaWQ6IFwiXCIsIHRyYWNrU2lkczogW10gfTtcbn1cbmV4cG9ydHMuUGFydGljaXBhbnRUcmFja3MgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5wYXJ0aWNpcGFudFNpZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UucGFydGljaXBhbnRTaWQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLnRyYWNrU2lkcykge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKHYpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVBhcnRpY2lwYW50VHJhY2tzKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudFNpZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRyYWNrU2lkcy5wdXNoKHJlYWRlci5zdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBhcnRpY2lwYW50U2lkOiBpc1NldChvYmplY3QucGFydGljaXBhbnRTaWQpID8gU3RyaW5nKG9iamVjdC5wYXJ0aWNpcGFudFNpZCkgOiBcIlwiLFxuICAgICAgICAgICAgdHJhY2tTaWRzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC50cmFja1NpZHMpID8gb2JqZWN0LnRyYWNrU2lkcy5tYXAoKGUpID0+IFN0cmluZyhlKSkgOiBbXSxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50U2lkICE9PSB1bmRlZmluZWQgJiYgKG9iai5wYXJ0aWNpcGFudFNpZCA9IG1lc3NhZ2UucGFydGljaXBhbnRTaWQpO1xuICAgICAgICBpZiAobWVzc2FnZS50cmFja1NpZHMpIHtcbiAgICAgICAgICAgIG9iai50cmFja1NpZHMgPSBtZXNzYWdlLnRyYWNrU2lkcy5tYXAoKGUpID0+IGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLnRyYWNrU2lkcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VQYXJ0aWNpcGFudFRyYWNrcygpO1xuICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50U2lkID0gKF9hID0gb2JqZWN0LnBhcnRpY2lwYW50U2lkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnRyYWNrU2lkcyA9ICgoX2IgPSBvYmplY3QudHJhY2tTaWRzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubWFwKChlKSA9PiBlKSkgfHwgW107XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVNlcnZlckluZm8oKSB7XG4gICAgcmV0dXJuIHsgZWRpdGlvbjogMCwgdmVyc2lvbjogXCJcIiwgcHJvdG9jb2w6IDAsIHJlZ2lvbjogXCJcIiwgbm9kZUlkOiBcIlwiLCBkZWJ1Z0luZm86IFwiXCIgfTtcbn1cbmV4cG9ydHMuU2VydmVySW5mbyA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmVkaXRpb24gIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoOCkuaW50MzIobWVzc2FnZS5lZGl0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS52ZXJzaW9uICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS52ZXJzaW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wcm90b2NvbCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkuaW50MzIobWVzc2FnZS5wcm90b2NvbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucmVnaW9uICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcobWVzc2FnZS5yZWdpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm5vZGVJZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0Mikuc3RyaW5nKG1lc3NhZ2Uubm9kZUlkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5kZWJ1Z0luZm8gIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNTApLnN0cmluZyhtZXNzYWdlLmRlYnVnSW5mbyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU2VydmVySW5mbygpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZWRpdGlvbiA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudmVyc2lvbiA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnByb3RvY29sID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWdpb24gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ub2RlSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZWJ1Z0luZm8gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVkaXRpb246IGlzU2V0KG9iamVjdC5lZGl0aW9uKSA/IHNlcnZlckluZm9fRWRpdGlvbkZyb21KU09OKG9iamVjdC5lZGl0aW9uKSA6IDAsXG4gICAgICAgICAgICB2ZXJzaW9uOiBpc1NldChvYmplY3QudmVyc2lvbikgPyBTdHJpbmcob2JqZWN0LnZlcnNpb24pIDogXCJcIixcbiAgICAgICAgICAgIHByb3RvY29sOiBpc1NldChvYmplY3QucHJvdG9jb2wpID8gTnVtYmVyKG9iamVjdC5wcm90b2NvbCkgOiAwLFxuICAgICAgICAgICAgcmVnaW9uOiBpc1NldChvYmplY3QucmVnaW9uKSA/IFN0cmluZyhvYmplY3QucmVnaW9uKSA6IFwiXCIsXG4gICAgICAgICAgICBub2RlSWQ6IGlzU2V0KG9iamVjdC5ub2RlSWQpID8gU3RyaW5nKG9iamVjdC5ub2RlSWQpIDogXCJcIixcbiAgICAgICAgICAgIGRlYnVnSW5mbzogaXNTZXQob2JqZWN0LmRlYnVnSW5mbykgPyBTdHJpbmcob2JqZWN0LmRlYnVnSW5mbykgOiBcIlwiLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UuZWRpdGlvbiAhPT0gdW5kZWZpbmVkICYmIChvYmouZWRpdGlvbiA9IHNlcnZlckluZm9fRWRpdGlvblRvSlNPTihtZXNzYWdlLmVkaXRpb24pKTtcbiAgICAgICAgbWVzc2FnZS52ZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai52ZXJzaW9uID0gbWVzc2FnZS52ZXJzaW9uKTtcbiAgICAgICAgbWVzc2FnZS5wcm90b2NvbCAhPT0gdW5kZWZpbmVkICYmIChvYmoucHJvdG9jb2wgPSBNYXRoLnJvdW5kKG1lc3NhZ2UucHJvdG9jb2wpKTtcbiAgICAgICAgbWVzc2FnZS5yZWdpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLnJlZ2lvbiA9IG1lc3NhZ2UucmVnaW9uKTtcbiAgICAgICAgbWVzc2FnZS5ub2RlSWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLm5vZGVJZCA9IG1lc3NhZ2Uubm9kZUlkKTtcbiAgICAgICAgbWVzc2FnZS5kZWJ1Z0luZm8gIT09IHVuZGVmaW5lZCAmJiAob2JqLmRlYnVnSW5mbyA9IG1lc3NhZ2UuZGVidWdJbmZvKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTZXJ2ZXJJbmZvKCk7XG4gICAgICAgIG1lc3NhZ2UuZWRpdGlvbiA9IChfYSA9IG9iamVjdC5lZGl0aW9uKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xuICAgICAgICBtZXNzYWdlLnZlcnNpb24gPSAoX2IgPSBvYmplY3QudmVyc2lvbikgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5wcm90b2NvbCA9IChfYyA9IG9iamVjdC5wcm90b2NvbCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMDtcbiAgICAgICAgbWVzc2FnZS5yZWdpb24gPSAoX2QgPSBvYmplY3QucmVnaW9uKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLm5vZGVJZCA9IChfZSA9IG9iamVjdC5ub2RlSWQpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuZGVidWdJbmZvID0gKF9mID0gb2JqZWN0LmRlYnVnSW5mbykgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlQ2xpZW50SW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzZGs6IDAsXG4gICAgICAgIHZlcnNpb246IFwiXCIsXG4gICAgICAgIHByb3RvY29sOiAwLFxuICAgICAgICBvczogXCJcIixcbiAgICAgICAgb3NWZXJzaW9uOiBcIlwiLFxuICAgICAgICBkZXZpY2VNb2RlbDogXCJcIixcbiAgICAgICAgYnJvd3NlcjogXCJcIixcbiAgICAgICAgYnJvd3NlclZlcnNpb246IFwiXCIsXG4gICAgICAgIGFkZHJlc3M6IFwiXCIsXG4gICAgICAgIG5ldHdvcms6IFwiXCIsXG4gICAgfTtcbn1cbmV4cG9ydHMuQ2xpZW50SW5mbyA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnNkayAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4KS5pbnQzMihtZXNzYWdlLnNkayk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudmVyc2lvbiAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UudmVyc2lvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucHJvdG9jb2wgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjQpLmludDMyKG1lc3NhZ2UucHJvdG9jb2wpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm9zICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcobWVzc2FnZS5vcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uub3NWZXJzaW9uICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQyKS5zdHJpbmcobWVzc2FnZS5vc1ZlcnNpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmRldmljZU1vZGVsICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDUwKS5zdHJpbmcobWVzc2FnZS5kZXZpY2VNb2RlbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYnJvd3NlciAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig1OCkuc3RyaW5nKG1lc3NhZ2UuYnJvd3Nlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYnJvd3NlclZlcnNpb24gIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNjYpLnN0cmluZyhtZXNzYWdlLmJyb3dzZXJWZXJzaW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5hZGRyZXNzICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDc0KS5zdHJpbmcobWVzc2FnZS5hZGRyZXNzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5uZXR3b3JrICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDgyKS5zdHJpbmcobWVzc2FnZS5uZXR3b3JrKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VDbGllbnRJbmZvKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZGsgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZlcnNpb24gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wcm90b2NvbCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uub3MgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5vc1ZlcnNpb24gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZXZpY2VNb2RlbCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmJyb3dzZXIgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5icm93c2VyVmVyc2lvbiA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFkZHJlc3MgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubmV0d29yayA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2RrOiBpc1NldChvYmplY3Quc2RrKSA/IGNsaWVudEluZm9fU0RLRnJvbUpTT04ob2JqZWN0LnNkaykgOiAwLFxuICAgICAgICAgICAgdmVyc2lvbjogaXNTZXQob2JqZWN0LnZlcnNpb24pID8gU3RyaW5nKG9iamVjdC52ZXJzaW9uKSA6IFwiXCIsXG4gICAgICAgICAgICBwcm90b2NvbDogaXNTZXQob2JqZWN0LnByb3RvY29sKSA/IE51bWJlcihvYmplY3QucHJvdG9jb2wpIDogMCxcbiAgICAgICAgICAgIG9zOiBpc1NldChvYmplY3Qub3MpID8gU3RyaW5nKG9iamVjdC5vcykgOiBcIlwiLFxuICAgICAgICAgICAgb3NWZXJzaW9uOiBpc1NldChvYmplY3Qub3NWZXJzaW9uKSA/IFN0cmluZyhvYmplY3Qub3NWZXJzaW9uKSA6IFwiXCIsXG4gICAgICAgICAgICBkZXZpY2VNb2RlbDogaXNTZXQob2JqZWN0LmRldmljZU1vZGVsKSA/IFN0cmluZyhvYmplY3QuZGV2aWNlTW9kZWwpIDogXCJcIixcbiAgICAgICAgICAgIGJyb3dzZXI6IGlzU2V0KG9iamVjdC5icm93c2VyKSA/IFN0cmluZyhvYmplY3QuYnJvd3NlcikgOiBcIlwiLFxuICAgICAgICAgICAgYnJvd3NlclZlcnNpb246IGlzU2V0KG9iamVjdC5icm93c2VyVmVyc2lvbikgPyBTdHJpbmcob2JqZWN0LmJyb3dzZXJWZXJzaW9uKSA6IFwiXCIsXG4gICAgICAgICAgICBhZGRyZXNzOiBpc1NldChvYmplY3QuYWRkcmVzcykgPyBTdHJpbmcob2JqZWN0LmFkZHJlc3MpIDogXCJcIixcbiAgICAgICAgICAgIG5ldHdvcms6IGlzU2V0KG9iamVjdC5uZXR3b3JrKSA/IFN0cmluZyhvYmplY3QubmV0d29yaykgOiBcIlwiLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2Uuc2RrICE9PSB1bmRlZmluZWQgJiYgKG9iai5zZGsgPSBjbGllbnRJbmZvX1NES1RvSlNPTihtZXNzYWdlLnNkaykpO1xuICAgICAgICBtZXNzYWdlLnZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLnZlcnNpb24gPSBtZXNzYWdlLnZlcnNpb24pO1xuICAgICAgICBtZXNzYWdlLnByb3RvY29sICE9PSB1bmRlZmluZWQgJiYgKG9iai5wcm90b2NvbCA9IE1hdGgucm91bmQobWVzc2FnZS5wcm90b2NvbCkpO1xuICAgICAgICBtZXNzYWdlLm9zICE9PSB1bmRlZmluZWQgJiYgKG9iai5vcyA9IG1lc3NhZ2Uub3MpO1xuICAgICAgICBtZXNzYWdlLm9zVmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIChvYmoub3NWZXJzaW9uID0gbWVzc2FnZS5vc1ZlcnNpb24pO1xuICAgICAgICBtZXNzYWdlLmRldmljZU1vZGVsICE9PSB1bmRlZmluZWQgJiYgKG9iai5kZXZpY2VNb2RlbCA9IG1lc3NhZ2UuZGV2aWNlTW9kZWwpO1xuICAgICAgICBtZXNzYWdlLmJyb3dzZXIgIT09IHVuZGVmaW5lZCAmJiAob2JqLmJyb3dzZXIgPSBtZXNzYWdlLmJyb3dzZXIpO1xuICAgICAgICBtZXNzYWdlLmJyb3dzZXJWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai5icm93c2VyVmVyc2lvbiA9IG1lc3NhZ2UuYnJvd3NlclZlcnNpb24pO1xuICAgICAgICBtZXNzYWdlLmFkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiAob2JqLmFkZHJlc3MgPSBtZXNzYWdlLmFkZHJlc3MpO1xuICAgICAgICBtZXNzYWdlLm5ldHdvcmsgIT09IHVuZGVmaW5lZCAmJiAob2JqLm5ldHdvcmsgPSBtZXNzYWdlLm5ldHdvcmspO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9qLCBfaztcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VDbGllbnRJbmZvKCk7XG4gICAgICAgIG1lc3NhZ2Uuc2RrID0gKF9hID0gb2JqZWN0LnNkaykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcbiAgICAgICAgbWVzc2FnZS52ZXJzaW9uID0gKF9iID0gb2JqZWN0LnZlcnNpb24pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UucHJvdG9jb2wgPSAoX2MgPSBvYmplY3QucHJvdG9jb2wpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IDA7XG4gICAgICAgIG1lc3NhZ2Uub3MgPSAoX2QgPSBvYmplY3Qub3MpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2Uub3NWZXJzaW9uID0gKF9lID0gb2JqZWN0Lm9zVmVyc2lvbikgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5kZXZpY2VNb2RlbCA9IChfZiA9IG9iamVjdC5kZXZpY2VNb2RlbCkgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5icm93c2VyID0gKF9nID0gb2JqZWN0LmJyb3dzZXIpICE9PSBudWxsICYmIF9nICE9PSB2b2lkIDAgPyBfZyA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuYnJvd3NlclZlcnNpb24gPSAoX2ggPSBvYmplY3QuYnJvd3NlclZlcnNpb24pICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuYWRkcmVzcyA9IChfaiA9IG9iamVjdC5hZGRyZXNzKSAhPT0gbnVsbCAmJiBfaiAhPT0gdm9pZCAwID8gX2ogOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLm5ldHdvcmsgPSAoX2sgPSBvYmplY3QubmV0d29yaykgIT09IG51bGwgJiYgX2sgIT09IHZvaWQgMCA/IF9rIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlQ2xpZW50Q29uZmlndXJhdGlvbigpIHtcbiAgICByZXR1cm4geyB2aWRlbzogdW5kZWZpbmVkLCBzY3JlZW46IHVuZGVmaW5lZCwgcmVzdW1lQ29ubmVjdGlvbjogMCwgZGlzYWJsZWRDb2RlY3M6IHVuZGVmaW5lZCwgZm9yY2VSZWxheTogMCB9O1xufVxuZXhwb3J0cy5DbGllbnRDb25maWd1cmF0aW9uID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UudmlkZW8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5WaWRlb0NvbmZpZ3VyYXRpb24uZW5jb2RlKG1lc3NhZ2UudmlkZW8sIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2NyZWVuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuVmlkZW9Db25maWd1cmF0aW9uLmVuY29kZShtZXNzYWdlLnNjcmVlbiwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5yZXN1bWVDb25uZWN0aW9uICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI0KS5pbnQzMihtZXNzYWdlLnJlc3VtZUNvbm5lY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmRpc2FibGVkQ29kZWNzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuRGlzYWJsZWRDb2RlY3MuZW5jb2RlKG1lc3NhZ2UuZGlzYWJsZWRDb2RlY3MsIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZm9yY2VSZWxheSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0MCkuaW50MzIobWVzc2FnZS5mb3JjZVJlbGF5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VDbGllbnRDb25maWd1cmF0aW9uKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52aWRlbyA9IGV4cG9ydHMuVmlkZW9Db25maWd1cmF0aW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zY3JlZW4gPSBleHBvcnRzLlZpZGVvQ29uZmlndXJhdGlvbi5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVzdW1lQ29ubmVjdGlvbiA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGlzYWJsZWRDb2RlY3MgPSBleHBvcnRzLkRpc2FibGVkQ29kZWNzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5mb3JjZVJlbGF5ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZpZGVvOiBpc1NldChvYmplY3QudmlkZW8pID8gZXhwb3J0cy5WaWRlb0NvbmZpZ3VyYXRpb24uZnJvbUpTT04ob2JqZWN0LnZpZGVvKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHNjcmVlbjogaXNTZXQob2JqZWN0LnNjcmVlbikgPyBleHBvcnRzLlZpZGVvQ29uZmlndXJhdGlvbi5mcm9tSlNPTihvYmplY3Quc2NyZWVuKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJlc3VtZUNvbm5lY3Rpb246IGlzU2V0KG9iamVjdC5yZXN1bWVDb25uZWN0aW9uKSA/IGNsaWVudENvbmZpZ1NldHRpbmdGcm9tSlNPTihvYmplY3QucmVzdW1lQ29ubmVjdGlvbikgOiAwLFxuICAgICAgICAgICAgZGlzYWJsZWRDb2RlY3M6IGlzU2V0KG9iamVjdC5kaXNhYmxlZENvZGVjcykgPyBleHBvcnRzLkRpc2FibGVkQ29kZWNzLmZyb21KU09OKG9iamVjdC5kaXNhYmxlZENvZGVjcykgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBmb3JjZVJlbGF5OiBpc1NldChvYmplY3QuZm9yY2VSZWxheSkgPyBjbGllbnRDb25maWdTZXR0aW5nRnJvbUpTT04ob2JqZWN0LmZvcmNlUmVsYXkpIDogMCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnZpZGVvICE9PSB1bmRlZmluZWQgJiYgKG9iai52aWRlbyA9IG1lc3NhZ2UudmlkZW8gPyBleHBvcnRzLlZpZGVvQ29uZmlndXJhdGlvbi50b0pTT04obWVzc2FnZS52aWRlbykgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLnNjcmVlbiAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLnNjcmVlbiA9IG1lc3NhZ2Uuc2NyZWVuID8gZXhwb3J0cy5WaWRlb0NvbmZpZ3VyYXRpb24udG9KU09OKG1lc3NhZ2Uuc2NyZWVuKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UucmVzdW1lQ29ubmVjdGlvbiAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLnJlc3VtZUNvbm5lY3Rpb24gPSBjbGllbnRDb25maWdTZXR0aW5nVG9KU09OKG1lc3NhZ2UucmVzdW1lQ29ubmVjdGlvbikpO1xuICAgICAgICBtZXNzYWdlLmRpc2FibGVkQ29kZWNzICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmouZGlzYWJsZWRDb2RlY3MgPSBtZXNzYWdlLmRpc2FibGVkQ29kZWNzID8gZXhwb3J0cy5EaXNhYmxlZENvZGVjcy50b0pTT04obWVzc2FnZS5kaXNhYmxlZENvZGVjcykgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLmZvcmNlUmVsYXkgIT09IHVuZGVmaW5lZCAmJiAob2JqLmZvcmNlUmVsYXkgPSBjbGllbnRDb25maWdTZXR0aW5nVG9KU09OKG1lc3NhZ2UuZm9yY2VSZWxheSkpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlQ2xpZW50Q29uZmlndXJhdGlvbigpO1xuICAgICAgICBtZXNzYWdlLnZpZGVvID0gKG9iamVjdC52aWRlbyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52aWRlbyAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5WaWRlb0NvbmZpZ3VyYXRpb24uZnJvbVBhcnRpYWwob2JqZWN0LnZpZGVvKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2Uuc2NyZWVuID0gKG9iamVjdC5zY3JlZW4gIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc2NyZWVuICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLlZpZGVvQ29uZmlndXJhdGlvbi5mcm9tUGFydGlhbChvYmplY3Quc2NyZWVuKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UucmVzdW1lQ29ubmVjdGlvbiA9IChfYSA9IG9iamVjdC5yZXN1bWVDb25uZWN0aW9uKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xuICAgICAgICBtZXNzYWdlLmRpc2FibGVkQ29kZWNzID0gKG9iamVjdC5kaXNhYmxlZENvZGVjcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5kaXNhYmxlZENvZGVjcyAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5EaXNhYmxlZENvZGVjcy5mcm9tUGFydGlhbChvYmplY3QuZGlzYWJsZWRDb2RlY3MpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5mb3JjZVJlbGF5ID0gKF9iID0gb2JqZWN0LmZvcmNlUmVsYXkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDA7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVZpZGVvQ29uZmlndXJhdGlvbigpIHtcbiAgICByZXR1cm4geyBoYXJkd2FyZUVuY29kZXI6IDAgfTtcbn1cbmV4cG9ydHMuVmlkZW9Db25maWd1cmF0aW9uID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuaGFyZHdhcmVFbmNvZGVyICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDgpLmludDMyKG1lc3NhZ2UuaGFyZHdhcmVFbmNvZGVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VWaWRlb0NvbmZpZ3VyYXRpb24oKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmhhcmR3YXJlRW5jb2RlciA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7IGhhcmR3YXJlRW5jb2RlcjogaXNTZXQob2JqZWN0LmhhcmR3YXJlRW5jb2RlcikgPyBjbGllbnRDb25maWdTZXR0aW5nRnJvbUpTT04ob2JqZWN0LmhhcmR3YXJlRW5jb2RlcikgOiAwIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5oYXJkd2FyZUVuY29kZXIgIT09IHVuZGVmaW5lZCAmJiAob2JqLmhhcmR3YXJlRW5jb2RlciA9IGNsaWVudENvbmZpZ1NldHRpbmdUb0pTT04obWVzc2FnZS5oYXJkd2FyZUVuY29kZXIpKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVmlkZW9Db25maWd1cmF0aW9uKCk7XG4gICAgICAgIG1lc3NhZ2UuaGFyZHdhcmVFbmNvZGVyID0gKF9hID0gb2JqZWN0LmhhcmR3YXJlRW5jb2RlcikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlRGlzYWJsZWRDb2RlY3MoKSB7XG4gICAgcmV0dXJuIHsgY29kZWNzOiBbXSwgcHVibGlzaDogW10gfTtcbn1cbmV4cG9ydHMuRGlzYWJsZWRDb2RlY3MgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5jb2RlY3MpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuQ29kZWMuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UucHVibGlzaCkge1xuICAgICAgICAgICAgZXhwb3J0cy5Db2RlYy5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VEaXNhYmxlZENvZGVjcygpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY29kZWNzLnB1c2goZXhwb3J0cy5Db2RlYy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnB1Ymxpc2gucHVzaChleHBvcnRzLkNvZGVjLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb2RlY3M6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmNvZGVjcykgPyBvYmplY3QuY29kZWNzLm1hcCgoZSkgPT4gZXhwb3J0cy5Db2RlYy5mcm9tSlNPTihlKSkgOiBbXSxcbiAgICAgICAgICAgIHB1Ymxpc2g6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LnB1Ymxpc2gpID8gb2JqZWN0LnB1Ymxpc2gubWFwKChlKSA9PiBleHBvcnRzLkNvZGVjLmZyb21KU09OKGUpKSA6IFtdLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIGlmIChtZXNzYWdlLmNvZGVjcykge1xuICAgICAgICAgICAgb2JqLmNvZGVjcyA9IG1lc3NhZ2UuY29kZWNzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuQ29kZWMudG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5jb2RlY3MgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wdWJsaXNoKSB7XG4gICAgICAgICAgICBvYmoucHVibGlzaCA9IG1lc3NhZ2UucHVibGlzaC5tYXAoKGUpID0+IGUgPyBleHBvcnRzLkNvZGVjLnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmoucHVibGlzaCA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VEaXNhYmxlZENvZGVjcygpO1xuICAgICAgICBtZXNzYWdlLmNvZGVjcyA9ICgoX2EgPSBvYmplY3QuY29kZWNzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWFwKChlKSA9PiBleHBvcnRzLkNvZGVjLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2UucHVibGlzaCA9ICgoX2IgPSBvYmplY3QucHVibGlzaCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLm1hcCgoZSkgPT4gZXhwb3J0cy5Db2RlYy5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VSVFBEcmlmdCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdGFydFRpbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgZW5kVGltZTogdW5kZWZpbmVkLFxuICAgICAgICBkdXJhdGlvbjogMCxcbiAgICAgICAgc3RhcnRUaW1lc3RhbXA6IDAsXG4gICAgICAgIGVuZFRpbWVzdGFtcDogMCxcbiAgICAgICAgcnRwQ2xvY2tUaWNrczogMCxcbiAgICAgICAgZHJpZnRTYW1wbGVzOiAwLFxuICAgICAgICBkcmlmdE1zOiAwLFxuICAgICAgICBjbG9ja1JhdGU6IDAsXG4gICAgfTtcbn1cbmV4cG9ydHMuUlRQRHJpZnQgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5zdGFydFRpbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGltZXN0YW1wXzEuVGltZXN0YW1wLmVuY29kZSh0b1RpbWVzdGFtcChtZXNzYWdlLnN0YXJ0VGltZSksIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZW5kVGltZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aW1lc3RhbXBfMS5UaW1lc3RhbXAuZW5jb2RlKHRvVGltZXN0YW1wKG1lc3NhZ2UuZW5kVGltZSksIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZHVyYXRpb24gIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjUpLmRvdWJsZShtZXNzYWdlLmR1cmF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zdGFydFRpbWVzdGFtcCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigzMikudWludDY0KG1lc3NhZ2Uuc3RhcnRUaW1lc3RhbXApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmVuZFRpbWVzdGFtcCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0MCkudWludDY0KG1lc3NhZ2UuZW5kVGltZXN0YW1wKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5ydHBDbG9ja1RpY2tzICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQ4KS51aW50NjQobWVzc2FnZS5ydHBDbG9ja1RpY2tzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5kcmlmdFNhbXBsZXMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNTYpLmludDY0KG1lc3NhZ2UuZHJpZnRTYW1wbGVzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5kcmlmdE1zICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDY1KS5kb3VibGUobWVzc2FnZS5kcmlmdE1zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5jbG9ja1JhdGUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNzMpLmRvdWJsZShtZXNzYWdlLmNsb2NrUmF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUlRQRHJpZnQoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXJ0VGltZSA9IGZyb21UaW1lc3RhbXAodGltZXN0YW1wXzEuVGltZXN0YW1wLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kVGltZSA9IGZyb21UaW1lc3RhbXAodGltZXN0YW1wXzEuVGltZXN0YW1wLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZHVyYXRpb24gPSByZWFkZXIuZG91YmxlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdGFydFRpbWVzdGFtcCA9IGxvbmdUb051bWJlcihyZWFkZXIudWludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kVGltZXN0YW1wID0gbG9uZ1RvTnVtYmVyKHJlYWRlci51aW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ydHBDbG9ja1RpY2tzID0gbG9uZ1RvTnVtYmVyKHJlYWRlci51aW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kcmlmdFNhbXBsZXMgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZHJpZnRNcyA9IHJlYWRlci5kb3VibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNsb2NrUmF0ZSA9IHJlYWRlci5kb3VibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhcnRUaW1lOiBpc1NldChvYmplY3Quc3RhcnRUaW1lKSA/IGZyb21Kc29uVGltZXN0YW1wKG9iamVjdC5zdGFydFRpbWUpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZW5kVGltZTogaXNTZXQob2JqZWN0LmVuZFRpbWUpID8gZnJvbUpzb25UaW1lc3RhbXAob2JqZWN0LmVuZFRpbWUpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZHVyYXRpb246IGlzU2V0KG9iamVjdC5kdXJhdGlvbikgPyBOdW1iZXIob2JqZWN0LmR1cmF0aW9uKSA6IDAsXG4gICAgICAgICAgICBzdGFydFRpbWVzdGFtcDogaXNTZXQob2JqZWN0LnN0YXJ0VGltZXN0YW1wKSA/IE51bWJlcihvYmplY3Quc3RhcnRUaW1lc3RhbXApIDogMCxcbiAgICAgICAgICAgIGVuZFRpbWVzdGFtcDogaXNTZXQob2JqZWN0LmVuZFRpbWVzdGFtcCkgPyBOdW1iZXIob2JqZWN0LmVuZFRpbWVzdGFtcCkgOiAwLFxuICAgICAgICAgICAgcnRwQ2xvY2tUaWNrczogaXNTZXQob2JqZWN0LnJ0cENsb2NrVGlja3MpID8gTnVtYmVyKG9iamVjdC5ydHBDbG9ja1RpY2tzKSA6IDAsXG4gICAgICAgICAgICBkcmlmdFNhbXBsZXM6IGlzU2V0KG9iamVjdC5kcmlmdFNhbXBsZXMpID8gTnVtYmVyKG9iamVjdC5kcmlmdFNhbXBsZXMpIDogMCxcbiAgICAgICAgICAgIGRyaWZ0TXM6IGlzU2V0KG9iamVjdC5kcmlmdE1zKSA/IE51bWJlcihvYmplY3QuZHJpZnRNcykgOiAwLFxuICAgICAgICAgICAgY2xvY2tSYXRlOiBpc1NldChvYmplY3QuY2xvY2tSYXRlKSA/IE51bWJlcihvYmplY3QuY2xvY2tSYXRlKSA6IDAsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5zdGFydFRpbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnN0YXJ0VGltZSA9IG1lc3NhZ2Uuc3RhcnRUaW1lLnRvSVNPU3RyaW5nKCkpO1xuICAgICAgICBtZXNzYWdlLmVuZFRpbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmVuZFRpbWUgPSBtZXNzYWdlLmVuZFRpbWUudG9JU09TdHJpbmcoKSk7XG4gICAgICAgIG1lc3NhZ2UuZHVyYXRpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLmR1cmF0aW9uID0gbWVzc2FnZS5kdXJhdGlvbik7XG4gICAgICAgIG1lc3NhZ2Uuc3RhcnRUaW1lc3RhbXAgIT09IHVuZGVmaW5lZCAmJiAob2JqLnN0YXJ0VGltZXN0YW1wID0gTWF0aC5yb3VuZChtZXNzYWdlLnN0YXJ0VGltZXN0YW1wKSk7XG4gICAgICAgIG1lc3NhZ2UuZW5kVGltZXN0YW1wICE9PSB1bmRlZmluZWQgJiYgKG9iai5lbmRUaW1lc3RhbXAgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuZW5kVGltZXN0YW1wKSk7XG4gICAgICAgIG1lc3NhZ2UucnRwQ2xvY2tUaWNrcyAhPT0gdW5kZWZpbmVkICYmIChvYmoucnRwQ2xvY2tUaWNrcyA9IE1hdGgucm91bmQobWVzc2FnZS5ydHBDbG9ja1RpY2tzKSk7XG4gICAgICAgIG1lc3NhZ2UuZHJpZnRTYW1wbGVzICE9PSB1bmRlZmluZWQgJiYgKG9iai5kcmlmdFNhbXBsZXMgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuZHJpZnRTYW1wbGVzKSk7XG4gICAgICAgIG1lc3NhZ2UuZHJpZnRNcyAhPT0gdW5kZWZpbmVkICYmIChvYmouZHJpZnRNcyA9IG1lc3NhZ2UuZHJpZnRNcyk7XG4gICAgICAgIG1lc3NhZ2UuY2xvY2tSYXRlICE9PSB1bmRlZmluZWQgJiYgKG9iai5jbG9ja1JhdGUgPSBtZXNzYWdlLmNsb2NrUmF0ZSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2o7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUlRQRHJpZnQoKTtcbiAgICAgICAgbWVzc2FnZS5zdGFydFRpbWUgPSAoX2EgPSBvYmplY3Quc3RhcnRUaW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuZW5kVGltZSA9IChfYiA9IG9iamVjdC5lbmRUaW1lKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuZHVyYXRpb24gPSAoX2MgPSBvYmplY3QuZHVyYXRpb24pICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IDA7XG4gICAgICAgIG1lc3NhZ2Uuc3RhcnRUaW1lc3RhbXAgPSAoX2QgPSBvYmplY3Quc3RhcnRUaW1lc3RhbXApICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IDA7XG4gICAgICAgIG1lc3NhZ2UuZW5kVGltZXN0YW1wID0gKF9lID0gb2JqZWN0LmVuZFRpbWVzdGFtcCkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogMDtcbiAgICAgICAgbWVzc2FnZS5ydHBDbG9ja1RpY2tzID0gKF9mID0gb2JqZWN0LnJ0cENsb2NrVGlja3MpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IDA7XG4gICAgICAgIG1lc3NhZ2UuZHJpZnRTYW1wbGVzID0gKF9nID0gb2JqZWN0LmRyaWZ0U2FtcGxlcykgIT09IG51bGwgJiYgX2cgIT09IHZvaWQgMCA/IF9nIDogMDtcbiAgICAgICAgbWVzc2FnZS5kcmlmdE1zID0gKF9oID0gb2JqZWN0LmRyaWZ0TXMpICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IDA7XG4gICAgICAgIG1lc3NhZ2UuY2xvY2tSYXRlID0gKF9qID0gb2JqZWN0LmNsb2NrUmF0ZSkgIT09IG51bGwgJiYgX2ogIT09IHZvaWQgMCA/IF9qIDogMDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlUlRQU3RhdHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3RhcnRUaW1lOiB1bmRlZmluZWQsXG4gICAgICAgIGVuZFRpbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgIHBhY2tldHM6IDAsXG4gICAgICAgIHBhY2tldFJhdGU6IDAsXG4gICAgICAgIGJ5dGVzOiAwLFxuICAgICAgICBoZWFkZXJCeXRlczogMCxcbiAgICAgICAgYml0cmF0ZTogMCxcbiAgICAgICAgcGFja2V0c0xvc3Q6IDAsXG4gICAgICAgIHBhY2tldExvc3NSYXRlOiAwLFxuICAgICAgICBwYWNrZXRMb3NzUGVyY2VudGFnZTogMCxcbiAgICAgICAgcGFja2V0c0R1cGxpY2F0ZTogMCxcbiAgICAgICAgcGFja2V0RHVwbGljYXRlUmF0ZTogMCxcbiAgICAgICAgYnl0ZXNEdXBsaWNhdGU6IDAsXG4gICAgICAgIGhlYWRlckJ5dGVzRHVwbGljYXRlOiAwLFxuICAgICAgICBiaXRyYXRlRHVwbGljYXRlOiAwLFxuICAgICAgICBwYWNrZXRzUGFkZGluZzogMCxcbiAgICAgICAgcGFja2V0UGFkZGluZ1JhdGU6IDAsXG4gICAgICAgIGJ5dGVzUGFkZGluZzogMCxcbiAgICAgICAgaGVhZGVyQnl0ZXNQYWRkaW5nOiAwLFxuICAgICAgICBiaXRyYXRlUGFkZGluZzogMCxcbiAgICAgICAgcGFja2V0c091dE9mT3JkZXI6IDAsXG4gICAgICAgIGZyYW1lczogMCxcbiAgICAgICAgZnJhbWVSYXRlOiAwLFxuICAgICAgICBqaXR0ZXJDdXJyZW50OiAwLFxuICAgICAgICBqaXR0ZXJNYXg6IDAsXG4gICAgICAgIGdhcEhpc3RvZ3JhbToge30sXG4gICAgICAgIG5hY2tzOiAwLFxuICAgICAgICBuYWNrQWNrczogMCxcbiAgICAgICAgbmFja01pc3NlczogMCxcbiAgICAgICAgbmFja1JlcGVhdGVkOiAwLFxuICAgICAgICBwbGlzOiAwLFxuICAgICAgICBsYXN0UGxpOiB1bmRlZmluZWQsXG4gICAgICAgIGZpcnM6IDAsXG4gICAgICAgIGxhc3RGaXI6IHVuZGVmaW5lZCxcbiAgICAgICAgcnR0Q3VycmVudDogMCxcbiAgICAgICAgcnR0TWF4OiAwLFxuICAgICAgICBrZXlGcmFtZXM6IDAsXG4gICAgICAgIGxhc3RLZXlGcmFtZTogdW5kZWZpbmVkLFxuICAgICAgICBsYXllckxvY2tQbGlzOiAwLFxuICAgICAgICBsYXN0TGF5ZXJMb2NrUGxpOiB1bmRlZmluZWQsXG4gICAgICAgIHBhY2tldERyaWZ0OiB1bmRlZmluZWQsXG4gICAgICAgIHJlcG9ydERyaWZ0OiB1bmRlZmluZWQsXG4gICAgfTtcbn1cbmV4cG9ydHMuUlRQU3RhdHMgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5zdGFydFRpbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGltZXN0YW1wXzEuVGltZXN0YW1wLmVuY29kZSh0b1RpbWVzdGFtcChtZXNzYWdlLnN0YXJ0VGltZSksIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZW5kVGltZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aW1lc3RhbXBfMS5UaW1lc3RhbXAuZW5jb2RlKHRvVGltZXN0YW1wKG1lc3NhZ2UuZW5kVGltZSksIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZHVyYXRpb24gIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjUpLmRvdWJsZShtZXNzYWdlLmR1cmF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wYWNrZXRzICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDMyKS51aW50MzIobWVzc2FnZS5wYWNrZXRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wYWNrZXRSYXRlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQxKS5kb3VibGUobWVzc2FnZS5wYWNrZXRSYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5ieXRlcyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0OCkudWludDY0KG1lc3NhZ2UuYnl0ZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmhlYWRlckJ5dGVzICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDMxMikudWludDY0KG1lc3NhZ2UuaGVhZGVyQnl0ZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmJpdHJhdGUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNTcpLmRvdWJsZShtZXNzYWdlLmJpdHJhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBhY2tldHNMb3N0ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDY0KS51aW50MzIobWVzc2FnZS5wYWNrZXRzTG9zdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucGFja2V0TG9zc1JhdGUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNzMpLmRvdWJsZShtZXNzYWdlLnBhY2tldExvc3NSYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wYWNrZXRMb3NzUGVyY2VudGFnZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4NSkuZmxvYXQobWVzc2FnZS5wYWNrZXRMb3NzUGVyY2VudGFnZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucGFja2V0c0R1cGxpY2F0ZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4OCkudWludDMyKG1lc3NhZ2UucGFja2V0c0R1cGxpY2F0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucGFja2V0RHVwbGljYXRlUmF0ZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig5NykuZG91YmxlKG1lc3NhZ2UucGFja2V0RHVwbGljYXRlUmF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYnl0ZXNEdXBsaWNhdGUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTA0KS51aW50NjQobWVzc2FnZS5ieXRlc0R1cGxpY2F0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaGVhZGVyQnl0ZXNEdXBsaWNhdGUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzIwKS51aW50NjQobWVzc2FnZS5oZWFkZXJCeXRlc0R1cGxpY2F0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYml0cmF0ZUR1cGxpY2F0ZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMTMpLmRvdWJsZShtZXNzYWdlLmJpdHJhdGVEdXBsaWNhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBhY2tldHNQYWRkaW5nICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEyMCkudWludDMyKG1lc3NhZ2UucGFja2V0c1BhZGRpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBhY2tldFBhZGRpbmdSYXRlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEyOSkuZG91YmxlKG1lc3NhZ2UucGFja2V0UGFkZGluZ1JhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmJ5dGVzUGFkZGluZyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMzYpLnVpbnQ2NChtZXNzYWdlLmJ5dGVzUGFkZGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaGVhZGVyQnl0ZXNQYWRkaW5nICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDMyOCkudWludDY0KG1lc3NhZ2UuaGVhZGVyQnl0ZXNQYWRkaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5iaXRyYXRlUGFkZGluZyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNDUpLmRvdWJsZShtZXNzYWdlLmJpdHJhdGVQYWRkaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wYWNrZXRzT3V0T2ZPcmRlciAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNTIpLnVpbnQzMihtZXNzYWdlLnBhY2tldHNPdXRPZk9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5mcmFtZXMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTYwKS51aW50MzIobWVzc2FnZS5mcmFtZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZyYW1lUmF0ZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNjkpLmRvdWJsZShtZXNzYWdlLmZyYW1lUmF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuaml0dGVyQ3VycmVudCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNzcpLmRvdWJsZShtZXNzYWdlLmppdHRlckN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmppdHRlck1heCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxODUpLmRvdWJsZShtZXNzYWdlLmppdHRlck1heCk7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmVudHJpZXMobWVzc2FnZS5nYXBIaXN0b2dyYW0pLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICAgICAgZXhwb3J0cy5SVFBTdGF0c19HYXBIaXN0b2dyYW1FbnRyeS5lbmNvZGUoeyBrZXk6IGtleSwgdmFsdWUgfSwgd3JpdGVyLnVpbnQzMigxOTQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobWVzc2FnZS5uYWNrcyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyMDApLnVpbnQzMihtZXNzYWdlLm5hY2tzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5uYWNrQWNrcyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyOTYpLnVpbnQzMihtZXNzYWdlLm5hY2tBY2tzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5uYWNrTWlzc2VzICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDIwOCkudWludDMyKG1lc3NhZ2UubmFja01pc3Nlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubmFja1JlcGVhdGVkICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDMwNCkudWludDMyKG1lc3NhZ2UubmFja1JlcGVhdGVkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wbGlzICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDIxNikudWludDMyKG1lc3NhZ2UucGxpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubGFzdFBsaSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aW1lc3RhbXBfMS5UaW1lc3RhbXAuZW5jb2RlKHRvVGltZXN0YW1wKG1lc3NhZ2UubGFzdFBsaSksIHdyaXRlci51aW50MzIoMjI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZpcnMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjMyKS51aW50MzIobWVzc2FnZS5maXJzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5sYXN0RmlyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRpbWVzdGFtcF8xLlRpbWVzdGFtcC5lbmNvZGUodG9UaW1lc3RhbXAobWVzc2FnZS5sYXN0RmlyKSwgd3JpdGVyLnVpbnQzMigyNDIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucnR0Q3VycmVudCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNDgpLnVpbnQzMihtZXNzYWdlLnJ0dEN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJ0dE1heCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNTYpLnVpbnQzMihtZXNzYWdlLnJ0dE1heCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uua2V5RnJhbWVzICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI2NCkudWludDMyKG1lc3NhZ2Uua2V5RnJhbWVzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5sYXN0S2V5RnJhbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGltZXN0YW1wXzEuVGltZXN0YW1wLmVuY29kZSh0b1RpbWVzdGFtcChtZXNzYWdlLmxhc3RLZXlGcmFtZSksIHdyaXRlci51aW50MzIoMjc0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmxheWVyTG9ja1BsaXMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjgwKS51aW50MzIobWVzc2FnZS5sYXllckxvY2tQbGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5sYXN0TGF5ZXJMb2NrUGxpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRpbWVzdGFtcF8xLlRpbWVzdGFtcC5lbmNvZGUodG9UaW1lc3RhbXAobWVzc2FnZS5sYXN0TGF5ZXJMb2NrUGxpKSwgd3JpdGVyLnVpbnQzMigyOTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucGFja2V0RHJpZnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5SVFBEcmlmdC5lbmNvZGUobWVzc2FnZS5wYWNrZXREcmlmdCwgd3JpdGVyLnVpbnQzMigzNTQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucmVwb3J0RHJpZnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5SVFBEcmlmdC5lbmNvZGUobWVzc2FnZS5yZXBvcnREcmlmdCwgd3JpdGVyLnVpbnQzMigzNjIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUlRQU3RhdHMoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXJ0VGltZSA9IGZyb21UaW1lc3RhbXAodGltZXN0YW1wXzEuVGltZXN0YW1wLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kVGltZSA9IGZyb21UaW1lc3RhbXAodGltZXN0YW1wXzEuVGltZXN0YW1wLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZHVyYXRpb24gPSByZWFkZXIuZG91YmxlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYWNrZXRzID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGFja2V0UmF0ZSA9IHJlYWRlci5kb3VibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmJ5dGVzID0gbG9uZ1RvTnVtYmVyKHJlYWRlci51aW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzk6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaGVhZGVyQnl0ZXMgPSBsb25nVG9OdW1iZXIocmVhZGVyLnVpbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmJpdHJhdGUgPSByZWFkZXIuZG91YmxlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYWNrZXRzTG9zdCA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhY2tldExvc3NSYXRlID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhY2tldExvc3NQZXJjZW50YWdlID0gcmVhZGVyLmZsb2F0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGFja2V0c0R1cGxpY2F0ZSA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYWNrZXREdXBsaWNhdGVSYXRlID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmJ5dGVzRHVwbGljYXRlID0gbG9uZ1RvTnVtYmVyKHJlYWRlci51aW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDA6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaGVhZGVyQnl0ZXNEdXBsaWNhdGUgPSBsb25nVG9OdW1iZXIocmVhZGVyLnVpbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5iaXRyYXRlRHVwbGljYXRlID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhY2tldHNQYWRkaW5nID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhY2tldFBhZGRpbmdSYXRlID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmJ5dGVzUGFkZGluZyA9IGxvbmdUb051bWJlcihyZWFkZXIudWludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmhlYWRlckJ5dGVzUGFkZGluZyA9IGxvbmdUb051bWJlcihyZWFkZXIudWludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmJpdHJhdGVQYWRkaW5nID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE5OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhY2tldHNPdXRPZk9yZGVyID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDIwOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZyYW1lcyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5mcmFtZVJhdGUgPSByZWFkZXIuZG91YmxlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuaml0dGVyQ3VycmVudCA9IHJlYWRlci5kb3VibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5qaXR0ZXJNYXggPSByZWFkZXIuZG91YmxlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjQ6XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudHJ5MjQgPSBleHBvcnRzLlJUUFN0YXRzX0dhcEhpc3RvZ3JhbUVudHJ5LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeTI0LnZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ2FwSGlzdG9ncmFtW2VudHJ5MjQua2V5XSA9IGVudHJ5MjQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uYWNrcyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzNzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uYWNrQWNrcyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uYWNrTWlzc2VzID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm5hY2tSZXBlYXRlZCA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wbGlzID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhc3RQbGkgPSBmcm9tVGltZXN0YW1wKHRpbWVzdGFtcF8xLlRpbWVzdGFtcC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5maXJzID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDMwOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhc3RGaXIgPSBmcm9tVGltZXN0YW1wKHRpbWVzdGFtcF8xLlRpbWVzdGFtcC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ydHRDdXJyZW50ID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDMyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJ0dE1heCA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5rZXlGcmFtZXMgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGFzdEtleUZyYW1lID0gZnJvbVRpbWVzdGFtcCh0aW1lc3RhbXBfMS5UaW1lc3RhbXAuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGF5ZXJMb2NrUGxpcyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXN0TGF5ZXJMb2NrUGxpID0gZnJvbVRpbWVzdGFtcCh0aW1lc3RhbXBfMS5UaW1lc3RhbXAuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGFja2V0RHJpZnQgPSBleHBvcnRzLlJUUERyaWZ0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVwb3J0RHJpZnQgPSBleHBvcnRzLlJUUERyaWZ0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXJ0VGltZTogaXNTZXQob2JqZWN0LnN0YXJ0VGltZSkgPyBmcm9tSnNvblRpbWVzdGFtcChvYmplY3Quc3RhcnRUaW1lKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGVuZFRpbWU6IGlzU2V0KG9iamVjdC5lbmRUaW1lKSA/IGZyb21Kc29uVGltZXN0YW1wKG9iamVjdC5lbmRUaW1lKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBpc1NldChvYmplY3QuZHVyYXRpb24pID8gTnVtYmVyKG9iamVjdC5kdXJhdGlvbikgOiAwLFxuICAgICAgICAgICAgcGFja2V0czogaXNTZXQob2JqZWN0LnBhY2tldHMpID8gTnVtYmVyKG9iamVjdC5wYWNrZXRzKSA6IDAsXG4gICAgICAgICAgICBwYWNrZXRSYXRlOiBpc1NldChvYmplY3QucGFja2V0UmF0ZSkgPyBOdW1iZXIob2JqZWN0LnBhY2tldFJhdGUpIDogMCxcbiAgICAgICAgICAgIGJ5dGVzOiBpc1NldChvYmplY3QuYnl0ZXMpID8gTnVtYmVyKG9iamVjdC5ieXRlcykgOiAwLFxuICAgICAgICAgICAgaGVhZGVyQnl0ZXM6IGlzU2V0KG9iamVjdC5oZWFkZXJCeXRlcykgPyBOdW1iZXIob2JqZWN0LmhlYWRlckJ5dGVzKSA6IDAsXG4gICAgICAgICAgICBiaXRyYXRlOiBpc1NldChvYmplY3QuYml0cmF0ZSkgPyBOdW1iZXIob2JqZWN0LmJpdHJhdGUpIDogMCxcbiAgICAgICAgICAgIHBhY2tldHNMb3N0OiBpc1NldChvYmplY3QucGFja2V0c0xvc3QpID8gTnVtYmVyKG9iamVjdC5wYWNrZXRzTG9zdCkgOiAwLFxuICAgICAgICAgICAgcGFja2V0TG9zc1JhdGU6IGlzU2V0KG9iamVjdC5wYWNrZXRMb3NzUmF0ZSkgPyBOdW1iZXIob2JqZWN0LnBhY2tldExvc3NSYXRlKSA6IDAsXG4gICAgICAgICAgICBwYWNrZXRMb3NzUGVyY2VudGFnZTogaXNTZXQob2JqZWN0LnBhY2tldExvc3NQZXJjZW50YWdlKSA/IE51bWJlcihvYmplY3QucGFja2V0TG9zc1BlcmNlbnRhZ2UpIDogMCxcbiAgICAgICAgICAgIHBhY2tldHNEdXBsaWNhdGU6IGlzU2V0KG9iamVjdC5wYWNrZXRzRHVwbGljYXRlKSA/IE51bWJlcihvYmplY3QucGFja2V0c0R1cGxpY2F0ZSkgOiAwLFxuICAgICAgICAgICAgcGFja2V0RHVwbGljYXRlUmF0ZTogaXNTZXQob2JqZWN0LnBhY2tldER1cGxpY2F0ZVJhdGUpID8gTnVtYmVyKG9iamVjdC5wYWNrZXREdXBsaWNhdGVSYXRlKSA6IDAsXG4gICAgICAgICAgICBieXRlc0R1cGxpY2F0ZTogaXNTZXQob2JqZWN0LmJ5dGVzRHVwbGljYXRlKSA/IE51bWJlcihvYmplY3QuYnl0ZXNEdXBsaWNhdGUpIDogMCxcbiAgICAgICAgICAgIGhlYWRlckJ5dGVzRHVwbGljYXRlOiBpc1NldChvYmplY3QuaGVhZGVyQnl0ZXNEdXBsaWNhdGUpID8gTnVtYmVyKG9iamVjdC5oZWFkZXJCeXRlc0R1cGxpY2F0ZSkgOiAwLFxuICAgICAgICAgICAgYml0cmF0ZUR1cGxpY2F0ZTogaXNTZXQob2JqZWN0LmJpdHJhdGVEdXBsaWNhdGUpID8gTnVtYmVyKG9iamVjdC5iaXRyYXRlRHVwbGljYXRlKSA6IDAsXG4gICAgICAgICAgICBwYWNrZXRzUGFkZGluZzogaXNTZXQob2JqZWN0LnBhY2tldHNQYWRkaW5nKSA/IE51bWJlcihvYmplY3QucGFja2V0c1BhZGRpbmcpIDogMCxcbiAgICAgICAgICAgIHBhY2tldFBhZGRpbmdSYXRlOiBpc1NldChvYmplY3QucGFja2V0UGFkZGluZ1JhdGUpID8gTnVtYmVyKG9iamVjdC5wYWNrZXRQYWRkaW5nUmF0ZSkgOiAwLFxuICAgICAgICAgICAgYnl0ZXNQYWRkaW5nOiBpc1NldChvYmplY3QuYnl0ZXNQYWRkaW5nKSA/IE51bWJlcihvYmplY3QuYnl0ZXNQYWRkaW5nKSA6IDAsXG4gICAgICAgICAgICBoZWFkZXJCeXRlc1BhZGRpbmc6IGlzU2V0KG9iamVjdC5oZWFkZXJCeXRlc1BhZGRpbmcpID8gTnVtYmVyKG9iamVjdC5oZWFkZXJCeXRlc1BhZGRpbmcpIDogMCxcbiAgICAgICAgICAgIGJpdHJhdGVQYWRkaW5nOiBpc1NldChvYmplY3QuYml0cmF0ZVBhZGRpbmcpID8gTnVtYmVyKG9iamVjdC5iaXRyYXRlUGFkZGluZykgOiAwLFxuICAgICAgICAgICAgcGFja2V0c091dE9mT3JkZXI6IGlzU2V0KG9iamVjdC5wYWNrZXRzT3V0T2ZPcmRlcikgPyBOdW1iZXIob2JqZWN0LnBhY2tldHNPdXRPZk9yZGVyKSA6IDAsXG4gICAgICAgICAgICBmcmFtZXM6IGlzU2V0KG9iamVjdC5mcmFtZXMpID8gTnVtYmVyKG9iamVjdC5mcmFtZXMpIDogMCxcbiAgICAgICAgICAgIGZyYW1lUmF0ZTogaXNTZXQob2JqZWN0LmZyYW1lUmF0ZSkgPyBOdW1iZXIob2JqZWN0LmZyYW1lUmF0ZSkgOiAwLFxuICAgICAgICAgICAgaml0dGVyQ3VycmVudDogaXNTZXQob2JqZWN0LmppdHRlckN1cnJlbnQpID8gTnVtYmVyKG9iamVjdC5qaXR0ZXJDdXJyZW50KSA6IDAsXG4gICAgICAgICAgICBqaXR0ZXJNYXg6IGlzU2V0KG9iamVjdC5qaXR0ZXJNYXgpID8gTnVtYmVyKG9iamVjdC5qaXR0ZXJNYXgpIDogMCxcbiAgICAgICAgICAgIGdhcEhpc3RvZ3JhbTogaXNPYmplY3Qob2JqZWN0LmdhcEhpc3RvZ3JhbSlcbiAgICAgICAgICAgICAgICA/IE9iamVjdC5lbnRyaWVzKG9iamVjdC5nYXBIaXN0b2dyYW0pLnJlZHVjZSgoYWNjLCBba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYWNjW051bWJlcihrZXkpXSA9IE51bWJlcih2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICAgICAgfSwge30pXG4gICAgICAgICAgICAgICAgOiB7fSxcbiAgICAgICAgICAgIG5hY2tzOiBpc1NldChvYmplY3QubmFja3MpID8gTnVtYmVyKG9iamVjdC5uYWNrcykgOiAwLFxuICAgICAgICAgICAgbmFja0Fja3M6IGlzU2V0KG9iamVjdC5uYWNrQWNrcykgPyBOdW1iZXIob2JqZWN0Lm5hY2tBY2tzKSA6IDAsXG4gICAgICAgICAgICBuYWNrTWlzc2VzOiBpc1NldChvYmplY3QubmFja01pc3NlcykgPyBOdW1iZXIob2JqZWN0Lm5hY2tNaXNzZXMpIDogMCxcbiAgICAgICAgICAgIG5hY2tSZXBlYXRlZDogaXNTZXQob2JqZWN0Lm5hY2tSZXBlYXRlZCkgPyBOdW1iZXIob2JqZWN0Lm5hY2tSZXBlYXRlZCkgOiAwLFxuICAgICAgICAgICAgcGxpczogaXNTZXQob2JqZWN0LnBsaXMpID8gTnVtYmVyKG9iamVjdC5wbGlzKSA6IDAsXG4gICAgICAgICAgICBsYXN0UGxpOiBpc1NldChvYmplY3QubGFzdFBsaSkgPyBmcm9tSnNvblRpbWVzdGFtcChvYmplY3QubGFzdFBsaSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBmaXJzOiBpc1NldChvYmplY3QuZmlycykgPyBOdW1iZXIob2JqZWN0LmZpcnMpIDogMCxcbiAgICAgICAgICAgIGxhc3RGaXI6IGlzU2V0KG9iamVjdC5sYXN0RmlyKSA/IGZyb21Kc29uVGltZXN0YW1wKG9iamVjdC5sYXN0RmlyKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJ0dEN1cnJlbnQ6IGlzU2V0KG9iamVjdC5ydHRDdXJyZW50KSA/IE51bWJlcihvYmplY3QucnR0Q3VycmVudCkgOiAwLFxuICAgICAgICAgICAgcnR0TWF4OiBpc1NldChvYmplY3QucnR0TWF4KSA/IE51bWJlcihvYmplY3QucnR0TWF4KSA6IDAsXG4gICAgICAgICAgICBrZXlGcmFtZXM6IGlzU2V0KG9iamVjdC5rZXlGcmFtZXMpID8gTnVtYmVyKG9iamVjdC5rZXlGcmFtZXMpIDogMCxcbiAgICAgICAgICAgIGxhc3RLZXlGcmFtZTogaXNTZXQob2JqZWN0Lmxhc3RLZXlGcmFtZSkgPyBmcm9tSnNvblRpbWVzdGFtcChvYmplY3QubGFzdEtleUZyYW1lKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGxheWVyTG9ja1BsaXM6IGlzU2V0KG9iamVjdC5sYXllckxvY2tQbGlzKSA/IE51bWJlcihvYmplY3QubGF5ZXJMb2NrUGxpcykgOiAwLFxuICAgICAgICAgICAgbGFzdExheWVyTG9ja1BsaTogaXNTZXQob2JqZWN0Lmxhc3RMYXllckxvY2tQbGkpID8gZnJvbUpzb25UaW1lc3RhbXAob2JqZWN0Lmxhc3RMYXllckxvY2tQbGkpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcGFja2V0RHJpZnQ6IGlzU2V0KG9iamVjdC5wYWNrZXREcmlmdCkgPyBleHBvcnRzLlJUUERyaWZ0LmZyb21KU09OKG9iamVjdC5wYWNrZXREcmlmdCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICByZXBvcnREcmlmdDogaXNTZXQob2JqZWN0LnJlcG9ydERyaWZ0KSA/IGV4cG9ydHMuUlRQRHJpZnQuZnJvbUpTT04ob2JqZWN0LnJlcG9ydERyaWZ0KSA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnN0YXJ0VGltZSAhPT0gdW5kZWZpbmVkICYmIChvYmouc3RhcnRUaW1lID0gbWVzc2FnZS5zdGFydFRpbWUudG9JU09TdHJpbmcoKSk7XG4gICAgICAgIG1lc3NhZ2UuZW5kVGltZSAhPT0gdW5kZWZpbmVkICYmIChvYmouZW5kVGltZSA9IG1lc3NhZ2UuZW5kVGltZS50b0lTT1N0cmluZygpKTtcbiAgICAgICAgbWVzc2FnZS5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkICYmIChvYmouZHVyYXRpb24gPSBtZXNzYWdlLmR1cmF0aW9uKTtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXRzICE9PSB1bmRlZmluZWQgJiYgKG9iai5wYWNrZXRzID0gTWF0aC5yb3VuZChtZXNzYWdlLnBhY2tldHMpKTtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXRSYXRlICE9PSB1bmRlZmluZWQgJiYgKG9iai5wYWNrZXRSYXRlID0gbWVzc2FnZS5wYWNrZXRSYXRlKTtcbiAgICAgICAgbWVzc2FnZS5ieXRlcyAhPT0gdW5kZWZpbmVkICYmIChvYmouYnl0ZXMgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuYnl0ZXMpKTtcbiAgICAgICAgbWVzc2FnZS5oZWFkZXJCeXRlcyAhPT0gdW5kZWZpbmVkICYmIChvYmouaGVhZGVyQnl0ZXMgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuaGVhZGVyQnl0ZXMpKTtcbiAgICAgICAgbWVzc2FnZS5iaXRyYXRlICE9PSB1bmRlZmluZWQgJiYgKG9iai5iaXRyYXRlID0gbWVzc2FnZS5iaXRyYXRlKTtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXRzTG9zdCAhPT0gdW5kZWZpbmVkICYmIChvYmoucGFja2V0c0xvc3QgPSBNYXRoLnJvdW5kKG1lc3NhZ2UucGFja2V0c0xvc3QpKTtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXRMb3NzUmF0ZSAhPT0gdW5kZWZpbmVkICYmIChvYmoucGFja2V0TG9zc1JhdGUgPSBtZXNzYWdlLnBhY2tldExvc3NSYXRlKTtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXRMb3NzUGVyY2VudGFnZSAhPT0gdW5kZWZpbmVkICYmIChvYmoucGFja2V0TG9zc1BlcmNlbnRhZ2UgPSBtZXNzYWdlLnBhY2tldExvc3NQZXJjZW50YWdlKTtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXRzRHVwbGljYXRlICE9PSB1bmRlZmluZWQgJiYgKG9iai5wYWNrZXRzRHVwbGljYXRlID0gTWF0aC5yb3VuZChtZXNzYWdlLnBhY2tldHNEdXBsaWNhdGUpKTtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXREdXBsaWNhdGVSYXRlICE9PSB1bmRlZmluZWQgJiYgKG9iai5wYWNrZXREdXBsaWNhdGVSYXRlID0gbWVzc2FnZS5wYWNrZXREdXBsaWNhdGVSYXRlKTtcbiAgICAgICAgbWVzc2FnZS5ieXRlc0R1cGxpY2F0ZSAhPT0gdW5kZWZpbmVkICYmIChvYmouYnl0ZXNEdXBsaWNhdGUgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuYnl0ZXNEdXBsaWNhdGUpKTtcbiAgICAgICAgbWVzc2FnZS5oZWFkZXJCeXRlc0R1cGxpY2F0ZSAhPT0gdW5kZWZpbmVkICYmIChvYmouaGVhZGVyQnl0ZXNEdXBsaWNhdGUgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuaGVhZGVyQnl0ZXNEdXBsaWNhdGUpKTtcbiAgICAgICAgbWVzc2FnZS5iaXRyYXRlRHVwbGljYXRlICE9PSB1bmRlZmluZWQgJiYgKG9iai5iaXRyYXRlRHVwbGljYXRlID0gbWVzc2FnZS5iaXRyYXRlRHVwbGljYXRlKTtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXRzUGFkZGluZyAhPT0gdW5kZWZpbmVkICYmIChvYmoucGFja2V0c1BhZGRpbmcgPSBNYXRoLnJvdW5kKG1lc3NhZ2UucGFja2V0c1BhZGRpbmcpKTtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXRQYWRkaW5nUmF0ZSAhPT0gdW5kZWZpbmVkICYmIChvYmoucGFja2V0UGFkZGluZ1JhdGUgPSBtZXNzYWdlLnBhY2tldFBhZGRpbmdSYXRlKTtcbiAgICAgICAgbWVzc2FnZS5ieXRlc1BhZGRpbmcgIT09IHVuZGVmaW5lZCAmJiAob2JqLmJ5dGVzUGFkZGluZyA9IE1hdGgucm91bmQobWVzc2FnZS5ieXRlc1BhZGRpbmcpKTtcbiAgICAgICAgbWVzc2FnZS5oZWFkZXJCeXRlc1BhZGRpbmcgIT09IHVuZGVmaW5lZCAmJiAob2JqLmhlYWRlckJ5dGVzUGFkZGluZyA9IE1hdGgucm91bmQobWVzc2FnZS5oZWFkZXJCeXRlc1BhZGRpbmcpKTtcbiAgICAgICAgbWVzc2FnZS5iaXRyYXRlUGFkZGluZyAhPT0gdW5kZWZpbmVkICYmIChvYmouYml0cmF0ZVBhZGRpbmcgPSBtZXNzYWdlLmJpdHJhdGVQYWRkaW5nKTtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXRzT3V0T2ZPcmRlciAhPT0gdW5kZWZpbmVkICYmIChvYmoucGFja2V0c091dE9mT3JkZXIgPSBNYXRoLnJvdW5kKG1lc3NhZ2UucGFja2V0c091dE9mT3JkZXIpKTtcbiAgICAgICAgbWVzc2FnZS5mcmFtZXMgIT09IHVuZGVmaW5lZCAmJiAob2JqLmZyYW1lcyA9IE1hdGgucm91bmQobWVzc2FnZS5mcmFtZXMpKTtcbiAgICAgICAgbWVzc2FnZS5mcmFtZVJhdGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmZyYW1lUmF0ZSA9IG1lc3NhZ2UuZnJhbWVSYXRlKTtcbiAgICAgICAgbWVzc2FnZS5qaXR0ZXJDdXJyZW50ICE9PSB1bmRlZmluZWQgJiYgKG9iai5qaXR0ZXJDdXJyZW50ID0gbWVzc2FnZS5qaXR0ZXJDdXJyZW50KTtcbiAgICAgICAgbWVzc2FnZS5qaXR0ZXJNYXggIT09IHVuZGVmaW5lZCAmJiAob2JqLmppdHRlck1heCA9IG1lc3NhZ2Uuaml0dGVyTWF4KTtcbiAgICAgICAgb2JqLmdhcEhpc3RvZ3JhbSA9IHt9O1xuICAgICAgICBpZiAobWVzc2FnZS5nYXBIaXN0b2dyYW0pIHtcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKG1lc3NhZ2UuZ2FwSGlzdG9ncmFtKS5mb3JFYWNoKChbaywgdl0pID0+IHtcbiAgICAgICAgICAgICAgICBvYmouZ2FwSGlzdG9ncmFtW2tdID0gTWF0aC5yb3VuZCh2KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIG1lc3NhZ2UubmFja3MgIT09IHVuZGVmaW5lZCAmJiAob2JqLm5hY2tzID0gTWF0aC5yb3VuZChtZXNzYWdlLm5hY2tzKSk7XG4gICAgICAgIG1lc3NhZ2UubmFja0Fja3MgIT09IHVuZGVmaW5lZCAmJiAob2JqLm5hY2tBY2tzID0gTWF0aC5yb3VuZChtZXNzYWdlLm5hY2tBY2tzKSk7XG4gICAgICAgIG1lc3NhZ2UubmFja01pc3NlcyAhPT0gdW5kZWZpbmVkICYmIChvYmoubmFja01pc3NlcyA9IE1hdGgucm91bmQobWVzc2FnZS5uYWNrTWlzc2VzKSk7XG4gICAgICAgIG1lc3NhZ2UubmFja1JlcGVhdGVkICE9PSB1bmRlZmluZWQgJiYgKG9iai5uYWNrUmVwZWF0ZWQgPSBNYXRoLnJvdW5kKG1lc3NhZ2UubmFja1JlcGVhdGVkKSk7XG4gICAgICAgIG1lc3NhZ2UucGxpcyAhPT0gdW5kZWZpbmVkICYmIChvYmoucGxpcyA9IE1hdGgucm91bmQobWVzc2FnZS5wbGlzKSk7XG4gICAgICAgIG1lc3NhZ2UubGFzdFBsaSAhPT0gdW5kZWZpbmVkICYmIChvYmoubGFzdFBsaSA9IG1lc3NhZ2UubGFzdFBsaS50b0lTT1N0cmluZygpKTtcbiAgICAgICAgbWVzc2FnZS5maXJzICE9PSB1bmRlZmluZWQgJiYgKG9iai5maXJzID0gTWF0aC5yb3VuZChtZXNzYWdlLmZpcnMpKTtcbiAgICAgICAgbWVzc2FnZS5sYXN0RmlyICE9PSB1bmRlZmluZWQgJiYgKG9iai5sYXN0RmlyID0gbWVzc2FnZS5sYXN0RmlyLnRvSVNPU3RyaW5nKCkpO1xuICAgICAgICBtZXNzYWdlLnJ0dEN1cnJlbnQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnJ0dEN1cnJlbnQgPSBNYXRoLnJvdW5kKG1lc3NhZ2UucnR0Q3VycmVudCkpO1xuICAgICAgICBtZXNzYWdlLnJ0dE1heCAhPT0gdW5kZWZpbmVkICYmIChvYmoucnR0TWF4ID0gTWF0aC5yb3VuZChtZXNzYWdlLnJ0dE1heCkpO1xuICAgICAgICBtZXNzYWdlLmtleUZyYW1lcyAhPT0gdW5kZWZpbmVkICYmIChvYmoua2V5RnJhbWVzID0gTWF0aC5yb3VuZChtZXNzYWdlLmtleUZyYW1lcykpO1xuICAgICAgICBtZXNzYWdlLmxhc3RLZXlGcmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmoubGFzdEtleUZyYW1lID0gbWVzc2FnZS5sYXN0S2V5RnJhbWUudG9JU09TdHJpbmcoKSk7XG4gICAgICAgIG1lc3NhZ2UubGF5ZXJMb2NrUGxpcyAhPT0gdW5kZWZpbmVkICYmIChvYmoubGF5ZXJMb2NrUGxpcyA9IE1hdGgucm91bmQobWVzc2FnZS5sYXllckxvY2tQbGlzKSk7XG4gICAgICAgIG1lc3NhZ2UubGFzdExheWVyTG9ja1BsaSAhPT0gdW5kZWZpbmVkICYmIChvYmoubGFzdExheWVyTG9ja1BsaSA9IG1lc3NhZ2UubGFzdExheWVyTG9ja1BsaS50b0lTT1N0cmluZygpKTtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXREcmlmdCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLnBhY2tldERyaWZ0ID0gbWVzc2FnZS5wYWNrZXREcmlmdCA/IGV4cG9ydHMuUlRQRHJpZnQudG9KU09OKG1lc3NhZ2UucGFja2V0RHJpZnQpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5yZXBvcnREcmlmdCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLnJlcG9ydERyaWZ0ID0gbWVzc2FnZS5yZXBvcnREcmlmdCA/IGV4cG9ydHMuUlRQRHJpZnQudG9KU09OKG1lc3NhZ2UucmVwb3J0RHJpZnQpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaiwgX2ssIF9sLCBfbSwgX28sIF9wLCBfcSwgX3IsIF9zLCBfdCwgX3UsIF92LCBfdywgX3gsIF95LCBfeiwgXzAsIF8xLCBfMiwgXzMsIF80LCBfNSwgXzYsIF83LCBfOCwgXzksIF8xMCwgXzExLCBfMTIsIF8xMywgXzE0LCBfMTUsIF8xNjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSVFBTdGF0cygpO1xuICAgICAgICBtZXNzYWdlLnN0YXJ0VGltZSA9IChfYSA9IG9iamVjdC5zdGFydFRpbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5lbmRUaW1lID0gKF9iID0gb2JqZWN0LmVuZFRpbWUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5kdXJhdGlvbiA9IChfYyA9IG9iamVjdC5kdXJhdGlvbikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMDtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXRzID0gKF9kID0gb2JqZWN0LnBhY2tldHMpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IDA7XG4gICAgICAgIG1lc3NhZ2UucGFja2V0UmF0ZSA9IChfZSA9IG9iamVjdC5wYWNrZXRSYXRlKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiAwO1xuICAgICAgICBtZXNzYWdlLmJ5dGVzID0gKF9mID0gb2JqZWN0LmJ5dGVzKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiAwO1xuICAgICAgICBtZXNzYWdlLmhlYWRlckJ5dGVzID0gKF9nID0gb2JqZWN0LmhlYWRlckJ5dGVzKSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiAwO1xuICAgICAgICBtZXNzYWdlLmJpdHJhdGUgPSAoX2ggPSBvYmplY3QuYml0cmF0ZSkgIT09IG51bGwgJiYgX2ggIT09IHZvaWQgMCA/IF9oIDogMDtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXRzTG9zdCA9IChfaiA9IG9iamVjdC5wYWNrZXRzTG9zdCkgIT09IG51bGwgJiYgX2ogIT09IHZvaWQgMCA/IF9qIDogMDtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXRMb3NzUmF0ZSA9IChfayA9IG9iamVjdC5wYWNrZXRMb3NzUmF0ZSkgIT09IG51bGwgJiYgX2sgIT09IHZvaWQgMCA/IF9rIDogMDtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXRMb3NzUGVyY2VudGFnZSA9IChfbCA9IG9iamVjdC5wYWNrZXRMb3NzUGVyY2VudGFnZSkgIT09IG51bGwgJiYgX2wgIT09IHZvaWQgMCA/IF9sIDogMDtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXRzRHVwbGljYXRlID0gKF9tID0gb2JqZWN0LnBhY2tldHNEdXBsaWNhdGUpICE9PSBudWxsICYmIF9tICE9PSB2b2lkIDAgPyBfbSA6IDA7XG4gICAgICAgIG1lc3NhZ2UucGFja2V0RHVwbGljYXRlUmF0ZSA9IChfbyA9IG9iamVjdC5wYWNrZXREdXBsaWNhdGVSYXRlKSAhPT0gbnVsbCAmJiBfbyAhPT0gdm9pZCAwID8gX28gOiAwO1xuICAgICAgICBtZXNzYWdlLmJ5dGVzRHVwbGljYXRlID0gKF9wID0gb2JqZWN0LmJ5dGVzRHVwbGljYXRlKSAhPT0gbnVsbCAmJiBfcCAhPT0gdm9pZCAwID8gX3AgOiAwO1xuICAgICAgICBtZXNzYWdlLmhlYWRlckJ5dGVzRHVwbGljYXRlID0gKF9xID0gb2JqZWN0LmhlYWRlckJ5dGVzRHVwbGljYXRlKSAhPT0gbnVsbCAmJiBfcSAhPT0gdm9pZCAwID8gX3EgOiAwO1xuICAgICAgICBtZXNzYWdlLmJpdHJhdGVEdXBsaWNhdGUgPSAoX3IgPSBvYmplY3QuYml0cmF0ZUR1cGxpY2F0ZSkgIT09IG51bGwgJiYgX3IgIT09IHZvaWQgMCA/IF9yIDogMDtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXRzUGFkZGluZyA9IChfcyA9IG9iamVjdC5wYWNrZXRzUGFkZGluZykgIT09IG51bGwgJiYgX3MgIT09IHZvaWQgMCA/IF9zIDogMDtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXRQYWRkaW5nUmF0ZSA9IChfdCA9IG9iamVjdC5wYWNrZXRQYWRkaW5nUmF0ZSkgIT09IG51bGwgJiYgX3QgIT09IHZvaWQgMCA/IF90IDogMDtcbiAgICAgICAgbWVzc2FnZS5ieXRlc1BhZGRpbmcgPSAoX3UgPSBvYmplY3QuYnl0ZXNQYWRkaW5nKSAhPT0gbnVsbCAmJiBfdSAhPT0gdm9pZCAwID8gX3UgOiAwO1xuICAgICAgICBtZXNzYWdlLmhlYWRlckJ5dGVzUGFkZGluZyA9IChfdiA9IG9iamVjdC5oZWFkZXJCeXRlc1BhZGRpbmcpICE9PSBudWxsICYmIF92ICE9PSB2b2lkIDAgPyBfdiA6IDA7XG4gICAgICAgIG1lc3NhZ2UuYml0cmF0ZVBhZGRpbmcgPSAoX3cgPSBvYmplY3QuYml0cmF0ZVBhZGRpbmcpICE9PSBudWxsICYmIF93ICE9PSB2b2lkIDAgPyBfdyA6IDA7XG4gICAgICAgIG1lc3NhZ2UucGFja2V0c091dE9mT3JkZXIgPSAoX3ggPSBvYmplY3QucGFja2V0c091dE9mT3JkZXIpICE9PSBudWxsICYmIF94ICE9PSB2b2lkIDAgPyBfeCA6IDA7XG4gICAgICAgIG1lc3NhZ2UuZnJhbWVzID0gKF95ID0gb2JqZWN0LmZyYW1lcykgIT09IG51bGwgJiYgX3kgIT09IHZvaWQgMCA/IF95IDogMDtcbiAgICAgICAgbWVzc2FnZS5mcmFtZVJhdGUgPSAoX3ogPSBvYmplY3QuZnJhbWVSYXRlKSAhPT0gbnVsbCAmJiBfeiAhPT0gdm9pZCAwID8gX3ogOiAwO1xuICAgICAgICBtZXNzYWdlLmppdHRlckN1cnJlbnQgPSAoXzAgPSBvYmplY3Quaml0dGVyQ3VycmVudCkgIT09IG51bGwgJiYgXzAgIT09IHZvaWQgMCA/IF8wIDogMDtcbiAgICAgICAgbWVzc2FnZS5qaXR0ZXJNYXggPSAoXzEgPSBvYmplY3Quaml0dGVyTWF4KSAhPT0gbnVsbCAmJiBfMSAhPT0gdm9pZCAwID8gXzEgOiAwO1xuICAgICAgICBtZXNzYWdlLmdhcEhpc3RvZ3JhbSA9IE9iamVjdC5lbnRyaWVzKChfMiA9IG9iamVjdC5nYXBIaXN0b2dyYW0pICE9PSBudWxsICYmIF8yICE9PSB2b2lkIDAgPyBfMiA6IHt9KS5yZWR1Y2UoKGFjYywgW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGFjY1tOdW1iZXIoa2V5KV0gPSBOdW1iZXIodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30pO1xuICAgICAgICBtZXNzYWdlLm5hY2tzID0gKF8zID0gb2JqZWN0Lm5hY2tzKSAhPT0gbnVsbCAmJiBfMyAhPT0gdm9pZCAwID8gXzMgOiAwO1xuICAgICAgICBtZXNzYWdlLm5hY2tBY2tzID0gKF80ID0gb2JqZWN0Lm5hY2tBY2tzKSAhPT0gbnVsbCAmJiBfNCAhPT0gdm9pZCAwID8gXzQgOiAwO1xuICAgICAgICBtZXNzYWdlLm5hY2tNaXNzZXMgPSAoXzUgPSBvYmplY3QubmFja01pc3NlcykgIT09IG51bGwgJiYgXzUgIT09IHZvaWQgMCA/IF81IDogMDtcbiAgICAgICAgbWVzc2FnZS5uYWNrUmVwZWF0ZWQgPSAoXzYgPSBvYmplY3QubmFja1JlcGVhdGVkKSAhPT0gbnVsbCAmJiBfNiAhPT0gdm9pZCAwID8gXzYgOiAwO1xuICAgICAgICBtZXNzYWdlLnBsaXMgPSAoXzcgPSBvYmplY3QucGxpcykgIT09IG51bGwgJiYgXzcgIT09IHZvaWQgMCA/IF83IDogMDtcbiAgICAgICAgbWVzc2FnZS5sYXN0UGxpID0gKF84ID0gb2JqZWN0Lmxhc3RQbGkpICE9PSBudWxsICYmIF84ICE9PSB2b2lkIDAgPyBfOCA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5maXJzID0gKF85ID0gb2JqZWN0LmZpcnMpICE9PSBudWxsICYmIF85ICE9PSB2b2lkIDAgPyBfOSA6IDA7XG4gICAgICAgIG1lc3NhZ2UubGFzdEZpciA9IChfMTAgPSBvYmplY3QubGFzdEZpcikgIT09IG51bGwgJiYgXzEwICE9PSB2b2lkIDAgPyBfMTAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UucnR0Q3VycmVudCA9IChfMTEgPSBvYmplY3QucnR0Q3VycmVudCkgIT09IG51bGwgJiYgXzExICE9PSB2b2lkIDAgPyBfMTEgOiAwO1xuICAgICAgICBtZXNzYWdlLnJ0dE1heCA9IChfMTIgPSBvYmplY3QucnR0TWF4KSAhPT0gbnVsbCAmJiBfMTIgIT09IHZvaWQgMCA/IF8xMiA6IDA7XG4gICAgICAgIG1lc3NhZ2Uua2V5RnJhbWVzID0gKF8xMyA9IG9iamVjdC5rZXlGcmFtZXMpICE9PSBudWxsICYmIF8xMyAhPT0gdm9pZCAwID8gXzEzIDogMDtcbiAgICAgICAgbWVzc2FnZS5sYXN0S2V5RnJhbWUgPSAoXzE0ID0gb2JqZWN0Lmxhc3RLZXlGcmFtZSkgIT09IG51bGwgJiYgXzE0ICE9PSB2b2lkIDAgPyBfMTQgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UubGF5ZXJMb2NrUGxpcyA9IChfMTUgPSBvYmplY3QubGF5ZXJMb2NrUGxpcykgIT09IG51bGwgJiYgXzE1ICE9PSB2b2lkIDAgPyBfMTUgOiAwO1xuICAgICAgICBtZXNzYWdlLmxhc3RMYXllckxvY2tQbGkgPSAoXzE2ID0gb2JqZWN0Lmxhc3RMYXllckxvY2tQbGkpICE9PSBudWxsICYmIF8xNiAhPT0gdm9pZCAwID8gXzE2IDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLnBhY2tldERyaWZ0ID0gKG9iamVjdC5wYWNrZXREcmlmdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wYWNrZXREcmlmdCAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5SVFBEcmlmdC5mcm9tUGFydGlhbChvYmplY3QucGFja2V0RHJpZnQpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5yZXBvcnREcmlmdCA9IChvYmplY3QucmVwb3J0RHJpZnQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucmVwb3J0RHJpZnQgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuUlRQRHJpZnQuZnJvbVBhcnRpYWwob2JqZWN0LnJlcG9ydERyaWZ0KVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVJUUFN0YXRzX0dhcEhpc3RvZ3JhbUVudHJ5KCkge1xuICAgIHJldHVybiB7IGtleTogMCwgdmFsdWU6IDAgfTtcbn1cbmV4cG9ydHMuUlRQU3RhdHNfR2FwSGlzdG9ncmFtRW50cnkgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5rZXkgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoOCkuaW50MzIobWVzc2FnZS5rZXkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnZhbHVlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE2KS51aW50MzIobWVzc2FnZS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUlRQU3RhdHNfR2FwSGlzdG9ncmFtRW50cnkoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmtleSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudmFsdWUgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHsga2V5OiBpc1NldChvYmplY3Qua2V5KSA/IE51bWJlcihvYmplY3Qua2V5KSA6IDAsIHZhbHVlOiBpc1NldChvYmplY3QudmFsdWUpID8gTnVtYmVyKG9iamVjdC52YWx1ZSkgOiAwIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5rZXkgIT09IHVuZGVmaW5lZCAmJiAob2JqLmtleSA9IE1hdGgucm91bmQobWVzc2FnZS5rZXkpKTtcbiAgICAgICAgbWVzc2FnZS52YWx1ZSAhPT0gdW5kZWZpbmVkICYmIChvYmoudmFsdWUgPSBNYXRoLnJvdW5kKG1lc3NhZ2UudmFsdWUpKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVJUUFN0YXRzX0dhcEhpc3RvZ3JhbUVudHJ5KCk7XG4gICAgICAgIG1lc3NhZ2Uua2V5ID0gKF9hID0gb2JqZWN0LmtleSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcbiAgICAgICAgbWVzc2FnZS52YWx1ZSA9IChfYiA9IG9iamVjdC52YWx1ZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVGltZWRWZXJzaW9uKCkge1xuICAgIHJldHVybiB7IHVuaXhNaWNybzogMCwgdGlja3M6IDAgfTtcbn1cbmV4cG9ydHMuVGltZWRWZXJzaW9uID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UudW5peE1pY3JvICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDgpLmludDY0KG1lc3NhZ2UudW5peE1pY3JvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS50aWNrcyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNikuaW50MzIobWVzc2FnZS50aWNrcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVGltZWRWZXJzaW9uKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51bml4TWljcm8gPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudGlja3MgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdW5peE1pY3JvOiBpc1NldChvYmplY3QudW5peE1pY3JvKSA/IE51bWJlcihvYmplY3QudW5peE1pY3JvKSA6IDAsXG4gICAgICAgICAgICB0aWNrczogaXNTZXQob2JqZWN0LnRpY2tzKSA/IE51bWJlcihvYmplY3QudGlja3MpIDogMCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnVuaXhNaWNybyAhPT0gdW5kZWZpbmVkICYmIChvYmoudW5peE1pY3JvID0gTWF0aC5yb3VuZChtZXNzYWdlLnVuaXhNaWNybykpO1xuICAgICAgICBtZXNzYWdlLnRpY2tzICE9PSB1bmRlZmluZWQgJiYgKG9iai50aWNrcyA9IE1hdGgucm91bmQobWVzc2FnZS50aWNrcykpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVGltZWRWZXJzaW9uKCk7XG4gICAgICAgIG1lc3NhZ2UudW5peE1pY3JvID0gKF9hID0gb2JqZWN0LnVuaXhNaWNybykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcbiAgICAgICAgbWVzc2FnZS50aWNrcyA9IChfYiA9IG9iamVjdC50aWNrcykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG52YXIgZ2xvYmFsVGhpcyA9ICgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWxUaGlzO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWw7XG4gICAgfVxuICAgIHRocm93IFwiVW5hYmxlIHRvIGxvY2F0ZSBnbG9iYWwgb2JqZWN0XCI7XG59KSgpO1xuZnVuY3Rpb24gYnl0ZXNGcm9tQmFzZTY0KGI2NCkge1xuICAgIGlmIChnbG9iYWxUaGlzLkJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5mcm9tKGdsb2JhbFRoaXMuQnVmZmVyLmZyb20oYjY0LCBcImJhc2U2NFwiKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBiaW4gPSBnbG9iYWxUaGlzLmF0b2IoYjY0KTtcbiAgICAgICAgY29uc3QgYXJyID0gbmV3IFVpbnQ4QXJyYXkoYmluLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmluLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBhcnJbaV0gPSBiaW4uY2hhckNvZGVBdChpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGJhc2U2NEZyb21CeXRlcyhhcnIpIHtcbiAgICBpZiAoZ2xvYmFsVGhpcy5CdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbFRoaXMuQnVmZmVyLmZyb20oYXJyKS50b1N0cmluZyhcImJhc2U2NFwiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGJpbiA9IFtdO1xuICAgICAgICBhcnIuZm9yRWFjaCgoYnl0ZSkgPT4ge1xuICAgICAgICAgICAgYmluLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShieXRlKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZ2xvYmFsVGhpcy5idG9hKGJpbi5qb2luKFwiXCIpKTtcbiAgICB9XG59XG5mdW5jdGlvbiB0b1RpbWVzdGFtcChkYXRlKSB7XG4gICAgY29uc3Qgc2Vjb25kcyA9IGRhdGUuZ2V0VGltZSgpIC8gMTAwMDtcbiAgICBjb25zdCBuYW5vcyA9IChkYXRlLmdldFRpbWUoKSAlIDEwMDApICogMTAwMDAwMDtcbiAgICByZXR1cm4geyBzZWNvbmRzLCBuYW5vcyB9O1xufVxuZnVuY3Rpb24gZnJvbVRpbWVzdGFtcCh0KSB7XG4gICAgbGV0IG1pbGxpcyA9IHQuc2Vjb25kcyAqIDEwMDA7XG4gICAgbWlsbGlzICs9IHQubmFub3MgLyAxMDAwMDAwO1xuICAgIHJldHVybiBuZXcgRGF0ZShtaWxsaXMpO1xufVxuZnVuY3Rpb24gZnJvbUpzb25UaW1lc3RhbXAobykge1xuICAgIGlmIChvIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICByZXR1cm4gbztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKG8pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZyb21UaW1lc3RhbXAodGltZXN0YW1wXzEuVGltZXN0YW1wLmZyb21KU09OKG8pKTtcbiAgICB9XG59XG5mdW5jdGlvbiBsb25nVG9OdW1iZXIobG9uZykge1xuICAgIGlmIChsb25nLmd0KE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSkge1xuICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcIlZhbHVlIGlzIGxhcmdlciB0aGFuIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSXCIpO1xuICAgIH1cbiAgICByZXR1cm4gbG9uZy50b051bWJlcigpO1xufVxuaWYgKG1pbmltYWxfMS5kZWZhdWx0LnV0aWwuTG9uZyAhPT0gbG9uZ18xLmRlZmF1bHQpIHtcbiAgICBtaW5pbWFsXzEuZGVmYXVsdC51dGlsLkxvbmcgPSBsb25nXzEuZGVmYXVsdDtcbiAgICBtaW5pbWFsXzEuZGVmYXVsdC5jb25maWd1cmUoKTtcbn1cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbDtcbn1cbmZ1bmN0aW9uIGlzU2V0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXZla2l0X21vZGVscy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_models.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_room.js":
/*!********************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/proto/livekit_room.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.UpdateRoomMetadataRequest = exports.SendDataResponse = exports.SendDataRequest = exports.UpdateSubscriptionsResponse = exports.UpdateSubscriptionsRequest = exports.UpdateParticipantRequest = exports.MuteRoomTrackResponse = exports.MuteRoomTrackRequest = exports.RemoveParticipantResponse = exports.RoomParticipantIdentity = exports.ListParticipantsResponse = exports.ListParticipantsRequest = exports.DeleteRoomResponse = exports.DeleteRoomRequest = exports.ListRoomsResponse = exports.ListRoomsRequest = exports.RoomEgress = exports.CreateRoomRequest = exports.protobufPackage = void 0;\n/* eslint-disable */\nconst minimal_1 = __importDefault(__webpack_require__(/*! protobufjs/minimal */ \"(ssr)/./node_modules/protobufjs/minimal.js\"));\nconst livekit_egress_1 = __webpack_require__(/*! ./livekit_egress */ \"(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_egress.js\");\nconst livekit_models_1 = __webpack_require__(/*! ./livekit_models */ \"(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_models.js\");\nexports.protobufPackage = \"livekit\";\nfunction createBaseCreateRoomRequest() {\n    return {\n        name: \"\",\n        emptyTimeout: 0,\n        maxParticipants: 0,\n        nodeId: \"\",\n        metadata: \"\",\n        egress: undefined,\n        minPlayoutDelay: 0,\n        maxPlayoutDelay: 0,\n        syncStreams: false,\n    };\n}\nexports.CreateRoomRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.name !== undefined && message.name !== \"\") {\n            writer.uint32(10).string(message.name);\n        }\n        if (message.emptyTimeout !== undefined && message.emptyTimeout !== 0) {\n            writer.uint32(16).uint32(message.emptyTimeout);\n        }\n        if (message.maxParticipants !== undefined && message.maxParticipants !== 0) {\n            writer.uint32(24).uint32(message.maxParticipants);\n        }\n        if (message.nodeId !== undefined && message.nodeId !== \"\") {\n            writer.uint32(34).string(message.nodeId);\n        }\n        if (message.metadata !== undefined && message.metadata !== \"\") {\n            writer.uint32(42).string(message.metadata);\n        }\n        if (message.egress !== undefined) {\n            exports.RoomEgress.encode(message.egress, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.minPlayoutDelay !== undefined && message.minPlayoutDelay !== 0) {\n            writer.uint32(56).uint32(message.minPlayoutDelay);\n        }\n        if (message.maxPlayoutDelay !== undefined && message.maxPlayoutDelay !== 0) {\n            writer.uint32(64).uint32(message.maxPlayoutDelay);\n        }\n        if (message.syncStreams === true) {\n            writer.uint32(72).bool(message.syncStreams);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseCreateRoomRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.name = reader.string();\n                    break;\n                case 2:\n                    message.emptyTimeout = reader.uint32();\n                    break;\n                case 3:\n                    message.maxParticipants = reader.uint32();\n                    break;\n                case 4:\n                    message.nodeId = reader.string();\n                    break;\n                case 5:\n                    message.metadata = reader.string();\n                    break;\n                case 6:\n                    message.egress = exports.RoomEgress.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.minPlayoutDelay = reader.uint32();\n                    break;\n                case 8:\n                    message.maxPlayoutDelay = reader.uint32();\n                    break;\n                case 9:\n                    message.syncStreams = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            name: isSet(object.name) ? String(object.name) : \"\",\n            emptyTimeout: isSet(object.emptyTimeout) ? Number(object.emptyTimeout) : 0,\n            maxParticipants: isSet(object.maxParticipants) ? Number(object.maxParticipants) : 0,\n            nodeId: isSet(object.nodeId) ? String(object.nodeId) : \"\",\n            metadata: isSet(object.metadata) ? String(object.metadata) : \"\",\n            egress: isSet(object.egress) ? exports.RoomEgress.fromJSON(object.egress) : undefined,\n            minPlayoutDelay: isSet(object.minPlayoutDelay) ? Number(object.minPlayoutDelay) : 0,\n            maxPlayoutDelay: isSet(object.maxPlayoutDelay) ? Number(object.maxPlayoutDelay) : 0,\n            syncStreams: isSet(object.syncStreams) ? Boolean(object.syncStreams) : false,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.name !== undefined && (obj.name = message.name);\n        message.emptyTimeout !== undefined && (obj.emptyTimeout = Math.round(message.emptyTimeout));\n        message.maxParticipants !== undefined && (obj.maxParticipants = Math.round(message.maxParticipants));\n        message.nodeId !== undefined && (obj.nodeId = message.nodeId);\n        message.metadata !== undefined && (obj.metadata = message.metadata);\n        message.egress !== undefined && (obj.egress = message.egress ? exports.RoomEgress.toJSON(message.egress) : undefined);\n        message.minPlayoutDelay !== undefined && (obj.minPlayoutDelay = Math.round(message.minPlayoutDelay));\n        message.maxPlayoutDelay !== undefined && (obj.maxPlayoutDelay = Math.round(message.maxPlayoutDelay));\n        message.syncStreams !== undefined && (obj.syncStreams = message.syncStreams);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        const message = createBaseCreateRoomRequest();\n        message.name = (_a = object.name) !== null && _a !== void 0 ? _a : \"\";\n        message.emptyTimeout = (_b = object.emptyTimeout) !== null && _b !== void 0 ? _b : 0;\n        message.maxParticipants = (_c = object.maxParticipants) !== null && _c !== void 0 ? _c : 0;\n        message.nodeId = (_d = object.nodeId) !== null && _d !== void 0 ? _d : \"\";\n        message.metadata = (_e = object.metadata) !== null && _e !== void 0 ? _e : \"\";\n        message.egress = (object.egress !== undefined && object.egress !== null)\n            ? exports.RoomEgress.fromPartial(object.egress)\n            : undefined;\n        message.minPlayoutDelay = (_f = object.minPlayoutDelay) !== null && _f !== void 0 ? _f : 0;\n        message.maxPlayoutDelay = (_g = object.maxPlayoutDelay) !== null && _g !== void 0 ? _g : 0;\n        message.syncStreams = (_h = object.syncStreams) !== null && _h !== void 0 ? _h : false;\n        return message;\n    },\n};\nfunction createBaseRoomEgress() {\n    return { room: undefined, participant: undefined, tracks: undefined };\n}\nexports.RoomEgress = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.room !== undefined) {\n            livekit_egress_1.RoomCompositeEgressRequest.encode(message.room, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.participant !== undefined) {\n            livekit_egress_1.AutoParticipantEgress.encode(message.participant, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.tracks !== undefined) {\n            livekit_egress_1.AutoTrackEgress.encode(message.tracks, writer.uint32(18).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseRoomEgress();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.room = livekit_egress_1.RoomCompositeEgressRequest.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.participant = livekit_egress_1.AutoParticipantEgress.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.tracks = livekit_egress_1.AutoTrackEgress.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            room: isSet(object.room) ? livekit_egress_1.RoomCompositeEgressRequest.fromJSON(object.room) : undefined,\n            participant: isSet(object.participant) ? livekit_egress_1.AutoParticipantEgress.fromJSON(object.participant) : undefined,\n            tracks: isSet(object.tracks) ? livekit_egress_1.AutoTrackEgress.fromJSON(object.tracks) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.room !== undefined &&\n            (obj.room = message.room ? livekit_egress_1.RoomCompositeEgressRequest.toJSON(message.room) : undefined);\n        message.participant !== undefined &&\n            (obj.participant = message.participant ? livekit_egress_1.AutoParticipantEgress.toJSON(message.participant) : undefined);\n        message.tracks !== undefined && (obj.tracks = message.tracks ? livekit_egress_1.AutoTrackEgress.toJSON(message.tracks) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = createBaseRoomEgress();\n        message.room = (object.room !== undefined && object.room !== null)\n            ? livekit_egress_1.RoomCompositeEgressRequest.fromPartial(object.room)\n            : undefined;\n        message.participant = (object.participant !== undefined && object.participant !== null)\n            ? livekit_egress_1.AutoParticipantEgress.fromPartial(object.participant)\n            : undefined;\n        message.tracks = (object.tracks !== undefined && object.tracks !== null)\n            ? livekit_egress_1.AutoTrackEgress.fromPartial(object.tracks)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseListRoomsRequest() {\n    return { names: [] };\n}\nexports.ListRoomsRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.names !== undefined && message.names.length !== 0) {\n            for (const v of message.names) {\n                writer.uint32(10).string(v);\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseListRoomsRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.names.push(reader.string());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { names: Array.isArray(object === null || object === void 0 ? void 0 : object.names) ? object.names.map((e) => String(e)) : [] };\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.names) {\n            obj.names = message.names.map((e) => e);\n        }\n        else {\n            obj.names = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseListRoomsRequest();\n        message.names = ((_a = object.names) === null || _a === void 0 ? void 0 : _a.map((e) => e)) || [];\n        return message;\n    },\n};\nfunction createBaseListRoomsResponse() {\n    return { rooms: [] };\n}\nexports.ListRoomsResponse = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.rooms !== undefined && message.rooms.length !== 0) {\n            for (const v of message.rooms) {\n                livekit_models_1.Room.encode(v, writer.uint32(10).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseListRoomsResponse();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.rooms.push(livekit_models_1.Room.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { rooms: Array.isArray(object === null || object === void 0 ? void 0 : object.rooms) ? object.rooms.map((e) => livekit_models_1.Room.fromJSON(e)) : [] };\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.rooms) {\n            obj.rooms = message.rooms.map((e) => e ? livekit_models_1.Room.toJSON(e) : undefined);\n        }\n        else {\n            obj.rooms = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseListRoomsResponse();\n        message.rooms = ((_a = object.rooms) === null || _a === void 0 ? void 0 : _a.map((e) => livekit_models_1.Room.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseDeleteRoomRequest() {\n    return { room: \"\" };\n}\nexports.DeleteRoomRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.room !== undefined && message.room !== \"\") {\n            writer.uint32(10).string(message.room);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseDeleteRoomRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.room = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { room: isSet(object.room) ? String(object.room) : \"\" };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.room !== undefined && (obj.room = message.room);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseDeleteRoomRequest();\n        message.room = (_a = object.room) !== null && _a !== void 0 ? _a : \"\";\n        return message;\n    },\n};\nfunction createBaseDeleteRoomResponse() {\n    return {};\n}\nexports.DeleteRoomResponse = {\n    encode(_, writer = minimal_1.default.Writer.create()) {\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseDeleteRoomResponse();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(_) {\n        return {};\n    },\n    toJSON(_) {\n        const obj = {};\n        return obj;\n    },\n    fromPartial(_) {\n        const message = createBaseDeleteRoomResponse();\n        return message;\n    },\n};\nfunction createBaseListParticipantsRequest() {\n    return { room: \"\" };\n}\nexports.ListParticipantsRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.room !== undefined && message.room !== \"\") {\n            writer.uint32(10).string(message.room);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseListParticipantsRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.room = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { room: isSet(object.room) ? String(object.room) : \"\" };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.room !== undefined && (obj.room = message.room);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseListParticipantsRequest();\n        message.room = (_a = object.room) !== null && _a !== void 0 ? _a : \"\";\n        return message;\n    },\n};\nfunction createBaseListParticipantsResponse() {\n    return { participants: [] };\n}\nexports.ListParticipantsResponse = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.participants !== undefined && message.participants.length !== 0) {\n            for (const v of message.participants) {\n                livekit_models_1.ParticipantInfo.encode(v, writer.uint32(10).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseListParticipantsResponse();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.participants.push(livekit_models_1.ParticipantInfo.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            participants: Array.isArray(object === null || object === void 0 ? void 0 : object.participants)\n                ? object.participants.map((e) => livekit_models_1.ParticipantInfo.fromJSON(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.participants) {\n            obj.participants = message.participants.map((e) => e ? livekit_models_1.ParticipantInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.participants = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseListParticipantsResponse();\n        message.participants = ((_a = object.participants) === null || _a === void 0 ? void 0 : _a.map((e) => livekit_models_1.ParticipantInfo.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseRoomParticipantIdentity() {\n    return { room: \"\", identity: \"\" };\n}\nexports.RoomParticipantIdentity = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.room !== undefined && message.room !== \"\") {\n            writer.uint32(10).string(message.room);\n        }\n        if (message.identity !== undefined && message.identity !== \"\") {\n            writer.uint32(18).string(message.identity);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseRoomParticipantIdentity();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.room = reader.string();\n                    break;\n                case 2:\n                    message.identity = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            room: isSet(object.room) ? String(object.room) : \"\",\n            identity: isSet(object.identity) ? String(object.identity) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.room !== undefined && (obj.room = message.room);\n        message.identity !== undefined && (obj.identity = message.identity);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseRoomParticipantIdentity();\n        message.room = (_a = object.room) !== null && _a !== void 0 ? _a : \"\";\n        message.identity = (_b = object.identity) !== null && _b !== void 0 ? _b : \"\";\n        return message;\n    },\n};\nfunction createBaseRemoveParticipantResponse() {\n    return {};\n}\nexports.RemoveParticipantResponse = {\n    encode(_, writer = minimal_1.default.Writer.create()) {\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseRemoveParticipantResponse();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(_) {\n        return {};\n    },\n    toJSON(_) {\n        const obj = {};\n        return obj;\n    },\n    fromPartial(_) {\n        const message = createBaseRemoveParticipantResponse();\n        return message;\n    },\n};\nfunction createBaseMuteRoomTrackRequest() {\n    return { room: \"\", identity: \"\", trackSid: \"\", muted: false };\n}\nexports.MuteRoomTrackRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.room !== undefined && message.room !== \"\") {\n            writer.uint32(10).string(message.room);\n        }\n        if (message.identity !== undefined && message.identity !== \"\") {\n            writer.uint32(18).string(message.identity);\n        }\n        if (message.trackSid !== undefined && message.trackSid !== \"\") {\n            writer.uint32(26).string(message.trackSid);\n        }\n        if (message.muted === true) {\n            writer.uint32(32).bool(message.muted);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseMuteRoomTrackRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.room = reader.string();\n                    break;\n                case 2:\n                    message.identity = reader.string();\n                    break;\n                case 3:\n                    message.trackSid = reader.string();\n                    break;\n                case 4:\n                    message.muted = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            room: isSet(object.room) ? String(object.room) : \"\",\n            identity: isSet(object.identity) ? String(object.identity) : \"\",\n            trackSid: isSet(object.trackSid) ? String(object.trackSid) : \"\",\n            muted: isSet(object.muted) ? Boolean(object.muted) : false,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.room !== undefined && (obj.room = message.room);\n        message.identity !== undefined && (obj.identity = message.identity);\n        message.trackSid !== undefined && (obj.trackSid = message.trackSid);\n        message.muted !== undefined && (obj.muted = message.muted);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d;\n        const message = createBaseMuteRoomTrackRequest();\n        message.room = (_a = object.room) !== null && _a !== void 0 ? _a : \"\";\n        message.identity = (_b = object.identity) !== null && _b !== void 0 ? _b : \"\";\n        message.trackSid = (_c = object.trackSid) !== null && _c !== void 0 ? _c : \"\";\n        message.muted = (_d = object.muted) !== null && _d !== void 0 ? _d : false;\n        return message;\n    },\n};\nfunction createBaseMuteRoomTrackResponse() {\n    return { track: undefined };\n}\nexports.MuteRoomTrackResponse = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.track !== undefined) {\n            livekit_models_1.TrackInfo.encode(message.track, writer.uint32(10).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseMuteRoomTrackResponse();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.track = livekit_models_1.TrackInfo.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { track: isSet(object.track) ? livekit_models_1.TrackInfo.fromJSON(object.track) : undefined };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.track !== undefined && (obj.track = message.track ? livekit_models_1.TrackInfo.toJSON(message.track) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = createBaseMuteRoomTrackResponse();\n        message.track = (object.track !== undefined && object.track !== null)\n            ? livekit_models_1.TrackInfo.fromPartial(object.track)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseUpdateParticipantRequest() {\n    return { room: \"\", identity: \"\", metadata: \"\", permission: undefined, name: \"\" };\n}\nexports.UpdateParticipantRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.room !== undefined && message.room !== \"\") {\n            writer.uint32(10).string(message.room);\n        }\n        if (message.identity !== undefined && message.identity !== \"\") {\n            writer.uint32(18).string(message.identity);\n        }\n        if (message.metadata !== undefined && message.metadata !== \"\") {\n            writer.uint32(26).string(message.metadata);\n        }\n        if (message.permission !== undefined) {\n            livekit_models_1.ParticipantPermission.encode(message.permission, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.name !== undefined && message.name !== \"\") {\n            writer.uint32(42).string(message.name);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseUpdateParticipantRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.room = reader.string();\n                    break;\n                case 2:\n                    message.identity = reader.string();\n                    break;\n                case 3:\n                    message.metadata = reader.string();\n                    break;\n                case 4:\n                    message.permission = livekit_models_1.ParticipantPermission.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.name = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            room: isSet(object.room) ? String(object.room) : \"\",\n            identity: isSet(object.identity) ? String(object.identity) : \"\",\n            metadata: isSet(object.metadata) ? String(object.metadata) : \"\",\n            permission: isSet(object.permission) ? livekit_models_1.ParticipantPermission.fromJSON(object.permission) : undefined,\n            name: isSet(object.name) ? String(object.name) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.room !== undefined && (obj.room = message.room);\n        message.identity !== undefined && (obj.identity = message.identity);\n        message.metadata !== undefined && (obj.metadata = message.metadata);\n        message.permission !== undefined &&\n            (obj.permission = message.permission ? livekit_models_1.ParticipantPermission.toJSON(message.permission) : undefined);\n        message.name !== undefined && (obj.name = message.name);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d;\n        const message = createBaseUpdateParticipantRequest();\n        message.room = (_a = object.room) !== null && _a !== void 0 ? _a : \"\";\n        message.identity = (_b = object.identity) !== null && _b !== void 0 ? _b : \"\";\n        message.metadata = (_c = object.metadata) !== null && _c !== void 0 ? _c : \"\";\n        message.permission = (object.permission !== undefined && object.permission !== null)\n            ? livekit_models_1.ParticipantPermission.fromPartial(object.permission)\n            : undefined;\n        message.name = (_d = object.name) !== null && _d !== void 0 ? _d : \"\";\n        return message;\n    },\n};\nfunction createBaseUpdateSubscriptionsRequest() {\n    return { room: \"\", identity: \"\", trackSids: [], subscribe: false, participantTracks: [] };\n}\nexports.UpdateSubscriptionsRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.room !== undefined && message.room !== \"\") {\n            writer.uint32(10).string(message.room);\n        }\n        if (message.identity !== undefined && message.identity !== \"\") {\n            writer.uint32(18).string(message.identity);\n        }\n        if (message.trackSids !== undefined && message.trackSids.length !== 0) {\n            for (const v of message.trackSids) {\n                writer.uint32(26).string(v);\n            }\n        }\n        if (message.subscribe === true) {\n            writer.uint32(32).bool(message.subscribe);\n        }\n        if (message.participantTracks !== undefined && message.participantTracks.length !== 0) {\n            for (const v of message.participantTracks) {\n                livekit_models_1.ParticipantTracks.encode(v, writer.uint32(42).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseUpdateSubscriptionsRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.room = reader.string();\n                    break;\n                case 2:\n                    message.identity = reader.string();\n                    break;\n                case 3:\n                    message.trackSids.push(reader.string());\n                    break;\n                case 4:\n                    message.subscribe = reader.bool();\n                    break;\n                case 5:\n                    message.participantTracks.push(livekit_models_1.ParticipantTracks.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            room: isSet(object.room) ? String(object.room) : \"\",\n            identity: isSet(object.identity) ? String(object.identity) : \"\",\n            trackSids: Array.isArray(object === null || object === void 0 ? void 0 : object.trackSids) ? object.trackSids.map((e) => String(e)) : [],\n            subscribe: isSet(object.subscribe) ? Boolean(object.subscribe) : false,\n            participantTracks: Array.isArray(object === null || object === void 0 ? void 0 : object.participantTracks)\n                ? object.participantTracks.map((e) => livekit_models_1.ParticipantTracks.fromJSON(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.room !== undefined && (obj.room = message.room);\n        message.identity !== undefined && (obj.identity = message.identity);\n        if (message.trackSids) {\n            obj.trackSids = message.trackSids.map((e) => e);\n        }\n        else {\n            obj.trackSids = [];\n        }\n        message.subscribe !== undefined && (obj.subscribe = message.subscribe);\n        if (message.participantTracks) {\n            obj.participantTracks = message.participantTracks.map((e) => e ? livekit_models_1.ParticipantTracks.toJSON(e) : undefined);\n        }\n        else {\n            obj.participantTracks = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e;\n        const message = createBaseUpdateSubscriptionsRequest();\n        message.room = (_a = object.room) !== null && _a !== void 0 ? _a : \"\";\n        message.identity = (_b = object.identity) !== null && _b !== void 0 ? _b : \"\";\n        message.trackSids = ((_c = object.trackSids) === null || _c === void 0 ? void 0 : _c.map((e) => e)) || [];\n        message.subscribe = (_d = object.subscribe) !== null && _d !== void 0 ? _d : false;\n        message.participantTracks = ((_e = object.participantTracks) === null || _e === void 0 ? void 0 : _e.map((e) => livekit_models_1.ParticipantTracks.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseUpdateSubscriptionsResponse() {\n    return {};\n}\nexports.UpdateSubscriptionsResponse = {\n    encode(_, writer = minimal_1.default.Writer.create()) {\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseUpdateSubscriptionsResponse();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(_) {\n        return {};\n    },\n    toJSON(_) {\n        const obj = {};\n        return obj;\n    },\n    fromPartial(_) {\n        const message = createBaseUpdateSubscriptionsResponse();\n        return message;\n    },\n};\nfunction createBaseSendDataRequest() {\n    return {\n        room: \"\",\n        data: new Uint8Array(),\n        kind: 0,\n        destinationSids: [],\n        destinationIdentities: [],\n        topic: undefined,\n    };\n}\nexports.SendDataRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.room !== undefined && message.room !== \"\") {\n            writer.uint32(10).string(message.room);\n        }\n        if (message.data !== undefined && message.data.length !== 0) {\n            writer.uint32(18).bytes(message.data);\n        }\n        if (message.kind !== undefined && message.kind !== 0) {\n            writer.uint32(24).int32(message.kind);\n        }\n        if (message.destinationSids !== undefined && message.destinationSids.length !== 0) {\n            for (const v of message.destinationSids) {\n                writer.uint32(34).string(v);\n            }\n        }\n        if (message.destinationIdentities !== undefined && message.destinationIdentities.length !== 0) {\n            for (const v of message.destinationIdentities) {\n                writer.uint32(50).string(v);\n            }\n        }\n        if (message.topic !== undefined) {\n            writer.uint32(42).string(message.topic);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseSendDataRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.room = reader.string();\n                    break;\n                case 2:\n                    message.data = reader.bytes();\n                    break;\n                case 3:\n                    message.kind = reader.int32();\n                    break;\n                case 4:\n                    message.destinationSids.push(reader.string());\n                    break;\n                case 6:\n                    message.destinationIdentities.push(reader.string());\n                    break;\n                case 5:\n                    message.topic = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            room: isSet(object.room) ? String(object.room) : \"\",\n            data: isSet(object.data) ? bytesFromBase64(object.data) : new Uint8Array(),\n            kind: isSet(object.kind) ? livekit_models_1.dataPacket_KindFromJSON(object.kind) : 0,\n            destinationSids: Array.isArray(object === null || object === void 0 ? void 0 : object.destinationSids) ? object.destinationSids.map((e) => String(e)) : [],\n            destinationIdentities: Array.isArray(object === null || object === void 0 ? void 0 : object.destinationIdentities)\n                ? object.destinationIdentities.map((e) => String(e))\n                : [],\n            topic: isSet(object.topic) ? String(object.topic) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.room !== undefined && (obj.room = message.room);\n        message.data !== undefined &&\n            (obj.data = base64FromBytes(message.data !== undefined ? message.data : new Uint8Array()));\n        message.kind !== undefined && (obj.kind = livekit_models_1.dataPacket_KindToJSON(message.kind));\n        if (message.destinationSids) {\n            obj.destinationSids = message.destinationSids.map((e) => e);\n        }\n        else {\n            obj.destinationSids = [];\n        }\n        if (message.destinationIdentities) {\n            obj.destinationIdentities = message.destinationIdentities.map((e) => e);\n        }\n        else {\n            obj.destinationIdentities = [];\n        }\n        message.topic !== undefined && (obj.topic = message.topic);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f;\n        const message = createBaseSendDataRequest();\n        message.room = (_a = object.room) !== null && _a !== void 0 ? _a : \"\";\n        message.data = (_b = object.data) !== null && _b !== void 0 ? _b : new Uint8Array();\n        message.kind = (_c = object.kind) !== null && _c !== void 0 ? _c : 0;\n        message.destinationSids = ((_d = object.destinationSids) === null || _d === void 0 ? void 0 : _d.map((e) => e)) || [];\n        message.destinationIdentities = ((_e = object.destinationIdentities) === null || _e === void 0 ? void 0 : _e.map((e) => e)) || [];\n        message.topic = (_f = object.topic) !== null && _f !== void 0 ? _f : undefined;\n        return message;\n    },\n};\nfunction createBaseSendDataResponse() {\n    return {};\n}\nexports.SendDataResponse = {\n    encode(_, writer = minimal_1.default.Writer.create()) {\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseSendDataResponse();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(_) {\n        return {};\n    },\n    toJSON(_) {\n        const obj = {};\n        return obj;\n    },\n    fromPartial(_) {\n        const message = createBaseSendDataResponse();\n        return message;\n    },\n};\nfunction createBaseUpdateRoomMetadataRequest() {\n    return { room: \"\", metadata: \"\" };\n}\nexports.UpdateRoomMetadataRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.room !== undefined && message.room !== \"\") {\n            writer.uint32(10).string(message.room);\n        }\n        if (message.metadata !== undefined && message.metadata !== \"\") {\n            writer.uint32(18).string(message.metadata);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseUpdateRoomMetadataRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.room = reader.string();\n                    break;\n                case 2:\n                    message.metadata = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            room: isSet(object.room) ? String(object.room) : \"\",\n            metadata: isSet(object.metadata) ? String(object.metadata) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.room !== undefined && (obj.room = message.room);\n        message.metadata !== undefined && (obj.metadata = message.metadata);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseUpdateRoomMetadataRequest();\n        message.room = (_a = object.room) !== null && _a !== void 0 ? _a : \"\";\n        message.metadata = (_b = object.metadata) !== null && _b !== void 0 ? _b : \"\";\n        return message;\n    },\n};\nvar globalThis = (() => {\n    if (typeof globalThis !== \"undefined\") {\n        return globalThis;\n    }\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    if (typeof window !== \"undefined\") {\n        return window;\n    }\n    if (typeof global !== \"undefined\") {\n        return global;\n    }\n    throw \"Unable to locate global object\";\n})();\nfunction bytesFromBase64(b64) {\n    if (globalThis.Buffer) {\n        return Uint8Array.from(globalThis.Buffer.from(b64, \"base64\"));\n    }\n    else {\n        const bin = globalThis.atob(b64);\n        const arr = new Uint8Array(bin.length);\n        for (let i = 0; i < bin.length; ++i) {\n            arr[i] = bin.charCodeAt(i);\n        }\n        return arr;\n    }\n}\nfunction base64FromBytes(arr) {\n    if (globalThis.Buffer) {\n        return globalThis.Buffer.from(arr).toString(\"base64\");\n    }\n    else {\n        const bin = [];\n        arr.forEach((byte) => {\n            bin.push(String.fromCharCode(byte));\n        });\n        return globalThis.btoa(bin.join(\"\"));\n    }\n}\nfunction isSet(value) {\n    return value !== null && value !== undefined;\n}\n//# sourceMappingURL=livekit_room.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvcHJvdG8vbGl2ZWtpdF9yb29tLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsaUNBQWlDLEdBQUcsd0JBQXdCLEdBQUcsdUJBQXVCLEdBQUcsbUNBQW1DLEdBQUcsa0NBQWtDLEdBQUcsZ0NBQWdDLEdBQUcsNkJBQTZCLEdBQUcsNEJBQTRCLEdBQUcsaUNBQWlDLEdBQUcsK0JBQStCLEdBQUcsZ0NBQWdDLEdBQUcsK0JBQStCLEdBQUcsMEJBQTBCLEdBQUcseUJBQXlCLEdBQUcseUJBQXlCLEdBQUcsd0JBQXdCLEdBQUcsa0JBQWtCLEdBQUcseUJBQXlCLEdBQUcsdUJBQXVCO0FBQ3prQjtBQUNBLGtDQUFrQyxtQkFBTyxDQUFDLHNFQUFvQjtBQUM5RCx5QkFBeUIsbUJBQU8sQ0FBQyw4RkFBa0I7QUFDbkQseUJBQXlCLG1CQUFPLENBQUMsOEZBQWtCO0FBQ25ELHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGlCQUFpQjtBQUNqQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGlCQUFpQjtBQUNqQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsaUJBQWlCO0FBQ2pCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGlCQUFpQjtBQUNqQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxpQkFBaUI7QUFDakIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0JBQWdCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGl2ZXN0cmVhbS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9wcm90by9saXZla2l0X3Jvb20uanM/MjQ0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVXBkYXRlUm9vbU1ldGFkYXRhUmVxdWVzdCA9IGV4cG9ydHMuU2VuZERhdGFSZXNwb25zZSA9IGV4cG9ydHMuU2VuZERhdGFSZXF1ZXN0ID0gZXhwb3J0cy5VcGRhdGVTdWJzY3JpcHRpb25zUmVzcG9uc2UgPSBleHBvcnRzLlVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0ID0gZXhwb3J0cy5VcGRhdGVQYXJ0aWNpcGFudFJlcXVlc3QgPSBleHBvcnRzLk11dGVSb29tVHJhY2tSZXNwb25zZSA9IGV4cG9ydHMuTXV0ZVJvb21UcmFja1JlcXVlc3QgPSBleHBvcnRzLlJlbW92ZVBhcnRpY2lwYW50UmVzcG9uc2UgPSBleHBvcnRzLlJvb21QYXJ0aWNpcGFudElkZW50aXR5ID0gZXhwb3J0cy5MaXN0UGFydGljaXBhbnRzUmVzcG9uc2UgPSBleHBvcnRzLkxpc3RQYXJ0aWNpcGFudHNSZXF1ZXN0ID0gZXhwb3J0cy5EZWxldGVSb29tUmVzcG9uc2UgPSBleHBvcnRzLkRlbGV0ZVJvb21SZXF1ZXN0ID0gZXhwb3J0cy5MaXN0Um9vbXNSZXNwb25zZSA9IGV4cG9ydHMuTGlzdFJvb21zUmVxdWVzdCA9IGV4cG9ydHMuUm9vbUVncmVzcyA9IGV4cG9ydHMuQ3JlYXRlUm9vbVJlcXVlc3QgPSBleHBvcnRzLnByb3RvYnVmUGFja2FnZSA9IHZvaWQgMDtcbi8qIGVzbGludC1kaXNhYmxlICovXG5jb25zdCBtaW5pbWFsXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcInByb3RvYnVmanMvbWluaW1hbFwiKSk7XG5jb25zdCBsaXZla2l0X2VncmVzc18xID0gcmVxdWlyZShcIi4vbGl2ZWtpdF9lZ3Jlc3NcIik7XG5jb25zdCBsaXZla2l0X21vZGVsc18xID0gcmVxdWlyZShcIi4vbGl2ZWtpdF9tb2RlbHNcIik7XG5leHBvcnRzLnByb3RvYnVmUGFja2FnZSA9IFwibGl2ZWtpdFwiO1xuZnVuY3Rpb24gY3JlYXRlQmFzZUNyZWF0ZVJvb21SZXF1ZXN0KCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGVtcHR5VGltZW91dDogMCxcbiAgICAgICAgbWF4UGFydGljaXBhbnRzOiAwLFxuICAgICAgICBub2RlSWQ6IFwiXCIsXG4gICAgICAgIG1ldGFkYXRhOiBcIlwiLFxuICAgICAgICBlZ3Jlc3M6IHVuZGVmaW5lZCxcbiAgICAgICAgbWluUGxheW91dERlbGF5OiAwLFxuICAgICAgICBtYXhQbGF5b3V0RGVsYXk6IDAsXG4gICAgICAgIHN5bmNTdHJlYW1zOiBmYWxzZSxcbiAgICB9O1xufVxuZXhwb3J0cy5DcmVhdGVSb29tUmVxdWVzdCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLm5hbWUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLm5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmVtcHR5VGltZW91dCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZW1wdHlUaW1lb3V0ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE2KS51aW50MzIobWVzc2FnZS5lbXB0eVRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm1heFBhcnRpY2lwYW50cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UubWF4UGFydGljaXBhbnRzICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI0KS51aW50MzIobWVzc2FnZS5tYXhQYXJ0aWNpcGFudHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm5vZGVJZCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uubm9kZUlkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcobWVzc2FnZS5ub2RlSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm1ldGFkYXRhICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5tZXRhZGF0YSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0Mikuc3RyaW5nKG1lc3NhZ2UubWV0YWRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmVncmVzcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlJvb21FZ3Jlc3MuZW5jb2RlKG1lc3NhZ2UuZWdyZXNzLCB3cml0ZXIudWludDMyKDUwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm1pblBsYXlvdXREZWxheSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UubWluUGxheW91dERlbGF5ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDU2KS51aW50MzIobWVzc2FnZS5taW5QbGF5b3V0RGVsYXkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm1heFBsYXlvdXREZWxheSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UubWF4UGxheW91dERlbGF5ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDY0KS51aW50MzIobWVzc2FnZS5tYXhQbGF5b3V0RGVsYXkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN5bmNTdHJlYW1zID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDcyKS5ib29sKG1lc3NhZ2Uuc3luY1N0cmVhbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUNyZWF0ZVJvb21SZXF1ZXN0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW1wdHlUaW1lb3V0ID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWF4UGFydGljaXBhbnRzID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uubm9kZUlkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWV0YWRhdGEgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lZ3Jlc3MgPSBleHBvcnRzLlJvb21FZ3Jlc3MuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1pblBsYXlvdXREZWxheSA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1heFBsYXlvdXREZWxheSA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN5bmNTdHJlYW1zID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogaXNTZXQob2JqZWN0Lm5hbWUpID8gU3RyaW5nKG9iamVjdC5uYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBlbXB0eVRpbWVvdXQ6IGlzU2V0KG9iamVjdC5lbXB0eVRpbWVvdXQpID8gTnVtYmVyKG9iamVjdC5lbXB0eVRpbWVvdXQpIDogMCxcbiAgICAgICAgICAgIG1heFBhcnRpY2lwYW50czogaXNTZXQob2JqZWN0Lm1heFBhcnRpY2lwYW50cykgPyBOdW1iZXIob2JqZWN0Lm1heFBhcnRpY2lwYW50cykgOiAwLFxuICAgICAgICAgICAgbm9kZUlkOiBpc1NldChvYmplY3Qubm9kZUlkKSA/IFN0cmluZyhvYmplY3Qubm9kZUlkKSA6IFwiXCIsXG4gICAgICAgICAgICBtZXRhZGF0YTogaXNTZXQob2JqZWN0Lm1ldGFkYXRhKSA/IFN0cmluZyhvYmplY3QubWV0YWRhdGEpIDogXCJcIixcbiAgICAgICAgICAgIGVncmVzczogaXNTZXQob2JqZWN0LmVncmVzcykgPyBleHBvcnRzLlJvb21FZ3Jlc3MuZnJvbUpTT04ob2JqZWN0LmVncmVzcykgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBtaW5QbGF5b3V0RGVsYXk6IGlzU2V0KG9iamVjdC5taW5QbGF5b3V0RGVsYXkpID8gTnVtYmVyKG9iamVjdC5taW5QbGF5b3V0RGVsYXkpIDogMCxcbiAgICAgICAgICAgIG1heFBsYXlvdXREZWxheTogaXNTZXQob2JqZWN0Lm1heFBsYXlvdXREZWxheSkgPyBOdW1iZXIob2JqZWN0Lm1heFBsYXlvdXREZWxheSkgOiAwLFxuICAgICAgICAgICAgc3luY1N0cmVhbXM6IGlzU2V0KG9iamVjdC5zeW5jU3RyZWFtcykgPyBCb29sZWFuKG9iamVjdC5zeW5jU3RyZWFtcykgOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLm5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLm5hbWUgPSBtZXNzYWdlLm5hbWUpO1xuICAgICAgICBtZXNzYWdlLmVtcHR5VGltZW91dCAhPT0gdW5kZWZpbmVkICYmIChvYmouZW1wdHlUaW1lb3V0ID0gTWF0aC5yb3VuZChtZXNzYWdlLmVtcHR5VGltZW91dCkpO1xuICAgICAgICBtZXNzYWdlLm1heFBhcnRpY2lwYW50cyAhPT0gdW5kZWZpbmVkICYmIChvYmoubWF4UGFydGljaXBhbnRzID0gTWF0aC5yb3VuZChtZXNzYWdlLm1heFBhcnRpY2lwYW50cykpO1xuICAgICAgICBtZXNzYWdlLm5vZGVJZCAhPT0gdW5kZWZpbmVkICYmIChvYmoubm9kZUlkID0gbWVzc2FnZS5ub2RlSWQpO1xuICAgICAgICBtZXNzYWdlLm1ldGFkYXRhICE9PSB1bmRlZmluZWQgJiYgKG9iai5tZXRhZGF0YSA9IG1lc3NhZ2UubWV0YWRhdGEpO1xuICAgICAgICBtZXNzYWdlLmVncmVzcyAhPT0gdW5kZWZpbmVkICYmIChvYmouZWdyZXNzID0gbWVzc2FnZS5lZ3Jlc3MgPyBleHBvcnRzLlJvb21FZ3Jlc3MudG9KU09OKG1lc3NhZ2UuZWdyZXNzKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UubWluUGxheW91dERlbGF5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5taW5QbGF5b3V0RGVsYXkgPSBNYXRoLnJvdW5kKG1lc3NhZ2UubWluUGxheW91dERlbGF5KSk7XG4gICAgICAgIG1lc3NhZ2UubWF4UGxheW91dERlbGF5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5tYXhQbGF5b3V0RGVsYXkgPSBNYXRoLnJvdW5kKG1lc3NhZ2UubWF4UGxheW91dERlbGF5KSk7XG4gICAgICAgIG1lc3NhZ2Uuc3luY1N0cmVhbXMgIT09IHVuZGVmaW5lZCAmJiAob2JqLnN5bmNTdHJlYW1zID0gbWVzc2FnZS5zeW5jU3RyZWFtcyk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VDcmVhdGVSb29tUmVxdWVzdCgpO1xuICAgICAgICBtZXNzYWdlLm5hbWUgPSAoX2EgPSBvYmplY3QubmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5lbXB0eVRpbWVvdXQgPSAoX2IgPSBvYmplY3QuZW1wdHlUaW1lb3V0KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwO1xuICAgICAgICBtZXNzYWdlLm1heFBhcnRpY2lwYW50cyA9IChfYyA9IG9iamVjdC5tYXhQYXJ0aWNpcGFudHMpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IDA7XG4gICAgICAgIG1lc3NhZ2Uubm9kZUlkID0gKF9kID0gb2JqZWN0Lm5vZGVJZCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5tZXRhZGF0YSA9IChfZSA9IG9iamVjdC5tZXRhZGF0YSkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5lZ3Jlc3MgPSAob2JqZWN0LmVncmVzcyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5lZ3Jlc3MgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuUm9vbUVncmVzcy5mcm9tUGFydGlhbChvYmplY3QuZWdyZXNzKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UubWluUGxheW91dERlbGF5ID0gKF9mID0gb2JqZWN0Lm1pblBsYXlvdXREZWxheSkgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogMDtcbiAgICAgICAgbWVzc2FnZS5tYXhQbGF5b3V0RGVsYXkgPSAoX2cgPSBvYmplY3QubWF4UGxheW91dERlbGF5KSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiAwO1xuICAgICAgICBtZXNzYWdlLnN5bmNTdHJlYW1zID0gKF9oID0gb2JqZWN0LnN5bmNTdHJlYW1zKSAhPT0gbnVsbCAmJiBfaCAhPT0gdm9pZCAwID8gX2ggOiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlUm9vbUVncmVzcygpIHtcbiAgICByZXR1cm4geyByb29tOiB1bmRlZmluZWQsIHBhcnRpY2lwYW50OiB1bmRlZmluZWQsIHRyYWNrczogdW5kZWZpbmVkIH07XG59XG5leHBvcnRzLlJvb21FZ3Jlc3MgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5yb29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxpdmVraXRfZWdyZXNzXzEuUm9vbUNvbXBvc2l0ZUVncmVzc1JlcXVlc3QuZW5jb2RlKG1lc3NhZ2Uucm9vbSwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wYXJ0aWNpcGFudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsaXZla2l0X2VncmVzc18xLkF1dG9QYXJ0aWNpcGFudEVncmVzcy5lbmNvZGUobWVzc2FnZS5wYXJ0aWNpcGFudCwgd3JpdGVyLnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS50cmFja3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGl2ZWtpdF9lZ3Jlc3NfMS5BdXRvVHJhY2tFZ3Jlc3MuZW5jb2RlKG1lc3NhZ2UudHJhY2tzLCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVJvb21FZ3Jlc3MoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvb20gPSBsaXZla2l0X2VncmVzc18xLlJvb21Db21wb3NpdGVFZ3Jlc3NSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudCA9IGxpdmVraXRfZWdyZXNzXzEuQXV0b1BhcnRpY2lwYW50RWdyZXNzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmFja3MgPSBsaXZla2l0X2VncmVzc18xLkF1dG9UcmFja0VncmVzcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb29tOiBpc1NldChvYmplY3Qucm9vbSkgPyBsaXZla2l0X2VncmVzc18xLlJvb21Db21wb3NpdGVFZ3Jlc3NSZXF1ZXN0LmZyb21KU09OKG9iamVjdC5yb29tKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHBhcnRpY2lwYW50OiBpc1NldChvYmplY3QucGFydGljaXBhbnQpID8gbGl2ZWtpdF9lZ3Jlc3NfMS5BdXRvUGFydGljaXBhbnRFZ3Jlc3MuZnJvbUpTT04ob2JqZWN0LnBhcnRpY2lwYW50KSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHRyYWNrczogaXNTZXQob2JqZWN0LnRyYWNrcykgPyBsaXZla2l0X2VncmVzc18xLkF1dG9UcmFja0VncmVzcy5mcm9tSlNPTihvYmplY3QudHJhY2tzKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnJvb20gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5yb29tID0gbWVzc2FnZS5yb29tID8gbGl2ZWtpdF9lZ3Jlc3NfMS5Sb29tQ29tcG9zaXRlRWdyZXNzUmVxdWVzdC50b0pTT04obWVzc2FnZS5yb29tKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5wYXJ0aWNpcGFudCA9IG1lc3NhZ2UucGFydGljaXBhbnQgPyBsaXZla2l0X2VncmVzc18xLkF1dG9QYXJ0aWNpcGFudEVncmVzcy50b0pTT04obWVzc2FnZS5wYXJ0aWNpcGFudCkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLnRyYWNrcyAhPT0gdW5kZWZpbmVkICYmIChvYmoudHJhY2tzID0gbWVzc2FnZS50cmFja3MgPyBsaXZla2l0X2VncmVzc18xLkF1dG9UcmFja0VncmVzcy50b0pTT04obWVzc2FnZS50cmFja3MpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVJvb21FZ3Jlc3MoKTtcbiAgICAgICAgbWVzc2FnZS5yb29tID0gKG9iamVjdC5yb29tICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnJvb20gIT09IG51bGwpXG4gICAgICAgICAgICA/IGxpdmVraXRfZWdyZXNzXzEuUm9vbUNvbXBvc2l0ZUVncmVzc1JlcXVlc3QuZnJvbVBhcnRpYWwob2JqZWN0LnJvb20pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudCA9IChvYmplY3QucGFydGljaXBhbnQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucGFydGljaXBhbnQgIT09IG51bGwpXG4gICAgICAgICAgICA/IGxpdmVraXRfZWdyZXNzXzEuQXV0b1BhcnRpY2lwYW50RWdyZXNzLmZyb21QYXJ0aWFsKG9iamVjdC5wYXJ0aWNpcGFudClcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLnRyYWNrcyA9IChvYmplY3QudHJhY2tzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnRyYWNrcyAhPT0gbnVsbClcbiAgICAgICAgICAgID8gbGl2ZWtpdF9lZ3Jlc3NfMS5BdXRvVHJhY2tFZ3Jlc3MuZnJvbVBhcnRpYWwob2JqZWN0LnRyYWNrcylcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VMaXN0Um9vbXNSZXF1ZXN0KCkge1xuICAgIHJldHVybiB7IG5hbWVzOiBbXSB9O1xufVxuZXhwb3J0cy5MaXN0Um9vbXNSZXF1ZXN0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UubmFtZXMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLm5hbWVzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UubmFtZXMpIHtcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcodik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTGlzdFJvb21zUmVxdWVzdCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubmFtZXMucHVzaChyZWFkZXIuc3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7IG5hbWVzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5uYW1lcykgPyBvYmplY3QubmFtZXMubWFwKChlKSA9PiBTdHJpbmcoZSkpIDogW10gfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBpZiAobWVzc2FnZS5uYW1lcykge1xuICAgICAgICAgICAgb2JqLm5hbWVzID0gbWVzc2FnZS5uYW1lcy5tYXAoKGUpID0+IGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLm5hbWVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTGlzdFJvb21zUmVxdWVzdCgpO1xuICAgICAgICBtZXNzYWdlLm5hbWVzID0gKChfYSA9IG9iamVjdC5uYW1lcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hcCgoZSkgPT4gZSkpIHx8IFtdO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VMaXN0Um9vbXNSZXNwb25zZSgpIHtcbiAgICByZXR1cm4geyByb29tczogW10gfTtcbn1cbmV4cG9ydHMuTGlzdFJvb21zUmVzcG9uc2UgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5yb29tcyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uucm9vbXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5yb29tcykge1xuICAgICAgICAgICAgICAgIGxpdmVraXRfbW9kZWxzXzEuUm9vbS5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VMaXN0Um9vbXNSZXNwb25zZSgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbXMucHVzaChsaXZla2l0X21vZGVsc18xLlJvb20uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHsgcm9vbXM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LnJvb21zKSA/IG9iamVjdC5yb29tcy5tYXAoKGUpID0+IGxpdmVraXRfbW9kZWxzXzEuUm9vbS5mcm9tSlNPTihlKSkgOiBbXSB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb21zKSB7XG4gICAgICAgICAgICBvYmoucm9vbXMgPSBtZXNzYWdlLnJvb21zLm1hcCgoZSkgPT4gZSA/IGxpdmVraXRfbW9kZWxzXzEuUm9vbS50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLnJvb21zID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTGlzdFJvb21zUmVzcG9uc2UoKTtcbiAgICAgICAgbWVzc2FnZS5yb29tcyA9ICgoX2EgPSBvYmplY3Qucm9vbXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYXAoKGUpID0+IGxpdmVraXRfbW9kZWxzXzEuUm9vbS5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VEZWxldGVSb29tUmVxdWVzdCgpIHtcbiAgICByZXR1cm4geyByb29tOiBcIlwiIH07XG59XG5leHBvcnRzLkRlbGV0ZVJvb21SZXF1ZXN0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vbSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uucm9vbSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2Uucm9vbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlRGVsZXRlUm9vbVJlcXVlc3QoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvb20gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHsgcm9vbTogaXNTZXQob2JqZWN0LnJvb20pID8gU3RyaW5nKG9iamVjdC5yb29tKSA6IFwiXCIgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnJvb20gIT09IHVuZGVmaW5lZCAmJiAob2JqLnJvb20gPSBtZXNzYWdlLnJvb20pO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VEZWxldGVSb29tUmVxdWVzdCgpO1xuICAgICAgICBtZXNzYWdlLnJvb20gPSAoX2EgPSBvYmplY3Qucm9vbSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlRGVsZXRlUm9vbVJlc3BvbnNlKCkge1xuICAgIHJldHVybiB7fTtcbn1cbmV4cG9ydHMuRGVsZXRlUm9vbVJlc3BvbnNlID0ge1xuICAgIGVuY29kZShfLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlRGVsZXRlUm9vbVJlc3BvbnNlKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihfKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9LFxuICAgIHRvSlNPTihfKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwoXykge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZURlbGV0ZVJvb21SZXNwb25zZSgpO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VMaXN0UGFydGljaXBhbnRzUmVxdWVzdCgpIHtcbiAgICByZXR1cm4geyByb29tOiBcIlwiIH07XG59XG5leHBvcnRzLkxpc3RQYXJ0aWNpcGFudHNSZXF1ZXN0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vbSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uucm9vbSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2Uucm9vbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTGlzdFBhcnRpY2lwYW50c1JlcXVlc3QoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvb20gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHsgcm9vbTogaXNTZXQob2JqZWN0LnJvb20pID8gU3RyaW5nKG9iamVjdC5yb29tKSA6IFwiXCIgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnJvb20gIT09IHVuZGVmaW5lZCAmJiAob2JqLnJvb20gPSBtZXNzYWdlLnJvb20pO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VMaXN0UGFydGljaXBhbnRzUmVxdWVzdCgpO1xuICAgICAgICBtZXNzYWdlLnJvb20gPSAoX2EgPSBvYmplY3Qucm9vbSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlTGlzdFBhcnRpY2lwYW50c1Jlc3BvbnNlKCkge1xuICAgIHJldHVybiB7IHBhcnRpY2lwYW50czogW10gfTtcbn1cbmV4cG9ydHMuTGlzdFBhcnRpY2lwYW50c1Jlc3BvbnNlID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGFydGljaXBhbnRzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5wYXJ0aWNpcGFudHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5wYXJ0aWNpcGFudHMpIHtcbiAgICAgICAgICAgICAgICBsaXZla2l0X21vZGVsc18xLlBhcnRpY2lwYW50SW5mby5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VMaXN0UGFydGljaXBhbnRzUmVzcG9uc2UoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50cy5wdXNoKGxpdmVraXRfbW9kZWxzXzEuUGFydGljaXBhbnRJbmZvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwYXJ0aWNpcGFudHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LnBhcnRpY2lwYW50cylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5wYXJ0aWNpcGFudHMubWFwKChlKSA9PiBsaXZla2l0X21vZGVsc18xLlBhcnRpY2lwYW50SW5mby5mcm9tSlNPTihlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIGlmIChtZXNzYWdlLnBhcnRpY2lwYW50cykge1xuICAgICAgICAgICAgb2JqLnBhcnRpY2lwYW50cyA9IG1lc3NhZ2UucGFydGljaXBhbnRzLm1hcCgoZSkgPT4gZSA/IGxpdmVraXRfbW9kZWxzXzEuUGFydGljaXBhbnRJbmZvLnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmoucGFydGljaXBhbnRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTGlzdFBhcnRpY2lwYW50c1Jlc3BvbnNlKCk7XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnRzID0gKChfYSA9IG9iamVjdC5wYXJ0aWNpcGFudHMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYXAoKGUpID0+IGxpdmVraXRfbW9kZWxzXzEuUGFydGljaXBhbnRJbmZvLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVJvb21QYXJ0aWNpcGFudElkZW50aXR5KCkge1xuICAgIHJldHVybiB7IHJvb206IFwiXCIsIGlkZW50aXR5OiBcIlwiIH07XG59XG5leHBvcnRzLlJvb21QYXJ0aWNpcGFudElkZW50aXR5ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vbSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uucm9vbSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2Uucm9vbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaWRlbnRpdHkgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmlkZW50aXR5ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5pZGVudGl0eSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUm9vbVBhcnRpY2lwYW50SWRlbnRpdHkoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvb20gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pZGVudGl0eSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcm9vbTogaXNTZXQob2JqZWN0LnJvb20pID8gU3RyaW5nKG9iamVjdC5yb29tKSA6IFwiXCIsXG4gICAgICAgICAgICBpZGVudGl0eTogaXNTZXQob2JqZWN0LmlkZW50aXR5KSA/IFN0cmluZyhvYmplY3QuaWRlbnRpdHkpIDogXCJcIixcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnJvb20gIT09IHVuZGVmaW5lZCAmJiAob2JqLnJvb20gPSBtZXNzYWdlLnJvb20pO1xuICAgICAgICBtZXNzYWdlLmlkZW50aXR5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5pZGVudGl0eSA9IG1lc3NhZ2UuaWRlbnRpdHkpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUm9vbVBhcnRpY2lwYW50SWRlbnRpdHkoKTtcbiAgICAgICAgbWVzc2FnZS5yb29tID0gKF9hID0gb2JqZWN0LnJvb20pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuaWRlbnRpdHkgPSAoX2IgPSBvYmplY3QuaWRlbnRpdHkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVJlbW92ZVBhcnRpY2lwYW50UmVzcG9uc2UoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuZXhwb3J0cy5SZW1vdmVQYXJ0aWNpcGFudFJlc3BvbnNlID0ge1xuICAgIGVuY29kZShfLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUmVtb3ZlUGFydGljaXBhbnRSZXNwb25zZSgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04oXykge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfSxcbiAgICB0b0pTT04oXykge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKF8pIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSZW1vdmVQYXJ0aWNpcGFudFJlc3BvbnNlKCk7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZU11dGVSb29tVHJhY2tSZXF1ZXN0KCkge1xuICAgIHJldHVybiB7IHJvb206IFwiXCIsIGlkZW50aXR5OiBcIlwiLCB0cmFja1NpZDogXCJcIiwgbXV0ZWQ6IGZhbHNlIH07XG59XG5leHBvcnRzLk11dGVSb29tVHJhY2tSZXF1ZXN0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vbSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uucm9vbSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2Uucm9vbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaWRlbnRpdHkgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmlkZW50aXR5ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5pZGVudGl0eSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudHJhY2tTaWQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnRyYWNrU2lkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS50cmFja1NpZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubXV0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzIpLmJvb2wobWVzc2FnZS5tdXRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTXV0ZVJvb21UcmFja1JlcXVlc3QoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvb20gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pZGVudGl0eSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRyYWNrU2lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubXV0ZWQgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb29tOiBpc1NldChvYmplY3Qucm9vbSkgPyBTdHJpbmcob2JqZWN0LnJvb20pIDogXCJcIixcbiAgICAgICAgICAgIGlkZW50aXR5OiBpc1NldChvYmplY3QuaWRlbnRpdHkpID8gU3RyaW5nKG9iamVjdC5pZGVudGl0eSkgOiBcIlwiLFxuICAgICAgICAgICAgdHJhY2tTaWQ6IGlzU2V0KG9iamVjdC50cmFja1NpZCkgPyBTdHJpbmcob2JqZWN0LnRyYWNrU2lkKSA6IFwiXCIsXG4gICAgICAgICAgICBtdXRlZDogaXNTZXQob2JqZWN0Lm11dGVkKSA/IEJvb2xlYW4ob2JqZWN0Lm11dGVkKSA6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2Uucm9vbSAhPT0gdW5kZWZpbmVkICYmIChvYmoucm9vbSA9IG1lc3NhZ2Uucm9vbSk7XG4gICAgICAgIG1lc3NhZ2UuaWRlbnRpdHkgIT09IHVuZGVmaW5lZCAmJiAob2JqLmlkZW50aXR5ID0gbWVzc2FnZS5pZGVudGl0eSk7XG4gICAgICAgIG1lc3NhZ2UudHJhY2tTaWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnRyYWNrU2lkID0gbWVzc2FnZS50cmFja1NpZCk7XG4gICAgICAgIG1lc3NhZ2UubXV0ZWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLm11dGVkID0gbWVzc2FnZS5tdXRlZCk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZU11dGVSb29tVHJhY2tSZXF1ZXN0KCk7XG4gICAgICAgIG1lc3NhZ2Uucm9vbSA9IChfYSA9IG9iamVjdC5yb29tKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmlkZW50aXR5ID0gKF9iID0gb2JqZWN0LmlkZW50aXR5KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnRyYWNrU2lkID0gKF9jID0gb2JqZWN0LnRyYWNrU2lkKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLm11dGVkID0gKF9kID0gb2JqZWN0Lm11dGVkKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlTXV0ZVJvb21UcmFja1Jlc3BvbnNlKCkge1xuICAgIHJldHVybiB7IHRyYWNrOiB1bmRlZmluZWQgfTtcbn1cbmV4cG9ydHMuTXV0ZVJvb21UcmFja1Jlc3BvbnNlID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UudHJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGl2ZWtpdF9tb2RlbHNfMS5UcmFja0luZm8uZW5jb2RlKG1lc3NhZ2UudHJhY2ssIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTXV0ZVJvb21UcmFja1Jlc3BvbnNlKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmFjayA9IGxpdmVraXRfbW9kZWxzXzEuVHJhY2tJbmZvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHsgdHJhY2s6IGlzU2V0KG9iamVjdC50cmFjaykgPyBsaXZla2l0X21vZGVsc18xLlRyYWNrSW5mby5mcm9tSlNPTihvYmplY3QudHJhY2spIDogdW5kZWZpbmVkIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS50cmFjayAhPT0gdW5kZWZpbmVkICYmIChvYmoudHJhY2sgPSBtZXNzYWdlLnRyYWNrID8gbGl2ZWtpdF9tb2RlbHNfMS5UcmFja0luZm8udG9KU09OKG1lc3NhZ2UudHJhY2spIDogdW5kZWZpbmVkKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZU11dGVSb29tVHJhY2tSZXNwb25zZSgpO1xuICAgICAgICBtZXNzYWdlLnRyYWNrID0gKG9iamVjdC50cmFjayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC50cmFjayAhPT0gbnVsbClcbiAgICAgICAgICAgID8gbGl2ZWtpdF9tb2RlbHNfMS5UcmFja0luZm8uZnJvbVBhcnRpYWwob2JqZWN0LnRyYWNrKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVVwZGF0ZVBhcnRpY2lwYW50UmVxdWVzdCgpIHtcbiAgICByZXR1cm4geyByb29tOiBcIlwiLCBpZGVudGl0eTogXCJcIiwgbWV0YWRhdGE6IFwiXCIsIHBlcm1pc3Npb246IHVuZGVmaW5lZCwgbmFtZTogXCJcIiB9O1xufVxuZXhwb3J0cy5VcGRhdGVQYXJ0aWNpcGFudFJlcXVlc3QgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5yb29tICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yb29tICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5yb29tKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5pZGVudGl0eSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaWRlbnRpdHkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLmlkZW50aXR5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5tZXRhZGF0YSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UubWV0YWRhdGEgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLm1ldGFkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wZXJtaXNzaW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxpdmVraXRfbW9kZWxzXzEuUGFydGljaXBhbnRQZXJtaXNzaW9uLmVuY29kZShtZXNzYWdlLnBlcm1pc3Npb24sIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubmFtZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UubmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0Mikuc3RyaW5nKG1lc3NhZ2UubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVXBkYXRlUGFydGljaXBhbnRSZXF1ZXN0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb29tID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWRlbnRpdHkgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZXRhZGF0YSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBlcm1pc3Npb24gPSBsaXZla2l0X21vZGVsc18xLlBhcnRpY2lwYW50UGVybWlzc2lvbi5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcm9vbTogaXNTZXQob2JqZWN0LnJvb20pID8gU3RyaW5nKG9iamVjdC5yb29tKSA6IFwiXCIsXG4gICAgICAgICAgICBpZGVudGl0eTogaXNTZXQob2JqZWN0LmlkZW50aXR5KSA/IFN0cmluZyhvYmplY3QuaWRlbnRpdHkpIDogXCJcIixcbiAgICAgICAgICAgIG1ldGFkYXRhOiBpc1NldChvYmplY3QubWV0YWRhdGEpID8gU3RyaW5nKG9iamVjdC5tZXRhZGF0YSkgOiBcIlwiLFxuICAgICAgICAgICAgcGVybWlzc2lvbjogaXNTZXQob2JqZWN0LnBlcm1pc3Npb24pID8gbGl2ZWtpdF9tb2RlbHNfMS5QYXJ0aWNpcGFudFBlcm1pc3Npb24uZnJvbUpTT04ob2JqZWN0LnBlcm1pc3Npb24pIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgbmFtZTogaXNTZXQob2JqZWN0Lm5hbWUpID8gU3RyaW5nKG9iamVjdC5uYW1lKSA6IFwiXCIsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5yb29tICE9PSB1bmRlZmluZWQgJiYgKG9iai5yb29tID0gbWVzc2FnZS5yb29tKTtcbiAgICAgICAgbWVzc2FnZS5pZGVudGl0eSAhPT0gdW5kZWZpbmVkICYmIChvYmouaWRlbnRpdHkgPSBtZXNzYWdlLmlkZW50aXR5KTtcbiAgICAgICAgbWVzc2FnZS5tZXRhZGF0YSAhPT0gdW5kZWZpbmVkICYmIChvYmoubWV0YWRhdGEgPSBtZXNzYWdlLm1ldGFkYXRhKTtcbiAgICAgICAgbWVzc2FnZS5wZXJtaXNzaW9uICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmoucGVybWlzc2lvbiA9IG1lc3NhZ2UucGVybWlzc2lvbiA/IGxpdmVraXRfbW9kZWxzXzEuUGFydGljaXBhbnRQZXJtaXNzaW9uLnRvSlNPTihtZXNzYWdlLnBlcm1pc3Npb24pIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5uYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5uYW1lID0gbWVzc2FnZS5uYW1lKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVXBkYXRlUGFydGljaXBhbnRSZXF1ZXN0KCk7XG4gICAgICAgIG1lc3NhZ2Uucm9vbSA9IChfYSA9IG9iamVjdC5yb29tKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmlkZW50aXR5ID0gKF9iID0gb2JqZWN0LmlkZW50aXR5KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLm1ldGFkYXRhID0gKF9jID0gb2JqZWN0Lm1ldGFkYXRhKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnBlcm1pc3Npb24gPSAob2JqZWN0LnBlcm1pc3Npb24gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucGVybWlzc2lvbiAhPT0gbnVsbClcbiAgICAgICAgICAgID8gbGl2ZWtpdF9tb2RlbHNfMS5QYXJ0aWNpcGFudFBlcm1pc3Npb24uZnJvbVBhcnRpYWwob2JqZWN0LnBlcm1pc3Npb24pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5uYW1lID0gKF9kID0gb2JqZWN0Lm5hbWUpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IFwiXCI7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0KCkge1xuICAgIHJldHVybiB7IHJvb206IFwiXCIsIGlkZW50aXR5OiBcIlwiLCB0cmFja1NpZHM6IFtdLCBzdWJzY3JpYmU6IGZhbHNlLCBwYXJ0aWNpcGFudFRyYWNrczogW10gfTtcbn1cbmV4cG9ydHMuVXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3QgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5yb29tICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yb29tICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5yb29tKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5pZGVudGl0eSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaWRlbnRpdHkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLmlkZW50aXR5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS50cmFja1NpZHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnRyYWNrU2lkcy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLnRyYWNrU2lkcykge1xuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyh2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zdWJzY3JpYmUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzIpLmJvb2wobWVzc2FnZS5zdWJzY3JpYmUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBhcnRpY2lwYW50VHJhY2tzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5wYXJ0aWNpcGFudFRyYWNrcy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLnBhcnRpY2lwYW50VHJhY2tzKSB7XG4gICAgICAgICAgICAgICAgbGl2ZWtpdF9tb2RlbHNfMS5QYXJ0aWNpcGFudFRyYWNrcy5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMig0MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VVcGRhdGVTdWJzY3JpcHRpb25zUmVxdWVzdCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlkZW50aXR5ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJhY2tTaWRzLnB1c2gocmVhZGVyLnN0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN1YnNjcmliZSA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudFRyYWNrcy5wdXNoKGxpdmVraXRfbW9kZWxzXzEuUGFydGljaXBhbnRUcmFja3MuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJvb206IGlzU2V0KG9iamVjdC5yb29tKSA/IFN0cmluZyhvYmplY3Qucm9vbSkgOiBcIlwiLFxuICAgICAgICAgICAgaWRlbnRpdHk6IGlzU2V0KG9iamVjdC5pZGVudGl0eSkgPyBTdHJpbmcob2JqZWN0LmlkZW50aXR5KSA6IFwiXCIsXG4gICAgICAgICAgICB0cmFja1NpZHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LnRyYWNrU2lkcykgPyBvYmplY3QudHJhY2tTaWRzLm1hcCgoZSkgPT4gU3RyaW5nKGUpKSA6IFtdLFxuICAgICAgICAgICAgc3Vic2NyaWJlOiBpc1NldChvYmplY3Quc3Vic2NyaWJlKSA/IEJvb2xlYW4ob2JqZWN0LnN1YnNjcmliZSkgOiBmYWxzZSxcbiAgICAgICAgICAgIHBhcnRpY2lwYW50VHJhY2tzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5wYXJ0aWNpcGFudFRyYWNrcylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5wYXJ0aWNpcGFudFRyYWNrcy5tYXAoKGUpID0+IGxpdmVraXRfbW9kZWxzXzEuUGFydGljaXBhbnRUcmFja3MuZnJvbUpTT04oZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnJvb20gIT09IHVuZGVmaW5lZCAmJiAob2JqLnJvb20gPSBtZXNzYWdlLnJvb20pO1xuICAgICAgICBtZXNzYWdlLmlkZW50aXR5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5pZGVudGl0eSA9IG1lc3NhZ2UuaWRlbnRpdHkpO1xuICAgICAgICBpZiAobWVzc2FnZS50cmFja1NpZHMpIHtcbiAgICAgICAgICAgIG9iai50cmFja1NpZHMgPSBtZXNzYWdlLnRyYWNrU2lkcy5tYXAoKGUpID0+IGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLnRyYWNrU2lkcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIG1lc3NhZ2Uuc3Vic2NyaWJlICE9PSB1bmRlZmluZWQgJiYgKG9iai5zdWJzY3JpYmUgPSBtZXNzYWdlLnN1YnNjcmliZSk7XG4gICAgICAgIGlmIChtZXNzYWdlLnBhcnRpY2lwYW50VHJhY2tzKSB7XG4gICAgICAgICAgICBvYmoucGFydGljaXBhbnRUcmFja3MgPSBtZXNzYWdlLnBhcnRpY2lwYW50VHJhY2tzLm1hcCgoZSkgPT4gZSA/IGxpdmVraXRfbW9kZWxzXzEuUGFydGljaXBhbnRUcmFja3MudG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5wYXJ0aWNpcGFudFRyYWNrcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VVcGRhdGVTdWJzY3JpcHRpb25zUmVxdWVzdCgpO1xuICAgICAgICBtZXNzYWdlLnJvb20gPSAoX2EgPSBvYmplY3Qucm9vbSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5pZGVudGl0eSA9IChfYiA9IG9iamVjdC5pZGVudGl0eSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS50cmFja1NpZHMgPSAoKF9jID0gb2JqZWN0LnRyYWNrU2lkcykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLm1hcCgoZSkgPT4gZSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLnN1YnNjcmliZSA9IChfZCA9IG9iamVjdC5zdWJzY3JpYmUpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50VHJhY2tzID0gKChfZSA9IG9iamVjdC5wYXJ0aWNpcGFudFRyYWNrcykgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLm1hcCgoZSkgPT4gbGl2ZWtpdF9tb2RlbHNfMS5QYXJ0aWNpcGFudFRyYWNrcy5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VVcGRhdGVTdWJzY3JpcHRpb25zUmVzcG9uc2UoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuZXhwb3J0cy5VcGRhdGVTdWJzY3JpcHRpb25zUmVzcG9uc2UgPSB7XG4gICAgZW5jb2RlKF8sIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VVcGRhdGVTdWJzY3JpcHRpb25zUmVzcG9uc2UoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKF8pIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH0sXG4gICAgdG9KU09OKF8pIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChfKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVXBkYXRlU3Vic2NyaXB0aW9uc1Jlc3BvbnNlKCk7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVNlbmREYXRhUmVxdWVzdCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByb29tOiBcIlwiLFxuICAgICAgICBkYXRhOiBuZXcgVWludDhBcnJheSgpLFxuICAgICAgICBraW5kOiAwLFxuICAgICAgICBkZXN0aW5hdGlvblNpZHM6IFtdLFxuICAgICAgICBkZXN0aW5hdGlvbklkZW50aXRpZXM6IFtdLFxuICAgICAgICB0b3BpYzogdW5kZWZpbmVkLFxuICAgIH07XG59XG5leHBvcnRzLlNlbmREYXRhUmVxdWVzdCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb20gIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnJvb20gIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLnJvb20pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmRhdGEgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmRhdGEubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5ieXRlcyhtZXNzYWdlLmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmtpbmQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmtpbmQgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjQpLmludDMyKG1lc3NhZ2Uua2luZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZGVzdGluYXRpb25TaWRzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5kZXN0aW5hdGlvblNpZHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5kZXN0aW5hdGlvblNpZHMpIHtcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcodik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZGVzdGluYXRpb25JZGVudGl0aWVzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5kZXN0aW5hdGlvbklkZW50aXRpZXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5kZXN0aW5hdGlvbklkZW50aXRpZXMpIHtcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKDUwKS5zdHJpbmcodik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudG9waWMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0Mikuc3RyaW5nKG1lc3NhZ2UudG9waWMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVNlbmREYXRhUmVxdWVzdCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRhdGEgPSByZWFkZXIuYnl0ZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmtpbmQgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlc3RpbmF0aW9uU2lkcy5wdXNoKHJlYWRlci5zdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZXN0aW5hdGlvbklkZW50aXRpZXMucHVzaChyZWFkZXIuc3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudG9waWMgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJvb206IGlzU2V0KG9iamVjdC5yb29tKSA/IFN0cmluZyhvYmplY3Qucm9vbSkgOiBcIlwiLFxuICAgICAgICAgICAgZGF0YTogaXNTZXQob2JqZWN0LmRhdGEpID8gYnl0ZXNGcm9tQmFzZTY0KG9iamVjdC5kYXRhKSA6IG5ldyBVaW50OEFycmF5KCksXG4gICAgICAgICAgICBraW5kOiBpc1NldChvYmplY3Qua2luZCkgPyBsaXZla2l0X21vZGVsc18xLmRhdGFQYWNrZXRfS2luZEZyb21KU09OKG9iamVjdC5raW5kKSA6IDAsXG4gICAgICAgICAgICBkZXN0aW5hdGlvblNpZHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmRlc3RpbmF0aW9uU2lkcykgPyBvYmplY3QuZGVzdGluYXRpb25TaWRzLm1hcCgoZSkgPT4gU3RyaW5nKGUpKSA6IFtdLFxuICAgICAgICAgICAgZGVzdGluYXRpb25JZGVudGl0aWVzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5kZXN0aW5hdGlvbklkZW50aXRpZXMpXG4gICAgICAgICAgICAgICAgPyBvYmplY3QuZGVzdGluYXRpb25JZGVudGl0aWVzLm1hcCgoZSkgPT4gU3RyaW5nKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgICAgICB0b3BpYzogaXNTZXQob2JqZWN0LnRvcGljKSA/IFN0cmluZyhvYmplY3QudG9waWMpIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2Uucm9vbSAhPT0gdW5kZWZpbmVkICYmIChvYmoucm9vbSA9IG1lc3NhZ2Uucm9vbSk7XG4gICAgICAgIG1lc3NhZ2UuZGF0YSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLmRhdGEgPSBiYXNlNjRGcm9tQnl0ZXMobWVzc2FnZS5kYXRhICE9PSB1bmRlZmluZWQgPyBtZXNzYWdlLmRhdGEgOiBuZXcgVWludDhBcnJheSgpKSk7XG4gICAgICAgIG1lc3NhZ2Uua2luZCAhPT0gdW5kZWZpbmVkICYmIChvYmoua2luZCA9IGxpdmVraXRfbW9kZWxzXzEuZGF0YVBhY2tldF9LaW5kVG9KU09OKG1lc3NhZ2Uua2luZCkpO1xuICAgICAgICBpZiAobWVzc2FnZS5kZXN0aW5hdGlvblNpZHMpIHtcbiAgICAgICAgICAgIG9iai5kZXN0aW5hdGlvblNpZHMgPSBtZXNzYWdlLmRlc3RpbmF0aW9uU2lkcy5tYXAoKGUpID0+IGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLmRlc3RpbmF0aW9uU2lkcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmRlc3RpbmF0aW9uSWRlbnRpdGllcykge1xuICAgICAgICAgICAgb2JqLmRlc3RpbmF0aW9uSWRlbnRpdGllcyA9IG1lc3NhZ2UuZGVzdGluYXRpb25JZGVudGl0aWVzLm1hcCgoZSkgPT4gZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouZGVzdGluYXRpb25JZGVudGl0aWVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgbWVzc2FnZS50b3BpYyAhPT0gdW5kZWZpbmVkICYmIChvYmoudG9waWMgPSBtZXNzYWdlLnRvcGljKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTZW5kRGF0YVJlcXVlc3QoKTtcbiAgICAgICAgbWVzc2FnZS5yb29tID0gKF9hID0gb2JqZWN0LnJvb20pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuZGF0YSA9IChfYiA9IG9iamVjdC5kYXRhKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBuZXcgVWludDhBcnJheSgpO1xuICAgICAgICBtZXNzYWdlLmtpbmQgPSAoX2MgPSBvYmplY3Qua2luZCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMDtcbiAgICAgICAgbWVzc2FnZS5kZXN0aW5hdGlvblNpZHMgPSAoKF9kID0gb2JqZWN0LmRlc3RpbmF0aW9uU2lkcykgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLm1hcCgoZSkgPT4gZSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLmRlc3RpbmF0aW9uSWRlbnRpdGllcyA9ICgoX2UgPSBvYmplY3QuZGVzdGluYXRpb25JZGVudGl0aWVzKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UubWFwKChlKSA9PiBlKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2UudG9waWMgPSAoX2YgPSBvYmplY3QudG9waWMpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlU2VuZERhdGFSZXNwb25zZSgpIHtcbiAgICByZXR1cm4ge307XG59XG5leHBvcnRzLlNlbmREYXRhUmVzcG9uc2UgPSB7XG4gICAgZW5jb2RlKF8sIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTZW5kRGF0YVJlc3BvbnNlKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihfKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9LFxuICAgIHRvSlNPTihfKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwoXykge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVNlbmREYXRhUmVzcG9uc2UoKTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVXBkYXRlUm9vbU1ldGFkYXRhUmVxdWVzdCgpIHtcbiAgICByZXR1cm4geyByb29tOiBcIlwiLCBtZXRhZGF0YTogXCJcIiB9O1xufVxuZXhwb3J0cy5VcGRhdGVSb29tTWV0YWRhdGFSZXF1ZXN0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vbSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uucm9vbSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2Uucm9vbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubWV0YWRhdGEgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLm1ldGFkYXRhICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5tZXRhZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVXBkYXRlUm9vbU1ldGFkYXRhUmVxdWVzdCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1ldGFkYXRhID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb29tOiBpc1NldChvYmplY3Qucm9vbSkgPyBTdHJpbmcob2JqZWN0LnJvb20pIDogXCJcIixcbiAgICAgICAgICAgIG1ldGFkYXRhOiBpc1NldChvYmplY3QubWV0YWRhdGEpID8gU3RyaW5nKG9iamVjdC5tZXRhZGF0YSkgOiBcIlwiLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2Uucm9vbSAhPT0gdW5kZWZpbmVkICYmIChvYmoucm9vbSA9IG1lc3NhZ2Uucm9vbSk7XG4gICAgICAgIG1lc3NhZ2UubWV0YWRhdGEgIT09IHVuZGVmaW5lZCAmJiAob2JqLm1ldGFkYXRhID0gbWVzc2FnZS5tZXRhZGF0YSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VVcGRhdGVSb29tTWV0YWRhdGFSZXF1ZXN0KCk7XG4gICAgICAgIG1lc3NhZ2Uucm9vbSA9IChfYSA9IG9iamVjdC5yb29tKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLm1ldGFkYXRhID0gKF9iID0gb2JqZWN0Lm1ldGFkYXRhKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbnZhciBnbG9iYWxUaGlzID0gKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbFRoaXM7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG4gICAgdGhyb3cgXCJVbmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3RcIjtcbn0pKCk7XG5mdW5jdGlvbiBieXRlc0Zyb21CYXNlNjQoYjY0KSB7XG4gICAgaWYgKGdsb2JhbFRoaXMuQnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LmZyb20oZ2xvYmFsVGhpcy5CdWZmZXIuZnJvbShiNjQsIFwiYmFzZTY0XCIpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGJpbiA9IGdsb2JhbFRoaXMuYXRvYihiNjQpO1xuICAgICAgICBjb25zdCBhcnIgPSBuZXcgVWludDhBcnJheShiaW4ubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGFycltpXSA9IGJpbi5jaGFyQ29kZUF0KGkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgfVxufVxuZnVuY3Rpb24gYmFzZTY0RnJvbUJ5dGVzKGFycikge1xuICAgIGlmIChnbG9iYWxUaGlzLkJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gZ2xvYmFsVGhpcy5CdWZmZXIuZnJvbShhcnIpLnRvU3RyaW5nKFwiYmFzZTY0XCIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgYmluID0gW107XG4gICAgICAgIGFyci5mb3JFYWNoKChieXRlKSA9PiB7XG4gICAgICAgICAgICBiaW4ucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGUpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBnbG9iYWxUaGlzLmJ0b2EoYmluLmpvaW4oXCJcIikpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzU2V0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXZla2l0X3Jvb20uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_room.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_webhook.js":
/*!***********************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/proto/livekit_webhook.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.WebhookEvent = exports.protobufPackage = void 0;\n/* eslint-disable */\nconst long_1 = __importDefault(__webpack_require__(/*! long */ \"(ssr)/./node_modules/long/umd/index.js\"));\nconst minimal_1 = __importDefault(__webpack_require__(/*! protobufjs/minimal */ \"(ssr)/./node_modules/protobufjs/minimal.js\"));\nconst livekit_egress_1 = __webpack_require__(/*! ./livekit_egress */ \"(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_egress.js\");\nconst livekit_ingress_1 = __webpack_require__(/*! ./livekit_ingress */ \"(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_ingress.js\");\nconst livekit_models_1 = __webpack_require__(/*! ./livekit_models */ \"(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_models.js\");\nexports.protobufPackage = \"livekit\";\nfunction createBaseWebhookEvent() {\n    return {\n        event: \"\",\n        room: undefined,\n        participant: undefined,\n        egressInfo: undefined,\n        ingressInfo: undefined,\n        track: undefined,\n        id: \"\",\n        createdAt: 0,\n        numDropped: 0,\n    };\n}\nexports.WebhookEvent = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.event !== undefined && message.event !== \"\") {\n            writer.uint32(10).string(message.event);\n        }\n        if (message.room !== undefined) {\n            livekit_models_1.Room.encode(message.room, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.participant !== undefined) {\n            livekit_models_1.ParticipantInfo.encode(message.participant, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.egressInfo !== undefined) {\n            livekit_egress_1.EgressInfo.encode(message.egressInfo, writer.uint32(74).fork()).ldelim();\n        }\n        if (message.ingressInfo !== undefined) {\n            livekit_ingress_1.IngressInfo.encode(message.ingressInfo, writer.uint32(82).fork()).ldelim();\n        }\n        if (message.track !== undefined) {\n            livekit_models_1.TrackInfo.encode(message.track, writer.uint32(66).fork()).ldelim();\n        }\n        if (message.id !== undefined && message.id !== \"\") {\n            writer.uint32(50).string(message.id);\n        }\n        if (message.createdAt !== undefined && message.createdAt !== 0) {\n            writer.uint32(56).int64(message.createdAt);\n        }\n        if (message.numDropped !== undefined && message.numDropped !== 0) {\n            writer.uint32(88).int32(message.numDropped);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseWebhookEvent();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.event = reader.string();\n                    break;\n                case 2:\n                    message.room = livekit_models_1.Room.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.participant = livekit_models_1.ParticipantInfo.decode(reader, reader.uint32());\n                    break;\n                case 9:\n                    message.egressInfo = livekit_egress_1.EgressInfo.decode(reader, reader.uint32());\n                    break;\n                case 10:\n                    message.ingressInfo = livekit_ingress_1.IngressInfo.decode(reader, reader.uint32());\n                    break;\n                case 8:\n                    message.track = livekit_models_1.TrackInfo.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.id = reader.string();\n                    break;\n                case 7:\n                    message.createdAt = longToNumber(reader.int64());\n                    break;\n                case 11:\n                    message.numDropped = reader.int32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            event: isSet(object.event) ? String(object.event) : \"\",\n            room: isSet(object.room) ? livekit_models_1.Room.fromJSON(object.room) : undefined,\n            participant: isSet(object.participant) ? livekit_models_1.ParticipantInfo.fromJSON(object.participant) : undefined,\n            egressInfo: isSet(object.egressInfo) ? livekit_egress_1.EgressInfo.fromJSON(object.egressInfo) : undefined,\n            ingressInfo: isSet(object.ingressInfo) ? livekit_ingress_1.IngressInfo.fromJSON(object.ingressInfo) : undefined,\n            track: isSet(object.track) ? livekit_models_1.TrackInfo.fromJSON(object.track) : undefined,\n            id: isSet(object.id) ? String(object.id) : \"\",\n            createdAt: isSet(object.createdAt) ? Number(object.createdAt) : 0,\n            numDropped: isSet(object.numDropped) ? Number(object.numDropped) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.event !== undefined && (obj.event = message.event);\n        message.room !== undefined && (obj.room = message.room ? livekit_models_1.Room.toJSON(message.room) : undefined);\n        message.participant !== undefined &&\n            (obj.participant = message.participant ? livekit_models_1.ParticipantInfo.toJSON(message.participant) : undefined);\n        message.egressInfo !== undefined &&\n            (obj.egressInfo = message.egressInfo ? livekit_egress_1.EgressInfo.toJSON(message.egressInfo) : undefined);\n        message.ingressInfo !== undefined &&\n            (obj.ingressInfo = message.ingressInfo ? livekit_ingress_1.IngressInfo.toJSON(message.ingressInfo) : undefined);\n        message.track !== undefined && (obj.track = message.track ? livekit_models_1.TrackInfo.toJSON(message.track) : undefined);\n        message.id !== undefined && (obj.id = message.id);\n        message.createdAt !== undefined && (obj.createdAt = Math.round(message.createdAt));\n        message.numDropped !== undefined && (obj.numDropped = Math.round(message.numDropped));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d;\n        const message = createBaseWebhookEvent();\n        message.event = (_a = object.event) !== null && _a !== void 0 ? _a : \"\";\n        message.room = (object.room !== undefined && object.room !== null) ? livekit_models_1.Room.fromPartial(object.room) : undefined;\n        message.participant = (object.participant !== undefined && object.participant !== null)\n            ? livekit_models_1.ParticipantInfo.fromPartial(object.participant)\n            : undefined;\n        message.egressInfo = (object.egressInfo !== undefined && object.egressInfo !== null)\n            ? livekit_egress_1.EgressInfo.fromPartial(object.egressInfo)\n            : undefined;\n        message.ingressInfo = (object.ingressInfo !== undefined && object.ingressInfo !== null)\n            ? livekit_ingress_1.IngressInfo.fromPartial(object.ingressInfo)\n            : undefined;\n        message.track = (object.track !== undefined && object.track !== null)\n            ? livekit_models_1.TrackInfo.fromPartial(object.track)\n            : undefined;\n        message.id = (_b = object.id) !== null && _b !== void 0 ? _b : \"\";\n        message.createdAt = (_c = object.createdAt) !== null && _c !== void 0 ? _c : 0;\n        message.numDropped = (_d = object.numDropped) !== null && _d !== void 0 ? _d : 0;\n        return message;\n    },\n};\nvar globalThis = (() => {\n    if (typeof globalThis !== \"undefined\") {\n        return globalThis;\n    }\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    if (typeof window !== \"undefined\") {\n        return window;\n    }\n    if (typeof global !== \"undefined\") {\n        return global;\n    }\n    throw \"Unable to locate global object\";\n})();\nfunction longToNumber(long) {\n    if (long.gt(Number.MAX_SAFE_INTEGER)) {\n        throw new globalThis.Error(\"Value is larger than Number.MAX_SAFE_INTEGER\");\n    }\n    return long.toNumber();\n}\nif (minimal_1.default.util.Long !== long_1.default) {\n    minimal_1.default.util.Long = long_1.default;\n    minimal_1.default.configure();\n}\nfunction isSet(value) {\n    return value !== null && value !== undefined;\n}\n//# sourceMappingURL=livekit_webhook.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvcHJvdG8vbGl2ZWtpdF93ZWJob29rLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsb0JBQW9CLEdBQUcsdUJBQXVCO0FBQzlDO0FBQ0EsK0JBQStCLG1CQUFPLENBQUMsb0RBQU07QUFDN0Msa0NBQWtDLG1CQUFPLENBQUMsc0VBQW9CO0FBQzlELHlCQUF5QixtQkFBTyxDQUFDLDhGQUFrQjtBQUNuRCwwQkFBMEIsbUJBQU8sQ0FBQyxnR0FBbUI7QUFDckQseUJBQXlCLG1CQUFPLENBQUMsOEZBQWtCO0FBQ25ELHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGl2ZXN0cmVhbS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9wcm90by9saXZla2l0X3dlYmhvb2suanM/OTcxZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuV2ViaG9va0V2ZW50ID0gZXhwb3J0cy5wcm90b2J1ZlBhY2thZ2UgPSB2b2lkIDA7XG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuY29uc3QgbG9uZ18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJsb25nXCIpKTtcbmNvbnN0IG1pbmltYWxfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwicHJvdG9idWZqcy9taW5pbWFsXCIpKTtcbmNvbnN0IGxpdmVraXRfZWdyZXNzXzEgPSByZXF1aXJlKFwiLi9saXZla2l0X2VncmVzc1wiKTtcbmNvbnN0IGxpdmVraXRfaW5ncmVzc18xID0gcmVxdWlyZShcIi4vbGl2ZWtpdF9pbmdyZXNzXCIpO1xuY29uc3QgbGl2ZWtpdF9tb2RlbHNfMSA9IHJlcXVpcmUoXCIuL2xpdmVraXRfbW9kZWxzXCIpO1xuZXhwb3J0cy5wcm90b2J1ZlBhY2thZ2UgPSBcImxpdmVraXRcIjtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VXZWJob29rRXZlbnQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZXZlbnQ6IFwiXCIsXG4gICAgICAgIHJvb206IHVuZGVmaW5lZCxcbiAgICAgICAgcGFydGljaXBhbnQ6IHVuZGVmaW5lZCxcbiAgICAgICAgZWdyZXNzSW5mbzogdW5kZWZpbmVkLFxuICAgICAgICBpbmdyZXNzSW5mbzogdW5kZWZpbmVkLFxuICAgICAgICB0cmFjazogdW5kZWZpbmVkLFxuICAgICAgICBpZDogXCJcIixcbiAgICAgICAgY3JlYXRlZEF0OiAwLFxuICAgICAgICBudW1Ecm9wcGVkOiAwLFxuICAgIH07XG59XG5leHBvcnRzLldlYmhvb2tFdmVudCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmV2ZW50ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5ldmVudCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UuZXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGl2ZWtpdF9tb2RlbHNfMS5Sb29tLmVuY29kZShtZXNzYWdlLnJvb20sIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucGFydGljaXBhbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGl2ZWtpdF9tb2RlbHNfMS5QYXJ0aWNpcGFudEluZm8uZW5jb2RlKG1lc3NhZ2UucGFydGljaXBhbnQsIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZWdyZXNzSW5mbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsaXZla2l0X2VncmVzc18xLkVncmVzc0luZm8uZW5jb2RlKG1lc3NhZ2UuZWdyZXNzSW5mbywgd3JpdGVyLnVpbnQzMig3NCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5pbmdyZXNzSW5mbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsaXZla2l0X2luZ3Jlc3NfMS5JbmdyZXNzSW5mby5lbmNvZGUobWVzc2FnZS5pbmdyZXNzSW5mbywgd3JpdGVyLnVpbnQzMig4MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS50cmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsaXZla2l0X21vZGVsc18xLlRyYWNrSW5mby5lbmNvZGUobWVzc2FnZS50cmFjaywgd3JpdGVyLnVpbnQzMig2NikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5pZCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaWQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNTApLnN0cmluZyhtZXNzYWdlLmlkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5jcmVhdGVkQXQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmNyZWF0ZWRBdCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig1NikuaW50NjQobWVzc2FnZS5jcmVhdGVkQXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm51bURyb3BwZWQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLm51bURyb3BwZWQgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoODgpLmludDMyKG1lc3NhZ2UubnVtRHJvcHBlZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlV2ViaG9va0V2ZW50KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ldmVudCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvb20gPSBsaXZla2l0X21vZGVsc18xLlJvb20uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50ID0gbGl2ZWtpdF9tb2RlbHNfMS5QYXJ0aWNpcGFudEluZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVncmVzc0luZm8gPSBsaXZla2l0X2VncmVzc18xLkVncmVzc0luZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbmdyZXNzSW5mbyA9IGxpdmVraXRfaW5ncmVzc18xLkluZ3Jlc3NJbmZvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmFjayA9IGxpdmVraXRfbW9kZWxzXzEuVHJhY2tJbmZvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNyZWF0ZWRBdCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubnVtRHJvcHBlZCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBldmVudDogaXNTZXQob2JqZWN0LmV2ZW50KSA/IFN0cmluZyhvYmplY3QuZXZlbnQpIDogXCJcIixcbiAgICAgICAgICAgIHJvb206IGlzU2V0KG9iamVjdC5yb29tKSA/IGxpdmVraXRfbW9kZWxzXzEuUm9vbS5mcm9tSlNPTihvYmplY3Qucm9vbSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBwYXJ0aWNpcGFudDogaXNTZXQob2JqZWN0LnBhcnRpY2lwYW50KSA/IGxpdmVraXRfbW9kZWxzXzEuUGFydGljaXBhbnRJbmZvLmZyb21KU09OKG9iamVjdC5wYXJ0aWNpcGFudCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBlZ3Jlc3NJbmZvOiBpc1NldChvYmplY3QuZWdyZXNzSW5mbykgPyBsaXZla2l0X2VncmVzc18xLkVncmVzc0luZm8uZnJvbUpTT04ob2JqZWN0LmVncmVzc0luZm8pIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgaW5ncmVzc0luZm86IGlzU2V0KG9iamVjdC5pbmdyZXNzSW5mbykgPyBsaXZla2l0X2luZ3Jlc3NfMS5JbmdyZXNzSW5mby5mcm9tSlNPTihvYmplY3QuaW5ncmVzc0luZm8pIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdHJhY2s6IGlzU2V0KG9iamVjdC50cmFjaykgPyBsaXZla2l0X21vZGVsc18xLlRyYWNrSW5mby5mcm9tSlNPTihvYmplY3QudHJhY2spIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgaWQ6IGlzU2V0KG9iamVjdC5pZCkgPyBTdHJpbmcob2JqZWN0LmlkKSA6IFwiXCIsXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IGlzU2V0KG9iamVjdC5jcmVhdGVkQXQpID8gTnVtYmVyKG9iamVjdC5jcmVhdGVkQXQpIDogMCxcbiAgICAgICAgICAgIG51bURyb3BwZWQ6IGlzU2V0KG9iamVjdC5udW1Ecm9wcGVkKSA/IE51bWJlcihvYmplY3QubnVtRHJvcHBlZCkgOiAwLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UuZXZlbnQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmV2ZW50ID0gbWVzc2FnZS5ldmVudCk7XG4gICAgICAgIG1lc3NhZ2Uucm9vbSAhPT0gdW5kZWZpbmVkICYmIChvYmoucm9vbSA9IG1lc3NhZ2Uucm9vbSA/IGxpdmVraXRfbW9kZWxzXzEuUm9vbS50b0pTT04obWVzc2FnZS5yb29tKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5wYXJ0aWNpcGFudCA9IG1lc3NhZ2UucGFydGljaXBhbnQgPyBsaXZla2l0X21vZGVsc18xLlBhcnRpY2lwYW50SW5mby50b0pTT04obWVzc2FnZS5wYXJ0aWNpcGFudCkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLmVncmVzc0luZm8gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5lZ3Jlc3NJbmZvID0gbWVzc2FnZS5lZ3Jlc3NJbmZvID8gbGl2ZWtpdF9lZ3Jlc3NfMS5FZ3Jlc3NJbmZvLnRvSlNPTihtZXNzYWdlLmVncmVzc0luZm8pIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5pbmdyZXNzSW5mbyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLmluZ3Jlc3NJbmZvID0gbWVzc2FnZS5pbmdyZXNzSW5mbyA/IGxpdmVraXRfaW5ncmVzc18xLkluZ3Jlc3NJbmZvLnRvSlNPTihtZXNzYWdlLmluZ3Jlc3NJbmZvKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UudHJhY2sgIT09IHVuZGVmaW5lZCAmJiAob2JqLnRyYWNrID0gbWVzc2FnZS50cmFjayA/IGxpdmVraXRfbW9kZWxzXzEuVHJhY2tJbmZvLnRvSlNPTihtZXNzYWdlLnRyYWNrKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UuaWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmlkID0gbWVzc2FnZS5pZCk7XG4gICAgICAgIG1lc3NhZ2UuY3JlYXRlZEF0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5jcmVhdGVkQXQgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuY3JlYXRlZEF0KSk7XG4gICAgICAgIG1lc3NhZ2UubnVtRHJvcHBlZCAhPT0gdW5kZWZpbmVkICYmIChvYmoubnVtRHJvcHBlZCA9IE1hdGgucm91bmQobWVzc2FnZS5udW1Ecm9wcGVkKSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVdlYmhvb2tFdmVudCgpO1xuICAgICAgICBtZXNzYWdlLmV2ZW50ID0gKF9hID0gb2JqZWN0LmV2ZW50KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnJvb20gPSAob2JqZWN0LnJvb20gIT09IHVuZGVmaW5lZCAmJiBvYmplY3Qucm9vbSAhPT0gbnVsbCkgPyBsaXZla2l0X21vZGVsc18xLlJvb20uZnJvbVBhcnRpYWwob2JqZWN0LnJvb20pIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50ID0gKG9iamVjdC5wYXJ0aWNpcGFudCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wYXJ0aWNpcGFudCAhPT0gbnVsbClcbiAgICAgICAgICAgID8gbGl2ZWtpdF9tb2RlbHNfMS5QYXJ0aWNpcGFudEluZm8uZnJvbVBhcnRpYWwob2JqZWN0LnBhcnRpY2lwYW50KVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuZWdyZXNzSW5mbyA9IChvYmplY3QuZWdyZXNzSW5mbyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5lZ3Jlc3NJbmZvICE9PSBudWxsKVxuICAgICAgICAgICAgPyBsaXZla2l0X2VncmVzc18xLkVncmVzc0luZm8uZnJvbVBhcnRpYWwob2JqZWN0LmVncmVzc0luZm8pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5pbmdyZXNzSW5mbyA9IChvYmplY3QuaW5ncmVzc0luZm8gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuaW5ncmVzc0luZm8gIT09IG51bGwpXG4gICAgICAgICAgICA/IGxpdmVraXRfaW5ncmVzc18xLkluZ3Jlc3NJbmZvLmZyb21QYXJ0aWFsKG9iamVjdC5pbmdyZXNzSW5mbylcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLnRyYWNrID0gKG9iamVjdC50cmFjayAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC50cmFjayAhPT0gbnVsbClcbiAgICAgICAgICAgID8gbGl2ZWtpdF9tb2RlbHNfMS5UcmFja0luZm8uZnJvbVBhcnRpYWwob2JqZWN0LnRyYWNrKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuaWQgPSAoX2IgPSBvYmplY3QuaWQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuY3JlYXRlZEF0ID0gKF9jID0gb2JqZWN0LmNyZWF0ZWRBdCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMDtcbiAgICAgICAgbWVzc2FnZS5udW1Ecm9wcGVkID0gKF9kID0gb2JqZWN0Lm51bURyb3BwZWQpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IDA7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xudmFyIGdsb2JhbFRoaXMgPSAoKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gZ2xvYmFsVGhpcztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gZ2xvYmFsO1xuICAgIH1cbiAgICB0aHJvdyBcIlVuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdFwiO1xufSkoKTtcbmZ1bmN0aW9uIGxvbmdUb051bWJlcihsb25nKSB7XG4gICAgaWYgKGxvbmcuZ3QoTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpKSB7XG4gICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFwiVmFsdWUgaXMgbGFyZ2VyIHRoYW4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJcIik7XG4gICAgfVxuICAgIHJldHVybiBsb25nLnRvTnVtYmVyKCk7XG59XG5pZiAobWluaW1hbF8xLmRlZmF1bHQudXRpbC5Mb25nICE9PSBsb25nXzEuZGVmYXVsdCkge1xuICAgIG1pbmltYWxfMS5kZWZhdWx0LnV0aWwuTG9uZyA9IGxvbmdfMS5kZWZhdWx0O1xuICAgIG1pbmltYWxfMS5kZWZhdWx0LmNvbmZpZ3VyZSgpO1xufVxuZnVuY3Rpb24gaXNTZXQodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpdmVraXRfd2ViaG9vay5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/livekit-server-sdk/dist/proto/livekit_webhook.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/livekit-server-sdk/dist/AccessToken.js":
/*!*************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/AccessToken.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.TokenVerifier = exports.AccessToken = void 0;\nconst jwt = __importStar(__webpack_require__(/*! jsonwebtoken */ \"(action-browser)/./node_modules/jsonwebtoken/index.js\"));\n// 6 hours\nconst defaultTTL = 6 * 60 * 60;\nclass AccessToken {\n    /**\n     * Creates a new AccessToken\n     * @param apiKey API Key, can be set in env LIVEKIT_API_KEY\n     * @param apiSecret Secret, can be set in env LIVEKIT_API_SECRET\n     */\n    constructor(apiKey, apiSecret, options) {\n        if (!apiKey) {\n            apiKey = process.env.LIVEKIT_API_KEY;\n        }\n        if (!apiSecret) {\n            apiSecret = process.env.LIVEKIT_API_SECRET;\n        }\n        if (!apiKey || !apiSecret) {\n            throw Error('api-key and api-secret must be set');\n        }\n        else if (typeof document !== 'undefined') {\n            // check against document rather than window because deno provides window\n            console.error('You should not include your API secret in your web client bundle.\\n\\n' +\n                'Your web client should request a token from your backend server which should then use ' +\n                'the API secret to generate a token. See https://docs.livekit.io/client/connect/');\n        }\n        this.apiKey = apiKey;\n        this.apiSecret = apiSecret;\n        this.grants = {};\n        this.identity = options === null || options === void 0 ? void 0 : options.identity;\n        this.ttl = (options === null || options === void 0 ? void 0 : options.ttl) || defaultTTL;\n        if (options === null || options === void 0 ? void 0 : options.metadata) {\n            this.metadata = options.metadata;\n        }\n        if (options === null || options === void 0 ? void 0 : options.name) {\n            this.name = options.name;\n        }\n    }\n    /**\n     * Adds a video grant to this token.\n     * @param grant\n     */\n    addGrant(grant) {\n        this.grants.video = grant;\n    }\n    /**\n     * Set metadata to be passed to the Participant, used only when joining the room\n     */\n    set metadata(md) {\n        this.grants.metadata = md;\n    }\n    set name(name) {\n        this.grants.name = name;\n    }\n    get sha256() {\n        return this.grants.sha256;\n    }\n    set sha256(sha) {\n        this.grants.sha256 = sha;\n    }\n    /**\n     * @returns JWT encoded token\n     */\n    toJwt() {\n        // TODO: check for video grant validity\n        var _a;\n        const opts = {\n            issuer: this.apiKey,\n            expiresIn: this.ttl,\n            notBefore: 0,\n        };\n        if (this.identity) {\n            opts.subject = this.identity;\n            opts.jwtid = this.identity;\n        }\n        else if ((_a = this.grants.video) === null || _a === void 0 ? void 0 : _a.roomJoin) {\n            throw Error('identity is required for join but not set');\n        }\n        return jwt.sign(this.grants, this.apiSecret, opts);\n    }\n}\nexports.AccessToken = AccessToken;\nclass TokenVerifier {\n    constructor(apiKey, apiSecret) {\n        this.apiKey = apiKey;\n        this.apiSecret = apiSecret;\n    }\n    verify(token) {\n        const decoded = jwt.verify(token, this.apiSecret, { issuer: this.apiKey });\n        if (!decoded) {\n            throw Error('invalid token');\n        }\n        return decoded;\n    }\n}\nexports.TokenVerifier = TokenVerifier;\n//# sourceMappingURL=AccessToken.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9BY2Nlc3NUb2tlbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQSxtQ0FBbUMsb0NBQW9DLGdCQUFnQjtBQUN2RixDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLDBDQUEwQyw0QkFBNEI7QUFDdEUsQ0FBQztBQUNEO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHFCQUFxQixHQUFHLG1CQUFtQjtBQUMzQyx5QkFBeUIsbUJBQU8sQ0FBQywyRUFBYztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQscUJBQXFCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQiIsInNvdXJjZXMiOlsid2VicGFjazovL2xpdmVzdHJlYW0vLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvQWNjZXNzVG9rZW4uanM/ODM5OSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Ub2tlblZlcmlmaWVyID0gZXhwb3J0cy5BY2Nlc3NUb2tlbiA9IHZvaWQgMDtcbmNvbnN0IGp3dCA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwianNvbndlYnRva2VuXCIpKTtcbi8vIDYgaG91cnNcbmNvbnN0IGRlZmF1bHRUVEwgPSA2ICogNjAgKiA2MDtcbmNsYXNzIEFjY2Vzc1Rva2VuIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IEFjY2Vzc1Rva2VuXG4gICAgICogQHBhcmFtIGFwaUtleSBBUEkgS2V5LCBjYW4gYmUgc2V0IGluIGVudiBMSVZFS0lUX0FQSV9LRVlcbiAgICAgKiBAcGFyYW0gYXBpU2VjcmV0IFNlY3JldCwgY2FuIGJlIHNldCBpbiBlbnYgTElWRUtJVF9BUElfU0VDUkVUXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYXBpS2V5LCBhcGlTZWNyZXQsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFhcGlLZXkpIHtcbiAgICAgICAgICAgIGFwaUtleSA9IHByb2Nlc3MuZW52LkxJVkVLSVRfQVBJX0tFWTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFwaVNlY3JldCkge1xuICAgICAgICAgICAgYXBpU2VjcmV0ID0gcHJvY2Vzcy5lbnYuTElWRUtJVF9BUElfU0VDUkVUO1xuICAgICAgICB9XG4gICAgICAgIGlmICghYXBpS2V5IHx8ICFhcGlTZWNyZXQpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdhcGkta2V5IGFuZCBhcGktc2VjcmV0IG11c3QgYmUgc2V0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgLy8gY2hlY2sgYWdhaW5zdCBkb2N1bWVudCByYXRoZXIgdGhhbiB3aW5kb3cgYmVjYXVzZSBkZW5vIHByb3ZpZGVzIHdpbmRvd1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignWW91IHNob3VsZCBub3QgaW5jbHVkZSB5b3VyIEFQSSBzZWNyZXQgaW4geW91ciB3ZWIgY2xpZW50IGJ1bmRsZS5cXG5cXG4nICtcbiAgICAgICAgICAgICAgICAnWW91ciB3ZWIgY2xpZW50IHNob3VsZCByZXF1ZXN0IGEgdG9rZW4gZnJvbSB5b3VyIGJhY2tlbmQgc2VydmVyIHdoaWNoIHNob3VsZCB0aGVuIHVzZSAnICtcbiAgICAgICAgICAgICAgICAndGhlIEFQSSBzZWNyZXQgdG8gZ2VuZXJhdGUgYSB0b2tlbi4gU2VlIGh0dHBzOi8vZG9jcy5saXZla2l0LmlvL2NsaWVudC9jb25uZWN0LycpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xuICAgICAgICB0aGlzLmFwaVNlY3JldCA9IGFwaVNlY3JldDtcbiAgICAgICAgdGhpcy5ncmFudHMgPSB7fTtcbiAgICAgICAgdGhpcy5pZGVudGl0eSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pZGVudGl0eTtcbiAgICAgICAgdGhpcy50dGwgPSAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnR0bCkgfHwgZGVmYXVsdFRUTDtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5tZXRhZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG9wdGlvbnMubWV0YWRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5uYW1lKSB7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBvcHRpb25zLm5hbWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIHZpZGVvIGdyYW50IHRvIHRoaXMgdG9rZW4uXG4gICAgICogQHBhcmFtIGdyYW50XG4gICAgICovXG4gICAgYWRkR3JhbnQoZ3JhbnQpIHtcbiAgICAgICAgdGhpcy5ncmFudHMudmlkZW8gPSBncmFudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IG1ldGFkYXRhIHRvIGJlIHBhc3NlZCB0byB0aGUgUGFydGljaXBhbnQsIHVzZWQgb25seSB3aGVuIGpvaW5pbmcgdGhlIHJvb21cbiAgICAgKi9cbiAgICBzZXQgbWV0YWRhdGEobWQpIHtcbiAgICAgICAgdGhpcy5ncmFudHMubWV0YWRhdGEgPSBtZDtcbiAgICB9XG4gICAgc2V0IG5hbWUobmFtZSkge1xuICAgICAgICB0aGlzLmdyYW50cy5uYW1lID0gbmFtZTtcbiAgICB9XG4gICAgZ2V0IHNoYTI1NigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3JhbnRzLnNoYTI1NjtcbiAgICB9XG4gICAgc2V0IHNoYTI1NihzaGEpIHtcbiAgICAgICAgdGhpcy5ncmFudHMuc2hhMjU2ID0gc2hhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBKV1QgZW5jb2RlZCB0b2tlblxuICAgICAqL1xuICAgIHRvSnd0KCkge1xuICAgICAgICAvLyBUT0RPOiBjaGVjayBmb3IgdmlkZW8gZ3JhbnQgdmFsaWRpdHlcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBvcHRzID0ge1xuICAgICAgICAgICAgaXNzdWVyOiB0aGlzLmFwaUtleSxcbiAgICAgICAgICAgIGV4cGlyZXNJbjogdGhpcy50dGwsXG4gICAgICAgICAgICBub3RCZWZvcmU6IDAsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmlkZW50aXR5KSB7XG4gICAgICAgICAgICBvcHRzLnN1YmplY3QgPSB0aGlzLmlkZW50aXR5O1xuICAgICAgICAgICAgb3B0cy5qd3RpZCA9IHRoaXMuaWRlbnRpdHk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKF9hID0gdGhpcy5ncmFudHMudmlkZW8pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yb29tSm9pbikge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2lkZW50aXR5IGlzIHJlcXVpcmVkIGZvciBqb2luIGJ1dCBub3Qgc2V0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGp3dC5zaWduKHRoaXMuZ3JhbnRzLCB0aGlzLmFwaVNlY3JldCwgb3B0cyk7XG4gICAgfVxufVxuZXhwb3J0cy5BY2Nlc3NUb2tlbiA9IEFjY2Vzc1Rva2VuO1xuY2xhc3MgVG9rZW5WZXJpZmllciB7XG4gICAgY29uc3RydWN0b3IoYXBpS2V5LCBhcGlTZWNyZXQpIHtcbiAgICAgICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gICAgICAgIHRoaXMuYXBpU2VjcmV0ID0gYXBpU2VjcmV0O1xuICAgIH1cbiAgICB2ZXJpZnkodG9rZW4pIHtcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHRoaXMuYXBpU2VjcmV0LCB7IGlzc3VlcjogdGhpcy5hcGlLZXkgfSk7XG4gICAgICAgIGlmICghZGVjb2RlZCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2ludmFsaWQgdG9rZW4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVjb2RlZDtcbiAgICB9XG59XG5leHBvcnRzLlRva2VuVmVyaWZpZXIgPSBUb2tlblZlcmlmaWVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QWNjZXNzVG9rZW4uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/livekit-server-sdk/dist/AccessToken.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/livekit-server-sdk/dist/EgressClient.js":
/*!**************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/EgressClient.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.EgressClient = void 0;\nconst livekit_egress_1 = __webpack_require__(/*! ./proto/livekit_egress */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_egress.js\");\nconst ServiceBase_1 = __importDefault(__webpack_require__(/*! ./ServiceBase */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/ServiceBase.js\"));\nconst TwirpRPC_1 = __webpack_require__(/*! ./TwirpRPC */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/TwirpRPC.js\");\nconst svc = 'Egress';\n/**\n * Client to access Egress APIs\n */\nclass EgressClient extends ServiceBase_1.default {\n    /**\n     * @param host hostname including protocol. i.e. 'https://cluster.livekit.io'\n     * @param apiKey API Key, can be set in env var LIVEKIT_API_KEY\n     * @param secret API Secret, can be set in env var LIVEKIT_API_SECRET\n     */\n    constructor(host, apiKey, secret) {\n        super(apiKey, secret);\n        this.rpc = new TwirpRPC_1.TwirpRpc(host, TwirpRPC_1.livekitPackage);\n    }\n    startRoomCompositeEgress(roomName, output, optsOrLayout, options, audioOnly, videoOnly, customBaseUrl) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let layout;\n            if (optsOrLayout !== undefined) {\n                if (typeof optsOrLayout === 'string') {\n                    layout = optsOrLayout;\n                }\n                else {\n                    const opts = optsOrLayout;\n                    layout = opts.layout;\n                    options = opts.encodingOptions;\n                    audioOnly = opts.audioOnly;\n                    videoOnly = opts.videoOnly;\n                    customBaseUrl = opts.customBaseUrl;\n                }\n            }\n            layout !== null && layout !== void 0 ? layout : (layout = '');\n            audioOnly !== null && audioOnly !== void 0 ? audioOnly : (audioOnly = false);\n            videoOnly !== null && videoOnly !== void 0 ? videoOnly : (videoOnly = false);\n            customBaseUrl !== null && customBaseUrl !== void 0 ? customBaseUrl : (customBaseUrl = '');\n            const { file, stream, segments, preset, advanced, fileOutputs, streamOutputs, segmentOutputs } = this.getOutputParams(output, options);\n            const req = livekit_egress_1.RoomCompositeEgressRequest.toJSON({\n                roomName,\n                layout,\n                audioOnly,\n                videoOnly,\n                customBaseUrl,\n                file,\n                stream,\n                segments,\n                preset,\n                advanced,\n                fileOutputs,\n                streamOutputs,\n                segmentOutputs,\n            });\n            const data = yield this.rpc.request(svc, 'StartRoomCompositeEgress', req, this.authHeader({ roomRecord: true }));\n            return livekit_egress_1.EgressInfo.fromJSON(data);\n        });\n    }\n    /**\n     * @param url url\n     * @param output file or stream output\n     * @param opts WebOptions\n     */\n    startWebEgress(url, output, opts) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const audioOnly = (opts === null || opts === void 0 ? void 0 : opts.audioOnly) || false;\n            const videoOnly = (opts === null || opts === void 0 ? void 0 : opts.videoOnly) || false;\n            const awaitStartSignal = (opts === null || opts === void 0 ? void 0 : opts.awaitStartSignal) || false;\n            const { file, stream, segments, preset, advanced, fileOutputs, streamOutputs, segmentOutputs } = this.getOutputParams(output, opts === null || opts === void 0 ? void 0 : opts.encodingOptions);\n            const req = livekit_egress_1.WebEgressRequest.toJSON({\n                url,\n                audioOnly,\n                videoOnly,\n                awaitStartSignal,\n                file,\n                stream,\n                segments,\n                preset,\n                advanced,\n                fileOutputs,\n                streamOutputs,\n                segmentOutputs,\n            });\n            const data = yield this.rpc.request(svc, 'StartWebEgress', req, this.authHeader({ roomRecord: true }));\n            return livekit_egress_1.EgressInfo.fromJSON(data);\n        });\n    }\n    /**\n     * Export a participant's audio and video tracks,\n     *\n     * @param roomName room name\n     * @param output one or more outputs\n     * @param opts ParticipantEgressOptions\n     */\n    startParticipantEgress(roomName, identity, output, opts) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { preset, advanced, fileOutputs, streamOutputs, segmentOutputs } = this.getOutputParams(output, opts === null || opts === void 0 ? void 0 : opts.encodingOptions);\n            const req = livekit_egress_1.ParticipantEgressRequest.toJSON({\n                roomName,\n                identity,\n                preset,\n                advanced,\n                fileOutputs,\n                streamOutputs,\n                segmentOutputs,\n            });\n            const data = yield this.rpc.request(svc, 'StartParticipantEgress', req, this.authHeader({ roomRecord: true }));\n            return livekit_egress_1.EgressInfo.fromJSON(data);\n        });\n    }\n    startTrackCompositeEgress(roomName, output, optsOrAudioTrackId, videoTrackId, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let audioTrackId;\n            if (optsOrAudioTrackId !== undefined) {\n                if (typeof optsOrAudioTrackId === 'string') {\n                    audioTrackId = optsOrAudioTrackId;\n                }\n                else {\n                    const opts = optsOrAudioTrackId;\n                    audioTrackId = opts.audioTrackId;\n                    videoTrackId = opts.videoTrackId;\n                    options = opts.encodingOptions;\n                }\n            }\n            audioTrackId !== null && audioTrackId !== void 0 ? audioTrackId : (audioTrackId = '');\n            videoTrackId !== null && videoTrackId !== void 0 ? videoTrackId : (videoTrackId = '');\n            const { file, stream, segments, preset, advanced, fileOutputs, streamOutputs, segmentOutputs } = this.getOutputParams(output, options);\n            const req = livekit_egress_1.TrackCompositeEgressRequest.toJSON({\n                roomName,\n                audioTrackId,\n                videoTrackId,\n                file,\n                stream,\n                segments,\n                preset,\n                advanced,\n                fileOutputs,\n                streamOutputs,\n                segmentOutputs,\n            });\n            const data = yield this.rpc.request(svc, 'StartTrackCompositeEgress', req, this.authHeader({ roomRecord: true }));\n            return livekit_egress_1.EgressInfo.fromJSON(data);\n        });\n    }\n    isEncodedOutputs(output) {\n        return (output.file !== undefined ||\n            output.stream !== undefined ||\n            output.segments !== undefined);\n    }\n    isEncodedFileOutput(output) {\n        return (output.filepath !== undefined ||\n            output.fileType !== undefined);\n    }\n    isSegmentedFileOutput(output) {\n        return (output.filenamePrefix !== undefined ||\n            output.playlistName !== undefined ||\n            output.filenameSuffix !== undefined);\n    }\n    isStreamOutput(output) {\n        return (output.protocol !== undefined || output.urls !== undefined);\n    }\n    getOutputParams(output, options) {\n        let file;\n        let fileOutputs;\n        let stream;\n        let streamOutputs;\n        let segments;\n        let segmentOutputs;\n        let preset;\n        let advanced;\n        if (this.isEncodedOutputs(output)) {\n            if (output.file !== undefined) {\n                fileOutputs = [output.file];\n            }\n            if (output.stream !== undefined) {\n                streamOutputs = [output.stream];\n            }\n            if (output.segments !== undefined) {\n                segmentOutputs = [output.segments];\n            }\n        }\n        else if (this.isEncodedFileOutput(output)) {\n            file = output;\n            fileOutputs = [file];\n        }\n        else if (this.isSegmentedFileOutput(output)) {\n            segments = output;\n            segmentOutputs = [segments];\n        }\n        else if (this.isStreamOutput(output)) {\n            stream = output;\n            streamOutputs = [stream];\n        }\n        if (options) {\n            if (typeof options === 'number') {\n                preset = options;\n            }\n            else {\n                advanced = options;\n            }\n        }\n        return { file, stream, segments, preset, advanced, fileOutputs, streamOutputs, segmentOutputs };\n    }\n    /**\n     * @param roomName room name\n     * @param output file or websocket output\n     * @param trackId track Id\n     */\n    startTrackEgress(roomName, output, trackId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let file;\n            let websocketUrl;\n            if (typeof output === 'string') {\n                websocketUrl = output;\n            }\n            else {\n                file = output;\n            }\n            const req = livekit_egress_1.TrackEgressRequest.toJSON({\n                roomName,\n                trackId,\n                file,\n                websocketUrl,\n            });\n            const data = yield this.rpc.request(svc, 'StartTrackEgress', req, this.authHeader({ roomRecord: true }));\n            return livekit_egress_1.EgressInfo.fromJSON(data);\n        });\n    }\n    /**\n     * @param egressId\n     * @param layout\n     */\n    updateLayout(egressId, layout) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = yield this.rpc.request(svc, 'UpdateLayout', livekit_egress_1.UpdateLayoutRequest.toJSON({ egressId, layout }), this.authHeader({ roomRecord: true }));\n            return livekit_egress_1.EgressInfo.fromJSON(data);\n        });\n    }\n    /**\n     * @param egressId\n     * @param addOutputUrls\n     * @param removeOutputUrls\n     */\n    updateStream(egressId, addOutputUrls, removeOutputUrls) {\n        return __awaiter(this, void 0, void 0, function* () {\n            addOutputUrls !== null && addOutputUrls !== void 0 ? addOutputUrls : (addOutputUrls = []);\n            removeOutputUrls !== null && removeOutputUrls !== void 0 ? removeOutputUrls : (removeOutputUrls = []);\n            const data = yield this.rpc.request(svc, 'UpdateStream', livekit_egress_1.UpdateStreamRequest.toJSON({ egressId, addOutputUrls, removeOutputUrls }), this.authHeader({ roomRecord: true }));\n            return livekit_egress_1.EgressInfo.fromJSON(data);\n        });\n    }\n    /**\n     * @param roomName list egress for one room only\n     */\n    listEgress(options) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            let req = {};\n            if (typeof options === 'string') {\n                req.roomName = options;\n            }\n            else if (options !== undefined) {\n                req = options;\n            }\n            const data = yield this.rpc.request(svc, 'ListEgress', livekit_egress_1.ListEgressRequest.toJSON(req), this.authHeader({ roomRecord: true }));\n            return (_a = livekit_egress_1.ListEgressResponse.fromJSON(data).items) !== null && _a !== void 0 ? _a : [];\n        });\n    }\n    /**\n     * @param egressId\n     */\n    stopEgress(egressId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = yield this.rpc.request(svc, 'StopEgress', livekit_egress_1.StopEgressRequest.toJSON({ egressId }), this.authHeader({ roomRecord: true }));\n            return livekit_egress_1.EgressInfo.fromJSON(data);\n        });\n    }\n}\nexports.EgressClient = EgressClient;\n//# sourceMappingURL=EgressClient.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9FZ3Jlc3NDbGllbnQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDRCQUE0QiwrREFBK0QsaUJBQWlCO0FBQzVHO0FBQ0Esb0NBQW9DLE1BQU0sK0JBQStCLFlBQVk7QUFDckYsbUNBQW1DLE1BQU0sbUNBQW1DLFlBQVk7QUFDeEYsZ0NBQWdDO0FBQ2hDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsb0JBQW9CO0FBQ3BCLHlCQUF5QixtQkFBTyxDQUFDLCtHQUF3QjtBQUN6RCxzQ0FBc0MsbUJBQU8sQ0FBQyw2RkFBZTtBQUM3RCxtQkFBbUIsbUJBQU8sQ0FBQyx1RkFBWTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix1RkFBdUY7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYix3R0FBd0csa0JBQWtCO0FBQzFIO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsdUZBQXVGO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLDhGQUE4RixrQkFBa0I7QUFDaEg7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsK0RBQStEO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2Isc0dBQXNHLGtCQUFrQjtBQUN4SDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHVGQUF1RjtBQUMzRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IseUdBQXlHLGtCQUFrQjtBQUMzSDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsZ0dBQWdHLGtCQUFrQjtBQUNsSDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1IQUFtSCxrQkFBa0IscUJBQXFCLGtCQUFrQjtBQUM1SztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1IQUFtSCwyQ0FBMkMscUJBQXFCLGtCQUFrQjtBQUNyTTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUlBQXFJLGtCQUFrQjtBQUN2SjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrR0FBK0csVUFBVSxxQkFBcUIsa0JBQWtCO0FBQ2hLO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saXZlc3RyZWFtLy4vbm9kZV9tb2R1bGVzL2xpdmVraXQtc2VydmVyLXNkay9kaXN0L0VncmVzc0NsaWVudC5qcz8wZTM1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkVncmVzc0NsaWVudCA9IHZvaWQgMDtcbmNvbnN0IGxpdmVraXRfZWdyZXNzXzEgPSByZXF1aXJlKFwiLi9wcm90by9saXZla2l0X2VncmVzc1wiKTtcbmNvbnN0IFNlcnZpY2VCYXNlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vU2VydmljZUJhc2VcIikpO1xuY29uc3QgVHdpcnBSUENfMSA9IHJlcXVpcmUoXCIuL1R3aXJwUlBDXCIpO1xuY29uc3Qgc3ZjID0gJ0VncmVzcyc7XG4vKipcbiAqIENsaWVudCB0byBhY2Nlc3MgRWdyZXNzIEFQSXNcbiAqL1xuY2xhc3MgRWdyZXNzQ2xpZW50IGV4dGVuZHMgU2VydmljZUJhc2VfMS5kZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gaG9zdCBob3N0bmFtZSBpbmNsdWRpbmcgcHJvdG9jb2wuIGkuZS4gJ2h0dHBzOi8vY2x1c3Rlci5saXZla2l0LmlvJ1xuICAgICAqIEBwYXJhbSBhcGlLZXkgQVBJIEtleSwgY2FuIGJlIHNldCBpbiBlbnYgdmFyIExJVkVLSVRfQVBJX0tFWVxuICAgICAqIEBwYXJhbSBzZWNyZXQgQVBJIFNlY3JldCwgY2FuIGJlIHNldCBpbiBlbnYgdmFyIExJVkVLSVRfQVBJX1NFQ1JFVFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGhvc3QsIGFwaUtleSwgc2VjcmV0KSB7XG4gICAgICAgIHN1cGVyKGFwaUtleSwgc2VjcmV0KTtcbiAgICAgICAgdGhpcy5ycGMgPSBuZXcgVHdpcnBSUENfMS5Ud2lycFJwYyhob3N0LCBUd2lycFJQQ18xLmxpdmVraXRQYWNrYWdlKTtcbiAgICB9XG4gICAgc3RhcnRSb29tQ29tcG9zaXRlRWdyZXNzKHJvb21OYW1lLCBvdXRwdXQsIG9wdHNPckxheW91dCwgb3B0aW9ucywgYXVkaW9Pbmx5LCB2aWRlb09ubHksIGN1c3RvbUJhc2VVcmwpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGxldCBsYXlvdXQ7XG4gICAgICAgICAgICBpZiAob3B0c09yTGF5b3V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdHNPckxheW91dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ID0gb3B0c09yTGF5b3V0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0cyA9IG9wdHNPckxheW91dDtcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ID0gb3B0cy5sYXlvdXQ7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRzLmVuY29kaW5nT3B0aW9ucztcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9Pbmx5ID0gb3B0cy5hdWRpb09ubHk7XG4gICAgICAgICAgICAgICAgICAgIHZpZGVvT25seSA9IG9wdHMudmlkZW9Pbmx5O1xuICAgICAgICAgICAgICAgICAgICBjdXN0b21CYXNlVXJsID0gb3B0cy5jdXN0b21CYXNlVXJsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxheW91dCAhPT0gbnVsbCAmJiBsYXlvdXQgIT09IHZvaWQgMCA/IGxheW91dCA6IChsYXlvdXQgPSAnJyk7XG4gICAgICAgICAgICBhdWRpb09ubHkgIT09IG51bGwgJiYgYXVkaW9Pbmx5ICE9PSB2b2lkIDAgPyBhdWRpb09ubHkgOiAoYXVkaW9Pbmx5ID0gZmFsc2UpO1xuICAgICAgICAgICAgdmlkZW9Pbmx5ICE9PSBudWxsICYmIHZpZGVvT25seSAhPT0gdm9pZCAwID8gdmlkZW9Pbmx5IDogKHZpZGVvT25seSA9IGZhbHNlKTtcbiAgICAgICAgICAgIGN1c3RvbUJhc2VVcmwgIT09IG51bGwgJiYgY3VzdG9tQmFzZVVybCAhPT0gdm9pZCAwID8gY3VzdG9tQmFzZVVybCA6IChjdXN0b21CYXNlVXJsID0gJycpO1xuICAgICAgICAgICAgY29uc3QgeyBmaWxlLCBzdHJlYW0sIHNlZ21lbnRzLCBwcmVzZXQsIGFkdmFuY2VkLCBmaWxlT3V0cHV0cywgc3RyZWFtT3V0cHV0cywgc2VnbWVudE91dHB1dHMgfSA9IHRoaXMuZ2V0T3V0cHV0UGFyYW1zKG91dHB1dCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCByZXEgPSBsaXZla2l0X2VncmVzc18xLlJvb21Db21wb3NpdGVFZ3Jlc3NSZXF1ZXN0LnRvSlNPTih7XG4gICAgICAgICAgICAgICAgcm9vbU5hbWUsXG4gICAgICAgICAgICAgICAgbGF5b3V0LFxuICAgICAgICAgICAgICAgIGF1ZGlvT25seSxcbiAgICAgICAgICAgICAgICB2aWRlb09ubHksXG4gICAgICAgICAgICAgICAgY3VzdG9tQmFzZVVybCxcbiAgICAgICAgICAgICAgICBmaWxlLFxuICAgICAgICAgICAgICAgIHN0cmVhbSxcbiAgICAgICAgICAgICAgICBzZWdtZW50cyxcbiAgICAgICAgICAgICAgICBwcmVzZXQsXG4gICAgICAgICAgICAgICAgYWR2YW5jZWQsXG4gICAgICAgICAgICAgICAgZmlsZU91dHB1dHMsXG4gICAgICAgICAgICAgICAgc3RyZWFtT3V0cHV0cyxcbiAgICAgICAgICAgICAgICBzZWdtZW50T3V0cHV0cyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHRoaXMucnBjLnJlcXVlc3Qoc3ZjLCAnU3RhcnRSb29tQ29tcG9zaXRlRWdyZXNzJywgcmVxLCB0aGlzLmF1dGhIZWFkZXIoeyByb29tUmVjb3JkOiB0cnVlIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBsaXZla2l0X2VncmVzc18xLkVncmVzc0luZm8uZnJvbUpTT04oZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gdXJsIHVybFxuICAgICAqIEBwYXJhbSBvdXRwdXQgZmlsZSBvciBzdHJlYW0gb3V0cHV0XG4gICAgICogQHBhcmFtIG9wdHMgV2ViT3B0aW9uc1xuICAgICAqL1xuICAgIHN0YXJ0V2ViRWdyZXNzKHVybCwgb3V0cHV0LCBvcHRzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBhdWRpb09ubHkgPSAob3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLmF1ZGlvT25seSkgfHwgZmFsc2U7XG4gICAgICAgICAgICBjb25zdCB2aWRlb09ubHkgPSAob3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLnZpZGVvT25seSkgfHwgZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBhd2FpdFN0YXJ0U2lnbmFsID0gKG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy5hd2FpdFN0YXJ0U2lnbmFsKSB8fCBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IHsgZmlsZSwgc3RyZWFtLCBzZWdtZW50cywgcHJlc2V0LCBhZHZhbmNlZCwgZmlsZU91dHB1dHMsIHN0cmVhbU91dHB1dHMsIHNlZ21lbnRPdXRwdXRzIH0gPSB0aGlzLmdldE91dHB1dFBhcmFtcyhvdXRwdXQsIG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy5lbmNvZGluZ09wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgcmVxID0gbGl2ZWtpdF9lZ3Jlc3NfMS5XZWJFZ3Jlc3NSZXF1ZXN0LnRvSlNPTih7XG4gICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgICAgIGF1ZGlvT25seSxcbiAgICAgICAgICAgICAgICB2aWRlb09ubHksXG4gICAgICAgICAgICAgICAgYXdhaXRTdGFydFNpZ25hbCxcbiAgICAgICAgICAgICAgICBmaWxlLFxuICAgICAgICAgICAgICAgIHN0cmVhbSxcbiAgICAgICAgICAgICAgICBzZWdtZW50cyxcbiAgICAgICAgICAgICAgICBwcmVzZXQsXG4gICAgICAgICAgICAgICAgYWR2YW5jZWQsXG4gICAgICAgICAgICAgICAgZmlsZU91dHB1dHMsXG4gICAgICAgICAgICAgICAgc3RyZWFtT3V0cHV0cyxcbiAgICAgICAgICAgICAgICBzZWdtZW50T3V0cHV0cyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHRoaXMucnBjLnJlcXVlc3Qoc3ZjLCAnU3RhcnRXZWJFZ3Jlc3MnLCByZXEsIHRoaXMuYXV0aEhlYWRlcih7IHJvb21SZWNvcmQ6IHRydWUgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIGxpdmVraXRfZWdyZXNzXzEuRWdyZXNzSW5mby5mcm9tSlNPTihkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4cG9ydCBhIHBhcnRpY2lwYW50J3MgYXVkaW8gYW5kIHZpZGVvIHRyYWNrcyxcbiAgICAgKlxuICAgICAqIEBwYXJhbSByb29tTmFtZSByb29tIG5hbWVcbiAgICAgKiBAcGFyYW0gb3V0cHV0IG9uZSBvciBtb3JlIG91dHB1dHNcbiAgICAgKiBAcGFyYW0gb3B0cyBQYXJ0aWNpcGFudEVncmVzc09wdGlvbnNcbiAgICAgKi9cbiAgICBzdGFydFBhcnRpY2lwYW50RWdyZXNzKHJvb21OYW1lLCBpZGVudGl0eSwgb3V0cHV0LCBvcHRzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCB7IHByZXNldCwgYWR2YW5jZWQsIGZpbGVPdXRwdXRzLCBzdHJlYW1PdXRwdXRzLCBzZWdtZW50T3V0cHV0cyB9ID0gdGhpcy5nZXRPdXRwdXRQYXJhbXMob3V0cHV0LCBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMuZW5jb2RpbmdPcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IHJlcSA9IGxpdmVraXRfZWdyZXNzXzEuUGFydGljaXBhbnRFZ3Jlc3NSZXF1ZXN0LnRvSlNPTih7XG4gICAgICAgICAgICAgICAgcm9vbU5hbWUsXG4gICAgICAgICAgICAgICAgaWRlbnRpdHksXG4gICAgICAgICAgICAgICAgcHJlc2V0LFxuICAgICAgICAgICAgICAgIGFkdmFuY2VkLFxuICAgICAgICAgICAgICAgIGZpbGVPdXRwdXRzLFxuICAgICAgICAgICAgICAgIHN0cmVhbU91dHB1dHMsXG4gICAgICAgICAgICAgICAgc2VnbWVudE91dHB1dHMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCB0aGlzLnJwYy5yZXF1ZXN0KHN2YywgJ1N0YXJ0UGFydGljaXBhbnRFZ3Jlc3MnLCByZXEsIHRoaXMuYXV0aEhlYWRlcih7IHJvb21SZWNvcmQ6IHRydWUgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIGxpdmVraXRfZWdyZXNzXzEuRWdyZXNzSW5mby5mcm9tSlNPTihkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXJ0VHJhY2tDb21wb3NpdGVFZ3Jlc3Mocm9vbU5hbWUsIG91dHB1dCwgb3B0c09yQXVkaW9UcmFja0lkLCB2aWRlb1RyYWNrSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGxldCBhdWRpb1RyYWNrSWQ7XG4gICAgICAgICAgICBpZiAob3B0c09yQXVkaW9UcmFja0lkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdHNPckF1ZGlvVHJhY2tJZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9UcmFja0lkID0gb3B0c09yQXVkaW9UcmFja0lkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0cyA9IG9wdHNPckF1ZGlvVHJhY2tJZDtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9UcmFja0lkID0gb3B0cy5hdWRpb1RyYWNrSWQ7XG4gICAgICAgICAgICAgICAgICAgIHZpZGVvVHJhY2tJZCA9IG9wdHMudmlkZW9UcmFja0lkO1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0cy5lbmNvZGluZ09wdGlvbnM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXVkaW9UcmFja0lkICE9PSBudWxsICYmIGF1ZGlvVHJhY2tJZCAhPT0gdm9pZCAwID8gYXVkaW9UcmFja0lkIDogKGF1ZGlvVHJhY2tJZCA9ICcnKTtcbiAgICAgICAgICAgIHZpZGVvVHJhY2tJZCAhPT0gbnVsbCAmJiB2aWRlb1RyYWNrSWQgIT09IHZvaWQgMCA/IHZpZGVvVHJhY2tJZCA6ICh2aWRlb1RyYWNrSWQgPSAnJyk7XG4gICAgICAgICAgICBjb25zdCB7IGZpbGUsIHN0cmVhbSwgc2VnbWVudHMsIHByZXNldCwgYWR2YW5jZWQsIGZpbGVPdXRwdXRzLCBzdHJlYW1PdXRwdXRzLCBzZWdtZW50T3V0cHV0cyB9ID0gdGhpcy5nZXRPdXRwdXRQYXJhbXMob3V0cHV0LCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IHJlcSA9IGxpdmVraXRfZWdyZXNzXzEuVHJhY2tDb21wb3NpdGVFZ3Jlc3NSZXF1ZXN0LnRvSlNPTih7XG4gICAgICAgICAgICAgICAgcm9vbU5hbWUsXG4gICAgICAgICAgICAgICAgYXVkaW9UcmFja0lkLFxuICAgICAgICAgICAgICAgIHZpZGVvVHJhY2tJZCxcbiAgICAgICAgICAgICAgICBmaWxlLFxuICAgICAgICAgICAgICAgIHN0cmVhbSxcbiAgICAgICAgICAgICAgICBzZWdtZW50cyxcbiAgICAgICAgICAgICAgICBwcmVzZXQsXG4gICAgICAgICAgICAgICAgYWR2YW5jZWQsXG4gICAgICAgICAgICAgICAgZmlsZU91dHB1dHMsXG4gICAgICAgICAgICAgICAgc3RyZWFtT3V0cHV0cyxcbiAgICAgICAgICAgICAgICBzZWdtZW50T3V0cHV0cyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHRoaXMucnBjLnJlcXVlc3Qoc3ZjLCAnU3RhcnRUcmFja0NvbXBvc2l0ZUVncmVzcycsIHJlcSwgdGhpcy5hdXRoSGVhZGVyKHsgcm9vbVJlY29yZDogdHJ1ZSB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbGl2ZWtpdF9lZ3Jlc3NfMS5FZ3Jlc3NJbmZvLmZyb21KU09OKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaXNFbmNvZGVkT3V0cHV0cyhvdXRwdXQpIHtcbiAgICAgICAgcmV0dXJuIChvdXRwdXQuZmlsZSAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBvdXRwdXQuc3RyZWFtICE9PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIG91dHB1dC5zZWdtZW50cyAhPT0gdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgaXNFbmNvZGVkRmlsZU91dHB1dChvdXRwdXQpIHtcbiAgICAgICAgcmV0dXJuIChvdXRwdXQuZmlsZXBhdGggIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgb3V0cHV0LmZpbGVUeXBlICE9PSB1bmRlZmluZWQpO1xuICAgIH1cbiAgICBpc1NlZ21lbnRlZEZpbGVPdXRwdXQob3V0cHV0KSB7XG4gICAgICAgIHJldHVybiAob3V0cHV0LmZpbGVuYW1lUHJlZml4ICE9PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIG91dHB1dC5wbGF5bGlzdE5hbWUgIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgb3V0cHV0LmZpbGVuYW1lU3VmZml4ICE9PSB1bmRlZmluZWQpO1xuICAgIH1cbiAgICBpc1N0cmVhbU91dHB1dChvdXRwdXQpIHtcbiAgICAgICAgcmV0dXJuIChvdXRwdXQucHJvdG9jb2wgIT09IHVuZGVmaW5lZCB8fCBvdXRwdXQudXJscyAhPT0gdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgZ2V0T3V0cHV0UGFyYW1zKG91dHB1dCwgb3B0aW9ucykge1xuICAgICAgICBsZXQgZmlsZTtcbiAgICAgICAgbGV0IGZpbGVPdXRwdXRzO1xuICAgICAgICBsZXQgc3RyZWFtO1xuICAgICAgICBsZXQgc3RyZWFtT3V0cHV0cztcbiAgICAgICAgbGV0IHNlZ21lbnRzO1xuICAgICAgICBsZXQgc2VnbWVudE91dHB1dHM7XG4gICAgICAgIGxldCBwcmVzZXQ7XG4gICAgICAgIGxldCBhZHZhbmNlZDtcbiAgICAgICAgaWYgKHRoaXMuaXNFbmNvZGVkT3V0cHV0cyhvdXRwdXQpKSB7XG4gICAgICAgICAgICBpZiAob3V0cHV0LmZpbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGZpbGVPdXRwdXRzID0gW291dHB1dC5maWxlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvdXRwdXQuc3RyZWFtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzdHJlYW1PdXRwdXRzID0gW291dHB1dC5zdHJlYW1dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG91dHB1dC5zZWdtZW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc2VnbWVudE91dHB1dHMgPSBbb3V0cHV0LnNlZ21lbnRzXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmlzRW5jb2RlZEZpbGVPdXRwdXQob3V0cHV0KSkge1xuICAgICAgICAgICAgZmlsZSA9IG91dHB1dDtcbiAgICAgICAgICAgIGZpbGVPdXRwdXRzID0gW2ZpbGVdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaXNTZWdtZW50ZWRGaWxlT3V0cHV0KG91dHB1dCkpIHtcbiAgICAgICAgICAgIHNlZ21lbnRzID0gb3V0cHV0O1xuICAgICAgICAgICAgc2VnbWVudE91dHB1dHMgPSBbc2VnbWVudHNdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaXNTdHJlYW1PdXRwdXQob3V0cHV0KSkge1xuICAgICAgICAgICAgc3RyZWFtID0gb3V0cHV0O1xuICAgICAgICAgICAgc3RyZWFtT3V0cHV0cyA9IFtzdHJlYW1dO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgcHJlc2V0ID0gb3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFkdmFuY2VkID0gb3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBmaWxlLCBzdHJlYW0sIHNlZ21lbnRzLCBwcmVzZXQsIGFkdmFuY2VkLCBmaWxlT3V0cHV0cywgc3RyZWFtT3V0cHV0cywgc2VnbWVudE91dHB1dHMgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHJvb21OYW1lIHJvb20gbmFtZVxuICAgICAqIEBwYXJhbSBvdXRwdXQgZmlsZSBvciB3ZWJzb2NrZXQgb3V0cHV0XG4gICAgICogQHBhcmFtIHRyYWNrSWQgdHJhY2sgSWRcbiAgICAgKi9cbiAgICBzdGFydFRyYWNrRWdyZXNzKHJvb21OYW1lLCBvdXRwdXQsIHRyYWNrSWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGxldCBmaWxlO1xuICAgICAgICAgICAgbGV0IHdlYnNvY2tldFVybDtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3V0cHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHdlYnNvY2tldFVybCA9IG91dHB1dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZpbGUgPSBvdXRwdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXEgPSBsaXZla2l0X2VncmVzc18xLlRyYWNrRWdyZXNzUmVxdWVzdC50b0pTT04oe1xuICAgICAgICAgICAgICAgIHJvb21OYW1lLFxuICAgICAgICAgICAgICAgIHRyYWNrSWQsXG4gICAgICAgICAgICAgICAgZmlsZSxcbiAgICAgICAgICAgICAgICB3ZWJzb2NrZXRVcmwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCB0aGlzLnJwYy5yZXF1ZXN0KHN2YywgJ1N0YXJ0VHJhY2tFZ3Jlc3MnLCByZXEsIHRoaXMuYXV0aEhlYWRlcih7IHJvb21SZWNvcmQ6IHRydWUgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIGxpdmVraXRfZWdyZXNzXzEuRWdyZXNzSW5mby5mcm9tSlNPTihkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBlZ3Jlc3NJZFxuICAgICAqIEBwYXJhbSBsYXlvdXRcbiAgICAgKi9cbiAgICB1cGRhdGVMYXlvdXQoZWdyZXNzSWQsIGxheW91dCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHRoaXMucnBjLnJlcXVlc3Qoc3ZjLCAnVXBkYXRlTGF5b3V0JywgbGl2ZWtpdF9lZ3Jlc3NfMS5VcGRhdGVMYXlvdXRSZXF1ZXN0LnRvSlNPTih7IGVncmVzc0lkLCBsYXlvdXQgfSksIHRoaXMuYXV0aEhlYWRlcih7IHJvb21SZWNvcmQ6IHRydWUgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIGxpdmVraXRfZWdyZXNzXzEuRWdyZXNzSW5mby5mcm9tSlNPTihkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBlZ3Jlc3NJZFxuICAgICAqIEBwYXJhbSBhZGRPdXRwdXRVcmxzXG4gICAgICogQHBhcmFtIHJlbW92ZU91dHB1dFVybHNcbiAgICAgKi9cbiAgICB1cGRhdGVTdHJlYW0oZWdyZXNzSWQsIGFkZE91dHB1dFVybHMsIHJlbW92ZU91dHB1dFVybHMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGFkZE91dHB1dFVybHMgIT09IG51bGwgJiYgYWRkT3V0cHV0VXJscyAhPT0gdm9pZCAwID8gYWRkT3V0cHV0VXJscyA6IChhZGRPdXRwdXRVcmxzID0gW10pO1xuICAgICAgICAgICAgcmVtb3ZlT3V0cHV0VXJscyAhPT0gbnVsbCAmJiByZW1vdmVPdXRwdXRVcmxzICE9PSB2b2lkIDAgPyByZW1vdmVPdXRwdXRVcmxzIDogKHJlbW92ZU91dHB1dFVybHMgPSBbXSk7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0geWllbGQgdGhpcy5ycGMucmVxdWVzdChzdmMsICdVcGRhdGVTdHJlYW0nLCBsaXZla2l0X2VncmVzc18xLlVwZGF0ZVN0cmVhbVJlcXVlc3QudG9KU09OKHsgZWdyZXNzSWQsIGFkZE91dHB1dFVybHMsIHJlbW92ZU91dHB1dFVybHMgfSksIHRoaXMuYXV0aEhlYWRlcih7IHJvb21SZWNvcmQ6IHRydWUgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIGxpdmVraXRfZWdyZXNzXzEuRWdyZXNzSW5mby5mcm9tSlNPTihkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSByb29tTmFtZSBsaXN0IGVncmVzcyBmb3Igb25lIHJvb20gb25seVxuICAgICAqL1xuICAgIGxpc3RFZ3Jlc3Mob3B0aW9ucykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBsZXQgcmVxID0ge307XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgcmVxLnJvb21OYW1lID0gb3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJlcSA9IG9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBkYXRhID0geWllbGQgdGhpcy5ycGMucmVxdWVzdChzdmMsICdMaXN0RWdyZXNzJywgbGl2ZWtpdF9lZ3Jlc3NfMS5MaXN0RWdyZXNzUmVxdWVzdC50b0pTT04ocmVxKSwgdGhpcy5hdXRoSGVhZGVyKHsgcm9vbVJlY29yZDogdHJ1ZSB9KSk7XG4gICAgICAgICAgICByZXR1cm4gKF9hID0gbGl2ZWtpdF9lZ3Jlc3NfMS5MaXN0RWdyZXNzUmVzcG9uc2UuZnJvbUpTT04oZGF0YSkuaXRlbXMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFtdO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGVncmVzc0lkXG4gICAgICovXG4gICAgc3RvcEVncmVzcyhlZ3Jlc3NJZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHRoaXMucnBjLnJlcXVlc3Qoc3ZjLCAnU3RvcEVncmVzcycsIGxpdmVraXRfZWdyZXNzXzEuU3RvcEVncmVzc1JlcXVlc3QudG9KU09OKHsgZWdyZXNzSWQgfSksIHRoaXMuYXV0aEhlYWRlcih7IHJvb21SZWNvcmQ6IHRydWUgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIGxpdmVraXRfZWdyZXNzXzEuRWdyZXNzSW5mby5mcm9tSlNPTihkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5FZ3Jlc3NDbGllbnQgPSBFZ3Jlc3NDbGllbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FZ3Jlc3NDbGllbnQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/livekit-server-sdk/dist/EgressClient.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/livekit-server-sdk/dist/IngressClient.js":
/*!***************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/IngressClient.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.IngressClient = void 0;\nconst livekit_ingress_1 = __webpack_require__(/*! ./proto/livekit_ingress */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_ingress.js\");\nconst ServiceBase_1 = __importDefault(__webpack_require__(/*! ./ServiceBase */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/ServiceBase.js\"));\nconst TwirpRPC_1 = __webpack_require__(/*! ./TwirpRPC */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/TwirpRPC.js\");\nconst svc = 'Ingress';\n/**\n * Client to access Ingress APIs\n */\nclass IngressClient extends ServiceBase_1.default {\n    /**\n     * @param host hostname including protocol. i.e. 'https://cluster.livekit.io'\n     * @param apiKey API Key, can be set in env var LIVEKIT_API_KEY\n     * @param secret API Secret, can be set in env var LIVEKIT_API_SECRET\n     */\n    constructor(host, apiKey, secret) {\n        super(apiKey, secret);\n        this.rpc = new TwirpRPC_1.TwirpRpc(host, TwirpRPC_1.livekitPackage);\n    }\n    /**\n     * @param inputType protocol for the ingress\n     * @param opts CreateIngressOptions\n     */\n    createIngress(inputType, opts) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let name = '';\n            let roomName = '';\n            let participantName = '';\n            let participantIdentity = '';\n            let bypassTranscoding = false;\n            let url = '';\n            let audio;\n            let video;\n            if (opts !== undefined) {\n                name = opts.name || '';\n                roomName = opts.roomName || '';\n                participantName = opts.participantName || '';\n                participantIdentity = opts.participantIdentity || '';\n                bypassTranscoding = opts.bypassTranscoding || false;\n                url = opts.url || '';\n                audio = opts.audio;\n                video = opts.video;\n            }\n            const req = livekit_ingress_1.CreateIngressRequest.toJSON({\n                inputType,\n                name,\n                roomName,\n                participantIdentity,\n                participantName,\n                bypassTranscoding,\n                url,\n                audio,\n                video,\n            });\n            const data = yield this.rpc.request(svc, 'CreateIngress', req, this.authHeader({ ingressAdmin: true }));\n            return livekit_ingress_1.IngressInfo.fromJSON(data);\n        });\n    }\n    /**\n     * @param ingressId ID of the ingress to update\n     * @param opts UpdateIngressOptions\n     */\n    updateIngress(ingressId, opts) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const name = opts.name || '';\n            const roomName = opts.roomName || '';\n            const participantName = opts.participantName || '';\n            const participantIdentity = opts.participantIdentity || '';\n            const { audio, video, bypassTranscoding } = opts;\n            const req = livekit_ingress_1.UpdateIngressRequest.toJSON({\n                ingressId,\n                name,\n                roomName,\n                participantIdentity,\n                participantName,\n                bypassTranscoding,\n                audio,\n                video,\n            });\n            const data = yield this.rpc.request(svc, 'UpdateIngress', req, this.authHeader({ ingressAdmin: true }));\n            return livekit_ingress_1.IngressInfo.fromJSON(data);\n        });\n    }\n    listIngress(arg) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            let req = {};\n            if (typeof arg === 'string') {\n                req.roomName = arg;\n            }\n            else if (arg) {\n                req = arg;\n            }\n            const data = yield this.rpc.request(svc, 'ListIngress', livekit_ingress_1.ListIngressRequest.toJSON(req), this.authHeader({ ingressAdmin: true }));\n            return (_a = livekit_ingress_1.ListIngressResponse.fromJSON(data).items) !== null && _a !== void 0 ? _a : [];\n        });\n    }\n    /**\n     * @param ingressId ingress to delete\n     */\n    deleteIngress(ingressId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = yield this.rpc.request(svc, 'DeleteIngress', livekit_ingress_1.DeleteIngressRequest.toJSON({ ingressId }), this.authHeader({ ingressAdmin: true }));\n            return livekit_ingress_1.IngressInfo.fromJSON(data);\n        });\n    }\n}\nexports.IngressClient = IngressClient;\n//# sourceMappingURL=IngressClient.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9JbmdyZXNzQ2xpZW50LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHFCQUFxQjtBQUNyQiwwQkFBMEIsbUJBQU8sQ0FBQyxpSEFBeUI7QUFDM0Qsc0NBQXNDLG1CQUFPLENBQUMsNkZBQWU7QUFDN0QsbUJBQW1CLG1CQUFPLENBQUMsdUZBQVk7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLDZGQUE2RixvQkFBb0I7QUFDakg7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrQ0FBa0M7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLDZGQUE2RixvQkFBb0I7QUFDakg7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdJQUF3SSxvQkFBb0I7QUFDNUo7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0hBQXNILFdBQVcscUJBQXFCLG9CQUFvQjtBQUMxSztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGl2ZXN0cmVhbS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9JbmdyZXNzQ2xpZW50LmpzPzVlYjIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuSW5ncmVzc0NsaWVudCA9IHZvaWQgMDtcbmNvbnN0IGxpdmVraXRfaW5ncmVzc18xID0gcmVxdWlyZShcIi4vcHJvdG8vbGl2ZWtpdF9pbmdyZXNzXCIpO1xuY29uc3QgU2VydmljZUJhc2VfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9TZXJ2aWNlQmFzZVwiKSk7XG5jb25zdCBUd2lycFJQQ18xID0gcmVxdWlyZShcIi4vVHdpcnBSUENcIik7XG5jb25zdCBzdmMgPSAnSW5ncmVzcyc7XG4vKipcbiAqIENsaWVudCB0byBhY2Nlc3MgSW5ncmVzcyBBUElzXG4gKi9cbmNsYXNzIEluZ3Jlc3NDbGllbnQgZXh0ZW5kcyBTZXJ2aWNlQmFzZV8xLmRlZmF1bHQge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBob3N0IGhvc3RuYW1lIGluY2x1ZGluZyBwcm90b2NvbC4gaS5lLiAnaHR0cHM6Ly9jbHVzdGVyLmxpdmVraXQuaW8nXG4gICAgICogQHBhcmFtIGFwaUtleSBBUEkgS2V5LCBjYW4gYmUgc2V0IGluIGVudiB2YXIgTElWRUtJVF9BUElfS0VZXG4gICAgICogQHBhcmFtIHNlY3JldCBBUEkgU2VjcmV0LCBjYW4gYmUgc2V0IGluIGVudiB2YXIgTElWRUtJVF9BUElfU0VDUkVUXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoaG9zdCwgYXBpS2V5LCBzZWNyZXQpIHtcbiAgICAgICAgc3VwZXIoYXBpS2V5LCBzZWNyZXQpO1xuICAgICAgICB0aGlzLnJwYyA9IG5ldyBUd2lycFJQQ18xLlR3aXJwUnBjKGhvc3QsIFR3aXJwUlBDXzEubGl2ZWtpdFBhY2thZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gaW5wdXRUeXBlIHByb3RvY29sIGZvciB0aGUgaW5ncmVzc1xuICAgICAqIEBwYXJhbSBvcHRzIENyZWF0ZUluZ3Jlc3NPcHRpb25zXG4gICAgICovXG4gICAgY3JlYXRlSW5ncmVzcyhpbnB1dFR5cGUsIG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGxldCBuYW1lID0gJyc7XG4gICAgICAgICAgICBsZXQgcm9vbU5hbWUgPSAnJztcbiAgICAgICAgICAgIGxldCBwYXJ0aWNpcGFudE5hbWUgPSAnJztcbiAgICAgICAgICAgIGxldCBwYXJ0aWNpcGFudElkZW50aXR5ID0gJyc7XG4gICAgICAgICAgICBsZXQgYnlwYXNzVHJhbnNjb2RpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCB1cmwgPSAnJztcbiAgICAgICAgICAgIGxldCBhdWRpbztcbiAgICAgICAgICAgIGxldCB2aWRlbztcbiAgICAgICAgICAgIGlmIChvcHRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBuYW1lID0gb3B0cy5uYW1lIHx8ICcnO1xuICAgICAgICAgICAgICAgIHJvb21OYW1lID0gb3B0cy5yb29tTmFtZSB8fCAnJztcbiAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudE5hbWUgPSBvcHRzLnBhcnRpY2lwYW50TmFtZSB8fCAnJztcbiAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudElkZW50aXR5ID0gb3B0cy5wYXJ0aWNpcGFudElkZW50aXR5IHx8ICcnO1xuICAgICAgICAgICAgICAgIGJ5cGFzc1RyYW5zY29kaW5nID0gb3B0cy5ieXBhc3NUcmFuc2NvZGluZyB8fCBmYWxzZTtcbiAgICAgICAgICAgICAgICB1cmwgPSBvcHRzLnVybCB8fCAnJztcbiAgICAgICAgICAgICAgICBhdWRpbyA9IG9wdHMuYXVkaW87XG4gICAgICAgICAgICAgICAgdmlkZW8gPSBvcHRzLnZpZGVvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVxID0gbGl2ZWtpdF9pbmdyZXNzXzEuQ3JlYXRlSW5ncmVzc1JlcXVlc3QudG9KU09OKHtcbiAgICAgICAgICAgICAgICBpbnB1dFR5cGUsXG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICByb29tTmFtZSxcbiAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudElkZW50aXR5LFxuICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50TmFtZSxcbiAgICAgICAgICAgICAgICBieXBhc3NUcmFuc2NvZGluZyxcbiAgICAgICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICAgICAgYXVkaW8sXG4gICAgICAgICAgICAgICAgdmlkZW8sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCB0aGlzLnJwYy5yZXF1ZXN0KHN2YywgJ0NyZWF0ZUluZ3Jlc3MnLCByZXEsIHRoaXMuYXV0aEhlYWRlcih7IGluZ3Jlc3NBZG1pbjogdHJ1ZSB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbGl2ZWtpdF9pbmdyZXNzXzEuSW5ncmVzc0luZm8uZnJvbUpTT04oZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gaW5ncmVzc0lkIElEIG9mIHRoZSBpbmdyZXNzIHRvIHVwZGF0ZVxuICAgICAqIEBwYXJhbSBvcHRzIFVwZGF0ZUluZ3Jlc3NPcHRpb25zXG4gICAgICovXG4gICAgdXBkYXRlSW5ncmVzcyhpbmdyZXNzSWQsIG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBvcHRzLm5hbWUgfHwgJyc7XG4gICAgICAgICAgICBjb25zdCByb29tTmFtZSA9IG9wdHMucm9vbU5hbWUgfHwgJyc7XG4gICAgICAgICAgICBjb25zdCBwYXJ0aWNpcGFudE5hbWUgPSBvcHRzLnBhcnRpY2lwYW50TmFtZSB8fCAnJztcbiAgICAgICAgICAgIGNvbnN0IHBhcnRpY2lwYW50SWRlbnRpdHkgPSBvcHRzLnBhcnRpY2lwYW50SWRlbnRpdHkgfHwgJyc7XG4gICAgICAgICAgICBjb25zdCB7IGF1ZGlvLCB2aWRlbywgYnlwYXNzVHJhbnNjb2RpbmcgfSA9IG9wdHM7XG4gICAgICAgICAgICBjb25zdCByZXEgPSBsaXZla2l0X2luZ3Jlc3NfMS5VcGRhdGVJbmdyZXNzUmVxdWVzdC50b0pTT04oe1xuICAgICAgICAgICAgICAgIGluZ3Jlc3NJZCxcbiAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgIHJvb21OYW1lLFxuICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50SWRlbnRpdHksXG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnROYW1lLFxuICAgICAgICAgICAgICAgIGJ5cGFzc1RyYW5zY29kaW5nLFxuICAgICAgICAgICAgICAgIGF1ZGlvLFxuICAgICAgICAgICAgICAgIHZpZGVvLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0geWllbGQgdGhpcy5ycGMucmVxdWVzdChzdmMsICdVcGRhdGVJbmdyZXNzJywgcmVxLCB0aGlzLmF1dGhIZWFkZXIoeyBpbmdyZXNzQWRtaW46IHRydWUgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIGxpdmVraXRfaW5ncmVzc18xLkluZ3Jlc3NJbmZvLmZyb21KU09OKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGlzdEluZ3Jlc3MoYXJnKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGxldCByZXEgPSB7fTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJlcS5yb29tTmFtZSA9IGFyZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGFyZykge1xuICAgICAgICAgICAgICAgIHJlcSA9IGFyZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCB0aGlzLnJwYy5yZXF1ZXN0KHN2YywgJ0xpc3RJbmdyZXNzJywgbGl2ZWtpdF9pbmdyZXNzXzEuTGlzdEluZ3Jlc3NSZXF1ZXN0LnRvSlNPTihyZXEpLCB0aGlzLmF1dGhIZWFkZXIoeyBpbmdyZXNzQWRtaW46IHRydWUgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIChfYSA9IGxpdmVraXRfaW5ncmVzc18xLkxpc3RJbmdyZXNzUmVzcG9uc2UuZnJvbUpTT04oZGF0YSkuaXRlbXMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFtdO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGluZ3Jlc3NJZCBpbmdyZXNzIHRvIGRlbGV0ZVxuICAgICAqL1xuICAgIGRlbGV0ZUluZ3Jlc3MoaW5ncmVzc0lkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0geWllbGQgdGhpcy5ycGMucmVxdWVzdChzdmMsICdEZWxldGVJbmdyZXNzJywgbGl2ZWtpdF9pbmdyZXNzXzEuRGVsZXRlSW5ncmVzc1JlcXVlc3QudG9KU09OKHsgaW5ncmVzc0lkIH0pLCB0aGlzLmF1dGhIZWFkZXIoeyBpbmdyZXNzQWRtaW46IHRydWUgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIGxpdmVraXRfaW5ncmVzc18xLkluZ3Jlc3NJbmZvLmZyb21KU09OKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLkluZ3Jlc3NDbGllbnQgPSBJbmdyZXNzQ2xpZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW5ncmVzc0NsaWVudC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/livekit-server-sdk/dist/IngressClient.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/livekit-server-sdk/dist/RoomServiceClient.js":
/*!*******************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/RoomServiceClient.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.RoomServiceClient = void 0;\nconst livekit_models_1 = __webpack_require__(/*! ./proto/livekit_models */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_models.js\");\nconst livekit_room_1 = __webpack_require__(/*! ./proto/livekit_room */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_room.js\");\nconst ServiceBase_1 = __importDefault(__webpack_require__(/*! ./ServiceBase */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/ServiceBase.js\"));\nconst TwirpRPC_1 = __webpack_require__(/*! ./TwirpRPC */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/TwirpRPC.js\");\nconst svc = 'RoomService';\n/**\n * Client to access Room APIs\n */\nclass RoomServiceClient extends ServiceBase_1.default {\n    /**\n     *\n     * @param host hostname including protocol. i.e. 'https://cluster.livekit.io'\n     * @param apiKey API Key, can be set in env var LIVEKIT_API_KEY\n     * @param secret API Secret, can be set in env var LIVEKIT_API_SECRET\n     */\n    constructor(host, apiKey, secret) {\n        super(apiKey, secret);\n        this.rpc = new TwirpRPC_1.TwirpRpc(host, TwirpRPC_1.livekitPackage);\n    }\n    /**\n     * Creates a new room. Explicit room creation is not required, since rooms will\n     * be automatically created when the first participant joins. This method can be\n     * used to customize room settings.\n     * @param options\n     */\n    createRoom(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = yield this.rpc.request(svc, 'CreateRoom', livekit_room_1.CreateRoomRequest.toJSON(livekit_room_1.CreateRoomRequest.fromPartial(options)), this.authHeader({ roomCreate: true }));\n            return livekit_models_1.Room.fromJSON(data);\n        });\n    }\n    /**\n     * List active rooms\n     * @param names when undefined or empty, list all rooms.\n     *              otherwise returns rooms with matching names\n     * @returns\n     */\n    listRooms(names) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = yield this.rpc.request(svc, 'ListRooms', livekit_room_1.ListRoomsRequest.toJSON({ names: names !== null && names !== void 0 ? names : [] }), this.authHeader({ roomList: true }));\n            const res = livekit_room_1.ListRoomsResponse.fromJSON(data);\n            return (_a = res.rooms) !== null && _a !== void 0 ? _a : [];\n        });\n    }\n    deleteRoom(room) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.rpc.request(svc, 'DeleteRoom', livekit_room_1.DeleteRoomRequest.toJSON({ room }), this.authHeader({ roomCreate: true }));\n        });\n    }\n    /**\n     * Update metadata of a room\n     * @param room name of the room\n     * @param metadata the new metadata for the room\n     */\n    updateRoomMetadata(room, metadata) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = yield this.rpc.request(svc, 'UpdateRoomMetadata', livekit_room_1.UpdateRoomMetadataRequest.toJSON({ room, metadata }), this.authHeader({ roomAdmin: true, room }));\n            return livekit_models_1.Room.fromJSON(data);\n        });\n    }\n    /**\n     * List participants in a room\n     * @param room name of the room\n     */\n    listParticipants(room) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = yield this.rpc.request(svc, 'ListParticipants', livekit_room_1.ListParticipantsRequest.toJSON({ room }), this.authHeader({ roomAdmin: true, room }));\n            const res = livekit_room_1.ListParticipantsResponse.fromJSON(data);\n            return (_a = res.participants) !== null && _a !== void 0 ? _a : [];\n        });\n    }\n    /**\n     * Get information on a specific participant, including the tracks that participant\n     * has published\n     * @param room name of the room\n     * @param identity identity of the participant to return\n     */\n    getParticipant(room, identity) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = yield this.rpc.request(svc, 'GetParticipant', livekit_room_1.RoomParticipantIdentity.toJSON({ room, identity }), this.authHeader({ roomAdmin: true, room }));\n            return livekit_models_1.ParticipantInfo.fromJSON(data);\n        });\n    }\n    /**\n     * Removes a participant in the room. This will disconnect the participant\n     * and will emit a Disconnected event for that participant.\n     * Even after being removed, the participant can still re-join the room.\n     * @param room\n     * @param identity\n     */\n    removeParticipant(room, identity) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.rpc.request(svc, 'RemoveParticipant', livekit_room_1.RoomParticipantIdentity.toJSON({ room, identity }), this.authHeader({ roomAdmin: true, room }));\n        });\n    }\n    /**\n     * Mutes a track that the participant has published.\n     * @param room\n     * @param identity\n     * @param trackSid sid of the track to be muted\n     * @param muted true to mute, false to unmute\n     */\n    mutePublishedTrack(room, identity, trackSid, muted) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const req = livekit_room_1.MuteRoomTrackRequest.toJSON({\n                room,\n                identity,\n                trackSid,\n                muted,\n            });\n            const data = yield this.rpc.request(svc, 'MutePublishedTrack', req, this.authHeader({ roomAdmin: true, room }));\n            const res = livekit_room_1.MuteRoomTrackResponse.fromJSON(data);\n            return res.track;\n        });\n    }\n    /**\n     * Updates a participant's metadata or permissions\n     * @param room\n     * @param identity\n     * @param metadata optional, metadata to update\n     * @param permission optional, new permissions to assign to participant\n     * @param name optional, new name for participant\n     */\n    updateParticipant(room, identity, metadata, permission, name) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const req = {\n                room,\n                identity,\n                metadata: metadata || '',\n                name: name || '',\n            };\n            if (permission) {\n                req.permission = livekit_models_1.ParticipantPermission.fromPartial(permission);\n            }\n            const data = yield this.rpc.request(svc, 'UpdateParticipant', livekit_room_1.UpdateParticipantRequest.toJSON(req), this.authHeader({ roomAdmin: true, room }));\n            return livekit_models_1.ParticipantInfo.fromJSON(data);\n        });\n    }\n    /**\n     * Updates a participant's subscription to tracks\n     * @param room\n     * @param identity\n     * @param trackSids\n     * @param subscribe true to subscribe, false to unsubscribe\n     */\n    updateSubscriptions(room, identity, trackSids, subscribe) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const req = livekit_room_1.UpdateSubscriptionsRequest.toJSON({\n                room,\n                identity,\n                trackSids,\n                subscribe,\n                participantTracks: [],\n            });\n            yield this.rpc.request(svc, 'UpdateSubscriptions', req, this.authHeader({ roomAdmin: true, room }));\n        });\n    }\n    sendData(room, data, kind, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const destinationSids = Array.isArray(options) ? options : options.destinationSids;\n            const topic = Array.isArray(options) ? undefined : options.topic;\n            const req = {\n                room,\n                data,\n                kind,\n                destinationSids: destinationSids !== null && destinationSids !== void 0 ? destinationSids : [],\n                topic,\n            };\n            if (!Array.isArray(options) && options.destinationIdentities) {\n                req.destinationIdentities = options.destinationIdentities;\n            }\n            yield this.rpc.request(svc, 'SendData', livekit_room_1.SendDataRequest.toJSON(req), this.authHeader({ roomAdmin: true, room }));\n        });\n    }\n}\nexports.RoomServiceClient = RoomServiceClient;\n//# sourceMappingURL=RoomServiceClient.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9Sb29tU2VydmljZUNsaWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNEJBQTRCLCtEQUErRCxpQkFBaUI7QUFDNUc7QUFDQSxvQ0FBb0MsTUFBTSwrQkFBK0IsWUFBWTtBQUNyRixtQ0FBbUMsTUFBTSxtQ0FBbUMsWUFBWTtBQUN4RixnQ0FBZ0M7QUFDaEM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCx5QkFBeUI7QUFDekIseUJBQXlCLG1CQUFPLENBQUMsK0dBQXdCO0FBQ3pELHVCQUF1QixtQkFBTyxDQUFDLDJHQUFzQjtBQUNyRCxzQ0FBc0MsbUJBQU8sQ0FBQyw2RkFBZTtBQUM3RCxtQkFBbUIsbUJBQU8sQ0FBQyx1RkFBWTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUxBQXFMLGtCQUFrQjtBQUN2TTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJHQUEyRyx3REFBd0QscUJBQXFCLGdCQUFnQjtBQUN4TTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGdHQUFnRyxNQUFNLHFCQUFxQixrQkFBa0I7QUFDN0ksU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2SEFBNkgsZ0JBQWdCLHFCQUFxQix1QkFBdUI7QUFDekw7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlIQUF5SCxNQUFNLHFCQUFxQix1QkFBdUI7QUFDM0s7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1SEFBdUgsZ0JBQWdCLHFCQUFxQix1QkFBdUI7QUFDbkw7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2R0FBNkcsZ0JBQWdCLHFCQUFxQix1QkFBdUI7QUFDekssU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixrR0FBa0csdUJBQXVCO0FBQ3pIO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlKQUFpSix1QkFBdUI7QUFDeEs7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2Isc0ZBQXNGLHVCQUF1QjtBQUM3RyxTQUFTO0FBQ1Q7QUFDQSwyQ0FBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrSEFBa0gsdUJBQXVCO0FBQ3pJLFNBQVM7QUFDVDtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGl2ZXN0cmVhbS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9Sb29tU2VydmljZUNsaWVudC5qcz81M2Y2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlJvb21TZXJ2aWNlQ2xpZW50ID0gdm9pZCAwO1xuY29uc3QgbGl2ZWtpdF9tb2RlbHNfMSA9IHJlcXVpcmUoXCIuL3Byb3RvL2xpdmVraXRfbW9kZWxzXCIpO1xuY29uc3QgbGl2ZWtpdF9yb29tXzEgPSByZXF1aXJlKFwiLi9wcm90by9saXZla2l0X3Jvb21cIik7XG5jb25zdCBTZXJ2aWNlQmFzZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1NlcnZpY2VCYXNlXCIpKTtcbmNvbnN0IFR3aXJwUlBDXzEgPSByZXF1aXJlKFwiLi9Ud2lycFJQQ1wiKTtcbmNvbnN0IHN2YyA9ICdSb29tU2VydmljZSc7XG4vKipcbiAqIENsaWVudCB0byBhY2Nlc3MgUm9vbSBBUElzXG4gKi9cbmNsYXNzIFJvb21TZXJ2aWNlQ2xpZW50IGV4dGVuZHMgU2VydmljZUJhc2VfMS5kZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBob3N0IGhvc3RuYW1lIGluY2x1ZGluZyBwcm90b2NvbC4gaS5lLiAnaHR0cHM6Ly9jbHVzdGVyLmxpdmVraXQuaW8nXG4gICAgICogQHBhcmFtIGFwaUtleSBBUEkgS2V5LCBjYW4gYmUgc2V0IGluIGVudiB2YXIgTElWRUtJVF9BUElfS0VZXG4gICAgICogQHBhcmFtIHNlY3JldCBBUEkgU2VjcmV0LCBjYW4gYmUgc2V0IGluIGVudiB2YXIgTElWRUtJVF9BUElfU0VDUkVUXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoaG9zdCwgYXBpS2V5LCBzZWNyZXQpIHtcbiAgICAgICAgc3VwZXIoYXBpS2V5LCBzZWNyZXQpO1xuICAgICAgICB0aGlzLnJwYyA9IG5ldyBUd2lycFJQQ18xLlR3aXJwUnBjKGhvc3QsIFR3aXJwUlBDXzEubGl2ZWtpdFBhY2thZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHJvb20uIEV4cGxpY2l0IHJvb20gY3JlYXRpb24gaXMgbm90IHJlcXVpcmVkLCBzaW5jZSByb29tcyB3aWxsXG4gICAgICogYmUgYXV0b21hdGljYWxseSBjcmVhdGVkIHdoZW4gdGhlIGZpcnN0IHBhcnRpY2lwYW50IGpvaW5zLiBUaGlzIG1ldGhvZCBjYW4gYmVcbiAgICAgKiB1c2VkIHRvIGN1c3RvbWl6ZSByb29tIHNldHRpbmdzLlxuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICovXG4gICAgY3JlYXRlUm9vbShvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0geWllbGQgdGhpcy5ycGMucmVxdWVzdChzdmMsICdDcmVhdGVSb29tJywgbGl2ZWtpdF9yb29tXzEuQ3JlYXRlUm9vbVJlcXVlc3QudG9KU09OKGxpdmVraXRfcm9vbV8xLkNyZWF0ZVJvb21SZXF1ZXN0LmZyb21QYXJ0aWFsKG9wdGlvbnMpKSwgdGhpcy5hdXRoSGVhZGVyKHsgcm9vbUNyZWF0ZTogdHJ1ZSB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbGl2ZWtpdF9tb2RlbHNfMS5Sb29tLmZyb21KU09OKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTGlzdCBhY3RpdmUgcm9vbXNcbiAgICAgKiBAcGFyYW0gbmFtZXMgd2hlbiB1bmRlZmluZWQgb3IgZW1wdHksIGxpc3QgYWxsIHJvb21zLlxuICAgICAqICAgICAgICAgICAgICBvdGhlcndpc2UgcmV0dXJucyByb29tcyB3aXRoIG1hdGNoaW5nIG5hbWVzXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBsaXN0Um9vbXMobmFtZXMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHRoaXMucnBjLnJlcXVlc3Qoc3ZjLCAnTGlzdFJvb21zJywgbGl2ZWtpdF9yb29tXzEuTGlzdFJvb21zUmVxdWVzdC50b0pTT04oeyBuYW1lczogbmFtZXMgIT09IG51bGwgJiYgbmFtZXMgIT09IHZvaWQgMCA/IG5hbWVzIDogW10gfSksIHRoaXMuYXV0aEhlYWRlcih7IHJvb21MaXN0OiB0cnVlIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGxpdmVraXRfcm9vbV8xLkxpc3RSb29tc1Jlc3BvbnNlLmZyb21KU09OKGRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIChfYSA9IHJlcy5yb29tcykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW107XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWxldGVSb29tKHJvb20pIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMucnBjLnJlcXVlc3Qoc3ZjLCAnRGVsZXRlUm9vbScsIGxpdmVraXRfcm9vbV8xLkRlbGV0ZVJvb21SZXF1ZXN0LnRvSlNPTih7IHJvb20gfSksIHRoaXMuYXV0aEhlYWRlcih7IHJvb21DcmVhdGU6IHRydWUgfSkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIG1ldGFkYXRhIG9mIGEgcm9vbVxuICAgICAqIEBwYXJhbSByb29tIG5hbWUgb2YgdGhlIHJvb21cbiAgICAgKiBAcGFyYW0gbWV0YWRhdGEgdGhlIG5ldyBtZXRhZGF0YSBmb3IgdGhlIHJvb21cbiAgICAgKi9cbiAgICB1cGRhdGVSb29tTWV0YWRhdGEocm9vbSwgbWV0YWRhdGEpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCB0aGlzLnJwYy5yZXF1ZXN0KHN2YywgJ1VwZGF0ZVJvb21NZXRhZGF0YScsIGxpdmVraXRfcm9vbV8xLlVwZGF0ZVJvb21NZXRhZGF0YVJlcXVlc3QudG9KU09OKHsgcm9vbSwgbWV0YWRhdGEgfSksIHRoaXMuYXV0aEhlYWRlcih7IHJvb21BZG1pbjogdHJ1ZSwgcm9vbSB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbGl2ZWtpdF9tb2RlbHNfMS5Sb29tLmZyb21KU09OKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTGlzdCBwYXJ0aWNpcGFudHMgaW4gYSByb29tXG4gICAgICogQHBhcmFtIHJvb20gbmFtZSBvZiB0aGUgcm9vbVxuICAgICAqL1xuICAgIGxpc3RQYXJ0aWNpcGFudHMocm9vbSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0geWllbGQgdGhpcy5ycGMucmVxdWVzdChzdmMsICdMaXN0UGFydGljaXBhbnRzJywgbGl2ZWtpdF9yb29tXzEuTGlzdFBhcnRpY2lwYW50c1JlcXVlc3QudG9KU09OKHsgcm9vbSB9KSwgdGhpcy5hdXRoSGVhZGVyKHsgcm9vbUFkbWluOiB0cnVlLCByb29tIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGxpdmVraXRfcm9vbV8xLkxpc3RQYXJ0aWNpcGFudHNSZXNwb25zZS5mcm9tSlNPTihkYXRhKTtcbiAgICAgICAgICAgIHJldHVybiAoX2EgPSByZXMucGFydGljaXBhbnRzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBpbmZvcm1hdGlvbiBvbiBhIHNwZWNpZmljIHBhcnRpY2lwYW50LCBpbmNsdWRpbmcgdGhlIHRyYWNrcyB0aGF0IHBhcnRpY2lwYW50XG4gICAgICogaGFzIHB1Ymxpc2hlZFxuICAgICAqIEBwYXJhbSByb29tIG5hbWUgb2YgdGhlIHJvb21cbiAgICAgKiBAcGFyYW0gaWRlbnRpdHkgaWRlbnRpdHkgb2YgdGhlIHBhcnRpY2lwYW50IHRvIHJldHVyblxuICAgICAqL1xuICAgIGdldFBhcnRpY2lwYW50KHJvb20sIGlkZW50aXR5KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0geWllbGQgdGhpcy5ycGMucmVxdWVzdChzdmMsICdHZXRQYXJ0aWNpcGFudCcsIGxpdmVraXRfcm9vbV8xLlJvb21QYXJ0aWNpcGFudElkZW50aXR5LnRvSlNPTih7IHJvb20sIGlkZW50aXR5IH0pLCB0aGlzLmF1dGhIZWFkZXIoeyByb29tQWRtaW46IHRydWUsIHJvb20gfSkpO1xuICAgICAgICAgICAgcmV0dXJuIGxpdmVraXRfbW9kZWxzXzEuUGFydGljaXBhbnRJbmZvLmZyb21KU09OKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIHBhcnRpY2lwYW50IGluIHRoZSByb29tLiBUaGlzIHdpbGwgZGlzY29ubmVjdCB0aGUgcGFydGljaXBhbnRcbiAgICAgKiBhbmQgd2lsbCBlbWl0IGEgRGlzY29ubmVjdGVkIGV2ZW50IGZvciB0aGF0IHBhcnRpY2lwYW50LlxuICAgICAqIEV2ZW4gYWZ0ZXIgYmVpbmcgcmVtb3ZlZCwgdGhlIHBhcnRpY2lwYW50IGNhbiBzdGlsbCByZS1qb2luIHRoZSByb29tLlxuICAgICAqIEBwYXJhbSByb29tXG4gICAgICogQHBhcmFtIGlkZW50aXR5XG4gICAgICovXG4gICAgcmVtb3ZlUGFydGljaXBhbnQocm9vbSwgaWRlbnRpdHkpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMucnBjLnJlcXVlc3Qoc3ZjLCAnUmVtb3ZlUGFydGljaXBhbnQnLCBsaXZla2l0X3Jvb21fMS5Sb29tUGFydGljaXBhbnRJZGVudGl0eS50b0pTT04oeyByb29tLCBpZGVudGl0eSB9KSwgdGhpcy5hdXRoSGVhZGVyKHsgcm9vbUFkbWluOiB0cnVlLCByb29tIH0pKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE11dGVzIGEgdHJhY2sgdGhhdCB0aGUgcGFydGljaXBhbnQgaGFzIHB1Ymxpc2hlZC5cbiAgICAgKiBAcGFyYW0gcm9vbVxuICAgICAqIEBwYXJhbSBpZGVudGl0eVxuICAgICAqIEBwYXJhbSB0cmFja1NpZCBzaWQgb2YgdGhlIHRyYWNrIHRvIGJlIG11dGVkXG4gICAgICogQHBhcmFtIG11dGVkIHRydWUgdG8gbXV0ZSwgZmFsc2UgdG8gdW5tdXRlXG4gICAgICovXG4gICAgbXV0ZVB1Ymxpc2hlZFRyYWNrKHJvb20sIGlkZW50aXR5LCB0cmFja1NpZCwgbXV0ZWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcSA9IGxpdmVraXRfcm9vbV8xLk11dGVSb29tVHJhY2tSZXF1ZXN0LnRvSlNPTih7XG4gICAgICAgICAgICAgICAgcm9vbSxcbiAgICAgICAgICAgICAgICBpZGVudGl0eSxcbiAgICAgICAgICAgICAgICB0cmFja1NpZCxcbiAgICAgICAgICAgICAgICBtdXRlZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHRoaXMucnBjLnJlcXVlc3Qoc3ZjLCAnTXV0ZVB1Ymxpc2hlZFRyYWNrJywgcmVxLCB0aGlzLmF1dGhIZWFkZXIoeyByb29tQWRtaW46IHRydWUsIHJvb20gfSkpO1xuICAgICAgICAgICAgY29uc3QgcmVzID0gbGl2ZWtpdF9yb29tXzEuTXV0ZVJvb21UcmFja1Jlc3BvbnNlLmZyb21KU09OKGRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcy50cmFjaztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgYSBwYXJ0aWNpcGFudCdzIG1ldGFkYXRhIG9yIHBlcm1pc3Npb25zXG4gICAgICogQHBhcmFtIHJvb21cbiAgICAgKiBAcGFyYW0gaWRlbnRpdHlcbiAgICAgKiBAcGFyYW0gbWV0YWRhdGEgb3B0aW9uYWwsIG1ldGFkYXRhIHRvIHVwZGF0ZVxuICAgICAqIEBwYXJhbSBwZXJtaXNzaW9uIG9wdGlvbmFsLCBuZXcgcGVybWlzc2lvbnMgdG8gYXNzaWduIHRvIHBhcnRpY2lwYW50XG4gICAgICogQHBhcmFtIG5hbWUgb3B0aW9uYWwsIG5ldyBuYW1lIGZvciBwYXJ0aWNpcGFudFxuICAgICAqL1xuICAgIHVwZGF0ZVBhcnRpY2lwYW50KHJvb20sIGlkZW50aXR5LCBtZXRhZGF0YSwgcGVybWlzc2lvbiwgbmFtZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVxID0ge1xuICAgICAgICAgICAgICAgIHJvb20sXG4gICAgICAgICAgICAgICAgaWRlbnRpdHksXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhIHx8ICcnLFxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUgfHwgJycsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHBlcm1pc3Npb24pIHtcbiAgICAgICAgICAgICAgICByZXEucGVybWlzc2lvbiA9IGxpdmVraXRfbW9kZWxzXzEuUGFydGljaXBhbnRQZXJtaXNzaW9uLmZyb21QYXJ0aWFsKHBlcm1pc3Npb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHRoaXMucnBjLnJlcXVlc3Qoc3ZjLCAnVXBkYXRlUGFydGljaXBhbnQnLCBsaXZla2l0X3Jvb21fMS5VcGRhdGVQYXJ0aWNpcGFudFJlcXVlc3QudG9KU09OKHJlcSksIHRoaXMuYXV0aEhlYWRlcih7IHJvb21BZG1pbjogdHJ1ZSwgcm9vbSB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbGl2ZWtpdF9tb2RlbHNfMS5QYXJ0aWNpcGFudEluZm8uZnJvbUpTT04oZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGEgcGFydGljaXBhbnQncyBzdWJzY3JpcHRpb24gdG8gdHJhY2tzXG4gICAgICogQHBhcmFtIHJvb21cbiAgICAgKiBAcGFyYW0gaWRlbnRpdHlcbiAgICAgKiBAcGFyYW0gdHJhY2tTaWRzXG4gICAgICogQHBhcmFtIHN1YnNjcmliZSB0cnVlIHRvIHN1YnNjcmliZSwgZmFsc2UgdG8gdW5zdWJzY3JpYmVcbiAgICAgKi9cbiAgICB1cGRhdGVTdWJzY3JpcHRpb25zKHJvb20sIGlkZW50aXR5LCB0cmFja1NpZHMsIHN1YnNjcmliZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVxID0gbGl2ZWtpdF9yb29tXzEuVXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3QudG9KU09OKHtcbiAgICAgICAgICAgICAgICByb29tLFxuICAgICAgICAgICAgICAgIGlkZW50aXR5LFxuICAgICAgICAgICAgICAgIHRyYWNrU2lkcyxcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmUsXG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnRUcmFja3M6IFtdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnJwYy5yZXF1ZXN0KHN2YywgJ1VwZGF0ZVN1YnNjcmlwdGlvbnMnLCByZXEsIHRoaXMuYXV0aEhlYWRlcih7IHJvb21BZG1pbjogdHJ1ZSwgcm9vbSB9KSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kRGF0YShyb29tLCBkYXRhLCBraW5kLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlc3RpbmF0aW9uU2lkcyA9IEFycmF5LmlzQXJyYXkob3B0aW9ucykgPyBvcHRpb25zIDogb3B0aW9ucy5kZXN0aW5hdGlvblNpZHM7XG4gICAgICAgICAgICBjb25zdCB0b3BpYyA9IEFycmF5LmlzQXJyYXkob3B0aW9ucykgPyB1bmRlZmluZWQgOiBvcHRpb25zLnRvcGljO1xuICAgICAgICAgICAgY29uc3QgcmVxID0ge1xuICAgICAgICAgICAgICAgIHJvb20sXG4gICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uU2lkczogZGVzdGluYXRpb25TaWRzICE9PSBudWxsICYmIGRlc3RpbmF0aW9uU2lkcyAhPT0gdm9pZCAwID8gZGVzdGluYXRpb25TaWRzIDogW10sXG4gICAgICAgICAgICAgICAgdG9waWMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG9wdGlvbnMpICYmIG9wdGlvbnMuZGVzdGluYXRpb25JZGVudGl0aWVzKSB7XG4gICAgICAgICAgICAgICAgcmVxLmRlc3RpbmF0aW9uSWRlbnRpdGllcyA9IG9wdGlvbnMuZGVzdGluYXRpb25JZGVudGl0aWVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgdGhpcy5ycGMucmVxdWVzdChzdmMsICdTZW5kRGF0YScsIGxpdmVraXRfcm9vbV8xLlNlbmREYXRhUmVxdWVzdC50b0pTT04ocmVxKSwgdGhpcy5hdXRoSGVhZGVyKHsgcm9vbUFkbWluOiB0cnVlLCByb29tIH0pKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5Sb29tU2VydmljZUNsaWVudCA9IFJvb21TZXJ2aWNlQ2xpZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Um9vbVNlcnZpY2VDbGllbnQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/livekit-server-sdk/dist/RoomServiceClient.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/livekit-server-sdk/dist/ServiceBase.js":
/*!*************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/ServiceBase.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst AccessToken_1 = __webpack_require__(/*! ./AccessToken */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/AccessToken.js\");\n/**\n * Utilities to handle authentication\n */\nclass ServiceBase {\n    /**\n     * @param apiKey API Key.\n     * @param secret API Secret.\n     * @param ttl token TTL\n     */\n    constructor(apiKey, secret, ttl) {\n        this.apiKey = apiKey;\n        this.secret = secret;\n        this.ttl = ttl || '10m';\n    }\n    authHeader(grant) {\n        const at = new AccessToken_1.AccessToken(this.apiKey, this.secret, { ttl: this.ttl });\n        at.addGrant(grant);\n        return {\n            Authorization: `Bearer ${at.toJwt()}`,\n        };\n    }\n}\nexports[\"default\"] = ServiceBase;\n//# sourceMappingURL=ServiceBase.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9TZXJ2aWNlQmFzZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxzQkFBc0IsbUJBQU8sQ0FBQyw2RkFBZTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2RUFBNkUsZUFBZTtBQUM1RjtBQUNBO0FBQ0EscUNBQXFDLFdBQVc7QUFDaEQ7QUFDQTtBQUNBO0FBQ0Esa0JBQWU7QUFDZiIsInNvdXJjZXMiOlsid2VicGFjazovL2xpdmVzdHJlYW0vLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvU2VydmljZUJhc2UuanM/ZDY2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IEFjY2Vzc1Rva2VuXzEgPSByZXF1aXJlKFwiLi9BY2Nlc3NUb2tlblwiKTtcbi8qKlxuICogVXRpbGl0aWVzIHRvIGhhbmRsZSBhdXRoZW50aWNhdGlvblxuICovXG5jbGFzcyBTZXJ2aWNlQmFzZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGFwaUtleSBBUEkgS2V5LlxuICAgICAqIEBwYXJhbSBzZWNyZXQgQVBJIFNlY3JldC5cbiAgICAgKiBAcGFyYW0gdHRsIHRva2VuIFRUTFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGFwaUtleSwgc2VjcmV0LCB0dGwpIHtcbiAgICAgICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gICAgICAgIHRoaXMuc2VjcmV0ID0gc2VjcmV0O1xuICAgICAgICB0aGlzLnR0bCA9IHR0bCB8fCAnMTBtJztcbiAgICB9XG4gICAgYXV0aEhlYWRlcihncmFudCkge1xuICAgICAgICBjb25zdCBhdCA9IG5ldyBBY2Nlc3NUb2tlbl8xLkFjY2Vzc1Rva2VuKHRoaXMuYXBpS2V5LCB0aGlzLnNlY3JldCwgeyB0dGw6IHRoaXMudHRsIH0pO1xuICAgICAgICBhdC5hZGRHcmFudChncmFudCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YXQudG9Kd3QoKX1gLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydHMuZGVmYXVsdCA9IFNlcnZpY2VCYXNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U2VydmljZUJhc2UuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/livekit-server-sdk/dist/ServiceBase.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/livekit-server-sdk/dist/TwirpRPC.js":
/*!**********************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/TwirpRPC.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.TwirpRpc = exports.livekitPackage = void 0;\nconst axios_1 = __importDefault(__webpack_require__(/*! axios */ \"(action-browser)/./node_modules/axios/dist/node/axios.cjs\"));\nconst camelcase_keys_1 = __importDefault(__webpack_require__(/*! camelcase-keys */ \"(action-browser)/./node_modules/camelcase-keys/index.js\"));\n// twirp RPC adapter for client implementation\nconst defaultPrefix = '/twirp';\nexports.livekitPackage = 'livekit';\n/**\n * JSON based Twirp V7 RPC\n */\nclass TwirpRpc {\n    constructor(host, pkg, prefix) {\n        if (host.startsWith('ws')) {\n            host = host.replace('ws', 'http');\n        }\n        this.host = host;\n        this.pkg = pkg;\n        this.prefix = prefix || defaultPrefix;\n        this.instance = axios_1.default.create({\n            baseURL: host,\n        });\n    }\n    request(service, method, data, headers) {\n        return new Promise((resolve, reject) => {\n            const path = `${this.prefix}/${this.pkg}.${service}/${method}`;\n            this.instance\n                .post(path, data, { headers })\n                .then((res) => {\n                resolve(camelcase_keys_1.default(res.data, { deep: true }));\n            })\n                .catch(reject);\n        });\n    }\n}\nexports.TwirpRpc = TwirpRpc;\n//# sourceMappingURL=TwirpRPC.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9Ud2lycFJQQy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGdCQUFnQixHQUFHLHNCQUFzQjtBQUN6QyxnQ0FBZ0MsbUJBQU8sQ0FBQyx3RUFBTztBQUMvQyx5Q0FBeUMsbUJBQU8sQ0FBQywrRUFBZ0I7QUFDakU7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsWUFBWSxHQUFHLFNBQVMsR0FBRyxRQUFRLEdBQUcsT0FBTztBQUN6RTtBQUNBLG9DQUFvQyxTQUFTO0FBQzdDO0FBQ0EsNkRBQTZELFlBQVk7QUFDekUsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saXZlc3RyZWFtLy4vbm9kZV9tb2R1bGVzL2xpdmVraXQtc2VydmVyLXNkay9kaXN0L1R3aXJwUlBDLmpzP2ZkNjgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlR3aXJwUnBjID0gZXhwb3J0cy5saXZla2l0UGFja2FnZSA9IHZvaWQgMDtcbmNvbnN0IGF4aW9zXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImF4aW9zXCIpKTtcbmNvbnN0IGNhbWVsY2FzZV9rZXlzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImNhbWVsY2FzZS1rZXlzXCIpKTtcbi8vIHR3aXJwIFJQQyBhZGFwdGVyIGZvciBjbGllbnQgaW1wbGVtZW50YXRpb25cbmNvbnN0IGRlZmF1bHRQcmVmaXggPSAnL3R3aXJwJztcbmV4cG9ydHMubGl2ZWtpdFBhY2thZ2UgPSAnbGl2ZWtpdCc7XG4vKipcbiAqIEpTT04gYmFzZWQgVHdpcnAgVjcgUlBDXG4gKi9cbmNsYXNzIFR3aXJwUnBjIHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0LCBwa2csIHByZWZpeCkge1xuICAgICAgICBpZiAoaG9zdC5zdGFydHNXaXRoKCd3cycpKSB7XG4gICAgICAgICAgICBob3N0ID0gaG9zdC5yZXBsYWNlKCd3cycsICdodHRwJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ob3N0ID0gaG9zdDtcbiAgICAgICAgdGhpcy5wa2cgPSBwa2c7XG4gICAgICAgIHRoaXMucHJlZml4ID0gcHJlZml4IHx8IGRlZmF1bHRQcmVmaXg7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBheGlvc18xLmRlZmF1bHQuY3JlYXRlKHtcbiAgICAgICAgICAgIGJhc2VVUkw6IGhvc3QsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXF1ZXN0KHNlcnZpY2UsIG1ldGhvZCwgZGF0YSwgaGVhZGVycykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGF0aCA9IGAke3RoaXMucHJlZml4fS8ke3RoaXMucGtnfS4ke3NlcnZpY2V9LyR7bWV0aG9kfWA7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlXG4gICAgICAgICAgICAgICAgLnBvc3QocGF0aCwgZGF0YSwgeyBoZWFkZXJzIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoY2FtZWxjYXNlX2tleXNfMS5kZWZhdWx0KHJlcy5kYXRhLCB7IGRlZXA6IHRydWUgfSkpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2gocmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5Ud2lycFJwYyA9IFR3aXJwUnBjO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHdpcnBSUEMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/livekit-server-sdk/dist/TwirpRPC.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/livekit-server-sdk/dist/WebhookReceiver.js":
/*!*****************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/WebhookReceiver.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.WebhookReceiver = exports.authorizeHeader = void 0;\nconst crypto_1 = __importDefault(__webpack_require__(/*! crypto */ \"crypto\"));\nconst AccessToken_1 = __webpack_require__(/*! ./AccessToken */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/AccessToken.js\");\nconst livekit_webhook_1 = __webpack_require__(/*! ./proto/livekit_webhook */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_webhook.js\");\nexports.authorizeHeader = 'Authorize';\nclass WebhookReceiver {\n    constructor(apiKey, apiSecret) {\n        this.verifier = new AccessToken_1.TokenVerifier(apiKey, apiSecret);\n    }\n    /**\n     *\n     * @param body string of the posted body\n     * @param authHeader `Authorization` header from the request\n     * @param skipAuth true to skip auth validation\n     * @returns\n     */\n    receive(body, authHeader, skipAuth = false) {\n        // verify token\n        if (!skipAuth) {\n            if (!authHeader) {\n                throw new Error('authorization header is empty');\n            }\n            const claims = this.verifier.verify(authHeader);\n            // confirm sha\n            const hash = crypto_1.default.createHash('sha256');\n            hash.update(body);\n            if (claims.sha256 !== hash.digest('base64')) {\n                throw new Error('sha256 checksum of body does not match');\n            }\n        }\n        return livekit_webhook_1.WebhookEvent.fromJSON(JSON.parse(body));\n    }\n}\nexports.WebhookReceiver = WebhookReceiver;\n//# sourceMappingURL=WebhookReceiver.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9XZWJob29rUmVjZWl2ZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCx1QkFBdUIsR0FBRyx1QkFBdUI7QUFDakQsaUNBQWlDLG1CQUFPLENBQUMsc0JBQVE7QUFDakQsc0JBQXNCLG1CQUFPLENBQUMsNkZBQWU7QUFDN0MsMEJBQTBCLG1CQUFPLENBQUMsaUhBQXlCO0FBQzNELHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QiIsInNvdXJjZXMiOlsid2VicGFjazovL2xpdmVzdHJlYW0vLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvV2ViaG9va1JlY2VpdmVyLmpzP2IxMDYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLldlYmhvb2tSZWNlaXZlciA9IGV4cG9ydHMuYXV0aG9yaXplSGVhZGVyID0gdm9pZCAwO1xuY29uc3QgY3J5cHRvXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImNyeXB0b1wiKSk7XG5jb25zdCBBY2Nlc3NUb2tlbl8xID0gcmVxdWlyZShcIi4vQWNjZXNzVG9rZW5cIik7XG5jb25zdCBsaXZla2l0X3dlYmhvb2tfMSA9IHJlcXVpcmUoXCIuL3Byb3RvL2xpdmVraXRfd2ViaG9va1wiKTtcbmV4cG9ydHMuYXV0aG9yaXplSGVhZGVyID0gJ0F1dGhvcml6ZSc7XG5jbGFzcyBXZWJob29rUmVjZWl2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGFwaUtleSwgYXBpU2VjcmV0KSB7XG4gICAgICAgIHRoaXMudmVyaWZpZXIgPSBuZXcgQWNjZXNzVG9rZW5fMS5Ub2tlblZlcmlmaWVyKGFwaUtleSwgYXBpU2VjcmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYm9keSBzdHJpbmcgb2YgdGhlIHBvc3RlZCBib2R5XG4gICAgICogQHBhcmFtIGF1dGhIZWFkZXIgYEF1dGhvcml6YXRpb25gIGhlYWRlciBmcm9tIHRoZSByZXF1ZXN0XG4gICAgICogQHBhcmFtIHNraXBBdXRoIHRydWUgdG8gc2tpcCBhdXRoIHZhbGlkYXRpb25cbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHJlY2VpdmUoYm9keSwgYXV0aEhlYWRlciwgc2tpcEF1dGggPSBmYWxzZSkge1xuICAgICAgICAvLyB2ZXJpZnkgdG9rZW5cbiAgICAgICAgaWYgKCFza2lwQXV0aCkge1xuICAgICAgICAgICAgaWYgKCFhdXRoSGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdhdXRob3JpemF0aW9uIGhlYWRlciBpcyBlbXB0eScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2xhaW1zID0gdGhpcy52ZXJpZmllci52ZXJpZnkoYXV0aEhlYWRlcik7XG4gICAgICAgICAgICAvLyBjb25maXJtIHNoYVxuICAgICAgICAgICAgY29uc3QgaGFzaCA9IGNyeXB0b18xLmRlZmF1bHQuY3JlYXRlSGFzaCgnc2hhMjU2Jyk7XG4gICAgICAgICAgICBoYXNoLnVwZGF0ZShib2R5KTtcbiAgICAgICAgICAgIGlmIChjbGFpbXMuc2hhMjU2ICE9PSBoYXNoLmRpZ2VzdCgnYmFzZTY0JykpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NoYTI1NiBjaGVja3N1bSBvZiBib2R5IGRvZXMgbm90IG1hdGNoJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpdmVraXRfd2ViaG9va18xLldlYmhvb2tFdmVudC5mcm9tSlNPTihKU09OLnBhcnNlKGJvZHkpKTtcbiAgICB9XG59XG5leHBvcnRzLldlYmhvb2tSZWNlaXZlciA9IFdlYmhvb2tSZWNlaXZlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVdlYmhvb2tSZWNlaXZlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/livekit-server-sdk/dist/WebhookReceiver.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/livekit-server-sdk/dist/grants.js":
/*!********************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/grants.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.TrackSource = void 0;\nvar TrackSource;\n(function (TrackSource) {\n    TrackSource[\"CAMERA\"] = \"camera\";\n    TrackSource[\"MICROPHONE\"] = \"microphone\";\n    TrackSource[\"SCREEN_SHARE\"] = \"screen_share\";\n    TrackSource[\"SCREEN_SHARE_AUDIO\"] = \"screen_share_audio\";\n})(TrackSource = exports.TrackSource || (exports.TrackSource = {}));\n//# sourceMappingURL=grants.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9ncmFudHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsd0NBQXdDLG1CQUFtQixLQUFLO0FBQ2pFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGl2ZXN0cmVhbS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9ncmFudHMuanM/ZDkxMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVHJhY2tTb3VyY2UgPSB2b2lkIDA7XG52YXIgVHJhY2tTb3VyY2U7XG4oZnVuY3Rpb24gKFRyYWNrU291cmNlKSB7XG4gICAgVHJhY2tTb3VyY2VbXCJDQU1FUkFcIl0gPSBcImNhbWVyYVwiO1xuICAgIFRyYWNrU291cmNlW1wiTUlDUk9QSE9ORVwiXSA9IFwibWljcm9waG9uZVwiO1xuICAgIFRyYWNrU291cmNlW1wiU0NSRUVOX1NIQVJFXCJdID0gXCJzY3JlZW5fc2hhcmVcIjtcbiAgICBUcmFja1NvdXJjZVtcIlNDUkVFTl9TSEFSRV9BVURJT1wiXSA9IFwic2NyZWVuX3NoYXJlX2F1ZGlvXCI7XG59KShUcmFja1NvdXJjZSA9IGV4cG9ydHMuVHJhY2tTb3VyY2UgfHwgKGV4cG9ydHMuVHJhY2tTb3VyY2UgPSB7fSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3JhbnRzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/livekit-server-sdk/dist/grants.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/livekit-server-sdk/dist/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/index.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.TrackType = exports.TrackInfo = exports.Room = exports.ParticipantPermission = exports.ParticipantInfo_State = exports.ParticipantInfo = exports.DataPacket_Kind = exports.IngressVideoOptions = exports.IngressVideoEncodingPreset = exports.IngressVideoEncodingOptions = exports.IngressState = exports.IngressInput = exports.IngressInfo = exports.IngressAudioOptions = exports.IngressAudioEncodingPreset = exports.IngressAudioEncodingOptions = exports.StreamProtocol = exports.StreamOutput = exports.SegmentedFileProtocol = exports.SegmentedFileOutput = exports.EncodingOptionsPreset = exports.EncodingOptions = exports.EncodedFileType = exports.EncodedFileOutput = exports.EgressInfo = exports.DirectFileOutput = void 0;\n__exportStar(__webpack_require__(/*! ./AccessToken */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/AccessToken.js\"), exports);\n__exportStar(__webpack_require__(/*! ./EgressClient */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/EgressClient.js\"), exports);\n__exportStar(__webpack_require__(/*! ./IngressClient */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/IngressClient.js\"), exports);\n__exportStar(__webpack_require__(/*! ./RoomServiceClient */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/RoomServiceClient.js\"), exports);\n__exportStar(__webpack_require__(/*! ./WebhookReceiver */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/WebhookReceiver.js\"), exports);\n__exportStar(__webpack_require__(/*! ./grants */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/grants.js\"), exports);\nvar livekit_egress_1 = __webpack_require__(/*! ./proto/livekit_egress */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_egress.js\");\nObject.defineProperty(exports, \"DirectFileOutput\", ({ enumerable: true, get: function () { return livekit_egress_1.DirectFileOutput; } }));\nObject.defineProperty(exports, \"EgressInfo\", ({ enumerable: true, get: function () { return livekit_egress_1.EgressInfo; } }));\nObject.defineProperty(exports, \"EncodedFileOutput\", ({ enumerable: true, get: function () { return livekit_egress_1.EncodedFileOutput; } }));\nObject.defineProperty(exports, \"EncodedFileType\", ({ enumerable: true, get: function () { return livekit_egress_1.EncodedFileType; } }));\nObject.defineProperty(exports, \"EncodingOptions\", ({ enumerable: true, get: function () { return livekit_egress_1.EncodingOptions; } }));\nObject.defineProperty(exports, \"EncodingOptionsPreset\", ({ enumerable: true, get: function () { return livekit_egress_1.EncodingOptionsPreset; } }));\nObject.defineProperty(exports, \"SegmentedFileOutput\", ({ enumerable: true, get: function () { return livekit_egress_1.SegmentedFileOutput; } }));\nObject.defineProperty(exports, \"SegmentedFileProtocol\", ({ enumerable: true, get: function () { return livekit_egress_1.SegmentedFileProtocol; } }));\nObject.defineProperty(exports, \"StreamOutput\", ({ enumerable: true, get: function () { return livekit_egress_1.StreamOutput; } }));\nObject.defineProperty(exports, \"StreamProtocol\", ({ enumerable: true, get: function () { return livekit_egress_1.StreamProtocol; } }));\nvar livekit_ingress_1 = __webpack_require__(/*! ./proto/livekit_ingress */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_ingress.js\");\nObject.defineProperty(exports, \"IngressAudioEncodingOptions\", ({ enumerable: true, get: function () { return livekit_ingress_1.IngressAudioEncodingOptions; } }));\nObject.defineProperty(exports, \"IngressAudioEncodingPreset\", ({ enumerable: true, get: function () { return livekit_ingress_1.IngressAudioEncodingPreset; } }));\nObject.defineProperty(exports, \"IngressAudioOptions\", ({ enumerable: true, get: function () { return livekit_ingress_1.IngressAudioOptions; } }));\nObject.defineProperty(exports, \"IngressInfo\", ({ enumerable: true, get: function () { return livekit_ingress_1.IngressInfo; } }));\nObject.defineProperty(exports, \"IngressInput\", ({ enumerable: true, get: function () { return livekit_ingress_1.IngressInput; } }));\nObject.defineProperty(exports, \"IngressState\", ({ enumerable: true, get: function () { return livekit_ingress_1.IngressState; } }));\nObject.defineProperty(exports, \"IngressVideoEncodingOptions\", ({ enumerable: true, get: function () { return livekit_ingress_1.IngressVideoEncodingOptions; } }));\nObject.defineProperty(exports, \"IngressVideoEncodingPreset\", ({ enumerable: true, get: function () { return livekit_ingress_1.IngressVideoEncodingPreset; } }));\nObject.defineProperty(exports, \"IngressVideoOptions\", ({ enumerable: true, get: function () { return livekit_ingress_1.IngressVideoOptions; } }));\nvar livekit_models_1 = __webpack_require__(/*! ./proto/livekit_models */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_models.js\");\nObject.defineProperty(exports, \"DataPacket_Kind\", ({ enumerable: true, get: function () { return livekit_models_1.DataPacket_Kind; } }));\nObject.defineProperty(exports, \"ParticipantInfo\", ({ enumerable: true, get: function () { return livekit_models_1.ParticipantInfo; } }));\nObject.defineProperty(exports, \"ParticipantInfo_State\", ({ enumerable: true, get: function () { return livekit_models_1.ParticipantInfo_State; } }));\nObject.defineProperty(exports, \"ParticipantPermission\", ({ enumerable: true, get: function () { return livekit_models_1.ParticipantPermission; } }));\nObject.defineProperty(exports, \"Room\", ({ enumerable: true, get: function () { return livekit_models_1.Room; } }));\nObject.defineProperty(exports, \"TrackInfo\", ({ enumerable: true, get: function () { return livekit_models_1.TrackInfo; } }));\nObject.defineProperty(exports, \"TrackType\", ({ enumerable: true, get: function () { return livekit_models_1.TrackType; } }));\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQSxtQ0FBbUMsb0NBQW9DLGdCQUFnQjtBQUN2RixDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsaUJBQWlCLEdBQUcsaUJBQWlCLEdBQUcsWUFBWSxHQUFHLDZCQUE2QixHQUFHLDZCQUE2QixHQUFHLHVCQUF1QixHQUFHLHVCQUF1QixHQUFHLDJCQUEyQixHQUFHLGtDQUFrQyxHQUFHLG1DQUFtQyxHQUFHLG9CQUFvQixHQUFHLG9CQUFvQixHQUFHLG1CQUFtQixHQUFHLDJCQUEyQixHQUFHLGtDQUFrQyxHQUFHLG1DQUFtQyxHQUFHLHNCQUFzQixHQUFHLG9CQUFvQixHQUFHLDZCQUE2QixHQUFHLDJCQUEyQixHQUFHLDZCQUE2QixHQUFHLHVCQUF1QixHQUFHLHVCQUF1QixHQUFHLHlCQUF5QixHQUFHLGtCQUFrQixHQUFHLHdCQUF3QjtBQUM1c0IsYUFBYSxtQkFBTyxDQUFDLDZGQUFlO0FBQ3BDLGFBQWEsbUJBQU8sQ0FBQywrRkFBZ0I7QUFDckMsYUFBYSxtQkFBTyxDQUFDLGlHQUFpQjtBQUN0QyxhQUFhLG1CQUFPLENBQUMseUdBQXFCO0FBQzFDLGFBQWEsbUJBQU8sQ0FBQyxxR0FBbUI7QUFDeEMsYUFBYSxtQkFBTyxDQUFDLG1GQUFVO0FBQy9CLHVCQUF1QixtQkFBTyxDQUFDLCtHQUF3QjtBQUN2RCxvREFBbUQsRUFBRSxxQ0FBcUMsNkNBQTZDLEVBQUM7QUFDeEksOENBQTZDLEVBQUUscUNBQXFDLHVDQUF1QyxFQUFDO0FBQzVILHFEQUFvRCxFQUFFLHFDQUFxQyw4Q0FBOEMsRUFBQztBQUMxSSxtREFBa0QsRUFBRSxxQ0FBcUMsNENBQTRDLEVBQUM7QUFDdEksbURBQWtELEVBQUUscUNBQXFDLDRDQUE0QyxFQUFDO0FBQ3RJLHlEQUF3RCxFQUFFLHFDQUFxQyxrREFBa0QsRUFBQztBQUNsSix1REFBc0QsRUFBRSxxQ0FBcUMsZ0RBQWdELEVBQUM7QUFDOUkseURBQXdELEVBQUUscUNBQXFDLGtEQUFrRCxFQUFDO0FBQ2xKLGdEQUErQyxFQUFFLHFDQUFxQyx5Q0FBeUMsRUFBQztBQUNoSSxrREFBaUQsRUFBRSxxQ0FBcUMsMkNBQTJDLEVBQUM7QUFDcEksd0JBQXdCLG1CQUFPLENBQUMsaUhBQXlCO0FBQ3pELCtEQUE4RCxFQUFFLHFDQUFxQyx5REFBeUQsRUFBQztBQUMvSiw4REFBNkQsRUFBRSxxQ0FBcUMsd0RBQXdELEVBQUM7QUFDN0osdURBQXNELEVBQUUscUNBQXFDLGlEQUFpRCxFQUFDO0FBQy9JLCtDQUE4QyxFQUFFLHFDQUFxQyx5Q0FBeUMsRUFBQztBQUMvSCxnREFBK0MsRUFBRSxxQ0FBcUMsMENBQTBDLEVBQUM7QUFDakksZ0RBQStDLEVBQUUscUNBQXFDLDBDQUEwQyxFQUFDO0FBQ2pJLCtEQUE4RCxFQUFFLHFDQUFxQyx5REFBeUQsRUFBQztBQUMvSiw4REFBNkQsRUFBRSxxQ0FBcUMsd0RBQXdELEVBQUM7QUFDN0osdURBQXNELEVBQUUscUNBQXFDLGlEQUFpRCxFQUFDO0FBQy9JLHVCQUF1QixtQkFBTyxDQUFDLCtHQUF3QjtBQUN2RCxtREFBa0QsRUFBRSxxQ0FBcUMsNENBQTRDLEVBQUM7QUFDdEksbURBQWtELEVBQUUscUNBQXFDLDRDQUE0QyxFQUFDO0FBQ3RJLHlEQUF3RCxFQUFFLHFDQUFxQyxrREFBa0QsRUFBQztBQUNsSix5REFBd0QsRUFBRSxxQ0FBcUMsa0RBQWtELEVBQUM7QUFDbEosd0NBQXVDLEVBQUUscUNBQXFDLGlDQUFpQyxFQUFDO0FBQ2hILDZDQUE0QyxFQUFFLHFDQUFxQyxzQ0FBc0MsRUFBQztBQUMxSCw2Q0FBNEMsRUFBRSxxQ0FBcUMsc0NBQXNDLEVBQUM7QUFDMUgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saXZlc3RyZWFtLy4vbm9kZV9tb2R1bGVzL2xpdmVraXQtc2VydmVyLXNkay9kaXN0L2luZGV4LmpzPzRkMGYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fZXhwb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19leHBvcnRTdGFyKSB8fCBmdW5jdGlvbihtLCBleHBvcnRzKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChleHBvcnRzLCBwKSkgX19jcmVhdGVCaW5kaW5nKGV4cG9ydHMsIG0sIHApO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVHJhY2tUeXBlID0gZXhwb3J0cy5UcmFja0luZm8gPSBleHBvcnRzLlJvb20gPSBleHBvcnRzLlBhcnRpY2lwYW50UGVybWlzc2lvbiA9IGV4cG9ydHMuUGFydGljaXBhbnRJbmZvX1N0YXRlID0gZXhwb3J0cy5QYXJ0aWNpcGFudEluZm8gPSBleHBvcnRzLkRhdGFQYWNrZXRfS2luZCA9IGV4cG9ydHMuSW5ncmVzc1ZpZGVvT3B0aW9ucyA9IGV4cG9ydHMuSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQgPSBleHBvcnRzLkluZ3Jlc3NWaWRlb0VuY29kaW5nT3B0aW9ucyA9IGV4cG9ydHMuSW5ncmVzc1N0YXRlID0gZXhwb3J0cy5JbmdyZXNzSW5wdXQgPSBleHBvcnRzLkluZ3Jlc3NJbmZvID0gZXhwb3J0cy5JbmdyZXNzQXVkaW9PcHRpb25zID0gZXhwb3J0cy5JbmdyZXNzQXVkaW9FbmNvZGluZ1ByZXNldCA9IGV4cG9ydHMuSW5ncmVzc0F1ZGlvRW5jb2RpbmdPcHRpb25zID0gZXhwb3J0cy5TdHJlYW1Qcm90b2NvbCA9IGV4cG9ydHMuU3RyZWFtT3V0cHV0ID0gZXhwb3J0cy5TZWdtZW50ZWRGaWxlUHJvdG9jb2wgPSBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQgPSBleHBvcnRzLkVuY29kaW5nT3B0aW9uc1ByZXNldCA9IGV4cG9ydHMuRW5jb2RpbmdPcHRpb25zID0gZXhwb3J0cy5FbmNvZGVkRmlsZVR5cGUgPSBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0ID0gZXhwb3J0cy5FZ3Jlc3NJbmZvID0gZXhwb3J0cy5EaXJlY3RGaWxlT3V0cHV0ID0gdm9pZCAwO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL0FjY2Vzc1Rva2VuXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9FZ3Jlc3NDbGllbnRcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL0luZ3Jlc3NDbGllbnRcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL1Jvb21TZXJ2aWNlQ2xpZW50XCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9XZWJob29rUmVjZWl2ZXJcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2dyYW50c1wiKSwgZXhwb3J0cyk7XG52YXIgbGl2ZWtpdF9lZ3Jlc3NfMSA9IHJlcXVpcmUoXCIuL3Byb3RvL2xpdmVraXRfZWdyZXNzXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRGlyZWN0RmlsZU91dHB1dFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGl2ZWtpdF9lZ3Jlc3NfMS5EaXJlY3RGaWxlT3V0cHV0OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRWdyZXNzSW5mb1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGl2ZWtpdF9lZ3Jlc3NfMS5FZ3Jlc3NJbmZvOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRW5jb2RlZEZpbGVPdXRwdXRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGxpdmVraXRfZWdyZXNzXzEuRW5jb2RlZEZpbGVPdXRwdXQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJFbmNvZGVkRmlsZVR5cGVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGxpdmVraXRfZWdyZXNzXzEuRW5jb2RlZEZpbGVUeXBlOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRW5jb2RpbmdPcHRpb25zXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXZla2l0X2VncmVzc18xLkVuY29kaW5nT3B0aW9uczsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkVuY29kaW5nT3B0aW9uc1ByZXNldFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGl2ZWtpdF9lZ3Jlc3NfMS5FbmNvZGluZ09wdGlvbnNQcmVzZXQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJTZWdtZW50ZWRGaWxlT3V0cHV0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXZla2l0X2VncmVzc18xLlNlZ21lbnRlZEZpbGVPdXRwdXQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJTZWdtZW50ZWRGaWxlUHJvdG9jb2xcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGxpdmVraXRfZWdyZXNzXzEuU2VnbWVudGVkRmlsZVByb3RvY29sOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiU3RyZWFtT3V0cHV0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXZla2l0X2VncmVzc18xLlN0cmVhbU91dHB1dDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlN0cmVhbVByb3RvY29sXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXZla2l0X2VncmVzc18xLlN0cmVhbVByb3RvY29sOyB9IH0pO1xudmFyIGxpdmVraXRfaW5ncmVzc18xID0gcmVxdWlyZShcIi4vcHJvdG8vbGl2ZWtpdF9pbmdyZXNzXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiSW5ncmVzc0F1ZGlvRW5jb2RpbmdPcHRpb25zXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXZla2l0X2luZ3Jlc3NfMS5JbmdyZXNzQXVkaW9FbmNvZGluZ09wdGlvbnM7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJJbmdyZXNzQXVkaW9FbmNvZGluZ1ByZXNldFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGl2ZWtpdF9pbmdyZXNzXzEuSW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJJbmdyZXNzQXVkaW9PcHRpb25zXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXZla2l0X2luZ3Jlc3NfMS5JbmdyZXNzQXVkaW9PcHRpb25zOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiSW5ncmVzc0luZm9cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGxpdmVraXRfaW5ncmVzc18xLkluZ3Jlc3NJbmZvOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiSW5ncmVzc0lucHV0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXZla2l0X2luZ3Jlc3NfMS5JbmdyZXNzSW5wdXQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJJbmdyZXNzU3RhdGVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGxpdmVraXRfaW5ncmVzc18xLkluZ3Jlc3NTdGF0ZTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkluZ3Jlc3NWaWRlb0VuY29kaW5nT3B0aW9uc1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGl2ZWtpdF9pbmdyZXNzXzEuSW5ncmVzc1ZpZGVvRW5jb2RpbmdPcHRpb25zOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGxpdmVraXRfaW5ncmVzc18xLkluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiSW5ncmVzc1ZpZGVvT3B0aW9uc1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGl2ZWtpdF9pbmdyZXNzXzEuSW5ncmVzc1ZpZGVvT3B0aW9uczsgfSB9KTtcbnZhciBsaXZla2l0X21vZGVsc18xID0gcmVxdWlyZShcIi4vcHJvdG8vbGl2ZWtpdF9tb2RlbHNcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJEYXRhUGFja2V0X0tpbmRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGxpdmVraXRfbW9kZWxzXzEuRGF0YVBhY2tldF9LaW5kOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUGFydGljaXBhbnRJbmZvXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXZla2l0X21vZGVsc18xLlBhcnRpY2lwYW50SW5mbzsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlBhcnRpY2lwYW50SW5mb19TdGF0ZVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGl2ZWtpdF9tb2RlbHNfMS5QYXJ0aWNpcGFudEluZm9fU3RhdGU7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJQYXJ0aWNpcGFudFBlcm1pc3Npb25cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGxpdmVraXRfbW9kZWxzXzEuUGFydGljaXBhbnRQZXJtaXNzaW9uOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUm9vbVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGl2ZWtpdF9tb2RlbHNfMS5Sb29tOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiVHJhY2tJbmZvXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXZla2l0X21vZGVsc18xLlRyYWNrSW5mbzsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlRyYWNrVHlwZVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGl2ZWtpdF9tb2RlbHNfMS5UcmFja1R5cGU7IH0gfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/livekit-server-sdk/dist/index.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/livekit-server-sdk/dist/proto/google/protobuf/timestamp.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/proto/google/protobuf/timestamp.js ***!
  \*********************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Timestamp = exports.protobufPackage = void 0;\n/* eslint-disable */\nconst long_1 = __importDefault(__webpack_require__(/*! long */ \"(action-browser)/./node_modules/long/umd/index.js\"));\nconst minimal_1 = __importDefault(__webpack_require__(/*! protobufjs/minimal */ \"(action-browser)/./node_modules/protobufjs/minimal.js\"));\nexports.protobufPackage = \"google.protobuf\";\nfunction createBaseTimestamp() {\n    return { seconds: 0, nanos: 0 };\n}\nexports.Timestamp = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.seconds !== 0) {\n            writer.uint32(8).int64(message.seconds);\n        }\n        if (message.nanos !== 0) {\n            writer.uint32(16).int32(message.nanos);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseTimestamp();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.seconds = longToNumber(reader.int64());\n                    break;\n                case 2:\n                    message.nanos = reader.int32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            seconds: isSet(object.seconds) ? Number(object.seconds) : 0,\n            nanos: isSet(object.nanos) ? Number(object.nanos) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.seconds !== undefined && (obj.seconds = Math.round(message.seconds));\n        message.nanos !== undefined && (obj.nanos = Math.round(message.nanos));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseTimestamp();\n        message.seconds = (_a = object.seconds) !== null && _a !== void 0 ? _a : 0;\n        message.nanos = (_b = object.nanos) !== null && _b !== void 0 ? _b : 0;\n        return message;\n    },\n};\nvar globalThis = (() => {\n    if (typeof globalThis !== \"undefined\") {\n        return globalThis;\n    }\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    if (typeof window !== \"undefined\") {\n        return window;\n    }\n    if (typeof global !== \"undefined\") {\n        return global;\n    }\n    throw \"Unable to locate global object\";\n})();\nfunction longToNumber(long) {\n    if (long.gt(Number.MAX_SAFE_INTEGER)) {\n        throw new globalThis.Error(\"Value is larger than Number.MAX_SAFE_INTEGER\");\n    }\n    return long.toNumber();\n}\nif (minimal_1.default.util.Long !== long_1.default) {\n    minimal_1.default.util.Long = long_1.default;\n    minimal_1.default.configure();\n}\nfunction isSet(value) {\n    return value !== null && value !== undefined;\n}\n//# sourceMappingURL=timestamp.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9wcm90by9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsaUJBQWlCLEdBQUcsdUJBQXVCO0FBQzNDO0FBQ0EsK0JBQStCLG1CQUFPLENBQUMsK0RBQU07QUFDN0Msa0NBQWtDLG1CQUFPLENBQUMsaUZBQW9CO0FBQzlELHVCQUF1QjtBQUN2QjtBQUNBLGFBQWE7QUFDYjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saXZlc3RyZWFtLy4vbm9kZV9tb2R1bGVzL2xpdmVraXQtc2VydmVyLXNkay9kaXN0L3Byb3RvL2dvb2dsZS9wcm90b2J1Zi90aW1lc3RhbXAuanM/MTYwMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVGltZXN0YW1wID0gZXhwb3J0cy5wcm90b2J1ZlBhY2thZ2UgPSB2b2lkIDA7XG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuY29uc3QgbG9uZ18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJsb25nXCIpKTtcbmNvbnN0IG1pbmltYWxfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwicHJvdG9idWZqcy9taW5pbWFsXCIpKTtcbmV4cG9ydHMucHJvdG9idWZQYWNrYWdlID0gXCJnb29nbGUucHJvdG9idWZcIjtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VUaW1lc3RhbXAoKSB7XG4gICAgcmV0dXJuIHsgc2Vjb25kczogMCwgbmFub3M6IDAgfTtcbn1cbmV4cG9ydHMuVGltZXN0YW1wID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2Vjb25kcyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4KS5pbnQ2NChtZXNzYWdlLnNlY29uZHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm5hbm9zICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE2KS5pbnQzMihtZXNzYWdlLm5hbm9zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUaW1lc3RhbXAoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlY29uZHMgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubmFub3MgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2Vjb25kczogaXNTZXQob2JqZWN0LnNlY29uZHMpID8gTnVtYmVyKG9iamVjdC5zZWNvbmRzKSA6IDAsXG4gICAgICAgICAgICBuYW5vczogaXNTZXQob2JqZWN0Lm5hbm9zKSA/IE51bWJlcihvYmplY3QubmFub3MpIDogMCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnNlY29uZHMgIT09IHVuZGVmaW5lZCAmJiAob2JqLnNlY29uZHMgPSBNYXRoLnJvdW5kKG1lc3NhZ2Uuc2Vjb25kcykpO1xuICAgICAgICBtZXNzYWdlLm5hbm9zICE9PSB1bmRlZmluZWQgJiYgKG9iai5uYW5vcyA9IE1hdGgucm91bmQobWVzc2FnZS5uYW5vcykpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVGltZXN0YW1wKCk7XG4gICAgICAgIG1lc3NhZ2Uuc2Vjb25kcyA9IChfYSA9IG9iamVjdC5zZWNvbmRzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xuICAgICAgICBtZXNzYWdlLm5hbm9zID0gKF9iID0gb2JqZWN0Lm5hbm9zKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbnZhciBnbG9iYWxUaGlzID0gKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbFRoaXM7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG4gICAgdGhyb3cgXCJVbmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3RcIjtcbn0pKCk7XG5mdW5jdGlvbiBsb25nVG9OdW1iZXIobG9uZykge1xuICAgIGlmIChsb25nLmd0KE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSkge1xuICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcIlZhbHVlIGlzIGxhcmdlciB0aGFuIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSXCIpO1xuICAgIH1cbiAgICByZXR1cm4gbG9uZy50b051bWJlcigpO1xufVxuaWYgKG1pbmltYWxfMS5kZWZhdWx0LnV0aWwuTG9uZyAhPT0gbG9uZ18xLmRlZmF1bHQpIHtcbiAgICBtaW5pbWFsXzEuZGVmYXVsdC51dGlsLkxvbmcgPSBsb25nXzEuZGVmYXVsdDtcbiAgICBtaW5pbWFsXzEuZGVmYXVsdC5jb25maWd1cmUoKTtcbn1cbmZ1bmN0aW9uIGlzU2V0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aW1lc3RhbXAuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/livekit-server-sdk/dist/proto/google/protobuf/timestamp.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_egress.js":
/*!**********************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/proto/livekit_egress.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.StreamInfo = exports.StreamInfoList = exports.EgressInfo = exports.StopEgressRequest = exports.ListEgressResponse = exports.ListEgressRequest = exports.UpdateOutputsRequest = exports.UpdateStreamRequest = exports.UpdateLayoutRequest = exports.EncodingOptions = exports.StreamOutput = exports.AliOSSUpload = exports.AzureBlobUpload = exports.GCPUpload = exports.S3Upload_MetadataEntry = exports.S3Upload = exports.ImageOutput = exports.DirectFileOutput = exports.SegmentedFileOutput = exports.EncodedFileOutput = exports.TrackEgressRequest = exports.TrackCompositeEgressRequest = exports.ParticipantEgressRequest = exports.WebEgressRequest = exports.RoomCompositeEgressRequest = exports.streamInfo_StatusToJSON = exports.streamInfo_StatusFromJSON = exports.StreamInfo_Status = exports.egressStatusToJSON = exports.egressStatusFromJSON = exports.EgressStatus = exports.encodingOptionsPresetToJSON = exports.encodingOptionsPresetFromJSON = exports.EncodingOptionsPreset = exports.streamProtocolToJSON = exports.streamProtocolFromJSON = exports.StreamProtocol = exports.imageFileSuffixToJSON = exports.imageFileSuffixFromJSON = exports.ImageFileSuffix = exports.segmentedFileSuffixToJSON = exports.segmentedFileSuffixFromJSON = exports.SegmentedFileSuffix = exports.segmentedFileProtocolToJSON = exports.segmentedFileProtocolFromJSON = exports.SegmentedFileProtocol = exports.encodedFileTypeToJSON = exports.encodedFileTypeFromJSON = exports.EncodedFileType = exports.protobufPackage = void 0;\nexports.AutoTrackEgress = exports.AutoParticipantEgress = exports.ImagesInfo = exports.SegmentsInfo = exports.FileInfo = void 0;\n/* eslint-disable */\nconst long_1 = __importDefault(__webpack_require__(/*! long */ \"(action-browser)/./node_modules/long/umd/index.js\"));\nconst minimal_1 = __importDefault(__webpack_require__(/*! protobufjs/minimal */ \"(action-browser)/./node_modules/protobufjs/minimal.js\"));\nconst livekit_models_1 = __webpack_require__(/*! ./livekit_models */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_models.js\");\nexports.protobufPackage = \"livekit\";\nvar EncodedFileType;\n(function (EncodedFileType) {\n    /** DEFAULT_FILETYPE - file type chosen based on codecs */\n    EncodedFileType[EncodedFileType[\"DEFAULT_FILETYPE\"] = 0] = \"DEFAULT_FILETYPE\";\n    EncodedFileType[EncodedFileType[\"MP4\"] = 1] = \"MP4\";\n    EncodedFileType[EncodedFileType[\"OGG\"] = 2] = \"OGG\";\n    EncodedFileType[EncodedFileType[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(EncodedFileType = exports.EncodedFileType || (exports.EncodedFileType = {}));\nfunction encodedFileTypeFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"DEFAULT_FILETYPE\":\n            return EncodedFileType.DEFAULT_FILETYPE;\n        case 1:\n        case \"MP4\":\n            return EncodedFileType.MP4;\n        case 2:\n        case \"OGG\":\n            return EncodedFileType.OGG;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return EncodedFileType.UNRECOGNIZED;\n    }\n}\nexports.encodedFileTypeFromJSON = encodedFileTypeFromJSON;\nfunction encodedFileTypeToJSON(object) {\n    switch (object) {\n        case EncodedFileType.DEFAULT_FILETYPE:\n            return \"DEFAULT_FILETYPE\";\n        case EncodedFileType.MP4:\n            return \"MP4\";\n        case EncodedFileType.OGG:\n            return \"OGG\";\n        case EncodedFileType.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.encodedFileTypeToJSON = encodedFileTypeToJSON;\nvar SegmentedFileProtocol;\n(function (SegmentedFileProtocol) {\n    SegmentedFileProtocol[SegmentedFileProtocol[\"DEFAULT_SEGMENTED_FILE_PROTOCOL\"] = 0] = \"DEFAULT_SEGMENTED_FILE_PROTOCOL\";\n    SegmentedFileProtocol[SegmentedFileProtocol[\"HLS_PROTOCOL\"] = 1] = \"HLS_PROTOCOL\";\n    SegmentedFileProtocol[SegmentedFileProtocol[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(SegmentedFileProtocol = exports.SegmentedFileProtocol || (exports.SegmentedFileProtocol = {}));\nfunction segmentedFileProtocolFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"DEFAULT_SEGMENTED_FILE_PROTOCOL\":\n            return SegmentedFileProtocol.DEFAULT_SEGMENTED_FILE_PROTOCOL;\n        case 1:\n        case \"HLS_PROTOCOL\":\n            return SegmentedFileProtocol.HLS_PROTOCOL;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return SegmentedFileProtocol.UNRECOGNIZED;\n    }\n}\nexports.segmentedFileProtocolFromJSON = segmentedFileProtocolFromJSON;\nfunction segmentedFileProtocolToJSON(object) {\n    switch (object) {\n        case SegmentedFileProtocol.DEFAULT_SEGMENTED_FILE_PROTOCOL:\n            return \"DEFAULT_SEGMENTED_FILE_PROTOCOL\";\n        case SegmentedFileProtocol.HLS_PROTOCOL:\n            return \"HLS_PROTOCOL\";\n        case SegmentedFileProtocol.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.segmentedFileProtocolToJSON = segmentedFileProtocolToJSON;\nvar SegmentedFileSuffix;\n(function (SegmentedFileSuffix) {\n    SegmentedFileSuffix[SegmentedFileSuffix[\"INDEX\"] = 0] = \"INDEX\";\n    SegmentedFileSuffix[SegmentedFileSuffix[\"TIMESTAMP\"] = 1] = \"TIMESTAMP\";\n    SegmentedFileSuffix[SegmentedFileSuffix[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(SegmentedFileSuffix = exports.SegmentedFileSuffix || (exports.SegmentedFileSuffix = {}));\nfunction segmentedFileSuffixFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"INDEX\":\n            return SegmentedFileSuffix.INDEX;\n        case 1:\n        case \"TIMESTAMP\":\n            return SegmentedFileSuffix.TIMESTAMP;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return SegmentedFileSuffix.UNRECOGNIZED;\n    }\n}\nexports.segmentedFileSuffixFromJSON = segmentedFileSuffixFromJSON;\nfunction segmentedFileSuffixToJSON(object) {\n    switch (object) {\n        case SegmentedFileSuffix.INDEX:\n            return \"INDEX\";\n        case SegmentedFileSuffix.TIMESTAMP:\n            return \"TIMESTAMP\";\n        case SegmentedFileSuffix.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.segmentedFileSuffixToJSON = segmentedFileSuffixToJSON;\nvar ImageFileSuffix;\n(function (ImageFileSuffix) {\n    ImageFileSuffix[ImageFileSuffix[\"IMAGE_SUFFIX_INDEX\"] = 0] = \"IMAGE_SUFFIX_INDEX\";\n    ImageFileSuffix[ImageFileSuffix[\"IMAGE_SUFFIX_TIMESTAMP\"] = 1] = \"IMAGE_SUFFIX_TIMESTAMP\";\n    ImageFileSuffix[ImageFileSuffix[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ImageFileSuffix = exports.ImageFileSuffix || (exports.ImageFileSuffix = {}));\nfunction imageFileSuffixFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"IMAGE_SUFFIX_INDEX\":\n            return ImageFileSuffix.IMAGE_SUFFIX_INDEX;\n        case 1:\n        case \"IMAGE_SUFFIX_TIMESTAMP\":\n            return ImageFileSuffix.IMAGE_SUFFIX_TIMESTAMP;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ImageFileSuffix.UNRECOGNIZED;\n    }\n}\nexports.imageFileSuffixFromJSON = imageFileSuffixFromJSON;\nfunction imageFileSuffixToJSON(object) {\n    switch (object) {\n        case ImageFileSuffix.IMAGE_SUFFIX_INDEX:\n            return \"IMAGE_SUFFIX_INDEX\";\n        case ImageFileSuffix.IMAGE_SUFFIX_TIMESTAMP:\n            return \"IMAGE_SUFFIX_TIMESTAMP\";\n        case ImageFileSuffix.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.imageFileSuffixToJSON = imageFileSuffixToJSON;\nvar StreamProtocol;\n(function (StreamProtocol) {\n    /** DEFAULT_PROTOCOL - protocol chosen based on urls */\n    StreamProtocol[StreamProtocol[\"DEFAULT_PROTOCOL\"] = 0] = \"DEFAULT_PROTOCOL\";\n    StreamProtocol[StreamProtocol[\"RTMP\"] = 1] = \"RTMP\";\n    StreamProtocol[StreamProtocol[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(StreamProtocol = exports.StreamProtocol || (exports.StreamProtocol = {}));\nfunction streamProtocolFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"DEFAULT_PROTOCOL\":\n            return StreamProtocol.DEFAULT_PROTOCOL;\n        case 1:\n        case \"RTMP\":\n            return StreamProtocol.RTMP;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return StreamProtocol.UNRECOGNIZED;\n    }\n}\nexports.streamProtocolFromJSON = streamProtocolFromJSON;\nfunction streamProtocolToJSON(object) {\n    switch (object) {\n        case StreamProtocol.DEFAULT_PROTOCOL:\n            return \"DEFAULT_PROTOCOL\";\n        case StreamProtocol.RTMP:\n            return \"RTMP\";\n        case StreamProtocol.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.streamProtocolToJSON = streamProtocolToJSON;\nvar EncodingOptionsPreset;\n(function (EncodingOptionsPreset) {\n    /** H264_720P_30 - 1280x720, 30fps, 3000kpbs, H.264_MAIN / OPUS */\n    EncodingOptionsPreset[EncodingOptionsPreset[\"H264_720P_30\"] = 0] = \"H264_720P_30\";\n    /** H264_720P_60 - 1280x720, 60fps, 4500kbps, H.264_MAIN / OPUS */\n    EncodingOptionsPreset[EncodingOptionsPreset[\"H264_720P_60\"] = 1] = \"H264_720P_60\";\n    /** H264_1080P_30 - 1920x1080, 30fps, 4500kbps, H.264_MAIN / OPUS */\n    EncodingOptionsPreset[EncodingOptionsPreset[\"H264_1080P_30\"] = 2] = \"H264_1080P_30\";\n    /** H264_1080P_60 - 1920x1080, 60fps, 6000kbps, H.264_MAIN / OPUS */\n    EncodingOptionsPreset[EncodingOptionsPreset[\"H264_1080P_60\"] = 3] = \"H264_1080P_60\";\n    /** PORTRAIT_H264_720P_30 - 720x1280, 30fps, 3000kpbs, H.264_MAIN / OPUS */\n    EncodingOptionsPreset[EncodingOptionsPreset[\"PORTRAIT_H264_720P_30\"] = 4] = \"PORTRAIT_H264_720P_30\";\n    /** PORTRAIT_H264_720P_60 - 720x1280, 60fps, 4500kbps, H.264_MAIN / OPUS */\n    EncodingOptionsPreset[EncodingOptionsPreset[\"PORTRAIT_H264_720P_60\"] = 5] = \"PORTRAIT_H264_720P_60\";\n    /** PORTRAIT_H264_1080P_30 - 1080x1920, 30fps, 4500kbps, H.264_MAIN / OPUS */\n    EncodingOptionsPreset[EncodingOptionsPreset[\"PORTRAIT_H264_1080P_30\"] = 6] = \"PORTRAIT_H264_1080P_30\";\n    /** PORTRAIT_H264_1080P_60 - 1080x1920, 60fps, 6000kbps, H.264_MAIN / OPUS */\n    EncodingOptionsPreset[EncodingOptionsPreset[\"PORTRAIT_H264_1080P_60\"] = 7] = \"PORTRAIT_H264_1080P_60\";\n    EncodingOptionsPreset[EncodingOptionsPreset[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(EncodingOptionsPreset = exports.EncodingOptionsPreset || (exports.EncodingOptionsPreset = {}));\nfunction encodingOptionsPresetFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"H264_720P_30\":\n            return EncodingOptionsPreset.H264_720P_30;\n        case 1:\n        case \"H264_720P_60\":\n            return EncodingOptionsPreset.H264_720P_60;\n        case 2:\n        case \"H264_1080P_30\":\n            return EncodingOptionsPreset.H264_1080P_30;\n        case 3:\n        case \"H264_1080P_60\":\n            return EncodingOptionsPreset.H264_1080P_60;\n        case 4:\n        case \"PORTRAIT_H264_720P_30\":\n            return EncodingOptionsPreset.PORTRAIT_H264_720P_30;\n        case 5:\n        case \"PORTRAIT_H264_720P_60\":\n            return EncodingOptionsPreset.PORTRAIT_H264_720P_60;\n        case 6:\n        case \"PORTRAIT_H264_1080P_30\":\n            return EncodingOptionsPreset.PORTRAIT_H264_1080P_30;\n        case 7:\n        case \"PORTRAIT_H264_1080P_60\":\n            return EncodingOptionsPreset.PORTRAIT_H264_1080P_60;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return EncodingOptionsPreset.UNRECOGNIZED;\n    }\n}\nexports.encodingOptionsPresetFromJSON = encodingOptionsPresetFromJSON;\nfunction encodingOptionsPresetToJSON(object) {\n    switch (object) {\n        case EncodingOptionsPreset.H264_720P_30:\n            return \"H264_720P_30\";\n        case EncodingOptionsPreset.H264_720P_60:\n            return \"H264_720P_60\";\n        case EncodingOptionsPreset.H264_1080P_30:\n            return \"H264_1080P_30\";\n        case EncodingOptionsPreset.H264_1080P_60:\n            return \"H264_1080P_60\";\n        case EncodingOptionsPreset.PORTRAIT_H264_720P_30:\n            return \"PORTRAIT_H264_720P_30\";\n        case EncodingOptionsPreset.PORTRAIT_H264_720P_60:\n            return \"PORTRAIT_H264_720P_60\";\n        case EncodingOptionsPreset.PORTRAIT_H264_1080P_30:\n            return \"PORTRAIT_H264_1080P_30\";\n        case EncodingOptionsPreset.PORTRAIT_H264_1080P_60:\n            return \"PORTRAIT_H264_1080P_60\";\n        case EncodingOptionsPreset.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.encodingOptionsPresetToJSON = encodingOptionsPresetToJSON;\nvar EgressStatus;\n(function (EgressStatus) {\n    EgressStatus[EgressStatus[\"EGRESS_STARTING\"] = 0] = \"EGRESS_STARTING\";\n    EgressStatus[EgressStatus[\"EGRESS_ACTIVE\"] = 1] = \"EGRESS_ACTIVE\";\n    EgressStatus[EgressStatus[\"EGRESS_ENDING\"] = 2] = \"EGRESS_ENDING\";\n    EgressStatus[EgressStatus[\"EGRESS_COMPLETE\"] = 3] = \"EGRESS_COMPLETE\";\n    EgressStatus[EgressStatus[\"EGRESS_FAILED\"] = 4] = \"EGRESS_FAILED\";\n    EgressStatus[EgressStatus[\"EGRESS_ABORTED\"] = 5] = \"EGRESS_ABORTED\";\n    EgressStatus[EgressStatus[\"EGRESS_LIMIT_REACHED\"] = 6] = \"EGRESS_LIMIT_REACHED\";\n    EgressStatus[EgressStatus[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(EgressStatus = exports.EgressStatus || (exports.EgressStatus = {}));\nfunction egressStatusFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"EGRESS_STARTING\":\n            return EgressStatus.EGRESS_STARTING;\n        case 1:\n        case \"EGRESS_ACTIVE\":\n            return EgressStatus.EGRESS_ACTIVE;\n        case 2:\n        case \"EGRESS_ENDING\":\n            return EgressStatus.EGRESS_ENDING;\n        case 3:\n        case \"EGRESS_COMPLETE\":\n            return EgressStatus.EGRESS_COMPLETE;\n        case 4:\n        case \"EGRESS_FAILED\":\n            return EgressStatus.EGRESS_FAILED;\n        case 5:\n        case \"EGRESS_ABORTED\":\n            return EgressStatus.EGRESS_ABORTED;\n        case 6:\n        case \"EGRESS_LIMIT_REACHED\":\n            return EgressStatus.EGRESS_LIMIT_REACHED;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return EgressStatus.UNRECOGNIZED;\n    }\n}\nexports.egressStatusFromJSON = egressStatusFromJSON;\nfunction egressStatusToJSON(object) {\n    switch (object) {\n        case EgressStatus.EGRESS_STARTING:\n            return \"EGRESS_STARTING\";\n        case EgressStatus.EGRESS_ACTIVE:\n            return \"EGRESS_ACTIVE\";\n        case EgressStatus.EGRESS_ENDING:\n            return \"EGRESS_ENDING\";\n        case EgressStatus.EGRESS_COMPLETE:\n            return \"EGRESS_COMPLETE\";\n        case EgressStatus.EGRESS_FAILED:\n            return \"EGRESS_FAILED\";\n        case EgressStatus.EGRESS_ABORTED:\n            return \"EGRESS_ABORTED\";\n        case EgressStatus.EGRESS_LIMIT_REACHED:\n            return \"EGRESS_LIMIT_REACHED\";\n        case EgressStatus.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.egressStatusToJSON = egressStatusToJSON;\nvar StreamInfo_Status;\n(function (StreamInfo_Status) {\n    StreamInfo_Status[StreamInfo_Status[\"ACTIVE\"] = 0] = \"ACTIVE\";\n    StreamInfo_Status[StreamInfo_Status[\"FINISHED\"] = 1] = \"FINISHED\";\n    StreamInfo_Status[StreamInfo_Status[\"FAILED\"] = 2] = \"FAILED\";\n    StreamInfo_Status[StreamInfo_Status[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(StreamInfo_Status = exports.StreamInfo_Status || (exports.StreamInfo_Status = {}));\nfunction streamInfo_StatusFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"ACTIVE\":\n            return StreamInfo_Status.ACTIVE;\n        case 1:\n        case \"FINISHED\":\n            return StreamInfo_Status.FINISHED;\n        case 2:\n        case \"FAILED\":\n            return StreamInfo_Status.FAILED;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return StreamInfo_Status.UNRECOGNIZED;\n    }\n}\nexports.streamInfo_StatusFromJSON = streamInfo_StatusFromJSON;\nfunction streamInfo_StatusToJSON(object) {\n    switch (object) {\n        case StreamInfo_Status.ACTIVE:\n            return \"ACTIVE\";\n        case StreamInfo_Status.FINISHED:\n            return \"FINISHED\";\n        case StreamInfo_Status.FAILED:\n            return \"FAILED\";\n        case StreamInfo_Status.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.streamInfo_StatusToJSON = streamInfo_StatusToJSON;\nfunction createBaseRoomCompositeEgressRequest() {\n    return {\n        roomName: \"\",\n        layout: \"\",\n        audioOnly: false,\n        videoOnly: false,\n        customBaseUrl: \"\",\n        file: undefined,\n        stream: undefined,\n        segments: undefined,\n        preset: undefined,\n        advanced: undefined,\n        fileOutputs: [],\n        streamOutputs: [],\n        segmentOutputs: [],\n        imageOutputs: [],\n    };\n}\nexports.RoomCompositeEgressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(10).string(message.roomName);\n        }\n        if (message.layout !== undefined && message.layout !== \"\") {\n            writer.uint32(18).string(message.layout);\n        }\n        if (message.audioOnly === true) {\n            writer.uint32(24).bool(message.audioOnly);\n        }\n        if (message.videoOnly === true) {\n            writer.uint32(32).bool(message.videoOnly);\n        }\n        if (message.customBaseUrl !== undefined && message.customBaseUrl !== \"\") {\n            writer.uint32(42).string(message.customBaseUrl);\n        }\n        if (message.file !== undefined) {\n            exports.EncodedFileOutput.encode(message.file, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.stream !== undefined) {\n            exports.StreamOutput.encode(message.stream, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.segments !== undefined) {\n            exports.SegmentedFileOutput.encode(message.segments, writer.uint32(82).fork()).ldelim();\n        }\n        if (message.preset !== undefined) {\n            writer.uint32(64).int32(message.preset);\n        }\n        if (message.advanced !== undefined) {\n            exports.EncodingOptions.encode(message.advanced, writer.uint32(74).fork()).ldelim();\n        }\n        if (message.fileOutputs !== undefined && message.fileOutputs.length !== 0) {\n            for (const v of message.fileOutputs) {\n                exports.EncodedFileOutput.encode(v, writer.uint32(90).fork()).ldelim();\n            }\n        }\n        if (message.streamOutputs !== undefined && message.streamOutputs.length !== 0) {\n            for (const v of message.streamOutputs) {\n                exports.StreamOutput.encode(v, writer.uint32(98).fork()).ldelim();\n            }\n        }\n        if (message.segmentOutputs !== undefined && message.segmentOutputs.length !== 0) {\n            for (const v of message.segmentOutputs) {\n                exports.SegmentedFileOutput.encode(v, writer.uint32(106).fork()).ldelim();\n            }\n        }\n        if (message.imageOutputs !== undefined && message.imageOutputs.length !== 0) {\n            for (const v of message.imageOutputs) {\n                exports.ImageOutput.encode(v, writer.uint32(114).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseRoomCompositeEgressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.roomName = reader.string();\n                    break;\n                case 2:\n                    message.layout = reader.string();\n                    break;\n                case 3:\n                    message.audioOnly = reader.bool();\n                    break;\n                case 4:\n                    message.videoOnly = reader.bool();\n                    break;\n                case 5:\n                    message.customBaseUrl = reader.string();\n                    break;\n                case 6:\n                    message.file = exports.EncodedFileOutput.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.stream = exports.StreamOutput.decode(reader, reader.uint32());\n                    break;\n                case 10:\n                    message.segments = exports.SegmentedFileOutput.decode(reader, reader.uint32());\n                    break;\n                case 8:\n                    message.preset = reader.int32();\n                    break;\n                case 9:\n                    message.advanced = exports.EncodingOptions.decode(reader, reader.uint32());\n                    break;\n                case 11:\n                    message.fileOutputs.push(exports.EncodedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                case 12:\n                    message.streamOutputs.push(exports.StreamOutput.decode(reader, reader.uint32()));\n                    break;\n                case 13:\n                    message.segmentOutputs.push(exports.SegmentedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                case 14:\n                    message.imageOutputs.push(exports.ImageOutput.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            layout: isSet(object.layout) ? String(object.layout) : \"\",\n            audioOnly: isSet(object.audioOnly) ? Boolean(object.audioOnly) : false,\n            videoOnly: isSet(object.videoOnly) ? Boolean(object.videoOnly) : false,\n            customBaseUrl: isSet(object.customBaseUrl) ? String(object.customBaseUrl) : \"\",\n            file: isSet(object.file) ? exports.EncodedFileOutput.fromJSON(object.file) : undefined,\n            stream: isSet(object.stream) ? exports.StreamOutput.fromJSON(object.stream) : undefined,\n            segments: isSet(object.segments) ? exports.SegmentedFileOutput.fromJSON(object.segments) : undefined,\n            preset: isSet(object.preset) ? encodingOptionsPresetFromJSON(object.preset) : undefined,\n            advanced: isSet(object.advanced) ? exports.EncodingOptions.fromJSON(object.advanced) : undefined,\n            fileOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.fileOutputs)\n                ? object.fileOutputs.map((e) => exports.EncodedFileOutput.fromJSON(e))\n                : [],\n            streamOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.streamOutputs)\n                ? object.streamOutputs.map((e) => exports.StreamOutput.fromJSON(e))\n                : [],\n            segmentOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.segmentOutputs)\n                ? object.segmentOutputs.map((e) => exports.SegmentedFileOutput.fromJSON(e))\n                : [],\n            imageOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.imageOutputs)\n                ? object.imageOutputs.map((e) => exports.ImageOutput.fromJSON(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.layout !== undefined && (obj.layout = message.layout);\n        message.audioOnly !== undefined && (obj.audioOnly = message.audioOnly);\n        message.videoOnly !== undefined && (obj.videoOnly = message.videoOnly);\n        message.customBaseUrl !== undefined && (obj.customBaseUrl = message.customBaseUrl);\n        message.file !== undefined && (obj.file = message.file ? exports.EncodedFileOutput.toJSON(message.file) : undefined);\n        message.stream !== undefined && (obj.stream = message.stream ? exports.StreamOutput.toJSON(message.stream) : undefined);\n        message.segments !== undefined &&\n            (obj.segments = message.segments ? exports.SegmentedFileOutput.toJSON(message.segments) : undefined);\n        message.preset !== undefined &&\n            (obj.preset = message.preset !== undefined ? encodingOptionsPresetToJSON(message.preset) : undefined);\n        message.advanced !== undefined &&\n            (obj.advanced = message.advanced ? exports.EncodingOptions.toJSON(message.advanced) : undefined);\n        if (message.fileOutputs) {\n            obj.fileOutputs = message.fileOutputs.map((e) => e ? exports.EncodedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.fileOutputs = [];\n        }\n        if (message.streamOutputs) {\n            obj.streamOutputs = message.streamOutputs.map((e) => e ? exports.StreamOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.streamOutputs = [];\n        }\n        if (message.segmentOutputs) {\n            obj.segmentOutputs = message.segmentOutputs.map((e) => e ? exports.SegmentedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.segmentOutputs = [];\n        }\n        if (message.imageOutputs) {\n            obj.imageOutputs = message.imageOutputs.map((e) => e ? exports.ImageOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.imageOutputs = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        const message = createBaseRoomCompositeEgressRequest();\n        message.roomName = (_a = object.roomName) !== null && _a !== void 0 ? _a : \"\";\n        message.layout = (_b = object.layout) !== null && _b !== void 0 ? _b : \"\";\n        message.audioOnly = (_c = object.audioOnly) !== null && _c !== void 0 ? _c : false;\n        message.videoOnly = (_d = object.videoOnly) !== null && _d !== void 0 ? _d : false;\n        message.customBaseUrl = (_e = object.customBaseUrl) !== null && _e !== void 0 ? _e : \"\";\n        message.file = (object.file !== undefined && object.file !== null)\n            ? exports.EncodedFileOutput.fromPartial(object.file)\n            : undefined;\n        message.stream = (object.stream !== undefined && object.stream !== null)\n            ? exports.StreamOutput.fromPartial(object.stream)\n            : undefined;\n        message.segments = (object.segments !== undefined && object.segments !== null)\n            ? exports.SegmentedFileOutput.fromPartial(object.segments)\n            : undefined;\n        message.preset = (_f = object.preset) !== null && _f !== void 0 ? _f : undefined;\n        message.advanced = (object.advanced !== undefined && object.advanced !== null)\n            ? exports.EncodingOptions.fromPartial(object.advanced)\n            : undefined;\n        message.fileOutputs = ((_g = object.fileOutputs) === null || _g === void 0 ? void 0 : _g.map((e) => exports.EncodedFileOutput.fromPartial(e))) || [];\n        message.streamOutputs = ((_h = object.streamOutputs) === null || _h === void 0 ? void 0 : _h.map((e) => exports.StreamOutput.fromPartial(e))) || [];\n        message.segmentOutputs = ((_j = object.segmentOutputs) === null || _j === void 0 ? void 0 : _j.map((e) => exports.SegmentedFileOutput.fromPartial(e))) || [];\n        message.imageOutputs = ((_k = object.imageOutputs) === null || _k === void 0 ? void 0 : _k.map((e) => exports.ImageOutput.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseWebEgressRequest() {\n    return {\n        url: \"\",\n        audioOnly: false,\n        videoOnly: false,\n        awaitStartSignal: false,\n        file: undefined,\n        stream: undefined,\n        segments: undefined,\n        preset: undefined,\n        advanced: undefined,\n        fileOutputs: [],\n        streamOutputs: [],\n        segmentOutputs: [],\n        imageOutputs: [],\n    };\n}\nexports.WebEgressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.url !== undefined && message.url !== \"\") {\n            writer.uint32(10).string(message.url);\n        }\n        if (message.audioOnly === true) {\n            writer.uint32(16).bool(message.audioOnly);\n        }\n        if (message.videoOnly === true) {\n            writer.uint32(24).bool(message.videoOnly);\n        }\n        if (message.awaitStartSignal === true) {\n            writer.uint32(96).bool(message.awaitStartSignal);\n        }\n        if (message.file !== undefined) {\n            exports.EncodedFileOutput.encode(message.file, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.stream !== undefined) {\n            exports.StreamOutput.encode(message.stream, writer.uint32(42).fork()).ldelim();\n        }\n        if (message.segments !== undefined) {\n            exports.SegmentedFileOutput.encode(message.segments, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.preset !== undefined) {\n            writer.uint32(56).int32(message.preset);\n        }\n        if (message.advanced !== undefined) {\n            exports.EncodingOptions.encode(message.advanced, writer.uint32(66).fork()).ldelim();\n        }\n        if (message.fileOutputs !== undefined && message.fileOutputs.length !== 0) {\n            for (const v of message.fileOutputs) {\n                exports.EncodedFileOutput.encode(v, writer.uint32(74).fork()).ldelim();\n            }\n        }\n        if (message.streamOutputs !== undefined && message.streamOutputs.length !== 0) {\n            for (const v of message.streamOutputs) {\n                exports.StreamOutput.encode(v, writer.uint32(82).fork()).ldelim();\n            }\n        }\n        if (message.segmentOutputs !== undefined && message.segmentOutputs.length !== 0) {\n            for (const v of message.segmentOutputs) {\n                exports.SegmentedFileOutput.encode(v, writer.uint32(90).fork()).ldelim();\n            }\n        }\n        if (message.imageOutputs !== undefined && message.imageOutputs.length !== 0) {\n            for (const v of message.imageOutputs) {\n                exports.ImageOutput.encode(v, writer.uint32(106).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseWebEgressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.url = reader.string();\n                    break;\n                case 2:\n                    message.audioOnly = reader.bool();\n                    break;\n                case 3:\n                    message.videoOnly = reader.bool();\n                    break;\n                case 12:\n                    message.awaitStartSignal = reader.bool();\n                    break;\n                case 4:\n                    message.file = exports.EncodedFileOutput.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.stream = exports.StreamOutput.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.segments = exports.SegmentedFileOutput.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.preset = reader.int32();\n                    break;\n                case 8:\n                    message.advanced = exports.EncodingOptions.decode(reader, reader.uint32());\n                    break;\n                case 9:\n                    message.fileOutputs.push(exports.EncodedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                case 10:\n                    message.streamOutputs.push(exports.StreamOutput.decode(reader, reader.uint32()));\n                    break;\n                case 11:\n                    message.segmentOutputs.push(exports.SegmentedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                case 13:\n                    message.imageOutputs.push(exports.ImageOutput.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            url: isSet(object.url) ? String(object.url) : \"\",\n            audioOnly: isSet(object.audioOnly) ? Boolean(object.audioOnly) : false,\n            videoOnly: isSet(object.videoOnly) ? Boolean(object.videoOnly) : false,\n            awaitStartSignal: isSet(object.awaitStartSignal) ? Boolean(object.awaitStartSignal) : false,\n            file: isSet(object.file) ? exports.EncodedFileOutput.fromJSON(object.file) : undefined,\n            stream: isSet(object.stream) ? exports.StreamOutput.fromJSON(object.stream) : undefined,\n            segments: isSet(object.segments) ? exports.SegmentedFileOutput.fromJSON(object.segments) : undefined,\n            preset: isSet(object.preset) ? encodingOptionsPresetFromJSON(object.preset) : undefined,\n            advanced: isSet(object.advanced) ? exports.EncodingOptions.fromJSON(object.advanced) : undefined,\n            fileOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.fileOutputs)\n                ? object.fileOutputs.map((e) => exports.EncodedFileOutput.fromJSON(e))\n                : [],\n            streamOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.streamOutputs)\n                ? object.streamOutputs.map((e) => exports.StreamOutput.fromJSON(e))\n                : [],\n            segmentOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.segmentOutputs)\n                ? object.segmentOutputs.map((e) => exports.SegmentedFileOutput.fromJSON(e))\n                : [],\n            imageOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.imageOutputs)\n                ? object.imageOutputs.map((e) => exports.ImageOutput.fromJSON(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.url !== undefined && (obj.url = message.url);\n        message.audioOnly !== undefined && (obj.audioOnly = message.audioOnly);\n        message.videoOnly !== undefined && (obj.videoOnly = message.videoOnly);\n        message.awaitStartSignal !== undefined && (obj.awaitStartSignal = message.awaitStartSignal);\n        message.file !== undefined && (obj.file = message.file ? exports.EncodedFileOutput.toJSON(message.file) : undefined);\n        message.stream !== undefined && (obj.stream = message.stream ? exports.StreamOutput.toJSON(message.stream) : undefined);\n        message.segments !== undefined &&\n            (obj.segments = message.segments ? exports.SegmentedFileOutput.toJSON(message.segments) : undefined);\n        message.preset !== undefined &&\n            (obj.preset = message.preset !== undefined ? encodingOptionsPresetToJSON(message.preset) : undefined);\n        message.advanced !== undefined &&\n            (obj.advanced = message.advanced ? exports.EncodingOptions.toJSON(message.advanced) : undefined);\n        if (message.fileOutputs) {\n            obj.fileOutputs = message.fileOutputs.map((e) => e ? exports.EncodedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.fileOutputs = [];\n        }\n        if (message.streamOutputs) {\n            obj.streamOutputs = message.streamOutputs.map((e) => e ? exports.StreamOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.streamOutputs = [];\n        }\n        if (message.segmentOutputs) {\n            obj.segmentOutputs = message.segmentOutputs.map((e) => e ? exports.SegmentedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.segmentOutputs = [];\n        }\n        if (message.imageOutputs) {\n            obj.imageOutputs = message.imageOutputs.map((e) => e ? exports.ImageOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.imageOutputs = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        const message = createBaseWebEgressRequest();\n        message.url = (_a = object.url) !== null && _a !== void 0 ? _a : \"\";\n        message.audioOnly = (_b = object.audioOnly) !== null && _b !== void 0 ? _b : false;\n        message.videoOnly = (_c = object.videoOnly) !== null && _c !== void 0 ? _c : false;\n        message.awaitStartSignal = (_d = object.awaitStartSignal) !== null && _d !== void 0 ? _d : false;\n        message.file = (object.file !== undefined && object.file !== null)\n            ? exports.EncodedFileOutput.fromPartial(object.file)\n            : undefined;\n        message.stream = (object.stream !== undefined && object.stream !== null)\n            ? exports.StreamOutput.fromPartial(object.stream)\n            : undefined;\n        message.segments = (object.segments !== undefined && object.segments !== null)\n            ? exports.SegmentedFileOutput.fromPartial(object.segments)\n            : undefined;\n        message.preset = (_e = object.preset) !== null && _e !== void 0 ? _e : undefined;\n        message.advanced = (object.advanced !== undefined && object.advanced !== null)\n            ? exports.EncodingOptions.fromPartial(object.advanced)\n            : undefined;\n        message.fileOutputs = ((_f = object.fileOutputs) === null || _f === void 0 ? void 0 : _f.map((e) => exports.EncodedFileOutput.fromPartial(e))) || [];\n        message.streamOutputs = ((_g = object.streamOutputs) === null || _g === void 0 ? void 0 : _g.map((e) => exports.StreamOutput.fromPartial(e))) || [];\n        message.segmentOutputs = ((_h = object.segmentOutputs) === null || _h === void 0 ? void 0 : _h.map((e) => exports.SegmentedFileOutput.fromPartial(e))) || [];\n        message.imageOutputs = ((_j = object.imageOutputs) === null || _j === void 0 ? void 0 : _j.map((e) => exports.ImageOutput.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseParticipantEgressRequest() {\n    return {\n        roomName: \"\",\n        identity: \"\",\n        screenShare: false,\n        preset: undefined,\n        advanced: undefined,\n        fileOutputs: [],\n        streamOutputs: [],\n        segmentOutputs: [],\n        imageOutputs: [],\n    };\n}\nexports.ParticipantEgressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(10).string(message.roomName);\n        }\n        if (message.identity !== undefined && message.identity !== \"\") {\n            writer.uint32(18).string(message.identity);\n        }\n        if (message.screenShare === true) {\n            writer.uint32(24).bool(message.screenShare);\n        }\n        if (message.preset !== undefined) {\n            writer.uint32(32).int32(message.preset);\n        }\n        if (message.advanced !== undefined) {\n            exports.EncodingOptions.encode(message.advanced, writer.uint32(42).fork()).ldelim();\n        }\n        if (message.fileOutputs !== undefined && message.fileOutputs.length !== 0) {\n            for (const v of message.fileOutputs) {\n                exports.EncodedFileOutput.encode(v, writer.uint32(50).fork()).ldelim();\n            }\n        }\n        if (message.streamOutputs !== undefined && message.streamOutputs.length !== 0) {\n            for (const v of message.streamOutputs) {\n                exports.StreamOutput.encode(v, writer.uint32(58).fork()).ldelim();\n            }\n        }\n        if (message.segmentOutputs !== undefined && message.segmentOutputs.length !== 0) {\n            for (const v of message.segmentOutputs) {\n                exports.SegmentedFileOutput.encode(v, writer.uint32(66).fork()).ldelim();\n            }\n        }\n        if (message.imageOutputs !== undefined && message.imageOutputs.length !== 0) {\n            for (const v of message.imageOutputs) {\n                exports.ImageOutput.encode(v, writer.uint32(74).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseParticipantEgressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.roomName = reader.string();\n                    break;\n                case 2:\n                    message.identity = reader.string();\n                    break;\n                case 3:\n                    message.screenShare = reader.bool();\n                    break;\n                case 4:\n                    message.preset = reader.int32();\n                    break;\n                case 5:\n                    message.advanced = exports.EncodingOptions.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.fileOutputs.push(exports.EncodedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                case 7:\n                    message.streamOutputs.push(exports.StreamOutput.decode(reader, reader.uint32()));\n                    break;\n                case 8:\n                    message.segmentOutputs.push(exports.SegmentedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                case 9:\n                    message.imageOutputs.push(exports.ImageOutput.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            identity: isSet(object.identity) ? String(object.identity) : \"\",\n            screenShare: isSet(object.screenShare) ? Boolean(object.screenShare) : false,\n            preset: isSet(object.preset) ? encodingOptionsPresetFromJSON(object.preset) : undefined,\n            advanced: isSet(object.advanced) ? exports.EncodingOptions.fromJSON(object.advanced) : undefined,\n            fileOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.fileOutputs)\n                ? object.fileOutputs.map((e) => exports.EncodedFileOutput.fromJSON(e))\n                : [],\n            streamOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.streamOutputs)\n                ? object.streamOutputs.map((e) => exports.StreamOutput.fromJSON(e))\n                : [],\n            segmentOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.segmentOutputs)\n                ? object.segmentOutputs.map((e) => exports.SegmentedFileOutput.fromJSON(e))\n                : [],\n            imageOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.imageOutputs)\n                ? object.imageOutputs.map((e) => exports.ImageOutput.fromJSON(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.identity !== undefined && (obj.identity = message.identity);\n        message.screenShare !== undefined && (obj.screenShare = message.screenShare);\n        message.preset !== undefined &&\n            (obj.preset = message.preset !== undefined ? encodingOptionsPresetToJSON(message.preset) : undefined);\n        message.advanced !== undefined &&\n            (obj.advanced = message.advanced ? exports.EncodingOptions.toJSON(message.advanced) : undefined);\n        if (message.fileOutputs) {\n            obj.fileOutputs = message.fileOutputs.map((e) => e ? exports.EncodedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.fileOutputs = [];\n        }\n        if (message.streamOutputs) {\n            obj.streamOutputs = message.streamOutputs.map((e) => e ? exports.StreamOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.streamOutputs = [];\n        }\n        if (message.segmentOutputs) {\n            obj.segmentOutputs = message.segmentOutputs.map((e) => e ? exports.SegmentedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.segmentOutputs = [];\n        }\n        if (message.imageOutputs) {\n            obj.imageOutputs = message.imageOutputs.map((e) => e ? exports.ImageOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.imageOutputs = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        const message = createBaseParticipantEgressRequest();\n        message.roomName = (_a = object.roomName) !== null && _a !== void 0 ? _a : \"\";\n        message.identity = (_b = object.identity) !== null && _b !== void 0 ? _b : \"\";\n        message.screenShare = (_c = object.screenShare) !== null && _c !== void 0 ? _c : false;\n        message.preset = (_d = object.preset) !== null && _d !== void 0 ? _d : undefined;\n        message.advanced = (object.advanced !== undefined && object.advanced !== null)\n            ? exports.EncodingOptions.fromPartial(object.advanced)\n            : undefined;\n        message.fileOutputs = ((_e = object.fileOutputs) === null || _e === void 0 ? void 0 : _e.map((e) => exports.EncodedFileOutput.fromPartial(e))) || [];\n        message.streamOutputs = ((_f = object.streamOutputs) === null || _f === void 0 ? void 0 : _f.map((e) => exports.StreamOutput.fromPartial(e))) || [];\n        message.segmentOutputs = ((_g = object.segmentOutputs) === null || _g === void 0 ? void 0 : _g.map((e) => exports.SegmentedFileOutput.fromPartial(e))) || [];\n        message.imageOutputs = ((_h = object.imageOutputs) === null || _h === void 0 ? void 0 : _h.map((e) => exports.ImageOutput.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseTrackCompositeEgressRequest() {\n    return {\n        roomName: \"\",\n        audioTrackId: \"\",\n        videoTrackId: \"\",\n        file: undefined,\n        stream: undefined,\n        segments: undefined,\n        preset: undefined,\n        advanced: undefined,\n        fileOutputs: [],\n        streamOutputs: [],\n        segmentOutputs: [],\n        imageOutputs: [],\n    };\n}\nexports.TrackCompositeEgressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(10).string(message.roomName);\n        }\n        if (message.audioTrackId !== undefined && message.audioTrackId !== \"\") {\n            writer.uint32(18).string(message.audioTrackId);\n        }\n        if (message.videoTrackId !== undefined && message.videoTrackId !== \"\") {\n            writer.uint32(26).string(message.videoTrackId);\n        }\n        if (message.file !== undefined) {\n            exports.EncodedFileOutput.encode(message.file, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.stream !== undefined) {\n            exports.StreamOutput.encode(message.stream, writer.uint32(42).fork()).ldelim();\n        }\n        if (message.segments !== undefined) {\n            exports.SegmentedFileOutput.encode(message.segments, writer.uint32(66).fork()).ldelim();\n        }\n        if (message.preset !== undefined) {\n            writer.uint32(48).int32(message.preset);\n        }\n        if (message.advanced !== undefined) {\n            exports.EncodingOptions.encode(message.advanced, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.fileOutputs !== undefined && message.fileOutputs.length !== 0) {\n            for (const v of message.fileOutputs) {\n                exports.EncodedFileOutput.encode(v, writer.uint32(90).fork()).ldelim();\n            }\n        }\n        if (message.streamOutputs !== undefined && message.streamOutputs.length !== 0) {\n            for (const v of message.streamOutputs) {\n                exports.StreamOutput.encode(v, writer.uint32(98).fork()).ldelim();\n            }\n        }\n        if (message.segmentOutputs !== undefined && message.segmentOutputs.length !== 0) {\n            for (const v of message.segmentOutputs) {\n                exports.SegmentedFileOutput.encode(v, writer.uint32(106).fork()).ldelim();\n            }\n        }\n        if (message.imageOutputs !== undefined && message.imageOutputs.length !== 0) {\n            for (const v of message.imageOutputs) {\n                exports.ImageOutput.encode(v, writer.uint32(114).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseTrackCompositeEgressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.roomName = reader.string();\n                    break;\n                case 2:\n                    message.audioTrackId = reader.string();\n                    break;\n                case 3:\n                    message.videoTrackId = reader.string();\n                    break;\n                case 4:\n                    message.file = exports.EncodedFileOutput.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.stream = exports.StreamOutput.decode(reader, reader.uint32());\n                    break;\n                case 8:\n                    message.segments = exports.SegmentedFileOutput.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.preset = reader.int32();\n                    break;\n                case 7:\n                    message.advanced = exports.EncodingOptions.decode(reader, reader.uint32());\n                    break;\n                case 11:\n                    message.fileOutputs.push(exports.EncodedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                case 12:\n                    message.streamOutputs.push(exports.StreamOutput.decode(reader, reader.uint32()));\n                    break;\n                case 13:\n                    message.segmentOutputs.push(exports.SegmentedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                case 14:\n                    message.imageOutputs.push(exports.ImageOutput.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            audioTrackId: isSet(object.audioTrackId) ? String(object.audioTrackId) : \"\",\n            videoTrackId: isSet(object.videoTrackId) ? String(object.videoTrackId) : \"\",\n            file: isSet(object.file) ? exports.EncodedFileOutput.fromJSON(object.file) : undefined,\n            stream: isSet(object.stream) ? exports.StreamOutput.fromJSON(object.stream) : undefined,\n            segments: isSet(object.segments) ? exports.SegmentedFileOutput.fromJSON(object.segments) : undefined,\n            preset: isSet(object.preset) ? encodingOptionsPresetFromJSON(object.preset) : undefined,\n            advanced: isSet(object.advanced) ? exports.EncodingOptions.fromJSON(object.advanced) : undefined,\n            fileOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.fileOutputs)\n                ? object.fileOutputs.map((e) => exports.EncodedFileOutput.fromJSON(e))\n                : [],\n            streamOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.streamOutputs)\n                ? object.streamOutputs.map((e) => exports.StreamOutput.fromJSON(e))\n                : [],\n            segmentOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.segmentOutputs)\n                ? object.segmentOutputs.map((e) => exports.SegmentedFileOutput.fromJSON(e))\n                : [],\n            imageOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.imageOutputs)\n                ? object.imageOutputs.map((e) => exports.ImageOutput.fromJSON(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.audioTrackId !== undefined && (obj.audioTrackId = message.audioTrackId);\n        message.videoTrackId !== undefined && (obj.videoTrackId = message.videoTrackId);\n        message.file !== undefined && (obj.file = message.file ? exports.EncodedFileOutput.toJSON(message.file) : undefined);\n        message.stream !== undefined && (obj.stream = message.stream ? exports.StreamOutput.toJSON(message.stream) : undefined);\n        message.segments !== undefined &&\n            (obj.segments = message.segments ? exports.SegmentedFileOutput.toJSON(message.segments) : undefined);\n        message.preset !== undefined &&\n            (obj.preset = message.preset !== undefined ? encodingOptionsPresetToJSON(message.preset) : undefined);\n        message.advanced !== undefined &&\n            (obj.advanced = message.advanced ? exports.EncodingOptions.toJSON(message.advanced) : undefined);\n        if (message.fileOutputs) {\n            obj.fileOutputs = message.fileOutputs.map((e) => e ? exports.EncodedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.fileOutputs = [];\n        }\n        if (message.streamOutputs) {\n            obj.streamOutputs = message.streamOutputs.map((e) => e ? exports.StreamOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.streamOutputs = [];\n        }\n        if (message.segmentOutputs) {\n            obj.segmentOutputs = message.segmentOutputs.map((e) => e ? exports.SegmentedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.segmentOutputs = [];\n        }\n        if (message.imageOutputs) {\n            obj.imageOutputs = message.imageOutputs.map((e) => e ? exports.ImageOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.imageOutputs = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        const message = createBaseTrackCompositeEgressRequest();\n        message.roomName = (_a = object.roomName) !== null && _a !== void 0 ? _a : \"\";\n        message.audioTrackId = (_b = object.audioTrackId) !== null && _b !== void 0 ? _b : \"\";\n        message.videoTrackId = (_c = object.videoTrackId) !== null && _c !== void 0 ? _c : \"\";\n        message.file = (object.file !== undefined && object.file !== null)\n            ? exports.EncodedFileOutput.fromPartial(object.file)\n            : undefined;\n        message.stream = (object.stream !== undefined && object.stream !== null)\n            ? exports.StreamOutput.fromPartial(object.stream)\n            : undefined;\n        message.segments = (object.segments !== undefined && object.segments !== null)\n            ? exports.SegmentedFileOutput.fromPartial(object.segments)\n            : undefined;\n        message.preset = (_d = object.preset) !== null && _d !== void 0 ? _d : undefined;\n        message.advanced = (object.advanced !== undefined && object.advanced !== null)\n            ? exports.EncodingOptions.fromPartial(object.advanced)\n            : undefined;\n        message.fileOutputs = ((_e = object.fileOutputs) === null || _e === void 0 ? void 0 : _e.map((e) => exports.EncodedFileOutput.fromPartial(e))) || [];\n        message.streamOutputs = ((_f = object.streamOutputs) === null || _f === void 0 ? void 0 : _f.map((e) => exports.StreamOutput.fromPartial(e))) || [];\n        message.segmentOutputs = ((_g = object.segmentOutputs) === null || _g === void 0 ? void 0 : _g.map((e) => exports.SegmentedFileOutput.fromPartial(e))) || [];\n        message.imageOutputs = ((_h = object.imageOutputs) === null || _h === void 0 ? void 0 : _h.map((e) => exports.ImageOutput.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseTrackEgressRequest() {\n    return { roomName: \"\", trackId: \"\", file: undefined, websocketUrl: undefined };\n}\nexports.TrackEgressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(10).string(message.roomName);\n        }\n        if (message.trackId !== undefined && message.trackId !== \"\") {\n            writer.uint32(18).string(message.trackId);\n        }\n        if (message.file !== undefined) {\n            exports.DirectFileOutput.encode(message.file, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.websocketUrl !== undefined) {\n            writer.uint32(34).string(message.websocketUrl);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseTrackEgressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.roomName = reader.string();\n                    break;\n                case 2:\n                    message.trackId = reader.string();\n                    break;\n                case 3:\n                    message.file = exports.DirectFileOutput.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.websocketUrl = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            trackId: isSet(object.trackId) ? String(object.trackId) : \"\",\n            file: isSet(object.file) ? exports.DirectFileOutput.fromJSON(object.file) : undefined,\n            websocketUrl: isSet(object.websocketUrl) ? String(object.websocketUrl) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.trackId !== undefined && (obj.trackId = message.trackId);\n        message.file !== undefined && (obj.file = message.file ? exports.DirectFileOutput.toJSON(message.file) : undefined);\n        message.websocketUrl !== undefined && (obj.websocketUrl = message.websocketUrl);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseTrackEgressRequest();\n        message.roomName = (_a = object.roomName) !== null && _a !== void 0 ? _a : \"\";\n        message.trackId = (_b = object.trackId) !== null && _b !== void 0 ? _b : \"\";\n        message.file = (object.file !== undefined && object.file !== null)\n            ? exports.DirectFileOutput.fromPartial(object.file)\n            : undefined;\n        message.websocketUrl = (_c = object.websocketUrl) !== null && _c !== void 0 ? _c : undefined;\n        return message;\n    },\n};\nfunction createBaseEncodedFileOutput() {\n    return {\n        fileType: 0,\n        filepath: \"\",\n        disableManifest: false,\n        s3: undefined,\n        gcp: undefined,\n        azure: undefined,\n        aliOSS: undefined,\n    };\n}\nexports.EncodedFileOutput = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.fileType !== undefined && message.fileType !== 0) {\n            writer.uint32(8).int32(message.fileType);\n        }\n        if (message.filepath !== undefined && message.filepath !== \"\") {\n            writer.uint32(18).string(message.filepath);\n        }\n        if (message.disableManifest === true) {\n            writer.uint32(48).bool(message.disableManifest);\n        }\n        if (message.s3 !== undefined) {\n            exports.S3Upload.encode(message.s3, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.gcp !== undefined) {\n            exports.GCPUpload.encode(message.gcp, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.azure !== undefined) {\n            exports.AzureBlobUpload.encode(message.azure, writer.uint32(42).fork()).ldelim();\n        }\n        if (message.aliOSS !== undefined) {\n            exports.AliOSSUpload.encode(message.aliOSS, writer.uint32(58).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseEncodedFileOutput();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.fileType = reader.int32();\n                    break;\n                case 2:\n                    message.filepath = reader.string();\n                    break;\n                case 6:\n                    message.disableManifest = reader.bool();\n                    break;\n                case 3:\n                    message.s3 = exports.S3Upload.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.gcp = exports.GCPUpload.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.azure = exports.AzureBlobUpload.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.aliOSS = exports.AliOSSUpload.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            fileType: isSet(object.fileType) ? encodedFileTypeFromJSON(object.fileType) : 0,\n            filepath: isSet(object.filepath) ? String(object.filepath) : \"\",\n            disableManifest: isSet(object.disableManifest) ? Boolean(object.disableManifest) : false,\n            s3: isSet(object.s3) ? exports.S3Upload.fromJSON(object.s3) : undefined,\n            gcp: isSet(object.gcp) ? exports.GCPUpload.fromJSON(object.gcp) : undefined,\n            azure: isSet(object.azure) ? exports.AzureBlobUpload.fromJSON(object.azure) : undefined,\n            aliOSS: isSet(object.aliOSS) ? exports.AliOSSUpload.fromJSON(object.aliOSS) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.fileType !== undefined && (obj.fileType = encodedFileTypeToJSON(message.fileType));\n        message.filepath !== undefined && (obj.filepath = message.filepath);\n        message.disableManifest !== undefined && (obj.disableManifest = message.disableManifest);\n        message.s3 !== undefined && (obj.s3 = message.s3 ? exports.S3Upload.toJSON(message.s3) : undefined);\n        message.gcp !== undefined && (obj.gcp = message.gcp ? exports.GCPUpload.toJSON(message.gcp) : undefined);\n        message.azure !== undefined && (obj.azure = message.azure ? exports.AzureBlobUpload.toJSON(message.azure) : undefined);\n        message.aliOSS !== undefined && (obj.aliOSS = message.aliOSS ? exports.AliOSSUpload.toJSON(message.aliOSS) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseEncodedFileOutput();\n        message.fileType = (_a = object.fileType) !== null && _a !== void 0 ? _a : 0;\n        message.filepath = (_b = object.filepath) !== null && _b !== void 0 ? _b : \"\";\n        message.disableManifest = (_c = object.disableManifest) !== null && _c !== void 0 ? _c : false;\n        message.s3 = (object.s3 !== undefined && object.s3 !== null) ? exports.S3Upload.fromPartial(object.s3) : undefined;\n        message.gcp = (object.gcp !== undefined && object.gcp !== null) ? exports.GCPUpload.fromPartial(object.gcp) : undefined;\n        message.azure = (object.azure !== undefined && object.azure !== null)\n            ? exports.AzureBlobUpload.fromPartial(object.azure)\n            : undefined;\n        message.aliOSS = (object.aliOSS !== undefined && object.aliOSS !== null)\n            ? exports.AliOSSUpload.fromPartial(object.aliOSS)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseSegmentedFileOutput() {\n    return {\n        protocol: 0,\n        filenamePrefix: \"\",\n        playlistName: \"\",\n        livePlaylistName: \"\",\n        segmentDuration: 0,\n        filenameSuffix: 0,\n        disableManifest: false,\n        s3: undefined,\n        gcp: undefined,\n        azure: undefined,\n        aliOSS: undefined,\n    };\n}\nexports.SegmentedFileOutput = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.protocol !== undefined && message.protocol !== 0) {\n            writer.uint32(8).int32(message.protocol);\n        }\n        if (message.filenamePrefix !== undefined && message.filenamePrefix !== \"\") {\n            writer.uint32(18).string(message.filenamePrefix);\n        }\n        if (message.playlistName !== undefined && message.playlistName !== \"\") {\n            writer.uint32(26).string(message.playlistName);\n        }\n        if (message.livePlaylistName !== undefined && message.livePlaylistName !== \"\") {\n            writer.uint32(90).string(message.livePlaylistName);\n        }\n        if (message.segmentDuration !== undefined && message.segmentDuration !== 0) {\n            writer.uint32(32).uint32(message.segmentDuration);\n        }\n        if (message.filenameSuffix !== undefined && message.filenameSuffix !== 0) {\n            writer.uint32(80).int32(message.filenameSuffix);\n        }\n        if (message.disableManifest === true) {\n            writer.uint32(64).bool(message.disableManifest);\n        }\n        if (message.s3 !== undefined) {\n            exports.S3Upload.encode(message.s3, writer.uint32(42).fork()).ldelim();\n        }\n        if (message.gcp !== undefined) {\n            exports.GCPUpload.encode(message.gcp, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.azure !== undefined) {\n            exports.AzureBlobUpload.encode(message.azure, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.aliOSS !== undefined) {\n            exports.AliOSSUpload.encode(message.aliOSS, writer.uint32(74).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseSegmentedFileOutput();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.protocol = reader.int32();\n                    break;\n                case 2:\n                    message.filenamePrefix = reader.string();\n                    break;\n                case 3:\n                    message.playlistName = reader.string();\n                    break;\n                case 11:\n                    message.livePlaylistName = reader.string();\n                    break;\n                case 4:\n                    message.segmentDuration = reader.uint32();\n                    break;\n                case 10:\n                    message.filenameSuffix = reader.int32();\n                    break;\n                case 8:\n                    message.disableManifest = reader.bool();\n                    break;\n                case 5:\n                    message.s3 = exports.S3Upload.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.gcp = exports.GCPUpload.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.azure = exports.AzureBlobUpload.decode(reader, reader.uint32());\n                    break;\n                case 9:\n                    message.aliOSS = exports.AliOSSUpload.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            protocol: isSet(object.protocol) ? segmentedFileProtocolFromJSON(object.protocol) : 0,\n            filenamePrefix: isSet(object.filenamePrefix) ? String(object.filenamePrefix) : \"\",\n            playlistName: isSet(object.playlistName) ? String(object.playlistName) : \"\",\n            livePlaylistName: isSet(object.livePlaylistName) ? String(object.livePlaylistName) : \"\",\n            segmentDuration: isSet(object.segmentDuration) ? Number(object.segmentDuration) : 0,\n            filenameSuffix: isSet(object.filenameSuffix) ? segmentedFileSuffixFromJSON(object.filenameSuffix) : 0,\n            disableManifest: isSet(object.disableManifest) ? Boolean(object.disableManifest) : false,\n            s3: isSet(object.s3) ? exports.S3Upload.fromJSON(object.s3) : undefined,\n            gcp: isSet(object.gcp) ? exports.GCPUpload.fromJSON(object.gcp) : undefined,\n            azure: isSet(object.azure) ? exports.AzureBlobUpload.fromJSON(object.azure) : undefined,\n            aliOSS: isSet(object.aliOSS) ? exports.AliOSSUpload.fromJSON(object.aliOSS) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.protocol !== undefined && (obj.protocol = segmentedFileProtocolToJSON(message.protocol));\n        message.filenamePrefix !== undefined && (obj.filenamePrefix = message.filenamePrefix);\n        message.playlistName !== undefined && (obj.playlistName = message.playlistName);\n        message.livePlaylistName !== undefined && (obj.livePlaylistName = message.livePlaylistName);\n        message.segmentDuration !== undefined && (obj.segmentDuration = Math.round(message.segmentDuration));\n        message.filenameSuffix !== undefined && (obj.filenameSuffix = segmentedFileSuffixToJSON(message.filenameSuffix));\n        message.disableManifest !== undefined && (obj.disableManifest = message.disableManifest);\n        message.s3 !== undefined && (obj.s3 = message.s3 ? exports.S3Upload.toJSON(message.s3) : undefined);\n        message.gcp !== undefined && (obj.gcp = message.gcp ? exports.GCPUpload.toJSON(message.gcp) : undefined);\n        message.azure !== undefined && (obj.azure = message.azure ? exports.AzureBlobUpload.toJSON(message.azure) : undefined);\n        message.aliOSS !== undefined && (obj.aliOSS = message.aliOSS ? exports.AliOSSUpload.toJSON(message.aliOSS) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        const message = createBaseSegmentedFileOutput();\n        message.protocol = (_a = object.protocol) !== null && _a !== void 0 ? _a : 0;\n        message.filenamePrefix = (_b = object.filenamePrefix) !== null && _b !== void 0 ? _b : \"\";\n        message.playlistName = (_c = object.playlistName) !== null && _c !== void 0 ? _c : \"\";\n        message.livePlaylistName = (_d = object.livePlaylistName) !== null && _d !== void 0 ? _d : \"\";\n        message.segmentDuration = (_e = object.segmentDuration) !== null && _e !== void 0 ? _e : 0;\n        message.filenameSuffix = (_f = object.filenameSuffix) !== null && _f !== void 0 ? _f : 0;\n        message.disableManifest = (_g = object.disableManifest) !== null && _g !== void 0 ? _g : false;\n        message.s3 = (object.s3 !== undefined && object.s3 !== null) ? exports.S3Upload.fromPartial(object.s3) : undefined;\n        message.gcp = (object.gcp !== undefined && object.gcp !== null) ? exports.GCPUpload.fromPartial(object.gcp) : undefined;\n        message.azure = (object.azure !== undefined && object.azure !== null)\n            ? exports.AzureBlobUpload.fromPartial(object.azure)\n            : undefined;\n        message.aliOSS = (object.aliOSS !== undefined && object.aliOSS !== null)\n            ? exports.AliOSSUpload.fromPartial(object.aliOSS)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseDirectFileOutput() {\n    return { filepath: \"\", disableManifest: false, s3: undefined, gcp: undefined, azure: undefined, aliOSS: undefined };\n}\nexports.DirectFileOutput = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.filepath !== undefined && message.filepath !== \"\") {\n            writer.uint32(10).string(message.filepath);\n        }\n        if (message.disableManifest === true) {\n            writer.uint32(40).bool(message.disableManifest);\n        }\n        if (message.s3 !== undefined) {\n            exports.S3Upload.encode(message.s3, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.gcp !== undefined) {\n            exports.GCPUpload.encode(message.gcp, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.azure !== undefined) {\n            exports.AzureBlobUpload.encode(message.azure, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.aliOSS !== undefined) {\n            exports.AliOSSUpload.encode(message.aliOSS, writer.uint32(50).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseDirectFileOutput();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.filepath = reader.string();\n                    break;\n                case 5:\n                    message.disableManifest = reader.bool();\n                    break;\n                case 2:\n                    message.s3 = exports.S3Upload.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.gcp = exports.GCPUpload.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.azure = exports.AzureBlobUpload.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.aliOSS = exports.AliOSSUpload.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            filepath: isSet(object.filepath) ? String(object.filepath) : \"\",\n            disableManifest: isSet(object.disableManifest) ? Boolean(object.disableManifest) : false,\n            s3: isSet(object.s3) ? exports.S3Upload.fromJSON(object.s3) : undefined,\n            gcp: isSet(object.gcp) ? exports.GCPUpload.fromJSON(object.gcp) : undefined,\n            azure: isSet(object.azure) ? exports.AzureBlobUpload.fromJSON(object.azure) : undefined,\n            aliOSS: isSet(object.aliOSS) ? exports.AliOSSUpload.fromJSON(object.aliOSS) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.filepath !== undefined && (obj.filepath = message.filepath);\n        message.disableManifest !== undefined && (obj.disableManifest = message.disableManifest);\n        message.s3 !== undefined && (obj.s3 = message.s3 ? exports.S3Upload.toJSON(message.s3) : undefined);\n        message.gcp !== undefined && (obj.gcp = message.gcp ? exports.GCPUpload.toJSON(message.gcp) : undefined);\n        message.azure !== undefined && (obj.azure = message.azure ? exports.AzureBlobUpload.toJSON(message.azure) : undefined);\n        message.aliOSS !== undefined && (obj.aliOSS = message.aliOSS ? exports.AliOSSUpload.toJSON(message.aliOSS) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseDirectFileOutput();\n        message.filepath = (_a = object.filepath) !== null && _a !== void 0 ? _a : \"\";\n        message.disableManifest = (_b = object.disableManifest) !== null && _b !== void 0 ? _b : false;\n        message.s3 = (object.s3 !== undefined && object.s3 !== null) ? exports.S3Upload.fromPartial(object.s3) : undefined;\n        message.gcp = (object.gcp !== undefined && object.gcp !== null) ? exports.GCPUpload.fromPartial(object.gcp) : undefined;\n        message.azure = (object.azure !== undefined && object.azure !== null)\n            ? exports.AzureBlobUpload.fromPartial(object.azure)\n            : undefined;\n        message.aliOSS = (object.aliOSS !== undefined && object.aliOSS !== null)\n            ? exports.AliOSSUpload.fromPartial(object.aliOSS)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseImageOutput() {\n    return {\n        captureInterval: 0,\n        width: 0,\n        height: 0,\n        filenamePrefix: \"\",\n        filenameSuffix: 0,\n        imageCodec: 0,\n        disableManifest: false,\n        s3: undefined,\n        gcp: undefined,\n        azure: undefined,\n        aliOSS: undefined,\n    };\n}\nexports.ImageOutput = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.captureInterval !== undefined && message.captureInterval !== 0) {\n            writer.uint32(8).uint32(message.captureInterval);\n        }\n        if (message.width !== undefined && message.width !== 0) {\n            writer.uint32(16).int32(message.width);\n        }\n        if (message.height !== undefined && message.height !== 0) {\n            writer.uint32(24).int32(message.height);\n        }\n        if (message.filenamePrefix !== undefined && message.filenamePrefix !== \"\") {\n            writer.uint32(34).string(message.filenamePrefix);\n        }\n        if (message.filenameSuffix !== undefined && message.filenameSuffix !== 0) {\n            writer.uint32(40).int32(message.filenameSuffix);\n        }\n        if (message.imageCodec !== undefined && message.imageCodec !== 0) {\n            writer.uint32(48).int32(message.imageCodec);\n        }\n        if (message.disableManifest === true) {\n            writer.uint32(56).bool(message.disableManifest);\n        }\n        if (message.s3 !== undefined) {\n            exports.S3Upload.encode(message.s3, writer.uint32(66).fork()).ldelim();\n        }\n        if (message.gcp !== undefined) {\n            exports.GCPUpload.encode(message.gcp, writer.uint32(74).fork()).ldelim();\n        }\n        if (message.azure !== undefined) {\n            exports.AzureBlobUpload.encode(message.azure, writer.uint32(82).fork()).ldelim();\n        }\n        if (message.aliOSS !== undefined) {\n            exports.AliOSSUpload.encode(message.aliOSS, writer.uint32(90).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseImageOutput();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.captureInterval = reader.uint32();\n                    break;\n                case 2:\n                    message.width = reader.int32();\n                    break;\n                case 3:\n                    message.height = reader.int32();\n                    break;\n                case 4:\n                    message.filenamePrefix = reader.string();\n                    break;\n                case 5:\n                    message.filenameSuffix = reader.int32();\n                    break;\n                case 6:\n                    message.imageCodec = reader.int32();\n                    break;\n                case 7:\n                    message.disableManifest = reader.bool();\n                    break;\n                case 8:\n                    message.s3 = exports.S3Upload.decode(reader, reader.uint32());\n                    break;\n                case 9:\n                    message.gcp = exports.GCPUpload.decode(reader, reader.uint32());\n                    break;\n                case 10:\n                    message.azure = exports.AzureBlobUpload.decode(reader, reader.uint32());\n                    break;\n                case 11:\n                    message.aliOSS = exports.AliOSSUpload.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            captureInterval: isSet(object.captureInterval) ? Number(object.captureInterval) : 0,\n            width: isSet(object.width) ? Number(object.width) : 0,\n            height: isSet(object.height) ? Number(object.height) : 0,\n            filenamePrefix: isSet(object.filenamePrefix) ? String(object.filenamePrefix) : \"\",\n            filenameSuffix: isSet(object.filenameSuffix) ? imageFileSuffixFromJSON(object.filenameSuffix) : 0,\n            imageCodec: isSet(object.imageCodec) ? livekit_models_1.imageCodecFromJSON(object.imageCodec) : 0,\n            disableManifest: isSet(object.disableManifest) ? Boolean(object.disableManifest) : false,\n            s3: isSet(object.s3) ? exports.S3Upload.fromJSON(object.s3) : undefined,\n            gcp: isSet(object.gcp) ? exports.GCPUpload.fromJSON(object.gcp) : undefined,\n            azure: isSet(object.azure) ? exports.AzureBlobUpload.fromJSON(object.azure) : undefined,\n            aliOSS: isSet(object.aliOSS) ? exports.AliOSSUpload.fromJSON(object.aliOSS) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.captureInterval !== undefined && (obj.captureInterval = Math.round(message.captureInterval));\n        message.width !== undefined && (obj.width = Math.round(message.width));\n        message.height !== undefined && (obj.height = Math.round(message.height));\n        message.filenamePrefix !== undefined && (obj.filenamePrefix = message.filenamePrefix);\n        message.filenameSuffix !== undefined && (obj.filenameSuffix = imageFileSuffixToJSON(message.filenameSuffix));\n        message.imageCodec !== undefined && (obj.imageCodec = livekit_models_1.imageCodecToJSON(message.imageCodec));\n        message.disableManifest !== undefined && (obj.disableManifest = message.disableManifest);\n        message.s3 !== undefined && (obj.s3 = message.s3 ? exports.S3Upload.toJSON(message.s3) : undefined);\n        message.gcp !== undefined && (obj.gcp = message.gcp ? exports.GCPUpload.toJSON(message.gcp) : undefined);\n        message.azure !== undefined && (obj.azure = message.azure ? exports.AzureBlobUpload.toJSON(message.azure) : undefined);\n        message.aliOSS !== undefined && (obj.aliOSS = message.aliOSS ? exports.AliOSSUpload.toJSON(message.aliOSS) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        const message = createBaseImageOutput();\n        message.captureInterval = (_a = object.captureInterval) !== null && _a !== void 0 ? _a : 0;\n        message.width = (_b = object.width) !== null && _b !== void 0 ? _b : 0;\n        message.height = (_c = object.height) !== null && _c !== void 0 ? _c : 0;\n        message.filenamePrefix = (_d = object.filenamePrefix) !== null && _d !== void 0 ? _d : \"\";\n        message.filenameSuffix = (_e = object.filenameSuffix) !== null && _e !== void 0 ? _e : 0;\n        message.imageCodec = (_f = object.imageCodec) !== null && _f !== void 0 ? _f : 0;\n        message.disableManifest = (_g = object.disableManifest) !== null && _g !== void 0 ? _g : false;\n        message.s3 = (object.s3 !== undefined && object.s3 !== null) ? exports.S3Upload.fromPartial(object.s3) : undefined;\n        message.gcp = (object.gcp !== undefined && object.gcp !== null) ? exports.GCPUpload.fromPartial(object.gcp) : undefined;\n        message.azure = (object.azure !== undefined && object.azure !== null)\n            ? exports.AzureBlobUpload.fromPartial(object.azure)\n            : undefined;\n        message.aliOSS = (object.aliOSS !== undefined && object.aliOSS !== null)\n            ? exports.AliOSSUpload.fromPartial(object.aliOSS)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseS3Upload() {\n    return {\n        accessKey: \"\",\n        secret: \"\",\n        region: \"\",\n        endpoint: \"\",\n        bucket: \"\",\n        forcePathStyle: false,\n        metadata: {},\n        tagging: \"\",\n    };\n}\nexports.S3Upload = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.accessKey !== undefined && message.accessKey !== \"\") {\n            writer.uint32(10).string(message.accessKey);\n        }\n        if (message.secret !== undefined && message.secret !== \"\") {\n            writer.uint32(18).string(message.secret);\n        }\n        if (message.region !== undefined && message.region !== \"\") {\n            writer.uint32(26).string(message.region);\n        }\n        if (message.endpoint !== undefined && message.endpoint !== \"\") {\n            writer.uint32(34).string(message.endpoint);\n        }\n        if (message.bucket !== undefined && message.bucket !== \"\") {\n            writer.uint32(42).string(message.bucket);\n        }\n        if (message.forcePathStyle === true) {\n            writer.uint32(48).bool(message.forcePathStyle);\n        }\n        Object.entries(message.metadata || {}).forEach(([key, value]) => {\n            exports.S3Upload_MetadataEntry.encode({ key: key, value }, writer.uint32(58).fork()).ldelim();\n        });\n        if (message.tagging !== undefined && message.tagging !== \"\") {\n            writer.uint32(66).string(message.tagging);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseS3Upload();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.accessKey = reader.string();\n                    break;\n                case 2:\n                    message.secret = reader.string();\n                    break;\n                case 3:\n                    message.region = reader.string();\n                    break;\n                case 4:\n                    message.endpoint = reader.string();\n                    break;\n                case 5:\n                    message.bucket = reader.string();\n                    break;\n                case 6:\n                    message.forcePathStyle = reader.bool();\n                    break;\n                case 7:\n                    const entry7 = exports.S3Upload_MetadataEntry.decode(reader, reader.uint32());\n                    if (entry7.value !== undefined) {\n                        message.metadata[entry7.key] = entry7.value;\n                    }\n                    break;\n                case 8:\n                    message.tagging = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            accessKey: isSet(object.accessKey) ? String(object.accessKey) : \"\",\n            secret: isSet(object.secret) ? String(object.secret) : \"\",\n            region: isSet(object.region) ? String(object.region) : \"\",\n            endpoint: isSet(object.endpoint) ? String(object.endpoint) : \"\",\n            bucket: isSet(object.bucket) ? String(object.bucket) : \"\",\n            forcePathStyle: isSet(object.forcePathStyle) ? Boolean(object.forcePathStyle) : false,\n            metadata: isObject(object.metadata)\n                ? Object.entries(object.metadata).reduce((acc, [key, value]) => {\n                    acc[key] = String(value);\n                    return acc;\n                }, {})\n                : {},\n            tagging: isSet(object.tagging) ? String(object.tagging) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.accessKey !== undefined && (obj.accessKey = message.accessKey);\n        message.secret !== undefined && (obj.secret = message.secret);\n        message.region !== undefined && (obj.region = message.region);\n        message.endpoint !== undefined && (obj.endpoint = message.endpoint);\n        message.bucket !== undefined && (obj.bucket = message.bucket);\n        message.forcePathStyle !== undefined && (obj.forcePathStyle = message.forcePathStyle);\n        obj.metadata = {};\n        if (message.metadata) {\n            Object.entries(message.metadata).forEach(([k, v]) => {\n                obj.metadata[k] = v;\n            });\n        }\n        message.tagging !== undefined && (obj.tagging = message.tagging);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        const message = createBaseS3Upload();\n        message.accessKey = (_a = object.accessKey) !== null && _a !== void 0 ? _a : \"\";\n        message.secret = (_b = object.secret) !== null && _b !== void 0 ? _b : \"\";\n        message.region = (_c = object.region) !== null && _c !== void 0 ? _c : \"\";\n        message.endpoint = (_d = object.endpoint) !== null && _d !== void 0 ? _d : \"\";\n        message.bucket = (_e = object.bucket) !== null && _e !== void 0 ? _e : \"\";\n        message.forcePathStyle = (_f = object.forcePathStyle) !== null && _f !== void 0 ? _f : false;\n        message.metadata = Object.entries((_g = object.metadata) !== null && _g !== void 0 ? _g : {}).reduce((acc, [key, value]) => {\n            if (value !== undefined) {\n                acc[key] = String(value);\n            }\n            return acc;\n        }, {});\n        message.tagging = (_h = object.tagging) !== null && _h !== void 0 ? _h : \"\";\n        return message;\n    },\n};\nfunction createBaseS3Upload_MetadataEntry() {\n    return { key: \"\", value: \"\" };\n}\nexports.S3Upload_MetadataEntry = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.key !== \"\") {\n            writer.uint32(10).string(message.key);\n        }\n        if (message.value !== \"\") {\n            writer.uint32(18).string(message.value);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseS3Upload_MetadataEntry();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.key = reader.string();\n                    break;\n                case 2:\n                    message.value = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { key: isSet(object.key) ? String(object.key) : \"\", value: isSet(object.value) ? String(object.value) : \"\" };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.key !== undefined && (obj.key = message.key);\n        message.value !== undefined && (obj.value = message.value);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseS3Upload_MetadataEntry();\n        message.key = (_a = object.key) !== null && _a !== void 0 ? _a : \"\";\n        message.value = (_b = object.value) !== null && _b !== void 0 ? _b : \"\";\n        return message;\n    },\n};\nfunction createBaseGCPUpload() {\n    return { credentials: \"\", bucket: \"\" };\n}\nexports.GCPUpload = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.credentials !== undefined && message.credentials !== \"\") {\n            writer.uint32(10).string(message.credentials);\n        }\n        if (message.bucket !== undefined && message.bucket !== \"\") {\n            writer.uint32(18).string(message.bucket);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseGCPUpload();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.credentials = reader.string();\n                    break;\n                case 2:\n                    message.bucket = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            credentials: isSet(object.credentials) ? String(object.credentials) : \"\",\n            bucket: isSet(object.bucket) ? String(object.bucket) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.credentials !== undefined && (obj.credentials = message.credentials);\n        message.bucket !== undefined && (obj.bucket = message.bucket);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseGCPUpload();\n        message.credentials = (_a = object.credentials) !== null && _a !== void 0 ? _a : \"\";\n        message.bucket = (_b = object.bucket) !== null && _b !== void 0 ? _b : \"\";\n        return message;\n    },\n};\nfunction createBaseAzureBlobUpload() {\n    return { accountName: \"\", accountKey: \"\", containerName: \"\" };\n}\nexports.AzureBlobUpload = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.accountName !== undefined && message.accountName !== \"\") {\n            writer.uint32(10).string(message.accountName);\n        }\n        if (message.accountKey !== undefined && message.accountKey !== \"\") {\n            writer.uint32(18).string(message.accountKey);\n        }\n        if (message.containerName !== undefined && message.containerName !== \"\") {\n            writer.uint32(26).string(message.containerName);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseAzureBlobUpload();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.accountName = reader.string();\n                    break;\n                case 2:\n                    message.accountKey = reader.string();\n                    break;\n                case 3:\n                    message.containerName = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            accountName: isSet(object.accountName) ? String(object.accountName) : \"\",\n            accountKey: isSet(object.accountKey) ? String(object.accountKey) : \"\",\n            containerName: isSet(object.containerName) ? String(object.containerName) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.accountName !== undefined && (obj.accountName = message.accountName);\n        message.accountKey !== undefined && (obj.accountKey = message.accountKey);\n        message.containerName !== undefined && (obj.containerName = message.containerName);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseAzureBlobUpload();\n        message.accountName = (_a = object.accountName) !== null && _a !== void 0 ? _a : \"\";\n        message.accountKey = (_b = object.accountKey) !== null && _b !== void 0 ? _b : \"\";\n        message.containerName = (_c = object.containerName) !== null && _c !== void 0 ? _c : \"\";\n        return message;\n    },\n};\nfunction createBaseAliOSSUpload() {\n    return { accessKey: \"\", secret: \"\", region: \"\", endpoint: \"\", bucket: \"\" };\n}\nexports.AliOSSUpload = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.accessKey !== undefined && message.accessKey !== \"\") {\n            writer.uint32(10).string(message.accessKey);\n        }\n        if (message.secret !== undefined && message.secret !== \"\") {\n            writer.uint32(18).string(message.secret);\n        }\n        if (message.region !== undefined && message.region !== \"\") {\n            writer.uint32(26).string(message.region);\n        }\n        if (message.endpoint !== undefined && message.endpoint !== \"\") {\n            writer.uint32(34).string(message.endpoint);\n        }\n        if (message.bucket !== undefined && message.bucket !== \"\") {\n            writer.uint32(42).string(message.bucket);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseAliOSSUpload();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.accessKey = reader.string();\n                    break;\n                case 2:\n                    message.secret = reader.string();\n                    break;\n                case 3:\n                    message.region = reader.string();\n                    break;\n                case 4:\n                    message.endpoint = reader.string();\n                    break;\n                case 5:\n                    message.bucket = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            accessKey: isSet(object.accessKey) ? String(object.accessKey) : \"\",\n            secret: isSet(object.secret) ? String(object.secret) : \"\",\n            region: isSet(object.region) ? String(object.region) : \"\",\n            endpoint: isSet(object.endpoint) ? String(object.endpoint) : \"\",\n            bucket: isSet(object.bucket) ? String(object.bucket) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.accessKey !== undefined && (obj.accessKey = message.accessKey);\n        message.secret !== undefined && (obj.secret = message.secret);\n        message.region !== undefined && (obj.region = message.region);\n        message.endpoint !== undefined && (obj.endpoint = message.endpoint);\n        message.bucket !== undefined && (obj.bucket = message.bucket);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e;\n        const message = createBaseAliOSSUpload();\n        message.accessKey = (_a = object.accessKey) !== null && _a !== void 0 ? _a : \"\";\n        message.secret = (_b = object.secret) !== null && _b !== void 0 ? _b : \"\";\n        message.region = (_c = object.region) !== null && _c !== void 0 ? _c : \"\";\n        message.endpoint = (_d = object.endpoint) !== null && _d !== void 0 ? _d : \"\";\n        message.bucket = (_e = object.bucket) !== null && _e !== void 0 ? _e : \"\";\n        return message;\n    },\n};\nfunction createBaseStreamOutput() {\n    return { protocol: 0, urls: [] };\n}\nexports.StreamOutput = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.protocol !== undefined && message.protocol !== 0) {\n            writer.uint32(8).int32(message.protocol);\n        }\n        if (message.urls !== undefined && message.urls.length !== 0) {\n            for (const v of message.urls) {\n                writer.uint32(18).string(v);\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseStreamOutput();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.protocol = reader.int32();\n                    break;\n                case 2:\n                    message.urls.push(reader.string());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            protocol: isSet(object.protocol) ? streamProtocolFromJSON(object.protocol) : 0,\n            urls: Array.isArray(object === null || object === void 0 ? void 0 : object.urls) ? object.urls.map((e) => String(e)) : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.protocol !== undefined && (obj.protocol = streamProtocolToJSON(message.protocol));\n        if (message.urls) {\n            obj.urls = message.urls.map((e) => e);\n        }\n        else {\n            obj.urls = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseStreamOutput();\n        message.protocol = (_a = object.protocol) !== null && _a !== void 0 ? _a : 0;\n        message.urls = ((_b = object.urls) === null || _b === void 0 ? void 0 : _b.map((e) => e)) || [];\n        return message;\n    },\n};\nfunction createBaseEncodingOptions() {\n    return {\n        width: 0,\n        height: 0,\n        depth: 0,\n        framerate: 0,\n        audioCodec: 0,\n        audioBitrate: 0,\n        audioFrequency: 0,\n        videoCodec: 0,\n        videoBitrate: 0,\n        keyFrameInterval: 0,\n    };\n}\nexports.EncodingOptions = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.width !== undefined && message.width !== 0) {\n            writer.uint32(8).int32(message.width);\n        }\n        if (message.height !== undefined && message.height !== 0) {\n            writer.uint32(16).int32(message.height);\n        }\n        if (message.depth !== undefined && message.depth !== 0) {\n            writer.uint32(24).int32(message.depth);\n        }\n        if (message.framerate !== undefined && message.framerate !== 0) {\n            writer.uint32(32).int32(message.framerate);\n        }\n        if (message.audioCodec !== undefined && message.audioCodec !== 0) {\n            writer.uint32(40).int32(message.audioCodec);\n        }\n        if (message.audioBitrate !== undefined && message.audioBitrate !== 0) {\n            writer.uint32(48).int32(message.audioBitrate);\n        }\n        if (message.audioFrequency !== undefined && message.audioFrequency !== 0) {\n            writer.uint32(56).int32(message.audioFrequency);\n        }\n        if (message.videoCodec !== undefined && message.videoCodec !== 0) {\n            writer.uint32(64).int32(message.videoCodec);\n        }\n        if (message.videoBitrate !== undefined && message.videoBitrate !== 0) {\n            writer.uint32(72).int32(message.videoBitrate);\n        }\n        if (message.keyFrameInterval !== undefined && message.keyFrameInterval !== 0) {\n            writer.uint32(81).double(message.keyFrameInterval);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseEncodingOptions();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.width = reader.int32();\n                    break;\n                case 2:\n                    message.height = reader.int32();\n                    break;\n                case 3:\n                    message.depth = reader.int32();\n                    break;\n                case 4:\n                    message.framerate = reader.int32();\n                    break;\n                case 5:\n                    message.audioCodec = reader.int32();\n                    break;\n                case 6:\n                    message.audioBitrate = reader.int32();\n                    break;\n                case 7:\n                    message.audioFrequency = reader.int32();\n                    break;\n                case 8:\n                    message.videoCodec = reader.int32();\n                    break;\n                case 9:\n                    message.videoBitrate = reader.int32();\n                    break;\n                case 10:\n                    message.keyFrameInterval = reader.double();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            width: isSet(object.width) ? Number(object.width) : 0,\n            height: isSet(object.height) ? Number(object.height) : 0,\n            depth: isSet(object.depth) ? Number(object.depth) : 0,\n            framerate: isSet(object.framerate) ? Number(object.framerate) : 0,\n            audioCodec: isSet(object.audioCodec) ? livekit_models_1.audioCodecFromJSON(object.audioCodec) : 0,\n            audioBitrate: isSet(object.audioBitrate) ? Number(object.audioBitrate) : 0,\n            audioFrequency: isSet(object.audioFrequency) ? Number(object.audioFrequency) : 0,\n            videoCodec: isSet(object.videoCodec) ? livekit_models_1.videoCodecFromJSON(object.videoCodec) : 0,\n            videoBitrate: isSet(object.videoBitrate) ? Number(object.videoBitrate) : 0,\n            keyFrameInterval: isSet(object.keyFrameInterval) ? Number(object.keyFrameInterval) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.width !== undefined && (obj.width = Math.round(message.width));\n        message.height !== undefined && (obj.height = Math.round(message.height));\n        message.depth !== undefined && (obj.depth = Math.round(message.depth));\n        message.framerate !== undefined && (obj.framerate = Math.round(message.framerate));\n        message.audioCodec !== undefined && (obj.audioCodec = livekit_models_1.audioCodecToJSON(message.audioCodec));\n        message.audioBitrate !== undefined && (obj.audioBitrate = Math.round(message.audioBitrate));\n        message.audioFrequency !== undefined && (obj.audioFrequency = Math.round(message.audioFrequency));\n        message.videoCodec !== undefined && (obj.videoCodec = livekit_models_1.videoCodecToJSON(message.videoCodec));\n        message.videoBitrate !== undefined && (obj.videoBitrate = Math.round(message.videoBitrate));\n        message.keyFrameInterval !== undefined && (obj.keyFrameInterval = message.keyFrameInterval);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        const message = createBaseEncodingOptions();\n        message.width = (_a = object.width) !== null && _a !== void 0 ? _a : 0;\n        message.height = (_b = object.height) !== null && _b !== void 0 ? _b : 0;\n        message.depth = (_c = object.depth) !== null && _c !== void 0 ? _c : 0;\n        message.framerate = (_d = object.framerate) !== null && _d !== void 0 ? _d : 0;\n        message.audioCodec = (_e = object.audioCodec) !== null && _e !== void 0 ? _e : 0;\n        message.audioBitrate = (_f = object.audioBitrate) !== null && _f !== void 0 ? _f : 0;\n        message.audioFrequency = (_g = object.audioFrequency) !== null && _g !== void 0 ? _g : 0;\n        message.videoCodec = (_h = object.videoCodec) !== null && _h !== void 0 ? _h : 0;\n        message.videoBitrate = (_j = object.videoBitrate) !== null && _j !== void 0 ? _j : 0;\n        message.keyFrameInterval = (_k = object.keyFrameInterval) !== null && _k !== void 0 ? _k : 0;\n        return message;\n    },\n};\nfunction createBaseUpdateLayoutRequest() {\n    return { egressId: \"\", layout: \"\" };\n}\nexports.UpdateLayoutRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.egressId !== undefined && message.egressId !== \"\") {\n            writer.uint32(10).string(message.egressId);\n        }\n        if (message.layout !== undefined && message.layout !== \"\") {\n            writer.uint32(18).string(message.layout);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseUpdateLayoutRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.egressId = reader.string();\n                    break;\n                case 2:\n                    message.layout = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            egressId: isSet(object.egressId) ? String(object.egressId) : \"\",\n            layout: isSet(object.layout) ? String(object.layout) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.egressId !== undefined && (obj.egressId = message.egressId);\n        message.layout !== undefined && (obj.layout = message.layout);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseUpdateLayoutRequest();\n        message.egressId = (_a = object.egressId) !== null && _a !== void 0 ? _a : \"\";\n        message.layout = (_b = object.layout) !== null && _b !== void 0 ? _b : \"\";\n        return message;\n    },\n};\nfunction createBaseUpdateStreamRequest() {\n    return { egressId: \"\", addOutputUrls: [], removeOutputUrls: [] };\n}\nexports.UpdateStreamRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.egressId !== undefined && message.egressId !== \"\") {\n            writer.uint32(10).string(message.egressId);\n        }\n        if (message.addOutputUrls !== undefined && message.addOutputUrls.length !== 0) {\n            for (const v of message.addOutputUrls) {\n                writer.uint32(18).string(v);\n            }\n        }\n        if (message.removeOutputUrls !== undefined && message.removeOutputUrls.length !== 0) {\n            for (const v of message.removeOutputUrls) {\n                writer.uint32(26).string(v);\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseUpdateStreamRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.egressId = reader.string();\n                    break;\n                case 2:\n                    message.addOutputUrls.push(reader.string());\n                    break;\n                case 3:\n                    message.removeOutputUrls.push(reader.string());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            egressId: isSet(object.egressId) ? String(object.egressId) : \"\",\n            addOutputUrls: Array.isArray(object === null || object === void 0 ? void 0 : object.addOutputUrls) ? object.addOutputUrls.map((e) => String(e)) : [],\n            removeOutputUrls: Array.isArray(object === null || object === void 0 ? void 0 : object.removeOutputUrls)\n                ? object.removeOutputUrls.map((e) => String(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.egressId !== undefined && (obj.egressId = message.egressId);\n        if (message.addOutputUrls) {\n            obj.addOutputUrls = message.addOutputUrls.map((e) => e);\n        }\n        else {\n            obj.addOutputUrls = [];\n        }\n        if (message.removeOutputUrls) {\n            obj.removeOutputUrls = message.removeOutputUrls.map((e) => e);\n        }\n        else {\n            obj.removeOutputUrls = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseUpdateStreamRequest();\n        message.egressId = (_a = object.egressId) !== null && _a !== void 0 ? _a : \"\";\n        message.addOutputUrls = ((_b = object.addOutputUrls) === null || _b === void 0 ? void 0 : _b.map((e) => e)) || [];\n        message.removeOutputUrls = ((_c = object.removeOutputUrls) === null || _c === void 0 ? void 0 : _c.map((e) => e)) || [];\n        return message;\n    },\n};\nfunction createBaseUpdateOutputsRequest() {\n    return { egressId: \"\", addImageOutputs: [], removeImageOutputs: [] };\n}\nexports.UpdateOutputsRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.egressId !== undefined && message.egressId !== \"\") {\n            writer.uint32(10).string(message.egressId);\n        }\n        if (message.addImageOutputs !== undefined && message.addImageOutputs.length !== 0) {\n            for (const v of message.addImageOutputs) {\n                exports.ImageOutput.encode(v, writer.uint32(18).fork()).ldelim();\n            }\n        }\n        if (message.removeImageOutputs !== undefined && message.removeImageOutputs.length !== 0) {\n            for (const v of message.removeImageOutputs) {\n                exports.ImageOutput.encode(v, writer.uint32(26).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseUpdateOutputsRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.egressId = reader.string();\n                    break;\n                case 2:\n                    message.addImageOutputs.push(exports.ImageOutput.decode(reader, reader.uint32()));\n                    break;\n                case 3:\n                    message.removeImageOutputs.push(exports.ImageOutput.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            egressId: isSet(object.egressId) ? String(object.egressId) : \"\",\n            addImageOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.addImageOutputs)\n                ? object.addImageOutputs.map((e) => exports.ImageOutput.fromJSON(e))\n                : [],\n            removeImageOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.removeImageOutputs)\n                ? object.removeImageOutputs.map((e) => exports.ImageOutput.fromJSON(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.egressId !== undefined && (obj.egressId = message.egressId);\n        if (message.addImageOutputs) {\n            obj.addImageOutputs = message.addImageOutputs.map((e) => e ? exports.ImageOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.addImageOutputs = [];\n        }\n        if (message.removeImageOutputs) {\n            obj.removeImageOutputs = message.removeImageOutputs.map((e) => e ? exports.ImageOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.removeImageOutputs = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseUpdateOutputsRequest();\n        message.egressId = (_a = object.egressId) !== null && _a !== void 0 ? _a : \"\";\n        message.addImageOutputs = ((_b = object.addImageOutputs) === null || _b === void 0 ? void 0 : _b.map((e) => exports.ImageOutput.fromPartial(e))) || [];\n        message.removeImageOutputs = ((_c = object.removeImageOutputs) === null || _c === void 0 ? void 0 : _c.map((e) => exports.ImageOutput.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseListEgressRequest() {\n    return { roomName: \"\", egressId: \"\", active: false };\n}\nexports.ListEgressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(10).string(message.roomName);\n        }\n        if (message.egressId !== undefined && message.egressId !== \"\") {\n            writer.uint32(18).string(message.egressId);\n        }\n        if (message.active === true) {\n            writer.uint32(24).bool(message.active);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseListEgressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.roomName = reader.string();\n                    break;\n                case 2:\n                    message.egressId = reader.string();\n                    break;\n                case 3:\n                    message.active = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            egressId: isSet(object.egressId) ? String(object.egressId) : \"\",\n            active: isSet(object.active) ? Boolean(object.active) : false,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.egressId !== undefined && (obj.egressId = message.egressId);\n        message.active !== undefined && (obj.active = message.active);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseListEgressRequest();\n        message.roomName = (_a = object.roomName) !== null && _a !== void 0 ? _a : \"\";\n        message.egressId = (_b = object.egressId) !== null && _b !== void 0 ? _b : \"\";\n        message.active = (_c = object.active) !== null && _c !== void 0 ? _c : false;\n        return message;\n    },\n};\nfunction createBaseListEgressResponse() {\n    return { items: [] };\n}\nexports.ListEgressResponse = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.items !== undefined && message.items.length !== 0) {\n            for (const v of message.items) {\n                exports.EgressInfo.encode(v, writer.uint32(10).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseListEgressResponse();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.items.push(exports.EgressInfo.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { items: Array.isArray(object === null || object === void 0 ? void 0 : object.items) ? object.items.map((e) => exports.EgressInfo.fromJSON(e)) : [] };\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.items) {\n            obj.items = message.items.map((e) => e ? exports.EgressInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.items = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseListEgressResponse();\n        message.items = ((_a = object.items) === null || _a === void 0 ? void 0 : _a.map((e) => exports.EgressInfo.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseStopEgressRequest() {\n    return { egressId: \"\" };\n}\nexports.StopEgressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.egressId !== undefined && message.egressId !== \"\") {\n            writer.uint32(10).string(message.egressId);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseStopEgressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.egressId = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { egressId: isSet(object.egressId) ? String(object.egressId) : \"\" };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.egressId !== undefined && (obj.egressId = message.egressId);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseStopEgressRequest();\n        message.egressId = (_a = object.egressId) !== null && _a !== void 0 ? _a : \"\";\n        return message;\n    },\n};\nfunction createBaseEgressInfo() {\n    return {\n        egressId: \"\",\n        roomId: \"\",\n        roomName: \"\",\n        status: 0,\n        startedAt: 0,\n        endedAt: 0,\n        updatedAt: 0,\n        error: \"\",\n        roomComposite: undefined,\n        web: undefined,\n        participant: undefined,\n        trackComposite: undefined,\n        track: undefined,\n        stream: undefined,\n        file: undefined,\n        segments: undefined,\n        streamResults: [],\n        fileResults: [],\n        segmentResults: [],\n        imageResults: [],\n    };\n}\nexports.EgressInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.egressId !== undefined && message.egressId !== \"\") {\n            writer.uint32(10).string(message.egressId);\n        }\n        if (message.roomId !== undefined && message.roomId !== \"\") {\n            writer.uint32(18).string(message.roomId);\n        }\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(106).string(message.roomName);\n        }\n        if (message.status !== undefined && message.status !== 0) {\n            writer.uint32(24).int32(message.status);\n        }\n        if (message.startedAt !== undefined && message.startedAt !== 0) {\n            writer.uint32(80).int64(message.startedAt);\n        }\n        if (message.endedAt !== undefined && message.endedAt !== 0) {\n            writer.uint32(88).int64(message.endedAt);\n        }\n        if (message.updatedAt !== undefined && message.updatedAt !== 0) {\n            writer.uint32(144).int64(message.updatedAt);\n        }\n        if (message.error !== undefined && message.error !== \"\") {\n            writer.uint32(74).string(message.error);\n        }\n        if (message.roomComposite !== undefined) {\n            exports.RoomCompositeEgressRequest.encode(message.roomComposite, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.web !== undefined) {\n            exports.WebEgressRequest.encode(message.web, writer.uint32(114).fork()).ldelim();\n        }\n        if (message.participant !== undefined) {\n            exports.ParticipantEgressRequest.encode(message.participant, writer.uint32(154).fork()).ldelim();\n        }\n        if (message.trackComposite !== undefined) {\n            exports.TrackCompositeEgressRequest.encode(message.trackComposite, writer.uint32(42).fork()).ldelim();\n        }\n        if (message.track !== undefined) {\n            exports.TrackEgressRequest.encode(message.track, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.stream !== undefined) {\n            exports.StreamInfoList.encode(message.stream, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.file !== undefined) {\n            exports.FileInfo.encode(message.file, writer.uint32(66).fork()).ldelim();\n        }\n        if (message.segments !== undefined) {\n            exports.SegmentsInfo.encode(message.segments, writer.uint32(98).fork()).ldelim();\n        }\n        if (message.streamResults !== undefined && message.streamResults.length !== 0) {\n            for (const v of message.streamResults) {\n                exports.StreamInfo.encode(v, writer.uint32(122).fork()).ldelim();\n            }\n        }\n        if (message.fileResults !== undefined && message.fileResults.length !== 0) {\n            for (const v of message.fileResults) {\n                exports.FileInfo.encode(v, writer.uint32(130).fork()).ldelim();\n            }\n        }\n        if (message.segmentResults !== undefined && message.segmentResults.length !== 0) {\n            for (const v of message.segmentResults) {\n                exports.SegmentsInfo.encode(v, writer.uint32(138).fork()).ldelim();\n            }\n        }\n        if (message.imageResults !== undefined && message.imageResults.length !== 0) {\n            for (const v of message.imageResults) {\n                exports.ImagesInfo.encode(v, writer.uint32(162).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseEgressInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.egressId = reader.string();\n                    break;\n                case 2:\n                    message.roomId = reader.string();\n                    break;\n                case 13:\n                    message.roomName = reader.string();\n                    break;\n                case 3:\n                    message.status = reader.int32();\n                    break;\n                case 10:\n                    message.startedAt = longToNumber(reader.int64());\n                    break;\n                case 11:\n                    message.endedAt = longToNumber(reader.int64());\n                    break;\n                case 18:\n                    message.updatedAt = longToNumber(reader.int64());\n                    break;\n                case 9:\n                    message.error = reader.string();\n                    break;\n                case 4:\n                    message.roomComposite = exports.RoomCompositeEgressRequest.decode(reader, reader.uint32());\n                    break;\n                case 14:\n                    message.web = exports.WebEgressRequest.decode(reader, reader.uint32());\n                    break;\n                case 19:\n                    message.participant = exports.ParticipantEgressRequest.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.trackComposite = exports.TrackCompositeEgressRequest.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.track = exports.TrackEgressRequest.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.stream = exports.StreamInfoList.decode(reader, reader.uint32());\n                    break;\n                case 8:\n                    message.file = exports.FileInfo.decode(reader, reader.uint32());\n                    break;\n                case 12:\n                    message.segments = exports.SegmentsInfo.decode(reader, reader.uint32());\n                    break;\n                case 15:\n                    message.streamResults.push(exports.StreamInfo.decode(reader, reader.uint32()));\n                    break;\n                case 16:\n                    message.fileResults.push(exports.FileInfo.decode(reader, reader.uint32()));\n                    break;\n                case 17:\n                    message.segmentResults.push(exports.SegmentsInfo.decode(reader, reader.uint32()));\n                    break;\n                case 20:\n                    message.imageResults.push(exports.ImagesInfo.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            egressId: isSet(object.egressId) ? String(object.egressId) : \"\",\n            roomId: isSet(object.roomId) ? String(object.roomId) : \"\",\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            status: isSet(object.status) ? egressStatusFromJSON(object.status) : 0,\n            startedAt: isSet(object.startedAt) ? Number(object.startedAt) : 0,\n            endedAt: isSet(object.endedAt) ? Number(object.endedAt) : 0,\n            updatedAt: isSet(object.updatedAt) ? Number(object.updatedAt) : 0,\n            error: isSet(object.error) ? String(object.error) : \"\",\n            roomComposite: isSet(object.roomComposite)\n                ? exports.RoomCompositeEgressRequest.fromJSON(object.roomComposite)\n                : undefined,\n            web: isSet(object.web) ? exports.WebEgressRequest.fromJSON(object.web) : undefined,\n            participant: isSet(object.participant) ? exports.ParticipantEgressRequest.fromJSON(object.participant) : undefined,\n            trackComposite: isSet(object.trackComposite)\n                ? exports.TrackCompositeEgressRequest.fromJSON(object.trackComposite)\n                : undefined,\n            track: isSet(object.track) ? exports.TrackEgressRequest.fromJSON(object.track) : undefined,\n            stream: isSet(object.stream) ? exports.StreamInfoList.fromJSON(object.stream) : undefined,\n            file: isSet(object.file) ? exports.FileInfo.fromJSON(object.file) : undefined,\n            segments: isSet(object.segments) ? exports.SegmentsInfo.fromJSON(object.segments) : undefined,\n            streamResults: Array.isArray(object === null || object === void 0 ? void 0 : object.streamResults)\n                ? object.streamResults.map((e) => exports.StreamInfo.fromJSON(e))\n                : [],\n            fileResults: Array.isArray(object === null || object === void 0 ? void 0 : object.fileResults) ? object.fileResults.map((e) => exports.FileInfo.fromJSON(e)) : [],\n            segmentResults: Array.isArray(object === null || object === void 0 ? void 0 : object.segmentResults)\n                ? object.segmentResults.map((e) => exports.SegmentsInfo.fromJSON(e))\n                : [],\n            imageResults: Array.isArray(object === null || object === void 0 ? void 0 : object.imageResults)\n                ? object.imageResults.map((e) => exports.ImagesInfo.fromJSON(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.egressId !== undefined && (obj.egressId = message.egressId);\n        message.roomId !== undefined && (obj.roomId = message.roomId);\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.status !== undefined && (obj.status = egressStatusToJSON(message.status));\n        message.startedAt !== undefined && (obj.startedAt = Math.round(message.startedAt));\n        message.endedAt !== undefined && (obj.endedAt = Math.round(message.endedAt));\n        message.updatedAt !== undefined && (obj.updatedAt = Math.round(message.updatedAt));\n        message.error !== undefined && (obj.error = message.error);\n        message.roomComposite !== undefined &&\n            (obj.roomComposite = message.roomComposite\n                ? exports.RoomCompositeEgressRequest.toJSON(message.roomComposite)\n                : undefined);\n        message.web !== undefined && (obj.web = message.web ? exports.WebEgressRequest.toJSON(message.web) : undefined);\n        message.participant !== undefined &&\n            (obj.participant = message.participant ? exports.ParticipantEgressRequest.toJSON(message.participant) : undefined);\n        message.trackComposite !== undefined && (obj.trackComposite = message.trackComposite\n            ? exports.TrackCompositeEgressRequest.toJSON(message.trackComposite)\n            : undefined);\n        message.track !== undefined && (obj.track = message.track ? exports.TrackEgressRequest.toJSON(message.track) : undefined);\n        message.stream !== undefined && (obj.stream = message.stream ? exports.StreamInfoList.toJSON(message.stream) : undefined);\n        message.file !== undefined && (obj.file = message.file ? exports.FileInfo.toJSON(message.file) : undefined);\n        message.segments !== undefined &&\n            (obj.segments = message.segments ? exports.SegmentsInfo.toJSON(message.segments) : undefined);\n        if (message.streamResults) {\n            obj.streamResults = message.streamResults.map((e) => e ? exports.StreamInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.streamResults = [];\n        }\n        if (message.fileResults) {\n            obj.fileResults = message.fileResults.map((e) => e ? exports.FileInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.fileResults = [];\n        }\n        if (message.segmentResults) {\n            obj.segmentResults = message.segmentResults.map((e) => e ? exports.SegmentsInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.segmentResults = [];\n        }\n        if (message.imageResults) {\n            obj.imageResults = message.imageResults.map((e) => e ? exports.ImagesInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.imageResults = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;\n        const message = createBaseEgressInfo();\n        message.egressId = (_a = object.egressId) !== null && _a !== void 0 ? _a : \"\";\n        message.roomId = (_b = object.roomId) !== null && _b !== void 0 ? _b : \"\";\n        message.roomName = (_c = object.roomName) !== null && _c !== void 0 ? _c : \"\";\n        message.status = (_d = object.status) !== null && _d !== void 0 ? _d : 0;\n        message.startedAt = (_e = object.startedAt) !== null && _e !== void 0 ? _e : 0;\n        message.endedAt = (_f = object.endedAt) !== null && _f !== void 0 ? _f : 0;\n        message.updatedAt = (_g = object.updatedAt) !== null && _g !== void 0 ? _g : 0;\n        message.error = (_h = object.error) !== null && _h !== void 0 ? _h : \"\";\n        message.roomComposite = (object.roomComposite !== undefined && object.roomComposite !== null)\n            ? exports.RoomCompositeEgressRequest.fromPartial(object.roomComposite)\n            : undefined;\n        message.web = (object.web !== undefined && object.web !== null)\n            ? exports.WebEgressRequest.fromPartial(object.web)\n            : undefined;\n        message.participant = (object.participant !== undefined && object.participant !== null)\n            ? exports.ParticipantEgressRequest.fromPartial(object.participant)\n            : undefined;\n        message.trackComposite = (object.trackComposite !== undefined && object.trackComposite !== null)\n            ? exports.TrackCompositeEgressRequest.fromPartial(object.trackComposite)\n            : undefined;\n        message.track = (object.track !== undefined && object.track !== null)\n            ? exports.TrackEgressRequest.fromPartial(object.track)\n            : undefined;\n        message.stream = (object.stream !== undefined && object.stream !== null)\n            ? exports.StreamInfoList.fromPartial(object.stream)\n            : undefined;\n        message.file = (object.file !== undefined && object.file !== null) ? exports.FileInfo.fromPartial(object.file) : undefined;\n        message.segments = (object.segments !== undefined && object.segments !== null)\n            ? exports.SegmentsInfo.fromPartial(object.segments)\n            : undefined;\n        message.streamResults = ((_j = object.streamResults) === null || _j === void 0 ? void 0 : _j.map((e) => exports.StreamInfo.fromPartial(e))) || [];\n        message.fileResults = ((_k = object.fileResults) === null || _k === void 0 ? void 0 : _k.map((e) => exports.FileInfo.fromPartial(e))) || [];\n        message.segmentResults = ((_l = object.segmentResults) === null || _l === void 0 ? void 0 : _l.map((e) => exports.SegmentsInfo.fromPartial(e))) || [];\n        message.imageResults = ((_m = object.imageResults) === null || _m === void 0 ? void 0 : _m.map((e) => exports.ImagesInfo.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseStreamInfoList() {\n    return { info: [] };\n}\nexports.StreamInfoList = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.info !== undefined && message.info.length !== 0) {\n            for (const v of message.info) {\n                exports.StreamInfo.encode(v, writer.uint32(10).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseStreamInfoList();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.info.push(exports.StreamInfo.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { info: Array.isArray(object === null || object === void 0 ? void 0 : object.info) ? object.info.map((e) => exports.StreamInfo.fromJSON(e)) : [] };\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.info) {\n            obj.info = message.info.map((e) => e ? exports.StreamInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.info = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseStreamInfoList();\n        message.info = ((_a = object.info) === null || _a === void 0 ? void 0 : _a.map((e) => exports.StreamInfo.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseStreamInfo() {\n    return { url: \"\", startedAt: 0, endedAt: 0, duration: 0, status: 0, error: \"\" };\n}\nexports.StreamInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.url !== undefined && message.url !== \"\") {\n            writer.uint32(10).string(message.url);\n        }\n        if (message.startedAt !== undefined && message.startedAt !== 0) {\n            writer.uint32(16).int64(message.startedAt);\n        }\n        if (message.endedAt !== undefined && message.endedAt !== 0) {\n            writer.uint32(24).int64(message.endedAt);\n        }\n        if (message.duration !== undefined && message.duration !== 0) {\n            writer.uint32(32).int64(message.duration);\n        }\n        if (message.status !== undefined && message.status !== 0) {\n            writer.uint32(40).int32(message.status);\n        }\n        if (message.error !== undefined && message.error !== \"\") {\n            writer.uint32(50).string(message.error);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseStreamInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.url = reader.string();\n                    break;\n                case 2:\n                    message.startedAt = longToNumber(reader.int64());\n                    break;\n                case 3:\n                    message.endedAt = longToNumber(reader.int64());\n                    break;\n                case 4:\n                    message.duration = longToNumber(reader.int64());\n                    break;\n                case 5:\n                    message.status = reader.int32();\n                    break;\n                case 6:\n                    message.error = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            url: isSet(object.url) ? String(object.url) : \"\",\n            startedAt: isSet(object.startedAt) ? Number(object.startedAt) : 0,\n            endedAt: isSet(object.endedAt) ? Number(object.endedAt) : 0,\n            duration: isSet(object.duration) ? Number(object.duration) : 0,\n            status: isSet(object.status) ? streamInfo_StatusFromJSON(object.status) : 0,\n            error: isSet(object.error) ? String(object.error) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.url !== undefined && (obj.url = message.url);\n        message.startedAt !== undefined && (obj.startedAt = Math.round(message.startedAt));\n        message.endedAt !== undefined && (obj.endedAt = Math.round(message.endedAt));\n        message.duration !== undefined && (obj.duration = Math.round(message.duration));\n        message.status !== undefined && (obj.status = streamInfo_StatusToJSON(message.status));\n        message.error !== undefined && (obj.error = message.error);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f;\n        const message = createBaseStreamInfo();\n        message.url = (_a = object.url) !== null && _a !== void 0 ? _a : \"\";\n        message.startedAt = (_b = object.startedAt) !== null && _b !== void 0 ? _b : 0;\n        message.endedAt = (_c = object.endedAt) !== null && _c !== void 0 ? _c : 0;\n        message.duration = (_d = object.duration) !== null && _d !== void 0 ? _d : 0;\n        message.status = (_e = object.status) !== null && _e !== void 0 ? _e : 0;\n        message.error = (_f = object.error) !== null && _f !== void 0 ? _f : \"\";\n        return message;\n    },\n};\nfunction createBaseFileInfo() {\n    return { filename: \"\", startedAt: 0, endedAt: 0, duration: 0, size: 0, location: \"\" };\n}\nexports.FileInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.filename !== undefined && message.filename !== \"\") {\n            writer.uint32(10).string(message.filename);\n        }\n        if (message.startedAt !== undefined && message.startedAt !== 0) {\n            writer.uint32(16).int64(message.startedAt);\n        }\n        if (message.endedAt !== undefined && message.endedAt !== 0) {\n            writer.uint32(24).int64(message.endedAt);\n        }\n        if (message.duration !== undefined && message.duration !== 0) {\n            writer.uint32(48).int64(message.duration);\n        }\n        if (message.size !== undefined && message.size !== 0) {\n            writer.uint32(32).int64(message.size);\n        }\n        if (message.location !== undefined && message.location !== \"\") {\n            writer.uint32(42).string(message.location);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseFileInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.filename = reader.string();\n                    break;\n                case 2:\n                    message.startedAt = longToNumber(reader.int64());\n                    break;\n                case 3:\n                    message.endedAt = longToNumber(reader.int64());\n                    break;\n                case 6:\n                    message.duration = longToNumber(reader.int64());\n                    break;\n                case 4:\n                    message.size = longToNumber(reader.int64());\n                    break;\n                case 5:\n                    message.location = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            filename: isSet(object.filename) ? String(object.filename) : \"\",\n            startedAt: isSet(object.startedAt) ? Number(object.startedAt) : 0,\n            endedAt: isSet(object.endedAt) ? Number(object.endedAt) : 0,\n            duration: isSet(object.duration) ? Number(object.duration) : 0,\n            size: isSet(object.size) ? Number(object.size) : 0,\n            location: isSet(object.location) ? String(object.location) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.filename !== undefined && (obj.filename = message.filename);\n        message.startedAt !== undefined && (obj.startedAt = Math.round(message.startedAt));\n        message.endedAt !== undefined && (obj.endedAt = Math.round(message.endedAt));\n        message.duration !== undefined && (obj.duration = Math.round(message.duration));\n        message.size !== undefined && (obj.size = Math.round(message.size));\n        message.location !== undefined && (obj.location = message.location);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f;\n        const message = createBaseFileInfo();\n        message.filename = (_a = object.filename) !== null && _a !== void 0 ? _a : \"\";\n        message.startedAt = (_b = object.startedAt) !== null && _b !== void 0 ? _b : 0;\n        message.endedAt = (_c = object.endedAt) !== null && _c !== void 0 ? _c : 0;\n        message.duration = (_d = object.duration) !== null && _d !== void 0 ? _d : 0;\n        message.size = (_e = object.size) !== null && _e !== void 0 ? _e : 0;\n        message.location = (_f = object.location) !== null && _f !== void 0 ? _f : \"\";\n        return message;\n    },\n};\nfunction createBaseSegmentsInfo() {\n    return {\n        playlistName: \"\",\n        livePlaylistName: \"\",\n        duration: 0,\n        size: 0,\n        playlistLocation: \"\",\n        livePlaylistLocation: \"\",\n        segmentCount: 0,\n        startedAt: 0,\n        endedAt: 0,\n    };\n}\nexports.SegmentsInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.playlistName !== undefined && message.playlistName !== \"\") {\n            writer.uint32(10).string(message.playlistName);\n        }\n        if (message.livePlaylistName !== undefined && message.livePlaylistName !== \"\") {\n            writer.uint32(66).string(message.livePlaylistName);\n        }\n        if (message.duration !== undefined && message.duration !== 0) {\n            writer.uint32(16).int64(message.duration);\n        }\n        if (message.size !== undefined && message.size !== 0) {\n            writer.uint32(24).int64(message.size);\n        }\n        if (message.playlistLocation !== undefined && message.playlistLocation !== \"\") {\n            writer.uint32(34).string(message.playlistLocation);\n        }\n        if (message.livePlaylistLocation !== undefined && message.livePlaylistLocation !== \"\") {\n            writer.uint32(74).string(message.livePlaylistLocation);\n        }\n        if (message.segmentCount !== undefined && message.segmentCount !== 0) {\n            writer.uint32(40).int64(message.segmentCount);\n        }\n        if (message.startedAt !== undefined && message.startedAt !== 0) {\n            writer.uint32(48).int64(message.startedAt);\n        }\n        if (message.endedAt !== undefined && message.endedAt !== 0) {\n            writer.uint32(56).int64(message.endedAt);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseSegmentsInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.playlistName = reader.string();\n                    break;\n                case 8:\n                    message.livePlaylistName = reader.string();\n                    break;\n                case 2:\n                    message.duration = longToNumber(reader.int64());\n                    break;\n                case 3:\n                    message.size = longToNumber(reader.int64());\n                    break;\n                case 4:\n                    message.playlistLocation = reader.string();\n                    break;\n                case 9:\n                    message.livePlaylistLocation = reader.string();\n                    break;\n                case 5:\n                    message.segmentCount = longToNumber(reader.int64());\n                    break;\n                case 6:\n                    message.startedAt = longToNumber(reader.int64());\n                    break;\n                case 7:\n                    message.endedAt = longToNumber(reader.int64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            playlistName: isSet(object.playlistName) ? String(object.playlistName) : \"\",\n            livePlaylistName: isSet(object.livePlaylistName) ? String(object.livePlaylistName) : \"\",\n            duration: isSet(object.duration) ? Number(object.duration) : 0,\n            size: isSet(object.size) ? Number(object.size) : 0,\n            playlistLocation: isSet(object.playlistLocation) ? String(object.playlistLocation) : \"\",\n            livePlaylistLocation: isSet(object.livePlaylistLocation) ? String(object.livePlaylistLocation) : \"\",\n            segmentCount: isSet(object.segmentCount) ? Number(object.segmentCount) : 0,\n            startedAt: isSet(object.startedAt) ? Number(object.startedAt) : 0,\n            endedAt: isSet(object.endedAt) ? Number(object.endedAt) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.playlistName !== undefined && (obj.playlistName = message.playlistName);\n        message.livePlaylistName !== undefined && (obj.livePlaylistName = message.livePlaylistName);\n        message.duration !== undefined && (obj.duration = Math.round(message.duration));\n        message.size !== undefined && (obj.size = Math.round(message.size));\n        message.playlistLocation !== undefined && (obj.playlistLocation = message.playlistLocation);\n        message.livePlaylistLocation !== undefined && (obj.livePlaylistLocation = message.livePlaylistLocation);\n        message.segmentCount !== undefined && (obj.segmentCount = Math.round(message.segmentCount));\n        message.startedAt !== undefined && (obj.startedAt = Math.round(message.startedAt));\n        message.endedAt !== undefined && (obj.endedAt = Math.round(message.endedAt));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        const message = createBaseSegmentsInfo();\n        message.playlistName = (_a = object.playlistName) !== null && _a !== void 0 ? _a : \"\";\n        message.livePlaylistName = (_b = object.livePlaylistName) !== null && _b !== void 0 ? _b : \"\";\n        message.duration = (_c = object.duration) !== null && _c !== void 0 ? _c : 0;\n        message.size = (_d = object.size) !== null && _d !== void 0 ? _d : 0;\n        message.playlistLocation = (_e = object.playlistLocation) !== null && _e !== void 0 ? _e : \"\";\n        message.livePlaylistLocation = (_f = object.livePlaylistLocation) !== null && _f !== void 0 ? _f : \"\";\n        message.segmentCount = (_g = object.segmentCount) !== null && _g !== void 0 ? _g : 0;\n        message.startedAt = (_h = object.startedAt) !== null && _h !== void 0 ? _h : 0;\n        message.endedAt = (_j = object.endedAt) !== null && _j !== void 0 ? _j : 0;\n        return message;\n    },\n};\nfunction createBaseImagesInfo() {\n    return { imageCount: 0, startedAt: 0, endedAt: 0 };\n}\nexports.ImagesInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.imageCount !== undefined && message.imageCount !== 0) {\n            writer.uint32(8).int64(message.imageCount);\n        }\n        if (message.startedAt !== undefined && message.startedAt !== 0) {\n            writer.uint32(16).int64(message.startedAt);\n        }\n        if (message.endedAt !== undefined && message.endedAt !== 0) {\n            writer.uint32(24).int64(message.endedAt);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseImagesInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.imageCount = longToNumber(reader.int64());\n                    break;\n                case 2:\n                    message.startedAt = longToNumber(reader.int64());\n                    break;\n                case 3:\n                    message.endedAt = longToNumber(reader.int64());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            imageCount: isSet(object.imageCount) ? Number(object.imageCount) : 0,\n            startedAt: isSet(object.startedAt) ? Number(object.startedAt) : 0,\n            endedAt: isSet(object.endedAt) ? Number(object.endedAt) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.imageCount !== undefined && (obj.imageCount = Math.round(message.imageCount));\n        message.startedAt !== undefined && (obj.startedAt = Math.round(message.startedAt));\n        message.endedAt !== undefined && (obj.endedAt = Math.round(message.endedAt));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseImagesInfo();\n        message.imageCount = (_a = object.imageCount) !== null && _a !== void 0 ? _a : 0;\n        message.startedAt = (_b = object.startedAt) !== null && _b !== void 0 ? _b : 0;\n        message.endedAt = (_c = object.endedAt) !== null && _c !== void 0 ? _c : 0;\n        return message;\n    },\n};\nfunction createBaseAutoParticipantEgress() {\n    return { preset: undefined, advanced: undefined, fileOutputs: [], segmentOutputs: [] };\n}\nexports.AutoParticipantEgress = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.preset !== undefined) {\n            writer.uint32(8).int32(message.preset);\n        }\n        if (message.advanced !== undefined) {\n            exports.EncodingOptions.encode(message.advanced, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.fileOutputs !== undefined && message.fileOutputs.length !== 0) {\n            for (const v of message.fileOutputs) {\n                exports.EncodedFileOutput.encode(v, writer.uint32(26).fork()).ldelim();\n            }\n        }\n        if (message.segmentOutputs !== undefined && message.segmentOutputs.length !== 0) {\n            for (const v of message.segmentOutputs) {\n                exports.SegmentedFileOutput.encode(v, writer.uint32(34).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseAutoParticipantEgress();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.preset = reader.int32();\n                    break;\n                case 2:\n                    message.advanced = exports.EncodingOptions.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.fileOutputs.push(exports.EncodedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                case 4:\n                    message.segmentOutputs.push(exports.SegmentedFileOutput.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            preset: isSet(object.preset) ? encodingOptionsPresetFromJSON(object.preset) : undefined,\n            advanced: isSet(object.advanced) ? exports.EncodingOptions.fromJSON(object.advanced) : undefined,\n            fileOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.fileOutputs)\n                ? object.fileOutputs.map((e) => exports.EncodedFileOutput.fromJSON(e))\n                : [],\n            segmentOutputs: Array.isArray(object === null || object === void 0 ? void 0 : object.segmentOutputs)\n                ? object.segmentOutputs.map((e) => exports.SegmentedFileOutput.fromJSON(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.preset !== undefined &&\n            (obj.preset = message.preset !== undefined ? encodingOptionsPresetToJSON(message.preset) : undefined);\n        message.advanced !== undefined &&\n            (obj.advanced = message.advanced ? exports.EncodingOptions.toJSON(message.advanced) : undefined);\n        if (message.fileOutputs) {\n            obj.fileOutputs = message.fileOutputs.map((e) => e ? exports.EncodedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.fileOutputs = [];\n        }\n        if (message.segmentOutputs) {\n            obj.segmentOutputs = message.segmentOutputs.map((e) => e ? exports.SegmentedFileOutput.toJSON(e) : undefined);\n        }\n        else {\n            obj.segmentOutputs = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseAutoParticipantEgress();\n        message.preset = (_a = object.preset) !== null && _a !== void 0 ? _a : undefined;\n        message.advanced = (object.advanced !== undefined && object.advanced !== null)\n            ? exports.EncodingOptions.fromPartial(object.advanced)\n            : undefined;\n        message.fileOutputs = ((_b = object.fileOutputs) === null || _b === void 0 ? void 0 : _b.map((e) => exports.EncodedFileOutput.fromPartial(e))) || [];\n        message.segmentOutputs = ((_c = object.segmentOutputs) === null || _c === void 0 ? void 0 : _c.map((e) => exports.SegmentedFileOutput.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseAutoTrackEgress() {\n    return { filepath: \"\", disableManifest: false, s3: undefined, gcp: undefined, azure: undefined };\n}\nexports.AutoTrackEgress = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.filepath !== undefined && message.filepath !== \"\") {\n            writer.uint32(10).string(message.filepath);\n        }\n        if (message.disableManifest === true) {\n            writer.uint32(40).bool(message.disableManifest);\n        }\n        if (message.s3 !== undefined) {\n            exports.S3Upload.encode(message.s3, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.gcp !== undefined) {\n            exports.GCPUpload.encode(message.gcp, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.azure !== undefined) {\n            exports.AzureBlobUpload.encode(message.azure, writer.uint32(34).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseAutoTrackEgress();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.filepath = reader.string();\n                    break;\n                case 5:\n                    message.disableManifest = reader.bool();\n                    break;\n                case 2:\n                    message.s3 = exports.S3Upload.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.gcp = exports.GCPUpload.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.azure = exports.AzureBlobUpload.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            filepath: isSet(object.filepath) ? String(object.filepath) : \"\",\n            disableManifest: isSet(object.disableManifest) ? Boolean(object.disableManifest) : false,\n            s3: isSet(object.s3) ? exports.S3Upload.fromJSON(object.s3) : undefined,\n            gcp: isSet(object.gcp) ? exports.GCPUpload.fromJSON(object.gcp) : undefined,\n            azure: isSet(object.azure) ? exports.AzureBlobUpload.fromJSON(object.azure) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.filepath !== undefined && (obj.filepath = message.filepath);\n        message.disableManifest !== undefined && (obj.disableManifest = message.disableManifest);\n        message.s3 !== undefined && (obj.s3 = message.s3 ? exports.S3Upload.toJSON(message.s3) : undefined);\n        message.gcp !== undefined && (obj.gcp = message.gcp ? exports.GCPUpload.toJSON(message.gcp) : undefined);\n        message.azure !== undefined && (obj.azure = message.azure ? exports.AzureBlobUpload.toJSON(message.azure) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseAutoTrackEgress();\n        message.filepath = (_a = object.filepath) !== null && _a !== void 0 ? _a : \"\";\n        message.disableManifest = (_b = object.disableManifest) !== null && _b !== void 0 ? _b : false;\n        message.s3 = (object.s3 !== undefined && object.s3 !== null) ? exports.S3Upload.fromPartial(object.s3) : undefined;\n        message.gcp = (object.gcp !== undefined && object.gcp !== null) ? exports.GCPUpload.fromPartial(object.gcp) : undefined;\n        message.azure = (object.azure !== undefined && object.azure !== null)\n            ? exports.AzureBlobUpload.fromPartial(object.azure)\n            : undefined;\n        return message;\n    },\n};\nvar globalThis = (() => {\n    if (typeof globalThis !== \"undefined\") {\n        return globalThis;\n    }\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    if (typeof window !== \"undefined\") {\n        return window;\n    }\n    if (typeof global !== \"undefined\") {\n        return global;\n    }\n    throw \"Unable to locate global object\";\n})();\nfunction longToNumber(long) {\n    if (long.gt(Number.MAX_SAFE_INTEGER)) {\n        throw new globalThis.Error(\"Value is larger than Number.MAX_SAFE_INTEGER\");\n    }\n    return long.toNumber();\n}\nif (minimal_1.default.util.Long !== long_1.default) {\n    minimal_1.default.util.Long = long_1.default;\n    minimal_1.default.configure();\n}\nfunction isObject(value) {\n    return typeof value === \"object\" && value !== null;\n}\nfunction isSet(value) {\n    return value !== null && value !== undefined;\n}\n//# sourceMappingURL=livekit_egress.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9wcm90by9saXZla2l0X2VncmVzcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGtCQUFrQixHQUFHLHNCQUFzQixHQUFHLGtCQUFrQixHQUFHLHlCQUF5QixHQUFHLDBCQUEwQixHQUFHLHlCQUF5QixHQUFHLDRCQUE0QixHQUFHLDJCQUEyQixHQUFHLDJCQUEyQixHQUFHLHVCQUF1QixHQUFHLG9CQUFvQixHQUFHLG9CQUFvQixHQUFHLHVCQUF1QixHQUFHLGlCQUFpQixHQUFHLDhCQUE4QixHQUFHLGdCQUFnQixHQUFHLG1CQUFtQixHQUFHLHdCQUF3QixHQUFHLDJCQUEyQixHQUFHLHlCQUF5QixHQUFHLDBCQUEwQixHQUFHLG1DQUFtQyxHQUFHLGdDQUFnQyxHQUFHLHdCQUF3QixHQUFHLGtDQUFrQyxHQUFHLCtCQUErQixHQUFHLGlDQUFpQyxHQUFHLHlCQUF5QixHQUFHLDBCQUEwQixHQUFHLDRCQUE0QixHQUFHLG9CQUFvQixHQUFHLG1DQUFtQyxHQUFHLHFDQUFxQyxHQUFHLDZCQUE2QixHQUFHLDRCQUE0QixHQUFHLDhCQUE4QixHQUFHLHNCQUFzQixHQUFHLDZCQUE2QixHQUFHLCtCQUErQixHQUFHLHVCQUF1QixHQUFHLGlDQUFpQyxHQUFHLG1DQUFtQyxHQUFHLDJCQUEyQixHQUFHLG1DQUFtQyxHQUFHLHFDQUFxQyxHQUFHLDZCQUE2QixHQUFHLDZCQUE2QixHQUFHLCtCQUErQixHQUFHLHVCQUF1QixHQUFHLHVCQUF1QjtBQUMvOEMsdUJBQXVCLEdBQUcsNkJBQTZCLEdBQUcsa0JBQWtCLEdBQUcsb0JBQW9CLEdBQUcsZ0JBQWdCO0FBQ3RIO0FBQ0EsK0JBQStCLG1CQUFPLENBQUMsK0RBQU07QUFDN0Msa0NBQWtDLG1CQUFPLENBQUMsaUZBQW9CO0FBQzlELHlCQUF5QixtQkFBTyxDQUFDLHlHQUFrQjtBQUNuRCx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdEQUFnRCx1QkFBdUIsS0FBSztBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDREQUE0RCw2QkFBNkIsS0FBSztBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsd0RBQXdELDJCQUEyQixLQUFLO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnREFBZ0QsdUJBQXVCLEtBQUs7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsOENBQThDLHNCQUFzQixLQUFLO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsNERBQTRELDZCQUE2QixLQUFLO0FBQy9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsMENBQTBDLG9CQUFvQixLQUFLO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsb0RBQW9ELHlCQUF5QixLQUFLO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0Msb0RBQW9ELGlCQUFpQjtBQUNyRSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLElBQUk7QUFDckIsb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvR0FBb0c7QUFDcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLElBQUk7QUFDYjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGlCQUFpQjtBQUNqQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGlCQUFpQjtBQUNqQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsaUJBQWlCO0FBQ2pCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGlCQUFpQjtBQUNqQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saXZlc3RyZWFtLy4vbm9kZV9tb2R1bGVzL2xpdmVraXQtc2VydmVyLXNkay9kaXN0L3Byb3RvL2xpdmVraXRfZWdyZXNzLmpzPzE2NWYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlN0cmVhbUluZm8gPSBleHBvcnRzLlN0cmVhbUluZm9MaXN0ID0gZXhwb3J0cy5FZ3Jlc3NJbmZvID0gZXhwb3J0cy5TdG9wRWdyZXNzUmVxdWVzdCA9IGV4cG9ydHMuTGlzdEVncmVzc1Jlc3BvbnNlID0gZXhwb3J0cy5MaXN0RWdyZXNzUmVxdWVzdCA9IGV4cG9ydHMuVXBkYXRlT3V0cHV0c1JlcXVlc3QgPSBleHBvcnRzLlVwZGF0ZVN0cmVhbVJlcXVlc3QgPSBleHBvcnRzLlVwZGF0ZUxheW91dFJlcXVlc3QgPSBleHBvcnRzLkVuY29kaW5nT3B0aW9ucyA9IGV4cG9ydHMuU3RyZWFtT3V0cHV0ID0gZXhwb3J0cy5BbGlPU1NVcGxvYWQgPSBleHBvcnRzLkF6dXJlQmxvYlVwbG9hZCA9IGV4cG9ydHMuR0NQVXBsb2FkID0gZXhwb3J0cy5TM1VwbG9hZF9NZXRhZGF0YUVudHJ5ID0gZXhwb3J0cy5TM1VwbG9hZCA9IGV4cG9ydHMuSW1hZ2VPdXRwdXQgPSBleHBvcnRzLkRpcmVjdEZpbGVPdXRwdXQgPSBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQgPSBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0ID0gZXhwb3J0cy5UcmFja0VncmVzc1JlcXVlc3QgPSBleHBvcnRzLlRyYWNrQ29tcG9zaXRlRWdyZXNzUmVxdWVzdCA9IGV4cG9ydHMuUGFydGljaXBhbnRFZ3Jlc3NSZXF1ZXN0ID0gZXhwb3J0cy5XZWJFZ3Jlc3NSZXF1ZXN0ID0gZXhwb3J0cy5Sb29tQ29tcG9zaXRlRWdyZXNzUmVxdWVzdCA9IGV4cG9ydHMuc3RyZWFtSW5mb19TdGF0dXNUb0pTT04gPSBleHBvcnRzLnN0cmVhbUluZm9fU3RhdHVzRnJvbUpTT04gPSBleHBvcnRzLlN0cmVhbUluZm9fU3RhdHVzID0gZXhwb3J0cy5lZ3Jlc3NTdGF0dXNUb0pTT04gPSBleHBvcnRzLmVncmVzc1N0YXR1c0Zyb21KU09OID0gZXhwb3J0cy5FZ3Jlc3NTdGF0dXMgPSBleHBvcnRzLmVuY29kaW5nT3B0aW9uc1ByZXNldFRvSlNPTiA9IGV4cG9ydHMuZW5jb2RpbmdPcHRpb25zUHJlc2V0RnJvbUpTT04gPSBleHBvcnRzLkVuY29kaW5nT3B0aW9uc1ByZXNldCA9IGV4cG9ydHMuc3RyZWFtUHJvdG9jb2xUb0pTT04gPSBleHBvcnRzLnN0cmVhbVByb3RvY29sRnJvbUpTT04gPSBleHBvcnRzLlN0cmVhbVByb3RvY29sID0gZXhwb3J0cy5pbWFnZUZpbGVTdWZmaXhUb0pTT04gPSBleHBvcnRzLmltYWdlRmlsZVN1ZmZpeEZyb21KU09OID0gZXhwb3J0cy5JbWFnZUZpbGVTdWZmaXggPSBleHBvcnRzLnNlZ21lbnRlZEZpbGVTdWZmaXhUb0pTT04gPSBleHBvcnRzLnNlZ21lbnRlZEZpbGVTdWZmaXhGcm9tSlNPTiA9IGV4cG9ydHMuU2VnbWVudGVkRmlsZVN1ZmZpeCA9IGV4cG9ydHMuc2VnbWVudGVkRmlsZVByb3RvY29sVG9KU09OID0gZXhwb3J0cy5zZWdtZW50ZWRGaWxlUHJvdG9jb2xGcm9tSlNPTiA9IGV4cG9ydHMuU2VnbWVudGVkRmlsZVByb3RvY29sID0gZXhwb3J0cy5lbmNvZGVkRmlsZVR5cGVUb0pTT04gPSBleHBvcnRzLmVuY29kZWRGaWxlVHlwZUZyb21KU09OID0gZXhwb3J0cy5FbmNvZGVkRmlsZVR5cGUgPSBleHBvcnRzLnByb3RvYnVmUGFja2FnZSA9IHZvaWQgMDtcbmV4cG9ydHMuQXV0b1RyYWNrRWdyZXNzID0gZXhwb3J0cy5BdXRvUGFydGljaXBhbnRFZ3Jlc3MgPSBleHBvcnRzLkltYWdlc0luZm8gPSBleHBvcnRzLlNlZ21lbnRzSW5mbyA9IGV4cG9ydHMuRmlsZUluZm8gPSB2b2lkIDA7XG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuY29uc3QgbG9uZ18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJsb25nXCIpKTtcbmNvbnN0IG1pbmltYWxfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwicHJvdG9idWZqcy9taW5pbWFsXCIpKTtcbmNvbnN0IGxpdmVraXRfbW9kZWxzXzEgPSByZXF1aXJlKFwiLi9saXZla2l0X21vZGVsc1wiKTtcbmV4cG9ydHMucHJvdG9idWZQYWNrYWdlID0gXCJsaXZla2l0XCI7XG52YXIgRW5jb2RlZEZpbGVUeXBlO1xuKGZ1bmN0aW9uIChFbmNvZGVkRmlsZVR5cGUpIHtcbiAgICAvKiogREVGQVVMVF9GSUxFVFlQRSAtIGZpbGUgdHlwZSBjaG9zZW4gYmFzZWQgb24gY29kZWNzICovXG4gICAgRW5jb2RlZEZpbGVUeXBlW0VuY29kZWRGaWxlVHlwZVtcIkRFRkFVTFRfRklMRVRZUEVcIl0gPSAwXSA9IFwiREVGQVVMVF9GSUxFVFlQRVwiO1xuICAgIEVuY29kZWRGaWxlVHlwZVtFbmNvZGVkRmlsZVR5cGVbXCJNUDRcIl0gPSAxXSA9IFwiTVA0XCI7XG4gICAgRW5jb2RlZEZpbGVUeXBlW0VuY29kZWRGaWxlVHlwZVtcIk9HR1wiXSA9IDJdID0gXCJPR0dcIjtcbiAgICBFbmNvZGVkRmlsZVR5cGVbRW5jb2RlZEZpbGVUeXBlW1wiVU5SRUNPR05JWkVEXCJdID0gLTFdID0gXCJVTlJFQ09HTklaRURcIjtcbn0pKEVuY29kZWRGaWxlVHlwZSA9IGV4cG9ydHMuRW5jb2RlZEZpbGVUeXBlIHx8IChleHBvcnRzLkVuY29kZWRGaWxlVHlwZSA9IHt9KSk7XG5mdW5jdGlvbiBlbmNvZGVkRmlsZVR5cGVGcm9tSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgXCJERUZBVUxUX0ZJTEVUWVBFXCI6XG4gICAgICAgICAgICByZXR1cm4gRW5jb2RlZEZpbGVUeXBlLkRFRkFVTFRfRklMRVRZUEU7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSBcIk1QNFwiOlxuICAgICAgICAgICAgcmV0dXJuIEVuY29kZWRGaWxlVHlwZS5NUDQ7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSBcIk9HR1wiOlxuICAgICAgICAgICAgcmV0dXJuIEVuY29kZWRGaWxlVHlwZS5PR0c7XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBFbmNvZGVkRmlsZVR5cGUuVU5SRUNPR05JWkVEO1xuICAgIH1cbn1cbmV4cG9ydHMuZW5jb2RlZEZpbGVUeXBlRnJvbUpTT04gPSBlbmNvZGVkRmlsZVR5cGVGcm9tSlNPTjtcbmZ1bmN0aW9uIGVuY29kZWRGaWxlVHlwZVRvSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIEVuY29kZWRGaWxlVHlwZS5ERUZBVUxUX0ZJTEVUWVBFOlxuICAgICAgICAgICAgcmV0dXJuIFwiREVGQVVMVF9GSUxFVFlQRVwiO1xuICAgICAgICBjYXNlIEVuY29kZWRGaWxlVHlwZS5NUDQ6XG4gICAgICAgICAgICByZXR1cm4gXCJNUDRcIjtcbiAgICAgICAgY2FzZSBFbmNvZGVkRmlsZVR5cGUuT0dHOlxuICAgICAgICAgICAgcmV0dXJuIFwiT0dHXCI7XG4gICAgICAgIGNhc2UgRW5jb2RlZEZpbGVUeXBlLlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMuZW5jb2RlZEZpbGVUeXBlVG9KU09OID0gZW5jb2RlZEZpbGVUeXBlVG9KU09OO1xudmFyIFNlZ21lbnRlZEZpbGVQcm90b2NvbDtcbihmdW5jdGlvbiAoU2VnbWVudGVkRmlsZVByb3RvY29sKSB7XG4gICAgU2VnbWVudGVkRmlsZVByb3RvY29sW1NlZ21lbnRlZEZpbGVQcm90b2NvbFtcIkRFRkFVTFRfU0VHTUVOVEVEX0ZJTEVfUFJPVE9DT0xcIl0gPSAwXSA9IFwiREVGQVVMVF9TRUdNRU5URURfRklMRV9QUk9UT0NPTFwiO1xuICAgIFNlZ21lbnRlZEZpbGVQcm90b2NvbFtTZWdtZW50ZWRGaWxlUHJvdG9jb2xbXCJITFNfUFJPVE9DT0xcIl0gPSAxXSA9IFwiSExTX1BST1RPQ09MXCI7XG4gICAgU2VnbWVudGVkRmlsZVByb3RvY29sW1NlZ21lbnRlZEZpbGVQcm90b2NvbFtcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShTZWdtZW50ZWRGaWxlUHJvdG9jb2wgPSBleHBvcnRzLlNlZ21lbnRlZEZpbGVQcm90b2NvbCB8fCAoZXhwb3J0cy5TZWdtZW50ZWRGaWxlUHJvdG9jb2wgPSB7fSkpO1xuZnVuY3Rpb24gc2VnbWVudGVkRmlsZVByb3RvY29sRnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiREVGQVVMVF9TRUdNRU5URURfRklMRV9QUk9UT0NPTFwiOlxuICAgICAgICAgICAgcmV0dXJuIFNlZ21lbnRlZEZpbGVQcm90b2NvbC5ERUZBVUxUX1NFR01FTlRFRF9GSUxFX1BST1RPQ09MO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJITFNfUFJPVE9DT0xcIjpcbiAgICAgICAgICAgIHJldHVybiBTZWdtZW50ZWRGaWxlUHJvdG9jb2wuSExTX1BST1RPQ09MO1xuICAgICAgICBjYXNlIC0xOlxuICAgICAgICBjYXNlIFwiVU5SRUNPR05JWkVEXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gU2VnbWVudGVkRmlsZVByb3RvY29sLlVOUkVDT0dOSVpFRDtcbiAgICB9XG59XG5leHBvcnRzLnNlZ21lbnRlZEZpbGVQcm90b2NvbEZyb21KU09OID0gc2VnbWVudGVkRmlsZVByb3RvY29sRnJvbUpTT047XG5mdW5jdGlvbiBzZWdtZW50ZWRGaWxlUHJvdG9jb2xUb0pTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSBTZWdtZW50ZWRGaWxlUHJvdG9jb2wuREVGQVVMVF9TRUdNRU5URURfRklMRV9QUk9UT0NPTDpcbiAgICAgICAgICAgIHJldHVybiBcIkRFRkFVTFRfU0VHTUVOVEVEX0ZJTEVfUFJPVE9DT0xcIjtcbiAgICAgICAgY2FzZSBTZWdtZW50ZWRGaWxlUHJvdG9jb2wuSExTX1BST1RPQ09MOlxuICAgICAgICAgICAgcmV0dXJuIFwiSExTX1BST1RPQ09MXCI7XG4gICAgICAgIGNhc2UgU2VnbWVudGVkRmlsZVByb3RvY29sLlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMuc2VnbWVudGVkRmlsZVByb3RvY29sVG9KU09OID0gc2VnbWVudGVkRmlsZVByb3RvY29sVG9KU09OO1xudmFyIFNlZ21lbnRlZEZpbGVTdWZmaXg7XG4oZnVuY3Rpb24gKFNlZ21lbnRlZEZpbGVTdWZmaXgpIHtcbiAgICBTZWdtZW50ZWRGaWxlU3VmZml4W1NlZ21lbnRlZEZpbGVTdWZmaXhbXCJJTkRFWFwiXSA9IDBdID0gXCJJTkRFWFwiO1xuICAgIFNlZ21lbnRlZEZpbGVTdWZmaXhbU2VnbWVudGVkRmlsZVN1ZmZpeFtcIlRJTUVTVEFNUFwiXSA9IDFdID0gXCJUSU1FU1RBTVBcIjtcbiAgICBTZWdtZW50ZWRGaWxlU3VmZml4W1NlZ21lbnRlZEZpbGVTdWZmaXhbXCJVTlJFQ09HTklaRURcIl0gPSAtMV0gPSBcIlVOUkVDT0dOSVpFRFwiO1xufSkoU2VnbWVudGVkRmlsZVN1ZmZpeCA9IGV4cG9ydHMuU2VnbWVudGVkRmlsZVN1ZmZpeCB8fCAoZXhwb3J0cy5TZWdtZW50ZWRGaWxlU3VmZml4ID0ge30pKTtcbmZ1bmN0aW9uIHNlZ21lbnRlZEZpbGVTdWZmaXhGcm9tSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgXCJJTkRFWFwiOlxuICAgICAgICAgICAgcmV0dXJuIFNlZ21lbnRlZEZpbGVTdWZmaXguSU5ERVg7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSBcIlRJTUVTVEFNUFwiOlxuICAgICAgICAgICAgcmV0dXJuIFNlZ21lbnRlZEZpbGVTdWZmaXguVElNRVNUQU1QO1xuICAgICAgICBjYXNlIC0xOlxuICAgICAgICBjYXNlIFwiVU5SRUNPR05JWkVEXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gU2VnbWVudGVkRmlsZVN1ZmZpeC5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy5zZWdtZW50ZWRGaWxlU3VmZml4RnJvbUpTT04gPSBzZWdtZW50ZWRGaWxlU3VmZml4RnJvbUpTT047XG5mdW5jdGlvbiBzZWdtZW50ZWRGaWxlU3VmZml4VG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgU2VnbWVudGVkRmlsZVN1ZmZpeC5JTkRFWDpcbiAgICAgICAgICAgIHJldHVybiBcIklOREVYXCI7XG4gICAgICAgIGNhc2UgU2VnbWVudGVkRmlsZVN1ZmZpeC5USU1FU1RBTVA6XG4gICAgICAgICAgICByZXR1cm4gXCJUSU1FU1RBTVBcIjtcbiAgICAgICAgY2FzZSBTZWdtZW50ZWRGaWxlU3VmZml4LlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMuc2VnbWVudGVkRmlsZVN1ZmZpeFRvSlNPTiA9IHNlZ21lbnRlZEZpbGVTdWZmaXhUb0pTT047XG52YXIgSW1hZ2VGaWxlU3VmZml4O1xuKGZ1bmN0aW9uIChJbWFnZUZpbGVTdWZmaXgpIHtcbiAgICBJbWFnZUZpbGVTdWZmaXhbSW1hZ2VGaWxlU3VmZml4W1wiSU1BR0VfU1VGRklYX0lOREVYXCJdID0gMF0gPSBcIklNQUdFX1NVRkZJWF9JTkRFWFwiO1xuICAgIEltYWdlRmlsZVN1ZmZpeFtJbWFnZUZpbGVTdWZmaXhbXCJJTUFHRV9TVUZGSVhfVElNRVNUQU1QXCJdID0gMV0gPSBcIklNQUdFX1NVRkZJWF9USU1FU1RBTVBcIjtcbiAgICBJbWFnZUZpbGVTdWZmaXhbSW1hZ2VGaWxlU3VmZml4W1wiVU5SRUNPR05JWkVEXCJdID0gLTFdID0gXCJVTlJFQ09HTklaRURcIjtcbn0pKEltYWdlRmlsZVN1ZmZpeCA9IGV4cG9ydHMuSW1hZ2VGaWxlU3VmZml4IHx8IChleHBvcnRzLkltYWdlRmlsZVN1ZmZpeCA9IHt9KSk7XG5mdW5jdGlvbiBpbWFnZUZpbGVTdWZmaXhGcm9tSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgXCJJTUFHRV9TVUZGSVhfSU5ERVhcIjpcbiAgICAgICAgICAgIHJldHVybiBJbWFnZUZpbGVTdWZmaXguSU1BR0VfU1VGRklYX0lOREVYO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJJTUFHRV9TVUZGSVhfVElNRVNUQU1QXCI6XG4gICAgICAgICAgICByZXR1cm4gSW1hZ2VGaWxlU3VmZml4LklNQUdFX1NVRkZJWF9USU1FU1RBTVA7XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBJbWFnZUZpbGVTdWZmaXguVU5SRUNPR05JWkVEO1xuICAgIH1cbn1cbmV4cG9ydHMuaW1hZ2VGaWxlU3VmZml4RnJvbUpTT04gPSBpbWFnZUZpbGVTdWZmaXhGcm9tSlNPTjtcbmZ1bmN0aW9uIGltYWdlRmlsZVN1ZmZpeFRvSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIEltYWdlRmlsZVN1ZmZpeC5JTUFHRV9TVUZGSVhfSU5ERVg6XG4gICAgICAgICAgICByZXR1cm4gXCJJTUFHRV9TVUZGSVhfSU5ERVhcIjtcbiAgICAgICAgY2FzZSBJbWFnZUZpbGVTdWZmaXguSU1BR0VfU1VGRklYX1RJTUVTVEFNUDpcbiAgICAgICAgICAgIHJldHVybiBcIklNQUdFX1NVRkZJWF9USU1FU1RBTVBcIjtcbiAgICAgICAgY2FzZSBJbWFnZUZpbGVTdWZmaXguVU5SRUNPR05JWkVEOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5SRUNPR05JWkVEXCI7XG4gICAgfVxufVxuZXhwb3J0cy5pbWFnZUZpbGVTdWZmaXhUb0pTT04gPSBpbWFnZUZpbGVTdWZmaXhUb0pTT047XG52YXIgU3RyZWFtUHJvdG9jb2w7XG4oZnVuY3Rpb24gKFN0cmVhbVByb3RvY29sKSB7XG4gICAgLyoqIERFRkFVTFRfUFJPVE9DT0wgLSBwcm90b2NvbCBjaG9zZW4gYmFzZWQgb24gdXJscyAqL1xuICAgIFN0cmVhbVByb3RvY29sW1N0cmVhbVByb3RvY29sW1wiREVGQVVMVF9QUk9UT0NPTFwiXSA9IDBdID0gXCJERUZBVUxUX1BST1RPQ09MXCI7XG4gICAgU3RyZWFtUHJvdG9jb2xbU3RyZWFtUHJvdG9jb2xbXCJSVE1QXCJdID0gMV0gPSBcIlJUTVBcIjtcbiAgICBTdHJlYW1Qcm90b2NvbFtTdHJlYW1Qcm90b2NvbFtcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShTdHJlYW1Qcm90b2NvbCA9IGV4cG9ydHMuU3RyZWFtUHJvdG9jb2wgfHwgKGV4cG9ydHMuU3RyZWFtUHJvdG9jb2wgPSB7fSkpO1xuZnVuY3Rpb24gc3RyZWFtUHJvdG9jb2xGcm9tSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgXCJERUZBVUxUX1BST1RPQ09MXCI6XG4gICAgICAgICAgICByZXR1cm4gU3RyZWFtUHJvdG9jb2wuREVGQVVMVF9QUk9UT0NPTDtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIFwiUlRNUFwiOlxuICAgICAgICAgICAgcmV0dXJuIFN0cmVhbVByb3RvY29sLlJUTVA7XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBTdHJlYW1Qcm90b2NvbC5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy5zdHJlYW1Qcm90b2NvbEZyb21KU09OID0gc3RyZWFtUHJvdG9jb2xGcm9tSlNPTjtcbmZ1bmN0aW9uIHN0cmVhbVByb3RvY29sVG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgU3RyZWFtUHJvdG9jb2wuREVGQVVMVF9QUk9UT0NPTDpcbiAgICAgICAgICAgIHJldHVybiBcIkRFRkFVTFRfUFJPVE9DT0xcIjtcbiAgICAgICAgY2FzZSBTdHJlYW1Qcm90b2NvbC5SVE1QOlxuICAgICAgICAgICAgcmV0dXJuIFwiUlRNUFwiO1xuICAgICAgICBjYXNlIFN0cmVhbVByb3RvY29sLlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMuc3RyZWFtUHJvdG9jb2xUb0pTT04gPSBzdHJlYW1Qcm90b2NvbFRvSlNPTjtcbnZhciBFbmNvZGluZ09wdGlvbnNQcmVzZXQ7XG4oZnVuY3Rpb24gKEVuY29kaW5nT3B0aW9uc1ByZXNldCkge1xuICAgIC8qKiBIMjY0XzcyMFBfMzAgLSAxMjgweDcyMCwgMzBmcHMsIDMwMDBrcGJzLCBILjI2NF9NQUlOIC8gT1BVUyAqL1xuICAgIEVuY29kaW5nT3B0aW9uc1ByZXNldFtFbmNvZGluZ09wdGlvbnNQcmVzZXRbXCJIMjY0XzcyMFBfMzBcIl0gPSAwXSA9IFwiSDI2NF83MjBQXzMwXCI7XG4gICAgLyoqIEgyNjRfNzIwUF82MCAtIDEyODB4NzIwLCA2MGZwcywgNDUwMGticHMsIEguMjY0X01BSU4gLyBPUFVTICovXG4gICAgRW5jb2RpbmdPcHRpb25zUHJlc2V0W0VuY29kaW5nT3B0aW9uc1ByZXNldFtcIkgyNjRfNzIwUF82MFwiXSA9IDFdID0gXCJIMjY0XzcyMFBfNjBcIjtcbiAgICAvKiogSDI2NF8xMDgwUF8zMCAtIDE5MjB4MTA4MCwgMzBmcHMsIDQ1MDBrYnBzLCBILjI2NF9NQUlOIC8gT1BVUyAqL1xuICAgIEVuY29kaW5nT3B0aW9uc1ByZXNldFtFbmNvZGluZ09wdGlvbnNQcmVzZXRbXCJIMjY0XzEwODBQXzMwXCJdID0gMl0gPSBcIkgyNjRfMTA4MFBfMzBcIjtcbiAgICAvKiogSDI2NF8xMDgwUF82MCAtIDE5MjB4MTA4MCwgNjBmcHMsIDYwMDBrYnBzLCBILjI2NF9NQUlOIC8gT1BVUyAqL1xuICAgIEVuY29kaW5nT3B0aW9uc1ByZXNldFtFbmNvZGluZ09wdGlvbnNQcmVzZXRbXCJIMjY0XzEwODBQXzYwXCJdID0gM10gPSBcIkgyNjRfMTA4MFBfNjBcIjtcbiAgICAvKiogUE9SVFJBSVRfSDI2NF83MjBQXzMwIC0gNzIweDEyODAsIDMwZnBzLCAzMDAwa3BicywgSC4yNjRfTUFJTiAvIE9QVVMgKi9cbiAgICBFbmNvZGluZ09wdGlvbnNQcmVzZXRbRW5jb2RpbmdPcHRpb25zUHJlc2V0W1wiUE9SVFJBSVRfSDI2NF83MjBQXzMwXCJdID0gNF0gPSBcIlBPUlRSQUlUX0gyNjRfNzIwUF8zMFwiO1xuICAgIC8qKiBQT1JUUkFJVF9IMjY0XzcyMFBfNjAgLSA3MjB4MTI4MCwgNjBmcHMsIDQ1MDBrYnBzLCBILjI2NF9NQUlOIC8gT1BVUyAqL1xuICAgIEVuY29kaW5nT3B0aW9uc1ByZXNldFtFbmNvZGluZ09wdGlvbnNQcmVzZXRbXCJQT1JUUkFJVF9IMjY0XzcyMFBfNjBcIl0gPSA1XSA9IFwiUE9SVFJBSVRfSDI2NF83MjBQXzYwXCI7XG4gICAgLyoqIFBPUlRSQUlUX0gyNjRfMTA4MFBfMzAgLSAxMDgweDE5MjAsIDMwZnBzLCA0NTAwa2JwcywgSC4yNjRfTUFJTiAvIE9QVVMgKi9cbiAgICBFbmNvZGluZ09wdGlvbnNQcmVzZXRbRW5jb2RpbmdPcHRpb25zUHJlc2V0W1wiUE9SVFJBSVRfSDI2NF8xMDgwUF8zMFwiXSA9IDZdID0gXCJQT1JUUkFJVF9IMjY0XzEwODBQXzMwXCI7XG4gICAgLyoqIFBPUlRSQUlUX0gyNjRfMTA4MFBfNjAgLSAxMDgweDE5MjAsIDYwZnBzLCA2MDAwa2JwcywgSC4yNjRfTUFJTiAvIE9QVVMgKi9cbiAgICBFbmNvZGluZ09wdGlvbnNQcmVzZXRbRW5jb2RpbmdPcHRpb25zUHJlc2V0W1wiUE9SVFJBSVRfSDI2NF8xMDgwUF82MFwiXSA9IDddID0gXCJQT1JUUkFJVF9IMjY0XzEwODBQXzYwXCI7XG4gICAgRW5jb2RpbmdPcHRpb25zUHJlc2V0W0VuY29kaW5nT3B0aW9uc1ByZXNldFtcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShFbmNvZGluZ09wdGlvbnNQcmVzZXQgPSBleHBvcnRzLkVuY29kaW5nT3B0aW9uc1ByZXNldCB8fCAoZXhwb3J0cy5FbmNvZGluZ09wdGlvbnNQcmVzZXQgPSB7fSkpO1xuZnVuY3Rpb24gZW5jb2RpbmdPcHRpb25zUHJlc2V0RnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiSDI2NF83MjBQXzMwXCI6XG4gICAgICAgICAgICByZXR1cm4gRW5jb2RpbmdPcHRpb25zUHJlc2V0LkgyNjRfNzIwUF8zMDtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIFwiSDI2NF83MjBQXzYwXCI6XG4gICAgICAgICAgICByZXR1cm4gRW5jb2RpbmdPcHRpb25zUHJlc2V0LkgyNjRfNzIwUF82MDtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIFwiSDI2NF8xMDgwUF8zMFwiOlxuICAgICAgICAgICAgcmV0dXJuIEVuY29kaW5nT3B0aW9uc1ByZXNldC5IMjY0XzEwODBQXzMwO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgIGNhc2UgXCJIMjY0XzEwODBQXzYwXCI6XG4gICAgICAgICAgICByZXR1cm4gRW5jb2RpbmdPcHRpb25zUHJlc2V0LkgyNjRfMTA4MFBfNjA7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgY2FzZSBcIlBPUlRSQUlUX0gyNjRfNzIwUF8zMFwiOlxuICAgICAgICAgICAgcmV0dXJuIEVuY29kaW5nT3B0aW9uc1ByZXNldC5QT1JUUkFJVF9IMjY0XzcyMFBfMzA7XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgY2FzZSBcIlBPUlRSQUlUX0gyNjRfNzIwUF82MFwiOlxuICAgICAgICAgICAgcmV0dXJuIEVuY29kaW5nT3B0aW9uc1ByZXNldC5QT1JUUkFJVF9IMjY0XzcyMFBfNjA7XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgY2FzZSBcIlBPUlRSQUlUX0gyNjRfMTA4MFBfMzBcIjpcbiAgICAgICAgICAgIHJldHVybiBFbmNvZGluZ09wdGlvbnNQcmVzZXQuUE9SVFJBSVRfSDI2NF8xMDgwUF8zMDtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICBjYXNlIFwiUE9SVFJBSVRfSDI2NF8xMDgwUF82MFwiOlxuICAgICAgICAgICAgcmV0dXJuIEVuY29kaW5nT3B0aW9uc1ByZXNldC5QT1JUUkFJVF9IMjY0XzEwODBQXzYwO1xuICAgICAgICBjYXNlIC0xOlxuICAgICAgICBjYXNlIFwiVU5SRUNPR05JWkVEXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gRW5jb2RpbmdPcHRpb25zUHJlc2V0LlVOUkVDT0dOSVpFRDtcbiAgICB9XG59XG5leHBvcnRzLmVuY29kaW5nT3B0aW9uc1ByZXNldEZyb21KU09OID0gZW5jb2RpbmdPcHRpb25zUHJlc2V0RnJvbUpTT047XG5mdW5jdGlvbiBlbmNvZGluZ09wdGlvbnNQcmVzZXRUb0pTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSBFbmNvZGluZ09wdGlvbnNQcmVzZXQuSDI2NF83MjBQXzMwOlxuICAgICAgICAgICAgcmV0dXJuIFwiSDI2NF83MjBQXzMwXCI7XG4gICAgICAgIGNhc2UgRW5jb2RpbmdPcHRpb25zUHJlc2V0LkgyNjRfNzIwUF82MDpcbiAgICAgICAgICAgIHJldHVybiBcIkgyNjRfNzIwUF82MFwiO1xuICAgICAgICBjYXNlIEVuY29kaW5nT3B0aW9uc1ByZXNldC5IMjY0XzEwODBQXzMwOlxuICAgICAgICAgICAgcmV0dXJuIFwiSDI2NF8xMDgwUF8zMFwiO1xuICAgICAgICBjYXNlIEVuY29kaW5nT3B0aW9uc1ByZXNldC5IMjY0XzEwODBQXzYwOlxuICAgICAgICAgICAgcmV0dXJuIFwiSDI2NF8xMDgwUF82MFwiO1xuICAgICAgICBjYXNlIEVuY29kaW5nT3B0aW9uc1ByZXNldC5QT1JUUkFJVF9IMjY0XzcyMFBfMzA6XG4gICAgICAgICAgICByZXR1cm4gXCJQT1JUUkFJVF9IMjY0XzcyMFBfMzBcIjtcbiAgICAgICAgY2FzZSBFbmNvZGluZ09wdGlvbnNQcmVzZXQuUE9SVFJBSVRfSDI2NF83MjBQXzYwOlxuICAgICAgICAgICAgcmV0dXJuIFwiUE9SVFJBSVRfSDI2NF83MjBQXzYwXCI7XG4gICAgICAgIGNhc2UgRW5jb2RpbmdPcHRpb25zUHJlc2V0LlBPUlRSQUlUX0gyNjRfMTA4MFBfMzA6XG4gICAgICAgICAgICByZXR1cm4gXCJQT1JUUkFJVF9IMjY0XzEwODBQXzMwXCI7XG4gICAgICAgIGNhc2UgRW5jb2RpbmdPcHRpb25zUHJlc2V0LlBPUlRSQUlUX0gyNjRfMTA4MFBfNjA6XG4gICAgICAgICAgICByZXR1cm4gXCJQT1JUUkFJVF9IMjY0XzEwODBQXzYwXCI7XG4gICAgICAgIGNhc2UgRW5jb2RpbmdPcHRpb25zUHJlc2V0LlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMuZW5jb2RpbmdPcHRpb25zUHJlc2V0VG9KU09OID0gZW5jb2RpbmdPcHRpb25zUHJlc2V0VG9KU09OO1xudmFyIEVncmVzc1N0YXR1cztcbihmdW5jdGlvbiAoRWdyZXNzU3RhdHVzKSB7XG4gICAgRWdyZXNzU3RhdHVzW0VncmVzc1N0YXR1c1tcIkVHUkVTU19TVEFSVElOR1wiXSA9IDBdID0gXCJFR1JFU1NfU1RBUlRJTkdcIjtcbiAgICBFZ3Jlc3NTdGF0dXNbRWdyZXNzU3RhdHVzW1wiRUdSRVNTX0FDVElWRVwiXSA9IDFdID0gXCJFR1JFU1NfQUNUSVZFXCI7XG4gICAgRWdyZXNzU3RhdHVzW0VncmVzc1N0YXR1c1tcIkVHUkVTU19FTkRJTkdcIl0gPSAyXSA9IFwiRUdSRVNTX0VORElOR1wiO1xuICAgIEVncmVzc1N0YXR1c1tFZ3Jlc3NTdGF0dXNbXCJFR1JFU1NfQ09NUExFVEVcIl0gPSAzXSA9IFwiRUdSRVNTX0NPTVBMRVRFXCI7XG4gICAgRWdyZXNzU3RhdHVzW0VncmVzc1N0YXR1c1tcIkVHUkVTU19GQUlMRURcIl0gPSA0XSA9IFwiRUdSRVNTX0ZBSUxFRFwiO1xuICAgIEVncmVzc1N0YXR1c1tFZ3Jlc3NTdGF0dXNbXCJFR1JFU1NfQUJPUlRFRFwiXSA9IDVdID0gXCJFR1JFU1NfQUJPUlRFRFwiO1xuICAgIEVncmVzc1N0YXR1c1tFZ3Jlc3NTdGF0dXNbXCJFR1JFU1NfTElNSVRfUkVBQ0hFRFwiXSA9IDZdID0gXCJFR1JFU1NfTElNSVRfUkVBQ0hFRFwiO1xuICAgIEVncmVzc1N0YXR1c1tFZ3Jlc3NTdGF0dXNbXCJVTlJFQ09HTklaRURcIl0gPSAtMV0gPSBcIlVOUkVDT0dOSVpFRFwiO1xufSkoRWdyZXNzU3RhdHVzID0gZXhwb3J0cy5FZ3Jlc3NTdGF0dXMgfHwgKGV4cG9ydHMuRWdyZXNzU3RhdHVzID0ge30pKTtcbmZ1bmN0aW9uIGVncmVzc1N0YXR1c0Zyb21KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSBcIkVHUkVTU19TVEFSVElOR1wiOlxuICAgICAgICAgICAgcmV0dXJuIEVncmVzc1N0YXR1cy5FR1JFU1NfU1RBUlRJTkc7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSBcIkVHUkVTU19BQ1RJVkVcIjpcbiAgICAgICAgICAgIHJldHVybiBFZ3Jlc3NTdGF0dXMuRUdSRVNTX0FDVElWRTtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIFwiRUdSRVNTX0VORElOR1wiOlxuICAgICAgICAgICAgcmV0dXJuIEVncmVzc1N0YXR1cy5FR1JFU1NfRU5ESU5HO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgIGNhc2UgXCJFR1JFU1NfQ09NUExFVEVcIjpcbiAgICAgICAgICAgIHJldHVybiBFZ3Jlc3NTdGF0dXMuRUdSRVNTX0NPTVBMRVRFO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgIGNhc2UgXCJFR1JFU1NfRkFJTEVEXCI6XG4gICAgICAgICAgICByZXR1cm4gRWdyZXNzU3RhdHVzLkVHUkVTU19GQUlMRUQ7XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgY2FzZSBcIkVHUkVTU19BQk9SVEVEXCI6XG4gICAgICAgICAgICByZXR1cm4gRWdyZXNzU3RhdHVzLkVHUkVTU19BQk9SVEVEO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgIGNhc2UgXCJFR1JFU1NfTElNSVRfUkVBQ0hFRFwiOlxuICAgICAgICAgICAgcmV0dXJuIEVncmVzc1N0YXR1cy5FR1JFU1NfTElNSVRfUkVBQ0hFRDtcbiAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgY2FzZSBcIlVOUkVDT0dOSVpFRFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIEVncmVzc1N0YXR1cy5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy5lZ3Jlc3NTdGF0dXNGcm9tSlNPTiA9IGVncmVzc1N0YXR1c0Zyb21KU09OO1xuZnVuY3Rpb24gZWdyZXNzU3RhdHVzVG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgRWdyZXNzU3RhdHVzLkVHUkVTU19TVEFSVElORzpcbiAgICAgICAgICAgIHJldHVybiBcIkVHUkVTU19TVEFSVElOR1wiO1xuICAgICAgICBjYXNlIEVncmVzc1N0YXR1cy5FR1JFU1NfQUNUSVZFOlxuICAgICAgICAgICAgcmV0dXJuIFwiRUdSRVNTX0FDVElWRVwiO1xuICAgICAgICBjYXNlIEVncmVzc1N0YXR1cy5FR1JFU1NfRU5ESU5HOlxuICAgICAgICAgICAgcmV0dXJuIFwiRUdSRVNTX0VORElOR1wiO1xuICAgICAgICBjYXNlIEVncmVzc1N0YXR1cy5FR1JFU1NfQ09NUExFVEU6XG4gICAgICAgICAgICByZXR1cm4gXCJFR1JFU1NfQ09NUExFVEVcIjtcbiAgICAgICAgY2FzZSBFZ3Jlc3NTdGF0dXMuRUdSRVNTX0ZBSUxFRDpcbiAgICAgICAgICAgIHJldHVybiBcIkVHUkVTU19GQUlMRURcIjtcbiAgICAgICAgY2FzZSBFZ3Jlc3NTdGF0dXMuRUdSRVNTX0FCT1JURUQ6XG4gICAgICAgICAgICByZXR1cm4gXCJFR1JFU1NfQUJPUlRFRFwiO1xuICAgICAgICBjYXNlIEVncmVzc1N0YXR1cy5FR1JFU1NfTElNSVRfUkVBQ0hFRDpcbiAgICAgICAgICAgIHJldHVybiBcIkVHUkVTU19MSU1JVF9SRUFDSEVEXCI7XG4gICAgICAgIGNhc2UgRWdyZXNzU3RhdHVzLlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMuZWdyZXNzU3RhdHVzVG9KU09OID0gZWdyZXNzU3RhdHVzVG9KU09OO1xudmFyIFN0cmVhbUluZm9fU3RhdHVzO1xuKGZ1bmN0aW9uIChTdHJlYW1JbmZvX1N0YXR1cykge1xuICAgIFN0cmVhbUluZm9fU3RhdHVzW1N0cmVhbUluZm9fU3RhdHVzW1wiQUNUSVZFXCJdID0gMF0gPSBcIkFDVElWRVwiO1xuICAgIFN0cmVhbUluZm9fU3RhdHVzW1N0cmVhbUluZm9fU3RhdHVzW1wiRklOSVNIRURcIl0gPSAxXSA9IFwiRklOSVNIRURcIjtcbiAgICBTdHJlYW1JbmZvX1N0YXR1c1tTdHJlYW1JbmZvX1N0YXR1c1tcIkZBSUxFRFwiXSA9IDJdID0gXCJGQUlMRURcIjtcbiAgICBTdHJlYW1JbmZvX1N0YXR1c1tTdHJlYW1JbmZvX1N0YXR1c1tcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShTdHJlYW1JbmZvX1N0YXR1cyA9IGV4cG9ydHMuU3RyZWFtSW5mb19TdGF0dXMgfHwgKGV4cG9ydHMuU3RyZWFtSW5mb19TdGF0dXMgPSB7fSkpO1xuZnVuY3Rpb24gc3RyZWFtSW5mb19TdGF0dXNGcm9tSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgXCJBQ1RJVkVcIjpcbiAgICAgICAgICAgIHJldHVybiBTdHJlYW1JbmZvX1N0YXR1cy5BQ1RJVkU7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSBcIkZJTklTSEVEXCI6XG4gICAgICAgICAgICByZXR1cm4gU3RyZWFtSW5mb19TdGF0dXMuRklOSVNIRUQ7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSBcIkZBSUxFRFwiOlxuICAgICAgICAgICAgcmV0dXJuIFN0cmVhbUluZm9fU3RhdHVzLkZBSUxFRDtcbiAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgY2FzZSBcIlVOUkVDT0dOSVpFRFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFN0cmVhbUluZm9fU3RhdHVzLlVOUkVDT0dOSVpFRDtcbiAgICB9XG59XG5leHBvcnRzLnN0cmVhbUluZm9fU3RhdHVzRnJvbUpTT04gPSBzdHJlYW1JbmZvX1N0YXR1c0Zyb21KU09OO1xuZnVuY3Rpb24gc3RyZWFtSW5mb19TdGF0dXNUb0pTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSBTdHJlYW1JbmZvX1N0YXR1cy5BQ1RJVkU6XG4gICAgICAgICAgICByZXR1cm4gXCJBQ1RJVkVcIjtcbiAgICAgICAgY2FzZSBTdHJlYW1JbmZvX1N0YXR1cy5GSU5JU0hFRDpcbiAgICAgICAgICAgIHJldHVybiBcIkZJTklTSEVEXCI7XG4gICAgICAgIGNhc2UgU3RyZWFtSW5mb19TdGF0dXMuRkFJTEVEOlxuICAgICAgICAgICAgcmV0dXJuIFwiRkFJTEVEXCI7XG4gICAgICAgIGNhc2UgU3RyZWFtSW5mb19TdGF0dXMuVU5SRUNPR05JWkVEOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5SRUNPR05JWkVEXCI7XG4gICAgfVxufVxuZXhwb3J0cy5zdHJlYW1JbmZvX1N0YXR1c1RvSlNPTiA9IHN0cmVhbUluZm9fU3RhdHVzVG9KU09OO1xuZnVuY3Rpb24gY3JlYXRlQmFzZVJvb21Db21wb3NpdGVFZ3Jlc3NSZXF1ZXN0KCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJvb21OYW1lOiBcIlwiLFxuICAgICAgICBsYXlvdXQ6IFwiXCIsXG4gICAgICAgIGF1ZGlvT25seTogZmFsc2UsXG4gICAgICAgIHZpZGVvT25seTogZmFsc2UsXG4gICAgICAgIGN1c3RvbUJhc2VVcmw6IFwiXCIsXG4gICAgICAgIGZpbGU6IHVuZGVmaW5lZCxcbiAgICAgICAgc3RyZWFtOiB1bmRlZmluZWQsXG4gICAgICAgIHNlZ21lbnRzOiB1bmRlZmluZWQsXG4gICAgICAgIHByZXNldDogdW5kZWZpbmVkLFxuICAgICAgICBhZHZhbmNlZDogdW5kZWZpbmVkLFxuICAgICAgICBmaWxlT3V0cHV0czogW10sXG4gICAgICAgIHN0cmVhbU91dHB1dHM6IFtdLFxuICAgICAgICBzZWdtZW50T3V0cHV0czogW10sXG4gICAgICAgIGltYWdlT3V0cHV0czogW10sXG4gICAgfTtcbn1cbmV4cG9ydHMuUm9vbUNvbXBvc2l0ZUVncmVzc1JlcXVlc3QgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5yb29tTmFtZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uucm9vbU5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLnJvb21OYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5sYXlvdXQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmxheW91dCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UubGF5b3V0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5hdWRpb09ubHkgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjQpLmJvb2wobWVzc2FnZS5hdWRpb09ubHkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnZpZGVvT25seSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigzMikuYm9vbChtZXNzYWdlLnZpZGVvT25seSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuY3VzdG9tQmFzZVVybCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuY3VzdG9tQmFzZVVybCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0Mikuc3RyaW5nKG1lc3NhZ2UuY3VzdG9tQmFzZVVybCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmVuY29kZShtZXNzYWdlLmZpbGUsIHdyaXRlci51aW50MzIoNTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RyZWFtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuU3RyZWFtT3V0cHV0LmVuY29kZShtZXNzYWdlLnN0cmVhbSwgd3JpdGVyLnVpbnQzMig1OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zZWdtZW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZW5jb2RlKG1lc3NhZ2Uuc2VnbWVudHMsIHdyaXRlci51aW50MzIoODIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucHJlc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNjQpLmludDMyKG1lc3NhZ2UucHJlc2V0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5hZHZhbmNlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkVuY29kaW5nT3B0aW9ucy5lbmNvZGUobWVzc2FnZS5hZHZhbmNlZCwgd3JpdGVyLnVpbnQzMig3NCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5maWxlT3V0cHV0cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZmlsZU91dHB1dHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5maWxlT3V0cHV0cykge1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoOTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RyZWFtT3V0cHV0cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc3RyZWFtT3V0cHV0cy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLnN0cmVhbU91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLlN0cmVhbU91dHB1dC5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMig5OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zZWdtZW50T3V0cHV0cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5zZWdtZW50T3V0cHV0cykge1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxMDYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaW1hZ2VPdXRwdXRzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5pbWFnZU91dHB1dHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5pbWFnZU91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLkltYWdlT3V0cHV0LmVuY29kZSh2LCB3cml0ZXIudWludDMyKDExNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSb29tQ29tcG9zaXRlRWdyZXNzUmVxdWVzdCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbU5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXlvdXQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hdWRpb09ubHkgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudmlkZW9Pbmx5ID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmN1c3RvbUJhc2VVcmwgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5maWxlID0gZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RyZWFtID0gZXhwb3J0cy5TdHJlYW1PdXRwdXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZWdtZW50cyA9IGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucHJlc2V0ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hZHZhbmNlZCA9IGV4cG9ydHMuRW5jb2RpbmdPcHRpb25zLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZmlsZU91dHB1dHMucHVzaChleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0cmVhbU91dHB1dHMucHVzaChleHBvcnRzLlN0cmVhbU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZWdtZW50T3V0cHV0cy5wdXNoKGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbWFnZU91dHB1dHMucHVzaChleHBvcnRzLkltYWdlT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb29tTmFtZTogaXNTZXQob2JqZWN0LnJvb21OYW1lKSA/IFN0cmluZyhvYmplY3Qucm9vbU5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIGxheW91dDogaXNTZXQob2JqZWN0LmxheW91dCkgPyBTdHJpbmcob2JqZWN0LmxheW91dCkgOiBcIlwiLFxuICAgICAgICAgICAgYXVkaW9Pbmx5OiBpc1NldChvYmplY3QuYXVkaW9Pbmx5KSA/IEJvb2xlYW4ob2JqZWN0LmF1ZGlvT25seSkgOiBmYWxzZSxcbiAgICAgICAgICAgIHZpZGVvT25seTogaXNTZXQob2JqZWN0LnZpZGVvT25seSkgPyBCb29sZWFuKG9iamVjdC52aWRlb09ubHkpIDogZmFsc2UsXG4gICAgICAgICAgICBjdXN0b21CYXNlVXJsOiBpc1NldChvYmplY3QuY3VzdG9tQmFzZVVybCkgPyBTdHJpbmcob2JqZWN0LmN1c3RvbUJhc2VVcmwpIDogXCJcIixcbiAgICAgICAgICAgIGZpbGU6IGlzU2V0KG9iamVjdC5maWxlKSA/IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZnJvbUpTT04ob2JqZWN0LmZpbGUpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc3RyZWFtOiBpc1NldChvYmplY3Quc3RyZWFtKSA/IGV4cG9ydHMuU3RyZWFtT3V0cHV0LmZyb21KU09OKG9iamVjdC5zdHJlYW0pIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc2VnbWVudHM6IGlzU2V0KG9iamVjdC5zZWdtZW50cykgPyBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZnJvbUpTT04ob2JqZWN0LnNlZ21lbnRzKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHByZXNldDogaXNTZXQob2JqZWN0LnByZXNldCkgPyBlbmNvZGluZ09wdGlvbnNQcmVzZXRGcm9tSlNPTihvYmplY3QucHJlc2V0KSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGFkdmFuY2VkOiBpc1NldChvYmplY3QuYWR2YW5jZWQpID8gZXhwb3J0cy5FbmNvZGluZ09wdGlvbnMuZnJvbUpTT04ob2JqZWN0LmFkdmFuY2VkKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGZpbGVPdXRwdXRzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5maWxlT3V0cHV0cylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5maWxlT3V0cHV0cy5tYXAoKGUpID0+IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZnJvbUpTT04oZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgIHN0cmVhbU91dHB1dHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LnN0cmVhbU91dHB1dHMpXG4gICAgICAgICAgICAgICAgPyBvYmplY3Quc3RyZWFtT3V0cHV0cy5tYXAoKGUpID0+IGV4cG9ydHMuU3RyZWFtT3V0cHV0LmZyb21KU09OKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgICAgICBzZWdtZW50T3V0cHV0czogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3Quc2VnbWVudE91dHB1dHMpXG4gICAgICAgICAgICAgICAgPyBvYmplY3Quc2VnbWVudE91dHB1dHMubWFwKChlKSA9PiBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZnJvbUpTT04oZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgIGltYWdlT3V0cHV0czogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QuaW1hZ2VPdXRwdXRzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LmltYWdlT3V0cHV0cy5tYXAoKGUpID0+IGV4cG9ydHMuSW1hZ2VPdXRwdXQuZnJvbUpTT04oZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnJvb21OYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5yb29tTmFtZSA9IG1lc3NhZ2Uucm9vbU5hbWUpO1xuICAgICAgICBtZXNzYWdlLmxheW91dCAhPT0gdW5kZWZpbmVkICYmIChvYmoubGF5b3V0ID0gbWVzc2FnZS5sYXlvdXQpO1xuICAgICAgICBtZXNzYWdlLmF1ZGlvT25seSAhPT0gdW5kZWZpbmVkICYmIChvYmouYXVkaW9Pbmx5ID0gbWVzc2FnZS5hdWRpb09ubHkpO1xuICAgICAgICBtZXNzYWdlLnZpZGVvT25seSAhPT0gdW5kZWZpbmVkICYmIChvYmoudmlkZW9Pbmx5ID0gbWVzc2FnZS52aWRlb09ubHkpO1xuICAgICAgICBtZXNzYWdlLmN1c3RvbUJhc2VVcmwgIT09IHVuZGVmaW5lZCAmJiAob2JqLmN1c3RvbUJhc2VVcmwgPSBtZXNzYWdlLmN1c3RvbUJhc2VVcmwpO1xuICAgICAgICBtZXNzYWdlLmZpbGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmZpbGUgPSBtZXNzYWdlLmZpbGUgPyBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LnRvSlNPTihtZXNzYWdlLmZpbGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5zdHJlYW0gIT09IHVuZGVmaW5lZCAmJiAob2JqLnN0cmVhbSA9IG1lc3NhZ2Uuc3RyZWFtID8gZXhwb3J0cy5TdHJlYW1PdXRwdXQudG9KU09OKG1lc3NhZ2Uuc3RyZWFtKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2Uuc2VnbWVudHMgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5zZWdtZW50cyA9IG1lc3NhZ2Uuc2VnbWVudHMgPyBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQudG9KU09OKG1lc3NhZ2Uuc2VnbWVudHMpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5wcmVzZXQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5wcmVzZXQgPSBtZXNzYWdlLnByZXNldCAhPT0gdW5kZWZpbmVkID8gZW5jb2RpbmdPcHRpb25zUHJlc2V0VG9KU09OKG1lc3NhZ2UucHJlc2V0KSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UuYWR2YW5jZWQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5hZHZhbmNlZCA9IG1lc3NhZ2UuYWR2YW5jZWQgPyBleHBvcnRzLkVuY29kaW5nT3B0aW9ucy50b0pTT04obWVzc2FnZS5hZHZhbmNlZCkgOiB1bmRlZmluZWQpO1xuICAgICAgICBpZiAobWVzc2FnZS5maWxlT3V0cHV0cykge1xuICAgICAgICAgICAgb2JqLmZpbGVPdXRwdXRzID0gbWVzc2FnZS5maWxlT3V0cHV0cy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouZmlsZU91dHB1dHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zdHJlYW1PdXRwdXRzKSB7XG4gICAgICAgICAgICBvYmouc3RyZWFtT3V0cHV0cyA9IG1lc3NhZ2Uuc3RyZWFtT3V0cHV0cy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLlN0cmVhbU91dHB1dC50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLnN0cmVhbU91dHB1dHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zZWdtZW50T3V0cHV0cykge1xuICAgICAgICAgICAgb2JqLnNlZ21lbnRPdXRwdXRzID0gbWVzc2FnZS5zZWdtZW50T3V0cHV0cy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQudG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5zZWdtZW50T3V0cHV0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmltYWdlT3V0cHV0cykge1xuICAgICAgICAgICAgb2JqLmltYWdlT3V0cHV0cyA9IG1lc3NhZ2UuaW1hZ2VPdXRwdXRzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuSW1hZ2VPdXRwdXQudG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5pbWFnZU91dHB1dHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9qLCBfaztcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSb29tQ29tcG9zaXRlRWdyZXNzUmVxdWVzdCgpO1xuICAgICAgICBtZXNzYWdlLnJvb21OYW1lID0gKF9hID0gb2JqZWN0LnJvb21OYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmxheW91dCA9IChfYiA9IG9iamVjdC5sYXlvdXQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuYXVkaW9Pbmx5ID0gKF9jID0gb2JqZWN0LmF1ZGlvT25seSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2UudmlkZW9Pbmx5ID0gKF9kID0gb2JqZWN0LnZpZGVvT25seSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2UuY3VzdG9tQmFzZVVybCA9IChfZSA9IG9iamVjdC5jdXN0b21CYXNlVXJsKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmZpbGUgPSAob2JqZWN0LmZpbGUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZmlsZSAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC5mcm9tUGFydGlhbChvYmplY3QuZmlsZSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLnN0cmVhbSA9IChvYmplY3Quc3RyZWFtICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnN0cmVhbSAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5TdHJlYW1PdXRwdXQuZnJvbVBhcnRpYWwob2JqZWN0LnN0cmVhbSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLnNlZ21lbnRzID0gKG9iamVjdC5zZWdtZW50cyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5zZWdtZW50cyAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LmZyb21QYXJ0aWFsKG9iamVjdC5zZWdtZW50cylcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLnByZXNldCA9IChfZiA9IG9iamVjdC5wcmVzZXQpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5hZHZhbmNlZCA9IChvYmplY3QuYWR2YW5jZWQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYWR2YW5jZWQgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuRW5jb2RpbmdPcHRpb25zLmZyb21QYXJ0aWFsKG9iamVjdC5hZHZhbmNlZClcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmZpbGVPdXRwdXRzID0gKChfZyA9IG9iamVjdC5maWxlT3V0cHV0cykgPT09IG51bGwgfHwgX2cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nLm1hcCgoZSkgPT4gZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLnN0cmVhbU91dHB1dHMgPSAoKF9oID0gb2JqZWN0LnN0cmVhbU91dHB1dHMpID09PSBudWxsIHx8IF9oID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaC5tYXAoKGUpID0+IGV4cG9ydHMuU3RyZWFtT3V0cHV0LmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMgPSAoKF9qID0gb2JqZWN0LnNlZ21lbnRPdXRwdXRzKSA9PT0gbnVsbCB8fCBfaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2oubWFwKChlKSA9PiBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgbWVzc2FnZS5pbWFnZU91dHB1dHMgPSAoKF9rID0gb2JqZWN0LmltYWdlT3V0cHV0cykgPT09IG51bGwgfHwgX2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9rLm1hcCgoZSkgPT4gZXhwb3J0cy5JbWFnZU91dHB1dC5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VXZWJFZ3Jlc3NSZXF1ZXN0KCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHVybDogXCJcIixcbiAgICAgICAgYXVkaW9Pbmx5OiBmYWxzZSxcbiAgICAgICAgdmlkZW9Pbmx5OiBmYWxzZSxcbiAgICAgICAgYXdhaXRTdGFydFNpZ25hbDogZmFsc2UsXG4gICAgICAgIGZpbGU6IHVuZGVmaW5lZCxcbiAgICAgICAgc3RyZWFtOiB1bmRlZmluZWQsXG4gICAgICAgIHNlZ21lbnRzOiB1bmRlZmluZWQsXG4gICAgICAgIHByZXNldDogdW5kZWZpbmVkLFxuICAgICAgICBhZHZhbmNlZDogdW5kZWZpbmVkLFxuICAgICAgICBmaWxlT3V0cHV0czogW10sXG4gICAgICAgIHN0cmVhbU91dHB1dHM6IFtdLFxuICAgICAgICBzZWdtZW50T3V0cHV0czogW10sXG4gICAgICAgIGltYWdlT3V0cHV0czogW10sXG4gICAgfTtcbn1cbmV4cG9ydHMuV2ViRWdyZXNzUmVxdWVzdCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnVybCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UudXJsICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS51cmwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmF1ZGlvT25seSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNikuYm9vbChtZXNzYWdlLmF1ZGlvT25seSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudmlkZW9Pbmx5ID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI0KS5ib29sKG1lc3NhZ2UudmlkZW9Pbmx5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5hd2FpdFN0YXJ0U2lnbmFsID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDk2KS5ib29sKG1lc3NhZ2UuYXdhaXRTdGFydFNpZ25hbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmVuY29kZShtZXNzYWdlLmZpbGUsIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RyZWFtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuU3RyZWFtT3V0cHV0LmVuY29kZShtZXNzYWdlLnN0cmVhbSwgd3JpdGVyLnVpbnQzMig0MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zZWdtZW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZW5jb2RlKG1lc3NhZ2Uuc2VnbWVudHMsIHdyaXRlci51aW50MzIoNTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucHJlc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNTYpLmludDMyKG1lc3NhZ2UucHJlc2V0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5hZHZhbmNlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkVuY29kaW5nT3B0aW9ucy5lbmNvZGUobWVzc2FnZS5hZHZhbmNlZCwgd3JpdGVyLnVpbnQzMig2NikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5maWxlT3V0cHV0cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZmlsZU91dHB1dHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5maWxlT3V0cHV0cykge1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoNzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RyZWFtT3V0cHV0cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc3RyZWFtT3V0cHV0cy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLnN0cmVhbU91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLlN0cmVhbU91dHB1dC5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMig4MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zZWdtZW50T3V0cHV0cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5zZWdtZW50T3V0cHV0cykge1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMig5MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5pbWFnZU91dHB1dHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmltYWdlT3V0cHV0cy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLmltYWdlT3V0cHV0cykge1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuSW1hZ2VPdXRwdXQuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTA2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVdlYkVncmVzc1JlcXVlc3QoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVybCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmF1ZGlvT25seSA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52aWRlb09ubHkgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmF3YWl0U3RhcnRTaWduYWwgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZmlsZSA9IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0cmVhbSA9IGV4cG9ydHMuU3RyZWFtT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZWdtZW50cyA9IGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucHJlc2V0ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hZHZhbmNlZCA9IGV4cG9ydHMuRW5jb2RpbmdPcHRpb25zLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5maWxlT3V0cHV0cy5wdXNoKGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RyZWFtT3V0cHV0cy5wdXNoKGV4cG9ydHMuU3RyZWFtT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlZ21lbnRPdXRwdXRzLnB1c2goZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmltYWdlT3V0cHV0cy5wdXNoKGV4cG9ydHMuSW1hZ2VPdXRwdXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVybDogaXNTZXQob2JqZWN0LnVybCkgPyBTdHJpbmcob2JqZWN0LnVybCkgOiBcIlwiLFxuICAgICAgICAgICAgYXVkaW9Pbmx5OiBpc1NldChvYmplY3QuYXVkaW9Pbmx5KSA/IEJvb2xlYW4ob2JqZWN0LmF1ZGlvT25seSkgOiBmYWxzZSxcbiAgICAgICAgICAgIHZpZGVvT25seTogaXNTZXQob2JqZWN0LnZpZGVvT25seSkgPyBCb29sZWFuKG9iamVjdC52aWRlb09ubHkpIDogZmFsc2UsXG4gICAgICAgICAgICBhd2FpdFN0YXJ0U2lnbmFsOiBpc1NldChvYmplY3QuYXdhaXRTdGFydFNpZ25hbCkgPyBCb29sZWFuKG9iamVjdC5hd2FpdFN0YXJ0U2lnbmFsKSA6IGZhbHNlLFxuICAgICAgICAgICAgZmlsZTogaXNTZXQob2JqZWN0LmZpbGUpID8gZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC5mcm9tSlNPTihvYmplY3QuZmlsZSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzdHJlYW06IGlzU2V0KG9iamVjdC5zdHJlYW0pID8gZXhwb3J0cy5TdHJlYW1PdXRwdXQuZnJvbUpTT04ob2JqZWN0LnN0cmVhbSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzZWdtZW50czogaXNTZXQob2JqZWN0LnNlZ21lbnRzKSA/IGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5mcm9tSlNPTihvYmplY3Quc2VnbWVudHMpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcHJlc2V0OiBpc1NldChvYmplY3QucHJlc2V0KSA/IGVuY29kaW5nT3B0aW9uc1ByZXNldEZyb21KU09OKG9iamVjdC5wcmVzZXQpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgYWR2YW5jZWQ6IGlzU2V0KG9iamVjdC5hZHZhbmNlZCkgPyBleHBvcnRzLkVuY29kaW5nT3B0aW9ucy5mcm9tSlNPTihvYmplY3QuYWR2YW5jZWQpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZmlsZU91dHB1dHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmZpbGVPdXRwdXRzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LmZpbGVPdXRwdXRzLm1hcCgoZSkgPT4gZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC5mcm9tSlNPTihlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgc3RyZWFtT3V0cHV0czogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3Quc3RyZWFtT3V0cHV0cylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5zdHJlYW1PdXRwdXRzLm1hcCgoZSkgPT4gZXhwb3J0cy5TdHJlYW1PdXRwdXQuZnJvbUpTT04oZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgIHNlZ21lbnRPdXRwdXRzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5zZWdtZW50T3V0cHV0cylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5zZWdtZW50T3V0cHV0cy5tYXAoKGUpID0+IGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5mcm9tSlNPTihlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgaW1hZ2VPdXRwdXRzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5pbWFnZU91dHB1dHMpXG4gICAgICAgICAgICAgICAgPyBvYmplY3QuaW1hZ2VPdXRwdXRzLm1hcCgoZSkgPT4gZXhwb3J0cy5JbWFnZU91dHB1dC5mcm9tSlNPTihlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UudXJsICE9PSB1bmRlZmluZWQgJiYgKG9iai51cmwgPSBtZXNzYWdlLnVybCk7XG4gICAgICAgIG1lc3NhZ2UuYXVkaW9Pbmx5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5hdWRpb09ubHkgPSBtZXNzYWdlLmF1ZGlvT25seSk7XG4gICAgICAgIG1lc3NhZ2UudmlkZW9Pbmx5ICE9PSB1bmRlZmluZWQgJiYgKG9iai52aWRlb09ubHkgPSBtZXNzYWdlLnZpZGVvT25seSk7XG4gICAgICAgIG1lc3NhZ2UuYXdhaXRTdGFydFNpZ25hbCAhPT0gdW5kZWZpbmVkICYmIChvYmouYXdhaXRTdGFydFNpZ25hbCA9IG1lc3NhZ2UuYXdhaXRTdGFydFNpZ25hbCk7XG4gICAgICAgIG1lc3NhZ2UuZmlsZSAhPT0gdW5kZWZpbmVkICYmIChvYmouZmlsZSA9IG1lc3NhZ2UuZmlsZSA/IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQudG9KU09OKG1lc3NhZ2UuZmlsZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLnN0cmVhbSAhPT0gdW5kZWZpbmVkICYmIChvYmouc3RyZWFtID0gbWVzc2FnZS5zdHJlYW0gPyBleHBvcnRzLlN0cmVhbU91dHB1dC50b0pTT04obWVzc2FnZS5zdHJlYW0pIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5zZWdtZW50cyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLnNlZ21lbnRzID0gbWVzc2FnZS5zZWdtZW50cyA/IGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC50b0pTT04obWVzc2FnZS5zZWdtZW50cykgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLnByZXNldCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLnByZXNldCA9IG1lc3NhZ2UucHJlc2V0ICE9PSB1bmRlZmluZWQgPyBlbmNvZGluZ09wdGlvbnNQcmVzZXRUb0pTT04obWVzc2FnZS5wcmVzZXQpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5hZHZhbmNlZCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLmFkdmFuY2VkID0gbWVzc2FnZS5hZHZhbmNlZCA/IGV4cG9ydHMuRW5jb2RpbmdPcHRpb25zLnRvSlNPTihtZXNzYWdlLmFkdmFuY2VkKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmZpbGVPdXRwdXRzKSB7XG4gICAgICAgICAgICBvYmouZmlsZU91dHB1dHMgPSBtZXNzYWdlLmZpbGVPdXRwdXRzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQudG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5maWxlT3V0cHV0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0cmVhbU91dHB1dHMpIHtcbiAgICAgICAgICAgIG9iai5zdHJlYW1PdXRwdXRzID0gbWVzc2FnZS5zdHJlYW1PdXRwdXRzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuU3RyZWFtT3V0cHV0LnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouc3RyZWFtT3V0cHV0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnNlZ21lbnRPdXRwdXRzKSB7XG4gICAgICAgICAgICBvYmouc2VnbWVudE91dHB1dHMgPSBtZXNzYWdlLnNlZ21lbnRPdXRwdXRzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLnNlZ21lbnRPdXRwdXRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaW1hZ2VPdXRwdXRzKSB7XG4gICAgICAgICAgICBvYmouaW1hZ2VPdXRwdXRzID0gbWVzc2FnZS5pbWFnZU91dHB1dHMubWFwKChlKSA9PiBlID8gZXhwb3J0cy5JbWFnZU91dHB1dC50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLmltYWdlT3V0cHV0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2o7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlV2ViRWdyZXNzUmVxdWVzdCgpO1xuICAgICAgICBtZXNzYWdlLnVybCA9IChfYSA9IG9iamVjdC51cmwpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuYXVkaW9Pbmx5ID0gKF9iID0gb2JqZWN0LmF1ZGlvT25seSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2UudmlkZW9Pbmx5ID0gKF9jID0gb2JqZWN0LnZpZGVvT25seSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2UuYXdhaXRTdGFydFNpZ25hbCA9IChfZCA9IG9iamVjdC5hd2FpdFN0YXJ0U2lnbmFsKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBmYWxzZTtcbiAgICAgICAgbWVzc2FnZS5maWxlID0gKG9iamVjdC5maWxlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmZpbGUgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZnJvbVBhcnRpYWwob2JqZWN0LmZpbGUpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5zdHJlYW0gPSAob2JqZWN0LnN0cmVhbSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5zdHJlYW0gIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuU3RyZWFtT3V0cHV0LmZyb21QYXJ0aWFsKG9iamVjdC5zdHJlYW0pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5zZWdtZW50cyA9IChvYmplY3Quc2VnbWVudHMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc2VnbWVudHMgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5mcm9tUGFydGlhbChvYmplY3Quc2VnbWVudHMpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5wcmVzZXQgPSAoX2UgPSBvYmplY3QucHJlc2V0KSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuYWR2YW5jZWQgPSAob2JqZWN0LmFkdmFuY2VkICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmFkdmFuY2VkICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkVuY29kaW5nT3B0aW9ucy5mcm9tUGFydGlhbChvYmplY3QuYWR2YW5jZWQpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5maWxlT3V0cHV0cyA9ICgoX2YgPSBvYmplY3QuZmlsZU91dHB1dHMpID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZi5tYXAoKGUpID0+IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgbWVzc2FnZS5zdHJlYW1PdXRwdXRzID0gKChfZyA9IG9iamVjdC5zdHJlYW1PdXRwdXRzKSA9PT0gbnVsbCB8fCBfZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2cubWFwKChlKSA9PiBleHBvcnRzLlN0cmVhbU91dHB1dC5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLnNlZ21lbnRPdXRwdXRzID0gKChfaCA9IG9iamVjdC5zZWdtZW50T3V0cHV0cykgPT09IG51bGwgfHwgX2ggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9oLm1hcCgoZSkgPT4gZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2UuaW1hZ2VPdXRwdXRzID0gKChfaiA9IG9iamVjdC5pbWFnZU91dHB1dHMpID09PSBudWxsIHx8IF9qID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfai5tYXAoKGUpID0+IGV4cG9ydHMuSW1hZ2VPdXRwdXQuZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlUGFydGljaXBhbnRFZ3Jlc3NSZXF1ZXN0KCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJvb21OYW1lOiBcIlwiLFxuICAgICAgICBpZGVudGl0eTogXCJcIixcbiAgICAgICAgc2NyZWVuU2hhcmU6IGZhbHNlLFxuICAgICAgICBwcmVzZXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgYWR2YW5jZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgZmlsZU91dHB1dHM6IFtdLFxuICAgICAgICBzdHJlYW1PdXRwdXRzOiBbXSxcbiAgICAgICAgc2VnbWVudE91dHB1dHM6IFtdLFxuICAgICAgICBpbWFnZU91dHB1dHM6IFtdLFxuICAgIH07XG59XG5leHBvcnRzLlBhcnRpY2lwYW50RWdyZXNzUmVxdWVzdCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb21OYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yb29tTmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2Uucm9vbU5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmlkZW50aXR5ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5pZGVudGl0eSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UuaWRlbnRpdHkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnNjcmVlblNoYXJlID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI0KS5ib29sKG1lc3NhZ2Uuc2NyZWVuU2hhcmUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnByZXNldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDMyKS5pbnQzMihtZXNzYWdlLnByZXNldCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYWR2YW5jZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5FbmNvZGluZ09wdGlvbnMuZW5jb2RlKG1lc3NhZ2UuYWR2YW5jZWQsIHdyaXRlci51aW50MzIoNDIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZU91dHB1dHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmZpbGVPdXRwdXRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UuZmlsZU91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmVuY29kZSh2LCB3cml0ZXIudWludDMyKDUwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0cmVhbU91dHB1dHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnN0cmVhbU91dHB1dHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5zdHJlYW1PdXRwdXRzKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5TdHJlYW1PdXRwdXQuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoNTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnNlZ21lbnRPdXRwdXRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoNjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaW1hZ2VPdXRwdXRzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5pbWFnZU91dHB1dHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5pbWFnZU91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLkltYWdlT3V0cHV0LmVuY29kZSh2LCB3cml0ZXIudWludDMyKDc0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVBhcnRpY2lwYW50RWdyZXNzUmVxdWVzdCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbU5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pZGVudGl0eSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNjcmVlblNoYXJlID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnByZXNldCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWR2YW5jZWQgPSBleHBvcnRzLkVuY29kaW5nT3B0aW9ucy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZmlsZU91dHB1dHMucHVzaChleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RyZWFtT3V0cHV0cy5wdXNoKGV4cG9ydHMuU3RyZWFtT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMucHVzaChleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbWFnZU91dHB1dHMucHVzaChleHBvcnRzLkltYWdlT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb29tTmFtZTogaXNTZXQob2JqZWN0LnJvb21OYW1lKSA/IFN0cmluZyhvYmplY3Qucm9vbU5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIGlkZW50aXR5OiBpc1NldChvYmplY3QuaWRlbnRpdHkpID8gU3RyaW5nKG9iamVjdC5pZGVudGl0eSkgOiBcIlwiLFxuICAgICAgICAgICAgc2NyZWVuU2hhcmU6IGlzU2V0KG9iamVjdC5zY3JlZW5TaGFyZSkgPyBCb29sZWFuKG9iamVjdC5zY3JlZW5TaGFyZSkgOiBmYWxzZSxcbiAgICAgICAgICAgIHByZXNldDogaXNTZXQob2JqZWN0LnByZXNldCkgPyBlbmNvZGluZ09wdGlvbnNQcmVzZXRGcm9tSlNPTihvYmplY3QucHJlc2V0KSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGFkdmFuY2VkOiBpc1NldChvYmplY3QuYWR2YW5jZWQpID8gZXhwb3J0cy5FbmNvZGluZ09wdGlvbnMuZnJvbUpTT04ob2JqZWN0LmFkdmFuY2VkKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGZpbGVPdXRwdXRzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5maWxlT3V0cHV0cylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5maWxlT3V0cHV0cy5tYXAoKGUpID0+IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZnJvbUpTT04oZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgIHN0cmVhbU91dHB1dHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LnN0cmVhbU91dHB1dHMpXG4gICAgICAgICAgICAgICAgPyBvYmplY3Quc3RyZWFtT3V0cHV0cy5tYXAoKGUpID0+IGV4cG9ydHMuU3RyZWFtT3V0cHV0LmZyb21KU09OKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgICAgICBzZWdtZW50T3V0cHV0czogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3Quc2VnbWVudE91dHB1dHMpXG4gICAgICAgICAgICAgICAgPyBvYmplY3Quc2VnbWVudE91dHB1dHMubWFwKChlKSA9PiBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZnJvbUpTT04oZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgIGltYWdlT3V0cHV0czogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QuaW1hZ2VPdXRwdXRzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LmltYWdlT3V0cHV0cy5tYXAoKGUpID0+IGV4cG9ydHMuSW1hZ2VPdXRwdXQuZnJvbUpTT04oZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnJvb21OYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5yb29tTmFtZSA9IG1lc3NhZ2Uucm9vbU5hbWUpO1xuICAgICAgICBtZXNzYWdlLmlkZW50aXR5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5pZGVudGl0eSA9IG1lc3NhZ2UuaWRlbnRpdHkpO1xuICAgICAgICBtZXNzYWdlLnNjcmVlblNoYXJlICE9PSB1bmRlZmluZWQgJiYgKG9iai5zY3JlZW5TaGFyZSA9IG1lc3NhZ2Uuc2NyZWVuU2hhcmUpO1xuICAgICAgICBtZXNzYWdlLnByZXNldCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLnByZXNldCA9IG1lc3NhZ2UucHJlc2V0ICE9PSB1bmRlZmluZWQgPyBlbmNvZGluZ09wdGlvbnNQcmVzZXRUb0pTT04obWVzc2FnZS5wcmVzZXQpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5hZHZhbmNlZCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLmFkdmFuY2VkID0gbWVzc2FnZS5hZHZhbmNlZCA/IGV4cG9ydHMuRW5jb2RpbmdPcHRpb25zLnRvSlNPTihtZXNzYWdlLmFkdmFuY2VkKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmZpbGVPdXRwdXRzKSB7XG4gICAgICAgICAgICBvYmouZmlsZU91dHB1dHMgPSBtZXNzYWdlLmZpbGVPdXRwdXRzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQudG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5maWxlT3V0cHV0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0cmVhbU91dHB1dHMpIHtcbiAgICAgICAgICAgIG9iai5zdHJlYW1PdXRwdXRzID0gbWVzc2FnZS5zdHJlYW1PdXRwdXRzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuU3RyZWFtT3V0cHV0LnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouc3RyZWFtT3V0cHV0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnNlZ21lbnRPdXRwdXRzKSB7XG4gICAgICAgICAgICBvYmouc2VnbWVudE91dHB1dHMgPSBtZXNzYWdlLnNlZ21lbnRPdXRwdXRzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLnNlZ21lbnRPdXRwdXRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaW1hZ2VPdXRwdXRzKSB7XG4gICAgICAgICAgICBvYmouaW1hZ2VPdXRwdXRzID0gbWVzc2FnZS5pbWFnZU91dHB1dHMubWFwKChlKSA9PiBlID8gZXhwb3J0cy5JbWFnZU91dHB1dC50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLmltYWdlT3V0cHV0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VQYXJ0aWNpcGFudEVncmVzc1JlcXVlc3QoKTtcbiAgICAgICAgbWVzc2FnZS5yb29tTmFtZSA9IChfYSA9IG9iamVjdC5yb29tTmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5pZGVudGl0eSA9IChfYiA9IG9iamVjdC5pZGVudGl0eSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5zY3JlZW5TaGFyZSA9IChfYyA9IG9iamVjdC5zY3JlZW5TaGFyZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2UucHJlc2V0ID0gKF9kID0gb2JqZWN0LnByZXNldCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmFkdmFuY2VkID0gKG9iamVjdC5hZHZhbmNlZCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hZHZhbmNlZCAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5FbmNvZGluZ09wdGlvbnMuZnJvbVBhcnRpYWwob2JqZWN0LmFkdmFuY2VkKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuZmlsZU91dHB1dHMgPSAoKF9lID0gb2JqZWN0LmZpbGVPdXRwdXRzKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UubWFwKChlKSA9PiBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2Uuc3RyZWFtT3V0cHV0cyA9ICgoX2YgPSBvYmplY3Quc3RyZWFtT3V0cHV0cykgPT09IG51bGwgfHwgX2YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mLm1hcCgoZSkgPT4gZXhwb3J0cy5TdHJlYW1PdXRwdXQuZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgbWVzc2FnZS5zZWdtZW50T3V0cHV0cyA9ICgoX2cgPSBvYmplY3Quc2VnbWVudE91dHB1dHMpID09PSBudWxsIHx8IF9nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZy5tYXAoKGUpID0+IGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLmltYWdlT3V0cHV0cyA9ICgoX2ggPSBvYmplY3QuaW1hZ2VPdXRwdXRzKSA9PT0gbnVsbCB8fCBfaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2gubWFwKChlKSA9PiBleHBvcnRzLkltYWdlT3V0cHV0LmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVRyYWNrQ29tcG9zaXRlRWdyZXNzUmVxdWVzdCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByb29tTmFtZTogXCJcIixcbiAgICAgICAgYXVkaW9UcmFja0lkOiBcIlwiLFxuICAgICAgICB2aWRlb1RyYWNrSWQ6IFwiXCIsXG4gICAgICAgIGZpbGU6IHVuZGVmaW5lZCxcbiAgICAgICAgc3RyZWFtOiB1bmRlZmluZWQsXG4gICAgICAgIHNlZ21lbnRzOiB1bmRlZmluZWQsXG4gICAgICAgIHByZXNldDogdW5kZWZpbmVkLFxuICAgICAgICBhZHZhbmNlZDogdW5kZWZpbmVkLFxuICAgICAgICBmaWxlT3V0cHV0czogW10sXG4gICAgICAgIHN0cmVhbU91dHB1dHM6IFtdLFxuICAgICAgICBzZWdtZW50T3V0cHV0czogW10sXG4gICAgICAgIGltYWdlT3V0cHV0czogW10sXG4gICAgfTtcbn1cbmV4cG9ydHMuVHJhY2tDb21wb3NpdGVFZ3Jlc3NSZXF1ZXN0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vbU5hbWUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnJvb21OYW1lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5yb29tTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYXVkaW9UcmFja0lkICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5hdWRpb1RyYWNrSWQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLmF1ZGlvVHJhY2tJZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudmlkZW9UcmFja0lkICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS52aWRlb1RyYWNrSWQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLnZpZGVvVHJhY2tJZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmVuY29kZShtZXNzYWdlLmZpbGUsIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RyZWFtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuU3RyZWFtT3V0cHV0LmVuY29kZShtZXNzYWdlLnN0cmVhbSwgd3JpdGVyLnVpbnQzMig0MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zZWdtZW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZW5jb2RlKG1lc3NhZ2Uuc2VnbWVudHMsIHdyaXRlci51aW50MzIoNjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucHJlc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDgpLmludDMyKG1lc3NhZ2UucHJlc2V0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5hZHZhbmNlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkVuY29kaW5nT3B0aW9ucy5lbmNvZGUobWVzc2FnZS5hZHZhbmNlZCwgd3JpdGVyLnVpbnQzMig1OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5maWxlT3V0cHV0cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZmlsZU91dHB1dHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5maWxlT3V0cHV0cykge1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoOTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RyZWFtT3V0cHV0cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc3RyZWFtT3V0cHV0cy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLnN0cmVhbU91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLlN0cmVhbU91dHB1dC5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMig5OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zZWdtZW50T3V0cHV0cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5zZWdtZW50T3V0cHV0cykge1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxMDYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaW1hZ2VPdXRwdXRzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5pbWFnZU91dHB1dHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5pbWFnZU91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLkltYWdlT3V0cHV0LmVuY29kZSh2LCB3cml0ZXIudWludDMyKDExNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUcmFja0NvbXBvc2l0ZUVncmVzc1JlcXVlc3QoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvb21OYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYXVkaW9UcmFja0lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudmlkZW9UcmFja0lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZmlsZSA9IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0cmVhbSA9IGV4cG9ydHMuU3RyZWFtT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZWdtZW50cyA9IGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucHJlc2V0ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hZHZhbmNlZCA9IGV4cG9ydHMuRW5jb2RpbmdPcHRpb25zLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZmlsZU91dHB1dHMucHVzaChleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0cmVhbU91dHB1dHMucHVzaChleHBvcnRzLlN0cmVhbU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZWdtZW50T3V0cHV0cy5wdXNoKGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbWFnZU91dHB1dHMucHVzaChleHBvcnRzLkltYWdlT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb29tTmFtZTogaXNTZXQob2JqZWN0LnJvb21OYW1lKSA/IFN0cmluZyhvYmplY3Qucm9vbU5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIGF1ZGlvVHJhY2tJZDogaXNTZXQob2JqZWN0LmF1ZGlvVHJhY2tJZCkgPyBTdHJpbmcob2JqZWN0LmF1ZGlvVHJhY2tJZCkgOiBcIlwiLFxuICAgICAgICAgICAgdmlkZW9UcmFja0lkOiBpc1NldChvYmplY3QudmlkZW9UcmFja0lkKSA/IFN0cmluZyhvYmplY3QudmlkZW9UcmFja0lkKSA6IFwiXCIsXG4gICAgICAgICAgICBmaWxlOiBpc1NldChvYmplY3QuZmlsZSkgPyBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmZyb21KU09OKG9iamVjdC5maWxlKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHN0cmVhbTogaXNTZXQob2JqZWN0LnN0cmVhbSkgPyBleHBvcnRzLlN0cmVhbU91dHB1dC5mcm9tSlNPTihvYmplY3Quc3RyZWFtKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHNlZ21lbnRzOiBpc1NldChvYmplY3Quc2VnbWVudHMpID8gZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LmZyb21KU09OKG9iamVjdC5zZWdtZW50cykgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBwcmVzZXQ6IGlzU2V0KG9iamVjdC5wcmVzZXQpID8gZW5jb2RpbmdPcHRpb25zUHJlc2V0RnJvbUpTT04ob2JqZWN0LnByZXNldCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBhZHZhbmNlZDogaXNTZXQob2JqZWN0LmFkdmFuY2VkKSA/IGV4cG9ydHMuRW5jb2RpbmdPcHRpb25zLmZyb21KU09OKG9iamVjdC5hZHZhbmNlZCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBmaWxlT3V0cHV0czogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QuZmlsZU91dHB1dHMpXG4gICAgICAgICAgICAgICAgPyBvYmplY3QuZmlsZU91dHB1dHMubWFwKChlKSA9PiBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmZyb21KU09OKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgICAgICBzdHJlYW1PdXRwdXRzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5zdHJlYW1PdXRwdXRzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LnN0cmVhbU91dHB1dHMubWFwKChlKSA9PiBleHBvcnRzLlN0cmVhbU91dHB1dC5mcm9tSlNPTihlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgc2VnbWVudE91dHB1dHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LnNlZ21lbnRPdXRwdXRzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LnNlZ21lbnRPdXRwdXRzLm1hcCgoZSkgPT4gZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LmZyb21KU09OKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgICAgICBpbWFnZU91dHB1dHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmltYWdlT3V0cHV0cylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5pbWFnZU91dHB1dHMubWFwKChlKSA9PiBleHBvcnRzLkltYWdlT3V0cHV0LmZyb21KU09OKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5yb29tTmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmoucm9vbU5hbWUgPSBtZXNzYWdlLnJvb21OYW1lKTtcbiAgICAgICAgbWVzc2FnZS5hdWRpb1RyYWNrSWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmF1ZGlvVHJhY2tJZCA9IG1lc3NhZ2UuYXVkaW9UcmFja0lkKTtcbiAgICAgICAgbWVzc2FnZS52aWRlb1RyYWNrSWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnZpZGVvVHJhY2tJZCA9IG1lc3NhZ2UudmlkZW9UcmFja0lkKTtcbiAgICAgICAgbWVzc2FnZS5maWxlICE9PSB1bmRlZmluZWQgJiYgKG9iai5maWxlID0gbWVzc2FnZS5maWxlID8gZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC50b0pTT04obWVzc2FnZS5maWxlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2Uuc3RyZWFtICE9PSB1bmRlZmluZWQgJiYgKG9iai5zdHJlYW0gPSBtZXNzYWdlLnN0cmVhbSA/IGV4cG9ydHMuU3RyZWFtT3V0cHV0LnRvSlNPTihtZXNzYWdlLnN0cmVhbSkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLnNlZ21lbnRzICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmouc2VnbWVudHMgPSBtZXNzYWdlLnNlZ21lbnRzID8gZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LnRvSlNPTihtZXNzYWdlLnNlZ21lbnRzKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UucHJlc2V0ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmoucHJlc2V0ID0gbWVzc2FnZS5wcmVzZXQgIT09IHVuZGVmaW5lZCA/IGVuY29kaW5nT3B0aW9uc1ByZXNldFRvSlNPTihtZXNzYWdlLnByZXNldCkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLmFkdmFuY2VkICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmouYWR2YW5jZWQgPSBtZXNzYWdlLmFkdmFuY2VkID8gZXhwb3J0cy5FbmNvZGluZ09wdGlvbnMudG9KU09OKG1lc3NhZ2UuYWR2YW5jZWQpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZU91dHB1dHMpIHtcbiAgICAgICAgICAgIG9iai5maWxlT3V0cHV0cyA9IG1lc3NhZ2UuZmlsZU91dHB1dHMubWFwKChlKSA9PiBlID8gZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLmZpbGVPdXRwdXRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RyZWFtT3V0cHV0cykge1xuICAgICAgICAgICAgb2JqLnN0cmVhbU91dHB1dHMgPSBtZXNzYWdlLnN0cmVhbU91dHB1dHMubWFwKChlKSA9PiBlID8gZXhwb3J0cy5TdHJlYW1PdXRwdXQudG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5zdHJlYW1PdXRwdXRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMpIHtcbiAgICAgICAgICAgIG9iai5zZWdtZW50T3V0cHV0cyA9IG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMubWFwKChlKSA9PiBlID8gZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouc2VnbWVudE91dHB1dHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5pbWFnZU91dHB1dHMpIHtcbiAgICAgICAgICAgIG9iai5pbWFnZU91dHB1dHMgPSBtZXNzYWdlLmltYWdlT3V0cHV0cy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLkltYWdlT3V0cHV0LnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouaW1hZ2VPdXRwdXRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRyYWNrQ29tcG9zaXRlRWdyZXNzUmVxdWVzdCgpO1xuICAgICAgICBtZXNzYWdlLnJvb21OYW1lID0gKF9hID0gb2JqZWN0LnJvb21OYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmF1ZGlvVHJhY2tJZCA9IChfYiA9IG9iamVjdC5hdWRpb1RyYWNrSWQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UudmlkZW9UcmFja0lkID0gKF9jID0gb2JqZWN0LnZpZGVvVHJhY2tJZCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5maWxlID0gKG9iamVjdC5maWxlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmZpbGUgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZnJvbVBhcnRpYWwob2JqZWN0LmZpbGUpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5zdHJlYW0gPSAob2JqZWN0LnN0cmVhbSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5zdHJlYW0gIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuU3RyZWFtT3V0cHV0LmZyb21QYXJ0aWFsKG9iamVjdC5zdHJlYW0pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5zZWdtZW50cyA9IChvYmplY3Quc2VnbWVudHMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc2VnbWVudHMgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5mcm9tUGFydGlhbChvYmplY3Quc2VnbWVudHMpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5wcmVzZXQgPSAoX2QgPSBvYmplY3QucHJlc2V0KSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuYWR2YW5jZWQgPSAob2JqZWN0LmFkdmFuY2VkICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmFkdmFuY2VkICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkVuY29kaW5nT3B0aW9ucy5mcm9tUGFydGlhbChvYmplY3QuYWR2YW5jZWQpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5maWxlT3V0cHV0cyA9ICgoX2UgPSBvYmplY3QuZmlsZU91dHB1dHMpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5tYXAoKGUpID0+IGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgbWVzc2FnZS5zdHJlYW1PdXRwdXRzID0gKChfZiA9IG9iamVjdC5zdHJlYW1PdXRwdXRzKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2YubWFwKChlKSA9PiBleHBvcnRzLlN0cmVhbU91dHB1dC5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLnNlZ21lbnRPdXRwdXRzID0gKChfZyA9IG9iamVjdC5zZWdtZW50T3V0cHV0cykgPT09IG51bGwgfHwgX2cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nLm1hcCgoZSkgPT4gZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2UuaW1hZ2VPdXRwdXRzID0gKChfaCA9IG9iamVjdC5pbWFnZU91dHB1dHMpID09PSBudWxsIHx8IF9oID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaC5tYXAoKGUpID0+IGV4cG9ydHMuSW1hZ2VPdXRwdXQuZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVHJhY2tFZ3Jlc3NSZXF1ZXN0KCkge1xuICAgIHJldHVybiB7IHJvb21OYW1lOiBcIlwiLCB0cmFja0lkOiBcIlwiLCBmaWxlOiB1bmRlZmluZWQsIHdlYnNvY2tldFVybDogdW5kZWZpbmVkIH07XG59XG5leHBvcnRzLlRyYWNrRWdyZXNzUmVxdWVzdCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb21OYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yb29tTmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2Uucm9vbU5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnRyYWNrSWQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnRyYWNrSWQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLnRyYWNrSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZpbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5EaXJlY3RGaWxlT3V0cHV0LmVuY29kZShtZXNzYWdlLmZpbGUsIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uud2Vic29ja2V0VXJsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzQpLnN0cmluZyhtZXNzYWdlLndlYnNvY2tldFVybCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVHJhY2tFZ3Jlc3NSZXF1ZXN0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb29tTmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRyYWNrSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5maWxlID0gZXhwb3J0cy5EaXJlY3RGaWxlT3V0cHV0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS53ZWJzb2NrZXRVcmwgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJvb21OYW1lOiBpc1NldChvYmplY3Qucm9vbU5hbWUpID8gU3RyaW5nKG9iamVjdC5yb29tTmFtZSkgOiBcIlwiLFxuICAgICAgICAgICAgdHJhY2tJZDogaXNTZXQob2JqZWN0LnRyYWNrSWQpID8gU3RyaW5nKG9iamVjdC50cmFja0lkKSA6IFwiXCIsXG4gICAgICAgICAgICBmaWxlOiBpc1NldChvYmplY3QuZmlsZSkgPyBleHBvcnRzLkRpcmVjdEZpbGVPdXRwdXQuZnJvbUpTT04ob2JqZWN0LmZpbGUpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgd2Vic29ja2V0VXJsOiBpc1NldChvYmplY3Qud2Vic29ja2V0VXJsKSA/IFN0cmluZyhvYmplY3Qud2Vic29ja2V0VXJsKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnJvb21OYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5yb29tTmFtZSA9IG1lc3NhZ2Uucm9vbU5hbWUpO1xuICAgICAgICBtZXNzYWdlLnRyYWNrSWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnRyYWNrSWQgPSBtZXNzYWdlLnRyYWNrSWQpO1xuICAgICAgICBtZXNzYWdlLmZpbGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmZpbGUgPSBtZXNzYWdlLmZpbGUgPyBleHBvcnRzLkRpcmVjdEZpbGVPdXRwdXQudG9KU09OKG1lc3NhZ2UuZmlsZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLndlYnNvY2tldFVybCAhPT0gdW5kZWZpbmVkICYmIChvYmoud2Vic29ja2V0VXJsID0gbWVzc2FnZS53ZWJzb2NrZXRVcmwpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVRyYWNrRWdyZXNzUmVxdWVzdCgpO1xuICAgICAgICBtZXNzYWdlLnJvb21OYW1lID0gKF9hID0gb2JqZWN0LnJvb21OYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnRyYWNrSWQgPSAoX2IgPSBvYmplY3QudHJhY2tJZCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5maWxlID0gKG9iamVjdC5maWxlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmZpbGUgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuRGlyZWN0RmlsZU91dHB1dC5mcm9tUGFydGlhbChvYmplY3QuZmlsZSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLndlYnNvY2tldFVybCA9IChfYyA9IG9iamVjdC53ZWJzb2NrZXRVcmwpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlRW5jb2RlZEZpbGVPdXRwdXQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZmlsZVR5cGU6IDAsXG4gICAgICAgIGZpbGVwYXRoOiBcIlwiLFxuICAgICAgICBkaXNhYmxlTWFuaWZlc3Q6IGZhbHNlLFxuICAgICAgICBzMzogdW5kZWZpbmVkLFxuICAgICAgICBnY3A6IHVuZGVmaW5lZCxcbiAgICAgICAgYXp1cmU6IHVuZGVmaW5lZCxcbiAgICAgICAgYWxpT1NTOiB1bmRlZmluZWQsXG4gICAgfTtcbn1cbmV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5maWxlVHlwZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZmlsZVR5cGUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoOCkuaW50MzIobWVzc2FnZS5maWxlVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZXBhdGggIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmZpbGVwYXRoICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5maWxlcGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQ4KS5ib29sKG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zMyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlMzVXBsb2FkLmVuY29kZShtZXNzYWdlLnMzLCB3cml0ZXIudWludDMyKDI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmdjcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkdDUFVwbG9hZC5lbmNvZGUobWVzc2FnZS5nY3AsIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYXp1cmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQuZW5jb2RlKG1lc3NhZ2UuYXp1cmUsIHdyaXRlci51aW50MzIoNDIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYWxpT1NTICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuQWxpT1NTVXBsb2FkLmVuY29kZShtZXNzYWdlLmFsaU9TUywgd3JpdGVyLnVpbnQzMig1OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VFbmNvZGVkRmlsZU91dHB1dCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZmlsZVR5cGUgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZpbGVwYXRoID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0ID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnMzID0gZXhwb3J0cy5TM1VwbG9hZC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ2NwID0gZXhwb3J0cy5HQ1BVcGxvYWQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmF6dXJlID0gZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFsaU9TUyA9IGV4cG9ydHMuQWxpT1NTVXBsb2FkLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpbGVUeXBlOiBpc1NldChvYmplY3QuZmlsZVR5cGUpID8gZW5jb2RlZEZpbGVUeXBlRnJvbUpTT04ob2JqZWN0LmZpbGVUeXBlKSA6IDAsXG4gICAgICAgICAgICBmaWxlcGF0aDogaXNTZXQob2JqZWN0LmZpbGVwYXRoKSA/IFN0cmluZyhvYmplY3QuZmlsZXBhdGgpIDogXCJcIixcbiAgICAgICAgICAgIGRpc2FibGVNYW5pZmVzdDogaXNTZXQob2JqZWN0LmRpc2FibGVNYW5pZmVzdCkgPyBCb29sZWFuKG9iamVjdC5kaXNhYmxlTWFuaWZlc3QpIDogZmFsc2UsXG4gICAgICAgICAgICBzMzogaXNTZXQob2JqZWN0LnMzKSA/IGV4cG9ydHMuUzNVcGxvYWQuZnJvbUpTT04ob2JqZWN0LnMzKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGdjcDogaXNTZXQob2JqZWN0LmdjcCkgPyBleHBvcnRzLkdDUFVwbG9hZC5mcm9tSlNPTihvYmplY3QuZ2NwKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGF6dXJlOiBpc1NldChvYmplY3QuYXp1cmUpID8gZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQuZnJvbUpTT04ob2JqZWN0LmF6dXJlKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGFsaU9TUzogaXNTZXQob2JqZWN0LmFsaU9TUykgPyBleHBvcnRzLkFsaU9TU1VwbG9hZC5mcm9tSlNPTihvYmplY3QuYWxpT1NTKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmZpbGVUeXBlICE9PSB1bmRlZmluZWQgJiYgKG9iai5maWxlVHlwZSA9IGVuY29kZWRGaWxlVHlwZVRvSlNPTihtZXNzYWdlLmZpbGVUeXBlKSk7XG4gICAgICAgIG1lc3NhZ2UuZmlsZXBhdGggIT09IHVuZGVmaW5lZCAmJiAob2JqLmZpbGVwYXRoID0gbWVzc2FnZS5maWxlcGF0aCk7XG4gICAgICAgIG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5kaXNhYmxlTWFuaWZlc3QgPSBtZXNzYWdlLmRpc2FibGVNYW5pZmVzdCk7XG4gICAgICAgIG1lc3NhZ2UuczMgIT09IHVuZGVmaW5lZCAmJiAob2JqLnMzID0gbWVzc2FnZS5zMyA/IGV4cG9ydHMuUzNVcGxvYWQudG9KU09OKG1lc3NhZ2UuczMpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5nY3AgIT09IHVuZGVmaW5lZCAmJiAob2JqLmdjcCA9IG1lc3NhZ2UuZ2NwID8gZXhwb3J0cy5HQ1BVcGxvYWQudG9KU09OKG1lc3NhZ2UuZ2NwKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UuYXp1cmUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmF6dXJlID0gbWVzc2FnZS5henVyZSA/IGV4cG9ydHMuQXp1cmVCbG9iVXBsb2FkLnRvSlNPTihtZXNzYWdlLmF6dXJlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UuYWxpT1NTICE9PSB1bmRlZmluZWQgJiYgKG9iai5hbGlPU1MgPSBtZXNzYWdlLmFsaU9TUyA/IGV4cG9ydHMuQWxpT1NTVXBsb2FkLnRvSlNPTihtZXNzYWdlLmFsaU9TUykgOiB1bmRlZmluZWQpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUVuY29kZWRGaWxlT3V0cHV0KCk7XG4gICAgICAgIG1lc3NhZ2UuZmlsZVR5cGUgPSAoX2EgPSBvYmplY3QuZmlsZVR5cGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDA7XG4gICAgICAgIG1lc3NhZ2UuZmlsZXBhdGggPSAoX2IgPSBvYmplY3QuZmlsZXBhdGgpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0ID0gKF9jID0gb2JqZWN0LmRpc2FibGVNYW5pZmVzdCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2UuczMgPSAob2JqZWN0LnMzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnMzICE9PSBudWxsKSA/IGV4cG9ydHMuUzNVcGxvYWQuZnJvbVBhcnRpYWwob2JqZWN0LnMzKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5nY3AgPSAob2JqZWN0LmdjcCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5nY3AgIT09IG51bGwpID8gZXhwb3J0cy5HQ1BVcGxvYWQuZnJvbVBhcnRpYWwob2JqZWN0LmdjcCkgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuYXp1cmUgPSAob2JqZWN0LmF6dXJlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmF6dXJlICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkF6dXJlQmxvYlVwbG9hZC5mcm9tUGFydGlhbChvYmplY3QuYXp1cmUpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5hbGlPU1MgPSAob2JqZWN0LmFsaU9TUyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hbGlPU1MgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuQWxpT1NTVXBsb2FkLmZyb21QYXJ0aWFsKG9iamVjdC5hbGlPU1MpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlU2VnbWVudGVkRmlsZU91dHB1dCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBwcm90b2NvbDogMCxcbiAgICAgICAgZmlsZW5hbWVQcmVmaXg6IFwiXCIsXG4gICAgICAgIHBsYXlsaXN0TmFtZTogXCJcIixcbiAgICAgICAgbGl2ZVBsYXlsaXN0TmFtZTogXCJcIixcbiAgICAgICAgc2VnbWVudER1cmF0aW9uOiAwLFxuICAgICAgICBmaWxlbmFtZVN1ZmZpeDogMCxcbiAgICAgICAgZGlzYWJsZU1hbmlmZXN0OiBmYWxzZSxcbiAgICAgICAgczM6IHVuZGVmaW5lZCxcbiAgICAgICAgZ2NwOiB1bmRlZmluZWQsXG4gICAgICAgIGF6dXJlOiB1bmRlZmluZWQsXG4gICAgICAgIGFsaU9TUzogdW5kZWZpbmVkLFxuICAgIH07XG59XG5leHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5wcm90b2NvbCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UucHJvdG9jb2wgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoOCkuaW50MzIobWVzc2FnZS5wcm90b2NvbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZW5hbWVQcmVmaXggIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmZpbGVuYW1lUHJlZml4ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5maWxlbmFtZVByZWZpeCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucGxheWxpc3ROYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5wbGF5bGlzdE5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLnBsYXlsaXN0TmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubGl2ZVBsYXlsaXN0TmFtZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UubGl2ZVBsYXlsaXN0TmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig5MCkuc3RyaW5nKG1lc3NhZ2UubGl2ZVBsYXlsaXN0TmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VnbWVudER1cmF0aW9uICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5zZWdtZW50RHVyYXRpb24gIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzIpLnVpbnQzMihtZXNzYWdlLnNlZ21lbnREdXJhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZW5hbWVTdWZmaXggIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmZpbGVuYW1lU3VmZml4ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDgwKS5pbnQzMihtZXNzYWdlLmZpbGVuYW1lU3VmZml4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5kaXNhYmxlTWFuaWZlc3QgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNjQpLmJvb2wobWVzc2FnZS5kaXNhYmxlTWFuaWZlc3QpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnMzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuUzNVcGxvYWQuZW5jb2RlKG1lc3NhZ2UuczMsIHdyaXRlci51aW50MzIoNDIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZ2NwICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuR0NQVXBsb2FkLmVuY29kZShtZXNzYWdlLmdjcCwgd3JpdGVyLnVpbnQzMig1MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5henVyZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkF6dXJlQmxvYlVwbG9hZC5lbmNvZGUobWVzc2FnZS5henVyZSwgd3JpdGVyLnVpbnQzMig1OCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5hbGlPU1MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5BbGlPU1NVcGxvYWQuZW5jb2RlKG1lc3NhZ2UuYWxpT1NTLCB3cml0ZXIudWludDMyKDc0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVNlZ21lbnRlZEZpbGVPdXRwdXQoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnByb3RvY29sID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5maWxlbmFtZVByZWZpeCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBsYXlsaXN0TmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5saXZlUGxheWxpc3ROYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VnbWVudER1cmF0aW9uID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZpbGVuYW1lU3VmZml4ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kaXNhYmxlTWFuaWZlc3QgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuczMgPSBleHBvcnRzLlMzVXBsb2FkLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5nY3AgPSBleHBvcnRzLkdDUFVwbG9hZC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYXp1cmUgPSBleHBvcnRzLkF6dXJlQmxvYlVwbG9hZC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWxpT1NTID0gZXhwb3J0cy5BbGlPU1NVcGxvYWQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcHJvdG9jb2w6IGlzU2V0KG9iamVjdC5wcm90b2NvbCkgPyBzZWdtZW50ZWRGaWxlUHJvdG9jb2xGcm9tSlNPTihvYmplY3QucHJvdG9jb2wpIDogMCxcbiAgICAgICAgICAgIGZpbGVuYW1lUHJlZml4OiBpc1NldChvYmplY3QuZmlsZW5hbWVQcmVmaXgpID8gU3RyaW5nKG9iamVjdC5maWxlbmFtZVByZWZpeCkgOiBcIlwiLFxuICAgICAgICAgICAgcGxheWxpc3ROYW1lOiBpc1NldChvYmplY3QucGxheWxpc3ROYW1lKSA/IFN0cmluZyhvYmplY3QucGxheWxpc3ROYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBsaXZlUGxheWxpc3ROYW1lOiBpc1NldChvYmplY3QubGl2ZVBsYXlsaXN0TmFtZSkgPyBTdHJpbmcob2JqZWN0LmxpdmVQbGF5bGlzdE5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIHNlZ21lbnREdXJhdGlvbjogaXNTZXQob2JqZWN0LnNlZ21lbnREdXJhdGlvbikgPyBOdW1iZXIob2JqZWN0LnNlZ21lbnREdXJhdGlvbikgOiAwLFxuICAgICAgICAgICAgZmlsZW5hbWVTdWZmaXg6IGlzU2V0KG9iamVjdC5maWxlbmFtZVN1ZmZpeCkgPyBzZWdtZW50ZWRGaWxlU3VmZml4RnJvbUpTT04ob2JqZWN0LmZpbGVuYW1lU3VmZml4KSA6IDAsXG4gICAgICAgICAgICBkaXNhYmxlTWFuaWZlc3Q6IGlzU2V0KG9iamVjdC5kaXNhYmxlTWFuaWZlc3QpID8gQm9vbGVhbihvYmplY3QuZGlzYWJsZU1hbmlmZXN0KSA6IGZhbHNlLFxuICAgICAgICAgICAgczM6IGlzU2V0KG9iamVjdC5zMykgPyBleHBvcnRzLlMzVXBsb2FkLmZyb21KU09OKG9iamVjdC5zMykgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBnY3A6IGlzU2V0KG9iamVjdC5nY3ApID8gZXhwb3J0cy5HQ1BVcGxvYWQuZnJvbUpTT04ob2JqZWN0LmdjcCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBhenVyZTogaXNTZXQob2JqZWN0LmF6dXJlKSA/IGV4cG9ydHMuQXp1cmVCbG9iVXBsb2FkLmZyb21KU09OKG9iamVjdC5henVyZSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBhbGlPU1M6IGlzU2V0KG9iamVjdC5hbGlPU1MpID8gZXhwb3J0cy5BbGlPU1NVcGxvYWQuZnJvbUpTT04ob2JqZWN0LmFsaU9TUykgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5wcm90b2NvbCAhPT0gdW5kZWZpbmVkICYmIChvYmoucHJvdG9jb2wgPSBzZWdtZW50ZWRGaWxlUHJvdG9jb2xUb0pTT04obWVzc2FnZS5wcm90b2NvbCkpO1xuICAgICAgICBtZXNzYWdlLmZpbGVuYW1lUHJlZml4ICE9PSB1bmRlZmluZWQgJiYgKG9iai5maWxlbmFtZVByZWZpeCA9IG1lc3NhZ2UuZmlsZW5hbWVQcmVmaXgpO1xuICAgICAgICBtZXNzYWdlLnBsYXlsaXN0TmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmoucGxheWxpc3ROYW1lID0gbWVzc2FnZS5wbGF5bGlzdE5hbWUpO1xuICAgICAgICBtZXNzYWdlLmxpdmVQbGF5bGlzdE5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmxpdmVQbGF5bGlzdE5hbWUgPSBtZXNzYWdlLmxpdmVQbGF5bGlzdE5hbWUpO1xuICAgICAgICBtZXNzYWdlLnNlZ21lbnREdXJhdGlvbiAhPT0gdW5kZWZpbmVkICYmIChvYmouc2VnbWVudER1cmF0aW9uID0gTWF0aC5yb3VuZChtZXNzYWdlLnNlZ21lbnREdXJhdGlvbikpO1xuICAgICAgICBtZXNzYWdlLmZpbGVuYW1lU3VmZml4ICE9PSB1bmRlZmluZWQgJiYgKG9iai5maWxlbmFtZVN1ZmZpeCA9IHNlZ21lbnRlZEZpbGVTdWZmaXhUb0pTT04obWVzc2FnZS5maWxlbmFtZVN1ZmZpeCkpO1xuICAgICAgICBtZXNzYWdlLmRpc2FibGVNYW5pZmVzdCAhPT0gdW5kZWZpbmVkICYmIChvYmouZGlzYWJsZU1hbmlmZXN0ID0gbWVzc2FnZS5kaXNhYmxlTWFuaWZlc3QpO1xuICAgICAgICBtZXNzYWdlLnMzICE9PSB1bmRlZmluZWQgJiYgKG9iai5zMyA9IG1lc3NhZ2UuczMgPyBleHBvcnRzLlMzVXBsb2FkLnRvSlNPTihtZXNzYWdlLnMzKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UuZ2NwICE9PSB1bmRlZmluZWQgJiYgKG9iai5nY3AgPSBtZXNzYWdlLmdjcCA/IGV4cG9ydHMuR0NQVXBsb2FkLnRvSlNPTihtZXNzYWdlLmdjcCkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLmF6dXJlICE9PSB1bmRlZmluZWQgJiYgKG9iai5henVyZSA9IG1lc3NhZ2UuYXp1cmUgPyBleHBvcnRzLkF6dXJlQmxvYlVwbG9hZC50b0pTT04obWVzc2FnZS5henVyZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLmFsaU9TUyAhPT0gdW5kZWZpbmVkICYmIChvYmouYWxpT1NTID0gbWVzc2FnZS5hbGlPU1MgPyBleHBvcnRzLkFsaU9TU1VwbG9hZC50b0pTT04obWVzc2FnZS5hbGlPU1MpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2c7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU2VnbWVudGVkRmlsZU91dHB1dCgpO1xuICAgICAgICBtZXNzYWdlLnByb3RvY29sID0gKF9hID0gb2JqZWN0LnByb3RvY29sKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xuICAgICAgICBtZXNzYWdlLmZpbGVuYW1lUHJlZml4ID0gKF9iID0gb2JqZWN0LmZpbGVuYW1lUHJlZml4KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnBsYXlsaXN0TmFtZSA9IChfYyA9IG9iamVjdC5wbGF5bGlzdE5hbWUpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UubGl2ZVBsYXlsaXN0TmFtZSA9IChfZCA9IG9iamVjdC5saXZlUGxheWxpc3ROYW1lKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnNlZ21lbnREdXJhdGlvbiA9IChfZSA9IG9iamVjdC5zZWdtZW50RHVyYXRpb24pICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IDA7XG4gICAgICAgIG1lc3NhZ2UuZmlsZW5hbWVTdWZmaXggPSAoX2YgPSBvYmplY3QuZmlsZW5hbWVTdWZmaXgpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IDA7XG4gICAgICAgIG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0ID0gKF9nID0gb2JqZWN0LmRpc2FibGVNYW5pZmVzdCkgIT09IG51bGwgJiYgX2cgIT09IHZvaWQgMCA/IF9nIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2UuczMgPSAob2JqZWN0LnMzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnMzICE9PSBudWxsKSA/IGV4cG9ydHMuUzNVcGxvYWQuZnJvbVBhcnRpYWwob2JqZWN0LnMzKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5nY3AgPSAob2JqZWN0LmdjcCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5nY3AgIT09IG51bGwpID8gZXhwb3J0cy5HQ1BVcGxvYWQuZnJvbVBhcnRpYWwob2JqZWN0LmdjcCkgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuYXp1cmUgPSAob2JqZWN0LmF6dXJlICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmF6dXJlICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkF6dXJlQmxvYlVwbG9hZC5mcm9tUGFydGlhbChvYmplY3QuYXp1cmUpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5hbGlPU1MgPSAob2JqZWN0LmFsaU9TUyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hbGlPU1MgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuQWxpT1NTVXBsb2FkLmZyb21QYXJ0aWFsKG9iamVjdC5hbGlPU1MpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlRGlyZWN0RmlsZU91dHB1dCgpIHtcbiAgICByZXR1cm4geyBmaWxlcGF0aDogXCJcIiwgZGlzYWJsZU1hbmlmZXN0OiBmYWxzZSwgczM6IHVuZGVmaW5lZCwgZ2NwOiB1bmRlZmluZWQsIGF6dXJlOiB1bmRlZmluZWQsIGFsaU9TUzogdW5kZWZpbmVkIH07XG59XG5leHBvcnRzLkRpcmVjdEZpbGVPdXRwdXQgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5maWxlcGF0aCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZmlsZXBhdGggIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLmZpbGVwYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5kaXNhYmxlTWFuaWZlc3QgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDApLmJvb2wobWVzc2FnZS5kaXNhYmxlTWFuaWZlc3QpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnMzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuUzNVcGxvYWQuZW5jb2RlKG1lc3NhZ2UuczMsIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZ2NwICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuR0NQVXBsb2FkLmVuY29kZShtZXNzYWdlLmdjcCwgd3JpdGVyLnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5henVyZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkF6dXJlQmxvYlVwbG9hZC5lbmNvZGUobWVzc2FnZS5henVyZSwgd3JpdGVyLnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5hbGlPU1MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5BbGlPU1NVcGxvYWQuZW5jb2RlKG1lc3NhZ2UuYWxpT1NTLCB3cml0ZXIudWludDMyKDUwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZURpcmVjdEZpbGVPdXRwdXQoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZpbGVwYXRoID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0ID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnMzID0gZXhwb3J0cy5TM1VwbG9hZC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ2NwID0gZXhwb3J0cy5HQ1BVcGxvYWQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmF6dXJlID0gZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFsaU9TUyA9IGV4cG9ydHMuQWxpT1NTVXBsb2FkLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpbGVwYXRoOiBpc1NldChvYmplY3QuZmlsZXBhdGgpID8gU3RyaW5nKG9iamVjdC5maWxlcGF0aCkgOiBcIlwiLFxuICAgICAgICAgICAgZGlzYWJsZU1hbmlmZXN0OiBpc1NldChvYmplY3QuZGlzYWJsZU1hbmlmZXN0KSA/IEJvb2xlYW4ob2JqZWN0LmRpc2FibGVNYW5pZmVzdCkgOiBmYWxzZSxcbiAgICAgICAgICAgIHMzOiBpc1NldChvYmplY3QuczMpID8gZXhwb3J0cy5TM1VwbG9hZC5mcm9tSlNPTihvYmplY3QuczMpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZ2NwOiBpc1NldChvYmplY3QuZ2NwKSA/IGV4cG9ydHMuR0NQVXBsb2FkLmZyb21KU09OKG9iamVjdC5nY3ApIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgYXp1cmU6IGlzU2V0KG9iamVjdC5henVyZSkgPyBleHBvcnRzLkF6dXJlQmxvYlVwbG9hZC5mcm9tSlNPTihvYmplY3QuYXp1cmUpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgYWxpT1NTOiBpc1NldChvYmplY3QuYWxpT1NTKSA/IGV4cG9ydHMuQWxpT1NTVXBsb2FkLmZyb21KU09OKG9iamVjdC5hbGlPU1MpIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UuZmlsZXBhdGggIT09IHVuZGVmaW5lZCAmJiAob2JqLmZpbGVwYXRoID0gbWVzc2FnZS5maWxlcGF0aCk7XG4gICAgICAgIG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5kaXNhYmxlTWFuaWZlc3QgPSBtZXNzYWdlLmRpc2FibGVNYW5pZmVzdCk7XG4gICAgICAgIG1lc3NhZ2UuczMgIT09IHVuZGVmaW5lZCAmJiAob2JqLnMzID0gbWVzc2FnZS5zMyA/IGV4cG9ydHMuUzNVcGxvYWQudG9KU09OKG1lc3NhZ2UuczMpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5nY3AgIT09IHVuZGVmaW5lZCAmJiAob2JqLmdjcCA9IG1lc3NhZ2UuZ2NwID8gZXhwb3J0cy5HQ1BVcGxvYWQudG9KU09OKG1lc3NhZ2UuZ2NwKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UuYXp1cmUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmF6dXJlID0gbWVzc2FnZS5henVyZSA/IGV4cG9ydHMuQXp1cmVCbG9iVXBsb2FkLnRvSlNPTihtZXNzYWdlLmF6dXJlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UuYWxpT1NTICE9PSB1bmRlZmluZWQgJiYgKG9iai5hbGlPU1MgPSBtZXNzYWdlLmFsaU9TUyA/IGV4cG9ydHMuQWxpT1NTVXBsb2FkLnRvSlNPTihtZXNzYWdlLmFsaU9TUykgOiB1bmRlZmluZWQpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlRGlyZWN0RmlsZU91dHB1dCgpO1xuICAgICAgICBtZXNzYWdlLmZpbGVwYXRoID0gKF9hID0gb2JqZWN0LmZpbGVwYXRoKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmRpc2FibGVNYW5pZmVzdCA9IChfYiA9IG9iamVjdC5kaXNhYmxlTWFuaWZlc3QpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLnMzID0gKG9iamVjdC5zMyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5zMyAhPT0gbnVsbCkgPyBleHBvcnRzLlMzVXBsb2FkLmZyb21QYXJ0aWFsKG9iamVjdC5zMykgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuZ2NwID0gKG9iamVjdC5nY3AgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZ2NwICE9PSBudWxsKSA/IGV4cG9ydHMuR0NQVXBsb2FkLmZyb21QYXJ0aWFsKG9iamVjdC5nY3ApIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmF6dXJlID0gKG9iamVjdC5henVyZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5henVyZSAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQuZnJvbVBhcnRpYWwob2JqZWN0LmF6dXJlKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuYWxpT1NTID0gKG9iamVjdC5hbGlPU1MgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYWxpT1NTICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkFsaU9TU1VwbG9hZC5mcm9tUGFydGlhbChvYmplY3QuYWxpT1NTKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUltYWdlT3V0cHV0KCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNhcHR1cmVJbnRlcnZhbDogMCxcbiAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgZmlsZW5hbWVQcmVmaXg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lU3VmZml4OiAwLFxuICAgICAgICBpbWFnZUNvZGVjOiAwLFxuICAgICAgICBkaXNhYmxlTWFuaWZlc3Q6IGZhbHNlLFxuICAgICAgICBzMzogdW5kZWZpbmVkLFxuICAgICAgICBnY3A6IHVuZGVmaW5lZCxcbiAgICAgICAgYXp1cmU6IHVuZGVmaW5lZCxcbiAgICAgICAgYWxpT1NTOiB1bmRlZmluZWQsXG4gICAgfTtcbn1cbmV4cG9ydHMuSW1hZ2VPdXRwdXQgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5jYXB0dXJlSW50ZXJ2YWwgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmNhcHR1cmVJbnRlcnZhbCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4KS51aW50MzIobWVzc2FnZS5jYXB0dXJlSW50ZXJ2YWwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLndpZHRoICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS53aWR0aCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNikuaW50MzIobWVzc2FnZS53aWR0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5oZWlnaHQgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjQpLmludDMyKG1lc3NhZ2UuaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5maWxlbmFtZVByZWZpeCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZmlsZW5hbWVQcmVmaXggIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzQpLnN0cmluZyhtZXNzYWdlLmZpbGVuYW1lUHJlZml4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5maWxlbmFtZVN1ZmZpeCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZmlsZW5hbWVTdWZmaXggIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDApLmludDMyKG1lc3NhZ2UuZmlsZW5hbWVTdWZmaXgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmltYWdlQ29kZWMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmltYWdlQ29kZWMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDgpLmludDMyKG1lc3NhZ2UuaW1hZ2VDb2RlYyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDU2KS5ib29sKG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zMyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlMzVXBsb2FkLmVuY29kZShtZXNzYWdlLnMzLCB3cml0ZXIudWludDMyKDY2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmdjcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkdDUFVwbG9hZC5lbmNvZGUobWVzc2FnZS5nY3AsIHdyaXRlci51aW50MzIoNzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYXp1cmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQuZW5jb2RlKG1lc3NhZ2UuYXp1cmUsIHdyaXRlci51aW50MzIoODIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYWxpT1NTICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuQWxpT1NTVXBsb2FkLmVuY29kZShtZXNzYWdlLmFsaU9TUywgd3JpdGVyLnVpbnQzMig5MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VJbWFnZU91dHB1dCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2FwdHVyZUludGVydmFsID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uud2lkdGggPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmhlaWdodCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZmlsZW5hbWVQcmVmaXggPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5maWxlbmFtZVN1ZmZpeCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW1hZ2VDb2RlYyA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0ID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnMzID0gZXhwb3J0cy5TM1VwbG9hZC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ2NwID0gZXhwb3J0cy5HQ1BVcGxvYWQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5henVyZSA9IGV4cG9ydHMuQXp1cmVCbG9iVXBsb2FkLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWxpT1NTID0gZXhwb3J0cy5BbGlPU1NVcGxvYWQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2FwdHVyZUludGVydmFsOiBpc1NldChvYmplY3QuY2FwdHVyZUludGVydmFsKSA/IE51bWJlcihvYmplY3QuY2FwdHVyZUludGVydmFsKSA6IDAsXG4gICAgICAgICAgICB3aWR0aDogaXNTZXQob2JqZWN0LndpZHRoKSA/IE51bWJlcihvYmplY3Qud2lkdGgpIDogMCxcbiAgICAgICAgICAgIGhlaWdodDogaXNTZXQob2JqZWN0LmhlaWdodCkgPyBOdW1iZXIob2JqZWN0LmhlaWdodCkgOiAwLFxuICAgICAgICAgICAgZmlsZW5hbWVQcmVmaXg6IGlzU2V0KG9iamVjdC5maWxlbmFtZVByZWZpeCkgPyBTdHJpbmcob2JqZWN0LmZpbGVuYW1lUHJlZml4KSA6IFwiXCIsXG4gICAgICAgICAgICBmaWxlbmFtZVN1ZmZpeDogaXNTZXQob2JqZWN0LmZpbGVuYW1lU3VmZml4KSA/IGltYWdlRmlsZVN1ZmZpeEZyb21KU09OKG9iamVjdC5maWxlbmFtZVN1ZmZpeCkgOiAwLFxuICAgICAgICAgICAgaW1hZ2VDb2RlYzogaXNTZXQob2JqZWN0LmltYWdlQ29kZWMpID8gbGl2ZWtpdF9tb2RlbHNfMS5pbWFnZUNvZGVjRnJvbUpTT04ob2JqZWN0LmltYWdlQ29kZWMpIDogMCxcbiAgICAgICAgICAgIGRpc2FibGVNYW5pZmVzdDogaXNTZXQob2JqZWN0LmRpc2FibGVNYW5pZmVzdCkgPyBCb29sZWFuKG9iamVjdC5kaXNhYmxlTWFuaWZlc3QpIDogZmFsc2UsXG4gICAgICAgICAgICBzMzogaXNTZXQob2JqZWN0LnMzKSA/IGV4cG9ydHMuUzNVcGxvYWQuZnJvbUpTT04ob2JqZWN0LnMzKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGdjcDogaXNTZXQob2JqZWN0LmdjcCkgPyBleHBvcnRzLkdDUFVwbG9hZC5mcm9tSlNPTihvYmplY3QuZ2NwKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGF6dXJlOiBpc1NldChvYmplY3QuYXp1cmUpID8gZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQuZnJvbUpTT04ob2JqZWN0LmF6dXJlKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGFsaU9TUzogaXNTZXQob2JqZWN0LmFsaU9TUykgPyBleHBvcnRzLkFsaU9TU1VwbG9hZC5mcm9tSlNPTihvYmplY3QuYWxpT1NTKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmNhcHR1cmVJbnRlcnZhbCAhPT0gdW5kZWZpbmVkICYmIChvYmouY2FwdHVyZUludGVydmFsID0gTWF0aC5yb3VuZChtZXNzYWdlLmNhcHR1cmVJbnRlcnZhbCkpO1xuICAgICAgICBtZXNzYWdlLndpZHRoICE9PSB1bmRlZmluZWQgJiYgKG9iai53aWR0aCA9IE1hdGgucm91bmQobWVzc2FnZS53aWR0aCkpO1xuICAgICAgICBtZXNzYWdlLmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIChvYmouaGVpZ2h0ID0gTWF0aC5yb3VuZChtZXNzYWdlLmhlaWdodCkpO1xuICAgICAgICBtZXNzYWdlLmZpbGVuYW1lUHJlZml4ICE9PSB1bmRlZmluZWQgJiYgKG9iai5maWxlbmFtZVByZWZpeCA9IG1lc3NhZ2UuZmlsZW5hbWVQcmVmaXgpO1xuICAgICAgICBtZXNzYWdlLmZpbGVuYW1lU3VmZml4ICE9PSB1bmRlZmluZWQgJiYgKG9iai5maWxlbmFtZVN1ZmZpeCA9IGltYWdlRmlsZVN1ZmZpeFRvSlNPTihtZXNzYWdlLmZpbGVuYW1lU3VmZml4KSk7XG4gICAgICAgIG1lc3NhZ2UuaW1hZ2VDb2RlYyAhPT0gdW5kZWZpbmVkICYmIChvYmouaW1hZ2VDb2RlYyA9IGxpdmVraXRfbW9kZWxzXzEuaW1hZ2VDb2RlY1RvSlNPTihtZXNzYWdlLmltYWdlQ29kZWMpKTtcbiAgICAgICAgbWVzc2FnZS5kaXNhYmxlTWFuaWZlc3QgIT09IHVuZGVmaW5lZCAmJiAob2JqLmRpc2FibGVNYW5pZmVzdCA9IG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0KTtcbiAgICAgICAgbWVzc2FnZS5zMyAhPT0gdW5kZWZpbmVkICYmIChvYmouczMgPSBtZXNzYWdlLnMzID8gZXhwb3J0cy5TM1VwbG9hZC50b0pTT04obWVzc2FnZS5zMykgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLmdjcCAhPT0gdW5kZWZpbmVkICYmIChvYmouZ2NwID0gbWVzc2FnZS5nY3AgPyBleHBvcnRzLkdDUFVwbG9hZC50b0pTT04obWVzc2FnZS5nY3ApIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5henVyZSAhPT0gdW5kZWZpbmVkICYmIChvYmouYXp1cmUgPSBtZXNzYWdlLmF6dXJlID8gZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQudG9KU09OKG1lc3NhZ2UuYXp1cmUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5hbGlPU1MgIT09IHVuZGVmaW5lZCAmJiAob2JqLmFsaU9TUyA9IG1lc3NhZ2UuYWxpT1NTID8gZXhwb3J0cy5BbGlPU1NVcGxvYWQudG9KU09OKG1lc3NhZ2UuYWxpT1NTKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUltYWdlT3V0cHV0KCk7XG4gICAgICAgIG1lc3NhZ2UuY2FwdHVyZUludGVydmFsID0gKF9hID0gb2JqZWN0LmNhcHR1cmVJbnRlcnZhbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcbiAgICAgICAgbWVzc2FnZS53aWR0aCA9IChfYiA9IG9iamVjdC53aWR0aCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMDtcbiAgICAgICAgbWVzc2FnZS5oZWlnaHQgPSAoX2MgPSBvYmplY3QuaGVpZ2h0KSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAwO1xuICAgICAgICBtZXNzYWdlLmZpbGVuYW1lUHJlZml4ID0gKF9kID0gb2JqZWN0LmZpbGVuYW1lUHJlZml4KSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmZpbGVuYW1lU3VmZml4ID0gKF9lID0gb2JqZWN0LmZpbGVuYW1lU3VmZml4KSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiAwO1xuICAgICAgICBtZXNzYWdlLmltYWdlQ29kZWMgPSAoX2YgPSBvYmplY3QuaW1hZ2VDb2RlYykgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogMDtcbiAgICAgICAgbWVzc2FnZS5kaXNhYmxlTWFuaWZlc3QgPSAoX2cgPSBvYmplY3QuZGlzYWJsZU1hbmlmZXN0KSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiBmYWxzZTtcbiAgICAgICAgbWVzc2FnZS5zMyA9IChvYmplY3QuczMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuczMgIT09IG51bGwpID8gZXhwb3J0cy5TM1VwbG9hZC5mcm9tUGFydGlhbChvYmplY3QuczMpIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmdjcCA9IChvYmplY3QuZ2NwICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmdjcCAhPT0gbnVsbCkgPyBleHBvcnRzLkdDUFVwbG9hZC5mcm9tUGFydGlhbChvYmplY3QuZ2NwKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5henVyZSA9IChvYmplY3QuYXp1cmUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYXp1cmUgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuQXp1cmVCbG9iVXBsb2FkLmZyb21QYXJ0aWFsKG9iamVjdC5henVyZSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmFsaU9TUyA9IChvYmplY3QuYWxpT1NTICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmFsaU9TUyAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5BbGlPU1NVcGxvYWQuZnJvbVBhcnRpYWwob2JqZWN0LmFsaU9TUylcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VTM1VwbG9hZCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBhY2Nlc3NLZXk6IFwiXCIsXG4gICAgICAgIHNlY3JldDogXCJcIixcbiAgICAgICAgcmVnaW9uOiBcIlwiLFxuICAgICAgICBlbmRwb2ludDogXCJcIixcbiAgICAgICAgYnVja2V0OiBcIlwiLFxuICAgICAgICBmb3JjZVBhdGhTdHlsZTogZmFsc2UsXG4gICAgICAgIG1ldGFkYXRhOiB7fSxcbiAgICAgICAgdGFnZ2luZzogXCJcIixcbiAgICB9O1xufVxuZXhwb3J0cy5TM1VwbG9hZCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmFjY2Vzc0tleSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuYWNjZXNzS2V5ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5hY2Nlc3NLZXkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnNlY3JldCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc2VjcmV0ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5zZWNyZXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJlZ2lvbiAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UucmVnaW9uICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5yZWdpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmVuZHBvaW50ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5lbmRwb2ludCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigzNCkuc3RyaW5nKG1lc3NhZ2UuZW5kcG9pbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmJ1Y2tldCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuYnVja2V0ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQyKS5zdHJpbmcobWVzc2FnZS5idWNrZXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZvcmNlUGF0aFN0eWxlID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQ4KS5ib29sKG1lc3NhZ2UuZm9yY2VQYXRoU3R5bGUpO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG1lc3NhZ2UubWV0YWRhdGEgfHwge30pLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICAgICAgZXhwb3J0cy5TM1VwbG9hZF9NZXRhZGF0YUVudHJ5LmVuY29kZSh7IGtleToga2V5LCB2YWx1ZSB9LCB3cml0ZXIudWludDMyKDU4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG1lc3NhZ2UudGFnZ2luZyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UudGFnZ2luZyAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig2Nikuc3RyaW5nKG1lc3NhZ2UudGFnZ2luZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUzNVcGxvYWQoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFjY2Vzc0tleSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlY3JldCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlZ2lvbiA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYnVja2V0ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZm9yY2VQYXRoU3R5bGUgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudHJ5NyA9IGV4cG9ydHMuUzNVcGxvYWRfTWV0YWRhdGFFbnRyeS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnk3LnZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWV0YWRhdGFbZW50cnk3LmtleV0gPSBlbnRyeTcudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRhZ2dpbmcgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFjY2Vzc0tleTogaXNTZXQob2JqZWN0LmFjY2Vzc0tleSkgPyBTdHJpbmcob2JqZWN0LmFjY2Vzc0tleSkgOiBcIlwiLFxuICAgICAgICAgICAgc2VjcmV0OiBpc1NldChvYmplY3Quc2VjcmV0KSA/IFN0cmluZyhvYmplY3Quc2VjcmV0KSA6IFwiXCIsXG4gICAgICAgICAgICByZWdpb246IGlzU2V0KG9iamVjdC5yZWdpb24pID8gU3RyaW5nKG9iamVjdC5yZWdpb24pIDogXCJcIixcbiAgICAgICAgICAgIGVuZHBvaW50OiBpc1NldChvYmplY3QuZW5kcG9pbnQpID8gU3RyaW5nKG9iamVjdC5lbmRwb2ludCkgOiBcIlwiLFxuICAgICAgICAgICAgYnVja2V0OiBpc1NldChvYmplY3QuYnVja2V0KSA/IFN0cmluZyhvYmplY3QuYnVja2V0KSA6IFwiXCIsXG4gICAgICAgICAgICBmb3JjZVBhdGhTdHlsZTogaXNTZXQob2JqZWN0LmZvcmNlUGF0aFN0eWxlKSA/IEJvb2xlYW4ob2JqZWN0LmZvcmNlUGF0aFN0eWxlKSA6IGZhbHNlLFxuICAgICAgICAgICAgbWV0YWRhdGE6IGlzT2JqZWN0KG9iamVjdC5tZXRhZGF0YSlcbiAgICAgICAgICAgICAgICA/IE9iamVjdC5lbnRyaWVzKG9iamVjdC5tZXRhZGF0YSkucmVkdWNlKChhY2MsIFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhY2Nba2V5XSA9IFN0cmluZyh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICAgICAgfSwge30pXG4gICAgICAgICAgICAgICAgOiB7fSxcbiAgICAgICAgICAgIHRhZ2dpbmc6IGlzU2V0KG9iamVjdC50YWdnaW5nKSA/IFN0cmluZyhvYmplY3QudGFnZ2luZykgOiBcIlwiLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UuYWNjZXNzS2V5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5hY2Nlc3NLZXkgPSBtZXNzYWdlLmFjY2Vzc0tleSk7XG4gICAgICAgIG1lc3NhZ2Uuc2VjcmV0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5zZWNyZXQgPSBtZXNzYWdlLnNlY3JldCk7XG4gICAgICAgIG1lc3NhZ2UucmVnaW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai5yZWdpb24gPSBtZXNzYWdlLnJlZ2lvbik7XG4gICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmVuZHBvaW50ID0gbWVzc2FnZS5lbmRwb2ludCk7XG4gICAgICAgIG1lc3NhZ2UuYnVja2V0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5idWNrZXQgPSBtZXNzYWdlLmJ1Y2tldCk7XG4gICAgICAgIG1lc3NhZ2UuZm9yY2VQYXRoU3R5bGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmZvcmNlUGF0aFN0eWxlID0gbWVzc2FnZS5mb3JjZVBhdGhTdHlsZSk7XG4gICAgICAgIG9iai5tZXRhZGF0YSA9IHt9O1xuICAgICAgICBpZiAobWVzc2FnZS5tZXRhZGF0YSkge1xuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMobWVzc2FnZS5tZXRhZGF0YSkuZm9yRWFjaCgoW2ssIHZdKSA9PiB7XG4gICAgICAgICAgICAgICAgb2JqLm1ldGFkYXRhW2tdID0gdjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIG1lc3NhZ2UudGFnZ2luZyAhPT0gdW5kZWZpbmVkICYmIChvYmoudGFnZ2luZyA9IG1lc3NhZ2UudGFnZ2luZyk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTM1VwbG9hZCgpO1xuICAgICAgICBtZXNzYWdlLmFjY2Vzc0tleSA9IChfYSA9IG9iamVjdC5hY2Nlc3NLZXkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2Uuc2VjcmV0ID0gKF9iID0gb2JqZWN0LnNlY3JldCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5yZWdpb24gPSAoX2MgPSBvYmplY3QucmVnaW9uKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmVuZHBvaW50ID0gKF9kID0gb2JqZWN0LmVuZHBvaW50KSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmJ1Y2tldCA9IChfZSA9IG9iamVjdC5idWNrZXQpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuZm9yY2VQYXRoU3R5bGUgPSAoX2YgPSBvYmplY3QuZm9yY2VQYXRoU3R5bGUpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLm1ldGFkYXRhID0gT2JqZWN0LmVudHJpZXMoKF9nID0gb2JqZWN0Lm1ldGFkYXRhKSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiB7fSkucmVkdWNlKChhY2MsIFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBhY2Nba2V5XSA9IFN0cmluZyh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSk7XG4gICAgICAgIG1lc3NhZ2UudGFnZ2luZyA9IChfaCA9IG9iamVjdC50YWdnaW5nKSAhPT0gbnVsbCAmJiBfaCAhPT0gdm9pZCAwID8gX2ggOiBcIlwiO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VTM1VwbG9hZF9NZXRhZGF0YUVudHJ5KCkge1xuICAgIHJldHVybiB7IGtleTogXCJcIiwgdmFsdWU6IFwiXCIgfTtcbn1cbmV4cG9ydHMuUzNVcGxvYWRfTWV0YWRhdGFFbnRyeSA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmtleSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2Uua2V5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS52YWx1ZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVMzVXBsb2FkX01ldGFkYXRhRW50cnkoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmtleSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZhbHVlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7IGtleTogaXNTZXQob2JqZWN0LmtleSkgPyBTdHJpbmcob2JqZWN0LmtleSkgOiBcIlwiLCB2YWx1ZTogaXNTZXQob2JqZWN0LnZhbHVlKSA/IFN0cmluZyhvYmplY3QudmFsdWUpIDogXCJcIiB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2Uua2V5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5rZXkgPSBtZXNzYWdlLmtleSk7XG4gICAgICAgIG1lc3NhZ2UudmFsdWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnZhbHVlID0gbWVzc2FnZS52YWx1ZSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTM1VwbG9hZF9NZXRhZGF0YUVudHJ5KCk7XG4gICAgICAgIG1lc3NhZ2Uua2V5ID0gKF9hID0gb2JqZWN0LmtleSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS52YWx1ZSA9IChfYiA9IG9iamVjdC52YWx1ZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlR0NQVXBsb2FkKCkge1xuICAgIHJldHVybiB7IGNyZWRlbnRpYWxzOiBcIlwiLCBidWNrZXQ6IFwiXCIgfTtcbn1cbmV4cG9ydHMuR0NQVXBsb2FkID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY3JlZGVudGlhbHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmNyZWRlbnRpYWxzICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5jcmVkZW50aWFscyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYnVja2V0ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5idWNrZXQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLmJ1Y2tldCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlR0NQVXBsb2FkKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jcmVkZW50aWFscyA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmJ1Y2tldCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3JlZGVudGlhbHM6IGlzU2V0KG9iamVjdC5jcmVkZW50aWFscykgPyBTdHJpbmcob2JqZWN0LmNyZWRlbnRpYWxzKSA6IFwiXCIsXG4gICAgICAgICAgICBidWNrZXQ6IGlzU2V0KG9iamVjdC5idWNrZXQpID8gU3RyaW5nKG9iamVjdC5idWNrZXQpIDogXCJcIixcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmNyZWRlbnRpYWxzICE9PSB1bmRlZmluZWQgJiYgKG9iai5jcmVkZW50aWFscyA9IG1lc3NhZ2UuY3JlZGVudGlhbHMpO1xuICAgICAgICBtZXNzYWdlLmJ1Y2tldCAhPT0gdW5kZWZpbmVkICYmIChvYmouYnVja2V0ID0gbWVzc2FnZS5idWNrZXQpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlR0NQVXBsb2FkKCk7XG4gICAgICAgIG1lc3NhZ2UuY3JlZGVudGlhbHMgPSAoX2EgPSBvYmplY3QuY3JlZGVudGlhbHMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuYnVja2V0ID0gKF9iID0gb2JqZWN0LmJ1Y2tldCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlQXp1cmVCbG9iVXBsb2FkKCkge1xuICAgIHJldHVybiB7IGFjY291bnROYW1lOiBcIlwiLCBhY2NvdW50S2V5OiBcIlwiLCBjb250YWluZXJOYW1lOiBcIlwiIH07XG59XG5leHBvcnRzLkF6dXJlQmxvYlVwbG9hZCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmFjY291bnROYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5hY2NvdW50TmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UuYWNjb3VudE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmFjY291bnRLZXkgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmFjY291bnRLZXkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLmFjY291bnRLZXkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmNvbnRhaW5lck5hbWUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmNvbnRhaW5lck5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLmNvbnRhaW5lck5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUF6dXJlQmxvYlVwbG9hZCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWNjb3VudE5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hY2NvdW50S2V5ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY29udGFpbmVyTmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYWNjb3VudE5hbWU6IGlzU2V0KG9iamVjdC5hY2NvdW50TmFtZSkgPyBTdHJpbmcob2JqZWN0LmFjY291bnROYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBhY2NvdW50S2V5OiBpc1NldChvYmplY3QuYWNjb3VudEtleSkgPyBTdHJpbmcob2JqZWN0LmFjY291bnRLZXkpIDogXCJcIixcbiAgICAgICAgICAgIGNvbnRhaW5lck5hbWU6IGlzU2V0KG9iamVjdC5jb250YWluZXJOYW1lKSA/IFN0cmluZyhvYmplY3QuY29udGFpbmVyTmFtZSkgOiBcIlwiLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UuYWNjb3VudE5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmFjY291bnROYW1lID0gbWVzc2FnZS5hY2NvdW50TmFtZSk7XG4gICAgICAgIG1lc3NhZ2UuYWNjb3VudEtleSAhPT0gdW5kZWZpbmVkICYmIChvYmouYWNjb3VudEtleSA9IG1lc3NhZ2UuYWNjb3VudEtleSk7XG4gICAgICAgIG1lc3NhZ2UuY29udGFpbmVyTmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmouY29udGFpbmVyTmFtZSA9IG1lc3NhZ2UuY29udGFpbmVyTmFtZSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlQXp1cmVCbG9iVXBsb2FkKCk7XG4gICAgICAgIG1lc3NhZ2UuYWNjb3VudE5hbWUgPSAoX2EgPSBvYmplY3QuYWNjb3VudE5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuYWNjb3VudEtleSA9IChfYiA9IG9iamVjdC5hY2NvdW50S2V5KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmNvbnRhaW5lck5hbWUgPSAoX2MgPSBvYmplY3QuY29udGFpbmVyTmFtZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlQWxpT1NTVXBsb2FkKCkge1xuICAgIHJldHVybiB7IGFjY2Vzc0tleTogXCJcIiwgc2VjcmV0OiBcIlwiLCByZWdpb246IFwiXCIsIGVuZHBvaW50OiBcIlwiLCBidWNrZXQ6IFwiXCIgfTtcbn1cbmV4cG9ydHMuQWxpT1NTVXBsb2FkID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuYWNjZXNzS2V5ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5hY2Nlc3NLZXkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLmFjY2Vzc0tleSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VjcmV0ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5zZWNyZXQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLnNlY3JldCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucmVnaW9uICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yZWdpb24gIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLnJlZ2lvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZW5kcG9pbnQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmVuZHBvaW50ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcobWVzc2FnZS5lbmRwb2ludCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYnVja2V0ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5idWNrZXQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDIpLnN0cmluZyhtZXNzYWdlLmJ1Y2tldCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlQWxpT1NTVXBsb2FkKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hY2Nlc3NLZXkgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZWNyZXQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZWdpb24gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRwb2ludCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmJ1Y2tldCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYWNjZXNzS2V5OiBpc1NldChvYmplY3QuYWNjZXNzS2V5KSA/IFN0cmluZyhvYmplY3QuYWNjZXNzS2V5KSA6IFwiXCIsXG4gICAgICAgICAgICBzZWNyZXQ6IGlzU2V0KG9iamVjdC5zZWNyZXQpID8gU3RyaW5nKG9iamVjdC5zZWNyZXQpIDogXCJcIixcbiAgICAgICAgICAgIHJlZ2lvbjogaXNTZXQob2JqZWN0LnJlZ2lvbikgPyBTdHJpbmcob2JqZWN0LnJlZ2lvbikgOiBcIlwiLFxuICAgICAgICAgICAgZW5kcG9pbnQ6IGlzU2V0KG9iamVjdC5lbmRwb2ludCkgPyBTdHJpbmcob2JqZWN0LmVuZHBvaW50KSA6IFwiXCIsXG4gICAgICAgICAgICBidWNrZXQ6IGlzU2V0KG9iamVjdC5idWNrZXQpID8gU3RyaW5nKG9iamVjdC5idWNrZXQpIDogXCJcIixcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmFjY2Vzc0tleSAhPT0gdW5kZWZpbmVkICYmIChvYmouYWNjZXNzS2V5ID0gbWVzc2FnZS5hY2Nlc3NLZXkpO1xuICAgICAgICBtZXNzYWdlLnNlY3JldCAhPT0gdW5kZWZpbmVkICYmIChvYmouc2VjcmV0ID0gbWVzc2FnZS5zZWNyZXQpO1xuICAgICAgICBtZXNzYWdlLnJlZ2lvbiAhPT0gdW5kZWZpbmVkICYmIChvYmoucmVnaW9uID0gbWVzc2FnZS5yZWdpb24pO1xuICAgICAgICBtZXNzYWdlLmVuZHBvaW50ICE9PSB1bmRlZmluZWQgJiYgKG9iai5lbmRwb2ludCA9IG1lc3NhZ2UuZW5kcG9pbnQpO1xuICAgICAgICBtZXNzYWdlLmJ1Y2tldCAhPT0gdW5kZWZpbmVkICYmIChvYmouYnVja2V0ID0gbWVzc2FnZS5idWNrZXQpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlQWxpT1NTVXBsb2FkKCk7XG4gICAgICAgIG1lc3NhZ2UuYWNjZXNzS2V5ID0gKF9hID0gb2JqZWN0LmFjY2Vzc0tleSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5zZWNyZXQgPSAoX2IgPSBvYmplY3Quc2VjcmV0KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnJlZ2lvbiA9IChfYyA9IG9iamVjdC5yZWdpb24pICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuZW5kcG9pbnQgPSAoX2QgPSBvYmplY3QuZW5kcG9pbnQpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuYnVja2V0ID0gKF9lID0gb2JqZWN0LmJ1Y2tldCkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlU3RyZWFtT3V0cHV0KCkge1xuICAgIHJldHVybiB7IHByb3RvY29sOiAwLCB1cmxzOiBbXSB9O1xufVxuZXhwb3J0cy5TdHJlYW1PdXRwdXQgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5wcm90b2NvbCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UucHJvdG9jb2wgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoOCkuaW50MzIobWVzc2FnZS5wcm90b2NvbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudXJscyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UudXJscy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLnVybHMpIHtcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcodik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3RyZWFtT3V0cHV0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wcm90b2NvbCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXJscy5wdXNoKHJlYWRlci5zdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHByb3RvY29sOiBpc1NldChvYmplY3QucHJvdG9jb2wpID8gc3RyZWFtUHJvdG9jb2xGcm9tSlNPTihvYmplY3QucHJvdG9jb2wpIDogMCxcbiAgICAgICAgICAgIHVybHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LnVybHMpID8gb2JqZWN0LnVybHMubWFwKChlKSA9PiBTdHJpbmcoZSkpIDogW10sXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5wcm90b2NvbCAhPT0gdW5kZWZpbmVkICYmIChvYmoucHJvdG9jb2wgPSBzdHJlYW1Qcm90b2NvbFRvSlNPTihtZXNzYWdlLnByb3RvY29sKSk7XG4gICAgICAgIGlmIChtZXNzYWdlLnVybHMpIHtcbiAgICAgICAgICAgIG9iai51cmxzID0gbWVzc2FnZS51cmxzLm1hcCgoZSkgPT4gZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmoudXJscyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTdHJlYW1PdXRwdXQoKTtcbiAgICAgICAgbWVzc2FnZS5wcm90b2NvbCA9IChfYSA9IG9iamVjdC5wcm90b2NvbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcbiAgICAgICAgbWVzc2FnZS51cmxzID0gKChfYiA9IG9iamVjdC51cmxzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubWFwKChlKSA9PiBlKSkgfHwgW107XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUVuY29kaW5nT3B0aW9ucygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB3aWR0aDogMCxcbiAgICAgICAgaGVpZ2h0OiAwLFxuICAgICAgICBkZXB0aDogMCxcbiAgICAgICAgZnJhbWVyYXRlOiAwLFxuICAgICAgICBhdWRpb0NvZGVjOiAwLFxuICAgICAgICBhdWRpb0JpdHJhdGU6IDAsXG4gICAgICAgIGF1ZGlvRnJlcXVlbmN5OiAwLFxuICAgICAgICB2aWRlb0NvZGVjOiAwLFxuICAgICAgICB2aWRlb0JpdHJhdGU6IDAsXG4gICAgICAgIGtleUZyYW1lSW50ZXJ2YWw6IDAsXG4gICAgfTtcbn1cbmV4cG9ydHMuRW5jb2RpbmdPcHRpb25zID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2Uud2lkdGggIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLndpZHRoICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDgpLmludDMyKG1lc3NhZ2Uud2lkdGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaGVpZ2h0ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE2KS5pbnQzMihtZXNzYWdlLmhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZGVwdGggIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmRlcHRoICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI0KS5pbnQzMihtZXNzYWdlLmRlcHRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5mcmFtZXJhdGUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmZyYW1lcmF0ZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigzMikuaW50MzIobWVzc2FnZS5mcmFtZXJhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmF1ZGlvQ29kZWMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmF1ZGlvQ29kZWMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDApLmludDMyKG1lc3NhZ2UuYXVkaW9Db2RlYyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYXVkaW9CaXRyYXRlICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5hdWRpb0JpdHJhdGUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDgpLmludDMyKG1lc3NhZ2UuYXVkaW9CaXRyYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5hdWRpb0ZyZXF1ZW5jeSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuYXVkaW9GcmVxdWVuY3kgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNTYpLmludDMyKG1lc3NhZ2UuYXVkaW9GcmVxdWVuY3kpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnZpZGVvQ29kZWMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnZpZGVvQ29kZWMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNjQpLmludDMyKG1lc3NhZ2UudmlkZW9Db2RlYyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudmlkZW9CaXRyYXRlICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS52aWRlb0JpdHJhdGUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNzIpLmludDMyKG1lc3NhZ2UudmlkZW9CaXRyYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5rZXlGcmFtZUludGVydmFsICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5rZXlGcmFtZUludGVydmFsICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDgxKS5kb3VibGUobWVzc2FnZS5rZXlGcmFtZUludGVydmFsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VFbmNvZGluZ09wdGlvbnMoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLndpZHRoID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5oZWlnaHQgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlcHRoID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5mcmFtZXJhdGUgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmF1ZGlvQ29kZWMgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmF1ZGlvQml0cmF0ZSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYXVkaW9GcmVxdWVuY3kgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZpZGVvQ29kZWMgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZpZGVvQml0cmF0ZSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmtleUZyYW1lSW50ZXJ2YWwgPSByZWFkZXIuZG91YmxlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdpZHRoOiBpc1NldChvYmplY3Qud2lkdGgpID8gTnVtYmVyKG9iamVjdC53aWR0aCkgOiAwLFxuICAgICAgICAgICAgaGVpZ2h0OiBpc1NldChvYmplY3QuaGVpZ2h0KSA/IE51bWJlcihvYmplY3QuaGVpZ2h0KSA6IDAsXG4gICAgICAgICAgICBkZXB0aDogaXNTZXQob2JqZWN0LmRlcHRoKSA/IE51bWJlcihvYmplY3QuZGVwdGgpIDogMCxcbiAgICAgICAgICAgIGZyYW1lcmF0ZTogaXNTZXQob2JqZWN0LmZyYW1lcmF0ZSkgPyBOdW1iZXIob2JqZWN0LmZyYW1lcmF0ZSkgOiAwLFxuICAgICAgICAgICAgYXVkaW9Db2RlYzogaXNTZXQob2JqZWN0LmF1ZGlvQ29kZWMpID8gbGl2ZWtpdF9tb2RlbHNfMS5hdWRpb0NvZGVjRnJvbUpTT04ob2JqZWN0LmF1ZGlvQ29kZWMpIDogMCxcbiAgICAgICAgICAgIGF1ZGlvQml0cmF0ZTogaXNTZXQob2JqZWN0LmF1ZGlvQml0cmF0ZSkgPyBOdW1iZXIob2JqZWN0LmF1ZGlvQml0cmF0ZSkgOiAwLFxuICAgICAgICAgICAgYXVkaW9GcmVxdWVuY3k6IGlzU2V0KG9iamVjdC5hdWRpb0ZyZXF1ZW5jeSkgPyBOdW1iZXIob2JqZWN0LmF1ZGlvRnJlcXVlbmN5KSA6IDAsXG4gICAgICAgICAgICB2aWRlb0NvZGVjOiBpc1NldChvYmplY3QudmlkZW9Db2RlYykgPyBsaXZla2l0X21vZGVsc18xLnZpZGVvQ29kZWNGcm9tSlNPTihvYmplY3QudmlkZW9Db2RlYykgOiAwLFxuICAgICAgICAgICAgdmlkZW9CaXRyYXRlOiBpc1NldChvYmplY3QudmlkZW9CaXRyYXRlKSA/IE51bWJlcihvYmplY3QudmlkZW9CaXRyYXRlKSA6IDAsXG4gICAgICAgICAgICBrZXlGcmFtZUludGVydmFsOiBpc1NldChvYmplY3Qua2V5RnJhbWVJbnRlcnZhbCkgPyBOdW1iZXIob2JqZWN0LmtleUZyYW1lSW50ZXJ2YWwpIDogMCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLndpZHRoICE9PSB1bmRlZmluZWQgJiYgKG9iai53aWR0aCA9IE1hdGgucm91bmQobWVzc2FnZS53aWR0aCkpO1xuICAgICAgICBtZXNzYWdlLmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIChvYmouaGVpZ2h0ID0gTWF0aC5yb3VuZChtZXNzYWdlLmhlaWdodCkpO1xuICAgICAgICBtZXNzYWdlLmRlcHRoICE9PSB1bmRlZmluZWQgJiYgKG9iai5kZXB0aCA9IE1hdGgucm91bmQobWVzc2FnZS5kZXB0aCkpO1xuICAgICAgICBtZXNzYWdlLmZyYW1lcmF0ZSAhPT0gdW5kZWZpbmVkICYmIChvYmouZnJhbWVyYXRlID0gTWF0aC5yb3VuZChtZXNzYWdlLmZyYW1lcmF0ZSkpO1xuICAgICAgICBtZXNzYWdlLmF1ZGlvQ29kZWMgIT09IHVuZGVmaW5lZCAmJiAob2JqLmF1ZGlvQ29kZWMgPSBsaXZla2l0X21vZGVsc18xLmF1ZGlvQ29kZWNUb0pTT04obWVzc2FnZS5hdWRpb0NvZGVjKSk7XG4gICAgICAgIG1lc3NhZ2UuYXVkaW9CaXRyYXRlICE9PSB1bmRlZmluZWQgJiYgKG9iai5hdWRpb0JpdHJhdGUgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuYXVkaW9CaXRyYXRlKSk7XG4gICAgICAgIG1lc3NhZ2UuYXVkaW9GcmVxdWVuY3kgIT09IHVuZGVmaW5lZCAmJiAob2JqLmF1ZGlvRnJlcXVlbmN5ID0gTWF0aC5yb3VuZChtZXNzYWdlLmF1ZGlvRnJlcXVlbmN5KSk7XG4gICAgICAgIG1lc3NhZ2UudmlkZW9Db2RlYyAhPT0gdW5kZWZpbmVkICYmIChvYmoudmlkZW9Db2RlYyA9IGxpdmVraXRfbW9kZWxzXzEudmlkZW9Db2RlY1RvSlNPTihtZXNzYWdlLnZpZGVvQ29kZWMpKTtcbiAgICAgICAgbWVzc2FnZS52aWRlb0JpdHJhdGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnZpZGVvQml0cmF0ZSA9IE1hdGgucm91bmQobWVzc2FnZS52aWRlb0JpdHJhdGUpKTtcbiAgICAgICAgbWVzc2FnZS5rZXlGcmFtZUludGVydmFsICE9PSB1bmRlZmluZWQgJiYgKG9iai5rZXlGcmFtZUludGVydmFsID0gbWVzc2FnZS5rZXlGcmFtZUludGVydmFsKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaiwgX2s7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlRW5jb2RpbmdPcHRpb25zKCk7XG4gICAgICAgIG1lc3NhZ2Uud2lkdGggPSAoX2EgPSBvYmplY3Qud2lkdGgpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDA7XG4gICAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gKF9iID0gb2JqZWN0LmhlaWdodCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMDtcbiAgICAgICAgbWVzc2FnZS5kZXB0aCA9IChfYyA9IG9iamVjdC5kZXB0aCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMDtcbiAgICAgICAgbWVzc2FnZS5mcmFtZXJhdGUgPSAoX2QgPSBvYmplY3QuZnJhbWVyYXRlKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAwO1xuICAgICAgICBtZXNzYWdlLmF1ZGlvQ29kZWMgPSAoX2UgPSBvYmplY3QuYXVkaW9Db2RlYykgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogMDtcbiAgICAgICAgbWVzc2FnZS5hdWRpb0JpdHJhdGUgPSAoX2YgPSBvYmplY3QuYXVkaW9CaXRyYXRlKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiAwO1xuICAgICAgICBtZXNzYWdlLmF1ZGlvRnJlcXVlbmN5ID0gKF9nID0gb2JqZWN0LmF1ZGlvRnJlcXVlbmN5KSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiAwO1xuICAgICAgICBtZXNzYWdlLnZpZGVvQ29kZWMgPSAoX2ggPSBvYmplY3QudmlkZW9Db2RlYykgIT09IG51bGwgJiYgX2ggIT09IHZvaWQgMCA/IF9oIDogMDtcbiAgICAgICAgbWVzc2FnZS52aWRlb0JpdHJhdGUgPSAoX2ogPSBvYmplY3QudmlkZW9CaXRyYXRlKSAhPT0gbnVsbCAmJiBfaiAhPT0gdm9pZCAwID8gX2ogOiAwO1xuICAgICAgICBtZXNzYWdlLmtleUZyYW1lSW50ZXJ2YWwgPSAoX2sgPSBvYmplY3Qua2V5RnJhbWVJbnRlcnZhbCkgIT09IG51bGwgJiYgX2sgIT09IHZvaWQgMCA/IF9rIDogMDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVXBkYXRlTGF5b3V0UmVxdWVzdCgpIHtcbiAgICByZXR1cm4geyBlZ3Jlc3NJZDogXCJcIiwgbGF5b3V0OiBcIlwiIH07XG59XG5leHBvcnRzLlVwZGF0ZUxheW91dFJlcXVlc3QgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5lZ3Jlc3NJZCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZWdyZXNzSWQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLmVncmVzc0lkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5sYXlvdXQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmxheW91dCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UubGF5b3V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VVcGRhdGVMYXlvdXRSZXF1ZXN0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lZ3Jlc3NJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxheW91dCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZWdyZXNzSWQ6IGlzU2V0KG9iamVjdC5lZ3Jlc3NJZCkgPyBTdHJpbmcob2JqZWN0LmVncmVzc0lkKSA6IFwiXCIsXG4gICAgICAgICAgICBsYXlvdXQ6IGlzU2V0KG9iamVjdC5sYXlvdXQpID8gU3RyaW5nKG9iamVjdC5sYXlvdXQpIDogXCJcIixcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmVncmVzc0lkICE9PSB1bmRlZmluZWQgJiYgKG9iai5lZ3Jlc3NJZCA9IG1lc3NhZ2UuZWdyZXNzSWQpO1xuICAgICAgICBtZXNzYWdlLmxheW91dCAhPT0gdW5kZWZpbmVkICYmIChvYmoubGF5b3V0ID0gbWVzc2FnZS5sYXlvdXQpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVXBkYXRlTGF5b3V0UmVxdWVzdCgpO1xuICAgICAgICBtZXNzYWdlLmVncmVzc0lkID0gKF9hID0gb2JqZWN0LmVncmVzc0lkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmxheW91dCA9IChfYiA9IG9iamVjdC5sYXlvdXQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVVwZGF0ZVN0cmVhbVJlcXVlc3QoKSB7XG4gICAgcmV0dXJuIHsgZWdyZXNzSWQ6IFwiXCIsIGFkZE91dHB1dFVybHM6IFtdLCByZW1vdmVPdXRwdXRVcmxzOiBbXSB9O1xufVxuZXhwb3J0cy5VcGRhdGVTdHJlYW1SZXF1ZXN0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZWdyZXNzSWQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmVncmVzc0lkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5lZ3Jlc3NJZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYWRkT3V0cHV0VXJscyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuYWRkT3V0cHV0VXJscy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLmFkZE91dHB1dFVybHMpIHtcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcodik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucmVtb3ZlT3V0cHV0VXJscyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UucmVtb3ZlT3V0cHV0VXJscy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLnJlbW92ZU91dHB1dFVybHMpIHtcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcodik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVXBkYXRlU3RyZWFtUmVxdWVzdCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZWdyZXNzSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hZGRPdXRwdXRVcmxzLnB1c2gocmVhZGVyLnN0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlbW92ZU91dHB1dFVybHMucHVzaChyZWFkZXIuc3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlZ3Jlc3NJZDogaXNTZXQob2JqZWN0LmVncmVzc0lkKSA/IFN0cmluZyhvYmplY3QuZWdyZXNzSWQpIDogXCJcIixcbiAgICAgICAgICAgIGFkZE91dHB1dFVybHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmFkZE91dHB1dFVybHMpID8gb2JqZWN0LmFkZE91dHB1dFVybHMubWFwKChlKSA9PiBTdHJpbmcoZSkpIDogW10sXG4gICAgICAgICAgICByZW1vdmVPdXRwdXRVcmxzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5yZW1vdmVPdXRwdXRVcmxzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LnJlbW92ZU91dHB1dFVybHMubWFwKChlKSA9PiBTdHJpbmcoZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmVncmVzc0lkICE9PSB1bmRlZmluZWQgJiYgKG9iai5lZ3Jlc3NJZCA9IG1lc3NhZ2UuZWdyZXNzSWQpO1xuICAgICAgICBpZiAobWVzc2FnZS5hZGRPdXRwdXRVcmxzKSB7XG4gICAgICAgICAgICBvYmouYWRkT3V0cHV0VXJscyA9IG1lc3NhZ2UuYWRkT3V0cHV0VXJscy5tYXAoKGUpID0+IGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLmFkZE91dHB1dFVybHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5yZW1vdmVPdXRwdXRVcmxzKSB7XG4gICAgICAgICAgICBvYmoucmVtb3ZlT3V0cHV0VXJscyA9IG1lc3NhZ2UucmVtb3ZlT3V0cHV0VXJscy5tYXAoKGUpID0+IGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLnJlbW92ZU91dHB1dFVybHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVVwZGF0ZVN0cmVhbVJlcXVlc3QoKTtcbiAgICAgICAgbWVzc2FnZS5lZ3Jlc3NJZCA9IChfYSA9IG9iamVjdC5lZ3Jlc3NJZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5hZGRPdXRwdXRVcmxzID0gKChfYiA9IG9iamVjdC5hZGRPdXRwdXRVcmxzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubWFwKChlKSA9PiBlKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2UucmVtb3ZlT3V0cHV0VXJscyA9ICgoX2MgPSBvYmplY3QucmVtb3ZlT3V0cHV0VXJscykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLm1hcCgoZSkgPT4gZSkpIHx8IFtdO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VVcGRhdGVPdXRwdXRzUmVxdWVzdCgpIHtcbiAgICByZXR1cm4geyBlZ3Jlc3NJZDogXCJcIiwgYWRkSW1hZ2VPdXRwdXRzOiBbXSwgcmVtb3ZlSW1hZ2VPdXRwdXRzOiBbXSB9O1xufVxuZXhwb3J0cy5VcGRhdGVPdXRwdXRzUmVxdWVzdCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmVncmVzc0lkICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5lZ3Jlc3NJZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UuZWdyZXNzSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmFkZEltYWdlT3V0cHV0cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuYWRkSW1hZ2VPdXRwdXRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UuYWRkSW1hZ2VPdXRwdXRzKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5JbWFnZU91dHB1dC5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5yZW1vdmVJbWFnZU91dHB1dHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnJlbW92ZUltYWdlT3V0cHV0cy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLnJlbW92ZUltYWdlT3V0cHV0cykge1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuSW1hZ2VPdXRwdXQuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVXBkYXRlT3V0cHV0c1JlcXVlc3QoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVncmVzc0lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWRkSW1hZ2VPdXRwdXRzLnB1c2goZXhwb3J0cy5JbWFnZU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlbW92ZUltYWdlT3V0cHV0cy5wdXNoKGV4cG9ydHMuSW1hZ2VPdXRwdXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVncmVzc0lkOiBpc1NldChvYmplY3QuZWdyZXNzSWQpID8gU3RyaW5nKG9iamVjdC5lZ3Jlc3NJZCkgOiBcIlwiLFxuICAgICAgICAgICAgYWRkSW1hZ2VPdXRwdXRzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5hZGRJbWFnZU91dHB1dHMpXG4gICAgICAgICAgICAgICAgPyBvYmplY3QuYWRkSW1hZ2VPdXRwdXRzLm1hcCgoZSkgPT4gZXhwb3J0cy5JbWFnZU91dHB1dC5mcm9tSlNPTihlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgcmVtb3ZlSW1hZ2VPdXRwdXRzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5yZW1vdmVJbWFnZU91dHB1dHMpXG4gICAgICAgICAgICAgICAgPyBvYmplY3QucmVtb3ZlSW1hZ2VPdXRwdXRzLm1hcCgoZSkgPT4gZXhwb3J0cy5JbWFnZU91dHB1dC5mcm9tSlNPTihlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UuZWdyZXNzSWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmVncmVzc0lkID0gbWVzc2FnZS5lZ3Jlc3NJZCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmFkZEltYWdlT3V0cHV0cykge1xuICAgICAgICAgICAgb2JqLmFkZEltYWdlT3V0cHV0cyA9IG1lc3NhZ2UuYWRkSW1hZ2VPdXRwdXRzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuSW1hZ2VPdXRwdXQudG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5hZGRJbWFnZU91dHB1dHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5yZW1vdmVJbWFnZU91dHB1dHMpIHtcbiAgICAgICAgICAgIG9iai5yZW1vdmVJbWFnZU91dHB1dHMgPSBtZXNzYWdlLnJlbW92ZUltYWdlT3V0cHV0cy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLkltYWdlT3V0cHV0LnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmoucmVtb3ZlSW1hZ2VPdXRwdXRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VVcGRhdGVPdXRwdXRzUmVxdWVzdCgpO1xuICAgICAgICBtZXNzYWdlLmVncmVzc0lkID0gKF9hID0gb2JqZWN0LmVncmVzc0lkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmFkZEltYWdlT3V0cHV0cyA9ICgoX2IgPSBvYmplY3QuYWRkSW1hZ2VPdXRwdXRzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubWFwKChlKSA9PiBleHBvcnRzLkltYWdlT3V0cHV0LmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2UucmVtb3ZlSW1hZ2VPdXRwdXRzID0gKChfYyA9IG9iamVjdC5yZW1vdmVJbWFnZU91dHB1dHMpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5tYXAoKGUpID0+IGV4cG9ydHMuSW1hZ2VPdXRwdXQuZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlTGlzdEVncmVzc1JlcXVlc3QoKSB7XG4gICAgcmV0dXJuIHsgcm9vbU5hbWU6IFwiXCIsIGVncmVzc0lkOiBcIlwiLCBhY3RpdmU6IGZhbHNlIH07XG59XG5leHBvcnRzLkxpc3RFZ3Jlc3NSZXF1ZXN0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vbU5hbWUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnJvb21OYW1lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5yb29tTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZWdyZXNzSWQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmVncmVzc0lkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5lZ3Jlc3NJZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYWN0aXZlID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI0KS5ib29sKG1lc3NhZ2UuYWN0aXZlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VMaXN0RWdyZXNzUmVxdWVzdCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbU5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lZ3Jlc3NJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFjdGl2ZSA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJvb21OYW1lOiBpc1NldChvYmplY3Qucm9vbU5hbWUpID8gU3RyaW5nKG9iamVjdC5yb29tTmFtZSkgOiBcIlwiLFxuICAgICAgICAgICAgZWdyZXNzSWQ6IGlzU2V0KG9iamVjdC5lZ3Jlc3NJZCkgPyBTdHJpbmcob2JqZWN0LmVncmVzc0lkKSA6IFwiXCIsXG4gICAgICAgICAgICBhY3RpdmU6IGlzU2V0KG9iamVjdC5hY3RpdmUpID8gQm9vbGVhbihvYmplY3QuYWN0aXZlKSA6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2Uucm9vbU5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnJvb21OYW1lID0gbWVzc2FnZS5yb29tTmFtZSk7XG4gICAgICAgIG1lc3NhZ2UuZWdyZXNzSWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmVncmVzc0lkID0gbWVzc2FnZS5lZ3Jlc3NJZCk7XG4gICAgICAgIG1lc3NhZ2UuYWN0aXZlICE9PSB1bmRlZmluZWQgJiYgKG9iai5hY3RpdmUgPSBtZXNzYWdlLmFjdGl2ZSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTGlzdEVncmVzc1JlcXVlc3QoKTtcbiAgICAgICAgbWVzc2FnZS5yb29tTmFtZSA9IChfYSA9IG9iamVjdC5yb29tTmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5lZ3Jlc3NJZCA9IChfYiA9IG9iamVjdC5lZ3Jlc3NJZCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5hY3RpdmUgPSAoX2MgPSBvYmplY3QuYWN0aXZlKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlTGlzdEVncmVzc1Jlc3BvbnNlKCkge1xuICAgIHJldHVybiB7IGl0ZW1zOiBbXSB9O1xufVxuZXhwb3J0cy5MaXN0RWdyZXNzUmVzcG9uc2UgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5pdGVtcyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaXRlbXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5pdGVtcykge1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuRWdyZXNzSW5mby5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VMaXN0RWdyZXNzUmVzcG9uc2UoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLml0ZW1zLnB1c2goZXhwb3J0cy5FZ3Jlc3NJbmZvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7IGl0ZW1zOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5pdGVtcykgPyBvYmplY3QuaXRlbXMubWFwKChlKSA9PiBleHBvcnRzLkVncmVzc0luZm8uZnJvbUpTT04oZSkpIDogW10gfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBpZiAobWVzc2FnZS5pdGVtcykge1xuICAgICAgICAgICAgb2JqLml0ZW1zID0gbWVzc2FnZS5pdGVtcy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLkVncmVzc0luZm8udG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5pdGVtcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUxpc3RFZ3Jlc3NSZXNwb25zZSgpO1xuICAgICAgICBtZXNzYWdlLml0ZW1zID0gKChfYSA9IG9iamVjdC5pdGVtcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hcCgoZSkgPT4gZXhwb3J0cy5FZ3Jlc3NJbmZvLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVN0b3BFZ3Jlc3NSZXF1ZXN0KCkge1xuICAgIHJldHVybiB7IGVncmVzc0lkOiBcIlwiIH07XG59XG5leHBvcnRzLlN0b3BFZ3Jlc3NSZXF1ZXN0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZWdyZXNzSWQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmVncmVzc0lkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5lZ3Jlc3NJZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3RvcEVncmVzc1JlcXVlc3QoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVncmVzc0lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7IGVncmVzc0lkOiBpc1NldChvYmplY3QuZWdyZXNzSWQpID8gU3RyaW5nKG9iamVjdC5lZ3Jlc3NJZCkgOiBcIlwiIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5lZ3Jlc3NJZCAhPT0gdW5kZWZpbmVkICYmIChvYmouZWdyZXNzSWQgPSBtZXNzYWdlLmVncmVzc0lkKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3RvcEVncmVzc1JlcXVlc3QoKTtcbiAgICAgICAgbWVzc2FnZS5lZ3Jlc3NJZCA9IChfYSA9IG9iamVjdC5lZ3Jlc3NJZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlRWdyZXNzSW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBlZ3Jlc3NJZDogXCJcIixcbiAgICAgICAgcm9vbUlkOiBcIlwiLFxuICAgICAgICByb29tTmFtZTogXCJcIixcbiAgICAgICAgc3RhdHVzOiAwLFxuICAgICAgICBzdGFydGVkQXQ6IDAsXG4gICAgICAgIGVuZGVkQXQ6IDAsXG4gICAgICAgIHVwZGF0ZWRBdDogMCxcbiAgICAgICAgZXJyb3I6IFwiXCIsXG4gICAgICAgIHJvb21Db21wb3NpdGU6IHVuZGVmaW5lZCxcbiAgICAgICAgd2ViOiB1bmRlZmluZWQsXG4gICAgICAgIHBhcnRpY2lwYW50OiB1bmRlZmluZWQsXG4gICAgICAgIHRyYWNrQ29tcG9zaXRlOiB1bmRlZmluZWQsXG4gICAgICAgIHRyYWNrOiB1bmRlZmluZWQsXG4gICAgICAgIHN0cmVhbTogdW5kZWZpbmVkLFxuICAgICAgICBmaWxlOiB1bmRlZmluZWQsXG4gICAgICAgIHNlZ21lbnRzOiB1bmRlZmluZWQsXG4gICAgICAgIHN0cmVhbVJlc3VsdHM6IFtdLFxuICAgICAgICBmaWxlUmVzdWx0czogW10sXG4gICAgICAgIHNlZ21lbnRSZXN1bHRzOiBbXSxcbiAgICAgICAgaW1hZ2VSZXN1bHRzOiBbXSxcbiAgICB9O1xufVxuZXhwb3J0cy5FZ3Jlc3NJbmZvID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZWdyZXNzSWQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmVncmVzc0lkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5lZ3Jlc3NJZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vbUlkICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yb29tSWQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLnJvb21JZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vbU5hbWUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnJvb21OYW1lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwNikuc3RyaW5nKG1lc3NhZ2Uucm9vbU5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0YXR1cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc3RhdHVzICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI0KS5pbnQzMihtZXNzYWdlLnN0YXR1cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhcnRlZEF0ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5zdGFydGVkQXQgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoODApLmludDY0KG1lc3NhZ2Uuc3RhcnRlZEF0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5lbmRlZEF0ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5lbmRlZEF0ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDg4KS5pbnQ2NChtZXNzYWdlLmVuZGVkQXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnVwZGF0ZWRBdCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UudXBkYXRlZEF0ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE0NCkuaW50NjQobWVzc2FnZS51cGRhdGVkQXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmVycm9yICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5lcnJvciAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig3NCkuc3RyaW5nKG1lc3NhZ2UuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb21Db21wb3NpdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5Sb29tQ29tcG9zaXRlRWdyZXNzUmVxdWVzdC5lbmNvZGUobWVzc2FnZS5yb29tQ29tcG9zaXRlLCB3cml0ZXIudWludDMyKDM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLndlYiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLldlYkVncmVzc1JlcXVlc3QuZW5jb2RlKG1lc3NhZ2Uud2ViLCB3cml0ZXIudWludDMyKDExNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wYXJ0aWNpcGFudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlBhcnRpY2lwYW50RWdyZXNzUmVxdWVzdC5lbmNvZGUobWVzc2FnZS5wYXJ0aWNpcGFudCwgd3JpdGVyLnVpbnQzMigxNTQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudHJhY2tDb21wb3NpdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5UcmFja0NvbXBvc2l0ZUVncmVzc1JlcXVlc3QuZW5jb2RlKG1lc3NhZ2UudHJhY2tDb21wb3NpdGUsIHdyaXRlci51aW50MzIoNDIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudHJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5UcmFja0VncmVzc1JlcXVlc3QuZW5jb2RlKG1lc3NhZ2UudHJhY2ssIHdyaXRlci51aW50MzIoNTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RyZWFtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuU3RyZWFtSW5mb0xpc3QuZW5jb2RlKG1lc3NhZ2Uuc3RyZWFtLCB3cml0ZXIudWludDMyKDU4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZpbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5GaWxlSW5mby5lbmNvZGUobWVzc2FnZS5maWxlLCB3cml0ZXIudWludDMyKDY2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnNlZ21lbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuU2VnbWVudHNJbmZvLmVuY29kZShtZXNzYWdlLnNlZ21lbnRzLCB3cml0ZXIudWludDMyKDk4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0cmVhbVJlc3VsdHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnN0cmVhbVJlc3VsdHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5zdHJlYW1SZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5TdHJlYW1JbmZvLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDEyMikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5maWxlUmVzdWx0cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZmlsZVJlc3VsdHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5maWxlUmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuRmlsZUluZm8uZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTMwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnNlZ21lbnRSZXN1bHRzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5zZWdtZW50UmVzdWx0cy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLnNlZ21lbnRSZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5TZWdtZW50c0luZm8uZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTM4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmltYWdlUmVzdWx0cyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaW1hZ2VSZXN1bHRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UuaW1hZ2VSZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5JbWFnZXNJbmZvLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDE2MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VFZ3Jlc3NJbmZvKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lZ3Jlc3NJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvb21JZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb29tTmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXR1cyA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXJ0ZWRBdCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kZWRBdCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTg6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXBkYXRlZEF0ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVycm9yID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbUNvbXBvc2l0ZSA9IGV4cG9ydHMuUm9vbUNvbXBvc2l0ZUVncmVzc1JlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS53ZWIgPSBleHBvcnRzLldlYkVncmVzc1JlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxOTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudCA9IGV4cG9ydHMuUGFydGljaXBhbnRFZ3Jlc3NSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmFja0NvbXBvc2l0ZSA9IGV4cG9ydHMuVHJhY2tDb21wb3NpdGVFZ3Jlc3NSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmFjayA9IGV4cG9ydHMuVHJhY2tFZ3Jlc3NSZXF1ZXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdHJlYW0gPSBleHBvcnRzLlN0cmVhbUluZm9MaXN0LmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5maWxlID0gZXhwb3J0cy5GaWxlSW5mby5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlZ21lbnRzID0gZXhwb3J0cy5TZWdtZW50c0luZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdHJlYW1SZXN1bHRzLnB1c2goZXhwb3J0cy5TdHJlYW1JbmZvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZpbGVSZXN1bHRzLnB1c2goZXhwb3J0cy5GaWxlSW5mby5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxNzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZWdtZW50UmVzdWx0cy5wdXNoKGV4cG9ydHMuU2VnbWVudHNJbmZvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDIwOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmltYWdlUmVzdWx0cy5wdXNoKGV4cG9ydHMuSW1hZ2VzSW5mby5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZWdyZXNzSWQ6IGlzU2V0KG9iamVjdC5lZ3Jlc3NJZCkgPyBTdHJpbmcob2JqZWN0LmVncmVzc0lkKSA6IFwiXCIsXG4gICAgICAgICAgICByb29tSWQ6IGlzU2V0KG9iamVjdC5yb29tSWQpID8gU3RyaW5nKG9iamVjdC5yb29tSWQpIDogXCJcIixcbiAgICAgICAgICAgIHJvb21OYW1lOiBpc1NldChvYmplY3Qucm9vbU5hbWUpID8gU3RyaW5nKG9iamVjdC5yb29tTmFtZSkgOiBcIlwiLFxuICAgICAgICAgICAgc3RhdHVzOiBpc1NldChvYmplY3Quc3RhdHVzKSA/IGVncmVzc1N0YXR1c0Zyb21KU09OKG9iamVjdC5zdGF0dXMpIDogMCxcbiAgICAgICAgICAgIHN0YXJ0ZWRBdDogaXNTZXQob2JqZWN0LnN0YXJ0ZWRBdCkgPyBOdW1iZXIob2JqZWN0LnN0YXJ0ZWRBdCkgOiAwLFxuICAgICAgICAgICAgZW5kZWRBdDogaXNTZXQob2JqZWN0LmVuZGVkQXQpID8gTnVtYmVyKG9iamVjdC5lbmRlZEF0KSA6IDAsXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IGlzU2V0KG9iamVjdC51cGRhdGVkQXQpID8gTnVtYmVyKG9iamVjdC51cGRhdGVkQXQpIDogMCxcbiAgICAgICAgICAgIGVycm9yOiBpc1NldChvYmplY3QuZXJyb3IpID8gU3RyaW5nKG9iamVjdC5lcnJvcikgOiBcIlwiLFxuICAgICAgICAgICAgcm9vbUNvbXBvc2l0ZTogaXNTZXQob2JqZWN0LnJvb21Db21wb3NpdGUpXG4gICAgICAgICAgICAgICAgPyBleHBvcnRzLlJvb21Db21wb3NpdGVFZ3Jlc3NSZXF1ZXN0LmZyb21KU09OKG9iamVjdC5yb29tQ29tcG9zaXRlKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgd2ViOiBpc1NldChvYmplY3Qud2ViKSA/IGV4cG9ydHMuV2ViRWdyZXNzUmVxdWVzdC5mcm9tSlNPTihvYmplY3Qud2ViKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHBhcnRpY2lwYW50OiBpc1NldChvYmplY3QucGFydGljaXBhbnQpID8gZXhwb3J0cy5QYXJ0aWNpcGFudEVncmVzc1JlcXVlc3QuZnJvbUpTT04ob2JqZWN0LnBhcnRpY2lwYW50KSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHRyYWNrQ29tcG9zaXRlOiBpc1NldChvYmplY3QudHJhY2tDb21wb3NpdGUpXG4gICAgICAgICAgICAgICAgPyBleHBvcnRzLlRyYWNrQ29tcG9zaXRlRWdyZXNzUmVxdWVzdC5mcm9tSlNPTihvYmplY3QudHJhY2tDb21wb3NpdGUpXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB0cmFjazogaXNTZXQob2JqZWN0LnRyYWNrKSA/IGV4cG9ydHMuVHJhY2tFZ3Jlc3NSZXF1ZXN0LmZyb21KU09OKG9iamVjdC50cmFjaykgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzdHJlYW06IGlzU2V0KG9iamVjdC5zdHJlYW0pID8gZXhwb3J0cy5TdHJlYW1JbmZvTGlzdC5mcm9tSlNPTihvYmplY3Quc3RyZWFtKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGZpbGU6IGlzU2V0KG9iamVjdC5maWxlKSA/IGV4cG9ydHMuRmlsZUluZm8uZnJvbUpTT04ob2JqZWN0LmZpbGUpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc2VnbWVudHM6IGlzU2V0KG9iamVjdC5zZWdtZW50cykgPyBleHBvcnRzLlNlZ21lbnRzSW5mby5mcm9tSlNPTihvYmplY3Quc2VnbWVudHMpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc3RyZWFtUmVzdWx0czogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3Quc3RyZWFtUmVzdWx0cylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5zdHJlYW1SZXN1bHRzLm1hcCgoZSkgPT4gZXhwb3J0cy5TdHJlYW1JbmZvLmZyb21KU09OKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgICAgICBmaWxlUmVzdWx0czogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QuZmlsZVJlc3VsdHMpID8gb2JqZWN0LmZpbGVSZXN1bHRzLm1hcCgoZSkgPT4gZXhwb3J0cy5GaWxlSW5mby5mcm9tSlNPTihlKSkgOiBbXSxcbiAgICAgICAgICAgIHNlZ21lbnRSZXN1bHRzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5zZWdtZW50UmVzdWx0cylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5zZWdtZW50UmVzdWx0cy5tYXAoKGUpID0+IGV4cG9ydHMuU2VnbWVudHNJbmZvLmZyb21KU09OKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgICAgICBpbWFnZVJlc3VsdHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmltYWdlUmVzdWx0cylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5pbWFnZVJlc3VsdHMubWFwKChlKSA9PiBleHBvcnRzLkltYWdlc0luZm8uZnJvbUpTT04oZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmVncmVzc0lkICE9PSB1bmRlZmluZWQgJiYgKG9iai5lZ3Jlc3NJZCA9IG1lc3NhZ2UuZWdyZXNzSWQpO1xuICAgICAgICBtZXNzYWdlLnJvb21JZCAhPT0gdW5kZWZpbmVkICYmIChvYmoucm9vbUlkID0gbWVzc2FnZS5yb29tSWQpO1xuICAgICAgICBtZXNzYWdlLnJvb21OYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5yb29tTmFtZSA9IG1lc3NhZ2Uucm9vbU5hbWUpO1xuICAgICAgICBtZXNzYWdlLnN0YXR1cyAhPT0gdW5kZWZpbmVkICYmIChvYmouc3RhdHVzID0gZWdyZXNzU3RhdHVzVG9KU09OKG1lc3NhZ2Uuc3RhdHVzKSk7XG4gICAgICAgIG1lc3NhZ2Uuc3RhcnRlZEF0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5zdGFydGVkQXQgPSBNYXRoLnJvdW5kKG1lc3NhZ2Uuc3RhcnRlZEF0KSk7XG4gICAgICAgIG1lc3NhZ2UuZW5kZWRBdCAhPT0gdW5kZWZpbmVkICYmIChvYmouZW5kZWRBdCA9IE1hdGgucm91bmQobWVzc2FnZS5lbmRlZEF0KSk7XG4gICAgICAgIG1lc3NhZ2UudXBkYXRlZEF0ICE9PSB1bmRlZmluZWQgJiYgKG9iai51cGRhdGVkQXQgPSBNYXRoLnJvdW5kKG1lc3NhZ2UudXBkYXRlZEF0KSk7XG4gICAgICAgIG1lc3NhZ2UuZXJyb3IgIT09IHVuZGVmaW5lZCAmJiAob2JqLmVycm9yID0gbWVzc2FnZS5lcnJvcik7XG4gICAgICAgIG1lc3NhZ2Uucm9vbUNvbXBvc2l0ZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLnJvb21Db21wb3NpdGUgPSBtZXNzYWdlLnJvb21Db21wb3NpdGVcbiAgICAgICAgICAgICAgICA/IGV4cG9ydHMuUm9vbUNvbXBvc2l0ZUVncmVzc1JlcXVlc3QudG9KU09OKG1lc3NhZ2Uucm9vbUNvbXBvc2l0ZSlcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2Uud2ViICE9PSB1bmRlZmluZWQgJiYgKG9iai53ZWIgPSBtZXNzYWdlLndlYiA/IGV4cG9ydHMuV2ViRWdyZXNzUmVxdWVzdC50b0pTT04obWVzc2FnZS53ZWIpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLnBhcnRpY2lwYW50ID0gbWVzc2FnZS5wYXJ0aWNpcGFudCA/IGV4cG9ydHMuUGFydGljaXBhbnRFZ3Jlc3NSZXF1ZXN0LnRvSlNPTihtZXNzYWdlLnBhcnRpY2lwYW50KSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UudHJhY2tDb21wb3NpdGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnRyYWNrQ29tcG9zaXRlID0gbWVzc2FnZS50cmFja0NvbXBvc2l0ZVxuICAgICAgICAgICAgPyBleHBvcnRzLlRyYWNrQ29tcG9zaXRlRWdyZXNzUmVxdWVzdC50b0pTT04obWVzc2FnZS50cmFja0NvbXBvc2l0ZSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS50cmFjayAhPT0gdW5kZWZpbmVkICYmIChvYmoudHJhY2sgPSBtZXNzYWdlLnRyYWNrID8gZXhwb3J0cy5UcmFja0VncmVzc1JlcXVlc3QudG9KU09OKG1lc3NhZ2UudHJhY2spIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5zdHJlYW0gIT09IHVuZGVmaW5lZCAmJiAob2JqLnN0cmVhbSA9IG1lc3NhZ2Uuc3RyZWFtID8gZXhwb3J0cy5TdHJlYW1JbmZvTGlzdC50b0pTT04obWVzc2FnZS5zdHJlYW0pIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5maWxlICE9PSB1bmRlZmluZWQgJiYgKG9iai5maWxlID0gbWVzc2FnZS5maWxlID8gZXhwb3J0cy5GaWxlSW5mby50b0pTT04obWVzc2FnZS5maWxlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2Uuc2VnbWVudHMgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5zZWdtZW50cyA9IG1lc3NhZ2Uuc2VnbWVudHMgPyBleHBvcnRzLlNlZ21lbnRzSW5mby50b0pTT04obWVzc2FnZS5zZWdtZW50cykgOiB1bmRlZmluZWQpO1xuICAgICAgICBpZiAobWVzc2FnZS5zdHJlYW1SZXN1bHRzKSB7XG4gICAgICAgICAgICBvYmouc3RyZWFtUmVzdWx0cyA9IG1lc3NhZ2Uuc3RyZWFtUmVzdWx0cy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLlN0cmVhbUluZm8udG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5zdHJlYW1SZXN1bHRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZVJlc3VsdHMpIHtcbiAgICAgICAgICAgIG9iai5maWxlUmVzdWx0cyA9IG1lc3NhZ2UuZmlsZVJlc3VsdHMubWFwKChlKSA9PiBlID8gZXhwb3J0cy5GaWxlSW5mby50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLmZpbGVSZXN1bHRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2VnbWVudFJlc3VsdHMpIHtcbiAgICAgICAgICAgIG9iai5zZWdtZW50UmVzdWx0cyA9IG1lc3NhZ2Uuc2VnbWVudFJlc3VsdHMubWFwKChlKSA9PiBlID8gZXhwb3J0cy5TZWdtZW50c0luZm8udG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5zZWdtZW50UmVzdWx0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmltYWdlUmVzdWx0cykge1xuICAgICAgICAgICAgb2JqLmltYWdlUmVzdWx0cyA9IG1lc3NhZ2UuaW1hZ2VSZXN1bHRzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuSW1hZ2VzSW5mby50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLmltYWdlUmVzdWx0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2osIF9rLCBfbCwgX207XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlRWdyZXNzSW5mbygpO1xuICAgICAgICBtZXNzYWdlLmVncmVzc0lkID0gKF9hID0gb2JqZWN0LmVncmVzc0lkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnJvb21JZCA9IChfYiA9IG9iamVjdC5yb29tSWQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2Uucm9vbU5hbWUgPSAoX2MgPSBvYmplY3Qucm9vbU5hbWUpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2Uuc3RhdHVzID0gKF9kID0gb2JqZWN0LnN0YXR1cykgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogMDtcbiAgICAgICAgbWVzc2FnZS5zdGFydGVkQXQgPSAoX2UgPSBvYmplY3Quc3RhcnRlZEF0KSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiAwO1xuICAgICAgICBtZXNzYWdlLmVuZGVkQXQgPSAoX2YgPSBvYmplY3QuZW5kZWRBdCkgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogMDtcbiAgICAgICAgbWVzc2FnZS51cGRhdGVkQXQgPSAoX2cgPSBvYmplY3QudXBkYXRlZEF0KSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiAwO1xuICAgICAgICBtZXNzYWdlLmVycm9yID0gKF9oID0gb2JqZWN0LmVycm9yKSAhPT0gbnVsbCAmJiBfaCAhPT0gdm9pZCAwID8gX2ggOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnJvb21Db21wb3NpdGUgPSAob2JqZWN0LnJvb21Db21wb3NpdGUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Qucm9vbUNvbXBvc2l0ZSAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5Sb29tQ29tcG9zaXRlRWdyZXNzUmVxdWVzdC5mcm9tUGFydGlhbChvYmplY3Qucm9vbUNvbXBvc2l0ZSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLndlYiA9IChvYmplY3Qud2ViICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LndlYiAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5XZWJFZ3Jlc3NSZXF1ZXN0LmZyb21QYXJ0aWFsKG9iamVjdC53ZWIpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudCA9IChvYmplY3QucGFydGljaXBhbnQgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QucGFydGljaXBhbnQgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuUGFydGljaXBhbnRFZ3Jlc3NSZXF1ZXN0LmZyb21QYXJ0aWFsKG9iamVjdC5wYXJ0aWNpcGFudClcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLnRyYWNrQ29tcG9zaXRlID0gKG9iamVjdC50cmFja0NvbXBvc2l0ZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC50cmFja0NvbXBvc2l0ZSAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5UcmFja0NvbXBvc2l0ZUVncmVzc1JlcXVlc3QuZnJvbVBhcnRpYWwob2JqZWN0LnRyYWNrQ29tcG9zaXRlKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UudHJhY2sgPSAob2JqZWN0LnRyYWNrICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnRyYWNrICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLlRyYWNrRWdyZXNzUmVxdWVzdC5mcm9tUGFydGlhbChvYmplY3QudHJhY2spXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5zdHJlYW0gPSAob2JqZWN0LnN0cmVhbSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5zdHJlYW0gIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuU3RyZWFtSW5mb0xpc3QuZnJvbVBhcnRpYWwob2JqZWN0LnN0cmVhbSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmZpbGUgPSAob2JqZWN0LmZpbGUgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZmlsZSAhPT0gbnVsbCkgPyBleHBvcnRzLkZpbGVJbmZvLmZyb21QYXJ0aWFsKG9iamVjdC5maWxlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5zZWdtZW50cyA9IChvYmplY3Quc2VnbWVudHMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc2VnbWVudHMgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuU2VnbWVudHNJbmZvLmZyb21QYXJ0aWFsKG9iamVjdC5zZWdtZW50cylcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLnN0cmVhbVJlc3VsdHMgPSAoKF9qID0gb2JqZWN0LnN0cmVhbVJlc3VsdHMpID09PSBudWxsIHx8IF9qID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfai5tYXAoKGUpID0+IGV4cG9ydHMuU3RyZWFtSW5mby5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLmZpbGVSZXN1bHRzID0gKChfayA9IG9iamVjdC5maWxlUmVzdWx0cykgPT09IG51bGwgfHwgX2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9rLm1hcCgoZSkgPT4gZXhwb3J0cy5GaWxlSW5mby5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICBtZXNzYWdlLnNlZ21lbnRSZXN1bHRzID0gKChfbCA9IG9iamVjdC5zZWdtZW50UmVzdWx0cykgPT09IG51bGwgfHwgX2wgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9sLm1hcCgoZSkgPT4gZXhwb3J0cy5TZWdtZW50c0luZm8uZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgbWVzc2FnZS5pbWFnZVJlc3VsdHMgPSAoKF9tID0gb2JqZWN0LmltYWdlUmVzdWx0cykgPT09IG51bGwgfHwgX20gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9tLm1hcCgoZSkgPT4gZXhwb3J0cy5JbWFnZXNJbmZvLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVN0cmVhbUluZm9MaXN0KCkge1xuICAgIHJldHVybiB7IGluZm86IFtdIH07XG59XG5leHBvcnRzLlN0cmVhbUluZm9MaXN0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuaW5mbyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaW5mby5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLmluZm8pIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLlN0cmVhbUluZm8uZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3RyZWFtSW5mb0xpc3QoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmluZm8ucHVzaChleHBvcnRzLlN0cmVhbUluZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHsgaW5mbzogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QuaW5mbykgPyBvYmplY3QuaW5mby5tYXAoKGUpID0+IGV4cG9ydHMuU3RyZWFtSW5mby5mcm9tSlNPTihlKSkgOiBbXSB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIGlmIChtZXNzYWdlLmluZm8pIHtcbiAgICAgICAgICAgIG9iai5pbmZvID0gbWVzc2FnZS5pbmZvLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuU3RyZWFtSW5mby50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLmluZm8gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTdHJlYW1JbmZvTGlzdCgpO1xuICAgICAgICBtZXNzYWdlLmluZm8gPSAoKF9hID0gb2JqZWN0LmluZm8pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYXAoKGUpID0+IGV4cG9ydHMuU3RyZWFtSW5mby5mcm9tUGFydGlhbChlKSkpIHx8IFtdO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VTdHJlYW1JbmZvKCkge1xuICAgIHJldHVybiB7IHVybDogXCJcIiwgc3RhcnRlZEF0OiAwLCBlbmRlZEF0OiAwLCBkdXJhdGlvbjogMCwgc3RhdHVzOiAwLCBlcnJvcjogXCJcIiB9O1xufVxuZXhwb3J0cy5TdHJlYW1JbmZvID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UudXJsICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS51cmwgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLnVybCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhcnRlZEF0ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5zdGFydGVkQXQgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTYpLmludDY0KG1lc3NhZ2Uuc3RhcnRlZEF0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5lbmRlZEF0ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5lbmRlZEF0ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI0KS5pbnQ2NChtZXNzYWdlLmVuZGVkQXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5kdXJhdGlvbiAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigzMikuaW50NjQobWVzc2FnZS5kdXJhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhdHVzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5zdGF0dXMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDApLmludDMyKG1lc3NhZ2Uuc3RhdHVzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5lcnJvciAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZXJyb3IgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNTApLnN0cmluZyhtZXNzYWdlLmVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTdHJlYW1JbmZvKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51cmwgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdGFydGVkQXQgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kZWRBdCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kdXJhdGlvbiA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdGF0dXMgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVycm9yID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1cmw6IGlzU2V0KG9iamVjdC51cmwpID8gU3RyaW5nKG9iamVjdC51cmwpIDogXCJcIixcbiAgICAgICAgICAgIHN0YXJ0ZWRBdDogaXNTZXQob2JqZWN0LnN0YXJ0ZWRBdCkgPyBOdW1iZXIob2JqZWN0LnN0YXJ0ZWRBdCkgOiAwLFxuICAgICAgICAgICAgZW5kZWRBdDogaXNTZXQob2JqZWN0LmVuZGVkQXQpID8gTnVtYmVyKG9iamVjdC5lbmRlZEF0KSA6IDAsXG4gICAgICAgICAgICBkdXJhdGlvbjogaXNTZXQob2JqZWN0LmR1cmF0aW9uKSA/IE51bWJlcihvYmplY3QuZHVyYXRpb24pIDogMCxcbiAgICAgICAgICAgIHN0YXR1czogaXNTZXQob2JqZWN0LnN0YXR1cykgPyBzdHJlYW1JbmZvX1N0YXR1c0Zyb21KU09OKG9iamVjdC5zdGF0dXMpIDogMCxcbiAgICAgICAgICAgIGVycm9yOiBpc1NldChvYmplY3QuZXJyb3IpID8gU3RyaW5nKG9iamVjdC5lcnJvcikgOiBcIlwiLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UudXJsICE9PSB1bmRlZmluZWQgJiYgKG9iai51cmwgPSBtZXNzYWdlLnVybCk7XG4gICAgICAgIG1lc3NhZ2Uuc3RhcnRlZEF0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5zdGFydGVkQXQgPSBNYXRoLnJvdW5kKG1lc3NhZ2Uuc3RhcnRlZEF0KSk7XG4gICAgICAgIG1lc3NhZ2UuZW5kZWRBdCAhPT0gdW5kZWZpbmVkICYmIChvYmouZW5kZWRBdCA9IE1hdGgucm91bmQobWVzc2FnZS5lbmRlZEF0KSk7XG4gICAgICAgIG1lc3NhZ2UuZHVyYXRpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLmR1cmF0aW9uID0gTWF0aC5yb3VuZChtZXNzYWdlLmR1cmF0aW9uKSk7XG4gICAgICAgIG1lc3NhZ2Uuc3RhdHVzICE9PSB1bmRlZmluZWQgJiYgKG9iai5zdGF0dXMgPSBzdHJlYW1JbmZvX1N0YXR1c1RvSlNPTihtZXNzYWdlLnN0YXR1cykpO1xuICAgICAgICBtZXNzYWdlLmVycm9yICE9PSB1bmRlZmluZWQgJiYgKG9iai5lcnJvciA9IG1lc3NhZ2UuZXJyb3IpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVN0cmVhbUluZm8oKTtcbiAgICAgICAgbWVzc2FnZS51cmwgPSAoX2EgPSBvYmplY3QudXJsKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnN0YXJ0ZWRBdCA9IChfYiA9IG9iamVjdC5zdGFydGVkQXQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDA7XG4gICAgICAgIG1lc3NhZ2UuZW5kZWRBdCA9IChfYyA9IG9iamVjdC5lbmRlZEF0KSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAwO1xuICAgICAgICBtZXNzYWdlLmR1cmF0aW9uID0gKF9kID0gb2JqZWN0LmR1cmF0aW9uKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAwO1xuICAgICAgICBtZXNzYWdlLnN0YXR1cyA9IChfZSA9IG9iamVjdC5zdGF0dXMpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IDA7XG4gICAgICAgIG1lc3NhZ2UuZXJyb3IgPSAoX2YgPSBvYmplY3QuZXJyb3IpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IFwiXCI7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUZpbGVJbmZvKCkge1xuICAgIHJldHVybiB7IGZpbGVuYW1lOiBcIlwiLCBzdGFydGVkQXQ6IDAsIGVuZGVkQXQ6IDAsIGR1cmF0aW9uOiAwLCBzaXplOiAwLCBsb2NhdGlvbjogXCJcIiB9O1xufVxuZXhwb3J0cy5GaWxlSW5mbyA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmZpbGVuYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5maWxlbmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UuZmlsZW5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0ZWRBdCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc3RhcnRlZEF0ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE2KS5pbnQ2NChtZXNzYWdlLnN0YXJ0ZWRBdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZW5kZWRBdCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZW5kZWRBdCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkuaW50NjQobWVzc2FnZS5lbmRlZEF0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZHVyYXRpb24gIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDgpLmludDY0KG1lc3NhZ2UuZHVyYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnNpemUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnNpemUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzIpLmludDY0KG1lc3NhZ2Uuc2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubG9jYXRpb24gIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmxvY2F0aW9uICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQyKS5zdHJpbmcobWVzc2FnZS5sb2NhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlRmlsZUluZm8oKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZpbGVuYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhcnRlZEF0ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZGVkQXQgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZHVyYXRpb24gPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2l6ZSA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sb2NhdGlvbiA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmlsZW5hbWU6IGlzU2V0KG9iamVjdC5maWxlbmFtZSkgPyBTdHJpbmcob2JqZWN0LmZpbGVuYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBzdGFydGVkQXQ6IGlzU2V0KG9iamVjdC5zdGFydGVkQXQpID8gTnVtYmVyKG9iamVjdC5zdGFydGVkQXQpIDogMCxcbiAgICAgICAgICAgIGVuZGVkQXQ6IGlzU2V0KG9iamVjdC5lbmRlZEF0KSA/IE51bWJlcihvYmplY3QuZW5kZWRBdCkgOiAwLFxuICAgICAgICAgICAgZHVyYXRpb246IGlzU2V0KG9iamVjdC5kdXJhdGlvbikgPyBOdW1iZXIob2JqZWN0LmR1cmF0aW9uKSA6IDAsXG4gICAgICAgICAgICBzaXplOiBpc1NldChvYmplY3Quc2l6ZSkgPyBOdW1iZXIob2JqZWN0LnNpemUpIDogMCxcbiAgICAgICAgICAgIGxvY2F0aW9uOiBpc1NldChvYmplY3QubG9jYXRpb24pID8gU3RyaW5nKG9iamVjdC5sb2NhdGlvbikgOiBcIlwiLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UuZmlsZW5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmZpbGVuYW1lID0gbWVzc2FnZS5maWxlbmFtZSk7XG4gICAgICAgIG1lc3NhZ2Uuc3RhcnRlZEF0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5zdGFydGVkQXQgPSBNYXRoLnJvdW5kKG1lc3NhZ2Uuc3RhcnRlZEF0KSk7XG4gICAgICAgIG1lc3NhZ2UuZW5kZWRBdCAhPT0gdW5kZWZpbmVkICYmIChvYmouZW5kZWRBdCA9IE1hdGgucm91bmQobWVzc2FnZS5lbmRlZEF0KSk7XG4gICAgICAgIG1lc3NhZ2UuZHVyYXRpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLmR1cmF0aW9uID0gTWF0aC5yb3VuZChtZXNzYWdlLmR1cmF0aW9uKSk7XG4gICAgICAgIG1lc3NhZ2Uuc2l6ZSAhPT0gdW5kZWZpbmVkICYmIChvYmouc2l6ZSA9IE1hdGgucm91bmQobWVzc2FnZS5zaXplKSk7XG4gICAgICAgIG1lc3NhZ2UubG9jYXRpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLmxvY2F0aW9uID0gbWVzc2FnZS5sb2NhdGlvbik7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlRmlsZUluZm8oKTtcbiAgICAgICAgbWVzc2FnZS5maWxlbmFtZSA9IChfYSA9IG9iamVjdC5maWxlbmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5zdGFydGVkQXQgPSAoX2IgPSBvYmplY3Quc3RhcnRlZEF0KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwO1xuICAgICAgICBtZXNzYWdlLmVuZGVkQXQgPSAoX2MgPSBvYmplY3QuZW5kZWRBdCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMDtcbiAgICAgICAgbWVzc2FnZS5kdXJhdGlvbiA9IChfZCA9IG9iamVjdC5kdXJhdGlvbikgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogMDtcbiAgICAgICAgbWVzc2FnZS5zaXplID0gKF9lID0gb2JqZWN0LnNpemUpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IDA7XG4gICAgICAgIG1lc3NhZ2UubG9jYXRpb24gPSAoX2YgPSBvYmplY3QubG9jYXRpb24pICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IFwiXCI7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVNlZ21lbnRzSW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBwbGF5bGlzdE5hbWU6IFwiXCIsXG4gICAgICAgIGxpdmVQbGF5bGlzdE5hbWU6IFwiXCIsXG4gICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICBzaXplOiAwLFxuICAgICAgICBwbGF5bGlzdExvY2F0aW9uOiBcIlwiLFxuICAgICAgICBsaXZlUGxheWxpc3RMb2NhdGlvbjogXCJcIixcbiAgICAgICAgc2VnbWVudENvdW50OiAwLFxuICAgICAgICBzdGFydGVkQXQ6IDAsXG4gICAgICAgIGVuZGVkQXQ6IDAsXG4gICAgfTtcbn1cbmV4cG9ydHMuU2VnbWVudHNJbmZvID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGxheWxpc3ROYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5wbGF5bGlzdE5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLnBsYXlsaXN0TmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubGl2ZVBsYXlsaXN0TmFtZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UubGl2ZVBsYXlsaXN0TmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig2Nikuc3RyaW5nKG1lc3NhZ2UubGl2ZVBsYXlsaXN0TmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZHVyYXRpb24gIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmR1cmF0aW9uICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE2KS5pbnQ2NChtZXNzYWdlLmR1cmF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zaXplICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5zaXplICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI0KS5pbnQ2NChtZXNzYWdlLnNpemUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBsYXlsaXN0TG9jYXRpb24gIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnBsYXlsaXN0TG9jYXRpb24gIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzQpLnN0cmluZyhtZXNzYWdlLnBsYXlsaXN0TG9jYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmxpdmVQbGF5bGlzdExvY2F0aW9uICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5saXZlUGxheWxpc3RMb2NhdGlvbiAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig3NCkuc3RyaW5nKG1lc3NhZ2UubGl2ZVBsYXlsaXN0TG9jYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnNlZ21lbnRDb3VudCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc2VnbWVudENvdW50ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQwKS5pbnQ2NChtZXNzYWdlLnNlZ21lbnRDb3VudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhcnRlZEF0ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5zdGFydGVkQXQgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDgpLmludDY0KG1lc3NhZ2Uuc3RhcnRlZEF0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5lbmRlZEF0ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5lbmRlZEF0ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDU2KS5pbnQ2NChtZXNzYWdlLmVuZGVkQXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVNlZ21lbnRzSW5mbygpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGxheWxpc3ROYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGl2ZVBsYXlsaXN0TmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmR1cmF0aW9uID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNpemUgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGxheWxpc3RMb2NhdGlvbiA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxpdmVQbGF5bGlzdExvY2F0aW9uID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VnbWVudENvdW50ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXJ0ZWRBdCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRlZEF0ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGxheWxpc3ROYW1lOiBpc1NldChvYmplY3QucGxheWxpc3ROYW1lKSA/IFN0cmluZyhvYmplY3QucGxheWxpc3ROYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBsaXZlUGxheWxpc3ROYW1lOiBpc1NldChvYmplY3QubGl2ZVBsYXlsaXN0TmFtZSkgPyBTdHJpbmcob2JqZWN0LmxpdmVQbGF5bGlzdE5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiBpc1NldChvYmplY3QuZHVyYXRpb24pID8gTnVtYmVyKG9iamVjdC5kdXJhdGlvbikgOiAwLFxuICAgICAgICAgICAgc2l6ZTogaXNTZXQob2JqZWN0LnNpemUpID8gTnVtYmVyKG9iamVjdC5zaXplKSA6IDAsXG4gICAgICAgICAgICBwbGF5bGlzdExvY2F0aW9uOiBpc1NldChvYmplY3QucGxheWxpc3RMb2NhdGlvbikgPyBTdHJpbmcob2JqZWN0LnBsYXlsaXN0TG9jYXRpb24pIDogXCJcIixcbiAgICAgICAgICAgIGxpdmVQbGF5bGlzdExvY2F0aW9uOiBpc1NldChvYmplY3QubGl2ZVBsYXlsaXN0TG9jYXRpb24pID8gU3RyaW5nKG9iamVjdC5saXZlUGxheWxpc3RMb2NhdGlvbikgOiBcIlwiLFxuICAgICAgICAgICAgc2VnbWVudENvdW50OiBpc1NldChvYmplY3Quc2VnbWVudENvdW50KSA/IE51bWJlcihvYmplY3Quc2VnbWVudENvdW50KSA6IDAsXG4gICAgICAgICAgICBzdGFydGVkQXQ6IGlzU2V0KG9iamVjdC5zdGFydGVkQXQpID8gTnVtYmVyKG9iamVjdC5zdGFydGVkQXQpIDogMCxcbiAgICAgICAgICAgIGVuZGVkQXQ6IGlzU2V0KG9iamVjdC5lbmRlZEF0KSA/IE51bWJlcihvYmplY3QuZW5kZWRBdCkgOiAwLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UucGxheWxpc3ROYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5wbGF5bGlzdE5hbWUgPSBtZXNzYWdlLnBsYXlsaXN0TmFtZSk7XG4gICAgICAgIG1lc3NhZ2UubGl2ZVBsYXlsaXN0TmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmoubGl2ZVBsYXlsaXN0TmFtZSA9IG1lc3NhZ2UubGl2ZVBsYXlsaXN0TmFtZSk7XG4gICAgICAgIG1lc3NhZ2UuZHVyYXRpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLmR1cmF0aW9uID0gTWF0aC5yb3VuZChtZXNzYWdlLmR1cmF0aW9uKSk7XG4gICAgICAgIG1lc3NhZ2Uuc2l6ZSAhPT0gdW5kZWZpbmVkICYmIChvYmouc2l6ZSA9IE1hdGgucm91bmQobWVzc2FnZS5zaXplKSk7XG4gICAgICAgIG1lc3NhZ2UucGxheWxpc3RMb2NhdGlvbiAhPT0gdW5kZWZpbmVkICYmIChvYmoucGxheWxpc3RMb2NhdGlvbiA9IG1lc3NhZ2UucGxheWxpc3RMb2NhdGlvbik7XG4gICAgICAgIG1lc3NhZ2UubGl2ZVBsYXlsaXN0TG9jYXRpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLmxpdmVQbGF5bGlzdExvY2F0aW9uID0gbWVzc2FnZS5saXZlUGxheWxpc3RMb2NhdGlvbik7XG4gICAgICAgIG1lc3NhZ2Uuc2VnbWVudENvdW50ICE9PSB1bmRlZmluZWQgJiYgKG9iai5zZWdtZW50Q291bnQgPSBNYXRoLnJvdW5kKG1lc3NhZ2Uuc2VnbWVudENvdW50KSk7XG4gICAgICAgIG1lc3NhZ2Uuc3RhcnRlZEF0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5zdGFydGVkQXQgPSBNYXRoLnJvdW5kKG1lc3NhZ2Uuc3RhcnRlZEF0KSk7XG4gICAgICAgIG1lc3NhZ2UuZW5kZWRBdCAhPT0gdW5kZWZpbmVkICYmIChvYmouZW5kZWRBdCA9IE1hdGgucm91bmQobWVzc2FnZS5lbmRlZEF0KSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2o7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU2VnbWVudHNJbmZvKCk7XG4gICAgICAgIG1lc3NhZ2UucGxheWxpc3ROYW1lID0gKF9hID0gb2JqZWN0LnBsYXlsaXN0TmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5saXZlUGxheWxpc3ROYW1lID0gKF9iID0gb2JqZWN0LmxpdmVQbGF5bGlzdE5hbWUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuZHVyYXRpb24gPSAoX2MgPSBvYmplY3QuZHVyYXRpb24pICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IDA7XG4gICAgICAgIG1lc3NhZ2Uuc2l6ZSA9IChfZCA9IG9iamVjdC5zaXplKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAwO1xuICAgICAgICBtZXNzYWdlLnBsYXlsaXN0TG9jYXRpb24gPSAoX2UgPSBvYmplY3QucGxheWxpc3RMb2NhdGlvbikgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5saXZlUGxheWxpc3RMb2NhdGlvbiA9IChfZiA9IG9iamVjdC5saXZlUGxheWxpc3RMb2NhdGlvbikgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5zZWdtZW50Q291bnQgPSAoX2cgPSBvYmplY3Quc2VnbWVudENvdW50KSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiAwO1xuICAgICAgICBtZXNzYWdlLnN0YXJ0ZWRBdCA9IChfaCA9IG9iamVjdC5zdGFydGVkQXQpICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IDA7XG4gICAgICAgIG1lc3NhZ2UuZW5kZWRBdCA9IChfaiA9IG9iamVjdC5lbmRlZEF0KSAhPT0gbnVsbCAmJiBfaiAhPT0gdm9pZCAwID8gX2ogOiAwO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VJbWFnZXNJbmZvKCkge1xuICAgIHJldHVybiB7IGltYWdlQ291bnQ6IDAsIHN0YXJ0ZWRBdDogMCwgZW5kZWRBdDogMCB9O1xufVxuZXhwb3J0cy5JbWFnZXNJbmZvID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuaW1hZ2VDb3VudCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaW1hZ2VDb3VudCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4KS5pbnQ2NChtZXNzYWdlLmltYWdlQ291bnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0ZWRBdCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc3RhcnRlZEF0ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE2KS5pbnQ2NChtZXNzYWdlLnN0YXJ0ZWRBdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZW5kZWRBdCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZW5kZWRBdCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkuaW50NjQobWVzc2FnZS5lbmRlZEF0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VJbWFnZXNJbmZvKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbWFnZUNvdW50ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXJ0ZWRBdCA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRlZEF0ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW1hZ2VDb3VudDogaXNTZXQob2JqZWN0LmltYWdlQ291bnQpID8gTnVtYmVyKG9iamVjdC5pbWFnZUNvdW50KSA6IDAsXG4gICAgICAgICAgICBzdGFydGVkQXQ6IGlzU2V0KG9iamVjdC5zdGFydGVkQXQpID8gTnVtYmVyKG9iamVjdC5zdGFydGVkQXQpIDogMCxcbiAgICAgICAgICAgIGVuZGVkQXQ6IGlzU2V0KG9iamVjdC5lbmRlZEF0KSA/IE51bWJlcihvYmplY3QuZW5kZWRBdCkgOiAwLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UuaW1hZ2VDb3VudCAhPT0gdW5kZWZpbmVkICYmIChvYmouaW1hZ2VDb3VudCA9IE1hdGgucm91bmQobWVzc2FnZS5pbWFnZUNvdW50KSk7XG4gICAgICAgIG1lc3NhZ2Uuc3RhcnRlZEF0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5zdGFydGVkQXQgPSBNYXRoLnJvdW5kKG1lc3NhZ2Uuc3RhcnRlZEF0KSk7XG4gICAgICAgIG1lc3NhZ2UuZW5kZWRBdCAhPT0gdW5kZWZpbmVkICYmIChvYmouZW5kZWRBdCA9IE1hdGgucm91bmQobWVzc2FnZS5lbmRlZEF0KSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlSW1hZ2VzSW5mbygpO1xuICAgICAgICBtZXNzYWdlLmltYWdlQ291bnQgPSAoX2EgPSBvYmplY3QuaW1hZ2VDb3VudCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcbiAgICAgICAgbWVzc2FnZS5zdGFydGVkQXQgPSAoX2IgPSBvYmplY3Quc3RhcnRlZEF0KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwO1xuICAgICAgICBtZXNzYWdlLmVuZGVkQXQgPSAoX2MgPSBvYmplY3QuZW5kZWRBdCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlQXV0b1BhcnRpY2lwYW50RWdyZXNzKCkge1xuICAgIHJldHVybiB7IHByZXNldDogdW5kZWZpbmVkLCBhZHZhbmNlZDogdW5kZWZpbmVkLCBmaWxlT3V0cHV0czogW10sIHNlZ21lbnRPdXRwdXRzOiBbXSB9O1xufVxuZXhwb3J0cy5BdXRvUGFydGljaXBhbnRFZ3Jlc3MgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5wcmVzZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4KS5pbnQzMihtZXNzYWdlLnByZXNldCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYWR2YW5jZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5FbmNvZGluZ09wdGlvbnMuZW5jb2RlKG1lc3NhZ2UuYWR2YW5jZWQsIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlsZU91dHB1dHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmZpbGVPdXRwdXRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UuZmlsZU91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmVuY29kZSh2LCB3cml0ZXIudWludDMyKDI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnNlZ21lbnRPdXRwdXRzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5zZWdtZW50T3V0cHV0cy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLnNlZ21lbnRPdXRwdXRzKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LmVuY29kZSh2LCB3cml0ZXIudWludDMyKDM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUF1dG9QYXJ0aWNpcGFudEVncmVzcygpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucHJlc2V0ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hZHZhbmNlZCA9IGV4cG9ydHMuRW5jb2RpbmdPcHRpb25zLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5maWxlT3V0cHV0cy5wdXNoKGV4cG9ydHMuRW5jb2RlZEZpbGVPdXRwdXQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZWdtZW50T3V0cHV0cy5wdXNoKGV4cG9ydHMuU2VnbWVudGVkRmlsZU91dHB1dC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcHJlc2V0OiBpc1NldChvYmplY3QucHJlc2V0KSA/IGVuY29kaW5nT3B0aW9uc1ByZXNldEZyb21KU09OKG9iamVjdC5wcmVzZXQpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgYWR2YW5jZWQ6IGlzU2V0KG9iamVjdC5hZHZhbmNlZCkgPyBleHBvcnRzLkVuY29kaW5nT3B0aW9ucy5mcm9tSlNPTihvYmplY3QuYWR2YW5jZWQpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZmlsZU91dHB1dHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmZpbGVPdXRwdXRzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LmZpbGVPdXRwdXRzLm1hcCgoZSkgPT4gZXhwb3J0cy5FbmNvZGVkRmlsZU91dHB1dC5mcm9tSlNPTihlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgc2VnbWVudE91dHB1dHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LnNlZ21lbnRPdXRwdXRzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LnNlZ21lbnRPdXRwdXRzLm1hcCgoZSkgPT4gZXhwb3J0cy5TZWdtZW50ZWRGaWxlT3V0cHV0LmZyb21KU09OKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5wcmVzZXQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5wcmVzZXQgPSBtZXNzYWdlLnByZXNldCAhPT0gdW5kZWZpbmVkID8gZW5jb2RpbmdPcHRpb25zUHJlc2V0VG9KU09OKG1lc3NhZ2UucHJlc2V0KSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UuYWR2YW5jZWQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5hZHZhbmNlZCA9IG1lc3NhZ2UuYWR2YW5jZWQgPyBleHBvcnRzLkVuY29kaW5nT3B0aW9ucy50b0pTT04obWVzc2FnZS5hZHZhbmNlZCkgOiB1bmRlZmluZWQpO1xuICAgICAgICBpZiAobWVzc2FnZS5maWxlT3V0cHV0cykge1xuICAgICAgICAgICAgb2JqLmZpbGVPdXRwdXRzID0gbWVzc2FnZS5maWxlT3V0cHV0cy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouZmlsZU91dHB1dHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zZWdtZW50T3V0cHV0cykge1xuICAgICAgICAgICAgb2JqLnNlZ21lbnRPdXRwdXRzID0gbWVzc2FnZS5zZWdtZW50T3V0cHV0cy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQudG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5zZWdtZW50T3V0cHV0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlQXV0b1BhcnRpY2lwYW50RWdyZXNzKCk7XG4gICAgICAgIG1lc3NhZ2UucHJlc2V0ID0gKF9hID0gb2JqZWN0LnByZXNldCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmFkdmFuY2VkID0gKG9iamVjdC5hZHZhbmNlZCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5hZHZhbmNlZCAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5FbmNvZGluZ09wdGlvbnMuZnJvbVBhcnRpYWwob2JqZWN0LmFkdmFuY2VkKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuZmlsZU91dHB1dHMgPSAoKF9iID0gb2JqZWN0LmZpbGVPdXRwdXRzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubWFwKChlKSA9PiBleHBvcnRzLkVuY29kZWRGaWxlT3V0cHV0LmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2Uuc2VnbWVudE91dHB1dHMgPSAoKF9jID0gb2JqZWN0LnNlZ21lbnRPdXRwdXRzKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MubWFwKChlKSA9PiBleHBvcnRzLlNlZ21lbnRlZEZpbGVPdXRwdXQuZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlQXV0b1RyYWNrRWdyZXNzKCkge1xuICAgIHJldHVybiB7IGZpbGVwYXRoOiBcIlwiLCBkaXNhYmxlTWFuaWZlc3Q6IGZhbHNlLCBzMzogdW5kZWZpbmVkLCBnY3A6IHVuZGVmaW5lZCwgYXp1cmU6IHVuZGVmaW5lZCB9O1xufVxuZXhwb3J0cy5BdXRvVHJhY2tFZ3Jlc3MgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5maWxlcGF0aCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZmlsZXBhdGggIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLmZpbGVwYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5kaXNhYmxlTWFuaWZlc3QgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDApLmJvb2wobWVzc2FnZS5kaXNhYmxlTWFuaWZlc3QpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnMzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuUzNVcGxvYWQuZW5jb2RlKG1lc3NhZ2UuczMsIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZ2NwICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuR0NQVXBsb2FkLmVuY29kZShtZXNzYWdlLmdjcCwgd3JpdGVyLnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5henVyZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkF6dXJlQmxvYlVwbG9hZC5lbmNvZGUobWVzc2FnZS5henVyZSwgd3JpdGVyLnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VBdXRvVHJhY2tFZ3Jlc3MoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZpbGVwYXRoID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0ID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnMzID0gZXhwb3J0cy5TM1VwbG9hZC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ2NwID0gZXhwb3J0cy5HQ1BVcGxvYWQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmF6dXJlID0gZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmlsZXBhdGg6IGlzU2V0KG9iamVjdC5maWxlcGF0aCkgPyBTdHJpbmcob2JqZWN0LmZpbGVwYXRoKSA6IFwiXCIsXG4gICAgICAgICAgICBkaXNhYmxlTWFuaWZlc3Q6IGlzU2V0KG9iamVjdC5kaXNhYmxlTWFuaWZlc3QpID8gQm9vbGVhbihvYmplY3QuZGlzYWJsZU1hbmlmZXN0KSA6IGZhbHNlLFxuICAgICAgICAgICAgczM6IGlzU2V0KG9iamVjdC5zMykgPyBleHBvcnRzLlMzVXBsb2FkLmZyb21KU09OKG9iamVjdC5zMykgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBnY3A6IGlzU2V0KG9iamVjdC5nY3ApID8gZXhwb3J0cy5HQ1BVcGxvYWQuZnJvbUpTT04ob2JqZWN0LmdjcCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBhenVyZTogaXNTZXQob2JqZWN0LmF6dXJlKSA/IGV4cG9ydHMuQXp1cmVCbG9iVXBsb2FkLmZyb21KU09OKG9iamVjdC5henVyZSkgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5maWxlcGF0aCAhPT0gdW5kZWZpbmVkICYmIChvYmouZmlsZXBhdGggPSBtZXNzYWdlLmZpbGVwYXRoKTtcbiAgICAgICAgbWVzc2FnZS5kaXNhYmxlTWFuaWZlc3QgIT09IHVuZGVmaW5lZCAmJiAob2JqLmRpc2FibGVNYW5pZmVzdCA9IG1lc3NhZ2UuZGlzYWJsZU1hbmlmZXN0KTtcbiAgICAgICAgbWVzc2FnZS5zMyAhPT0gdW5kZWZpbmVkICYmIChvYmouczMgPSBtZXNzYWdlLnMzID8gZXhwb3J0cy5TM1VwbG9hZC50b0pTT04obWVzc2FnZS5zMykgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLmdjcCAhPT0gdW5kZWZpbmVkICYmIChvYmouZ2NwID0gbWVzc2FnZS5nY3AgPyBleHBvcnRzLkdDUFVwbG9hZC50b0pTT04obWVzc2FnZS5nY3ApIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5henVyZSAhPT0gdW5kZWZpbmVkICYmIChvYmouYXp1cmUgPSBtZXNzYWdlLmF6dXJlID8gZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQudG9KU09OKG1lc3NhZ2UuYXp1cmUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUF1dG9UcmFja0VncmVzcygpO1xuICAgICAgICBtZXNzYWdlLmZpbGVwYXRoID0gKF9hID0gb2JqZWN0LmZpbGVwYXRoKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmRpc2FibGVNYW5pZmVzdCA9IChfYiA9IG9iamVjdC5kaXNhYmxlTWFuaWZlc3QpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLnMzID0gKG9iamVjdC5zMyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5zMyAhPT0gbnVsbCkgPyBleHBvcnRzLlMzVXBsb2FkLmZyb21QYXJ0aWFsKG9iamVjdC5zMykgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuZ2NwID0gKG9iamVjdC5nY3AgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuZ2NwICE9PSBudWxsKSA/IGV4cG9ydHMuR0NQVXBsb2FkLmZyb21QYXJ0aWFsKG9iamVjdC5nY3ApIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmF6dXJlID0gKG9iamVjdC5henVyZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5henVyZSAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5BenVyZUJsb2JVcGxvYWQuZnJvbVBhcnRpYWwob2JqZWN0LmF6dXJlKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xudmFyIGdsb2JhbFRoaXMgPSAoKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gZ2xvYmFsVGhpcztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gZ2xvYmFsO1xuICAgIH1cbiAgICB0aHJvdyBcIlVuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdFwiO1xufSkoKTtcbmZ1bmN0aW9uIGxvbmdUb051bWJlcihsb25nKSB7XG4gICAgaWYgKGxvbmcuZ3QoTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpKSB7XG4gICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFwiVmFsdWUgaXMgbGFyZ2VyIHRoYW4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJcIik7XG4gICAgfVxuICAgIHJldHVybiBsb25nLnRvTnVtYmVyKCk7XG59XG5pZiAobWluaW1hbF8xLmRlZmF1bHQudXRpbC5Mb25nICE9PSBsb25nXzEuZGVmYXVsdCkge1xuICAgIG1pbmltYWxfMS5kZWZhdWx0LnV0aWwuTG9uZyA9IGxvbmdfMS5kZWZhdWx0O1xuICAgIG1pbmltYWxfMS5kZWZhdWx0LmNvbmZpZ3VyZSgpO1xufVxuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsO1xufVxuZnVuY3Rpb24gaXNTZXQodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpdmVraXRfZWdyZXNzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_egress.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_ingress.js":
/*!***********************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/proto/livekit_ingress.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.DeleteIngressRequest = exports.ListIngressResponse = exports.ListIngressRequest = exports.UpdateIngressRequest = exports.InputAudioState = exports.InputVideoState = exports.IngressState = exports.IngressInfo = exports.IngressVideoEncodingOptions = exports.IngressAudioEncodingOptions = exports.IngressVideoOptions = exports.IngressAudioOptions = exports.CreateIngressRequest = exports.ingressState_StatusToJSON = exports.ingressState_StatusFromJSON = exports.IngressState_Status = exports.ingressVideoEncodingPresetToJSON = exports.ingressVideoEncodingPresetFromJSON = exports.IngressVideoEncodingPreset = exports.ingressAudioEncodingPresetToJSON = exports.ingressAudioEncodingPresetFromJSON = exports.IngressAudioEncodingPreset = exports.ingressInputToJSON = exports.ingressInputFromJSON = exports.IngressInput = exports.protobufPackage = void 0;\n/* eslint-disable */\nconst long_1 = __importDefault(__webpack_require__(/*! long */ \"(action-browser)/./node_modules/long/umd/index.js\"));\nconst minimal_1 = __importDefault(__webpack_require__(/*! protobufjs/minimal */ \"(action-browser)/./node_modules/protobufjs/minimal.js\"));\nconst livekit_models_1 = __webpack_require__(/*! ./livekit_models */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_models.js\");\nexports.protobufPackage = \"livekit\";\nvar IngressInput;\n(function (IngressInput) {\n    IngressInput[IngressInput[\"RTMP_INPUT\"] = 0] = \"RTMP_INPUT\";\n    IngressInput[IngressInput[\"WHIP_INPUT\"] = 1] = \"WHIP_INPUT\";\n    /** URL_INPUT - Pull from the provided URL. Only HTTP url are supported, serving either a single media file or a HLS stream */\n    IngressInput[IngressInput[\"URL_INPUT\"] = 2] = \"URL_INPUT\";\n    IngressInput[IngressInput[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(IngressInput = exports.IngressInput || (exports.IngressInput = {}));\nfunction ingressInputFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"RTMP_INPUT\":\n            return IngressInput.RTMP_INPUT;\n        case 1:\n        case \"WHIP_INPUT\":\n            return IngressInput.WHIP_INPUT;\n        case 2:\n        case \"URL_INPUT\":\n            return IngressInput.URL_INPUT;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return IngressInput.UNRECOGNIZED;\n    }\n}\nexports.ingressInputFromJSON = ingressInputFromJSON;\nfunction ingressInputToJSON(object) {\n    switch (object) {\n        case IngressInput.RTMP_INPUT:\n            return \"RTMP_INPUT\";\n        case IngressInput.WHIP_INPUT:\n            return \"WHIP_INPUT\";\n        case IngressInput.URL_INPUT:\n            return \"URL_INPUT\";\n        case IngressInput.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.ingressInputToJSON = ingressInputToJSON;\nvar IngressAudioEncodingPreset;\n(function (IngressAudioEncodingPreset) {\n    /** OPUS_STEREO_96KBPS - OPUS, 2 channels, 96kbps */\n    IngressAudioEncodingPreset[IngressAudioEncodingPreset[\"OPUS_STEREO_96KBPS\"] = 0] = \"OPUS_STEREO_96KBPS\";\n    /** OPUS_MONO_64KBS - OPUS, 1 channel, 64kbps */\n    IngressAudioEncodingPreset[IngressAudioEncodingPreset[\"OPUS_MONO_64KBS\"] = 1] = \"OPUS_MONO_64KBS\";\n    IngressAudioEncodingPreset[IngressAudioEncodingPreset[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(IngressAudioEncodingPreset = exports.IngressAudioEncodingPreset || (exports.IngressAudioEncodingPreset = {}));\nfunction ingressAudioEncodingPresetFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"OPUS_STEREO_96KBPS\":\n            return IngressAudioEncodingPreset.OPUS_STEREO_96KBPS;\n        case 1:\n        case \"OPUS_MONO_64KBS\":\n            return IngressAudioEncodingPreset.OPUS_MONO_64KBS;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return IngressAudioEncodingPreset.UNRECOGNIZED;\n    }\n}\nexports.ingressAudioEncodingPresetFromJSON = ingressAudioEncodingPresetFromJSON;\nfunction ingressAudioEncodingPresetToJSON(object) {\n    switch (object) {\n        case IngressAudioEncodingPreset.OPUS_STEREO_96KBPS:\n            return \"OPUS_STEREO_96KBPS\";\n        case IngressAudioEncodingPreset.OPUS_MONO_64KBS:\n            return \"OPUS_MONO_64KBS\";\n        case IngressAudioEncodingPreset.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.ingressAudioEncodingPresetToJSON = ingressAudioEncodingPresetToJSON;\nvar IngressVideoEncodingPreset;\n(function (IngressVideoEncodingPreset) {\n    /** H264_720P_30FPS_3_LAYERS - 1280x720,  30fps, 1900kbps main layer, 3 layers total */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_720P_30FPS_3_LAYERS\"] = 0] = \"H264_720P_30FPS_3_LAYERS\";\n    /** H264_1080P_30FPS_3_LAYERS - 1980x1080, 30fps, 3500kbps main layer, 3 layers total */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_1080P_30FPS_3_LAYERS\"] = 1] = \"H264_1080P_30FPS_3_LAYERS\";\n    /** H264_540P_25FPS_2_LAYERS - 960x540,  25fps, 1000kbps  main layer, 2 layers total */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_540P_25FPS_2_LAYERS\"] = 2] = \"H264_540P_25FPS_2_LAYERS\";\n    /** H264_720P_30FPS_1_LAYER - 1280x720,  30fps, 1900kbps, no simulcast */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_720P_30FPS_1_LAYER\"] = 3] = \"H264_720P_30FPS_1_LAYER\";\n    /** H264_1080P_30FPS_1_LAYER - 1980x1080, 30fps, 3500kbps, no simulcast */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_1080P_30FPS_1_LAYER\"] = 4] = \"H264_1080P_30FPS_1_LAYER\";\n    /** H264_720P_30FPS_3_LAYERS_HIGH_MOTION - 1280x720,  30fps, 2500kbps main layer, 3 layers total, higher bitrate for high motion, harder to encode content */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_720P_30FPS_3_LAYERS_HIGH_MOTION\"] = 5] = \"H264_720P_30FPS_3_LAYERS_HIGH_MOTION\";\n    /** H264_1080P_30FPS_3_LAYERS_HIGH_MOTION - 1980x1080, 30fps, 4500kbps main layer, 3 layers total, higher bitrate for high motion, harder to encode content */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_1080P_30FPS_3_LAYERS_HIGH_MOTION\"] = 6] = \"H264_1080P_30FPS_3_LAYERS_HIGH_MOTION\";\n    /** H264_540P_25FPS_2_LAYERS_HIGH_MOTION - 960x540,  25fps, 1300kbps  main layer, 2 layers total, higher bitrate for high motion, harder to encode content */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_540P_25FPS_2_LAYERS_HIGH_MOTION\"] = 7] = \"H264_540P_25FPS_2_LAYERS_HIGH_MOTION\";\n    /** H264_720P_30FPS_1_LAYER_HIGH_MOTION - 1280x720,  30fps, 2500kbps, no simulcast, higher bitrate for high motion, harder to encode content */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_720P_30FPS_1_LAYER_HIGH_MOTION\"] = 8] = \"H264_720P_30FPS_1_LAYER_HIGH_MOTION\";\n    /** H264_1080P_30FPS_1_LAYER_HIGH_MOTION - 1980x1080, 30fps, 4500kbps, no simulcast, higher bitrate for high motion, harder to encode content */\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"H264_1080P_30FPS_1_LAYER_HIGH_MOTION\"] = 9] = \"H264_1080P_30FPS_1_LAYER_HIGH_MOTION\";\n    IngressVideoEncodingPreset[IngressVideoEncodingPreset[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(IngressVideoEncodingPreset = exports.IngressVideoEncodingPreset || (exports.IngressVideoEncodingPreset = {}));\nfunction ingressVideoEncodingPresetFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"H264_720P_30FPS_3_LAYERS\":\n            return IngressVideoEncodingPreset.H264_720P_30FPS_3_LAYERS;\n        case 1:\n        case \"H264_1080P_30FPS_3_LAYERS\":\n            return IngressVideoEncodingPreset.H264_1080P_30FPS_3_LAYERS;\n        case 2:\n        case \"H264_540P_25FPS_2_LAYERS\":\n            return IngressVideoEncodingPreset.H264_540P_25FPS_2_LAYERS;\n        case 3:\n        case \"H264_720P_30FPS_1_LAYER\":\n            return IngressVideoEncodingPreset.H264_720P_30FPS_1_LAYER;\n        case 4:\n        case \"H264_1080P_30FPS_1_LAYER\":\n            return IngressVideoEncodingPreset.H264_1080P_30FPS_1_LAYER;\n        case 5:\n        case \"H264_720P_30FPS_3_LAYERS_HIGH_MOTION\":\n            return IngressVideoEncodingPreset.H264_720P_30FPS_3_LAYERS_HIGH_MOTION;\n        case 6:\n        case \"H264_1080P_30FPS_3_LAYERS_HIGH_MOTION\":\n            return IngressVideoEncodingPreset.H264_1080P_30FPS_3_LAYERS_HIGH_MOTION;\n        case 7:\n        case \"H264_540P_25FPS_2_LAYERS_HIGH_MOTION\":\n            return IngressVideoEncodingPreset.H264_540P_25FPS_2_LAYERS_HIGH_MOTION;\n        case 8:\n        case \"H264_720P_30FPS_1_LAYER_HIGH_MOTION\":\n            return IngressVideoEncodingPreset.H264_720P_30FPS_1_LAYER_HIGH_MOTION;\n        case 9:\n        case \"H264_1080P_30FPS_1_LAYER_HIGH_MOTION\":\n            return IngressVideoEncodingPreset.H264_1080P_30FPS_1_LAYER_HIGH_MOTION;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return IngressVideoEncodingPreset.UNRECOGNIZED;\n    }\n}\nexports.ingressVideoEncodingPresetFromJSON = ingressVideoEncodingPresetFromJSON;\nfunction ingressVideoEncodingPresetToJSON(object) {\n    switch (object) {\n        case IngressVideoEncodingPreset.H264_720P_30FPS_3_LAYERS:\n            return \"H264_720P_30FPS_3_LAYERS\";\n        case IngressVideoEncodingPreset.H264_1080P_30FPS_3_LAYERS:\n            return \"H264_1080P_30FPS_3_LAYERS\";\n        case IngressVideoEncodingPreset.H264_540P_25FPS_2_LAYERS:\n            return \"H264_540P_25FPS_2_LAYERS\";\n        case IngressVideoEncodingPreset.H264_720P_30FPS_1_LAYER:\n            return \"H264_720P_30FPS_1_LAYER\";\n        case IngressVideoEncodingPreset.H264_1080P_30FPS_1_LAYER:\n            return \"H264_1080P_30FPS_1_LAYER\";\n        case IngressVideoEncodingPreset.H264_720P_30FPS_3_LAYERS_HIGH_MOTION:\n            return \"H264_720P_30FPS_3_LAYERS_HIGH_MOTION\";\n        case IngressVideoEncodingPreset.H264_1080P_30FPS_3_LAYERS_HIGH_MOTION:\n            return \"H264_1080P_30FPS_3_LAYERS_HIGH_MOTION\";\n        case IngressVideoEncodingPreset.H264_540P_25FPS_2_LAYERS_HIGH_MOTION:\n            return \"H264_540P_25FPS_2_LAYERS_HIGH_MOTION\";\n        case IngressVideoEncodingPreset.H264_720P_30FPS_1_LAYER_HIGH_MOTION:\n            return \"H264_720P_30FPS_1_LAYER_HIGH_MOTION\";\n        case IngressVideoEncodingPreset.H264_1080P_30FPS_1_LAYER_HIGH_MOTION:\n            return \"H264_1080P_30FPS_1_LAYER_HIGH_MOTION\";\n        case IngressVideoEncodingPreset.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.ingressVideoEncodingPresetToJSON = ingressVideoEncodingPresetToJSON;\nvar IngressState_Status;\n(function (IngressState_Status) {\n    IngressState_Status[IngressState_Status[\"ENDPOINT_INACTIVE\"] = 0] = \"ENDPOINT_INACTIVE\";\n    IngressState_Status[IngressState_Status[\"ENDPOINT_BUFFERING\"] = 1] = \"ENDPOINT_BUFFERING\";\n    IngressState_Status[IngressState_Status[\"ENDPOINT_PUBLISHING\"] = 2] = \"ENDPOINT_PUBLISHING\";\n    IngressState_Status[IngressState_Status[\"ENDPOINT_ERROR\"] = 3] = \"ENDPOINT_ERROR\";\n    IngressState_Status[IngressState_Status[\"ENDPOINT_COMPLETE\"] = 4] = \"ENDPOINT_COMPLETE\";\n    IngressState_Status[IngressState_Status[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(IngressState_Status = exports.IngressState_Status || (exports.IngressState_Status = {}));\nfunction ingressState_StatusFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"ENDPOINT_INACTIVE\":\n            return IngressState_Status.ENDPOINT_INACTIVE;\n        case 1:\n        case \"ENDPOINT_BUFFERING\":\n            return IngressState_Status.ENDPOINT_BUFFERING;\n        case 2:\n        case \"ENDPOINT_PUBLISHING\":\n            return IngressState_Status.ENDPOINT_PUBLISHING;\n        case 3:\n        case \"ENDPOINT_ERROR\":\n            return IngressState_Status.ENDPOINT_ERROR;\n        case 4:\n        case \"ENDPOINT_COMPLETE\":\n            return IngressState_Status.ENDPOINT_COMPLETE;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return IngressState_Status.UNRECOGNIZED;\n    }\n}\nexports.ingressState_StatusFromJSON = ingressState_StatusFromJSON;\nfunction ingressState_StatusToJSON(object) {\n    switch (object) {\n        case IngressState_Status.ENDPOINT_INACTIVE:\n            return \"ENDPOINT_INACTIVE\";\n        case IngressState_Status.ENDPOINT_BUFFERING:\n            return \"ENDPOINT_BUFFERING\";\n        case IngressState_Status.ENDPOINT_PUBLISHING:\n            return \"ENDPOINT_PUBLISHING\";\n        case IngressState_Status.ENDPOINT_ERROR:\n            return \"ENDPOINT_ERROR\";\n        case IngressState_Status.ENDPOINT_COMPLETE:\n            return \"ENDPOINT_COMPLETE\";\n        case IngressState_Status.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.ingressState_StatusToJSON = ingressState_StatusToJSON;\nfunction createBaseCreateIngressRequest() {\n    return {\n        inputType: 0,\n        url: \"\",\n        name: \"\",\n        roomName: \"\",\n        participantIdentity: \"\",\n        participantName: \"\",\n        bypassTranscoding: false,\n        audio: undefined,\n        video: undefined,\n    };\n}\nexports.CreateIngressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.inputType !== undefined && message.inputType !== 0) {\n            writer.uint32(8).int32(message.inputType);\n        }\n        if (message.url !== undefined && message.url !== \"\") {\n            writer.uint32(74).string(message.url);\n        }\n        if (message.name !== undefined && message.name !== \"\") {\n            writer.uint32(18).string(message.name);\n        }\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(26).string(message.roomName);\n        }\n        if (message.participantIdentity !== undefined && message.participantIdentity !== \"\") {\n            writer.uint32(34).string(message.participantIdentity);\n        }\n        if (message.participantName !== undefined && message.participantName !== \"\") {\n            writer.uint32(42).string(message.participantName);\n        }\n        if (message.bypassTranscoding === true) {\n            writer.uint32(64).bool(message.bypassTranscoding);\n        }\n        if (message.audio !== undefined) {\n            exports.IngressAudioOptions.encode(message.audio, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.video !== undefined) {\n            exports.IngressVideoOptions.encode(message.video, writer.uint32(58).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseCreateIngressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.inputType = reader.int32();\n                    break;\n                case 9:\n                    message.url = reader.string();\n                    break;\n                case 2:\n                    message.name = reader.string();\n                    break;\n                case 3:\n                    message.roomName = reader.string();\n                    break;\n                case 4:\n                    message.participantIdentity = reader.string();\n                    break;\n                case 5:\n                    message.participantName = reader.string();\n                    break;\n                case 8:\n                    message.bypassTranscoding = reader.bool();\n                    break;\n                case 6:\n                    message.audio = exports.IngressAudioOptions.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.video = exports.IngressVideoOptions.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            inputType: isSet(object.inputType) ? ingressInputFromJSON(object.inputType) : 0,\n            url: isSet(object.url) ? String(object.url) : \"\",\n            name: isSet(object.name) ? String(object.name) : \"\",\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            participantIdentity: isSet(object.participantIdentity) ? String(object.participantIdentity) : \"\",\n            participantName: isSet(object.participantName) ? String(object.participantName) : \"\",\n            bypassTranscoding: isSet(object.bypassTranscoding) ? Boolean(object.bypassTranscoding) : false,\n            audio: isSet(object.audio) ? exports.IngressAudioOptions.fromJSON(object.audio) : undefined,\n            video: isSet(object.video) ? exports.IngressVideoOptions.fromJSON(object.video) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.inputType !== undefined && (obj.inputType = ingressInputToJSON(message.inputType));\n        message.url !== undefined && (obj.url = message.url);\n        message.name !== undefined && (obj.name = message.name);\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.participantIdentity !== undefined && (obj.participantIdentity = message.participantIdentity);\n        message.participantName !== undefined && (obj.participantName = message.participantName);\n        message.bypassTranscoding !== undefined && (obj.bypassTranscoding = message.bypassTranscoding);\n        message.audio !== undefined && (obj.audio = message.audio ? exports.IngressAudioOptions.toJSON(message.audio) : undefined);\n        message.video !== undefined && (obj.video = message.video ? exports.IngressVideoOptions.toJSON(message.video) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        const message = createBaseCreateIngressRequest();\n        message.inputType = (_a = object.inputType) !== null && _a !== void 0 ? _a : 0;\n        message.url = (_b = object.url) !== null && _b !== void 0 ? _b : \"\";\n        message.name = (_c = object.name) !== null && _c !== void 0 ? _c : \"\";\n        message.roomName = (_d = object.roomName) !== null && _d !== void 0 ? _d : \"\";\n        message.participantIdentity = (_e = object.participantIdentity) !== null && _e !== void 0 ? _e : \"\";\n        message.participantName = (_f = object.participantName) !== null && _f !== void 0 ? _f : \"\";\n        message.bypassTranscoding = (_g = object.bypassTranscoding) !== null && _g !== void 0 ? _g : false;\n        message.audio = (object.audio !== undefined && object.audio !== null)\n            ? exports.IngressAudioOptions.fromPartial(object.audio)\n            : undefined;\n        message.video = (object.video !== undefined && object.video !== null)\n            ? exports.IngressVideoOptions.fromPartial(object.video)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseIngressAudioOptions() {\n    return { name: \"\", source: 0, preset: undefined, options: undefined };\n}\nexports.IngressAudioOptions = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.name !== undefined && message.name !== \"\") {\n            writer.uint32(10).string(message.name);\n        }\n        if (message.source !== undefined && message.source !== 0) {\n            writer.uint32(16).int32(message.source);\n        }\n        if (message.preset !== undefined) {\n            writer.uint32(24).int32(message.preset);\n        }\n        if (message.options !== undefined) {\n            exports.IngressAudioEncodingOptions.encode(message.options, writer.uint32(34).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseIngressAudioOptions();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.name = reader.string();\n                    break;\n                case 2:\n                    message.source = reader.int32();\n                    break;\n                case 3:\n                    message.preset = reader.int32();\n                    break;\n                case 4:\n                    message.options = exports.IngressAudioEncodingOptions.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            name: isSet(object.name) ? String(object.name) : \"\",\n            source: isSet(object.source) ? livekit_models_1.trackSourceFromJSON(object.source) : 0,\n            preset: isSet(object.preset) ? ingressAudioEncodingPresetFromJSON(object.preset) : undefined,\n            options: isSet(object.options) ? exports.IngressAudioEncodingOptions.fromJSON(object.options) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.name !== undefined && (obj.name = message.name);\n        message.source !== undefined && (obj.source = livekit_models_1.trackSourceToJSON(message.source));\n        message.preset !== undefined &&\n            (obj.preset = message.preset !== undefined ? ingressAudioEncodingPresetToJSON(message.preset) : undefined);\n        message.options !== undefined &&\n            (obj.options = message.options ? exports.IngressAudioEncodingOptions.toJSON(message.options) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseIngressAudioOptions();\n        message.name = (_a = object.name) !== null && _a !== void 0 ? _a : \"\";\n        message.source = (_b = object.source) !== null && _b !== void 0 ? _b : 0;\n        message.preset = (_c = object.preset) !== null && _c !== void 0 ? _c : undefined;\n        message.options = (object.options !== undefined && object.options !== null)\n            ? exports.IngressAudioEncodingOptions.fromPartial(object.options)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseIngressVideoOptions() {\n    return { name: \"\", source: 0, preset: undefined, options: undefined };\n}\nexports.IngressVideoOptions = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.name !== undefined && message.name !== \"\") {\n            writer.uint32(10).string(message.name);\n        }\n        if (message.source !== undefined && message.source !== 0) {\n            writer.uint32(16).int32(message.source);\n        }\n        if (message.preset !== undefined) {\n            writer.uint32(24).int32(message.preset);\n        }\n        if (message.options !== undefined) {\n            exports.IngressVideoEncodingOptions.encode(message.options, writer.uint32(34).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseIngressVideoOptions();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.name = reader.string();\n                    break;\n                case 2:\n                    message.source = reader.int32();\n                    break;\n                case 3:\n                    message.preset = reader.int32();\n                    break;\n                case 4:\n                    message.options = exports.IngressVideoEncodingOptions.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            name: isSet(object.name) ? String(object.name) : \"\",\n            source: isSet(object.source) ? livekit_models_1.trackSourceFromJSON(object.source) : 0,\n            preset: isSet(object.preset) ? ingressVideoEncodingPresetFromJSON(object.preset) : undefined,\n            options: isSet(object.options) ? exports.IngressVideoEncodingOptions.fromJSON(object.options) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.name !== undefined && (obj.name = message.name);\n        message.source !== undefined && (obj.source = livekit_models_1.trackSourceToJSON(message.source));\n        message.preset !== undefined &&\n            (obj.preset = message.preset !== undefined ? ingressVideoEncodingPresetToJSON(message.preset) : undefined);\n        message.options !== undefined &&\n            (obj.options = message.options ? exports.IngressVideoEncodingOptions.toJSON(message.options) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseIngressVideoOptions();\n        message.name = (_a = object.name) !== null && _a !== void 0 ? _a : \"\";\n        message.source = (_b = object.source) !== null && _b !== void 0 ? _b : 0;\n        message.preset = (_c = object.preset) !== null && _c !== void 0 ? _c : undefined;\n        message.options = (object.options !== undefined && object.options !== null)\n            ? exports.IngressVideoEncodingOptions.fromPartial(object.options)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseIngressAudioEncodingOptions() {\n    return { audioCodec: 0, bitrate: 0, disableDtx: false, channels: 0 };\n}\nexports.IngressAudioEncodingOptions = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.audioCodec !== undefined && message.audioCodec !== 0) {\n            writer.uint32(8).int32(message.audioCodec);\n        }\n        if (message.bitrate !== undefined && message.bitrate !== 0) {\n            writer.uint32(16).uint32(message.bitrate);\n        }\n        if (message.disableDtx === true) {\n            writer.uint32(24).bool(message.disableDtx);\n        }\n        if (message.channels !== undefined && message.channels !== 0) {\n            writer.uint32(32).uint32(message.channels);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseIngressAudioEncodingOptions();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.audioCodec = reader.int32();\n                    break;\n                case 2:\n                    message.bitrate = reader.uint32();\n                    break;\n                case 3:\n                    message.disableDtx = reader.bool();\n                    break;\n                case 4:\n                    message.channels = reader.uint32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            audioCodec: isSet(object.audioCodec) ? livekit_models_1.audioCodecFromJSON(object.audioCodec) : 0,\n            bitrate: isSet(object.bitrate) ? Number(object.bitrate) : 0,\n            disableDtx: isSet(object.disableDtx) ? Boolean(object.disableDtx) : false,\n            channels: isSet(object.channels) ? Number(object.channels) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.audioCodec !== undefined && (obj.audioCodec = livekit_models_1.audioCodecToJSON(message.audioCodec));\n        message.bitrate !== undefined && (obj.bitrate = Math.round(message.bitrate));\n        message.disableDtx !== undefined && (obj.disableDtx = message.disableDtx);\n        message.channels !== undefined && (obj.channels = Math.round(message.channels));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d;\n        const message = createBaseIngressAudioEncodingOptions();\n        message.audioCodec = (_a = object.audioCodec) !== null && _a !== void 0 ? _a : 0;\n        message.bitrate = (_b = object.bitrate) !== null && _b !== void 0 ? _b : 0;\n        message.disableDtx = (_c = object.disableDtx) !== null && _c !== void 0 ? _c : false;\n        message.channels = (_d = object.channels) !== null && _d !== void 0 ? _d : 0;\n        return message;\n    },\n};\nfunction createBaseIngressVideoEncodingOptions() {\n    return { videoCodec: 0, frameRate: 0, layers: [] };\n}\nexports.IngressVideoEncodingOptions = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.videoCodec !== undefined && message.videoCodec !== 0) {\n            writer.uint32(8).int32(message.videoCodec);\n        }\n        if (message.frameRate !== undefined && message.frameRate !== 0) {\n            writer.uint32(17).double(message.frameRate);\n        }\n        if (message.layers !== undefined && message.layers.length !== 0) {\n            for (const v of message.layers) {\n                livekit_models_1.VideoLayer.encode(v, writer.uint32(26).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseIngressVideoEncodingOptions();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.videoCodec = reader.int32();\n                    break;\n                case 2:\n                    message.frameRate = reader.double();\n                    break;\n                case 3:\n                    message.layers.push(livekit_models_1.VideoLayer.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            videoCodec: isSet(object.videoCodec) ? livekit_models_1.videoCodecFromJSON(object.videoCodec) : 0,\n            frameRate: isSet(object.frameRate) ? Number(object.frameRate) : 0,\n            layers: Array.isArray(object === null || object === void 0 ? void 0 : object.layers) ? object.layers.map((e) => livekit_models_1.VideoLayer.fromJSON(e)) : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.videoCodec !== undefined && (obj.videoCodec = livekit_models_1.videoCodecToJSON(message.videoCodec));\n        message.frameRate !== undefined && (obj.frameRate = message.frameRate);\n        if (message.layers) {\n            obj.layers = message.layers.map((e) => e ? livekit_models_1.VideoLayer.toJSON(e) : undefined);\n        }\n        else {\n            obj.layers = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseIngressVideoEncodingOptions();\n        message.videoCodec = (_a = object.videoCodec) !== null && _a !== void 0 ? _a : 0;\n        message.frameRate = (_b = object.frameRate) !== null && _b !== void 0 ? _b : 0;\n        message.layers = ((_c = object.layers) === null || _c === void 0 ? void 0 : _c.map((e) => livekit_models_1.VideoLayer.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseIngressInfo() {\n    return {\n        ingressId: \"\",\n        name: \"\",\n        streamKey: \"\",\n        url: \"\",\n        inputType: 0,\n        bypassTranscoding: false,\n        audio: undefined,\n        video: undefined,\n        roomName: \"\",\n        participantIdentity: \"\",\n        participantName: \"\",\n        reusable: false,\n        state: undefined,\n    };\n}\nexports.IngressInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.ingressId !== undefined && message.ingressId !== \"\") {\n            writer.uint32(10).string(message.ingressId);\n        }\n        if (message.name !== undefined && message.name !== \"\") {\n            writer.uint32(18).string(message.name);\n        }\n        if (message.streamKey !== undefined && message.streamKey !== \"\") {\n            writer.uint32(26).string(message.streamKey);\n        }\n        if (message.url !== undefined && message.url !== \"\") {\n            writer.uint32(34).string(message.url);\n        }\n        if (message.inputType !== undefined && message.inputType !== 0) {\n            writer.uint32(40).int32(message.inputType);\n        }\n        if (message.bypassTranscoding === true) {\n            writer.uint32(104).bool(message.bypassTranscoding);\n        }\n        if (message.audio !== undefined) {\n            exports.IngressAudioOptions.encode(message.audio, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.video !== undefined) {\n            exports.IngressVideoOptions.encode(message.video, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(66).string(message.roomName);\n        }\n        if (message.participantIdentity !== undefined && message.participantIdentity !== \"\") {\n            writer.uint32(74).string(message.participantIdentity);\n        }\n        if (message.participantName !== undefined && message.participantName !== \"\") {\n            writer.uint32(82).string(message.participantName);\n        }\n        if (message.reusable === true) {\n            writer.uint32(88).bool(message.reusable);\n        }\n        if (message.state !== undefined) {\n            exports.IngressState.encode(message.state, writer.uint32(98).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseIngressInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.ingressId = reader.string();\n                    break;\n                case 2:\n                    message.name = reader.string();\n                    break;\n                case 3:\n                    message.streamKey = reader.string();\n                    break;\n                case 4:\n                    message.url = reader.string();\n                    break;\n                case 5:\n                    message.inputType = reader.int32();\n                    break;\n                case 13:\n                    message.bypassTranscoding = reader.bool();\n                    break;\n                case 6:\n                    message.audio = exports.IngressAudioOptions.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.video = exports.IngressVideoOptions.decode(reader, reader.uint32());\n                    break;\n                case 8:\n                    message.roomName = reader.string();\n                    break;\n                case 9:\n                    message.participantIdentity = reader.string();\n                    break;\n                case 10:\n                    message.participantName = reader.string();\n                    break;\n                case 11:\n                    message.reusable = reader.bool();\n                    break;\n                case 12:\n                    message.state = exports.IngressState.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            ingressId: isSet(object.ingressId) ? String(object.ingressId) : \"\",\n            name: isSet(object.name) ? String(object.name) : \"\",\n            streamKey: isSet(object.streamKey) ? String(object.streamKey) : \"\",\n            url: isSet(object.url) ? String(object.url) : \"\",\n            inputType: isSet(object.inputType) ? ingressInputFromJSON(object.inputType) : 0,\n            bypassTranscoding: isSet(object.bypassTranscoding) ? Boolean(object.bypassTranscoding) : false,\n            audio: isSet(object.audio) ? exports.IngressAudioOptions.fromJSON(object.audio) : undefined,\n            video: isSet(object.video) ? exports.IngressVideoOptions.fromJSON(object.video) : undefined,\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            participantIdentity: isSet(object.participantIdentity) ? String(object.participantIdentity) : \"\",\n            participantName: isSet(object.participantName) ? String(object.participantName) : \"\",\n            reusable: isSet(object.reusable) ? Boolean(object.reusable) : false,\n            state: isSet(object.state) ? exports.IngressState.fromJSON(object.state) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.ingressId !== undefined && (obj.ingressId = message.ingressId);\n        message.name !== undefined && (obj.name = message.name);\n        message.streamKey !== undefined && (obj.streamKey = message.streamKey);\n        message.url !== undefined && (obj.url = message.url);\n        message.inputType !== undefined && (obj.inputType = ingressInputToJSON(message.inputType));\n        message.bypassTranscoding !== undefined && (obj.bypassTranscoding = message.bypassTranscoding);\n        message.audio !== undefined && (obj.audio = message.audio ? exports.IngressAudioOptions.toJSON(message.audio) : undefined);\n        message.video !== undefined && (obj.video = message.video ? exports.IngressVideoOptions.toJSON(message.video) : undefined);\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.participantIdentity !== undefined && (obj.participantIdentity = message.participantIdentity);\n        message.participantName !== undefined && (obj.participantName = message.participantName);\n        message.reusable !== undefined && (obj.reusable = message.reusable);\n        message.state !== undefined && (obj.state = message.state ? exports.IngressState.toJSON(message.state) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        const message = createBaseIngressInfo();\n        message.ingressId = (_a = object.ingressId) !== null && _a !== void 0 ? _a : \"\";\n        message.name = (_b = object.name) !== null && _b !== void 0 ? _b : \"\";\n        message.streamKey = (_c = object.streamKey) !== null && _c !== void 0 ? _c : \"\";\n        message.url = (_d = object.url) !== null && _d !== void 0 ? _d : \"\";\n        message.inputType = (_e = object.inputType) !== null && _e !== void 0 ? _e : 0;\n        message.bypassTranscoding = (_f = object.bypassTranscoding) !== null && _f !== void 0 ? _f : false;\n        message.audio = (object.audio !== undefined && object.audio !== null)\n            ? exports.IngressAudioOptions.fromPartial(object.audio)\n            : undefined;\n        message.video = (object.video !== undefined && object.video !== null)\n            ? exports.IngressVideoOptions.fromPartial(object.video)\n            : undefined;\n        message.roomName = (_g = object.roomName) !== null && _g !== void 0 ? _g : \"\";\n        message.participantIdentity = (_h = object.participantIdentity) !== null && _h !== void 0 ? _h : \"\";\n        message.participantName = (_j = object.participantName) !== null && _j !== void 0 ? _j : \"\";\n        message.reusable = (_k = object.reusable) !== null && _k !== void 0 ? _k : false;\n        message.state = (object.state !== undefined && object.state !== null)\n            ? exports.IngressState.fromPartial(object.state)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseIngressState() {\n    return {\n        status: 0,\n        error: \"\",\n        video: undefined,\n        audio: undefined,\n        roomId: \"\",\n        startedAt: 0,\n        endedAt: 0,\n        resourceId: \"\",\n        tracks: [],\n    };\n}\nexports.IngressState = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.status !== undefined && message.status !== 0) {\n            writer.uint32(8).int32(message.status);\n        }\n        if (message.error !== undefined && message.error !== \"\") {\n            writer.uint32(18).string(message.error);\n        }\n        if (message.video !== undefined) {\n            exports.InputVideoState.encode(message.video, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.audio !== undefined) {\n            exports.InputAudioState.encode(message.audio, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.roomId !== undefined && message.roomId !== \"\") {\n            writer.uint32(42).string(message.roomId);\n        }\n        if (message.startedAt !== undefined && message.startedAt !== 0) {\n            writer.uint32(56).int64(message.startedAt);\n        }\n        if (message.endedAt !== undefined && message.endedAt !== 0) {\n            writer.uint32(64).int64(message.endedAt);\n        }\n        if (message.resourceId !== undefined && message.resourceId !== \"\") {\n            writer.uint32(74).string(message.resourceId);\n        }\n        if (message.tracks !== undefined && message.tracks.length !== 0) {\n            for (const v of message.tracks) {\n                livekit_models_1.TrackInfo.encode(v, writer.uint32(50).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseIngressState();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.status = reader.int32();\n                    break;\n                case 2:\n                    message.error = reader.string();\n                    break;\n                case 3:\n                    message.video = exports.InputVideoState.decode(reader, reader.uint32());\n                    break;\n                case 4:\n                    message.audio = exports.InputAudioState.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.roomId = reader.string();\n                    break;\n                case 7:\n                    message.startedAt = longToNumber(reader.int64());\n                    break;\n                case 8:\n                    message.endedAt = longToNumber(reader.int64());\n                    break;\n                case 9:\n                    message.resourceId = reader.string();\n                    break;\n                case 6:\n                    message.tracks.push(livekit_models_1.TrackInfo.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            status: isSet(object.status) ? ingressState_StatusFromJSON(object.status) : 0,\n            error: isSet(object.error) ? String(object.error) : \"\",\n            video: isSet(object.video) ? exports.InputVideoState.fromJSON(object.video) : undefined,\n            audio: isSet(object.audio) ? exports.InputAudioState.fromJSON(object.audio) : undefined,\n            roomId: isSet(object.roomId) ? String(object.roomId) : \"\",\n            startedAt: isSet(object.startedAt) ? Number(object.startedAt) : 0,\n            endedAt: isSet(object.endedAt) ? Number(object.endedAt) : 0,\n            resourceId: isSet(object.resourceId) ? String(object.resourceId) : \"\",\n            tracks: Array.isArray(object === null || object === void 0 ? void 0 : object.tracks) ? object.tracks.map((e) => livekit_models_1.TrackInfo.fromJSON(e)) : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.status !== undefined && (obj.status = ingressState_StatusToJSON(message.status));\n        message.error !== undefined && (obj.error = message.error);\n        message.video !== undefined && (obj.video = message.video ? exports.InputVideoState.toJSON(message.video) : undefined);\n        message.audio !== undefined && (obj.audio = message.audio ? exports.InputAudioState.toJSON(message.audio) : undefined);\n        message.roomId !== undefined && (obj.roomId = message.roomId);\n        message.startedAt !== undefined && (obj.startedAt = Math.round(message.startedAt));\n        message.endedAt !== undefined && (obj.endedAt = Math.round(message.endedAt));\n        message.resourceId !== undefined && (obj.resourceId = message.resourceId);\n        if (message.tracks) {\n            obj.tracks = message.tracks.map((e) => e ? livekit_models_1.TrackInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.tracks = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        const message = createBaseIngressState();\n        message.status = (_a = object.status) !== null && _a !== void 0 ? _a : 0;\n        message.error = (_b = object.error) !== null && _b !== void 0 ? _b : \"\";\n        message.video = (object.video !== undefined && object.video !== null)\n            ? exports.InputVideoState.fromPartial(object.video)\n            : undefined;\n        message.audio = (object.audio !== undefined && object.audio !== null)\n            ? exports.InputAudioState.fromPartial(object.audio)\n            : undefined;\n        message.roomId = (_c = object.roomId) !== null && _c !== void 0 ? _c : \"\";\n        message.startedAt = (_d = object.startedAt) !== null && _d !== void 0 ? _d : 0;\n        message.endedAt = (_e = object.endedAt) !== null && _e !== void 0 ? _e : 0;\n        message.resourceId = (_f = object.resourceId) !== null && _f !== void 0 ? _f : \"\";\n        message.tracks = ((_g = object.tracks) === null || _g === void 0 ? void 0 : _g.map((e) => livekit_models_1.TrackInfo.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseInputVideoState() {\n    return { mimeType: \"\", averageBitrate: 0, width: 0, height: 0, framerate: 0 };\n}\nexports.InputVideoState = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.mimeType !== undefined && message.mimeType !== \"\") {\n            writer.uint32(10).string(message.mimeType);\n        }\n        if (message.averageBitrate !== undefined && message.averageBitrate !== 0) {\n            writer.uint32(16).uint32(message.averageBitrate);\n        }\n        if (message.width !== undefined && message.width !== 0) {\n            writer.uint32(24).uint32(message.width);\n        }\n        if (message.height !== undefined && message.height !== 0) {\n            writer.uint32(32).uint32(message.height);\n        }\n        if (message.framerate !== undefined && message.framerate !== 0) {\n            writer.uint32(41).double(message.framerate);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseInputVideoState();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.mimeType = reader.string();\n                    break;\n                case 2:\n                    message.averageBitrate = reader.uint32();\n                    break;\n                case 3:\n                    message.width = reader.uint32();\n                    break;\n                case 4:\n                    message.height = reader.uint32();\n                    break;\n                case 5:\n                    message.framerate = reader.double();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            mimeType: isSet(object.mimeType) ? String(object.mimeType) : \"\",\n            averageBitrate: isSet(object.averageBitrate) ? Number(object.averageBitrate) : 0,\n            width: isSet(object.width) ? Number(object.width) : 0,\n            height: isSet(object.height) ? Number(object.height) : 0,\n            framerate: isSet(object.framerate) ? Number(object.framerate) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.mimeType !== undefined && (obj.mimeType = message.mimeType);\n        message.averageBitrate !== undefined && (obj.averageBitrate = Math.round(message.averageBitrate));\n        message.width !== undefined && (obj.width = Math.round(message.width));\n        message.height !== undefined && (obj.height = Math.round(message.height));\n        message.framerate !== undefined && (obj.framerate = message.framerate);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e;\n        const message = createBaseInputVideoState();\n        message.mimeType = (_a = object.mimeType) !== null && _a !== void 0 ? _a : \"\";\n        message.averageBitrate = (_b = object.averageBitrate) !== null && _b !== void 0 ? _b : 0;\n        message.width = (_c = object.width) !== null && _c !== void 0 ? _c : 0;\n        message.height = (_d = object.height) !== null && _d !== void 0 ? _d : 0;\n        message.framerate = (_e = object.framerate) !== null && _e !== void 0 ? _e : 0;\n        return message;\n    },\n};\nfunction createBaseInputAudioState() {\n    return { mimeType: \"\", averageBitrate: 0, channels: 0, sampleRate: 0 };\n}\nexports.InputAudioState = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.mimeType !== undefined && message.mimeType !== \"\") {\n            writer.uint32(10).string(message.mimeType);\n        }\n        if (message.averageBitrate !== undefined && message.averageBitrate !== 0) {\n            writer.uint32(16).uint32(message.averageBitrate);\n        }\n        if (message.channels !== undefined && message.channels !== 0) {\n            writer.uint32(24).uint32(message.channels);\n        }\n        if (message.sampleRate !== undefined && message.sampleRate !== 0) {\n            writer.uint32(32).uint32(message.sampleRate);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseInputAudioState();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.mimeType = reader.string();\n                    break;\n                case 2:\n                    message.averageBitrate = reader.uint32();\n                    break;\n                case 3:\n                    message.channels = reader.uint32();\n                    break;\n                case 4:\n                    message.sampleRate = reader.uint32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            mimeType: isSet(object.mimeType) ? String(object.mimeType) : \"\",\n            averageBitrate: isSet(object.averageBitrate) ? Number(object.averageBitrate) : 0,\n            channels: isSet(object.channels) ? Number(object.channels) : 0,\n            sampleRate: isSet(object.sampleRate) ? Number(object.sampleRate) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.mimeType !== undefined && (obj.mimeType = message.mimeType);\n        message.averageBitrate !== undefined && (obj.averageBitrate = Math.round(message.averageBitrate));\n        message.channels !== undefined && (obj.channels = Math.round(message.channels));\n        message.sampleRate !== undefined && (obj.sampleRate = Math.round(message.sampleRate));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d;\n        const message = createBaseInputAudioState();\n        message.mimeType = (_a = object.mimeType) !== null && _a !== void 0 ? _a : \"\";\n        message.averageBitrate = (_b = object.averageBitrate) !== null && _b !== void 0 ? _b : 0;\n        message.channels = (_c = object.channels) !== null && _c !== void 0 ? _c : 0;\n        message.sampleRate = (_d = object.sampleRate) !== null && _d !== void 0 ? _d : 0;\n        return message;\n    },\n};\nfunction createBaseUpdateIngressRequest() {\n    return {\n        ingressId: \"\",\n        name: \"\",\n        roomName: \"\",\n        participantIdentity: \"\",\n        participantName: \"\",\n        bypassTranscoding: undefined,\n        audio: undefined,\n        video: undefined,\n    };\n}\nexports.UpdateIngressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.ingressId !== undefined && message.ingressId !== \"\") {\n            writer.uint32(10).string(message.ingressId);\n        }\n        if (message.name !== undefined && message.name !== \"\") {\n            writer.uint32(18).string(message.name);\n        }\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(26).string(message.roomName);\n        }\n        if (message.participantIdentity !== undefined && message.participantIdentity !== \"\") {\n            writer.uint32(34).string(message.participantIdentity);\n        }\n        if (message.participantName !== undefined && message.participantName !== \"\") {\n            writer.uint32(42).string(message.participantName);\n        }\n        if (message.bypassTranscoding !== undefined) {\n            writer.uint32(64).bool(message.bypassTranscoding);\n        }\n        if (message.audio !== undefined) {\n            exports.IngressAudioOptions.encode(message.audio, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.video !== undefined) {\n            exports.IngressVideoOptions.encode(message.video, writer.uint32(58).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseUpdateIngressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.ingressId = reader.string();\n                    break;\n                case 2:\n                    message.name = reader.string();\n                    break;\n                case 3:\n                    message.roomName = reader.string();\n                    break;\n                case 4:\n                    message.participantIdentity = reader.string();\n                    break;\n                case 5:\n                    message.participantName = reader.string();\n                    break;\n                case 8:\n                    message.bypassTranscoding = reader.bool();\n                    break;\n                case 6:\n                    message.audio = exports.IngressAudioOptions.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.video = exports.IngressVideoOptions.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            ingressId: isSet(object.ingressId) ? String(object.ingressId) : \"\",\n            name: isSet(object.name) ? String(object.name) : \"\",\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            participantIdentity: isSet(object.participantIdentity) ? String(object.participantIdentity) : \"\",\n            participantName: isSet(object.participantName) ? String(object.participantName) : \"\",\n            bypassTranscoding: isSet(object.bypassTranscoding) ? Boolean(object.bypassTranscoding) : undefined,\n            audio: isSet(object.audio) ? exports.IngressAudioOptions.fromJSON(object.audio) : undefined,\n            video: isSet(object.video) ? exports.IngressVideoOptions.fromJSON(object.video) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.ingressId !== undefined && (obj.ingressId = message.ingressId);\n        message.name !== undefined && (obj.name = message.name);\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.participantIdentity !== undefined && (obj.participantIdentity = message.participantIdentity);\n        message.participantName !== undefined && (obj.participantName = message.participantName);\n        message.bypassTranscoding !== undefined && (obj.bypassTranscoding = message.bypassTranscoding);\n        message.audio !== undefined && (obj.audio = message.audio ? exports.IngressAudioOptions.toJSON(message.audio) : undefined);\n        message.video !== undefined && (obj.video = message.video ? exports.IngressVideoOptions.toJSON(message.video) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f;\n        const message = createBaseUpdateIngressRequest();\n        message.ingressId = (_a = object.ingressId) !== null && _a !== void 0 ? _a : \"\";\n        message.name = (_b = object.name) !== null && _b !== void 0 ? _b : \"\";\n        message.roomName = (_c = object.roomName) !== null && _c !== void 0 ? _c : \"\";\n        message.participantIdentity = (_d = object.participantIdentity) !== null && _d !== void 0 ? _d : \"\";\n        message.participantName = (_e = object.participantName) !== null && _e !== void 0 ? _e : \"\";\n        message.bypassTranscoding = (_f = object.bypassTranscoding) !== null && _f !== void 0 ? _f : undefined;\n        message.audio = (object.audio !== undefined && object.audio !== null)\n            ? exports.IngressAudioOptions.fromPartial(object.audio)\n            : undefined;\n        message.video = (object.video !== undefined && object.video !== null)\n            ? exports.IngressVideoOptions.fromPartial(object.video)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseListIngressRequest() {\n    return { roomName: \"\", ingressId: \"\" };\n}\nexports.ListIngressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.roomName !== undefined && message.roomName !== \"\") {\n            writer.uint32(10).string(message.roomName);\n        }\n        if (message.ingressId !== undefined && message.ingressId !== \"\") {\n            writer.uint32(18).string(message.ingressId);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseListIngressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.roomName = reader.string();\n                    break;\n                case 2:\n                    message.ingressId = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            roomName: isSet(object.roomName) ? String(object.roomName) : \"\",\n            ingressId: isSet(object.ingressId) ? String(object.ingressId) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.roomName !== undefined && (obj.roomName = message.roomName);\n        message.ingressId !== undefined && (obj.ingressId = message.ingressId);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseListIngressRequest();\n        message.roomName = (_a = object.roomName) !== null && _a !== void 0 ? _a : \"\";\n        message.ingressId = (_b = object.ingressId) !== null && _b !== void 0 ? _b : \"\";\n        return message;\n    },\n};\nfunction createBaseListIngressResponse() {\n    return { items: [] };\n}\nexports.ListIngressResponse = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.items !== undefined && message.items.length !== 0) {\n            for (const v of message.items) {\n                exports.IngressInfo.encode(v, writer.uint32(10).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseListIngressResponse();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.items.push(exports.IngressInfo.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { items: Array.isArray(object === null || object === void 0 ? void 0 : object.items) ? object.items.map((e) => exports.IngressInfo.fromJSON(e)) : [] };\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.items) {\n            obj.items = message.items.map((e) => e ? exports.IngressInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.items = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseListIngressResponse();\n        message.items = ((_a = object.items) === null || _a === void 0 ? void 0 : _a.map((e) => exports.IngressInfo.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseDeleteIngressRequest() {\n    return { ingressId: \"\" };\n}\nexports.DeleteIngressRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.ingressId !== undefined && message.ingressId !== \"\") {\n            writer.uint32(10).string(message.ingressId);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseDeleteIngressRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.ingressId = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { ingressId: isSet(object.ingressId) ? String(object.ingressId) : \"\" };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.ingressId !== undefined && (obj.ingressId = message.ingressId);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseDeleteIngressRequest();\n        message.ingressId = (_a = object.ingressId) !== null && _a !== void 0 ? _a : \"\";\n        return message;\n    },\n};\nvar globalThis = (() => {\n    if (typeof globalThis !== \"undefined\") {\n        return globalThis;\n    }\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    if (typeof window !== \"undefined\") {\n        return window;\n    }\n    if (typeof global !== \"undefined\") {\n        return global;\n    }\n    throw \"Unable to locate global object\";\n})();\nfunction longToNumber(long) {\n    if (long.gt(Number.MAX_SAFE_INTEGER)) {\n        throw new globalThis.Error(\"Value is larger than Number.MAX_SAFE_INTEGER\");\n    }\n    return long.toNumber();\n}\nif (minimal_1.default.util.Long !== long_1.default) {\n    minimal_1.default.util.Long = long_1.default;\n    minimal_1.default.configure();\n}\nfunction isSet(value) {\n    return value !== null && value !== undefined;\n}\n//# sourceMappingURL=livekit_ingress.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9wcm90by9saXZla2l0X2luZ3Jlc3MuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCw0QkFBNEIsR0FBRywyQkFBMkIsR0FBRywwQkFBMEIsR0FBRyw0QkFBNEIsR0FBRyx1QkFBdUIsR0FBRyx1QkFBdUIsR0FBRyxvQkFBb0IsR0FBRyxtQkFBbUIsR0FBRyxtQ0FBbUMsR0FBRyxtQ0FBbUMsR0FBRywyQkFBMkIsR0FBRywyQkFBMkIsR0FBRyw0QkFBNEIsR0FBRyxpQ0FBaUMsR0FBRyxtQ0FBbUMsR0FBRywyQkFBMkIsR0FBRyx3Q0FBd0MsR0FBRywwQ0FBMEMsR0FBRyxrQ0FBa0MsR0FBRyx3Q0FBd0MsR0FBRywwQ0FBMEMsR0FBRyxrQ0FBa0MsR0FBRywwQkFBMEIsR0FBRyw0QkFBNEIsR0FBRyxvQkFBb0IsR0FBRyx1QkFBdUI7QUFDNzBCO0FBQ0EsK0JBQStCLG1CQUFPLENBQUMsK0RBQU07QUFDN0Msa0NBQWtDLG1CQUFPLENBQUMsaUZBQW9CO0FBQzlELHlCQUF5QixtQkFBTyxDQUFDLHlHQUFrQjtBQUNuRCx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDBDQUEwQyxvQkFBb0IsS0FBSztBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxzRUFBc0Usa0NBQWtDLEtBQUs7QUFDOUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHNFQUFzRSxrQ0FBa0MsS0FBSztBQUM5RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyx3REFBd0QsMkJBQTJCLEtBQUs7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxpQkFBaUI7QUFDakIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGlCQUFpQjtBQUNqQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2xpdmVzdHJlYW0vLi9ub2RlX21vZHVsZXMvbGl2ZWtpdC1zZXJ2ZXItc2RrL2Rpc3QvcHJvdG8vbGl2ZWtpdF9pbmdyZXNzLmpzPzY1NGIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRlbGV0ZUluZ3Jlc3NSZXF1ZXN0ID0gZXhwb3J0cy5MaXN0SW5ncmVzc1Jlc3BvbnNlID0gZXhwb3J0cy5MaXN0SW5ncmVzc1JlcXVlc3QgPSBleHBvcnRzLlVwZGF0ZUluZ3Jlc3NSZXF1ZXN0ID0gZXhwb3J0cy5JbnB1dEF1ZGlvU3RhdGUgPSBleHBvcnRzLklucHV0VmlkZW9TdGF0ZSA9IGV4cG9ydHMuSW5ncmVzc1N0YXRlID0gZXhwb3J0cy5JbmdyZXNzSW5mbyA9IGV4cG9ydHMuSW5ncmVzc1ZpZGVvRW5jb2RpbmdPcHRpb25zID0gZXhwb3J0cy5JbmdyZXNzQXVkaW9FbmNvZGluZ09wdGlvbnMgPSBleHBvcnRzLkluZ3Jlc3NWaWRlb09wdGlvbnMgPSBleHBvcnRzLkluZ3Jlc3NBdWRpb09wdGlvbnMgPSBleHBvcnRzLkNyZWF0ZUluZ3Jlc3NSZXF1ZXN0ID0gZXhwb3J0cy5pbmdyZXNzU3RhdGVfU3RhdHVzVG9KU09OID0gZXhwb3J0cy5pbmdyZXNzU3RhdGVfU3RhdHVzRnJvbUpTT04gPSBleHBvcnRzLkluZ3Jlc3NTdGF0ZV9TdGF0dXMgPSBleHBvcnRzLmluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0VG9KU09OID0gZXhwb3J0cy5pbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldEZyb21KU09OID0gZXhwb3J0cy5JbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldCA9IGV4cG9ydHMuaW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXRUb0pTT04gPSBleHBvcnRzLmluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0RnJvbUpTT04gPSBleHBvcnRzLkluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0ID0gZXhwb3J0cy5pbmdyZXNzSW5wdXRUb0pTT04gPSBleHBvcnRzLmluZ3Jlc3NJbnB1dEZyb21KU09OID0gZXhwb3J0cy5JbmdyZXNzSW5wdXQgPSBleHBvcnRzLnByb3RvYnVmUGFja2FnZSA9IHZvaWQgMDtcbi8qIGVzbGludC1kaXNhYmxlICovXG5jb25zdCBsb25nXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImxvbmdcIikpO1xuY29uc3QgbWluaW1hbF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJwcm90b2J1ZmpzL21pbmltYWxcIikpO1xuY29uc3QgbGl2ZWtpdF9tb2RlbHNfMSA9IHJlcXVpcmUoXCIuL2xpdmVraXRfbW9kZWxzXCIpO1xuZXhwb3J0cy5wcm90b2J1ZlBhY2thZ2UgPSBcImxpdmVraXRcIjtcbnZhciBJbmdyZXNzSW5wdXQ7XG4oZnVuY3Rpb24gKEluZ3Jlc3NJbnB1dCkge1xuICAgIEluZ3Jlc3NJbnB1dFtJbmdyZXNzSW5wdXRbXCJSVE1QX0lOUFVUXCJdID0gMF0gPSBcIlJUTVBfSU5QVVRcIjtcbiAgICBJbmdyZXNzSW5wdXRbSW5ncmVzc0lucHV0W1wiV0hJUF9JTlBVVFwiXSA9IDFdID0gXCJXSElQX0lOUFVUXCI7XG4gICAgLyoqIFVSTF9JTlBVVCAtIFB1bGwgZnJvbSB0aGUgcHJvdmlkZWQgVVJMLiBPbmx5IEhUVFAgdXJsIGFyZSBzdXBwb3J0ZWQsIHNlcnZpbmcgZWl0aGVyIGEgc2luZ2xlIG1lZGlhIGZpbGUgb3IgYSBITFMgc3RyZWFtICovXG4gICAgSW5ncmVzc0lucHV0W0luZ3Jlc3NJbnB1dFtcIlVSTF9JTlBVVFwiXSA9IDJdID0gXCJVUkxfSU5QVVRcIjtcbiAgICBJbmdyZXNzSW5wdXRbSW5ncmVzc0lucHV0W1wiVU5SRUNPR05JWkVEXCJdID0gLTFdID0gXCJVTlJFQ09HTklaRURcIjtcbn0pKEluZ3Jlc3NJbnB1dCA9IGV4cG9ydHMuSW5ncmVzc0lucHV0IHx8IChleHBvcnRzLkluZ3Jlc3NJbnB1dCA9IHt9KSk7XG5mdW5jdGlvbiBpbmdyZXNzSW5wdXRGcm9tSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgXCJSVE1QX0lOUFVUXCI6XG4gICAgICAgICAgICByZXR1cm4gSW5ncmVzc0lucHV0LlJUTVBfSU5QVVQ7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSBcIldISVBfSU5QVVRcIjpcbiAgICAgICAgICAgIHJldHVybiBJbmdyZXNzSW5wdXQuV0hJUF9JTlBVVDtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIFwiVVJMX0lOUFVUXCI6XG4gICAgICAgICAgICByZXR1cm4gSW5ncmVzc0lucHV0LlVSTF9JTlBVVDtcbiAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgY2FzZSBcIlVOUkVDT0dOSVpFRFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIEluZ3Jlc3NJbnB1dC5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy5pbmdyZXNzSW5wdXRGcm9tSlNPTiA9IGluZ3Jlc3NJbnB1dEZyb21KU09OO1xuZnVuY3Rpb24gaW5ncmVzc0lucHV0VG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgSW5ncmVzc0lucHV0LlJUTVBfSU5QVVQ6XG4gICAgICAgICAgICByZXR1cm4gXCJSVE1QX0lOUFVUXCI7XG4gICAgICAgIGNhc2UgSW5ncmVzc0lucHV0LldISVBfSU5QVVQ6XG4gICAgICAgICAgICByZXR1cm4gXCJXSElQX0lOUFVUXCI7XG4gICAgICAgIGNhc2UgSW5ncmVzc0lucHV0LlVSTF9JTlBVVDpcbiAgICAgICAgICAgIHJldHVybiBcIlVSTF9JTlBVVFwiO1xuICAgICAgICBjYXNlIEluZ3Jlc3NJbnB1dC5VTlJFQ09HTklaRUQ6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJVTlJFQ09HTklaRURcIjtcbiAgICB9XG59XG5leHBvcnRzLmluZ3Jlc3NJbnB1dFRvSlNPTiA9IGluZ3Jlc3NJbnB1dFRvSlNPTjtcbnZhciBJbmdyZXNzQXVkaW9FbmNvZGluZ1ByZXNldDtcbihmdW5jdGlvbiAoSW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXQpIHtcbiAgICAvKiogT1BVU19TVEVSRU9fOTZLQlBTIC0gT1BVUywgMiBjaGFubmVscywgOTZrYnBzICovXG4gICAgSW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXRbSW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXRbXCJPUFVTX1NURVJFT185NktCUFNcIl0gPSAwXSA9IFwiT1BVU19TVEVSRU9fOTZLQlBTXCI7XG4gICAgLyoqIE9QVVNfTU9OT182NEtCUyAtIE9QVVMsIDEgY2hhbm5lbCwgNjRrYnBzICovXG4gICAgSW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXRbSW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXRbXCJPUFVTX01PTk9fNjRLQlNcIl0gPSAxXSA9IFwiT1BVU19NT05PXzY0S0JTXCI7XG4gICAgSW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXRbSW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXRbXCJVTlJFQ09HTklaRURcIl0gPSAtMV0gPSBcIlVOUkVDT0dOSVpFRFwiO1xufSkoSW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXQgPSBleHBvcnRzLkluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0IHx8IChleHBvcnRzLkluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0ID0ge30pKTtcbmZ1bmN0aW9uIGluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0RnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiT1BVU19TVEVSRU9fOTZLQlBTXCI6XG4gICAgICAgICAgICByZXR1cm4gSW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXQuT1BVU19TVEVSRU9fOTZLQlBTO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJPUFVTX01PTk9fNjRLQlNcIjpcbiAgICAgICAgICAgIHJldHVybiBJbmdyZXNzQXVkaW9FbmNvZGluZ1ByZXNldC5PUFVTX01PTk9fNjRLQlM7XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBJbmdyZXNzQXVkaW9FbmNvZGluZ1ByZXNldC5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy5pbmdyZXNzQXVkaW9FbmNvZGluZ1ByZXNldEZyb21KU09OID0gaW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXRGcm9tSlNPTjtcbmZ1bmN0aW9uIGluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0VG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgSW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXQuT1BVU19TVEVSRU9fOTZLQlBTOlxuICAgICAgICAgICAgcmV0dXJuIFwiT1BVU19TVEVSRU9fOTZLQlBTXCI7XG4gICAgICAgIGNhc2UgSW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXQuT1BVU19NT05PXzY0S0JTOlxuICAgICAgICAgICAgcmV0dXJuIFwiT1BVU19NT05PXzY0S0JTXCI7XG4gICAgICAgIGNhc2UgSW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXQuVU5SRUNPR05JWkVEOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5SRUNPR05JWkVEXCI7XG4gICAgfVxufVxuZXhwb3J0cy5pbmdyZXNzQXVkaW9FbmNvZGluZ1ByZXNldFRvSlNPTiA9IGluZ3Jlc3NBdWRpb0VuY29kaW5nUHJlc2V0VG9KU09OO1xudmFyIEluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0O1xuKGZ1bmN0aW9uIChJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldCkge1xuICAgIC8qKiBIMjY0XzcyMFBfMzBGUFNfM19MQVlFUlMgLSAxMjgweDcyMCwgIDMwZnBzLCAxOTAwa2JwcyBtYWluIGxheWVyLCAzIGxheWVycyB0b3RhbCAqL1xuICAgIEluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0W0luZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0W1wiSDI2NF83MjBQXzMwRlBTXzNfTEFZRVJTXCJdID0gMF0gPSBcIkgyNjRfNzIwUF8zMEZQU18zX0xBWUVSU1wiO1xuICAgIC8qKiBIMjY0XzEwODBQXzMwRlBTXzNfTEFZRVJTIC0gMTk4MHgxMDgwLCAzMGZwcywgMzUwMGticHMgbWFpbiBsYXllciwgMyBsYXllcnMgdG90YWwgKi9cbiAgICBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtcIkgyNjRfMTA4MFBfMzBGUFNfM19MQVlFUlNcIl0gPSAxXSA9IFwiSDI2NF8xMDgwUF8zMEZQU18zX0xBWUVSU1wiO1xuICAgIC8qKiBIMjY0XzU0MFBfMjVGUFNfMl9MQVlFUlMgLSA5NjB4NTQwLCAgMjVmcHMsIDEwMDBrYnBzICBtYWluIGxheWVyLCAyIGxheWVycyB0b3RhbCAqL1xuICAgIEluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0W0luZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0W1wiSDI2NF81NDBQXzI1RlBTXzJfTEFZRVJTXCJdID0gMl0gPSBcIkgyNjRfNTQwUF8yNUZQU18yX0xBWUVSU1wiO1xuICAgIC8qKiBIMjY0XzcyMFBfMzBGUFNfMV9MQVlFUiAtIDEyODB4NzIwLCAgMzBmcHMsIDE5MDBrYnBzLCBubyBzaW11bGNhc3QgKi9cbiAgICBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtcIkgyNjRfNzIwUF8zMEZQU18xX0xBWUVSXCJdID0gM10gPSBcIkgyNjRfNzIwUF8zMEZQU18xX0xBWUVSXCI7XG4gICAgLyoqIEgyNjRfMTA4MFBfMzBGUFNfMV9MQVlFUiAtIDE5ODB4MTA4MCwgMzBmcHMsIDM1MDBrYnBzLCBubyBzaW11bGNhc3QgKi9cbiAgICBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtcIkgyNjRfMTA4MFBfMzBGUFNfMV9MQVlFUlwiXSA9IDRdID0gXCJIMjY0XzEwODBQXzMwRlBTXzFfTEFZRVJcIjtcbiAgICAvKiogSDI2NF83MjBQXzMwRlBTXzNfTEFZRVJTX0hJR0hfTU9USU9OIC0gMTI4MHg3MjAsICAzMGZwcywgMjUwMGticHMgbWFpbiBsYXllciwgMyBsYXllcnMgdG90YWwsIGhpZ2hlciBiaXRyYXRlIGZvciBoaWdoIG1vdGlvbiwgaGFyZGVyIHRvIGVuY29kZSBjb250ZW50ICovXG4gICAgSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRbSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRbXCJIMjY0XzcyMFBfMzBGUFNfM19MQVlFUlNfSElHSF9NT1RJT05cIl0gPSA1XSA9IFwiSDI2NF83MjBQXzMwRlBTXzNfTEFZRVJTX0hJR0hfTU9USU9OXCI7XG4gICAgLyoqIEgyNjRfMTA4MFBfMzBGUFNfM19MQVlFUlNfSElHSF9NT1RJT04gLSAxOTgweDEwODAsIDMwZnBzLCA0NTAwa2JwcyBtYWluIGxheWVyLCAzIGxheWVycyB0b3RhbCwgaGlnaGVyIGJpdHJhdGUgZm9yIGhpZ2ggbW90aW9uLCBoYXJkZXIgdG8gZW5jb2RlIGNvbnRlbnQgKi9cbiAgICBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtcIkgyNjRfMTA4MFBfMzBGUFNfM19MQVlFUlNfSElHSF9NT1RJT05cIl0gPSA2XSA9IFwiSDI2NF8xMDgwUF8zMEZQU18zX0xBWUVSU19ISUdIX01PVElPTlwiO1xuICAgIC8qKiBIMjY0XzU0MFBfMjVGUFNfMl9MQVlFUlNfSElHSF9NT1RJT04gLSA5NjB4NTQwLCAgMjVmcHMsIDEzMDBrYnBzICBtYWluIGxheWVyLCAyIGxheWVycyB0b3RhbCwgaGlnaGVyIGJpdHJhdGUgZm9yIGhpZ2ggbW90aW9uLCBoYXJkZXIgdG8gZW5jb2RlIGNvbnRlbnQgKi9cbiAgICBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtcIkgyNjRfNTQwUF8yNUZQU18yX0xBWUVSU19ISUdIX01PVElPTlwiXSA9IDddID0gXCJIMjY0XzU0MFBfMjVGUFNfMl9MQVlFUlNfSElHSF9NT1RJT05cIjtcbiAgICAvKiogSDI2NF83MjBQXzMwRlBTXzFfTEFZRVJfSElHSF9NT1RJT04gLSAxMjgweDcyMCwgIDMwZnBzLCAyNTAwa2Jwcywgbm8gc2ltdWxjYXN0LCBoaWdoZXIgYml0cmF0ZSBmb3IgaGlnaCBtb3Rpb24sIGhhcmRlciB0byBlbmNvZGUgY29udGVudCAqL1xuICAgIEluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0W0luZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0W1wiSDI2NF83MjBQXzMwRlBTXzFfTEFZRVJfSElHSF9NT1RJT05cIl0gPSA4XSA9IFwiSDI2NF83MjBQXzMwRlBTXzFfTEFZRVJfSElHSF9NT1RJT05cIjtcbiAgICAvKiogSDI2NF8xMDgwUF8zMEZQU18xX0xBWUVSX0hJR0hfTU9USU9OIC0gMTk4MHgxMDgwLCAzMGZwcywgNDUwMGticHMsIG5vIHNpbXVsY2FzdCwgaGlnaGVyIGJpdHJhdGUgZm9yIGhpZ2ggbW90aW9uLCBoYXJkZXIgdG8gZW5jb2RlIGNvbnRlbnQgKi9cbiAgICBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtcIkgyNjRfMTA4MFBfMzBGUFNfMV9MQVlFUl9ISUdIX01PVElPTlwiXSA9IDldID0gXCJIMjY0XzEwODBQXzMwRlBTXzFfTEFZRVJfSElHSF9NT1RJT05cIjtcbiAgICBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFtcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldCA9IGV4cG9ydHMuSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQgfHwgKGV4cG9ydHMuSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQgPSB7fSkpO1xuZnVuY3Rpb24gaW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRGcm9tSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgXCJIMjY0XzcyMFBfMzBGUFNfM19MQVlFUlNcIjpcbiAgICAgICAgICAgIHJldHVybiBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldC5IMjY0XzcyMFBfMzBGUFNfM19MQVlFUlM7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSBcIkgyNjRfMTA4MFBfMzBGUFNfM19MQVlFUlNcIjpcbiAgICAgICAgICAgIHJldHVybiBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldC5IMjY0XzEwODBQXzMwRlBTXzNfTEFZRVJTO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgXCJIMjY0XzU0MFBfMjVGUFNfMl9MQVlFUlNcIjpcbiAgICAgICAgICAgIHJldHVybiBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldC5IMjY0XzU0MFBfMjVGUFNfMl9MQVlFUlM7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgY2FzZSBcIkgyNjRfNzIwUF8zMEZQU18xX0xBWUVSXCI6XG4gICAgICAgICAgICByZXR1cm4gSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuSDI2NF83MjBQXzMwRlBTXzFfTEFZRVI7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgY2FzZSBcIkgyNjRfMTA4MFBfMzBGUFNfMV9MQVlFUlwiOlxuICAgICAgICAgICAgcmV0dXJuIEluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0LkgyNjRfMTA4MFBfMzBGUFNfMV9MQVlFUjtcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICBjYXNlIFwiSDI2NF83MjBQXzMwRlBTXzNfTEFZRVJTX0hJR0hfTU9USU9OXCI6XG4gICAgICAgICAgICByZXR1cm4gSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuSDI2NF83MjBQXzMwRlBTXzNfTEFZRVJTX0hJR0hfTU9USU9OO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgIGNhc2UgXCJIMjY0XzEwODBQXzMwRlBTXzNfTEFZRVJTX0hJR0hfTU9USU9OXCI6XG4gICAgICAgICAgICByZXR1cm4gSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuSDI2NF8xMDgwUF8zMEZQU18zX0xBWUVSU19ISUdIX01PVElPTjtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICBjYXNlIFwiSDI2NF81NDBQXzI1RlBTXzJfTEFZRVJTX0hJR0hfTU9USU9OXCI6XG4gICAgICAgICAgICByZXR1cm4gSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuSDI2NF81NDBQXzI1RlBTXzJfTEFZRVJTX0hJR0hfTU9USU9OO1xuICAgICAgICBjYXNlIDg6XG4gICAgICAgIGNhc2UgXCJIMjY0XzcyMFBfMzBGUFNfMV9MQVlFUl9ISUdIX01PVElPTlwiOlxuICAgICAgICAgICAgcmV0dXJuIEluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0LkgyNjRfNzIwUF8zMEZQU18xX0xBWUVSX0hJR0hfTU9USU9OO1xuICAgICAgICBjYXNlIDk6XG4gICAgICAgIGNhc2UgXCJIMjY0XzEwODBQXzMwRlBTXzFfTEFZRVJfSElHSF9NT1RJT05cIjpcbiAgICAgICAgICAgIHJldHVybiBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldC5IMjY0XzEwODBQXzMwRlBTXzFfTEFZRVJfSElHSF9NT1RJT047XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldC5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy5pbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldEZyb21KU09OID0gaW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRGcm9tSlNPTjtcbmZ1bmN0aW9uIGluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0VG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuSDI2NF83MjBQXzMwRlBTXzNfTEFZRVJTOlxuICAgICAgICAgICAgcmV0dXJuIFwiSDI2NF83MjBQXzMwRlBTXzNfTEFZRVJTXCI7XG4gICAgICAgIGNhc2UgSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuSDI2NF8xMDgwUF8zMEZQU18zX0xBWUVSUzpcbiAgICAgICAgICAgIHJldHVybiBcIkgyNjRfMTA4MFBfMzBGUFNfM19MQVlFUlNcIjtcbiAgICAgICAgY2FzZSBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldC5IMjY0XzU0MFBfMjVGUFNfMl9MQVlFUlM6XG4gICAgICAgICAgICByZXR1cm4gXCJIMjY0XzU0MFBfMjVGUFNfMl9MQVlFUlNcIjtcbiAgICAgICAgY2FzZSBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldC5IMjY0XzcyMFBfMzBGUFNfMV9MQVlFUjpcbiAgICAgICAgICAgIHJldHVybiBcIkgyNjRfNzIwUF8zMEZQU18xX0xBWUVSXCI7XG4gICAgICAgIGNhc2UgSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuSDI2NF8xMDgwUF8zMEZQU18xX0xBWUVSOlxuICAgICAgICAgICAgcmV0dXJuIFwiSDI2NF8xMDgwUF8zMEZQU18xX0xBWUVSXCI7XG4gICAgICAgIGNhc2UgSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuSDI2NF83MjBQXzMwRlBTXzNfTEFZRVJTX0hJR0hfTU9USU9OOlxuICAgICAgICAgICAgcmV0dXJuIFwiSDI2NF83MjBQXzMwRlBTXzNfTEFZRVJTX0hJR0hfTU9USU9OXCI7XG4gICAgICAgIGNhc2UgSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuSDI2NF8xMDgwUF8zMEZQU18zX0xBWUVSU19ISUdIX01PVElPTjpcbiAgICAgICAgICAgIHJldHVybiBcIkgyNjRfMTA4MFBfMzBGUFNfM19MQVlFUlNfSElHSF9NT1RJT05cIjtcbiAgICAgICAgY2FzZSBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldC5IMjY0XzU0MFBfMjVGUFNfMl9MQVlFUlNfSElHSF9NT1RJT046XG4gICAgICAgICAgICByZXR1cm4gXCJIMjY0XzU0MFBfMjVGUFNfMl9MQVlFUlNfSElHSF9NT1RJT05cIjtcbiAgICAgICAgY2FzZSBJbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldC5IMjY0XzcyMFBfMzBGUFNfMV9MQVlFUl9ISUdIX01PVElPTjpcbiAgICAgICAgICAgIHJldHVybiBcIkgyNjRfNzIwUF8zMEZQU18xX0xBWUVSX0hJR0hfTU9USU9OXCI7XG4gICAgICAgIGNhc2UgSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuSDI2NF8xMDgwUF8zMEZQU18xX0xBWUVSX0hJR0hfTU9USU9OOlxuICAgICAgICAgICAgcmV0dXJuIFwiSDI2NF8xMDgwUF8zMEZQU18xX0xBWUVSX0hJR0hfTU9USU9OXCI7XG4gICAgICAgIGNhc2UgSW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXQuVU5SRUNPR05JWkVEOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5SRUNPR05JWkVEXCI7XG4gICAgfVxufVxuZXhwb3J0cy5pbmdyZXNzVmlkZW9FbmNvZGluZ1ByZXNldFRvSlNPTiA9IGluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0VG9KU09OO1xudmFyIEluZ3Jlc3NTdGF0ZV9TdGF0dXM7XG4oZnVuY3Rpb24gKEluZ3Jlc3NTdGF0ZV9TdGF0dXMpIHtcbiAgICBJbmdyZXNzU3RhdGVfU3RhdHVzW0luZ3Jlc3NTdGF0ZV9TdGF0dXNbXCJFTkRQT0lOVF9JTkFDVElWRVwiXSA9IDBdID0gXCJFTkRQT0lOVF9JTkFDVElWRVwiO1xuICAgIEluZ3Jlc3NTdGF0ZV9TdGF0dXNbSW5ncmVzc1N0YXRlX1N0YXR1c1tcIkVORFBPSU5UX0JVRkZFUklOR1wiXSA9IDFdID0gXCJFTkRQT0lOVF9CVUZGRVJJTkdcIjtcbiAgICBJbmdyZXNzU3RhdGVfU3RhdHVzW0luZ3Jlc3NTdGF0ZV9TdGF0dXNbXCJFTkRQT0lOVF9QVUJMSVNISU5HXCJdID0gMl0gPSBcIkVORFBPSU5UX1BVQkxJU0hJTkdcIjtcbiAgICBJbmdyZXNzU3RhdGVfU3RhdHVzW0luZ3Jlc3NTdGF0ZV9TdGF0dXNbXCJFTkRQT0lOVF9FUlJPUlwiXSA9IDNdID0gXCJFTkRQT0lOVF9FUlJPUlwiO1xuICAgIEluZ3Jlc3NTdGF0ZV9TdGF0dXNbSW5ncmVzc1N0YXRlX1N0YXR1c1tcIkVORFBPSU5UX0NPTVBMRVRFXCJdID0gNF0gPSBcIkVORFBPSU5UX0NPTVBMRVRFXCI7XG4gICAgSW5ncmVzc1N0YXRlX1N0YXR1c1tJbmdyZXNzU3RhdGVfU3RhdHVzW1wiVU5SRUNPR05JWkVEXCJdID0gLTFdID0gXCJVTlJFQ09HTklaRURcIjtcbn0pKEluZ3Jlc3NTdGF0ZV9TdGF0dXMgPSBleHBvcnRzLkluZ3Jlc3NTdGF0ZV9TdGF0dXMgfHwgKGV4cG9ydHMuSW5ncmVzc1N0YXRlX1N0YXR1cyA9IHt9KSk7XG5mdW5jdGlvbiBpbmdyZXNzU3RhdGVfU3RhdHVzRnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiRU5EUE9JTlRfSU5BQ1RJVkVcIjpcbiAgICAgICAgICAgIHJldHVybiBJbmdyZXNzU3RhdGVfU3RhdHVzLkVORFBPSU5UX0lOQUNUSVZFO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJFTkRQT0lOVF9CVUZGRVJJTkdcIjpcbiAgICAgICAgICAgIHJldHVybiBJbmdyZXNzU3RhdGVfU3RhdHVzLkVORFBPSU5UX0JVRkZFUklORztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIFwiRU5EUE9JTlRfUFVCTElTSElOR1wiOlxuICAgICAgICAgICAgcmV0dXJuIEluZ3Jlc3NTdGF0ZV9TdGF0dXMuRU5EUE9JTlRfUFVCTElTSElORztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICBjYXNlIFwiRU5EUE9JTlRfRVJST1JcIjpcbiAgICAgICAgICAgIHJldHVybiBJbmdyZXNzU3RhdGVfU3RhdHVzLkVORFBPSU5UX0VSUk9SO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgIGNhc2UgXCJFTkRQT0lOVF9DT01QTEVURVwiOlxuICAgICAgICAgICAgcmV0dXJuIEluZ3Jlc3NTdGF0ZV9TdGF0dXMuRU5EUE9JTlRfQ09NUExFVEU7XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBJbmdyZXNzU3RhdGVfU3RhdHVzLlVOUkVDT0dOSVpFRDtcbiAgICB9XG59XG5leHBvcnRzLmluZ3Jlc3NTdGF0ZV9TdGF0dXNGcm9tSlNPTiA9IGluZ3Jlc3NTdGF0ZV9TdGF0dXNGcm9tSlNPTjtcbmZ1bmN0aW9uIGluZ3Jlc3NTdGF0ZV9TdGF0dXNUb0pTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSBJbmdyZXNzU3RhdGVfU3RhdHVzLkVORFBPSU5UX0lOQUNUSVZFOlxuICAgICAgICAgICAgcmV0dXJuIFwiRU5EUE9JTlRfSU5BQ1RJVkVcIjtcbiAgICAgICAgY2FzZSBJbmdyZXNzU3RhdGVfU3RhdHVzLkVORFBPSU5UX0JVRkZFUklORzpcbiAgICAgICAgICAgIHJldHVybiBcIkVORFBPSU5UX0JVRkZFUklOR1wiO1xuICAgICAgICBjYXNlIEluZ3Jlc3NTdGF0ZV9TdGF0dXMuRU5EUE9JTlRfUFVCTElTSElORzpcbiAgICAgICAgICAgIHJldHVybiBcIkVORFBPSU5UX1BVQkxJU0hJTkdcIjtcbiAgICAgICAgY2FzZSBJbmdyZXNzU3RhdGVfU3RhdHVzLkVORFBPSU5UX0VSUk9SOlxuICAgICAgICAgICAgcmV0dXJuIFwiRU5EUE9JTlRfRVJST1JcIjtcbiAgICAgICAgY2FzZSBJbmdyZXNzU3RhdGVfU3RhdHVzLkVORFBPSU5UX0NPTVBMRVRFOlxuICAgICAgICAgICAgcmV0dXJuIFwiRU5EUE9JTlRfQ09NUExFVEVcIjtcbiAgICAgICAgY2FzZSBJbmdyZXNzU3RhdGVfU3RhdHVzLlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMuaW5ncmVzc1N0YXRlX1N0YXR1c1RvSlNPTiA9IGluZ3Jlc3NTdGF0ZV9TdGF0dXNUb0pTT047XG5mdW5jdGlvbiBjcmVhdGVCYXNlQ3JlYXRlSW5ncmVzc1JlcXVlc3QoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5wdXRUeXBlOiAwLFxuICAgICAgICB1cmw6IFwiXCIsXG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIHJvb21OYW1lOiBcIlwiLFxuICAgICAgICBwYXJ0aWNpcGFudElkZW50aXR5OiBcIlwiLFxuICAgICAgICBwYXJ0aWNpcGFudE5hbWU6IFwiXCIsXG4gICAgICAgIGJ5cGFzc1RyYW5zY29kaW5nOiBmYWxzZSxcbiAgICAgICAgYXVkaW86IHVuZGVmaW5lZCxcbiAgICAgICAgdmlkZW86IHVuZGVmaW5lZCxcbiAgICB9O1xufVxuZXhwb3J0cy5DcmVhdGVJbmdyZXNzUmVxdWVzdCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmlucHV0VHlwZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaW5wdXRUeXBlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDgpLmludDMyKG1lc3NhZ2UuaW5wdXRUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS51cmwgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnVybCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig3NCkuc3RyaW5nKG1lc3NhZ2UudXJsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5uYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5uYW1lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5yb29tTmFtZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uucm9vbU5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLnJvb21OYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wYXJ0aWNpcGFudElkZW50aXR5ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5wYXJ0aWNpcGFudElkZW50aXR5ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcobWVzc2FnZS5wYXJ0aWNpcGFudElkZW50aXR5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wYXJ0aWNpcGFudE5hbWUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnBhcnRpY2lwYW50TmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0Mikuc3RyaW5nKG1lc3NhZ2UucGFydGljaXBhbnROYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5ieXBhc3NUcmFuc2NvZGluZyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig2NCkuYm9vbChtZXNzYWdlLmJ5cGFzc1RyYW5zY29kaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5hdWRpbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkluZ3Jlc3NBdWRpb09wdGlvbnMuZW5jb2RlKG1lc3NhZ2UuYXVkaW8sIHdyaXRlci51aW50MzIoNTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudmlkZW8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5JbmdyZXNzVmlkZW9PcHRpb25zLmVuY29kZShtZXNzYWdlLnZpZGVvLCB3cml0ZXIudWludDMyKDU4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUNyZWF0ZUluZ3Jlc3NSZXF1ZXN0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbnB1dFR5cGUgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVybCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb29tTmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50SWRlbnRpdHkgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudE5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ieXBhc3NUcmFuc2NvZGluZyA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hdWRpbyA9IGV4cG9ydHMuSW5ncmVzc0F1ZGlvT3B0aW9ucy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudmlkZW8gPSBleHBvcnRzLkluZ3Jlc3NWaWRlb09wdGlvbnMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5wdXRUeXBlOiBpc1NldChvYmplY3QuaW5wdXRUeXBlKSA/IGluZ3Jlc3NJbnB1dEZyb21KU09OKG9iamVjdC5pbnB1dFR5cGUpIDogMCxcbiAgICAgICAgICAgIHVybDogaXNTZXQob2JqZWN0LnVybCkgPyBTdHJpbmcob2JqZWN0LnVybCkgOiBcIlwiLFxuICAgICAgICAgICAgbmFtZTogaXNTZXQob2JqZWN0Lm5hbWUpID8gU3RyaW5nKG9iamVjdC5uYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICByb29tTmFtZTogaXNTZXQob2JqZWN0LnJvb21OYW1lKSA/IFN0cmluZyhvYmplY3Qucm9vbU5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIHBhcnRpY2lwYW50SWRlbnRpdHk6IGlzU2V0KG9iamVjdC5wYXJ0aWNpcGFudElkZW50aXR5KSA/IFN0cmluZyhvYmplY3QucGFydGljaXBhbnRJZGVudGl0eSkgOiBcIlwiLFxuICAgICAgICAgICAgcGFydGljaXBhbnROYW1lOiBpc1NldChvYmplY3QucGFydGljaXBhbnROYW1lKSA/IFN0cmluZyhvYmplY3QucGFydGljaXBhbnROYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBieXBhc3NUcmFuc2NvZGluZzogaXNTZXQob2JqZWN0LmJ5cGFzc1RyYW5zY29kaW5nKSA/IEJvb2xlYW4ob2JqZWN0LmJ5cGFzc1RyYW5zY29kaW5nKSA6IGZhbHNlLFxuICAgICAgICAgICAgYXVkaW86IGlzU2V0KG9iamVjdC5hdWRpbykgPyBleHBvcnRzLkluZ3Jlc3NBdWRpb09wdGlvbnMuZnJvbUpTT04ob2JqZWN0LmF1ZGlvKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHZpZGVvOiBpc1NldChvYmplY3QudmlkZW8pID8gZXhwb3J0cy5JbmdyZXNzVmlkZW9PcHRpb25zLmZyb21KU09OKG9iamVjdC52aWRlbykgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5pbnB1dFR5cGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmlucHV0VHlwZSA9IGluZ3Jlc3NJbnB1dFRvSlNPTihtZXNzYWdlLmlucHV0VHlwZSkpO1xuICAgICAgICBtZXNzYWdlLnVybCAhPT0gdW5kZWZpbmVkICYmIChvYmoudXJsID0gbWVzc2FnZS51cmwpO1xuICAgICAgICBtZXNzYWdlLm5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLm5hbWUgPSBtZXNzYWdlLm5hbWUpO1xuICAgICAgICBtZXNzYWdlLnJvb21OYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5yb29tTmFtZSA9IG1lc3NhZ2Uucm9vbU5hbWUpO1xuICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50SWRlbnRpdHkgIT09IHVuZGVmaW5lZCAmJiAob2JqLnBhcnRpY2lwYW50SWRlbnRpdHkgPSBtZXNzYWdlLnBhcnRpY2lwYW50SWRlbnRpdHkpO1xuICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50TmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmoucGFydGljaXBhbnROYW1lID0gbWVzc2FnZS5wYXJ0aWNpcGFudE5hbWUpO1xuICAgICAgICBtZXNzYWdlLmJ5cGFzc1RyYW5zY29kaW5nICE9PSB1bmRlZmluZWQgJiYgKG9iai5ieXBhc3NUcmFuc2NvZGluZyA9IG1lc3NhZ2UuYnlwYXNzVHJhbnNjb2RpbmcpO1xuICAgICAgICBtZXNzYWdlLmF1ZGlvICE9PSB1bmRlZmluZWQgJiYgKG9iai5hdWRpbyA9IG1lc3NhZ2UuYXVkaW8gPyBleHBvcnRzLkluZ3Jlc3NBdWRpb09wdGlvbnMudG9KU09OKG1lc3NhZ2UuYXVkaW8pIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS52aWRlbyAhPT0gdW5kZWZpbmVkICYmIChvYmoudmlkZW8gPSBtZXNzYWdlLnZpZGVvID8gZXhwb3J0cy5JbmdyZXNzVmlkZW9PcHRpb25zLnRvSlNPTihtZXNzYWdlLnZpZGVvKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUNyZWF0ZUluZ3Jlc3NSZXF1ZXN0KCk7XG4gICAgICAgIG1lc3NhZ2UuaW5wdXRUeXBlID0gKF9hID0gb2JqZWN0LmlucHV0VHlwZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcbiAgICAgICAgbWVzc2FnZS51cmwgPSAoX2IgPSBvYmplY3QudXJsKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLm5hbWUgPSAoX2MgPSBvYmplY3QubmFtZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5yb29tTmFtZSA9IChfZCA9IG9iamVjdC5yb29tTmFtZSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudElkZW50aXR5ID0gKF9lID0gb2JqZWN0LnBhcnRpY2lwYW50SWRlbnRpdHkpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnROYW1lID0gKF9mID0gb2JqZWN0LnBhcnRpY2lwYW50TmFtZSkgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5ieXBhc3NUcmFuc2NvZGluZyA9IChfZyA9IG9iamVjdC5ieXBhc3NUcmFuc2NvZGluZykgIT09IG51bGwgJiYgX2cgIT09IHZvaWQgMCA/IF9nIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2UuYXVkaW8gPSAob2JqZWN0LmF1ZGlvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmF1ZGlvICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkluZ3Jlc3NBdWRpb09wdGlvbnMuZnJvbVBhcnRpYWwob2JqZWN0LmF1ZGlvKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UudmlkZW8gPSAob2JqZWN0LnZpZGVvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZpZGVvICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkluZ3Jlc3NWaWRlb09wdGlvbnMuZnJvbVBhcnRpYWwob2JqZWN0LnZpZGVvKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUluZ3Jlc3NBdWRpb09wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHsgbmFtZTogXCJcIiwgc291cmNlOiAwLCBwcmVzZXQ6IHVuZGVmaW5lZCwgb3B0aW9uczogdW5kZWZpbmVkIH07XG59XG5leHBvcnRzLkluZ3Jlc3NBdWRpb09wdGlvbnMgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5uYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5uYW1lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zb3VyY2UgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnNvdXJjZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNikuaW50MzIobWVzc2FnZS5zb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnByZXNldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI0KS5pbnQzMihtZXNzYWdlLnByZXNldCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uub3B0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkluZ3Jlc3NBdWRpb0VuY29kaW5nT3B0aW9ucy5lbmNvZGUobWVzc2FnZS5vcHRpb25zLCB3cml0ZXIudWludDMyKDM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUluZ3Jlc3NBdWRpb09wdGlvbnMoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zb3VyY2UgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnByZXNldCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uub3B0aW9ucyA9IGV4cG9ydHMuSW5ncmVzc0F1ZGlvRW5jb2RpbmdPcHRpb25zLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IGlzU2V0KG9iamVjdC5uYW1lKSA/IFN0cmluZyhvYmplY3QubmFtZSkgOiBcIlwiLFxuICAgICAgICAgICAgc291cmNlOiBpc1NldChvYmplY3Quc291cmNlKSA/IGxpdmVraXRfbW9kZWxzXzEudHJhY2tTb3VyY2VGcm9tSlNPTihvYmplY3Quc291cmNlKSA6IDAsXG4gICAgICAgICAgICBwcmVzZXQ6IGlzU2V0KG9iamVjdC5wcmVzZXQpID8gaW5ncmVzc0F1ZGlvRW5jb2RpbmdQcmVzZXRGcm9tSlNPTihvYmplY3QucHJlc2V0KSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG9wdGlvbnM6IGlzU2V0KG9iamVjdC5vcHRpb25zKSA/IGV4cG9ydHMuSW5ncmVzc0F1ZGlvRW5jb2RpbmdPcHRpb25zLmZyb21KU09OKG9iamVjdC5vcHRpb25zKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLm5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLm5hbWUgPSBtZXNzYWdlLm5hbWUpO1xuICAgICAgICBtZXNzYWdlLnNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIChvYmouc291cmNlID0gbGl2ZWtpdF9tb2RlbHNfMS50cmFja1NvdXJjZVRvSlNPTihtZXNzYWdlLnNvdXJjZSkpO1xuICAgICAgICBtZXNzYWdlLnByZXNldCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLnByZXNldCA9IG1lc3NhZ2UucHJlc2V0ICE9PSB1bmRlZmluZWQgPyBpbmdyZXNzQXVkaW9FbmNvZGluZ1ByZXNldFRvSlNPTihtZXNzYWdlLnByZXNldCkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLm9wdGlvbnMgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5vcHRpb25zID0gbWVzc2FnZS5vcHRpb25zID8gZXhwb3J0cy5JbmdyZXNzQXVkaW9FbmNvZGluZ09wdGlvbnMudG9KU09OKG1lc3NhZ2Uub3B0aW9ucykgOiB1bmRlZmluZWQpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUluZ3Jlc3NBdWRpb09wdGlvbnMoKTtcbiAgICAgICAgbWVzc2FnZS5uYW1lID0gKF9hID0gb2JqZWN0Lm5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2Uuc291cmNlID0gKF9iID0gb2JqZWN0LnNvdXJjZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMDtcbiAgICAgICAgbWVzc2FnZS5wcmVzZXQgPSAoX2MgPSBvYmplY3QucHJlc2V0KSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2Uub3B0aW9ucyA9IChvYmplY3Qub3B0aW9ucyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5vcHRpb25zICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkluZ3Jlc3NBdWRpb0VuY29kaW5nT3B0aW9ucy5mcm9tUGFydGlhbChvYmplY3Qub3B0aW9ucylcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VJbmdyZXNzVmlkZW9PcHRpb25zKCkge1xuICAgIHJldHVybiB7IG5hbWU6IFwiXCIsIHNvdXJjZTogMCwgcHJlc2V0OiB1bmRlZmluZWQsIG9wdGlvbnM6IHVuZGVmaW5lZCB9O1xufVxuZXhwb3J0cy5JbmdyZXNzVmlkZW9PcHRpb25zID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UubmFtZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UubmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc291cmNlICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5zb3VyY2UgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTYpLmludDMyKG1lc3NhZ2Uuc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wcmVzZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkuaW50MzIobWVzc2FnZS5wcmVzZXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm9wdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5JbmdyZXNzVmlkZW9FbmNvZGluZ09wdGlvbnMuZW5jb2RlKG1lc3NhZ2Uub3B0aW9ucywgd3JpdGVyLnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VJbmdyZXNzVmlkZW9PcHRpb25zKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc291cmNlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wcmVzZXQgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm9wdGlvbnMgPSBleHBvcnRzLkluZ3Jlc3NWaWRlb0VuY29kaW5nT3B0aW9ucy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiBpc1NldChvYmplY3QubmFtZSkgPyBTdHJpbmcob2JqZWN0Lm5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIHNvdXJjZTogaXNTZXQob2JqZWN0LnNvdXJjZSkgPyBsaXZla2l0X21vZGVsc18xLnRyYWNrU291cmNlRnJvbUpTT04ob2JqZWN0LnNvdXJjZSkgOiAwLFxuICAgICAgICAgICAgcHJlc2V0OiBpc1NldChvYmplY3QucHJlc2V0KSA/IGluZ3Jlc3NWaWRlb0VuY29kaW5nUHJlc2V0RnJvbUpTT04ob2JqZWN0LnByZXNldCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBvcHRpb25zOiBpc1NldChvYmplY3Qub3B0aW9ucykgPyBleHBvcnRzLkluZ3Jlc3NWaWRlb0VuY29kaW5nT3B0aW9ucy5mcm9tSlNPTihvYmplY3Qub3B0aW9ucykgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5uYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5uYW1lID0gbWVzc2FnZS5uYW1lKTtcbiAgICAgICAgbWVzc2FnZS5zb3VyY2UgIT09IHVuZGVmaW5lZCAmJiAob2JqLnNvdXJjZSA9IGxpdmVraXRfbW9kZWxzXzEudHJhY2tTb3VyY2VUb0pTT04obWVzc2FnZS5zb3VyY2UpKTtcbiAgICAgICAgbWVzc2FnZS5wcmVzZXQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5wcmVzZXQgPSBtZXNzYWdlLnByZXNldCAhPT0gdW5kZWZpbmVkID8gaW5ncmVzc1ZpZGVvRW5jb2RpbmdQcmVzZXRUb0pTT04obWVzc2FnZS5wcmVzZXQpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5vcHRpb25zICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmoub3B0aW9ucyA9IG1lc3NhZ2Uub3B0aW9ucyA/IGV4cG9ydHMuSW5ncmVzc1ZpZGVvRW5jb2RpbmdPcHRpb25zLnRvSlNPTihtZXNzYWdlLm9wdGlvbnMpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VJbmdyZXNzVmlkZW9PcHRpb25zKCk7XG4gICAgICAgIG1lc3NhZ2UubmFtZSA9IChfYSA9IG9iamVjdC5uYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnNvdXJjZSA9IChfYiA9IG9iamVjdC5zb3VyY2UpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDA7XG4gICAgICAgIG1lc3NhZ2UucHJlc2V0ID0gKF9jID0gb2JqZWN0LnByZXNldCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLm9wdGlvbnMgPSAob2JqZWN0Lm9wdGlvbnMgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Qub3B0aW9ucyAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5JbmdyZXNzVmlkZW9FbmNvZGluZ09wdGlvbnMuZnJvbVBhcnRpYWwob2JqZWN0Lm9wdGlvbnMpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlSW5ncmVzc0F1ZGlvRW5jb2RpbmdPcHRpb25zKCkge1xuICAgIHJldHVybiB7IGF1ZGlvQ29kZWM6IDAsIGJpdHJhdGU6IDAsIGRpc2FibGVEdHg6IGZhbHNlLCBjaGFubmVsczogMCB9O1xufVxuZXhwb3J0cy5JbmdyZXNzQXVkaW9FbmNvZGluZ09wdGlvbnMgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5hdWRpb0NvZGVjICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5hdWRpb0NvZGVjICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDgpLmludDMyKG1lc3NhZ2UuYXVkaW9Db2RlYyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYml0cmF0ZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuYml0cmF0ZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNikudWludDMyKG1lc3NhZ2UuYml0cmF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZGlzYWJsZUR0eCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkuYm9vbChtZXNzYWdlLmRpc2FibGVEdHgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmNoYW5uZWxzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5jaGFubmVscyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigzMikudWludDMyKG1lc3NhZ2UuY2hhbm5lbHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUluZ3Jlc3NBdWRpb0VuY29kaW5nT3B0aW9ucygpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYXVkaW9Db2RlYyA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYml0cmF0ZSA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRpc2FibGVEdHggPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2hhbm5lbHMgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGF1ZGlvQ29kZWM6IGlzU2V0KG9iamVjdC5hdWRpb0NvZGVjKSA/IGxpdmVraXRfbW9kZWxzXzEuYXVkaW9Db2RlY0Zyb21KU09OKG9iamVjdC5hdWRpb0NvZGVjKSA6IDAsXG4gICAgICAgICAgICBiaXRyYXRlOiBpc1NldChvYmplY3QuYml0cmF0ZSkgPyBOdW1iZXIob2JqZWN0LmJpdHJhdGUpIDogMCxcbiAgICAgICAgICAgIGRpc2FibGVEdHg6IGlzU2V0KG9iamVjdC5kaXNhYmxlRHR4KSA/IEJvb2xlYW4ob2JqZWN0LmRpc2FibGVEdHgpIDogZmFsc2UsXG4gICAgICAgICAgICBjaGFubmVsczogaXNTZXQob2JqZWN0LmNoYW5uZWxzKSA/IE51bWJlcihvYmplY3QuY2hhbm5lbHMpIDogMCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmF1ZGlvQ29kZWMgIT09IHVuZGVmaW5lZCAmJiAob2JqLmF1ZGlvQ29kZWMgPSBsaXZla2l0X21vZGVsc18xLmF1ZGlvQ29kZWNUb0pTT04obWVzc2FnZS5hdWRpb0NvZGVjKSk7XG4gICAgICAgIG1lc3NhZ2UuYml0cmF0ZSAhPT0gdW5kZWZpbmVkICYmIChvYmouYml0cmF0ZSA9IE1hdGgucm91bmQobWVzc2FnZS5iaXRyYXRlKSk7XG4gICAgICAgIG1lc3NhZ2UuZGlzYWJsZUR0eCAhPT0gdW5kZWZpbmVkICYmIChvYmouZGlzYWJsZUR0eCA9IG1lc3NhZ2UuZGlzYWJsZUR0eCk7XG4gICAgICAgIG1lc3NhZ2UuY2hhbm5lbHMgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNoYW5uZWxzID0gTWF0aC5yb3VuZChtZXNzYWdlLmNoYW5uZWxzKSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUluZ3Jlc3NBdWRpb0VuY29kaW5nT3B0aW9ucygpO1xuICAgICAgICBtZXNzYWdlLmF1ZGlvQ29kZWMgPSAoX2EgPSBvYmplY3QuYXVkaW9Db2RlYykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcbiAgICAgICAgbWVzc2FnZS5iaXRyYXRlID0gKF9iID0gb2JqZWN0LmJpdHJhdGUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDA7XG4gICAgICAgIG1lc3NhZ2UuZGlzYWJsZUR0eCA9IChfYyA9IG9iamVjdC5kaXNhYmxlRHR4KSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBmYWxzZTtcbiAgICAgICAgbWVzc2FnZS5jaGFubmVscyA9IChfZCA9IG9iamVjdC5jaGFubmVscykgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogMDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlSW5ncmVzc1ZpZGVvRW5jb2RpbmdPcHRpb25zKCkge1xuICAgIHJldHVybiB7IHZpZGVvQ29kZWM6IDAsIGZyYW1lUmF0ZTogMCwgbGF5ZXJzOiBbXSB9O1xufVxuZXhwb3J0cy5JbmdyZXNzVmlkZW9FbmNvZGluZ09wdGlvbnMgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS52aWRlb0NvZGVjICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS52aWRlb0NvZGVjICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDgpLmludDMyKG1lc3NhZ2UudmlkZW9Db2RlYyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZnJhbWVSYXRlICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5mcmFtZVJhdGUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTcpLmRvdWJsZShtZXNzYWdlLmZyYW1lUmF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubGF5ZXJzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5sYXllcnMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5sYXllcnMpIHtcbiAgICAgICAgICAgICAgICBsaXZla2l0X21vZGVsc18xLlZpZGVvTGF5ZXIuZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlSW5ncmVzc1ZpZGVvRW5jb2RpbmdPcHRpb25zKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52aWRlb0NvZGVjID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5mcmFtZVJhdGUgPSByZWFkZXIuZG91YmxlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXllcnMucHVzaChsaXZla2l0X21vZGVsc18xLlZpZGVvTGF5ZXIuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZpZGVvQ29kZWM6IGlzU2V0KG9iamVjdC52aWRlb0NvZGVjKSA/IGxpdmVraXRfbW9kZWxzXzEudmlkZW9Db2RlY0Zyb21KU09OKG9iamVjdC52aWRlb0NvZGVjKSA6IDAsXG4gICAgICAgICAgICBmcmFtZVJhdGU6IGlzU2V0KG9iamVjdC5mcmFtZVJhdGUpID8gTnVtYmVyKG9iamVjdC5mcmFtZVJhdGUpIDogMCxcbiAgICAgICAgICAgIGxheWVyczogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QubGF5ZXJzKSA/IG9iamVjdC5sYXllcnMubWFwKChlKSA9PiBsaXZla2l0X21vZGVsc18xLlZpZGVvTGF5ZXIuZnJvbUpTT04oZSkpIDogW10sXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS52aWRlb0NvZGVjICE9PSB1bmRlZmluZWQgJiYgKG9iai52aWRlb0NvZGVjID0gbGl2ZWtpdF9tb2RlbHNfMS52aWRlb0NvZGVjVG9KU09OKG1lc3NhZ2UudmlkZW9Db2RlYykpO1xuICAgICAgICBtZXNzYWdlLmZyYW1lUmF0ZSAhPT0gdW5kZWZpbmVkICYmIChvYmouZnJhbWVSYXRlID0gbWVzc2FnZS5mcmFtZVJhdGUpO1xuICAgICAgICBpZiAobWVzc2FnZS5sYXllcnMpIHtcbiAgICAgICAgICAgIG9iai5sYXllcnMgPSBtZXNzYWdlLmxheWVycy5tYXAoKGUpID0+IGUgPyBsaXZla2l0X21vZGVsc18xLlZpZGVvTGF5ZXIudG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5sYXllcnMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUluZ3Jlc3NWaWRlb0VuY29kaW5nT3B0aW9ucygpO1xuICAgICAgICBtZXNzYWdlLnZpZGVvQ29kZWMgPSAoX2EgPSBvYmplY3QudmlkZW9Db2RlYykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcbiAgICAgICAgbWVzc2FnZS5mcmFtZVJhdGUgPSAoX2IgPSBvYmplY3QuZnJhbWVSYXRlKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwO1xuICAgICAgICBtZXNzYWdlLmxheWVycyA9ICgoX2MgPSBvYmplY3QubGF5ZXJzKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MubWFwKChlKSA9PiBsaXZla2l0X21vZGVsc18xLlZpZGVvTGF5ZXIuZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlSW5ncmVzc0luZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5ncmVzc0lkOiBcIlwiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICBzdHJlYW1LZXk6IFwiXCIsXG4gICAgICAgIHVybDogXCJcIixcbiAgICAgICAgaW5wdXRUeXBlOiAwLFxuICAgICAgICBieXBhc3NUcmFuc2NvZGluZzogZmFsc2UsXG4gICAgICAgIGF1ZGlvOiB1bmRlZmluZWQsXG4gICAgICAgIHZpZGVvOiB1bmRlZmluZWQsXG4gICAgICAgIHJvb21OYW1lOiBcIlwiLFxuICAgICAgICBwYXJ0aWNpcGFudElkZW50aXR5OiBcIlwiLFxuICAgICAgICBwYXJ0aWNpcGFudE5hbWU6IFwiXCIsXG4gICAgICAgIHJldXNhYmxlOiBmYWxzZSxcbiAgICAgICAgc3RhdGU6IHVuZGVmaW5lZCxcbiAgICB9O1xufVxuZXhwb3J0cy5JbmdyZXNzSW5mbyA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmluZ3Jlc3NJZCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaW5ncmVzc0lkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5pbmdyZXNzSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm5hbWUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLm5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0cmVhbUtleSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uuc3RyZWFtS2V5ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5zdHJlYW1LZXkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnVybCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UudXJsICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcobWVzc2FnZS51cmwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmlucHV0VHlwZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaW5wdXRUeXBlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQwKS5pbnQzMihtZXNzYWdlLmlucHV0VHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYnlwYXNzVHJhbnNjb2RpbmcgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTA0KS5ib29sKG1lc3NhZ2UuYnlwYXNzVHJhbnNjb2RpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmF1ZGlvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuSW5ncmVzc0F1ZGlvT3B0aW9ucy5lbmNvZGUobWVzc2FnZS5hdWRpbywgd3JpdGVyLnVpbnQzMig1MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS52aWRlbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkluZ3Jlc3NWaWRlb09wdGlvbnMuZW5jb2RlKG1lc3NhZ2UudmlkZW8sIHdyaXRlci51aW50MzIoNTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vbU5hbWUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnJvb21OYW1lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDY2KS5zdHJpbmcobWVzc2FnZS5yb29tTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig3NCkuc3RyaW5nKG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucGFydGljaXBhbnROYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5wYXJ0aWNpcGFudE5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoODIpLnN0cmluZyhtZXNzYWdlLnBhcnRpY2lwYW50TmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucmV1c2FibGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoODgpLmJvb2wobWVzc2FnZS5yZXVzYWJsZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5JbmdyZXNzU3RhdGUuZW5jb2RlKG1lc3NhZ2Uuc3RhdGUsIHdyaXRlci51aW50MzIoOTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlSW5ncmVzc0luZm8oKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmluZ3Jlc3NJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdHJlYW1LZXkgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51cmwgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbnB1dFR5cGUgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ieXBhc3NUcmFuc2NvZGluZyA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hdWRpbyA9IGV4cG9ydHMuSW5ncmVzc0F1ZGlvT3B0aW9ucy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudmlkZW8gPSBleHBvcnRzLkluZ3Jlc3NWaWRlb09wdGlvbnMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvb21OYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudE5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmV1c2FibGUgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXRlID0gZXhwb3J0cy5JbmdyZXNzU3RhdGUuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5ncmVzc0lkOiBpc1NldChvYmplY3QuaW5ncmVzc0lkKSA/IFN0cmluZyhvYmplY3QuaW5ncmVzc0lkKSA6IFwiXCIsXG4gICAgICAgICAgICBuYW1lOiBpc1NldChvYmplY3QubmFtZSkgPyBTdHJpbmcob2JqZWN0Lm5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIHN0cmVhbUtleTogaXNTZXQob2JqZWN0LnN0cmVhbUtleSkgPyBTdHJpbmcob2JqZWN0LnN0cmVhbUtleSkgOiBcIlwiLFxuICAgICAgICAgICAgdXJsOiBpc1NldChvYmplY3QudXJsKSA/IFN0cmluZyhvYmplY3QudXJsKSA6IFwiXCIsXG4gICAgICAgICAgICBpbnB1dFR5cGU6IGlzU2V0KG9iamVjdC5pbnB1dFR5cGUpID8gaW5ncmVzc0lucHV0RnJvbUpTT04ob2JqZWN0LmlucHV0VHlwZSkgOiAwLFxuICAgICAgICAgICAgYnlwYXNzVHJhbnNjb2Rpbmc6IGlzU2V0KG9iamVjdC5ieXBhc3NUcmFuc2NvZGluZykgPyBCb29sZWFuKG9iamVjdC5ieXBhc3NUcmFuc2NvZGluZykgOiBmYWxzZSxcbiAgICAgICAgICAgIGF1ZGlvOiBpc1NldChvYmplY3QuYXVkaW8pID8gZXhwb3J0cy5JbmdyZXNzQXVkaW9PcHRpb25zLmZyb21KU09OKG9iamVjdC5hdWRpbykgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB2aWRlbzogaXNTZXQob2JqZWN0LnZpZGVvKSA/IGV4cG9ydHMuSW5ncmVzc1ZpZGVvT3B0aW9ucy5mcm9tSlNPTihvYmplY3QudmlkZW8pIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcm9vbU5hbWU6IGlzU2V0KG9iamVjdC5yb29tTmFtZSkgPyBTdHJpbmcob2JqZWN0LnJvb21OYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBwYXJ0aWNpcGFudElkZW50aXR5OiBpc1NldChvYmplY3QucGFydGljaXBhbnRJZGVudGl0eSkgPyBTdHJpbmcob2JqZWN0LnBhcnRpY2lwYW50SWRlbnRpdHkpIDogXCJcIixcbiAgICAgICAgICAgIHBhcnRpY2lwYW50TmFtZTogaXNTZXQob2JqZWN0LnBhcnRpY2lwYW50TmFtZSkgPyBTdHJpbmcob2JqZWN0LnBhcnRpY2lwYW50TmFtZSkgOiBcIlwiLFxuICAgICAgICAgICAgcmV1c2FibGU6IGlzU2V0KG9iamVjdC5yZXVzYWJsZSkgPyBCb29sZWFuKG9iamVjdC5yZXVzYWJsZSkgOiBmYWxzZSxcbiAgICAgICAgICAgIHN0YXRlOiBpc1NldChvYmplY3Quc3RhdGUpID8gZXhwb3J0cy5JbmdyZXNzU3RhdGUuZnJvbUpTT04ob2JqZWN0LnN0YXRlKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmluZ3Jlc3NJZCAhPT0gdW5kZWZpbmVkICYmIChvYmouaW5ncmVzc0lkID0gbWVzc2FnZS5pbmdyZXNzSWQpO1xuICAgICAgICBtZXNzYWdlLm5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLm5hbWUgPSBtZXNzYWdlLm5hbWUpO1xuICAgICAgICBtZXNzYWdlLnN0cmVhbUtleSAhPT0gdW5kZWZpbmVkICYmIChvYmouc3RyZWFtS2V5ID0gbWVzc2FnZS5zdHJlYW1LZXkpO1xuICAgICAgICBtZXNzYWdlLnVybCAhPT0gdW5kZWZpbmVkICYmIChvYmoudXJsID0gbWVzc2FnZS51cmwpO1xuICAgICAgICBtZXNzYWdlLmlucHV0VHlwZSAhPT0gdW5kZWZpbmVkICYmIChvYmouaW5wdXRUeXBlID0gaW5ncmVzc0lucHV0VG9KU09OKG1lc3NhZ2UuaW5wdXRUeXBlKSk7XG4gICAgICAgIG1lc3NhZ2UuYnlwYXNzVHJhbnNjb2RpbmcgIT09IHVuZGVmaW5lZCAmJiAob2JqLmJ5cGFzc1RyYW5zY29kaW5nID0gbWVzc2FnZS5ieXBhc3NUcmFuc2NvZGluZyk7XG4gICAgICAgIG1lc3NhZ2UuYXVkaW8gIT09IHVuZGVmaW5lZCAmJiAob2JqLmF1ZGlvID0gbWVzc2FnZS5hdWRpbyA/IGV4cG9ydHMuSW5ncmVzc0F1ZGlvT3B0aW9ucy50b0pTT04obWVzc2FnZS5hdWRpbykgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLnZpZGVvICE9PSB1bmRlZmluZWQgJiYgKG9iai52aWRlbyA9IG1lc3NhZ2UudmlkZW8gPyBleHBvcnRzLkluZ3Jlc3NWaWRlb09wdGlvbnMudG9KU09OKG1lc3NhZ2UudmlkZW8pIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5yb29tTmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmoucm9vbU5hbWUgPSBtZXNzYWdlLnJvb21OYW1lKTtcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudElkZW50aXR5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5wYXJ0aWNpcGFudElkZW50aXR5ID0gbWVzc2FnZS5wYXJ0aWNpcGFudElkZW50aXR5KTtcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudE5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnBhcnRpY2lwYW50TmFtZSA9IG1lc3NhZ2UucGFydGljaXBhbnROYW1lKTtcbiAgICAgICAgbWVzc2FnZS5yZXVzYWJsZSAhPT0gdW5kZWZpbmVkICYmIChvYmoucmV1c2FibGUgPSBtZXNzYWdlLnJldXNhYmxlKTtcbiAgICAgICAgbWVzc2FnZS5zdGF0ZSAhPT0gdW5kZWZpbmVkICYmIChvYmouc3RhdGUgPSBtZXNzYWdlLnN0YXRlID8gZXhwb3J0cy5JbmdyZXNzU3RhdGUudG9KU09OKG1lc3NhZ2Uuc3RhdGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaiwgX2s7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlSW5ncmVzc0luZm8oKTtcbiAgICAgICAgbWVzc2FnZS5pbmdyZXNzSWQgPSAoX2EgPSBvYmplY3QuaW5ncmVzc0lkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLm5hbWUgPSAoX2IgPSBvYmplY3QubmFtZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5zdHJlYW1LZXkgPSAoX2MgPSBvYmplY3Quc3RyZWFtS2V5KSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnVybCA9IChfZCA9IG9iamVjdC51cmwpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuaW5wdXRUeXBlID0gKF9lID0gb2JqZWN0LmlucHV0VHlwZSkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogMDtcbiAgICAgICAgbWVzc2FnZS5ieXBhc3NUcmFuc2NvZGluZyA9IChfZiA9IG9iamVjdC5ieXBhc3NUcmFuc2NvZGluZykgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2UuYXVkaW8gPSAob2JqZWN0LmF1ZGlvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmF1ZGlvICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkluZ3Jlc3NBdWRpb09wdGlvbnMuZnJvbVBhcnRpYWwob2JqZWN0LmF1ZGlvKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UudmlkZW8gPSAob2JqZWN0LnZpZGVvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZpZGVvICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkluZ3Jlc3NWaWRlb09wdGlvbnMuZnJvbVBhcnRpYWwob2JqZWN0LnZpZGVvKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2Uucm9vbU5hbWUgPSAoX2cgPSBvYmplY3Qucm9vbU5hbWUpICE9PSBudWxsICYmIF9nICE9PSB2b2lkIDAgPyBfZyA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSA9IChfaCA9IG9iamVjdC5wYXJ0aWNpcGFudElkZW50aXR5KSAhPT0gbnVsbCAmJiBfaCAhPT0gdm9pZCAwID8gX2ggOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50TmFtZSA9IChfaiA9IG9iamVjdC5wYXJ0aWNpcGFudE5hbWUpICE9PSBudWxsICYmIF9qICE9PSB2b2lkIDAgPyBfaiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UucmV1c2FibGUgPSAoX2sgPSBvYmplY3QucmV1c2FibGUpICE9PSBudWxsICYmIF9rICE9PSB2b2lkIDAgPyBfayA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLnN0YXRlID0gKG9iamVjdC5zdGF0ZSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5zdGF0ZSAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5JbmdyZXNzU3RhdGUuZnJvbVBhcnRpYWwob2JqZWN0LnN0YXRlKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUluZ3Jlc3NTdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXM6IDAsXG4gICAgICAgIGVycm9yOiBcIlwiLFxuICAgICAgICB2aWRlbzogdW5kZWZpbmVkLFxuICAgICAgICBhdWRpbzogdW5kZWZpbmVkLFxuICAgICAgICByb29tSWQ6IFwiXCIsXG4gICAgICAgIHN0YXJ0ZWRBdDogMCxcbiAgICAgICAgZW5kZWRBdDogMCxcbiAgICAgICAgcmVzb3VyY2VJZDogXCJcIixcbiAgICAgICAgdHJhY2tzOiBbXSxcbiAgICB9O1xufVxuZXhwb3J0cy5JbmdyZXNzU3RhdGUgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5zdGF0dXMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnN0YXR1cyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4KS5pbnQzMihtZXNzYWdlLnN0YXR1cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZXJyb3IgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmVycm9yICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudmlkZW8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5JbnB1dFZpZGVvU3RhdGUuZW5jb2RlKG1lc3NhZ2UudmlkZW8sIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYXVkaW8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5JbnB1dEF1ZGlvU3RhdGUuZW5jb2RlKG1lc3NhZ2UuYXVkaW8sIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vbUlkICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yb29tSWQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDIpLnN0cmluZyhtZXNzYWdlLnJvb21JZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhcnRlZEF0ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5zdGFydGVkQXQgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNTYpLmludDY0KG1lc3NhZ2Uuc3RhcnRlZEF0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5lbmRlZEF0ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5lbmRlZEF0ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDY0KS5pbnQ2NChtZXNzYWdlLmVuZGVkQXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJlc291cmNlSWQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnJlc291cmNlSWQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNzQpLnN0cmluZyhtZXNzYWdlLnJlc291cmNlSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnRyYWNrcyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UudHJhY2tzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UudHJhY2tzKSB7XG4gICAgICAgICAgICAgICAgbGl2ZWtpdF9tb2RlbHNfMS5UcmFja0luZm8uZW5jb2RlKHYsIHdyaXRlci51aW50MzIoNTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlSW5ncmVzc1N0YXRlKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdGF0dXMgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVycm9yID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudmlkZW8gPSBleHBvcnRzLklucHV0VmlkZW9TdGF0ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYXVkaW8gPSBleHBvcnRzLklucHV0QXVkaW9TdGF0ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbUlkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhcnRlZEF0ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZGVkQXQgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVzb3VyY2VJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRyYWNrcy5wdXNoKGxpdmVraXRfbW9kZWxzXzEuVHJhY2tJbmZvLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IGlzU2V0KG9iamVjdC5zdGF0dXMpID8gaW5ncmVzc1N0YXRlX1N0YXR1c0Zyb21KU09OKG9iamVjdC5zdGF0dXMpIDogMCxcbiAgICAgICAgICAgIGVycm9yOiBpc1NldChvYmplY3QuZXJyb3IpID8gU3RyaW5nKG9iamVjdC5lcnJvcikgOiBcIlwiLFxuICAgICAgICAgICAgdmlkZW86IGlzU2V0KG9iamVjdC52aWRlbykgPyBleHBvcnRzLklucHV0VmlkZW9TdGF0ZS5mcm9tSlNPTihvYmplY3QudmlkZW8pIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgYXVkaW86IGlzU2V0KG9iamVjdC5hdWRpbykgPyBleHBvcnRzLklucHV0QXVkaW9TdGF0ZS5mcm9tSlNPTihvYmplY3QuYXVkaW8pIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcm9vbUlkOiBpc1NldChvYmplY3Qucm9vbUlkKSA/IFN0cmluZyhvYmplY3Qucm9vbUlkKSA6IFwiXCIsXG4gICAgICAgICAgICBzdGFydGVkQXQ6IGlzU2V0KG9iamVjdC5zdGFydGVkQXQpID8gTnVtYmVyKG9iamVjdC5zdGFydGVkQXQpIDogMCxcbiAgICAgICAgICAgIGVuZGVkQXQ6IGlzU2V0KG9iamVjdC5lbmRlZEF0KSA/IE51bWJlcihvYmplY3QuZW5kZWRBdCkgOiAwLFxuICAgICAgICAgICAgcmVzb3VyY2VJZDogaXNTZXQob2JqZWN0LnJlc291cmNlSWQpID8gU3RyaW5nKG9iamVjdC5yZXNvdXJjZUlkKSA6IFwiXCIsXG4gICAgICAgICAgICB0cmFja3M6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LnRyYWNrcykgPyBvYmplY3QudHJhY2tzLm1hcCgoZSkgPT4gbGl2ZWtpdF9tb2RlbHNfMS5UcmFja0luZm8uZnJvbUpTT04oZSkpIDogW10sXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5zdGF0dXMgIT09IHVuZGVmaW5lZCAmJiAob2JqLnN0YXR1cyA9IGluZ3Jlc3NTdGF0ZV9TdGF0dXNUb0pTT04obWVzc2FnZS5zdGF0dXMpKTtcbiAgICAgICAgbWVzc2FnZS5lcnJvciAhPT0gdW5kZWZpbmVkICYmIChvYmouZXJyb3IgPSBtZXNzYWdlLmVycm9yKTtcbiAgICAgICAgbWVzc2FnZS52aWRlbyAhPT0gdW5kZWZpbmVkICYmIChvYmoudmlkZW8gPSBtZXNzYWdlLnZpZGVvID8gZXhwb3J0cy5JbnB1dFZpZGVvU3RhdGUudG9KU09OKG1lc3NhZ2UudmlkZW8pIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5hdWRpbyAhPT0gdW5kZWZpbmVkICYmIChvYmouYXVkaW8gPSBtZXNzYWdlLmF1ZGlvID8gZXhwb3J0cy5JbnB1dEF1ZGlvU3RhdGUudG9KU09OKG1lc3NhZ2UuYXVkaW8pIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5yb29tSWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnJvb21JZCA9IG1lc3NhZ2Uucm9vbUlkKTtcbiAgICAgICAgbWVzc2FnZS5zdGFydGVkQXQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnN0YXJ0ZWRBdCA9IE1hdGgucm91bmQobWVzc2FnZS5zdGFydGVkQXQpKTtcbiAgICAgICAgbWVzc2FnZS5lbmRlZEF0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5lbmRlZEF0ID0gTWF0aC5yb3VuZChtZXNzYWdlLmVuZGVkQXQpKTtcbiAgICAgICAgbWVzc2FnZS5yZXNvdXJjZUlkICE9PSB1bmRlZmluZWQgJiYgKG9iai5yZXNvdXJjZUlkID0gbWVzc2FnZS5yZXNvdXJjZUlkKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UudHJhY2tzKSB7XG4gICAgICAgICAgICBvYmoudHJhY2tzID0gbWVzc2FnZS50cmFja3MubWFwKChlKSA9PiBlID8gbGl2ZWtpdF9tb2RlbHNfMS5UcmFja0luZm8udG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai50cmFja3MgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZztcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VJbmdyZXNzU3RhdGUoKTtcbiAgICAgICAgbWVzc2FnZS5zdGF0dXMgPSAoX2EgPSBvYmplY3Quc3RhdHVzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xuICAgICAgICBtZXNzYWdlLmVycm9yID0gKF9iID0gb2JqZWN0LmVycm9yKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnZpZGVvID0gKG9iamVjdC52aWRlbyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC52aWRlbyAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5JbnB1dFZpZGVvU3RhdGUuZnJvbVBhcnRpYWwob2JqZWN0LnZpZGVvKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UuYXVkaW8gPSAob2JqZWN0LmF1ZGlvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmF1ZGlvICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLklucHV0QXVkaW9TdGF0ZS5mcm9tUGFydGlhbChvYmplY3QuYXVkaW8pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5yb29tSWQgPSAoX2MgPSBvYmplY3Qucm9vbUlkKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnN0YXJ0ZWRBdCA9IChfZCA9IG9iamVjdC5zdGFydGVkQXQpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IDA7XG4gICAgICAgIG1lc3NhZ2UuZW5kZWRBdCA9IChfZSA9IG9iamVjdC5lbmRlZEF0KSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiAwO1xuICAgICAgICBtZXNzYWdlLnJlc291cmNlSWQgPSAoX2YgPSBvYmplY3QucmVzb3VyY2VJZCkgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS50cmFja3MgPSAoKF9nID0gb2JqZWN0LnRyYWNrcykgPT09IG51bGwgfHwgX2cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nLm1hcCgoZSkgPT4gbGl2ZWtpdF9tb2RlbHNfMS5UcmFja0luZm8uZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlSW5wdXRWaWRlb1N0YXRlKCkge1xuICAgIHJldHVybiB7IG1pbWVUeXBlOiBcIlwiLCBhdmVyYWdlQml0cmF0ZTogMCwgd2lkdGg6IDAsIGhlaWdodDogMCwgZnJhbWVyYXRlOiAwIH07XG59XG5leHBvcnRzLklucHV0VmlkZW9TdGF0ZSA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLm1pbWVUeXBlICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5taW1lVHlwZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UubWltZVR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmF2ZXJhZ2VCaXRyYXRlICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5hdmVyYWdlQml0cmF0ZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNikudWludDMyKG1lc3NhZ2UuYXZlcmFnZUJpdHJhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLndpZHRoICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS53aWR0aCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkudWludDMyKG1lc3NhZ2Uud2lkdGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaGVpZ2h0ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDMyKS51aW50MzIobWVzc2FnZS5oZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZyYW1lcmF0ZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZnJhbWVyYXRlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQxKS5kb3VibGUobWVzc2FnZS5mcmFtZXJhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUlucHV0VmlkZW9TdGF0ZSgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWltZVR5cGUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hdmVyYWdlQml0cmF0ZSA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLndpZHRoID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaGVpZ2h0ID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZnJhbWVyYXRlID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtaW1lVHlwZTogaXNTZXQob2JqZWN0Lm1pbWVUeXBlKSA/IFN0cmluZyhvYmplY3QubWltZVR5cGUpIDogXCJcIixcbiAgICAgICAgICAgIGF2ZXJhZ2VCaXRyYXRlOiBpc1NldChvYmplY3QuYXZlcmFnZUJpdHJhdGUpID8gTnVtYmVyKG9iamVjdC5hdmVyYWdlQml0cmF0ZSkgOiAwLFxuICAgICAgICAgICAgd2lkdGg6IGlzU2V0KG9iamVjdC53aWR0aCkgPyBOdW1iZXIob2JqZWN0LndpZHRoKSA6IDAsXG4gICAgICAgICAgICBoZWlnaHQ6IGlzU2V0KG9iamVjdC5oZWlnaHQpID8gTnVtYmVyKG9iamVjdC5oZWlnaHQpIDogMCxcbiAgICAgICAgICAgIGZyYW1lcmF0ZTogaXNTZXQob2JqZWN0LmZyYW1lcmF0ZSkgPyBOdW1iZXIob2JqZWN0LmZyYW1lcmF0ZSkgOiAwLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UubWltZVR5cGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLm1pbWVUeXBlID0gbWVzc2FnZS5taW1lVHlwZSk7XG4gICAgICAgIG1lc3NhZ2UuYXZlcmFnZUJpdHJhdGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmF2ZXJhZ2VCaXRyYXRlID0gTWF0aC5yb3VuZChtZXNzYWdlLmF2ZXJhZ2VCaXRyYXRlKSk7XG4gICAgICAgIG1lc3NhZ2Uud2lkdGggIT09IHVuZGVmaW5lZCAmJiAob2JqLndpZHRoID0gTWF0aC5yb3VuZChtZXNzYWdlLndpZHRoKSk7XG4gICAgICAgIG1lc3NhZ2UuaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5oZWlnaHQgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuaGVpZ2h0KSk7XG4gICAgICAgIG1lc3NhZ2UuZnJhbWVyYXRlICE9PSB1bmRlZmluZWQgJiYgKG9iai5mcmFtZXJhdGUgPSBtZXNzYWdlLmZyYW1lcmF0ZSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VJbnB1dFZpZGVvU3RhdGUoKTtcbiAgICAgICAgbWVzc2FnZS5taW1lVHlwZSA9IChfYSA9IG9iamVjdC5taW1lVHlwZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5hdmVyYWdlQml0cmF0ZSA9IChfYiA9IG9iamVjdC5hdmVyYWdlQml0cmF0ZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMDtcbiAgICAgICAgbWVzc2FnZS53aWR0aCA9IChfYyA9IG9iamVjdC53aWR0aCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMDtcbiAgICAgICAgbWVzc2FnZS5oZWlnaHQgPSAoX2QgPSBvYmplY3QuaGVpZ2h0KSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAwO1xuICAgICAgICBtZXNzYWdlLmZyYW1lcmF0ZSA9IChfZSA9IG9iamVjdC5mcmFtZXJhdGUpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IDA7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUlucHV0QXVkaW9TdGF0ZSgpIHtcbiAgICByZXR1cm4geyBtaW1lVHlwZTogXCJcIiwgYXZlcmFnZUJpdHJhdGU6IDAsIGNoYW5uZWxzOiAwLCBzYW1wbGVSYXRlOiAwIH07XG59XG5leHBvcnRzLklucHV0QXVkaW9TdGF0ZSA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLm1pbWVUeXBlICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5taW1lVHlwZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UubWltZVR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmF2ZXJhZ2VCaXRyYXRlICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5hdmVyYWdlQml0cmF0ZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNikudWludDMyKG1lc3NhZ2UuYXZlcmFnZUJpdHJhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmNoYW5uZWxzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5jaGFubmVscyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkudWludDMyKG1lc3NhZ2UuY2hhbm5lbHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnNhbXBsZVJhdGUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnNhbXBsZVJhdGUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzIpLnVpbnQzMihtZXNzYWdlLnNhbXBsZVJhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUlucHV0QXVkaW9TdGF0ZSgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWltZVR5cGUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hdmVyYWdlQml0cmF0ZSA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNoYW5uZWxzID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2FtcGxlUmF0ZSA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWltZVR5cGU6IGlzU2V0KG9iamVjdC5taW1lVHlwZSkgPyBTdHJpbmcob2JqZWN0Lm1pbWVUeXBlKSA6IFwiXCIsXG4gICAgICAgICAgICBhdmVyYWdlQml0cmF0ZTogaXNTZXQob2JqZWN0LmF2ZXJhZ2VCaXRyYXRlKSA/IE51bWJlcihvYmplY3QuYXZlcmFnZUJpdHJhdGUpIDogMCxcbiAgICAgICAgICAgIGNoYW5uZWxzOiBpc1NldChvYmplY3QuY2hhbm5lbHMpID8gTnVtYmVyKG9iamVjdC5jaGFubmVscykgOiAwLFxuICAgICAgICAgICAgc2FtcGxlUmF0ZTogaXNTZXQob2JqZWN0LnNhbXBsZVJhdGUpID8gTnVtYmVyKG9iamVjdC5zYW1wbGVSYXRlKSA6IDAsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5taW1lVHlwZSAhPT0gdW5kZWZpbmVkICYmIChvYmoubWltZVR5cGUgPSBtZXNzYWdlLm1pbWVUeXBlKTtcbiAgICAgICAgbWVzc2FnZS5hdmVyYWdlQml0cmF0ZSAhPT0gdW5kZWZpbmVkICYmIChvYmouYXZlcmFnZUJpdHJhdGUgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuYXZlcmFnZUJpdHJhdGUpKTtcbiAgICAgICAgbWVzc2FnZS5jaGFubmVscyAhPT0gdW5kZWZpbmVkICYmIChvYmouY2hhbm5lbHMgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuY2hhbm5lbHMpKTtcbiAgICAgICAgbWVzc2FnZS5zYW1wbGVSYXRlICE9PSB1bmRlZmluZWQgJiYgKG9iai5zYW1wbGVSYXRlID0gTWF0aC5yb3VuZChtZXNzYWdlLnNhbXBsZVJhdGUpKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlSW5wdXRBdWRpb1N0YXRlKCk7XG4gICAgICAgIG1lc3NhZ2UubWltZVR5cGUgPSAoX2EgPSBvYmplY3QubWltZVR5cGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuYXZlcmFnZUJpdHJhdGUgPSAoX2IgPSBvYmplY3QuYXZlcmFnZUJpdHJhdGUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDA7XG4gICAgICAgIG1lc3NhZ2UuY2hhbm5lbHMgPSAoX2MgPSBvYmplY3QuY2hhbm5lbHMpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IDA7XG4gICAgICAgIG1lc3NhZ2Uuc2FtcGxlUmF0ZSA9IChfZCA9IG9iamVjdC5zYW1wbGVSYXRlKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAwO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VVcGRhdGVJbmdyZXNzUmVxdWVzdCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbmdyZXNzSWQ6IFwiXCIsXG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIHJvb21OYW1lOiBcIlwiLFxuICAgICAgICBwYXJ0aWNpcGFudElkZW50aXR5OiBcIlwiLFxuICAgICAgICBwYXJ0aWNpcGFudE5hbWU6IFwiXCIsXG4gICAgICAgIGJ5cGFzc1RyYW5zY29kaW5nOiB1bmRlZmluZWQsXG4gICAgICAgIGF1ZGlvOiB1bmRlZmluZWQsXG4gICAgICAgIHZpZGVvOiB1bmRlZmluZWQsXG4gICAgfTtcbn1cbmV4cG9ydHMuVXBkYXRlSW5ncmVzc1JlcXVlc3QgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5pbmdyZXNzSWQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmluZ3Jlc3NJZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UuaW5ncmVzc0lkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5uYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5uYW1lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5yb29tTmFtZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uucm9vbU5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLnJvb21OYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wYXJ0aWNpcGFudElkZW50aXR5ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5wYXJ0aWNpcGFudElkZW50aXR5ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDM0KS5zdHJpbmcobWVzc2FnZS5wYXJ0aWNpcGFudElkZW50aXR5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wYXJ0aWNpcGFudE5hbWUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnBhcnRpY2lwYW50TmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0Mikuc3RyaW5nKG1lc3NhZ2UucGFydGljaXBhbnROYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5ieXBhc3NUcmFuc2NvZGluZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDY0KS5ib29sKG1lc3NhZ2UuYnlwYXNzVHJhbnNjb2RpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmF1ZGlvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuSW5ncmVzc0F1ZGlvT3B0aW9ucy5lbmNvZGUobWVzc2FnZS5hdWRpbywgd3JpdGVyLnVpbnQzMig1MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS52aWRlbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLkluZ3Jlc3NWaWRlb09wdGlvbnMuZW5jb2RlKG1lc3NhZ2UudmlkZW8sIHdyaXRlci51aW50MzIoNTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVXBkYXRlSW5ncmVzc1JlcXVlc3QoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmluZ3Jlc3NJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb29tTmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50SWRlbnRpdHkgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudE5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ieXBhc3NUcmFuc2NvZGluZyA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hdWRpbyA9IGV4cG9ydHMuSW5ncmVzc0F1ZGlvT3B0aW9ucy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudmlkZW8gPSBleHBvcnRzLkluZ3Jlc3NWaWRlb09wdGlvbnMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5ncmVzc0lkOiBpc1NldChvYmplY3QuaW5ncmVzc0lkKSA/IFN0cmluZyhvYmplY3QuaW5ncmVzc0lkKSA6IFwiXCIsXG4gICAgICAgICAgICBuYW1lOiBpc1NldChvYmplY3QubmFtZSkgPyBTdHJpbmcob2JqZWN0Lm5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIHJvb21OYW1lOiBpc1NldChvYmplY3Qucm9vbU5hbWUpID8gU3RyaW5nKG9iamVjdC5yb29tTmFtZSkgOiBcIlwiLFxuICAgICAgICAgICAgcGFydGljaXBhbnRJZGVudGl0eTogaXNTZXQob2JqZWN0LnBhcnRpY2lwYW50SWRlbnRpdHkpID8gU3RyaW5nKG9iamVjdC5wYXJ0aWNpcGFudElkZW50aXR5KSA6IFwiXCIsXG4gICAgICAgICAgICBwYXJ0aWNpcGFudE5hbWU6IGlzU2V0KG9iamVjdC5wYXJ0aWNpcGFudE5hbWUpID8gU3RyaW5nKG9iamVjdC5wYXJ0aWNpcGFudE5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIGJ5cGFzc1RyYW5zY29kaW5nOiBpc1NldChvYmplY3QuYnlwYXNzVHJhbnNjb2RpbmcpID8gQm9vbGVhbihvYmplY3QuYnlwYXNzVHJhbnNjb2RpbmcpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgYXVkaW86IGlzU2V0KG9iamVjdC5hdWRpbykgPyBleHBvcnRzLkluZ3Jlc3NBdWRpb09wdGlvbnMuZnJvbUpTT04ob2JqZWN0LmF1ZGlvKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHZpZGVvOiBpc1NldChvYmplY3QudmlkZW8pID8gZXhwb3J0cy5JbmdyZXNzVmlkZW9PcHRpb25zLmZyb21KU09OKG9iamVjdC52aWRlbykgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5pbmdyZXNzSWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmluZ3Jlc3NJZCA9IG1lc3NhZ2UuaW5ncmVzc0lkKTtcbiAgICAgICAgbWVzc2FnZS5uYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5uYW1lID0gbWVzc2FnZS5uYW1lKTtcbiAgICAgICAgbWVzc2FnZS5yb29tTmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmoucm9vbU5hbWUgPSBtZXNzYWdlLnJvb21OYW1lKTtcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudElkZW50aXR5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5wYXJ0aWNpcGFudElkZW50aXR5ID0gbWVzc2FnZS5wYXJ0aWNpcGFudElkZW50aXR5KTtcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudE5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnBhcnRpY2lwYW50TmFtZSA9IG1lc3NhZ2UucGFydGljaXBhbnROYW1lKTtcbiAgICAgICAgbWVzc2FnZS5ieXBhc3NUcmFuc2NvZGluZyAhPT0gdW5kZWZpbmVkICYmIChvYmouYnlwYXNzVHJhbnNjb2RpbmcgPSBtZXNzYWdlLmJ5cGFzc1RyYW5zY29kaW5nKTtcbiAgICAgICAgbWVzc2FnZS5hdWRpbyAhPT0gdW5kZWZpbmVkICYmIChvYmouYXVkaW8gPSBtZXNzYWdlLmF1ZGlvID8gZXhwb3J0cy5JbmdyZXNzQXVkaW9PcHRpb25zLnRvSlNPTihtZXNzYWdlLmF1ZGlvKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UudmlkZW8gIT09IHVuZGVmaW5lZCAmJiAob2JqLnZpZGVvID0gbWVzc2FnZS52aWRlbyA/IGV4cG9ydHMuSW5ncmVzc1ZpZGVvT3B0aW9ucy50b0pTT04obWVzc2FnZS52aWRlbykgOiB1bmRlZmluZWQpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVVwZGF0ZUluZ3Jlc3NSZXF1ZXN0KCk7XG4gICAgICAgIG1lc3NhZ2UuaW5ncmVzc0lkID0gKF9hID0gb2JqZWN0LmluZ3Jlc3NJZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5uYW1lID0gKF9iID0gb2JqZWN0Lm5hbWUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2Uucm9vbU5hbWUgPSAoX2MgPSBvYmplY3Qucm9vbU5hbWUpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSA9IChfZCA9IG9iamVjdC5wYXJ0aWNpcGFudElkZW50aXR5KSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50TmFtZSA9IChfZSA9IG9iamVjdC5wYXJ0aWNpcGFudE5hbWUpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuYnlwYXNzVHJhbnNjb2RpbmcgPSAoX2YgPSBvYmplY3QuYnlwYXNzVHJhbnNjb2RpbmcpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5hdWRpbyA9IChvYmplY3QuYXVkaW8gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QuYXVkaW8gIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuSW5ncmVzc0F1ZGlvT3B0aW9ucy5mcm9tUGFydGlhbChvYmplY3QuYXVkaW8pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS52aWRlbyA9IChvYmplY3QudmlkZW8gIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudmlkZW8gIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuSW5ncmVzc1ZpZGVvT3B0aW9ucy5mcm9tUGFydGlhbChvYmplY3QudmlkZW8pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlTGlzdEluZ3Jlc3NSZXF1ZXN0KCkge1xuICAgIHJldHVybiB7IHJvb21OYW1lOiBcIlwiLCBpbmdyZXNzSWQ6IFwiXCIgfTtcbn1cbmV4cG9ydHMuTGlzdEluZ3Jlc3NSZXF1ZXN0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vbU5hbWUgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnJvb21OYW1lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5yb29tTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaW5ncmVzc0lkICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5pbmdyZXNzSWQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLmluZ3Jlc3NJZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTGlzdEluZ3Jlc3NSZXF1ZXN0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb29tTmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmluZ3Jlc3NJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcm9vbU5hbWU6IGlzU2V0KG9iamVjdC5yb29tTmFtZSkgPyBTdHJpbmcob2JqZWN0LnJvb21OYW1lKSA6IFwiXCIsXG4gICAgICAgICAgICBpbmdyZXNzSWQ6IGlzU2V0KG9iamVjdC5pbmdyZXNzSWQpID8gU3RyaW5nKG9iamVjdC5pbmdyZXNzSWQpIDogXCJcIixcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnJvb21OYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5yb29tTmFtZSA9IG1lc3NhZ2Uucm9vbU5hbWUpO1xuICAgICAgICBtZXNzYWdlLmluZ3Jlc3NJZCAhPT0gdW5kZWZpbmVkICYmIChvYmouaW5ncmVzc0lkID0gbWVzc2FnZS5pbmdyZXNzSWQpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTGlzdEluZ3Jlc3NSZXF1ZXN0KCk7XG4gICAgICAgIG1lc3NhZ2Uucm9vbU5hbWUgPSAoX2EgPSBvYmplY3Qucm9vbU5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuaW5ncmVzc0lkID0gKF9iID0gb2JqZWN0LmluZ3Jlc3NJZCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlTGlzdEluZ3Jlc3NSZXNwb25zZSgpIHtcbiAgICByZXR1cm4geyBpdGVtczogW10gfTtcbn1cbmV4cG9ydHMuTGlzdEluZ3Jlc3NSZXNwb25zZSA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLml0ZW1zICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5pdGVtcy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLml0ZW1zKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5JbmdyZXNzSW5mby5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VMaXN0SW5ncmVzc1Jlc3BvbnNlKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pdGVtcy5wdXNoKGV4cG9ydHMuSW5ncmVzc0luZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHsgaXRlbXM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0Lml0ZW1zKSA/IG9iamVjdC5pdGVtcy5tYXAoKGUpID0+IGV4cG9ydHMuSW5ncmVzc0luZm8uZnJvbUpTT04oZSkpIDogW10gfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBpZiAobWVzc2FnZS5pdGVtcykge1xuICAgICAgICAgICAgb2JqLml0ZW1zID0gbWVzc2FnZS5pdGVtcy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLkluZ3Jlc3NJbmZvLnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouaXRlbXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VMaXN0SW5ncmVzc1Jlc3BvbnNlKCk7XG4gICAgICAgIG1lc3NhZ2UuaXRlbXMgPSAoKF9hID0gb2JqZWN0Lml0ZW1zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWFwKChlKSA9PiBleHBvcnRzLkluZ3Jlc3NJbmZvLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZURlbGV0ZUluZ3Jlc3NSZXF1ZXN0KCkge1xuICAgIHJldHVybiB7IGluZ3Jlc3NJZDogXCJcIiB9O1xufVxuZXhwb3J0cy5EZWxldGVJbmdyZXNzUmVxdWVzdCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmluZ3Jlc3NJZCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaW5ncmVzc0lkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5pbmdyZXNzSWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZURlbGV0ZUluZ3Jlc3NSZXF1ZXN0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbmdyZXNzSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHsgaW5ncmVzc0lkOiBpc1NldChvYmplY3QuaW5ncmVzc0lkKSA/IFN0cmluZyhvYmplY3QuaW5ncmVzc0lkKSA6IFwiXCIgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmluZ3Jlc3NJZCAhPT0gdW5kZWZpbmVkICYmIChvYmouaW5ncmVzc0lkID0gbWVzc2FnZS5pbmdyZXNzSWQpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VEZWxldGVJbmdyZXNzUmVxdWVzdCgpO1xuICAgICAgICBtZXNzYWdlLmluZ3Jlc3NJZCA9IChfYSA9IG9iamVjdC5pbmdyZXNzSWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xudmFyIGdsb2JhbFRoaXMgPSAoKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gZ2xvYmFsVGhpcztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gZ2xvYmFsO1xuICAgIH1cbiAgICB0aHJvdyBcIlVuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdFwiO1xufSkoKTtcbmZ1bmN0aW9uIGxvbmdUb051bWJlcihsb25nKSB7XG4gICAgaWYgKGxvbmcuZ3QoTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpKSB7XG4gICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFwiVmFsdWUgaXMgbGFyZ2VyIHRoYW4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJcIik7XG4gICAgfVxuICAgIHJldHVybiBsb25nLnRvTnVtYmVyKCk7XG59XG5pZiAobWluaW1hbF8xLmRlZmF1bHQudXRpbC5Mb25nICE9PSBsb25nXzEuZGVmYXVsdCkge1xuICAgIG1pbmltYWxfMS5kZWZhdWx0LnV0aWwuTG9uZyA9IGxvbmdfMS5kZWZhdWx0O1xuICAgIG1pbmltYWxfMS5kZWZhdWx0LmNvbmZpZ3VyZSgpO1xufVxuZnVuY3Rpb24gaXNTZXQodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpdmVraXRfaW5ncmVzcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_ingress.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_models.js":
/*!**********************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/proto/livekit_models.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Room = exports.clientInfo_SDKToJSON = exports.clientInfo_SDKFromJSON = exports.ClientInfo_SDK = exports.serverInfo_EditionToJSON = exports.serverInfo_EditionFromJSON = exports.ServerInfo_Edition = exports.dataPacket_KindToJSON = exports.dataPacket_KindFromJSON = exports.DataPacket_Kind = exports.encryption_TypeToJSON = exports.encryption_TypeFromJSON = exports.Encryption_Type = exports.participantInfo_StateToJSON = exports.participantInfo_StateFromJSON = exports.ParticipantInfo_State = exports.subscriptionErrorToJSON = exports.subscriptionErrorFromJSON = exports.SubscriptionError = exports.reconnectReasonToJSON = exports.reconnectReasonFromJSON = exports.ReconnectReason = exports.disconnectReasonToJSON = exports.disconnectReasonFromJSON = exports.DisconnectReason = exports.clientConfigSettingToJSON = exports.clientConfigSettingFromJSON = exports.ClientConfigSetting = exports.connectionQualityToJSON = exports.connectionQualityFromJSON = exports.ConnectionQuality = exports.videoQualityToJSON = exports.videoQualityFromJSON = exports.VideoQuality = exports.trackSourceToJSON = exports.trackSourceFromJSON = exports.TrackSource = exports.trackTypeToJSON = exports.trackTypeFromJSON = exports.TrackType = exports.imageCodecToJSON = exports.imageCodecFromJSON = exports.ImageCodec = exports.videoCodecToJSON = exports.videoCodecFromJSON = exports.VideoCodec = exports.audioCodecToJSON = exports.audioCodecFromJSON = exports.AudioCodec = exports.protobufPackage = void 0;\nexports.TimedVersion = exports.RTPStats_GapHistogramEntry = exports.RTPStats = exports.RTPDrift = exports.DisabledCodecs = exports.VideoConfiguration = exports.ClientConfiguration = exports.ClientInfo = exports.ServerInfo = exports.ParticipantTracks = exports.UserPacket = exports.SpeakerInfo = exports.ActiveSpeakerUpdate = exports.DataPacket = exports.VideoLayer = exports.TrackInfo = exports.SimulcastCodecInfo = exports.Encryption = exports.ParticipantInfo = exports.ParticipantPermission = exports.PlayoutDelay = exports.Codec = void 0;\n/* eslint-disable */\nconst long_1 = __importDefault(__webpack_require__(/*! long */ \"(action-browser)/./node_modules/long/umd/index.js\"));\nconst minimal_1 = __importDefault(__webpack_require__(/*! protobufjs/minimal */ \"(action-browser)/./node_modules/protobufjs/minimal.js\"));\nconst timestamp_1 = __webpack_require__(/*! ./google/protobuf/timestamp */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/proto/google/protobuf/timestamp.js\");\nexports.protobufPackage = \"livekit\";\nvar AudioCodec;\n(function (AudioCodec) {\n    AudioCodec[AudioCodec[\"DEFAULT_AC\"] = 0] = \"DEFAULT_AC\";\n    AudioCodec[AudioCodec[\"OPUS\"] = 1] = \"OPUS\";\n    AudioCodec[AudioCodec[\"AAC\"] = 2] = \"AAC\";\n    AudioCodec[AudioCodec[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(AudioCodec = exports.AudioCodec || (exports.AudioCodec = {}));\nfunction audioCodecFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"DEFAULT_AC\":\n            return AudioCodec.DEFAULT_AC;\n        case 1:\n        case \"OPUS\":\n            return AudioCodec.OPUS;\n        case 2:\n        case \"AAC\":\n            return AudioCodec.AAC;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return AudioCodec.UNRECOGNIZED;\n    }\n}\nexports.audioCodecFromJSON = audioCodecFromJSON;\nfunction audioCodecToJSON(object) {\n    switch (object) {\n        case AudioCodec.DEFAULT_AC:\n            return \"DEFAULT_AC\";\n        case AudioCodec.OPUS:\n            return \"OPUS\";\n        case AudioCodec.AAC:\n            return \"AAC\";\n        case AudioCodec.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.audioCodecToJSON = audioCodecToJSON;\nvar VideoCodec;\n(function (VideoCodec) {\n    VideoCodec[VideoCodec[\"DEFAULT_VC\"] = 0] = \"DEFAULT_VC\";\n    VideoCodec[VideoCodec[\"H264_BASELINE\"] = 1] = \"H264_BASELINE\";\n    VideoCodec[VideoCodec[\"H264_MAIN\"] = 2] = \"H264_MAIN\";\n    VideoCodec[VideoCodec[\"H264_HIGH\"] = 3] = \"H264_HIGH\";\n    VideoCodec[VideoCodec[\"VP8\"] = 4] = \"VP8\";\n    VideoCodec[VideoCodec[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(VideoCodec = exports.VideoCodec || (exports.VideoCodec = {}));\nfunction videoCodecFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"DEFAULT_VC\":\n            return VideoCodec.DEFAULT_VC;\n        case 1:\n        case \"H264_BASELINE\":\n            return VideoCodec.H264_BASELINE;\n        case 2:\n        case \"H264_MAIN\":\n            return VideoCodec.H264_MAIN;\n        case 3:\n        case \"H264_HIGH\":\n            return VideoCodec.H264_HIGH;\n        case 4:\n        case \"VP8\":\n            return VideoCodec.VP8;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return VideoCodec.UNRECOGNIZED;\n    }\n}\nexports.videoCodecFromJSON = videoCodecFromJSON;\nfunction videoCodecToJSON(object) {\n    switch (object) {\n        case VideoCodec.DEFAULT_VC:\n            return \"DEFAULT_VC\";\n        case VideoCodec.H264_BASELINE:\n            return \"H264_BASELINE\";\n        case VideoCodec.H264_MAIN:\n            return \"H264_MAIN\";\n        case VideoCodec.H264_HIGH:\n            return \"H264_HIGH\";\n        case VideoCodec.VP8:\n            return \"VP8\";\n        case VideoCodec.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.videoCodecToJSON = videoCodecToJSON;\nvar ImageCodec;\n(function (ImageCodec) {\n    ImageCodec[ImageCodec[\"IC_DEFAULT\"] = 0] = \"IC_DEFAULT\";\n    ImageCodec[ImageCodec[\"IC_JPEG\"] = 1] = \"IC_JPEG\";\n    ImageCodec[ImageCodec[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ImageCodec = exports.ImageCodec || (exports.ImageCodec = {}));\nfunction imageCodecFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"IC_DEFAULT\":\n            return ImageCodec.IC_DEFAULT;\n        case 1:\n        case \"IC_JPEG\":\n            return ImageCodec.IC_JPEG;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ImageCodec.UNRECOGNIZED;\n    }\n}\nexports.imageCodecFromJSON = imageCodecFromJSON;\nfunction imageCodecToJSON(object) {\n    switch (object) {\n        case ImageCodec.IC_DEFAULT:\n            return \"IC_DEFAULT\";\n        case ImageCodec.IC_JPEG:\n            return \"IC_JPEG\";\n        case ImageCodec.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.imageCodecToJSON = imageCodecToJSON;\nvar TrackType;\n(function (TrackType) {\n    TrackType[TrackType[\"AUDIO\"] = 0] = \"AUDIO\";\n    TrackType[TrackType[\"VIDEO\"] = 1] = \"VIDEO\";\n    TrackType[TrackType[\"DATA\"] = 2] = \"DATA\";\n    TrackType[TrackType[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(TrackType = exports.TrackType || (exports.TrackType = {}));\nfunction trackTypeFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"AUDIO\":\n            return TrackType.AUDIO;\n        case 1:\n        case \"VIDEO\":\n            return TrackType.VIDEO;\n        case 2:\n        case \"DATA\":\n            return TrackType.DATA;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return TrackType.UNRECOGNIZED;\n    }\n}\nexports.trackTypeFromJSON = trackTypeFromJSON;\nfunction trackTypeToJSON(object) {\n    switch (object) {\n        case TrackType.AUDIO:\n            return \"AUDIO\";\n        case TrackType.VIDEO:\n            return \"VIDEO\";\n        case TrackType.DATA:\n            return \"DATA\";\n        case TrackType.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.trackTypeToJSON = trackTypeToJSON;\nvar TrackSource;\n(function (TrackSource) {\n    TrackSource[TrackSource[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    TrackSource[TrackSource[\"CAMERA\"] = 1] = \"CAMERA\";\n    TrackSource[TrackSource[\"MICROPHONE\"] = 2] = \"MICROPHONE\";\n    TrackSource[TrackSource[\"SCREEN_SHARE\"] = 3] = \"SCREEN_SHARE\";\n    TrackSource[TrackSource[\"SCREEN_SHARE_AUDIO\"] = 4] = \"SCREEN_SHARE_AUDIO\";\n    TrackSource[TrackSource[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(TrackSource = exports.TrackSource || (exports.TrackSource = {}));\nfunction trackSourceFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"UNKNOWN\":\n            return TrackSource.UNKNOWN;\n        case 1:\n        case \"CAMERA\":\n            return TrackSource.CAMERA;\n        case 2:\n        case \"MICROPHONE\":\n            return TrackSource.MICROPHONE;\n        case 3:\n        case \"SCREEN_SHARE\":\n            return TrackSource.SCREEN_SHARE;\n        case 4:\n        case \"SCREEN_SHARE_AUDIO\":\n            return TrackSource.SCREEN_SHARE_AUDIO;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return TrackSource.UNRECOGNIZED;\n    }\n}\nexports.trackSourceFromJSON = trackSourceFromJSON;\nfunction trackSourceToJSON(object) {\n    switch (object) {\n        case TrackSource.UNKNOWN:\n            return \"UNKNOWN\";\n        case TrackSource.CAMERA:\n            return \"CAMERA\";\n        case TrackSource.MICROPHONE:\n            return \"MICROPHONE\";\n        case TrackSource.SCREEN_SHARE:\n            return \"SCREEN_SHARE\";\n        case TrackSource.SCREEN_SHARE_AUDIO:\n            return \"SCREEN_SHARE_AUDIO\";\n        case TrackSource.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.trackSourceToJSON = trackSourceToJSON;\nvar VideoQuality;\n(function (VideoQuality) {\n    VideoQuality[VideoQuality[\"LOW\"] = 0] = \"LOW\";\n    VideoQuality[VideoQuality[\"MEDIUM\"] = 1] = \"MEDIUM\";\n    VideoQuality[VideoQuality[\"HIGH\"] = 2] = \"HIGH\";\n    VideoQuality[VideoQuality[\"OFF\"] = 3] = \"OFF\";\n    VideoQuality[VideoQuality[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(VideoQuality = exports.VideoQuality || (exports.VideoQuality = {}));\nfunction videoQualityFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"LOW\":\n            return VideoQuality.LOW;\n        case 1:\n        case \"MEDIUM\":\n            return VideoQuality.MEDIUM;\n        case 2:\n        case \"HIGH\":\n            return VideoQuality.HIGH;\n        case 3:\n        case \"OFF\":\n            return VideoQuality.OFF;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return VideoQuality.UNRECOGNIZED;\n    }\n}\nexports.videoQualityFromJSON = videoQualityFromJSON;\nfunction videoQualityToJSON(object) {\n    switch (object) {\n        case VideoQuality.LOW:\n            return \"LOW\";\n        case VideoQuality.MEDIUM:\n            return \"MEDIUM\";\n        case VideoQuality.HIGH:\n            return \"HIGH\";\n        case VideoQuality.OFF:\n            return \"OFF\";\n        case VideoQuality.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.videoQualityToJSON = videoQualityToJSON;\nvar ConnectionQuality;\n(function (ConnectionQuality) {\n    ConnectionQuality[ConnectionQuality[\"POOR\"] = 0] = \"POOR\";\n    ConnectionQuality[ConnectionQuality[\"GOOD\"] = 1] = \"GOOD\";\n    ConnectionQuality[ConnectionQuality[\"EXCELLENT\"] = 2] = \"EXCELLENT\";\n    ConnectionQuality[ConnectionQuality[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ConnectionQuality = exports.ConnectionQuality || (exports.ConnectionQuality = {}));\nfunction connectionQualityFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"POOR\":\n            return ConnectionQuality.POOR;\n        case 1:\n        case \"GOOD\":\n            return ConnectionQuality.GOOD;\n        case 2:\n        case \"EXCELLENT\":\n            return ConnectionQuality.EXCELLENT;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ConnectionQuality.UNRECOGNIZED;\n    }\n}\nexports.connectionQualityFromJSON = connectionQualityFromJSON;\nfunction connectionQualityToJSON(object) {\n    switch (object) {\n        case ConnectionQuality.POOR:\n            return \"POOR\";\n        case ConnectionQuality.GOOD:\n            return \"GOOD\";\n        case ConnectionQuality.EXCELLENT:\n            return \"EXCELLENT\";\n        case ConnectionQuality.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.connectionQualityToJSON = connectionQualityToJSON;\nvar ClientConfigSetting;\n(function (ClientConfigSetting) {\n    ClientConfigSetting[ClientConfigSetting[\"UNSET\"] = 0] = \"UNSET\";\n    ClientConfigSetting[ClientConfigSetting[\"DISABLED\"] = 1] = \"DISABLED\";\n    ClientConfigSetting[ClientConfigSetting[\"ENABLED\"] = 2] = \"ENABLED\";\n    ClientConfigSetting[ClientConfigSetting[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ClientConfigSetting = exports.ClientConfigSetting || (exports.ClientConfigSetting = {}));\nfunction clientConfigSettingFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"UNSET\":\n            return ClientConfigSetting.UNSET;\n        case 1:\n        case \"DISABLED\":\n            return ClientConfigSetting.DISABLED;\n        case 2:\n        case \"ENABLED\":\n            return ClientConfigSetting.ENABLED;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ClientConfigSetting.UNRECOGNIZED;\n    }\n}\nexports.clientConfigSettingFromJSON = clientConfigSettingFromJSON;\nfunction clientConfigSettingToJSON(object) {\n    switch (object) {\n        case ClientConfigSetting.UNSET:\n            return \"UNSET\";\n        case ClientConfigSetting.DISABLED:\n            return \"DISABLED\";\n        case ClientConfigSetting.ENABLED:\n            return \"ENABLED\";\n        case ClientConfigSetting.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.clientConfigSettingToJSON = clientConfigSettingToJSON;\nvar DisconnectReason;\n(function (DisconnectReason) {\n    DisconnectReason[DisconnectReason[\"UNKNOWN_REASON\"] = 0] = \"UNKNOWN_REASON\";\n    DisconnectReason[DisconnectReason[\"CLIENT_INITIATED\"] = 1] = \"CLIENT_INITIATED\";\n    DisconnectReason[DisconnectReason[\"DUPLICATE_IDENTITY\"] = 2] = \"DUPLICATE_IDENTITY\";\n    DisconnectReason[DisconnectReason[\"SERVER_SHUTDOWN\"] = 3] = \"SERVER_SHUTDOWN\";\n    DisconnectReason[DisconnectReason[\"PARTICIPANT_REMOVED\"] = 4] = \"PARTICIPANT_REMOVED\";\n    DisconnectReason[DisconnectReason[\"ROOM_DELETED\"] = 5] = \"ROOM_DELETED\";\n    DisconnectReason[DisconnectReason[\"STATE_MISMATCH\"] = 6] = \"STATE_MISMATCH\";\n    DisconnectReason[DisconnectReason[\"JOIN_FAILURE\"] = 7] = \"JOIN_FAILURE\";\n    DisconnectReason[DisconnectReason[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(DisconnectReason = exports.DisconnectReason || (exports.DisconnectReason = {}));\nfunction disconnectReasonFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"UNKNOWN_REASON\":\n            return DisconnectReason.UNKNOWN_REASON;\n        case 1:\n        case \"CLIENT_INITIATED\":\n            return DisconnectReason.CLIENT_INITIATED;\n        case 2:\n        case \"DUPLICATE_IDENTITY\":\n            return DisconnectReason.DUPLICATE_IDENTITY;\n        case 3:\n        case \"SERVER_SHUTDOWN\":\n            return DisconnectReason.SERVER_SHUTDOWN;\n        case 4:\n        case \"PARTICIPANT_REMOVED\":\n            return DisconnectReason.PARTICIPANT_REMOVED;\n        case 5:\n        case \"ROOM_DELETED\":\n            return DisconnectReason.ROOM_DELETED;\n        case 6:\n        case \"STATE_MISMATCH\":\n            return DisconnectReason.STATE_MISMATCH;\n        case 7:\n        case \"JOIN_FAILURE\":\n            return DisconnectReason.JOIN_FAILURE;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return DisconnectReason.UNRECOGNIZED;\n    }\n}\nexports.disconnectReasonFromJSON = disconnectReasonFromJSON;\nfunction disconnectReasonToJSON(object) {\n    switch (object) {\n        case DisconnectReason.UNKNOWN_REASON:\n            return \"UNKNOWN_REASON\";\n        case DisconnectReason.CLIENT_INITIATED:\n            return \"CLIENT_INITIATED\";\n        case DisconnectReason.DUPLICATE_IDENTITY:\n            return \"DUPLICATE_IDENTITY\";\n        case DisconnectReason.SERVER_SHUTDOWN:\n            return \"SERVER_SHUTDOWN\";\n        case DisconnectReason.PARTICIPANT_REMOVED:\n            return \"PARTICIPANT_REMOVED\";\n        case DisconnectReason.ROOM_DELETED:\n            return \"ROOM_DELETED\";\n        case DisconnectReason.STATE_MISMATCH:\n            return \"STATE_MISMATCH\";\n        case DisconnectReason.JOIN_FAILURE:\n            return \"JOIN_FAILURE\";\n        case DisconnectReason.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.disconnectReasonToJSON = disconnectReasonToJSON;\nvar ReconnectReason;\n(function (ReconnectReason) {\n    ReconnectReason[ReconnectReason[\"RR_UNKNOWN\"] = 0] = \"RR_UNKNOWN\";\n    ReconnectReason[ReconnectReason[\"RR_SIGNAL_DISCONNECTED\"] = 1] = \"RR_SIGNAL_DISCONNECTED\";\n    ReconnectReason[ReconnectReason[\"RR_PUBLISHER_FAILED\"] = 2] = \"RR_PUBLISHER_FAILED\";\n    ReconnectReason[ReconnectReason[\"RR_SUBSCRIBER_FAILED\"] = 3] = \"RR_SUBSCRIBER_FAILED\";\n    ReconnectReason[ReconnectReason[\"RR_SWITCH_CANDIDATE\"] = 4] = \"RR_SWITCH_CANDIDATE\";\n    ReconnectReason[ReconnectReason[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ReconnectReason = exports.ReconnectReason || (exports.ReconnectReason = {}));\nfunction reconnectReasonFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"RR_UNKNOWN\":\n            return ReconnectReason.RR_UNKNOWN;\n        case 1:\n        case \"RR_SIGNAL_DISCONNECTED\":\n            return ReconnectReason.RR_SIGNAL_DISCONNECTED;\n        case 2:\n        case \"RR_PUBLISHER_FAILED\":\n            return ReconnectReason.RR_PUBLISHER_FAILED;\n        case 3:\n        case \"RR_SUBSCRIBER_FAILED\":\n            return ReconnectReason.RR_SUBSCRIBER_FAILED;\n        case 4:\n        case \"RR_SWITCH_CANDIDATE\":\n            return ReconnectReason.RR_SWITCH_CANDIDATE;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ReconnectReason.UNRECOGNIZED;\n    }\n}\nexports.reconnectReasonFromJSON = reconnectReasonFromJSON;\nfunction reconnectReasonToJSON(object) {\n    switch (object) {\n        case ReconnectReason.RR_UNKNOWN:\n            return \"RR_UNKNOWN\";\n        case ReconnectReason.RR_SIGNAL_DISCONNECTED:\n            return \"RR_SIGNAL_DISCONNECTED\";\n        case ReconnectReason.RR_PUBLISHER_FAILED:\n            return \"RR_PUBLISHER_FAILED\";\n        case ReconnectReason.RR_SUBSCRIBER_FAILED:\n            return \"RR_SUBSCRIBER_FAILED\";\n        case ReconnectReason.RR_SWITCH_CANDIDATE:\n            return \"RR_SWITCH_CANDIDATE\";\n        case ReconnectReason.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.reconnectReasonToJSON = reconnectReasonToJSON;\nvar SubscriptionError;\n(function (SubscriptionError) {\n    SubscriptionError[SubscriptionError[\"SE_UNKNOWN\"] = 0] = \"SE_UNKNOWN\";\n    SubscriptionError[SubscriptionError[\"SE_CODEC_UNSUPPORTED\"] = 1] = \"SE_CODEC_UNSUPPORTED\";\n    SubscriptionError[SubscriptionError[\"SE_TRACK_NOTFOUND\"] = 2] = \"SE_TRACK_NOTFOUND\";\n    SubscriptionError[SubscriptionError[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(SubscriptionError = exports.SubscriptionError || (exports.SubscriptionError = {}));\nfunction subscriptionErrorFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"SE_UNKNOWN\":\n            return SubscriptionError.SE_UNKNOWN;\n        case 1:\n        case \"SE_CODEC_UNSUPPORTED\":\n            return SubscriptionError.SE_CODEC_UNSUPPORTED;\n        case 2:\n        case \"SE_TRACK_NOTFOUND\":\n            return SubscriptionError.SE_TRACK_NOTFOUND;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return SubscriptionError.UNRECOGNIZED;\n    }\n}\nexports.subscriptionErrorFromJSON = subscriptionErrorFromJSON;\nfunction subscriptionErrorToJSON(object) {\n    switch (object) {\n        case SubscriptionError.SE_UNKNOWN:\n            return \"SE_UNKNOWN\";\n        case SubscriptionError.SE_CODEC_UNSUPPORTED:\n            return \"SE_CODEC_UNSUPPORTED\";\n        case SubscriptionError.SE_TRACK_NOTFOUND:\n            return \"SE_TRACK_NOTFOUND\";\n        case SubscriptionError.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.subscriptionErrorToJSON = subscriptionErrorToJSON;\nvar ParticipantInfo_State;\n(function (ParticipantInfo_State) {\n    /** JOINING - websocket' connected, but not offered yet */\n    ParticipantInfo_State[ParticipantInfo_State[\"JOINING\"] = 0] = \"JOINING\";\n    /** JOINED - server received client offer */\n    ParticipantInfo_State[ParticipantInfo_State[\"JOINED\"] = 1] = \"JOINED\";\n    /** ACTIVE - ICE connectivity established */\n    ParticipantInfo_State[ParticipantInfo_State[\"ACTIVE\"] = 2] = \"ACTIVE\";\n    /** DISCONNECTED - WS disconnected */\n    ParticipantInfo_State[ParticipantInfo_State[\"DISCONNECTED\"] = 3] = \"DISCONNECTED\";\n    ParticipantInfo_State[ParticipantInfo_State[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ParticipantInfo_State = exports.ParticipantInfo_State || (exports.ParticipantInfo_State = {}));\nfunction participantInfo_StateFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"JOINING\":\n            return ParticipantInfo_State.JOINING;\n        case 1:\n        case \"JOINED\":\n            return ParticipantInfo_State.JOINED;\n        case 2:\n        case \"ACTIVE\":\n            return ParticipantInfo_State.ACTIVE;\n        case 3:\n        case \"DISCONNECTED\":\n            return ParticipantInfo_State.DISCONNECTED;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ParticipantInfo_State.UNRECOGNIZED;\n    }\n}\nexports.participantInfo_StateFromJSON = participantInfo_StateFromJSON;\nfunction participantInfo_StateToJSON(object) {\n    switch (object) {\n        case ParticipantInfo_State.JOINING:\n            return \"JOINING\";\n        case ParticipantInfo_State.JOINED:\n            return \"JOINED\";\n        case ParticipantInfo_State.ACTIVE:\n            return \"ACTIVE\";\n        case ParticipantInfo_State.DISCONNECTED:\n            return \"DISCONNECTED\";\n        case ParticipantInfo_State.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.participantInfo_StateToJSON = participantInfo_StateToJSON;\nvar Encryption_Type;\n(function (Encryption_Type) {\n    Encryption_Type[Encryption_Type[\"NONE\"] = 0] = \"NONE\";\n    Encryption_Type[Encryption_Type[\"GCM\"] = 1] = \"GCM\";\n    Encryption_Type[Encryption_Type[\"CUSTOM\"] = 2] = \"CUSTOM\";\n    Encryption_Type[Encryption_Type[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(Encryption_Type = exports.Encryption_Type || (exports.Encryption_Type = {}));\nfunction encryption_TypeFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"NONE\":\n            return Encryption_Type.NONE;\n        case 1:\n        case \"GCM\":\n            return Encryption_Type.GCM;\n        case 2:\n        case \"CUSTOM\":\n            return Encryption_Type.CUSTOM;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return Encryption_Type.UNRECOGNIZED;\n    }\n}\nexports.encryption_TypeFromJSON = encryption_TypeFromJSON;\nfunction encryption_TypeToJSON(object) {\n    switch (object) {\n        case Encryption_Type.NONE:\n            return \"NONE\";\n        case Encryption_Type.GCM:\n            return \"GCM\";\n        case Encryption_Type.CUSTOM:\n            return \"CUSTOM\";\n        case Encryption_Type.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.encryption_TypeToJSON = encryption_TypeToJSON;\nvar DataPacket_Kind;\n(function (DataPacket_Kind) {\n    DataPacket_Kind[DataPacket_Kind[\"RELIABLE\"] = 0] = \"RELIABLE\";\n    DataPacket_Kind[DataPacket_Kind[\"LOSSY\"] = 1] = \"LOSSY\";\n    DataPacket_Kind[DataPacket_Kind[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(DataPacket_Kind = exports.DataPacket_Kind || (exports.DataPacket_Kind = {}));\nfunction dataPacket_KindFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"RELIABLE\":\n            return DataPacket_Kind.RELIABLE;\n        case 1:\n        case \"LOSSY\":\n            return DataPacket_Kind.LOSSY;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return DataPacket_Kind.UNRECOGNIZED;\n    }\n}\nexports.dataPacket_KindFromJSON = dataPacket_KindFromJSON;\nfunction dataPacket_KindToJSON(object) {\n    switch (object) {\n        case DataPacket_Kind.RELIABLE:\n            return \"RELIABLE\";\n        case DataPacket_Kind.LOSSY:\n            return \"LOSSY\";\n        case DataPacket_Kind.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.dataPacket_KindToJSON = dataPacket_KindToJSON;\nvar ServerInfo_Edition;\n(function (ServerInfo_Edition) {\n    ServerInfo_Edition[ServerInfo_Edition[\"Standard\"] = 0] = \"Standard\";\n    ServerInfo_Edition[ServerInfo_Edition[\"Cloud\"] = 1] = \"Cloud\";\n    ServerInfo_Edition[ServerInfo_Edition[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ServerInfo_Edition = exports.ServerInfo_Edition || (exports.ServerInfo_Edition = {}));\nfunction serverInfo_EditionFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"Standard\":\n            return ServerInfo_Edition.Standard;\n        case 1:\n        case \"Cloud\":\n            return ServerInfo_Edition.Cloud;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ServerInfo_Edition.UNRECOGNIZED;\n    }\n}\nexports.serverInfo_EditionFromJSON = serverInfo_EditionFromJSON;\nfunction serverInfo_EditionToJSON(object) {\n    switch (object) {\n        case ServerInfo_Edition.Standard:\n            return \"Standard\";\n        case ServerInfo_Edition.Cloud:\n            return \"Cloud\";\n        case ServerInfo_Edition.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.serverInfo_EditionToJSON = serverInfo_EditionToJSON;\nvar ClientInfo_SDK;\n(function (ClientInfo_SDK) {\n    ClientInfo_SDK[ClientInfo_SDK[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    ClientInfo_SDK[ClientInfo_SDK[\"JS\"] = 1] = \"JS\";\n    ClientInfo_SDK[ClientInfo_SDK[\"SWIFT\"] = 2] = \"SWIFT\";\n    ClientInfo_SDK[ClientInfo_SDK[\"ANDROID\"] = 3] = \"ANDROID\";\n    ClientInfo_SDK[ClientInfo_SDK[\"FLUTTER\"] = 4] = \"FLUTTER\";\n    ClientInfo_SDK[ClientInfo_SDK[\"GO\"] = 5] = \"GO\";\n    ClientInfo_SDK[ClientInfo_SDK[\"UNITY\"] = 6] = \"UNITY\";\n    ClientInfo_SDK[ClientInfo_SDK[\"REACT_NATIVE\"] = 7] = \"REACT_NATIVE\";\n    ClientInfo_SDK[ClientInfo_SDK[\"RUST\"] = 8] = \"RUST\";\n    ClientInfo_SDK[ClientInfo_SDK[\"PYTHON\"] = 9] = \"PYTHON\";\n    ClientInfo_SDK[ClientInfo_SDK[\"CPP\"] = 10] = \"CPP\";\n    ClientInfo_SDK[ClientInfo_SDK[\"UNRECOGNIZED\"] = -1] = \"UNRECOGNIZED\";\n})(ClientInfo_SDK = exports.ClientInfo_SDK || (exports.ClientInfo_SDK = {}));\nfunction clientInfo_SDKFromJSON(object) {\n    switch (object) {\n        case 0:\n        case \"UNKNOWN\":\n            return ClientInfo_SDK.UNKNOWN;\n        case 1:\n        case \"JS\":\n            return ClientInfo_SDK.JS;\n        case 2:\n        case \"SWIFT\":\n            return ClientInfo_SDK.SWIFT;\n        case 3:\n        case \"ANDROID\":\n            return ClientInfo_SDK.ANDROID;\n        case 4:\n        case \"FLUTTER\":\n            return ClientInfo_SDK.FLUTTER;\n        case 5:\n        case \"GO\":\n            return ClientInfo_SDK.GO;\n        case 6:\n        case \"UNITY\":\n            return ClientInfo_SDK.UNITY;\n        case 7:\n        case \"REACT_NATIVE\":\n            return ClientInfo_SDK.REACT_NATIVE;\n        case 8:\n        case \"RUST\":\n            return ClientInfo_SDK.RUST;\n        case 9:\n        case \"PYTHON\":\n            return ClientInfo_SDK.PYTHON;\n        case 10:\n        case \"CPP\":\n            return ClientInfo_SDK.CPP;\n        case -1:\n        case \"UNRECOGNIZED\":\n        default:\n            return ClientInfo_SDK.UNRECOGNIZED;\n    }\n}\nexports.clientInfo_SDKFromJSON = clientInfo_SDKFromJSON;\nfunction clientInfo_SDKToJSON(object) {\n    switch (object) {\n        case ClientInfo_SDK.UNKNOWN:\n            return \"UNKNOWN\";\n        case ClientInfo_SDK.JS:\n            return \"JS\";\n        case ClientInfo_SDK.SWIFT:\n            return \"SWIFT\";\n        case ClientInfo_SDK.ANDROID:\n            return \"ANDROID\";\n        case ClientInfo_SDK.FLUTTER:\n            return \"FLUTTER\";\n        case ClientInfo_SDK.GO:\n            return \"GO\";\n        case ClientInfo_SDK.UNITY:\n            return \"UNITY\";\n        case ClientInfo_SDK.REACT_NATIVE:\n            return \"REACT_NATIVE\";\n        case ClientInfo_SDK.RUST:\n            return \"RUST\";\n        case ClientInfo_SDK.PYTHON:\n            return \"PYTHON\";\n        case ClientInfo_SDK.CPP:\n            return \"CPP\";\n        case ClientInfo_SDK.UNRECOGNIZED:\n        default:\n            return \"UNRECOGNIZED\";\n    }\n}\nexports.clientInfo_SDKToJSON = clientInfo_SDKToJSON;\nfunction createBaseRoom() {\n    return {\n        sid: \"\",\n        name: \"\",\n        emptyTimeout: 0,\n        maxParticipants: 0,\n        creationTime: 0,\n        turnPassword: \"\",\n        enabledCodecs: [],\n        metadata: \"\",\n        numParticipants: 0,\n        numPublishers: 0,\n        activeRecording: false,\n    };\n}\nexports.Room = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.sid !== \"\") {\n            writer.uint32(10).string(message.sid);\n        }\n        if (message.name !== \"\") {\n            writer.uint32(18).string(message.name);\n        }\n        if (message.emptyTimeout !== 0) {\n            writer.uint32(24).uint32(message.emptyTimeout);\n        }\n        if (message.maxParticipants !== 0) {\n            writer.uint32(32).uint32(message.maxParticipants);\n        }\n        if (message.creationTime !== 0) {\n            writer.uint32(40).int64(message.creationTime);\n        }\n        if (message.turnPassword !== \"\") {\n            writer.uint32(50).string(message.turnPassword);\n        }\n        for (const v of message.enabledCodecs) {\n            exports.Codec.encode(v, writer.uint32(58).fork()).ldelim();\n        }\n        if (message.metadata !== \"\") {\n            writer.uint32(66).string(message.metadata);\n        }\n        if (message.numParticipants !== 0) {\n            writer.uint32(72).uint32(message.numParticipants);\n        }\n        if (message.numPublishers !== 0) {\n            writer.uint32(88).uint32(message.numPublishers);\n        }\n        if (message.activeRecording === true) {\n            writer.uint32(80).bool(message.activeRecording);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseRoom();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.sid = reader.string();\n                    break;\n                case 2:\n                    message.name = reader.string();\n                    break;\n                case 3:\n                    message.emptyTimeout = reader.uint32();\n                    break;\n                case 4:\n                    message.maxParticipants = reader.uint32();\n                    break;\n                case 5:\n                    message.creationTime = longToNumber(reader.int64());\n                    break;\n                case 6:\n                    message.turnPassword = reader.string();\n                    break;\n                case 7:\n                    message.enabledCodecs.push(exports.Codec.decode(reader, reader.uint32()));\n                    break;\n                case 8:\n                    message.metadata = reader.string();\n                    break;\n                case 9:\n                    message.numParticipants = reader.uint32();\n                    break;\n                case 11:\n                    message.numPublishers = reader.uint32();\n                    break;\n                case 10:\n                    message.activeRecording = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            sid: isSet(object.sid) ? String(object.sid) : \"\",\n            name: isSet(object.name) ? String(object.name) : \"\",\n            emptyTimeout: isSet(object.emptyTimeout) ? Number(object.emptyTimeout) : 0,\n            maxParticipants: isSet(object.maxParticipants) ? Number(object.maxParticipants) : 0,\n            creationTime: isSet(object.creationTime) ? Number(object.creationTime) : 0,\n            turnPassword: isSet(object.turnPassword) ? String(object.turnPassword) : \"\",\n            enabledCodecs: Array.isArray(object === null || object === void 0 ? void 0 : object.enabledCodecs)\n                ? object.enabledCodecs.map((e) => exports.Codec.fromJSON(e))\n                : [],\n            metadata: isSet(object.metadata) ? String(object.metadata) : \"\",\n            numParticipants: isSet(object.numParticipants) ? Number(object.numParticipants) : 0,\n            numPublishers: isSet(object.numPublishers) ? Number(object.numPublishers) : 0,\n            activeRecording: isSet(object.activeRecording) ? Boolean(object.activeRecording) : false,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.sid !== undefined && (obj.sid = message.sid);\n        message.name !== undefined && (obj.name = message.name);\n        message.emptyTimeout !== undefined && (obj.emptyTimeout = Math.round(message.emptyTimeout));\n        message.maxParticipants !== undefined && (obj.maxParticipants = Math.round(message.maxParticipants));\n        message.creationTime !== undefined && (obj.creationTime = Math.round(message.creationTime));\n        message.turnPassword !== undefined && (obj.turnPassword = message.turnPassword);\n        if (message.enabledCodecs) {\n            obj.enabledCodecs = message.enabledCodecs.map((e) => e ? exports.Codec.toJSON(e) : undefined);\n        }\n        else {\n            obj.enabledCodecs = [];\n        }\n        message.metadata !== undefined && (obj.metadata = message.metadata);\n        message.numParticipants !== undefined && (obj.numParticipants = Math.round(message.numParticipants));\n        message.numPublishers !== undefined && (obj.numPublishers = Math.round(message.numPublishers));\n        message.activeRecording !== undefined && (obj.activeRecording = message.activeRecording);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n        const message = createBaseRoom();\n        message.sid = (_a = object.sid) !== null && _a !== void 0 ? _a : \"\";\n        message.name = (_b = object.name) !== null && _b !== void 0 ? _b : \"\";\n        message.emptyTimeout = (_c = object.emptyTimeout) !== null && _c !== void 0 ? _c : 0;\n        message.maxParticipants = (_d = object.maxParticipants) !== null && _d !== void 0 ? _d : 0;\n        message.creationTime = (_e = object.creationTime) !== null && _e !== void 0 ? _e : 0;\n        message.turnPassword = (_f = object.turnPassword) !== null && _f !== void 0 ? _f : \"\";\n        message.enabledCodecs = ((_g = object.enabledCodecs) === null || _g === void 0 ? void 0 : _g.map((e) => exports.Codec.fromPartial(e))) || [];\n        message.metadata = (_h = object.metadata) !== null && _h !== void 0 ? _h : \"\";\n        message.numParticipants = (_j = object.numParticipants) !== null && _j !== void 0 ? _j : 0;\n        message.numPublishers = (_k = object.numPublishers) !== null && _k !== void 0 ? _k : 0;\n        message.activeRecording = (_l = object.activeRecording) !== null && _l !== void 0 ? _l : false;\n        return message;\n    },\n};\nfunction createBaseCodec() {\n    return { mime: \"\", fmtpLine: \"\" };\n}\nexports.Codec = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.mime !== \"\") {\n            writer.uint32(10).string(message.mime);\n        }\n        if (message.fmtpLine !== \"\") {\n            writer.uint32(18).string(message.fmtpLine);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseCodec();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.mime = reader.string();\n                    break;\n                case 2:\n                    message.fmtpLine = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            mime: isSet(object.mime) ? String(object.mime) : \"\",\n            fmtpLine: isSet(object.fmtpLine) ? String(object.fmtpLine) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.mime !== undefined && (obj.mime = message.mime);\n        message.fmtpLine !== undefined && (obj.fmtpLine = message.fmtpLine);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseCodec();\n        message.mime = (_a = object.mime) !== null && _a !== void 0 ? _a : \"\";\n        message.fmtpLine = (_b = object.fmtpLine) !== null && _b !== void 0 ? _b : \"\";\n        return message;\n    },\n};\nfunction createBasePlayoutDelay() {\n    return { enabled: false, min: 0, max: 0 };\n}\nexports.PlayoutDelay = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.enabled === true) {\n            writer.uint32(8).bool(message.enabled);\n        }\n        if (message.min !== 0) {\n            writer.uint32(16).uint32(message.min);\n        }\n        if (message.max !== 0) {\n            writer.uint32(24).uint32(message.max);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBasePlayoutDelay();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.enabled = reader.bool();\n                    break;\n                case 2:\n                    message.min = reader.uint32();\n                    break;\n                case 3:\n                    message.max = reader.uint32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            enabled: isSet(object.enabled) ? Boolean(object.enabled) : false,\n            min: isSet(object.min) ? Number(object.min) : 0,\n            max: isSet(object.max) ? Number(object.max) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.enabled !== undefined && (obj.enabled = message.enabled);\n        message.min !== undefined && (obj.min = Math.round(message.min));\n        message.max !== undefined && (obj.max = Math.round(message.max));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBasePlayoutDelay();\n        message.enabled = (_a = object.enabled) !== null && _a !== void 0 ? _a : false;\n        message.min = (_b = object.min) !== null && _b !== void 0 ? _b : 0;\n        message.max = (_c = object.max) !== null && _c !== void 0 ? _c : 0;\n        return message;\n    },\n};\nfunction createBaseParticipantPermission() {\n    return {\n        canSubscribe: false,\n        canPublish: false,\n        canPublishData: false,\n        canPublishSources: [],\n        hidden: false,\n        recorder: false,\n        canUpdateMetadata: false,\n    };\n}\nexports.ParticipantPermission = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.canSubscribe === true) {\n            writer.uint32(8).bool(message.canSubscribe);\n        }\n        if (message.canPublish === true) {\n            writer.uint32(16).bool(message.canPublish);\n        }\n        if (message.canPublishData === true) {\n            writer.uint32(24).bool(message.canPublishData);\n        }\n        writer.uint32(74).fork();\n        for (const v of message.canPublishSources) {\n            writer.int32(v);\n        }\n        writer.ldelim();\n        if (message.hidden === true) {\n            writer.uint32(56).bool(message.hidden);\n        }\n        if (message.recorder === true) {\n            writer.uint32(64).bool(message.recorder);\n        }\n        if (message.canUpdateMetadata === true) {\n            writer.uint32(80).bool(message.canUpdateMetadata);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseParticipantPermission();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.canSubscribe = reader.bool();\n                    break;\n                case 2:\n                    message.canPublish = reader.bool();\n                    break;\n                case 3:\n                    message.canPublishData = reader.bool();\n                    break;\n                case 9:\n                    if ((tag & 7) === 2) {\n                        const end2 = reader.uint32() + reader.pos;\n                        while (reader.pos < end2) {\n                            message.canPublishSources.push(reader.int32());\n                        }\n                    }\n                    else {\n                        message.canPublishSources.push(reader.int32());\n                    }\n                    break;\n                case 7:\n                    message.hidden = reader.bool();\n                    break;\n                case 8:\n                    message.recorder = reader.bool();\n                    break;\n                case 10:\n                    message.canUpdateMetadata = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            canSubscribe: isSet(object.canSubscribe) ? Boolean(object.canSubscribe) : false,\n            canPublish: isSet(object.canPublish) ? Boolean(object.canPublish) : false,\n            canPublishData: isSet(object.canPublishData) ? Boolean(object.canPublishData) : false,\n            canPublishSources: Array.isArray(object === null || object === void 0 ? void 0 : object.canPublishSources)\n                ? object.canPublishSources.map((e) => trackSourceFromJSON(e))\n                : [],\n            hidden: isSet(object.hidden) ? Boolean(object.hidden) : false,\n            recorder: isSet(object.recorder) ? Boolean(object.recorder) : false,\n            canUpdateMetadata: isSet(object.canUpdateMetadata) ? Boolean(object.canUpdateMetadata) : false,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.canSubscribe !== undefined && (obj.canSubscribe = message.canSubscribe);\n        message.canPublish !== undefined && (obj.canPublish = message.canPublish);\n        message.canPublishData !== undefined && (obj.canPublishData = message.canPublishData);\n        if (message.canPublishSources) {\n            obj.canPublishSources = message.canPublishSources.map((e) => trackSourceToJSON(e));\n        }\n        else {\n            obj.canPublishSources = [];\n        }\n        message.hidden !== undefined && (obj.hidden = message.hidden);\n        message.recorder !== undefined && (obj.recorder = message.recorder);\n        message.canUpdateMetadata !== undefined && (obj.canUpdateMetadata = message.canUpdateMetadata);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        const message = createBaseParticipantPermission();\n        message.canSubscribe = (_a = object.canSubscribe) !== null && _a !== void 0 ? _a : false;\n        message.canPublish = (_b = object.canPublish) !== null && _b !== void 0 ? _b : false;\n        message.canPublishData = (_c = object.canPublishData) !== null && _c !== void 0 ? _c : false;\n        message.canPublishSources = ((_d = object.canPublishSources) === null || _d === void 0 ? void 0 : _d.map((e) => e)) || [];\n        message.hidden = (_e = object.hidden) !== null && _e !== void 0 ? _e : false;\n        message.recorder = (_f = object.recorder) !== null && _f !== void 0 ? _f : false;\n        message.canUpdateMetadata = (_g = object.canUpdateMetadata) !== null && _g !== void 0 ? _g : false;\n        return message;\n    },\n};\nfunction createBaseParticipantInfo() {\n    return {\n        sid: \"\",\n        identity: \"\",\n        state: 0,\n        tracks: [],\n        metadata: \"\",\n        joinedAt: 0,\n        name: \"\",\n        version: 0,\n        permission: undefined,\n        region: \"\",\n        isPublisher: false,\n    };\n}\nexports.ParticipantInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.sid !== \"\") {\n            writer.uint32(10).string(message.sid);\n        }\n        if (message.identity !== \"\") {\n            writer.uint32(18).string(message.identity);\n        }\n        if (message.state !== 0) {\n            writer.uint32(24).int32(message.state);\n        }\n        for (const v of message.tracks) {\n            exports.TrackInfo.encode(v, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.metadata !== \"\") {\n            writer.uint32(42).string(message.metadata);\n        }\n        if (message.joinedAt !== 0) {\n            writer.uint32(48).int64(message.joinedAt);\n        }\n        if (message.name !== \"\") {\n            writer.uint32(74).string(message.name);\n        }\n        if (message.version !== 0) {\n            writer.uint32(80).uint32(message.version);\n        }\n        if (message.permission !== undefined) {\n            exports.ParticipantPermission.encode(message.permission, writer.uint32(90).fork()).ldelim();\n        }\n        if (message.region !== \"\") {\n            writer.uint32(98).string(message.region);\n        }\n        if (message.isPublisher === true) {\n            writer.uint32(104).bool(message.isPublisher);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseParticipantInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.sid = reader.string();\n                    break;\n                case 2:\n                    message.identity = reader.string();\n                    break;\n                case 3:\n                    message.state = reader.int32();\n                    break;\n                case 4:\n                    message.tracks.push(exports.TrackInfo.decode(reader, reader.uint32()));\n                    break;\n                case 5:\n                    message.metadata = reader.string();\n                    break;\n                case 6:\n                    message.joinedAt = longToNumber(reader.int64());\n                    break;\n                case 9:\n                    message.name = reader.string();\n                    break;\n                case 10:\n                    message.version = reader.uint32();\n                    break;\n                case 11:\n                    message.permission = exports.ParticipantPermission.decode(reader, reader.uint32());\n                    break;\n                case 12:\n                    message.region = reader.string();\n                    break;\n                case 13:\n                    message.isPublisher = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            sid: isSet(object.sid) ? String(object.sid) : \"\",\n            identity: isSet(object.identity) ? String(object.identity) : \"\",\n            state: isSet(object.state) ? participantInfo_StateFromJSON(object.state) : 0,\n            tracks: Array.isArray(object === null || object === void 0 ? void 0 : object.tracks) ? object.tracks.map((e) => exports.TrackInfo.fromJSON(e)) : [],\n            metadata: isSet(object.metadata) ? String(object.metadata) : \"\",\n            joinedAt: isSet(object.joinedAt) ? Number(object.joinedAt) : 0,\n            name: isSet(object.name) ? String(object.name) : \"\",\n            version: isSet(object.version) ? Number(object.version) : 0,\n            permission: isSet(object.permission) ? exports.ParticipantPermission.fromJSON(object.permission) : undefined,\n            region: isSet(object.region) ? String(object.region) : \"\",\n            isPublisher: isSet(object.isPublisher) ? Boolean(object.isPublisher) : false,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.sid !== undefined && (obj.sid = message.sid);\n        message.identity !== undefined && (obj.identity = message.identity);\n        message.state !== undefined && (obj.state = participantInfo_StateToJSON(message.state));\n        if (message.tracks) {\n            obj.tracks = message.tracks.map((e) => e ? exports.TrackInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.tracks = [];\n        }\n        message.metadata !== undefined && (obj.metadata = message.metadata);\n        message.joinedAt !== undefined && (obj.joinedAt = Math.round(message.joinedAt));\n        message.name !== undefined && (obj.name = message.name);\n        message.version !== undefined && (obj.version = Math.round(message.version));\n        message.permission !== undefined &&\n            (obj.permission = message.permission ? exports.ParticipantPermission.toJSON(message.permission) : undefined);\n        message.region !== undefined && (obj.region = message.region);\n        message.isPublisher !== undefined && (obj.isPublisher = message.isPublisher);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        const message = createBaseParticipantInfo();\n        message.sid = (_a = object.sid) !== null && _a !== void 0 ? _a : \"\";\n        message.identity = (_b = object.identity) !== null && _b !== void 0 ? _b : \"\";\n        message.state = (_c = object.state) !== null && _c !== void 0 ? _c : 0;\n        message.tracks = ((_d = object.tracks) === null || _d === void 0 ? void 0 : _d.map((e) => exports.TrackInfo.fromPartial(e))) || [];\n        message.metadata = (_e = object.metadata) !== null && _e !== void 0 ? _e : \"\";\n        message.joinedAt = (_f = object.joinedAt) !== null && _f !== void 0 ? _f : 0;\n        message.name = (_g = object.name) !== null && _g !== void 0 ? _g : \"\";\n        message.version = (_h = object.version) !== null && _h !== void 0 ? _h : 0;\n        message.permission = (object.permission !== undefined && object.permission !== null)\n            ? exports.ParticipantPermission.fromPartial(object.permission)\n            : undefined;\n        message.region = (_j = object.region) !== null && _j !== void 0 ? _j : \"\";\n        message.isPublisher = (_k = object.isPublisher) !== null && _k !== void 0 ? _k : false;\n        return message;\n    },\n};\nfunction createBaseEncryption() {\n    return {};\n}\nexports.Encryption = {\n    encode(_, writer = minimal_1.default.Writer.create()) {\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseEncryption();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(_) {\n        return {};\n    },\n    toJSON(_) {\n        const obj = {};\n        return obj;\n    },\n    fromPartial(_) {\n        const message = createBaseEncryption();\n        return message;\n    },\n};\nfunction createBaseSimulcastCodecInfo() {\n    return { mimeType: \"\", mid: \"\", cid: \"\", layers: [] };\n}\nexports.SimulcastCodecInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.mimeType !== \"\") {\n            writer.uint32(10).string(message.mimeType);\n        }\n        if (message.mid !== \"\") {\n            writer.uint32(18).string(message.mid);\n        }\n        if (message.cid !== \"\") {\n            writer.uint32(26).string(message.cid);\n        }\n        for (const v of message.layers) {\n            exports.VideoLayer.encode(v, writer.uint32(34).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseSimulcastCodecInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.mimeType = reader.string();\n                    break;\n                case 2:\n                    message.mid = reader.string();\n                    break;\n                case 3:\n                    message.cid = reader.string();\n                    break;\n                case 4:\n                    message.layers.push(exports.VideoLayer.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            mimeType: isSet(object.mimeType) ? String(object.mimeType) : \"\",\n            mid: isSet(object.mid) ? String(object.mid) : \"\",\n            cid: isSet(object.cid) ? String(object.cid) : \"\",\n            layers: Array.isArray(object === null || object === void 0 ? void 0 : object.layers) ? object.layers.map((e) => exports.VideoLayer.fromJSON(e)) : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.mimeType !== undefined && (obj.mimeType = message.mimeType);\n        message.mid !== undefined && (obj.mid = message.mid);\n        message.cid !== undefined && (obj.cid = message.cid);\n        if (message.layers) {\n            obj.layers = message.layers.map((e) => e ? exports.VideoLayer.toJSON(e) : undefined);\n        }\n        else {\n            obj.layers = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d;\n        const message = createBaseSimulcastCodecInfo();\n        message.mimeType = (_a = object.mimeType) !== null && _a !== void 0 ? _a : \"\";\n        message.mid = (_b = object.mid) !== null && _b !== void 0 ? _b : \"\";\n        message.cid = (_c = object.cid) !== null && _c !== void 0 ? _c : \"\";\n        message.layers = ((_d = object.layers) === null || _d === void 0 ? void 0 : _d.map((e) => exports.VideoLayer.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseTrackInfo() {\n    return {\n        sid: \"\",\n        type: 0,\n        name: \"\",\n        muted: false,\n        width: 0,\n        height: 0,\n        simulcast: false,\n        disableDtx: false,\n        source: 0,\n        layers: [],\n        mimeType: \"\",\n        mid: \"\",\n        codecs: [],\n        stereo: false,\n        disableRed: false,\n        encryption: 0,\n        stream: \"\",\n    };\n}\nexports.TrackInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.sid !== \"\") {\n            writer.uint32(10).string(message.sid);\n        }\n        if (message.type !== 0) {\n            writer.uint32(16).int32(message.type);\n        }\n        if (message.name !== \"\") {\n            writer.uint32(26).string(message.name);\n        }\n        if (message.muted === true) {\n            writer.uint32(32).bool(message.muted);\n        }\n        if (message.width !== 0) {\n            writer.uint32(40).uint32(message.width);\n        }\n        if (message.height !== 0) {\n            writer.uint32(48).uint32(message.height);\n        }\n        if (message.simulcast === true) {\n            writer.uint32(56).bool(message.simulcast);\n        }\n        if (message.disableDtx === true) {\n            writer.uint32(64).bool(message.disableDtx);\n        }\n        if (message.source !== 0) {\n            writer.uint32(72).int32(message.source);\n        }\n        for (const v of message.layers) {\n            exports.VideoLayer.encode(v, writer.uint32(82).fork()).ldelim();\n        }\n        if (message.mimeType !== \"\") {\n            writer.uint32(90).string(message.mimeType);\n        }\n        if (message.mid !== \"\") {\n            writer.uint32(98).string(message.mid);\n        }\n        for (const v of message.codecs) {\n            exports.SimulcastCodecInfo.encode(v, writer.uint32(106).fork()).ldelim();\n        }\n        if (message.stereo === true) {\n            writer.uint32(112).bool(message.stereo);\n        }\n        if (message.disableRed === true) {\n            writer.uint32(120).bool(message.disableRed);\n        }\n        if (message.encryption !== 0) {\n            writer.uint32(128).int32(message.encryption);\n        }\n        if (message.stream !== \"\") {\n            writer.uint32(138).string(message.stream);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseTrackInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.sid = reader.string();\n                    break;\n                case 2:\n                    message.type = reader.int32();\n                    break;\n                case 3:\n                    message.name = reader.string();\n                    break;\n                case 4:\n                    message.muted = reader.bool();\n                    break;\n                case 5:\n                    message.width = reader.uint32();\n                    break;\n                case 6:\n                    message.height = reader.uint32();\n                    break;\n                case 7:\n                    message.simulcast = reader.bool();\n                    break;\n                case 8:\n                    message.disableDtx = reader.bool();\n                    break;\n                case 9:\n                    message.source = reader.int32();\n                    break;\n                case 10:\n                    message.layers.push(exports.VideoLayer.decode(reader, reader.uint32()));\n                    break;\n                case 11:\n                    message.mimeType = reader.string();\n                    break;\n                case 12:\n                    message.mid = reader.string();\n                    break;\n                case 13:\n                    message.codecs.push(exports.SimulcastCodecInfo.decode(reader, reader.uint32()));\n                    break;\n                case 14:\n                    message.stereo = reader.bool();\n                    break;\n                case 15:\n                    message.disableRed = reader.bool();\n                    break;\n                case 16:\n                    message.encryption = reader.int32();\n                    break;\n                case 17:\n                    message.stream = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            sid: isSet(object.sid) ? String(object.sid) : \"\",\n            type: isSet(object.type) ? trackTypeFromJSON(object.type) : 0,\n            name: isSet(object.name) ? String(object.name) : \"\",\n            muted: isSet(object.muted) ? Boolean(object.muted) : false,\n            width: isSet(object.width) ? Number(object.width) : 0,\n            height: isSet(object.height) ? Number(object.height) : 0,\n            simulcast: isSet(object.simulcast) ? Boolean(object.simulcast) : false,\n            disableDtx: isSet(object.disableDtx) ? Boolean(object.disableDtx) : false,\n            source: isSet(object.source) ? trackSourceFromJSON(object.source) : 0,\n            layers: Array.isArray(object === null || object === void 0 ? void 0 : object.layers) ? object.layers.map((e) => exports.VideoLayer.fromJSON(e)) : [],\n            mimeType: isSet(object.mimeType) ? String(object.mimeType) : \"\",\n            mid: isSet(object.mid) ? String(object.mid) : \"\",\n            codecs: Array.isArray(object === null || object === void 0 ? void 0 : object.codecs) ? object.codecs.map((e) => exports.SimulcastCodecInfo.fromJSON(e)) : [],\n            stereo: isSet(object.stereo) ? Boolean(object.stereo) : false,\n            disableRed: isSet(object.disableRed) ? Boolean(object.disableRed) : false,\n            encryption: isSet(object.encryption) ? encryption_TypeFromJSON(object.encryption) : 0,\n            stream: isSet(object.stream) ? String(object.stream) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.sid !== undefined && (obj.sid = message.sid);\n        message.type !== undefined && (obj.type = trackTypeToJSON(message.type));\n        message.name !== undefined && (obj.name = message.name);\n        message.muted !== undefined && (obj.muted = message.muted);\n        message.width !== undefined && (obj.width = Math.round(message.width));\n        message.height !== undefined && (obj.height = Math.round(message.height));\n        message.simulcast !== undefined && (obj.simulcast = message.simulcast);\n        message.disableDtx !== undefined && (obj.disableDtx = message.disableDtx);\n        message.source !== undefined && (obj.source = trackSourceToJSON(message.source));\n        if (message.layers) {\n            obj.layers = message.layers.map((e) => e ? exports.VideoLayer.toJSON(e) : undefined);\n        }\n        else {\n            obj.layers = [];\n        }\n        message.mimeType !== undefined && (obj.mimeType = message.mimeType);\n        message.mid !== undefined && (obj.mid = message.mid);\n        if (message.codecs) {\n            obj.codecs = message.codecs.map((e) => e ? exports.SimulcastCodecInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.codecs = [];\n        }\n        message.stereo !== undefined && (obj.stereo = message.stereo);\n        message.disableRed !== undefined && (obj.disableRed = message.disableRed);\n        message.encryption !== undefined && (obj.encryption = encryption_TypeToJSON(message.encryption));\n        message.stream !== undefined && (obj.stream = message.stream);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;\n        const message = createBaseTrackInfo();\n        message.sid = (_a = object.sid) !== null && _a !== void 0 ? _a : \"\";\n        message.type = (_b = object.type) !== null && _b !== void 0 ? _b : 0;\n        message.name = (_c = object.name) !== null && _c !== void 0 ? _c : \"\";\n        message.muted = (_d = object.muted) !== null && _d !== void 0 ? _d : false;\n        message.width = (_e = object.width) !== null && _e !== void 0 ? _e : 0;\n        message.height = (_f = object.height) !== null && _f !== void 0 ? _f : 0;\n        message.simulcast = (_g = object.simulcast) !== null && _g !== void 0 ? _g : false;\n        message.disableDtx = (_h = object.disableDtx) !== null && _h !== void 0 ? _h : false;\n        message.source = (_j = object.source) !== null && _j !== void 0 ? _j : 0;\n        message.layers = ((_k = object.layers) === null || _k === void 0 ? void 0 : _k.map((e) => exports.VideoLayer.fromPartial(e))) || [];\n        message.mimeType = (_l = object.mimeType) !== null && _l !== void 0 ? _l : \"\";\n        message.mid = (_m = object.mid) !== null && _m !== void 0 ? _m : \"\";\n        message.codecs = ((_o = object.codecs) === null || _o === void 0 ? void 0 : _o.map((e) => exports.SimulcastCodecInfo.fromPartial(e))) || [];\n        message.stereo = (_p = object.stereo) !== null && _p !== void 0 ? _p : false;\n        message.disableRed = (_q = object.disableRed) !== null && _q !== void 0 ? _q : false;\n        message.encryption = (_r = object.encryption) !== null && _r !== void 0 ? _r : 0;\n        message.stream = (_s = object.stream) !== null && _s !== void 0 ? _s : \"\";\n        return message;\n    },\n};\nfunction createBaseVideoLayer() {\n    return { quality: 0, width: 0, height: 0, bitrate: 0, ssrc: 0 };\n}\nexports.VideoLayer = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.quality !== 0) {\n            writer.uint32(8).int32(message.quality);\n        }\n        if (message.width !== 0) {\n            writer.uint32(16).uint32(message.width);\n        }\n        if (message.height !== 0) {\n            writer.uint32(24).uint32(message.height);\n        }\n        if (message.bitrate !== 0) {\n            writer.uint32(32).uint32(message.bitrate);\n        }\n        if (message.ssrc !== 0) {\n            writer.uint32(40).uint32(message.ssrc);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseVideoLayer();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.quality = reader.int32();\n                    break;\n                case 2:\n                    message.width = reader.uint32();\n                    break;\n                case 3:\n                    message.height = reader.uint32();\n                    break;\n                case 4:\n                    message.bitrate = reader.uint32();\n                    break;\n                case 5:\n                    message.ssrc = reader.uint32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            quality: isSet(object.quality) ? videoQualityFromJSON(object.quality) : 0,\n            width: isSet(object.width) ? Number(object.width) : 0,\n            height: isSet(object.height) ? Number(object.height) : 0,\n            bitrate: isSet(object.bitrate) ? Number(object.bitrate) : 0,\n            ssrc: isSet(object.ssrc) ? Number(object.ssrc) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.quality !== undefined && (obj.quality = videoQualityToJSON(message.quality));\n        message.width !== undefined && (obj.width = Math.round(message.width));\n        message.height !== undefined && (obj.height = Math.round(message.height));\n        message.bitrate !== undefined && (obj.bitrate = Math.round(message.bitrate));\n        message.ssrc !== undefined && (obj.ssrc = Math.round(message.ssrc));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e;\n        const message = createBaseVideoLayer();\n        message.quality = (_a = object.quality) !== null && _a !== void 0 ? _a : 0;\n        message.width = (_b = object.width) !== null && _b !== void 0 ? _b : 0;\n        message.height = (_c = object.height) !== null && _c !== void 0 ? _c : 0;\n        message.bitrate = (_d = object.bitrate) !== null && _d !== void 0 ? _d : 0;\n        message.ssrc = (_e = object.ssrc) !== null && _e !== void 0 ? _e : 0;\n        return message;\n    },\n};\nfunction createBaseDataPacket() {\n    return { kind: 0, user: undefined, speaker: undefined };\n}\nexports.DataPacket = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.kind !== 0) {\n            writer.uint32(8).int32(message.kind);\n        }\n        if (message.user !== undefined) {\n            exports.UserPacket.encode(message.user, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.speaker !== undefined) {\n            exports.ActiveSpeakerUpdate.encode(message.speaker, writer.uint32(26).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseDataPacket();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.kind = reader.int32();\n                    break;\n                case 2:\n                    message.user = exports.UserPacket.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.speaker = exports.ActiveSpeakerUpdate.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            kind: isSet(object.kind) ? dataPacket_KindFromJSON(object.kind) : 0,\n            user: isSet(object.user) ? exports.UserPacket.fromJSON(object.user) : undefined,\n            speaker: isSet(object.speaker) ? exports.ActiveSpeakerUpdate.fromJSON(object.speaker) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.kind !== undefined && (obj.kind = dataPacket_KindToJSON(message.kind));\n        message.user !== undefined && (obj.user = message.user ? exports.UserPacket.toJSON(message.user) : undefined);\n        message.speaker !== undefined &&\n            (obj.speaker = message.speaker ? exports.ActiveSpeakerUpdate.toJSON(message.speaker) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseDataPacket();\n        message.kind = (_a = object.kind) !== null && _a !== void 0 ? _a : 0;\n        message.user = (object.user !== undefined && object.user !== null)\n            ? exports.UserPacket.fromPartial(object.user)\n            : undefined;\n        message.speaker = (object.speaker !== undefined && object.speaker !== null)\n            ? exports.ActiveSpeakerUpdate.fromPartial(object.speaker)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseActiveSpeakerUpdate() {\n    return { speakers: [] };\n}\nexports.ActiveSpeakerUpdate = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        for (const v of message.speakers) {\n            exports.SpeakerInfo.encode(v, writer.uint32(10).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseActiveSpeakerUpdate();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.speakers.push(exports.SpeakerInfo.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            speakers: Array.isArray(object === null || object === void 0 ? void 0 : object.speakers) ? object.speakers.map((e) => exports.SpeakerInfo.fromJSON(e)) : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.speakers) {\n            obj.speakers = message.speakers.map((e) => e ? exports.SpeakerInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.speakers = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseActiveSpeakerUpdate();\n        message.speakers = ((_a = object.speakers) === null || _a === void 0 ? void 0 : _a.map((e) => exports.SpeakerInfo.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseSpeakerInfo() {\n    return { sid: \"\", level: 0, active: false };\n}\nexports.SpeakerInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.sid !== \"\") {\n            writer.uint32(10).string(message.sid);\n        }\n        if (message.level !== 0) {\n            writer.uint32(21).float(message.level);\n        }\n        if (message.active === true) {\n            writer.uint32(24).bool(message.active);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseSpeakerInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.sid = reader.string();\n                    break;\n                case 2:\n                    message.level = reader.float();\n                    break;\n                case 3:\n                    message.active = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            sid: isSet(object.sid) ? String(object.sid) : \"\",\n            level: isSet(object.level) ? Number(object.level) : 0,\n            active: isSet(object.active) ? Boolean(object.active) : false,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.sid !== undefined && (obj.sid = message.sid);\n        message.level !== undefined && (obj.level = message.level);\n        message.active !== undefined && (obj.active = message.active);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c;\n        const message = createBaseSpeakerInfo();\n        message.sid = (_a = object.sid) !== null && _a !== void 0 ? _a : \"\";\n        message.level = (_b = object.level) !== null && _b !== void 0 ? _b : 0;\n        message.active = (_c = object.active) !== null && _c !== void 0 ? _c : false;\n        return message;\n    },\n};\nfunction createBaseUserPacket() {\n    return {\n        participantSid: \"\",\n        participantIdentity: \"\",\n        payload: new Uint8Array(),\n        destinationSids: [],\n        destinationIdentities: [],\n        topic: undefined,\n    };\n}\nexports.UserPacket = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.participantSid !== \"\") {\n            writer.uint32(10).string(message.participantSid);\n        }\n        if (message.participantIdentity !== \"\") {\n            writer.uint32(42).string(message.participantIdentity);\n        }\n        if (message.payload.length !== 0) {\n            writer.uint32(18).bytes(message.payload);\n        }\n        for (const v of message.destinationSids) {\n            writer.uint32(26).string(v);\n        }\n        for (const v of message.destinationIdentities) {\n            writer.uint32(50).string(v);\n        }\n        if (message.topic !== undefined) {\n            writer.uint32(34).string(message.topic);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseUserPacket();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.participantSid = reader.string();\n                    break;\n                case 5:\n                    message.participantIdentity = reader.string();\n                    break;\n                case 2:\n                    message.payload = reader.bytes();\n                    break;\n                case 3:\n                    message.destinationSids.push(reader.string());\n                    break;\n                case 6:\n                    message.destinationIdentities.push(reader.string());\n                    break;\n                case 4:\n                    message.topic = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            participantSid: isSet(object.participantSid) ? String(object.participantSid) : \"\",\n            participantIdentity: isSet(object.participantIdentity) ? String(object.participantIdentity) : \"\",\n            payload: isSet(object.payload) ? bytesFromBase64(object.payload) : new Uint8Array(),\n            destinationSids: Array.isArray(object === null || object === void 0 ? void 0 : object.destinationSids) ? object.destinationSids.map((e) => String(e)) : [],\n            destinationIdentities: Array.isArray(object === null || object === void 0 ? void 0 : object.destinationIdentities)\n                ? object.destinationIdentities.map((e) => String(e))\n                : [],\n            topic: isSet(object.topic) ? String(object.topic) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.participantSid !== undefined && (obj.participantSid = message.participantSid);\n        message.participantIdentity !== undefined && (obj.participantIdentity = message.participantIdentity);\n        message.payload !== undefined &&\n            (obj.payload = base64FromBytes(message.payload !== undefined ? message.payload : new Uint8Array()));\n        if (message.destinationSids) {\n            obj.destinationSids = message.destinationSids.map((e) => e);\n        }\n        else {\n            obj.destinationSids = [];\n        }\n        if (message.destinationIdentities) {\n            obj.destinationIdentities = message.destinationIdentities.map((e) => e);\n        }\n        else {\n            obj.destinationIdentities = [];\n        }\n        message.topic !== undefined && (obj.topic = message.topic);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f;\n        const message = createBaseUserPacket();\n        message.participantSid = (_a = object.participantSid) !== null && _a !== void 0 ? _a : \"\";\n        message.participantIdentity = (_b = object.participantIdentity) !== null && _b !== void 0 ? _b : \"\";\n        message.payload = (_c = object.payload) !== null && _c !== void 0 ? _c : new Uint8Array();\n        message.destinationSids = ((_d = object.destinationSids) === null || _d === void 0 ? void 0 : _d.map((e) => e)) || [];\n        message.destinationIdentities = ((_e = object.destinationIdentities) === null || _e === void 0 ? void 0 : _e.map((e) => e)) || [];\n        message.topic = (_f = object.topic) !== null && _f !== void 0 ? _f : undefined;\n        return message;\n    },\n};\nfunction createBaseParticipantTracks() {\n    return { participantSid: \"\", trackSids: [] };\n}\nexports.ParticipantTracks = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.participantSid !== \"\") {\n            writer.uint32(10).string(message.participantSid);\n        }\n        for (const v of message.trackSids) {\n            writer.uint32(18).string(v);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseParticipantTracks();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.participantSid = reader.string();\n                    break;\n                case 2:\n                    message.trackSids.push(reader.string());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            participantSid: isSet(object.participantSid) ? String(object.participantSid) : \"\",\n            trackSids: Array.isArray(object === null || object === void 0 ? void 0 : object.trackSids) ? object.trackSids.map((e) => String(e)) : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.participantSid !== undefined && (obj.participantSid = message.participantSid);\n        if (message.trackSids) {\n            obj.trackSids = message.trackSids.map((e) => e);\n        }\n        else {\n            obj.trackSids = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseParticipantTracks();\n        message.participantSid = (_a = object.participantSid) !== null && _a !== void 0 ? _a : \"\";\n        message.trackSids = ((_b = object.trackSids) === null || _b === void 0 ? void 0 : _b.map((e) => e)) || [];\n        return message;\n    },\n};\nfunction createBaseServerInfo() {\n    return { edition: 0, version: \"\", protocol: 0, region: \"\", nodeId: \"\", debugInfo: \"\" };\n}\nexports.ServerInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.edition !== 0) {\n            writer.uint32(8).int32(message.edition);\n        }\n        if (message.version !== \"\") {\n            writer.uint32(18).string(message.version);\n        }\n        if (message.protocol !== 0) {\n            writer.uint32(24).int32(message.protocol);\n        }\n        if (message.region !== \"\") {\n            writer.uint32(34).string(message.region);\n        }\n        if (message.nodeId !== \"\") {\n            writer.uint32(42).string(message.nodeId);\n        }\n        if (message.debugInfo !== \"\") {\n            writer.uint32(50).string(message.debugInfo);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseServerInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.edition = reader.int32();\n                    break;\n                case 2:\n                    message.version = reader.string();\n                    break;\n                case 3:\n                    message.protocol = reader.int32();\n                    break;\n                case 4:\n                    message.region = reader.string();\n                    break;\n                case 5:\n                    message.nodeId = reader.string();\n                    break;\n                case 6:\n                    message.debugInfo = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            edition: isSet(object.edition) ? serverInfo_EditionFromJSON(object.edition) : 0,\n            version: isSet(object.version) ? String(object.version) : \"\",\n            protocol: isSet(object.protocol) ? Number(object.protocol) : 0,\n            region: isSet(object.region) ? String(object.region) : \"\",\n            nodeId: isSet(object.nodeId) ? String(object.nodeId) : \"\",\n            debugInfo: isSet(object.debugInfo) ? String(object.debugInfo) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.edition !== undefined && (obj.edition = serverInfo_EditionToJSON(message.edition));\n        message.version !== undefined && (obj.version = message.version);\n        message.protocol !== undefined && (obj.protocol = Math.round(message.protocol));\n        message.region !== undefined && (obj.region = message.region);\n        message.nodeId !== undefined && (obj.nodeId = message.nodeId);\n        message.debugInfo !== undefined && (obj.debugInfo = message.debugInfo);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f;\n        const message = createBaseServerInfo();\n        message.edition = (_a = object.edition) !== null && _a !== void 0 ? _a : 0;\n        message.version = (_b = object.version) !== null && _b !== void 0 ? _b : \"\";\n        message.protocol = (_c = object.protocol) !== null && _c !== void 0 ? _c : 0;\n        message.region = (_d = object.region) !== null && _d !== void 0 ? _d : \"\";\n        message.nodeId = (_e = object.nodeId) !== null && _e !== void 0 ? _e : \"\";\n        message.debugInfo = (_f = object.debugInfo) !== null && _f !== void 0 ? _f : \"\";\n        return message;\n    },\n};\nfunction createBaseClientInfo() {\n    return {\n        sdk: 0,\n        version: \"\",\n        protocol: 0,\n        os: \"\",\n        osVersion: \"\",\n        deviceModel: \"\",\n        browser: \"\",\n        browserVersion: \"\",\n        address: \"\",\n        network: \"\",\n    };\n}\nexports.ClientInfo = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.sdk !== 0) {\n            writer.uint32(8).int32(message.sdk);\n        }\n        if (message.version !== \"\") {\n            writer.uint32(18).string(message.version);\n        }\n        if (message.protocol !== 0) {\n            writer.uint32(24).int32(message.protocol);\n        }\n        if (message.os !== \"\") {\n            writer.uint32(34).string(message.os);\n        }\n        if (message.osVersion !== \"\") {\n            writer.uint32(42).string(message.osVersion);\n        }\n        if (message.deviceModel !== \"\") {\n            writer.uint32(50).string(message.deviceModel);\n        }\n        if (message.browser !== \"\") {\n            writer.uint32(58).string(message.browser);\n        }\n        if (message.browserVersion !== \"\") {\n            writer.uint32(66).string(message.browserVersion);\n        }\n        if (message.address !== \"\") {\n            writer.uint32(74).string(message.address);\n        }\n        if (message.network !== \"\") {\n            writer.uint32(82).string(message.network);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseClientInfo();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.sdk = reader.int32();\n                    break;\n                case 2:\n                    message.version = reader.string();\n                    break;\n                case 3:\n                    message.protocol = reader.int32();\n                    break;\n                case 4:\n                    message.os = reader.string();\n                    break;\n                case 5:\n                    message.osVersion = reader.string();\n                    break;\n                case 6:\n                    message.deviceModel = reader.string();\n                    break;\n                case 7:\n                    message.browser = reader.string();\n                    break;\n                case 8:\n                    message.browserVersion = reader.string();\n                    break;\n                case 9:\n                    message.address = reader.string();\n                    break;\n                case 10:\n                    message.network = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            sdk: isSet(object.sdk) ? clientInfo_SDKFromJSON(object.sdk) : 0,\n            version: isSet(object.version) ? String(object.version) : \"\",\n            protocol: isSet(object.protocol) ? Number(object.protocol) : 0,\n            os: isSet(object.os) ? String(object.os) : \"\",\n            osVersion: isSet(object.osVersion) ? String(object.osVersion) : \"\",\n            deviceModel: isSet(object.deviceModel) ? String(object.deviceModel) : \"\",\n            browser: isSet(object.browser) ? String(object.browser) : \"\",\n            browserVersion: isSet(object.browserVersion) ? String(object.browserVersion) : \"\",\n            address: isSet(object.address) ? String(object.address) : \"\",\n            network: isSet(object.network) ? String(object.network) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.sdk !== undefined && (obj.sdk = clientInfo_SDKToJSON(message.sdk));\n        message.version !== undefined && (obj.version = message.version);\n        message.protocol !== undefined && (obj.protocol = Math.round(message.protocol));\n        message.os !== undefined && (obj.os = message.os);\n        message.osVersion !== undefined && (obj.osVersion = message.osVersion);\n        message.deviceModel !== undefined && (obj.deviceModel = message.deviceModel);\n        message.browser !== undefined && (obj.browser = message.browser);\n        message.browserVersion !== undefined && (obj.browserVersion = message.browserVersion);\n        message.address !== undefined && (obj.address = message.address);\n        message.network !== undefined && (obj.network = message.network);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        const message = createBaseClientInfo();\n        message.sdk = (_a = object.sdk) !== null && _a !== void 0 ? _a : 0;\n        message.version = (_b = object.version) !== null && _b !== void 0 ? _b : \"\";\n        message.protocol = (_c = object.protocol) !== null && _c !== void 0 ? _c : 0;\n        message.os = (_d = object.os) !== null && _d !== void 0 ? _d : \"\";\n        message.osVersion = (_e = object.osVersion) !== null && _e !== void 0 ? _e : \"\";\n        message.deviceModel = (_f = object.deviceModel) !== null && _f !== void 0 ? _f : \"\";\n        message.browser = (_g = object.browser) !== null && _g !== void 0 ? _g : \"\";\n        message.browserVersion = (_h = object.browserVersion) !== null && _h !== void 0 ? _h : \"\";\n        message.address = (_j = object.address) !== null && _j !== void 0 ? _j : \"\";\n        message.network = (_k = object.network) !== null && _k !== void 0 ? _k : \"\";\n        return message;\n    },\n};\nfunction createBaseClientConfiguration() {\n    return { video: undefined, screen: undefined, resumeConnection: 0, disabledCodecs: undefined, forceRelay: 0 };\n}\nexports.ClientConfiguration = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.video !== undefined) {\n            exports.VideoConfiguration.encode(message.video, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.screen !== undefined) {\n            exports.VideoConfiguration.encode(message.screen, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.resumeConnection !== 0) {\n            writer.uint32(24).int32(message.resumeConnection);\n        }\n        if (message.disabledCodecs !== undefined) {\n            exports.DisabledCodecs.encode(message.disabledCodecs, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.forceRelay !== 0) {\n            writer.uint32(40).int32(message.forceRelay);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseClientConfiguration();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.video = exports.VideoConfiguration.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.screen = exports.VideoConfiguration.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.resumeConnection = reader.int32();\n                    break;\n                case 4:\n                    message.disabledCodecs = exports.DisabledCodecs.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.forceRelay = reader.int32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            video: isSet(object.video) ? exports.VideoConfiguration.fromJSON(object.video) : undefined,\n            screen: isSet(object.screen) ? exports.VideoConfiguration.fromJSON(object.screen) : undefined,\n            resumeConnection: isSet(object.resumeConnection) ? clientConfigSettingFromJSON(object.resumeConnection) : 0,\n            disabledCodecs: isSet(object.disabledCodecs) ? exports.DisabledCodecs.fromJSON(object.disabledCodecs) : undefined,\n            forceRelay: isSet(object.forceRelay) ? clientConfigSettingFromJSON(object.forceRelay) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.video !== undefined && (obj.video = message.video ? exports.VideoConfiguration.toJSON(message.video) : undefined);\n        message.screen !== undefined &&\n            (obj.screen = message.screen ? exports.VideoConfiguration.toJSON(message.screen) : undefined);\n        message.resumeConnection !== undefined &&\n            (obj.resumeConnection = clientConfigSettingToJSON(message.resumeConnection));\n        message.disabledCodecs !== undefined &&\n            (obj.disabledCodecs = message.disabledCodecs ? exports.DisabledCodecs.toJSON(message.disabledCodecs) : undefined);\n        message.forceRelay !== undefined && (obj.forceRelay = clientConfigSettingToJSON(message.forceRelay));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseClientConfiguration();\n        message.video = (object.video !== undefined && object.video !== null)\n            ? exports.VideoConfiguration.fromPartial(object.video)\n            : undefined;\n        message.screen = (object.screen !== undefined && object.screen !== null)\n            ? exports.VideoConfiguration.fromPartial(object.screen)\n            : undefined;\n        message.resumeConnection = (_a = object.resumeConnection) !== null && _a !== void 0 ? _a : 0;\n        message.disabledCodecs = (object.disabledCodecs !== undefined && object.disabledCodecs !== null)\n            ? exports.DisabledCodecs.fromPartial(object.disabledCodecs)\n            : undefined;\n        message.forceRelay = (_b = object.forceRelay) !== null && _b !== void 0 ? _b : 0;\n        return message;\n    },\n};\nfunction createBaseVideoConfiguration() {\n    return { hardwareEncoder: 0 };\n}\nexports.VideoConfiguration = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.hardwareEncoder !== 0) {\n            writer.uint32(8).int32(message.hardwareEncoder);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseVideoConfiguration();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.hardwareEncoder = reader.int32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { hardwareEncoder: isSet(object.hardwareEncoder) ? clientConfigSettingFromJSON(object.hardwareEncoder) : 0 };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.hardwareEncoder !== undefined && (obj.hardwareEncoder = clientConfigSettingToJSON(message.hardwareEncoder));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseVideoConfiguration();\n        message.hardwareEncoder = (_a = object.hardwareEncoder) !== null && _a !== void 0 ? _a : 0;\n        return message;\n    },\n};\nfunction createBaseDisabledCodecs() {\n    return { codecs: [], publish: [] };\n}\nexports.DisabledCodecs = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        for (const v of message.codecs) {\n            exports.Codec.encode(v, writer.uint32(10).fork()).ldelim();\n        }\n        for (const v of message.publish) {\n            exports.Codec.encode(v, writer.uint32(18).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseDisabledCodecs();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.codecs.push(exports.Codec.decode(reader, reader.uint32()));\n                    break;\n                case 2:\n                    message.publish.push(exports.Codec.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            codecs: Array.isArray(object === null || object === void 0 ? void 0 : object.codecs) ? object.codecs.map((e) => exports.Codec.fromJSON(e)) : [],\n            publish: Array.isArray(object === null || object === void 0 ? void 0 : object.publish) ? object.publish.map((e) => exports.Codec.fromJSON(e)) : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.codecs) {\n            obj.codecs = message.codecs.map((e) => e ? exports.Codec.toJSON(e) : undefined);\n        }\n        else {\n            obj.codecs = [];\n        }\n        if (message.publish) {\n            obj.publish = message.publish.map((e) => e ? exports.Codec.toJSON(e) : undefined);\n        }\n        else {\n            obj.publish = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseDisabledCodecs();\n        message.codecs = ((_a = object.codecs) === null || _a === void 0 ? void 0 : _a.map((e) => exports.Codec.fromPartial(e))) || [];\n        message.publish = ((_b = object.publish) === null || _b === void 0 ? void 0 : _b.map((e) => exports.Codec.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseRTPDrift() {\n    return {\n        startTime: undefined,\n        endTime: undefined,\n        duration: 0,\n        startTimestamp: 0,\n        endTimestamp: 0,\n        rtpClockTicks: 0,\n        driftSamples: 0,\n        driftMs: 0,\n        clockRate: 0,\n    };\n}\nexports.RTPDrift = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.startTime !== undefined) {\n            timestamp_1.Timestamp.encode(toTimestamp(message.startTime), writer.uint32(10).fork()).ldelim();\n        }\n        if (message.endTime !== undefined) {\n            timestamp_1.Timestamp.encode(toTimestamp(message.endTime), writer.uint32(18).fork()).ldelim();\n        }\n        if (message.duration !== 0) {\n            writer.uint32(25).double(message.duration);\n        }\n        if (message.startTimestamp !== 0) {\n            writer.uint32(32).uint64(message.startTimestamp);\n        }\n        if (message.endTimestamp !== 0) {\n            writer.uint32(40).uint64(message.endTimestamp);\n        }\n        if (message.rtpClockTicks !== 0) {\n            writer.uint32(48).uint64(message.rtpClockTicks);\n        }\n        if (message.driftSamples !== 0) {\n            writer.uint32(56).int64(message.driftSamples);\n        }\n        if (message.driftMs !== 0) {\n            writer.uint32(65).double(message.driftMs);\n        }\n        if (message.clockRate !== 0) {\n            writer.uint32(73).double(message.clockRate);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseRTPDrift();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.startTime = fromTimestamp(timestamp_1.Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 2:\n                    message.endTime = fromTimestamp(timestamp_1.Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 3:\n                    message.duration = reader.double();\n                    break;\n                case 4:\n                    message.startTimestamp = longToNumber(reader.uint64());\n                    break;\n                case 5:\n                    message.endTimestamp = longToNumber(reader.uint64());\n                    break;\n                case 6:\n                    message.rtpClockTicks = longToNumber(reader.uint64());\n                    break;\n                case 7:\n                    message.driftSamples = longToNumber(reader.int64());\n                    break;\n                case 8:\n                    message.driftMs = reader.double();\n                    break;\n                case 9:\n                    message.clockRate = reader.double();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            startTime: isSet(object.startTime) ? fromJsonTimestamp(object.startTime) : undefined,\n            endTime: isSet(object.endTime) ? fromJsonTimestamp(object.endTime) : undefined,\n            duration: isSet(object.duration) ? Number(object.duration) : 0,\n            startTimestamp: isSet(object.startTimestamp) ? Number(object.startTimestamp) : 0,\n            endTimestamp: isSet(object.endTimestamp) ? Number(object.endTimestamp) : 0,\n            rtpClockTicks: isSet(object.rtpClockTicks) ? Number(object.rtpClockTicks) : 0,\n            driftSamples: isSet(object.driftSamples) ? Number(object.driftSamples) : 0,\n            driftMs: isSet(object.driftMs) ? Number(object.driftMs) : 0,\n            clockRate: isSet(object.clockRate) ? Number(object.clockRate) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.startTime !== undefined && (obj.startTime = message.startTime.toISOString());\n        message.endTime !== undefined && (obj.endTime = message.endTime.toISOString());\n        message.duration !== undefined && (obj.duration = message.duration);\n        message.startTimestamp !== undefined && (obj.startTimestamp = Math.round(message.startTimestamp));\n        message.endTimestamp !== undefined && (obj.endTimestamp = Math.round(message.endTimestamp));\n        message.rtpClockTicks !== undefined && (obj.rtpClockTicks = Math.round(message.rtpClockTicks));\n        message.driftSamples !== undefined && (obj.driftSamples = Math.round(message.driftSamples));\n        message.driftMs !== undefined && (obj.driftMs = message.driftMs);\n        message.clockRate !== undefined && (obj.clockRate = message.clockRate);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        const message = createBaseRTPDrift();\n        message.startTime = (_a = object.startTime) !== null && _a !== void 0 ? _a : undefined;\n        message.endTime = (_b = object.endTime) !== null && _b !== void 0 ? _b : undefined;\n        message.duration = (_c = object.duration) !== null && _c !== void 0 ? _c : 0;\n        message.startTimestamp = (_d = object.startTimestamp) !== null && _d !== void 0 ? _d : 0;\n        message.endTimestamp = (_e = object.endTimestamp) !== null && _e !== void 0 ? _e : 0;\n        message.rtpClockTicks = (_f = object.rtpClockTicks) !== null && _f !== void 0 ? _f : 0;\n        message.driftSamples = (_g = object.driftSamples) !== null && _g !== void 0 ? _g : 0;\n        message.driftMs = (_h = object.driftMs) !== null && _h !== void 0 ? _h : 0;\n        message.clockRate = (_j = object.clockRate) !== null && _j !== void 0 ? _j : 0;\n        return message;\n    },\n};\nfunction createBaseRTPStats() {\n    return {\n        startTime: undefined,\n        endTime: undefined,\n        duration: 0,\n        packets: 0,\n        packetRate: 0,\n        bytes: 0,\n        headerBytes: 0,\n        bitrate: 0,\n        packetsLost: 0,\n        packetLossRate: 0,\n        packetLossPercentage: 0,\n        packetsDuplicate: 0,\n        packetDuplicateRate: 0,\n        bytesDuplicate: 0,\n        headerBytesDuplicate: 0,\n        bitrateDuplicate: 0,\n        packetsPadding: 0,\n        packetPaddingRate: 0,\n        bytesPadding: 0,\n        headerBytesPadding: 0,\n        bitratePadding: 0,\n        packetsOutOfOrder: 0,\n        frames: 0,\n        frameRate: 0,\n        jitterCurrent: 0,\n        jitterMax: 0,\n        gapHistogram: {},\n        nacks: 0,\n        nackAcks: 0,\n        nackMisses: 0,\n        nackRepeated: 0,\n        plis: 0,\n        lastPli: undefined,\n        firs: 0,\n        lastFir: undefined,\n        rttCurrent: 0,\n        rttMax: 0,\n        keyFrames: 0,\n        lastKeyFrame: undefined,\n        layerLockPlis: 0,\n        lastLayerLockPli: undefined,\n        packetDrift: undefined,\n        reportDrift: undefined,\n    };\n}\nexports.RTPStats = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.startTime !== undefined) {\n            timestamp_1.Timestamp.encode(toTimestamp(message.startTime), writer.uint32(10).fork()).ldelim();\n        }\n        if (message.endTime !== undefined) {\n            timestamp_1.Timestamp.encode(toTimestamp(message.endTime), writer.uint32(18).fork()).ldelim();\n        }\n        if (message.duration !== 0) {\n            writer.uint32(25).double(message.duration);\n        }\n        if (message.packets !== 0) {\n            writer.uint32(32).uint32(message.packets);\n        }\n        if (message.packetRate !== 0) {\n            writer.uint32(41).double(message.packetRate);\n        }\n        if (message.bytes !== 0) {\n            writer.uint32(48).uint64(message.bytes);\n        }\n        if (message.headerBytes !== 0) {\n            writer.uint32(312).uint64(message.headerBytes);\n        }\n        if (message.bitrate !== 0) {\n            writer.uint32(57).double(message.bitrate);\n        }\n        if (message.packetsLost !== 0) {\n            writer.uint32(64).uint32(message.packetsLost);\n        }\n        if (message.packetLossRate !== 0) {\n            writer.uint32(73).double(message.packetLossRate);\n        }\n        if (message.packetLossPercentage !== 0) {\n            writer.uint32(85).float(message.packetLossPercentage);\n        }\n        if (message.packetsDuplicate !== 0) {\n            writer.uint32(88).uint32(message.packetsDuplicate);\n        }\n        if (message.packetDuplicateRate !== 0) {\n            writer.uint32(97).double(message.packetDuplicateRate);\n        }\n        if (message.bytesDuplicate !== 0) {\n            writer.uint32(104).uint64(message.bytesDuplicate);\n        }\n        if (message.headerBytesDuplicate !== 0) {\n            writer.uint32(320).uint64(message.headerBytesDuplicate);\n        }\n        if (message.bitrateDuplicate !== 0) {\n            writer.uint32(113).double(message.bitrateDuplicate);\n        }\n        if (message.packetsPadding !== 0) {\n            writer.uint32(120).uint32(message.packetsPadding);\n        }\n        if (message.packetPaddingRate !== 0) {\n            writer.uint32(129).double(message.packetPaddingRate);\n        }\n        if (message.bytesPadding !== 0) {\n            writer.uint32(136).uint64(message.bytesPadding);\n        }\n        if (message.headerBytesPadding !== 0) {\n            writer.uint32(328).uint64(message.headerBytesPadding);\n        }\n        if (message.bitratePadding !== 0) {\n            writer.uint32(145).double(message.bitratePadding);\n        }\n        if (message.packetsOutOfOrder !== 0) {\n            writer.uint32(152).uint32(message.packetsOutOfOrder);\n        }\n        if (message.frames !== 0) {\n            writer.uint32(160).uint32(message.frames);\n        }\n        if (message.frameRate !== 0) {\n            writer.uint32(169).double(message.frameRate);\n        }\n        if (message.jitterCurrent !== 0) {\n            writer.uint32(177).double(message.jitterCurrent);\n        }\n        if (message.jitterMax !== 0) {\n            writer.uint32(185).double(message.jitterMax);\n        }\n        Object.entries(message.gapHistogram).forEach(([key, value]) => {\n            exports.RTPStats_GapHistogramEntry.encode({ key: key, value }, writer.uint32(194).fork()).ldelim();\n        });\n        if (message.nacks !== 0) {\n            writer.uint32(200).uint32(message.nacks);\n        }\n        if (message.nackAcks !== 0) {\n            writer.uint32(296).uint32(message.nackAcks);\n        }\n        if (message.nackMisses !== 0) {\n            writer.uint32(208).uint32(message.nackMisses);\n        }\n        if (message.nackRepeated !== 0) {\n            writer.uint32(304).uint32(message.nackRepeated);\n        }\n        if (message.plis !== 0) {\n            writer.uint32(216).uint32(message.plis);\n        }\n        if (message.lastPli !== undefined) {\n            timestamp_1.Timestamp.encode(toTimestamp(message.lastPli), writer.uint32(226).fork()).ldelim();\n        }\n        if (message.firs !== 0) {\n            writer.uint32(232).uint32(message.firs);\n        }\n        if (message.lastFir !== undefined) {\n            timestamp_1.Timestamp.encode(toTimestamp(message.lastFir), writer.uint32(242).fork()).ldelim();\n        }\n        if (message.rttCurrent !== 0) {\n            writer.uint32(248).uint32(message.rttCurrent);\n        }\n        if (message.rttMax !== 0) {\n            writer.uint32(256).uint32(message.rttMax);\n        }\n        if (message.keyFrames !== 0) {\n            writer.uint32(264).uint32(message.keyFrames);\n        }\n        if (message.lastKeyFrame !== undefined) {\n            timestamp_1.Timestamp.encode(toTimestamp(message.lastKeyFrame), writer.uint32(274).fork()).ldelim();\n        }\n        if (message.layerLockPlis !== 0) {\n            writer.uint32(280).uint32(message.layerLockPlis);\n        }\n        if (message.lastLayerLockPli !== undefined) {\n            timestamp_1.Timestamp.encode(toTimestamp(message.lastLayerLockPli), writer.uint32(290).fork()).ldelim();\n        }\n        if (message.packetDrift !== undefined) {\n            exports.RTPDrift.encode(message.packetDrift, writer.uint32(354).fork()).ldelim();\n        }\n        if (message.reportDrift !== undefined) {\n            exports.RTPDrift.encode(message.reportDrift, writer.uint32(362).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseRTPStats();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.startTime = fromTimestamp(timestamp_1.Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 2:\n                    message.endTime = fromTimestamp(timestamp_1.Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 3:\n                    message.duration = reader.double();\n                    break;\n                case 4:\n                    message.packets = reader.uint32();\n                    break;\n                case 5:\n                    message.packetRate = reader.double();\n                    break;\n                case 6:\n                    message.bytes = longToNumber(reader.uint64());\n                    break;\n                case 39:\n                    message.headerBytes = longToNumber(reader.uint64());\n                    break;\n                case 7:\n                    message.bitrate = reader.double();\n                    break;\n                case 8:\n                    message.packetsLost = reader.uint32();\n                    break;\n                case 9:\n                    message.packetLossRate = reader.double();\n                    break;\n                case 10:\n                    message.packetLossPercentage = reader.float();\n                    break;\n                case 11:\n                    message.packetsDuplicate = reader.uint32();\n                    break;\n                case 12:\n                    message.packetDuplicateRate = reader.double();\n                    break;\n                case 13:\n                    message.bytesDuplicate = longToNumber(reader.uint64());\n                    break;\n                case 40:\n                    message.headerBytesDuplicate = longToNumber(reader.uint64());\n                    break;\n                case 14:\n                    message.bitrateDuplicate = reader.double();\n                    break;\n                case 15:\n                    message.packetsPadding = reader.uint32();\n                    break;\n                case 16:\n                    message.packetPaddingRate = reader.double();\n                    break;\n                case 17:\n                    message.bytesPadding = longToNumber(reader.uint64());\n                    break;\n                case 41:\n                    message.headerBytesPadding = longToNumber(reader.uint64());\n                    break;\n                case 18:\n                    message.bitratePadding = reader.double();\n                    break;\n                case 19:\n                    message.packetsOutOfOrder = reader.uint32();\n                    break;\n                case 20:\n                    message.frames = reader.uint32();\n                    break;\n                case 21:\n                    message.frameRate = reader.double();\n                    break;\n                case 22:\n                    message.jitterCurrent = reader.double();\n                    break;\n                case 23:\n                    message.jitterMax = reader.double();\n                    break;\n                case 24:\n                    const entry24 = exports.RTPStats_GapHistogramEntry.decode(reader, reader.uint32());\n                    if (entry24.value !== undefined) {\n                        message.gapHistogram[entry24.key] = entry24.value;\n                    }\n                    break;\n                case 25:\n                    message.nacks = reader.uint32();\n                    break;\n                case 37:\n                    message.nackAcks = reader.uint32();\n                    break;\n                case 26:\n                    message.nackMisses = reader.uint32();\n                    break;\n                case 38:\n                    message.nackRepeated = reader.uint32();\n                    break;\n                case 27:\n                    message.plis = reader.uint32();\n                    break;\n                case 28:\n                    message.lastPli = fromTimestamp(timestamp_1.Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 29:\n                    message.firs = reader.uint32();\n                    break;\n                case 30:\n                    message.lastFir = fromTimestamp(timestamp_1.Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 31:\n                    message.rttCurrent = reader.uint32();\n                    break;\n                case 32:\n                    message.rttMax = reader.uint32();\n                    break;\n                case 33:\n                    message.keyFrames = reader.uint32();\n                    break;\n                case 34:\n                    message.lastKeyFrame = fromTimestamp(timestamp_1.Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 35:\n                    message.layerLockPlis = reader.uint32();\n                    break;\n                case 36:\n                    message.lastLayerLockPli = fromTimestamp(timestamp_1.Timestamp.decode(reader, reader.uint32()));\n                    break;\n                case 44:\n                    message.packetDrift = exports.RTPDrift.decode(reader, reader.uint32());\n                    break;\n                case 45:\n                    message.reportDrift = exports.RTPDrift.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            startTime: isSet(object.startTime) ? fromJsonTimestamp(object.startTime) : undefined,\n            endTime: isSet(object.endTime) ? fromJsonTimestamp(object.endTime) : undefined,\n            duration: isSet(object.duration) ? Number(object.duration) : 0,\n            packets: isSet(object.packets) ? Number(object.packets) : 0,\n            packetRate: isSet(object.packetRate) ? Number(object.packetRate) : 0,\n            bytes: isSet(object.bytes) ? Number(object.bytes) : 0,\n            headerBytes: isSet(object.headerBytes) ? Number(object.headerBytes) : 0,\n            bitrate: isSet(object.bitrate) ? Number(object.bitrate) : 0,\n            packetsLost: isSet(object.packetsLost) ? Number(object.packetsLost) : 0,\n            packetLossRate: isSet(object.packetLossRate) ? Number(object.packetLossRate) : 0,\n            packetLossPercentage: isSet(object.packetLossPercentage) ? Number(object.packetLossPercentage) : 0,\n            packetsDuplicate: isSet(object.packetsDuplicate) ? Number(object.packetsDuplicate) : 0,\n            packetDuplicateRate: isSet(object.packetDuplicateRate) ? Number(object.packetDuplicateRate) : 0,\n            bytesDuplicate: isSet(object.bytesDuplicate) ? Number(object.bytesDuplicate) : 0,\n            headerBytesDuplicate: isSet(object.headerBytesDuplicate) ? Number(object.headerBytesDuplicate) : 0,\n            bitrateDuplicate: isSet(object.bitrateDuplicate) ? Number(object.bitrateDuplicate) : 0,\n            packetsPadding: isSet(object.packetsPadding) ? Number(object.packetsPadding) : 0,\n            packetPaddingRate: isSet(object.packetPaddingRate) ? Number(object.packetPaddingRate) : 0,\n            bytesPadding: isSet(object.bytesPadding) ? Number(object.bytesPadding) : 0,\n            headerBytesPadding: isSet(object.headerBytesPadding) ? Number(object.headerBytesPadding) : 0,\n            bitratePadding: isSet(object.bitratePadding) ? Number(object.bitratePadding) : 0,\n            packetsOutOfOrder: isSet(object.packetsOutOfOrder) ? Number(object.packetsOutOfOrder) : 0,\n            frames: isSet(object.frames) ? Number(object.frames) : 0,\n            frameRate: isSet(object.frameRate) ? Number(object.frameRate) : 0,\n            jitterCurrent: isSet(object.jitterCurrent) ? Number(object.jitterCurrent) : 0,\n            jitterMax: isSet(object.jitterMax) ? Number(object.jitterMax) : 0,\n            gapHistogram: isObject(object.gapHistogram)\n                ? Object.entries(object.gapHistogram).reduce((acc, [key, value]) => {\n                    acc[Number(key)] = Number(value);\n                    return acc;\n                }, {})\n                : {},\n            nacks: isSet(object.nacks) ? Number(object.nacks) : 0,\n            nackAcks: isSet(object.nackAcks) ? Number(object.nackAcks) : 0,\n            nackMisses: isSet(object.nackMisses) ? Number(object.nackMisses) : 0,\n            nackRepeated: isSet(object.nackRepeated) ? Number(object.nackRepeated) : 0,\n            plis: isSet(object.plis) ? Number(object.plis) : 0,\n            lastPli: isSet(object.lastPli) ? fromJsonTimestamp(object.lastPli) : undefined,\n            firs: isSet(object.firs) ? Number(object.firs) : 0,\n            lastFir: isSet(object.lastFir) ? fromJsonTimestamp(object.lastFir) : undefined,\n            rttCurrent: isSet(object.rttCurrent) ? Number(object.rttCurrent) : 0,\n            rttMax: isSet(object.rttMax) ? Number(object.rttMax) : 0,\n            keyFrames: isSet(object.keyFrames) ? Number(object.keyFrames) : 0,\n            lastKeyFrame: isSet(object.lastKeyFrame) ? fromJsonTimestamp(object.lastKeyFrame) : undefined,\n            layerLockPlis: isSet(object.layerLockPlis) ? Number(object.layerLockPlis) : 0,\n            lastLayerLockPli: isSet(object.lastLayerLockPli) ? fromJsonTimestamp(object.lastLayerLockPli) : undefined,\n            packetDrift: isSet(object.packetDrift) ? exports.RTPDrift.fromJSON(object.packetDrift) : undefined,\n            reportDrift: isSet(object.reportDrift) ? exports.RTPDrift.fromJSON(object.reportDrift) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.startTime !== undefined && (obj.startTime = message.startTime.toISOString());\n        message.endTime !== undefined && (obj.endTime = message.endTime.toISOString());\n        message.duration !== undefined && (obj.duration = message.duration);\n        message.packets !== undefined && (obj.packets = Math.round(message.packets));\n        message.packetRate !== undefined && (obj.packetRate = message.packetRate);\n        message.bytes !== undefined && (obj.bytes = Math.round(message.bytes));\n        message.headerBytes !== undefined && (obj.headerBytes = Math.round(message.headerBytes));\n        message.bitrate !== undefined && (obj.bitrate = message.bitrate);\n        message.packetsLost !== undefined && (obj.packetsLost = Math.round(message.packetsLost));\n        message.packetLossRate !== undefined && (obj.packetLossRate = message.packetLossRate);\n        message.packetLossPercentage !== undefined && (obj.packetLossPercentage = message.packetLossPercentage);\n        message.packetsDuplicate !== undefined && (obj.packetsDuplicate = Math.round(message.packetsDuplicate));\n        message.packetDuplicateRate !== undefined && (obj.packetDuplicateRate = message.packetDuplicateRate);\n        message.bytesDuplicate !== undefined && (obj.bytesDuplicate = Math.round(message.bytesDuplicate));\n        message.headerBytesDuplicate !== undefined && (obj.headerBytesDuplicate = Math.round(message.headerBytesDuplicate));\n        message.bitrateDuplicate !== undefined && (obj.bitrateDuplicate = message.bitrateDuplicate);\n        message.packetsPadding !== undefined && (obj.packetsPadding = Math.round(message.packetsPadding));\n        message.packetPaddingRate !== undefined && (obj.packetPaddingRate = message.packetPaddingRate);\n        message.bytesPadding !== undefined && (obj.bytesPadding = Math.round(message.bytesPadding));\n        message.headerBytesPadding !== undefined && (obj.headerBytesPadding = Math.round(message.headerBytesPadding));\n        message.bitratePadding !== undefined && (obj.bitratePadding = message.bitratePadding);\n        message.packetsOutOfOrder !== undefined && (obj.packetsOutOfOrder = Math.round(message.packetsOutOfOrder));\n        message.frames !== undefined && (obj.frames = Math.round(message.frames));\n        message.frameRate !== undefined && (obj.frameRate = message.frameRate);\n        message.jitterCurrent !== undefined && (obj.jitterCurrent = message.jitterCurrent);\n        message.jitterMax !== undefined && (obj.jitterMax = message.jitterMax);\n        obj.gapHistogram = {};\n        if (message.gapHistogram) {\n            Object.entries(message.gapHistogram).forEach(([k, v]) => {\n                obj.gapHistogram[k] = Math.round(v);\n            });\n        }\n        message.nacks !== undefined && (obj.nacks = Math.round(message.nacks));\n        message.nackAcks !== undefined && (obj.nackAcks = Math.round(message.nackAcks));\n        message.nackMisses !== undefined && (obj.nackMisses = Math.round(message.nackMisses));\n        message.nackRepeated !== undefined && (obj.nackRepeated = Math.round(message.nackRepeated));\n        message.plis !== undefined && (obj.plis = Math.round(message.plis));\n        message.lastPli !== undefined && (obj.lastPli = message.lastPli.toISOString());\n        message.firs !== undefined && (obj.firs = Math.round(message.firs));\n        message.lastFir !== undefined && (obj.lastFir = message.lastFir.toISOString());\n        message.rttCurrent !== undefined && (obj.rttCurrent = Math.round(message.rttCurrent));\n        message.rttMax !== undefined && (obj.rttMax = Math.round(message.rttMax));\n        message.keyFrames !== undefined && (obj.keyFrames = Math.round(message.keyFrames));\n        message.lastKeyFrame !== undefined && (obj.lastKeyFrame = message.lastKeyFrame.toISOString());\n        message.layerLockPlis !== undefined && (obj.layerLockPlis = Math.round(message.layerLockPlis));\n        message.lastLayerLockPli !== undefined && (obj.lastLayerLockPli = message.lastLayerLockPli.toISOString());\n        message.packetDrift !== undefined &&\n            (obj.packetDrift = message.packetDrift ? exports.RTPDrift.toJSON(message.packetDrift) : undefined);\n        message.reportDrift !== undefined &&\n            (obj.reportDrift = message.reportDrift ? exports.RTPDrift.toJSON(message.reportDrift) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16;\n        const message = createBaseRTPStats();\n        message.startTime = (_a = object.startTime) !== null && _a !== void 0 ? _a : undefined;\n        message.endTime = (_b = object.endTime) !== null && _b !== void 0 ? _b : undefined;\n        message.duration = (_c = object.duration) !== null && _c !== void 0 ? _c : 0;\n        message.packets = (_d = object.packets) !== null && _d !== void 0 ? _d : 0;\n        message.packetRate = (_e = object.packetRate) !== null && _e !== void 0 ? _e : 0;\n        message.bytes = (_f = object.bytes) !== null && _f !== void 0 ? _f : 0;\n        message.headerBytes = (_g = object.headerBytes) !== null && _g !== void 0 ? _g : 0;\n        message.bitrate = (_h = object.bitrate) !== null && _h !== void 0 ? _h : 0;\n        message.packetsLost = (_j = object.packetsLost) !== null && _j !== void 0 ? _j : 0;\n        message.packetLossRate = (_k = object.packetLossRate) !== null && _k !== void 0 ? _k : 0;\n        message.packetLossPercentage = (_l = object.packetLossPercentage) !== null && _l !== void 0 ? _l : 0;\n        message.packetsDuplicate = (_m = object.packetsDuplicate) !== null && _m !== void 0 ? _m : 0;\n        message.packetDuplicateRate = (_o = object.packetDuplicateRate) !== null && _o !== void 0 ? _o : 0;\n        message.bytesDuplicate = (_p = object.bytesDuplicate) !== null && _p !== void 0 ? _p : 0;\n        message.headerBytesDuplicate = (_q = object.headerBytesDuplicate) !== null && _q !== void 0 ? _q : 0;\n        message.bitrateDuplicate = (_r = object.bitrateDuplicate) !== null && _r !== void 0 ? _r : 0;\n        message.packetsPadding = (_s = object.packetsPadding) !== null && _s !== void 0 ? _s : 0;\n        message.packetPaddingRate = (_t = object.packetPaddingRate) !== null && _t !== void 0 ? _t : 0;\n        message.bytesPadding = (_u = object.bytesPadding) !== null && _u !== void 0 ? _u : 0;\n        message.headerBytesPadding = (_v = object.headerBytesPadding) !== null && _v !== void 0 ? _v : 0;\n        message.bitratePadding = (_w = object.bitratePadding) !== null && _w !== void 0 ? _w : 0;\n        message.packetsOutOfOrder = (_x = object.packetsOutOfOrder) !== null && _x !== void 0 ? _x : 0;\n        message.frames = (_y = object.frames) !== null && _y !== void 0 ? _y : 0;\n        message.frameRate = (_z = object.frameRate) !== null && _z !== void 0 ? _z : 0;\n        message.jitterCurrent = (_0 = object.jitterCurrent) !== null && _0 !== void 0 ? _0 : 0;\n        message.jitterMax = (_1 = object.jitterMax) !== null && _1 !== void 0 ? _1 : 0;\n        message.gapHistogram = Object.entries((_2 = object.gapHistogram) !== null && _2 !== void 0 ? _2 : {}).reduce((acc, [key, value]) => {\n            if (value !== undefined) {\n                acc[Number(key)] = Number(value);\n            }\n            return acc;\n        }, {});\n        message.nacks = (_3 = object.nacks) !== null && _3 !== void 0 ? _3 : 0;\n        message.nackAcks = (_4 = object.nackAcks) !== null && _4 !== void 0 ? _4 : 0;\n        message.nackMisses = (_5 = object.nackMisses) !== null && _5 !== void 0 ? _5 : 0;\n        message.nackRepeated = (_6 = object.nackRepeated) !== null && _6 !== void 0 ? _6 : 0;\n        message.plis = (_7 = object.plis) !== null && _7 !== void 0 ? _7 : 0;\n        message.lastPli = (_8 = object.lastPli) !== null && _8 !== void 0 ? _8 : undefined;\n        message.firs = (_9 = object.firs) !== null && _9 !== void 0 ? _9 : 0;\n        message.lastFir = (_10 = object.lastFir) !== null && _10 !== void 0 ? _10 : undefined;\n        message.rttCurrent = (_11 = object.rttCurrent) !== null && _11 !== void 0 ? _11 : 0;\n        message.rttMax = (_12 = object.rttMax) !== null && _12 !== void 0 ? _12 : 0;\n        message.keyFrames = (_13 = object.keyFrames) !== null && _13 !== void 0 ? _13 : 0;\n        message.lastKeyFrame = (_14 = object.lastKeyFrame) !== null && _14 !== void 0 ? _14 : undefined;\n        message.layerLockPlis = (_15 = object.layerLockPlis) !== null && _15 !== void 0 ? _15 : 0;\n        message.lastLayerLockPli = (_16 = object.lastLayerLockPli) !== null && _16 !== void 0 ? _16 : undefined;\n        message.packetDrift = (object.packetDrift !== undefined && object.packetDrift !== null)\n            ? exports.RTPDrift.fromPartial(object.packetDrift)\n            : undefined;\n        message.reportDrift = (object.reportDrift !== undefined && object.reportDrift !== null)\n            ? exports.RTPDrift.fromPartial(object.reportDrift)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseRTPStats_GapHistogramEntry() {\n    return { key: 0, value: 0 };\n}\nexports.RTPStats_GapHistogramEntry = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.key !== 0) {\n            writer.uint32(8).int32(message.key);\n        }\n        if (message.value !== 0) {\n            writer.uint32(16).uint32(message.value);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseRTPStats_GapHistogramEntry();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.key = reader.int32();\n                    break;\n                case 2:\n                    message.value = reader.uint32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { key: isSet(object.key) ? Number(object.key) : 0, value: isSet(object.value) ? Number(object.value) : 0 };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.key !== undefined && (obj.key = Math.round(message.key));\n        message.value !== undefined && (obj.value = Math.round(message.value));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseRTPStats_GapHistogramEntry();\n        message.key = (_a = object.key) !== null && _a !== void 0 ? _a : 0;\n        message.value = (_b = object.value) !== null && _b !== void 0 ? _b : 0;\n        return message;\n    },\n};\nfunction createBaseTimedVersion() {\n    return { unixMicro: 0, ticks: 0 };\n}\nexports.TimedVersion = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.unixMicro !== 0) {\n            writer.uint32(8).int64(message.unixMicro);\n        }\n        if (message.ticks !== 0) {\n            writer.uint32(16).int32(message.ticks);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseTimedVersion();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.unixMicro = longToNumber(reader.int64());\n                    break;\n                case 2:\n                    message.ticks = reader.int32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            unixMicro: isSet(object.unixMicro) ? Number(object.unixMicro) : 0,\n            ticks: isSet(object.ticks) ? Number(object.ticks) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.unixMicro !== undefined && (obj.unixMicro = Math.round(message.unixMicro));\n        message.ticks !== undefined && (obj.ticks = Math.round(message.ticks));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseTimedVersion();\n        message.unixMicro = (_a = object.unixMicro) !== null && _a !== void 0 ? _a : 0;\n        message.ticks = (_b = object.ticks) !== null && _b !== void 0 ? _b : 0;\n        return message;\n    },\n};\nvar globalThis = (() => {\n    if (typeof globalThis !== \"undefined\") {\n        return globalThis;\n    }\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    if (typeof window !== \"undefined\") {\n        return window;\n    }\n    if (typeof global !== \"undefined\") {\n        return global;\n    }\n    throw \"Unable to locate global object\";\n})();\nfunction bytesFromBase64(b64) {\n    if (globalThis.Buffer) {\n        return Uint8Array.from(globalThis.Buffer.from(b64, \"base64\"));\n    }\n    else {\n        const bin = globalThis.atob(b64);\n        const arr = new Uint8Array(bin.length);\n        for (let i = 0; i < bin.length; ++i) {\n            arr[i] = bin.charCodeAt(i);\n        }\n        return arr;\n    }\n}\nfunction base64FromBytes(arr) {\n    if (globalThis.Buffer) {\n        return globalThis.Buffer.from(arr).toString(\"base64\");\n    }\n    else {\n        const bin = [];\n        arr.forEach((byte) => {\n            bin.push(String.fromCharCode(byte));\n        });\n        return globalThis.btoa(bin.join(\"\"));\n    }\n}\nfunction toTimestamp(date) {\n    const seconds = date.getTime() / 1000;\n    const nanos = (date.getTime() % 1000) * 1000000;\n    return { seconds, nanos };\n}\nfunction fromTimestamp(t) {\n    let millis = t.seconds * 1000;\n    millis += t.nanos / 1000000;\n    return new Date(millis);\n}\nfunction fromJsonTimestamp(o) {\n    if (o instanceof Date) {\n        return o;\n    }\n    else if (typeof o === \"string\") {\n        return new Date(o);\n    }\n    else {\n        return fromTimestamp(timestamp_1.Timestamp.fromJSON(o));\n    }\n}\nfunction longToNumber(long) {\n    if (long.gt(Number.MAX_SAFE_INTEGER)) {\n        throw new globalThis.Error(\"Value is larger than Number.MAX_SAFE_INTEGER\");\n    }\n    return long.toNumber();\n}\nif (minimal_1.default.util.Long !== long_1.default) {\n    minimal_1.default.util.Long = long_1.default;\n    minimal_1.default.configure();\n}\nfunction isObject(value) {\n    return typeof value === \"object\" && value !== null;\n}\nfunction isSet(value) {\n    return value !== null && value !== undefined;\n}\n//# sourceMappingURL=livekit_models.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9wcm90by9saXZla2l0X21vZGVscy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELFlBQVksR0FBRyw0QkFBNEIsR0FBRyw4QkFBOEIsR0FBRyxzQkFBc0IsR0FBRyxnQ0FBZ0MsR0FBRyxrQ0FBa0MsR0FBRywwQkFBMEIsR0FBRyw2QkFBNkIsR0FBRywrQkFBK0IsR0FBRyx1QkFBdUIsR0FBRyw2QkFBNkIsR0FBRywrQkFBK0IsR0FBRyx1QkFBdUIsR0FBRyxtQ0FBbUMsR0FBRyxxQ0FBcUMsR0FBRyw2QkFBNkIsR0FBRywrQkFBK0IsR0FBRyxpQ0FBaUMsR0FBRyx5QkFBeUIsR0FBRyw2QkFBNkIsR0FBRywrQkFBK0IsR0FBRyx1QkFBdUIsR0FBRyw4QkFBOEIsR0FBRyxnQ0FBZ0MsR0FBRyx3QkFBd0IsR0FBRyxpQ0FBaUMsR0FBRyxtQ0FBbUMsR0FBRywyQkFBMkIsR0FBRywrQkFBK0IsR0FBRyxpQ0FBaUMsR0FBRyx5QkFBeUIsR0FBRywwQkFBMEIsR0FBRyw0QkFBNEIsR0FBRyxvQkFBb0IsR0FBRyx5QkFBeUIsR0FBRywyQkFBMkIsR0FBRyxtQkFBbUIsR0FBRyx1QkFBdUIsR0FBRyx5QkFBeUIsR0FBRyxpQkFBaUIsR0FBRyx3QkFBd0IsR0FBRywwQkFBMEIsR0FBRyxrQkFBa0IsR0FBRyx3QkFBd0IsR0FBRywwQkFBMEIsR0FBRyxrQkFBa0IsR0FBRyx3QkFBd0IsR0FBRywwQkFBMEIsR0FBRyxrQkFBa0IsR0FBRyx1QkFBdUI7QUFDcjhDLG9CQUFvQixHQUFHLGtDQUFrQyxHQUFHLGdCQUFnQixHQUFHLGdCQUFnQixHQUFHLHNCQUFzQixHQUFHLDBCQUEwQixHQUFHLDJCQUEyQixHQUFHLGtCQUFrQixHQUFHLGtCQUFrQixHQUFHLHlCQUF5QixHQUFHLGtCQUFrQixHQUFHLG1CQUFtQixHQUFHLDJCQUEyQixHQUFHLGtCQUFrQixHQUFHLGtCQUFrQixHQUFHLGlCQUFpQixHQUFHLDBCQUEwQixHQUFHLGtCQUFrQixHQUFHLHVCQUF1QixHQUFHLDZCQUE2QixHQUFHLG9CQUFvQixHQUFHLGFBQWE7QUFDbmhCO0FBQ0EsK0JBQStCLG1CQUFPLENBQUMsK0RBQU07QUFDN0Msa0NBQWtDLG1CQUFPLENBQUMsaUZBQW9CO0FBQzlELG9CQUFvQixtQkFBTyxDQUFDLCtIQUE2QjtBQUN6RCx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxzQ0FBc0Msa0JBQWtCLEtBQUs7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxzQ0FBc0Msa0JBQWtCLEtBQUs7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHNDQUFzQyxrQkFBa0IsS0FBSztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxvQ0FBb0MsaUJBQWlCLEtBQUs7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyx3Q0FBd0MsbUJBQW1CLEtBQUs7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQywwQ0FBMEMsb0JBQW9CLEtBQUs7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxvREFBb0QseUJBQXlCLEtBQUs7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHdEQUF3RCwyQkFBMkIsS0FBSztBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGtEQUFrRCx3QkFBd0IsS0FBSztBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0RBQWdELHVCQUF1QixLQUFLO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLG9EQUFvRCx5QkFBeUIsS0FBSztBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDREQUE0RCw2QkFBNkIsS0FBSztBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdEQUFnRCx1QkFBdUIsS0FBSztBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdEQUFnRCx1QkFBdUIsS0FBSztBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsc0RBQXNELDBCQUEwQixLQUFLO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw4Q0FBOEMsc0JBQXNCLEtBQUs7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsaUJBQWlCO0FBQ2pCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxpQkFBaUI7QUFDekUsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsSUFBSTtBQUNyQixvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRHQUE0RztBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsSUFBSTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxpQkFBaUI7QUFDakIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnQkFBZ0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGl2ZXN0cmVhbS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9wcm90by9saXZla2l0X21vZGVscy5qcz8xODgxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Sb29tID0gZXhwb3J0cy5jbGllbnRJbmZvX1NES1RvSlNPTiA9IGV4cG9ydHMuY2xpZW50SW5mb19TREtGcm9tSlNPTiA9IGV4cG9ydHMuQ2xpZW50SW5mb19TREsgPSBleHBvcnRzLnNlcnZlckluZm9fRWRpdGlvblRvSlNPTiA9IGV4cG9ydHMuc2VydmVySW5mb19FZGl0aW9uRnJvbUpTT04gPSBleHBvcnRzLlNlcnZlckluZm9fRWRpdGlvbiA9IGV4cG9ydHMuZGF0YVBhY2tldF9LaW5kVG9KU09OID0gZXhwb3J0cy5kYXRhUGFja2V0X0tpbmRGcm9tSlNPTiA9IGV4cG9ydHMuRGF0YVBhY2tldF9LaW5kID0gZXhwb3J0cy5lbmNyeXB0aW9uX1R5cGVUb0pTT04gPSBleHBvcnRzLmVuY3J5cHRpb25fVHlwZUZyb21KU09OID0gZXhwb3J0cy5FbmNyeXB0aW9uX1R5cGUgPSBleHBvcnRzLnBhcnRpY2lwYW50SW5mb19TdGF0ZVRvSlNPTiA9IGV4cG9ydHMucGFydGljaXBhbnRJbmZvX1N0YXRlRnJvbUpTT04gPSBleHBvcnRzLlBhcnRpY2lwYW50SW5mb19TdGF0ZSA9IGV4cG9ydHMuc3Vic2NyaXB0aW9uRXJyb3JUb0pTT04gPSBleHBvcnRzLnN1YnNjcmlwdGlvbkVycm9yRnJvbUpTT04gPSBleHBvcnRzLlN1YnNjcmlwdGlvbkVycm9yID0gZXhwb3J0cy5yZWNvbm5lY3RSZWFzb25Ub0pTT04gPSBleHBvcnRzLnJlY29ubmVjdFJlYXNvbkZyb21KU09OID0gZXhwb3J0cy5SZWNvbm5lY3RSZWFzb24gPSBleHBvcnRzLmRpc2Nvbm5lY3RSZWFzb25Ub0pTT04gPSBleHBvcnRzLmRpc2Nvbm5lY3RSZWFzb25Gcm9tSlNPTiA9IGV4cG9ydHMuRGlzY29ubmVjdFJlYXNvbiA9IGV4cG9ydHMuY2xpZW50Q29uZmlnU2V0dGluZ1RvSlNPTiA9IGV4cG9ydHMuY2xpZW50Q29uZmlnU2V0dGluZ0Zyb21KU09OID0gZXhwb3J0cy5DbGllbnRDb25maWdTZXR0aW5nID0gZXhwb3J0cy5jb25uZWN0aW9uUXVhbGl0eVRvSlNPTiA9IGV4cG9ydHMuY29ubmVjdGlvblF1YWxpdHlGcm9tSlNPTiA9IGV4cG9ydHMuQ29ubmVjdGlvblF1YWxpdHkgPSBleHBvcnRzLnZpZGVvUXVhbGl0eVRvSlNPTiA9IGV4cG9ydHMudmlkZW9RdWFsaXR5RnJvbUpTT04gPSBleHBvcnRzLlZpZGVvUXVhbGl0eSA9IGV4cG9ydHMudHJhY2tTb3VyY2VUb0pTT04gPSBleHBvcnRzLnRyYWNrU291cmNlRnJvbUpTT04gPSBleHBvcnRzLlRyYWNrU291cmNlID0gZXhwb3J0cy50cmFja1R5cGVUb0pTT04gPSBleHBvcnRzLnRyYWNrVHlwZUZyb21KU09OID0gZXhwb3J0cy5UcmFja1R5cGUgPSBleHBvcnRzLmltYWdlQ29kZWNUb0pTT04gPSBleHBvcnRzLmltYWdlQ29kZWNGcm9tSlNPTiA9IGV4cG9ydHMuSW1hZ2VDb2RlYyA9IGV4cG9ydHMudmlkZW9Db2RlY1RvSlNPTiA9IGV4cG9ydHMudmlkZW9Db2RlY0Zyb21KU09OID0gZXhwb3J0cy5WaWRlb0NvZGVjID0gZXhwb3J0cy5hdWRpb0NvZGVjVG9KU09OID0gZXhwb3J0cy5hdWRpb0NvZGVjRnJvbUpTT04gPSBleHBvcnRzLkF1ZGlvQ29kZWMgPSBleHBvcnRzLnByb3RvYnVmUGFja2FnZSA9IHZvaWQgMDtcbmV4cG9ydHMuVGltZWRWZXJzaW9uID0gZXhwb3J0cy5SVFBTdGF0c19HYXBIaXN0b2dyYW1FbnRyeSA9IGV4cG9ydHMuUlRQU3RhdHMgPSBleHBvcnRzLlJUUERyaWZ0ID0gZXhwb3J0cy5EaXNhYmxlZENvZGVjcyA9IGV4cG9ydHMuVmlkZW9Db25maWd1cmF0aW9uID0gZXhwb3J0cy5DbGllbnRDb25maWd1cmF0aW9uID0gZXhwb3J0cy5DbGllbnRJbmZvID0gZXhwb3J0cy5TZXJ2ZXJJbmZvID0gZXhwb3J0cy5QYXJ0aWNpcGFudFRyYWNrcyA9IGV4cG9ydHMuVXNlclBhY2tldCA9IGV4cG9ydHMuU3BlYWtlckluZm8gPSBleHBvcnRzLkFjdGl2ZVNwZWFrZXJVcGRhdGUgPSBleHBvcnRzLkRhdGFQYWNrZXQgPSBleHBvcnRzLlZpZGVvTGF5ZXIgPSBleHBvcnRzLlRyYWNrSW5mbyA9IGV4cG9ydHMuU2ltdWxjYXN0Q29kZWNJbmZvID0gZXhwb3J0cy5FbmNyeXB0aW9uID0gZXhwb3J0cy5QYXJ0aWNpcGFudEluZm8gPSBleHBvcnRzLlBhcnRpY2lwYW50UGVybWlzc2lvbiA9IGV4cG9ydHMuUGxheW91dERlbGF5ID0gZXhwb3J0cy5Db2RlYyA9IHZvaWQgMDtcbi8qIGVzbGludC1kaXNhYmxlICovXG5jb25zdCBsb25nXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImxvbmdcIikpO1xuY29uc3QgbWluaW1hbF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJwcm90b2J1ZmpzL21pbmltYWxcIikpO1xuY29uc3QgdGltZXN0YW1wXzEgPSByZXF1aXJlKFwiLi9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wXCIpO1xuZXhwb3J0cy5wcm90b2J1ZlBhY2thZ2UgPSBcImxpdmVraXRcIjtcbnZhciBBdWRpb0NvZGVjO1xuKGZ1bmN0aW9uIChBdWRpb0NvZGVjKSB7XG4gICAgQXVkaW9Db2RlY1tBdWRpb0NvZGVjW1wiREVGQVVMVF9BQ1wiXSA9IDBdID0gXCJERUZBVUxUX0FDXCI7XG4gICAgQXVkaW9Db2RlY1tBdWRpb0NvZGVjW1wiT1BVU1wiXSA9IDFdID0gXCJPUFVTXCI7XG4gICAgQXVkaW9Db2RlY1tBdWRpb0NvZGVjW1wiQUFDXCJdID0gMl0gPSBcIkFBQ1wiO1xuICAgIEF1ZGlvQ29kZWNbQXVkaW9Db2RlY1tcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShBdWRpb0NvZGVjID0gZXhwb3J0cy5BdWRpb0NvZGVjIHx8IChleHBvcnRzLkF1ZGlvQ29kZWMgPSB7fSkpO1xuZnVuY3Rpb24gYXVkaW9Db2RlY0Zyb21KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSBcIkRFRkFVTFRfQUNcIjpcbiAgICAgICAgICAgIHJldHVybiBBdWRpb0NvZGVjLkRFRkFVTFRfQUM7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSBcIk9QVVNcIjpcbiAgICAgICAgICAgIHJldHVybiBBdWRpb0NvZGVjLk9QVVM7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSBcIkFBQ1wiOlxuICAgICAgICAgICAgcmV0dXJuIEF1ZGlvQ29kZWMuQUFDO1xuICAgICAgICBjYXNlIC0xOlxuICAgICAgICBjYXNlIFwiVU5SRUNPR05JWkVEXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gQXVkaW9Db2RlYy5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy5hdWRpb0NvZGVjRnJvbUpTT04gPSBhdWRpb0NvZGVjRnJvbUpTT047XG5mdW5jdGlvbiBhdWRpb0NvZGVjVG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgQXVkaW9Db2RlYy5ERUZBVUxUX0FDOlxuICAgICAgICAgICAgcmV0dXJuIFwiREVGQVVMVF9BQ1wiO1xuICAgICAgICBjYXNlIEF1ZGlvQ29kZWMuT1BVUzpcbiAgICAgICAgICAgIHJldHVybiBcIk9QVVNcIjtcbiAgICAgICAgY2FzZSBBdWRpb0NvZGVjLkFBQzpcbiAgICAgICAgICAgIHJldHVybiBcIkFBQ1wiO1xuICAgICAgICBjYXNlIEF1ZGlvQ29kZWMuVU5SRUNPR05JWkVEOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5SRUNPR05JWkVEXCI7XG4gICAgfVxufVxuZXhwb3J0cy5hdWRpb0NvZGVjVG9KU09OID0gYXVkaW9Db2RlY1RvSlNPTjtcbnZhciBWaWRlb0NvZGVjO1xuKGZ1bmN0aW9uIChWaWRlb0NvZGVjKSB7XG4gICAgVmlkZW9Db2RlY1tWaWRlb0NvZGVjW1wiREVGQVVMVF9WQ1wiXSA9IDBdID0gXCJERUZBVUxUX1ZDXCI7XG4gICAgVmlkZW9Db2RlY1tWaWRlb0NvZGVjW1wiSDI2NF9CQVNFTElORVwiXSA9IDFdID0gXCJIMjY0X0JBU0VMSU5FXCI7XG4gICAgVmlkZW9Db2RlY1tWaWRlb0NvZGVjW1wiSDI2NF9NQUlOXCJdID0gMl0gPSBcIkgyNjRfTUFJTlwiO1xuICAgIFZpZGVvQ29kZWNbVmlkZW9Db2RlY1tcIkgyNjRfSElHSFwiXSA9IDNdID0gXCJIMjY0X0hJR0hcIjtcbiAgICBWaWRlb0NvZGVjW1ZpZGVvQ29kZWNbXCJWUDhcIl0gPSA0XSA9IFwiVlA4XCI7XG4gICAgVmlkZW9Db2RlY1tWaWRlb0NvZGVjW1wiVU5SRUNPR05JWkVEXCJdID0gLTFdID0gXCJVTlJFQ09HTklaRURcIjtcbn0pKFZpZGVvQ29kZWMgPSBleHBvcnRzLlZpZGVvQ29kZWMgfHwgKGV4cG9ydHMuVmlkZW9Db2RlYyA9IHt9KSk7XG5mdW5jdGlvbiB2aWRlb0NvZGVjRnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiREVGQVVMVF9WQ1wiOlxuICAgICAgICAgICAgcmV0dXJuIFZpZGVvQ29kZWMuREVGQVVMVF9WQztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIFwiSDI2NF9CQVNFTElORVwiOlxuICAgICAgICAgICAgcmV0dXJuIFZpZGVvQ29kZWMuSDI2NF9CQVNFTElORTtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIFwiSDI2NF9NQUlOXCI6XG4gICAgICAgICAgICByZXR1cm4gVmlkZW9Db2RlYy5IMjY0X01BSU47XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgY2FzZSBcIkgyNjRfSElHSFwiOlxuICAgICAgICAgICAgcmV0dXJuIFZpZGVvQ29kZWMuSDI2NF9ISUdIO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgIGNhc2UgXCJWUDhcIjpcbiAgICAgICAgICAgIHJldHVybiBWaWRlb0NvZGVjLlZQODtcbiAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgY2FzZSBcIlVOUkVDT0dOSVpFRFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFZpZGVvQ29kZWMuVU5SRUNPR05JWkVEO1xuICAgIH1cbn1cbmV4cG9ydHMudmlkZW9Db2RlY0Zyb21KU09OID0gdmlkZW9Db2RlY0Zyb21KU09OO1xuZnVuY3Rpb24gdmlkZW9Db2RlY1RvSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIFZpZGVvQ29kZWMuREVGQVVMVF9WQzpcbiAgICAgICAgICAgIHJldHVybiBcIkRFRkFVTFRfVkNcIjtcbiAgICAgICAgY2FzZSBWaWRlb0NvZGVjLkgyNjRfQkFTRUxJTkU6XG4gICAgICAgICAgICByZXR1cm4gXCJIMjY0X0JBU0VMSU5FXCI7XG4gICAgICAgIGNhc2UgVmlkZW9Db2RlYy5IMjY0X01BSU46XG4gICAgICAgICAgICByZXR1cm4gXCJIMjY0X01BSU5cIjtcbiAgICAgICAgY2FzZSBWaWRlb0NvZGVjLkgyNjRfSElHSDpcbiAgICAgICAgICAgIHJldHVybiBcIkgyNjRfSElHSFwiO1xuICAgICAgICBjYXNlIFZpZGVvQ29kZWMuVlA4OlxuICAgICAgICAgICAgcmV0dXJuIFwiVlA4XCI7XG4gICAgICAgIGNhc2UgVmlkZW9Db2RlYy5VTlJFQ09HTklaRUQ6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJVTlJFQ09HTklaRURcIjtcbiAgICB9XG59XG5leHBvcnRzLnZpZGVvQ29kZWNUb0pTT04gPSB2aWRlb0NvZGVjVG9KU09OO1xudmFyIEltYWdlQ29kZWM7XG4oZnVuY3Rpb24gKEltYWdlQ29kZWMpIHtcbiAgICBJbWFnZUNvZGVjW0ltYWdlQ29kZWNbXCJJQ19ERUZBVUxUXCJdID0gMF0gPSBcIklDX0RFRkFVTFRcIjtcbiAgICBJbWFnZUNvZGVjW0ltYWdlQ29kZWNbXCJJQ19KUEVHXCJdID0gMV0gPSBcIklDX0pQRUdcIjtcbiAgICBJbWFnZUNvZGVjW0ltYWdlQ29kZWNbXCJVTlJFQ09HTklaRURcIl0gPSAtMV0gPSBcIlVOUkVDT0dOSVpFRFwiO1xufSkoSW1hZ2VDb2RlYyA9IGV4cG9ydHMuSW1hZ2VDb2RlYyB8fCAoZXhwb3J0cy5JbWFnZUNvZGVjID0ge30pKTtcbmZ1bmN0aW9uIGltYWdlQ29kZWNGcm9tSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgXCJJQ19ERUZBVUxUXCI6XG4gICAgICAgICAgICByZXR1cm4gSW1hZ2VDb2RlYy5JQ19ERUZBVUxUO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJJQ19KUEVHXCI6XG4gICAgICAgICAgICByZXR1cm4gSW1hZ2VDb2RlYy5JQ19KUEVHO1xuICAgICAgICBjYXNlIC0xOlxuICAgICAgICBjYXNlIFwiVU5SRUNPR05JWkVEXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gSW1hZ2VDb2RlYy5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy5pbWFnZUNvZGVjRnJvbUpTT04gPSBpbWFnZUNvZGVjRnJvbUpTT047XG5mdW5jdGlvbiBpbWFnZUNvZGVjVG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgSW1hZ2VDb2RlYy5JQ19ERUZBVUxUOlxuICAgICAgICAgICAgcmV0dXJuIFwiSUNfREVGQVVMVFwiO1xuICAgICAgICBjYXNlIEltYWdlQ29kZWMuSUNfSlBFRzpcbiAgICAgICAgICAgIHJldHVybiBcIklDX0pQRUdcIjtcbiAgICAgICAgY2FzZSBJbWFnZUNvZGVjLlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMuaW1hZ2VDb2RlY1RvSlNPTiA9IGltYWdlQ29kZWNUb0pTT047XG52YXIgVHJhY2tUeXBlO1xuKGZ1bmN0aW9uIChUcmFja1R5cGUpIHtcbiAgICBUcmFja1R5cGVbVHJhY2tUeXBlW1wiQVVESU9cIl0gPSAwXSA9IFwiQVVESU9cIjtcbiAgICBUcmFja1R5cGVbVHJhY2tUeXBlW1wiVklERU9cIl0gPSAxXSA9IFwiVklERU9cIjtcbiAgICBUcmFja1R5cGVbVHJhY2tUeXBlW1wiREFUQVwiXSA9IDJdID0gXCJEQVRBXCI7XG4gICAgVHJhY2tUeXBlW1RyYWNrVHlwZVtcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShUcmFja1R5cGUgPSBleHBvcnRzLlRyYWNrVHlwZSB8fCAoZXhwb3J0cy5UcmFja1R5cGUgPSB7fSkpO1xuZnVuY3Rpb24gdHJhY2tUeXBlRnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiQVVESU9cIjpcbiAgICAgICAgICAgIHJldHVybiBUcmFja1R5cGUuQVVESU87XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSBcIlZJREVPXCI6XG4gICAgICAgICAgICByZXR1cm4gVHJhY2tUeXBlLlZJREVPO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgXCJEQVRBXCI6XG4gICAgICAgICAgICByZXR1cm4gVHJhY2tUeXBlLkRBVEE7XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBUcmFja1R5cGUuVU5SRUNPR05JWkVEO1xuICAgIH1cbn1cbmV4cG9ydHMudHJhY2tUeXBlRnJvbUpTT04gPSB0cmFja1R5cGVGcm9tSlNPTjtcbmZ1bmN0aW9uIHRyYWNrVHlwZVRvSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIFRyYWNrVHlwZS5BVURJTzpcbiAgICAgICAgICAgIHJldHVybiBcIkFVRElPXCI7XG4gICAgICAgIGNhc2UgVHJhY2tUeXBlLlZJREVPOlxuICAgICAgICAgICAgcmV0dXJuIFwiVklERU9cIjtcbiAgICAgICAgY2FzZSBUcmFja1R5cGUuREFUQTpcbiAgICAgICAgICAgIHJldHVybiBcIkRBVEFcIjtcbiAgICAgICAgY2FzZSBUcmFja1R5cGUuVU5SRUNPR05JWkVEOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5SRUNPR05JWkVEXCI7XG4gICAgfVxufVxuZXhwb3J0cy50cmFja1R5cGVUb0pTT04gPSB0cmFja1R5cGVUb0pTT047XG52YXIgVHJhY2tTb3VyY2U7XG4oZnVuY3Rpb24gKFRyYWNrU291cmNlKSB7XG4gICAgVHJhY2tTb3VyY2VbVHJhY2tTb3VyY2VbXCJVTktOT1dOXCJdID0gMF0gPSBcIlVOS05PV05cIjtcbiAgICBUcmFja1NvdXJjZVtUcmFja1NvdXJjZVtcIkNBTUVSQVwiXSA9IDFdID0gXCJDQU1FUkFcIjtcbiAgICBUcmFja1NvdXJjZVtUcmFja1NvdXJjZVtcIk1JQ1JPUEhPTkVcIl0gPSAyXSA9IFwiTUlDUk9QSE9ORVwiO1xuICAgIFRyYWNrU291cmNlW1RyYWNrU291cmNlW1wiU0NSRUVOX1NIQVJFXCJdID0gM10gPSBcIlNDUkVFTl9TSEFSRVwiO1xuICAgIFRyYWNrU291cmNlW1RyYWNrU291cmNlW1wiU0NSRUVOX1NIQVJFX0FVRElPXCJdID0gNF0gPSBcIlNDUkVFTl9TSEFSRV9BVURJT1wiO1xuICAgIFRyYWNrU291cmNlW1RyYWNrU291cmNlW1wiVU5SRUNPR05JWkVEXCJdID0gLTFdID0gXCJVTlJFQ09HTklaRURcIjtcbn0pKFRyYWNrU291cmNlID0gZXhwb3J0cy5UcmFja1NvdXJjZSB8fCAoZXhwb3J0cy5UcmFja1NvdXJjZSA9IHt9KSk7XG5mdW5jdGlvbiB0cmFja1NvdXJjZUZyb21KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSBcIlVOS05PV05cIjpcbiAgICAgICAgICAgIHJldHVybiBUcmFja1NvdXJjZS5VTktOT1dOO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJDQU1FUkFcIjpcbiAgICAgICAgICAgIHJldHVybiBUcmFja1NvdXJjZS5DQU1FUkE7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSBcIk1JQ1JPUEhPTkVcIjpcbiAgICAgICAgICAgIHJldHVybiBUcmFja1NvdXJjZS5NSUNST1BIT05FO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgIGNhc2UgXCJTQ1JFRU5fU0hBUkVcIjpcbiAgICAgICAgICAgIHJldHVybiBUcmFja1NvdXJjZS5TQ1JFRU5fU0hBUkU7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgY2FzZSBcIlNDUkVFTl9TSEFSRV9BVURJT1wiOlxuICAgICAgICAgICAgcmV0dXJuIFRyYWNrU291cmNlLlNDUkVFTl9TSEFSRV9BVURJTztcbiAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgY2FzZSBcIlVOUkVDT0dOSVpFRFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFRyYWNrU291cmNlLlVOUkVDT0dOSVpFRDtcbiAgICB9XG59XG5leHBvcnRzLnRyYWNrU291cmNlRnJvbUpTT04gPSB0cmFja1NvdXJjZUZyb21KU09OO1xuZnVuY3Rpb24gdHJhY2tTb3VyY2VUb0pTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSBUcmFja1NvdXJjZS5VTktOT1dOOlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5LTk9XTlwiO1xuICAgICAgICBjYXNlIFRyYWNrU291cmNlLkNBTUVSQTpcbiAgICAgICAgICAgIHJldHVybiBcIkNBTUVSQVwiO1xuICAgICAgICBjYXNlIFRyYWNrU291cmNlLk1JQ1JPUEhPTkU6XG4gICAgICAgICAgICByZXR1cm4gXCJNSUNST1BIT05FXCI7XG4gICAgICAgIGNhc2UgVHJhY2tTb3VyY2UuU0NSRUVOX1NIQVJFOlxuICAgICAgICAgICAgcmV0dXJuIFwiU0NSRUVOX1NIQVJFXCI7XG4gICAgICAgIGNhc2UgVHJhY2tTb3VyY2UuU0NSRUVOX1NIQVJFX0FVRElPOlxuICAgICAgICAgICAgcmV0dXJuIFwiU0NSRUVOX1NIQVJFX0FVRElPXCI7XG4gICAgICAgIGNhc2UgVHJhY2tTb3VyY2UuVU5SRUNPR05JWkVEOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5SRUNPR05JWkVEXCI7XG4gICAgfVxufVxuZXhwb3J0cy50cmFja1NvdXJjZVRvSlNPTiA9IHRyYWNrU291cmNlVG9KU09OO1xudmFyIFZpZGVvUXVhbGl0eTtcbihmdW5jdGlvbiAoVmlkZW9RdWFsaXR5KSB7XG4gICAgVmlkZW9RdWFsaXR5W1ZpZGVvUXVhbGl0eVtcIkxPV1wiXSA9IDBdID0gXCJMT1dcIjtcbiAgICBWaWRlb1F1YWxpdHlbVmlkZW9RdWFsaXR5W1wiTUVESVVNXCJdID0gMV0gPSBcIk1FRElVTVwiO1xuICAgIFZpZGVvUXVhbGl0eVtWaWRlb1F1YWxpdHlbXCJISUdIXCJdID0gMl0gPSBcIkhJR0hcIjtcbiAgICBWaWRlb1F1YWxpdHlbVmlkZW9RdWFsaXR5W1wiT0ZGXCJdID0gM10gPSBcIk9GRlwiO1xuICAgIFZpZGVvUXVhbGl0eVtWaWRlb1F1YWxpdHlbXCJVTlJFQ09HTklaRURcIl0gPSAtMV0gPSBcIlVOUkVDT0dOSVpFRFwiO1xufSkoVmlkZW9RdWFsaXR5ID0gZXhwb3J0cy5WaWRlb1F1YWxpdHkgfHwgKGV4cG9ydHMuVmlkZW9RdWFsaXR5ID0ge30pKTtcbmZ1bmN0aW9uIHZpZGVvUXVhbGl0eUZyb21KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSBcIkxPV1wiOlxuICAgICAgICAgICAgcmV0dXJuIFZpZGVvUXVhbGl0eS5MT1c7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSBcIk1FRElVTVwiOlxuICAgICAgICAgICAgcmV0dXJuIFZpZGVvUXVhbGl0eS5NRURJVU07XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSBcIkhJR0hcIjpcbiAgICAgICAgICAgIHJldHVybiBWaWRlb1F1YWxpdHkuSElHSDtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICBjYXNlIFwiT0ZGXCI6XG4gICAgICAgICAgICByZXR1cm4gVmlkZW9RdWFsaXR5Lk9GRjtcbiAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgY2FzZSBcIlVOUkVDT0dOSVpFRFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFZpZGVvUXVhbGl0eS5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy52aWRlb1F1YWxpdHlGcm9tSlNPTiA9IHZpZGVvUXVhbGl0eUZyb21KU09OO1xuZnVuY3Rpb24gdmlkZW9RdWFsaXR5VG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgVmlkZW9RdWFsaXR5LkxPVzpcbiAgICAgICAgICAgIHJldHVybiBcIkxPV1wiO1xuICAgICAgICBjYXNlIFZpZGVvUXVhbGl0eS5NRURJVU06XG4gICAgICAgICAgICByZXR1cm4gXCJNRURJVU1cIjtcbiAgICAgICAgY2FzZSBWaWRlb1F1YWxpdHkuSElHSDpcbiAgICAgICAgICAgIHJldHVybiBcIkhJR0hcIjtcbiAgICAgICAgY2FzZSBWaWRlb1F1YWxpdHkuT0ZGOlxuICAgICAgICAgICAgcmV0dXJuIFwiT0ZGXCI7XG4gICAgICAgIGNhc2UgVmlkZW9RdWFsaXR5LlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMudmlkZW9RdWFsaXR5VG9KU09OID0gdmlkZW9RdWFsaXR5VG9KU09OO1xudmFyIENvbm5lY3Rpb25RdWFsaXR5O1xuKGZ1bmN0aW9uIChDb25uZWN0aW9uUXVhbGl0eSkge1xuICAgIENvbm5lY3Rpb25RdWFsaXR5W0Nvbm5lY3Rpb25RdWFsaXR5W1wiUE9PUlwiXSA9IDBdID0gXCJQT09SXCI7XG4gICAgQ29ubmVjdGlvblF1YWxpdHlbQ29ubmVjdGlvblF1YWxpdHlbXCJHT09EXCJdID0gMV0gPSBcIkdPT0RcIjtcbiAgICBDb25uZWN0aW9uUXVhbGl0eVtDb25uZWN0aW9uUXVhbGl0eVtcIkVYQ0VMTEVOVFwiXSA9IDJdID0gXCJFWENFTExFTlRcIjtcbiAgICBDb25uZWN0aW9uUXVhbGl0eVtDb25uZWN0aW9uUXVhbGl0eVtcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShDb25uZWN0aW9uUXVhbGl0eSA9IGV4cG9ydHMuQ29ubmVjdGlvblF1YWxpdHkgfHwgKGV4cG9ydHMuQ29ubmVjdGlvblF1YWxpdHkgPSB7fSkpO1xuZnVuY3Rpb24gY29ubmVjdGlvblF1YWxpdHlGcm9tSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgXCJQT09SXCI6XG4gICAgICAgICAgICByZXR1cm4gQ29ubmVjdGlvblF1YWxpdHkuUE9PUjtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIFwiR09PRFwiOlxuICAgICAgICAgICAgcmV0dXJuIENvbm5lY3Rpb25RdWFsaXR5LkdPT0Q7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSBcIkVYQ0VMTEVOVFwiOlxuICAgICAgICAgICAgcmV0dXJuIENvbm5lY3Rpb25RdWFsaXR5LkVYQ0VMTEVOVDtcbiAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgY2FzZSBcIlVOUkVDT0dOSVpFRFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIENvbm5lY3Rpb25RdWFsaXR5LlVOUkVDT0dOSVpFRDtcbiAgICB9XG59XG5leHBvcnRzLmNvbm5lY3Rpb25RdWFsaXR5RnJvbUpTT04gPSBjb25uZWN0aW9uUXVhbGl0eUZyb21KU09OO1xuZnVuY3Rpb24gY29ubmVjdGlvblF1YWxpdHlUb0pTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSBDb25uZWN0aW9uUXVhbGl0eS5QT09SOlxuICAgICAgICAgICAgcmV0dXJuIFwiUE9PUlwiO1xuICAgICAgICBjYXNlIENvbm5lY3Rpb25RdWFsaXR5LkdPT0Q6XG4gICAgICAgICAgICByZXR1cm4gXCJHT09EXCI7XG4gICAgICAgIGNhc2UgQ29ubmVjdGlvblF1YWxpdHkuRVhDRUxMRU5UOlxuICAgICAgICAgICAgcmV0dXJuIFwiRVhDRUxMRU5UXCI7XG4gICAgICAgIGNhc2UgQ29ubmVjdGlvblF1YWxpdHkuVU5SRUNPR05JWkVEOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5SRUNPR05JWkVEXCI7XG4gICAgfVxufVxuZXhwb3J0cy5jb25uZWN0aW9uUXVhbGl0eVRvSlNPTiA9IGNvbm5lY3Rpb25RdWFsaXR5VG9KU09OO1xudmFyIENsaWVudENvbmZpZ1NldHRpbmc7XG4oZnVuY3Rpb24gKENsaWVudENvbmZpZ1NldHRpbmcpIHtcbiAgICBDbGllbnRDb25maWdTZXR0aW5nW0NsaWVudENvbmZpZ1NldHRpbmdbXCJVTlNFVFwiXSA9IDBdID0gXCJVTlNFVFwiO1xuICAgIENsaWVudENvbmZpZ1NldHRpbmdbQ2xpZW50Q29uZmlnU2V0dGluZ1tcIkRJU0FCTEVEXCJdID0gMV0gPSBcIkRJU0FCTEVEXCI7XG4gICAgQ2xpZW50Q29uZmlnU2V0dGluZ1tDbGllbnRDb25maWdTZXR0aW5nW1wiRU5BQkxFRFwiXSA9IDJdID0gXCJFTkFCTEVEXCI7XG4gICAgQ2xpZW50Q29uZmlnU2V0dGluZ1tDbGllbnRDb25maWdTZXR0aW5nW1wiVU5SRUNPR05JWkVEXCJdID0gLTFdID0gXCJVTlJFQ09HTklaRURcIjtcbn0pKENsaWVudENvbmZpZ1NldHRpbmcgPSBleHBvcnRzLkNsaWVudENvbmZpZ1NldHRpbmcgfHwgKGV4cG9ydHMuQ2xpZW50Q29uZmlnU2V0dGluZyA9IHt9KSk7XG5mdW5jdGlvbiBjbGllbnRDb25maWdTZXR0aW5nRnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiVU5TRVRcIjpcbiAgICAgICAgICAgIHJldHVybiBDbGllbnRDb25maWdTZXR0aW5nLlVOU0VUO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJESVNBQkxFRFwiOlxuICAgICAgICAgICAgcmV0dXJuIENsaWVudENvbmZpZ1NldHRpbmcuRElTQUJMRUQ7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSBcIkVOQUJMRURcIjpcbiAgICAgICAgICAgIHJldHVybiBDbGllbnRDb25maWdTZXR0aW5nLkVOQUJMRUQ7XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBDbGllbnRDb25maWdTZXR0aW5nLlVOUkVDT0dOSVpFRDtcbiAgICB9XG59XG5leHBvcnRzLmNsaWVudENvbmZpZ1NldHRpbmdGcm9tSlNPTiA9IGNsaWVudENvbmZpZ1NldHRpbmdGcm9tSlNPTjtcbmZ1bmN0aW9uIGNsaWVudENvbmZpZ1NldHRpbmdUb0pTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSBDbGllbnRDb25maWdTZXR0aW5nLlVOU0VUOlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5TRVRcIjtcbiAgICAgICAgY2FzZSBDbGllbnRDb25maWdTZXR0aW5nLkRJU0FCTEVEOlxuICAgICAgICAgICAgcmV0dXJuIFwiRElTQUJMRURcIjtcbiAgICAgICAgY2FzZSBDbGllbnRDb25maWdTZXR0aW5nLkVOQUJMRUQ6XG4gICAgICAgICAgICByZXR1cm4gXCJFTkFCTEVEXCI7XG4gICAgICAgIGNhc2UgQ2xpZW50Q29uZmlnU2V0dGluZy5VTlJFQ09HTklaRUQ6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJVTlJFQ09HTklaRURcIjtcbiAgICB9XG59XG5leHBvcnRzLmNsaWVudENvbmZpZ1NldHRpbmdUb0pTT04gPSBjbGllbnRDb25maWdTZXR0aW5nVG9KU09OO1xudmFyIERpc2Nvbm5lY3RSZWFzb247XG4oZnVuY3Rpb24gKERpc2Nvbm5lY3RSZWFzb24pIHtcbiAgICBEaXNjb25uZWN0UmVhc29uW0Rpc2Nvbm5lY3RSZWFzb25bXCJVTktOT1dOX1JFQVNPTlwiXSA9IDBdID0gXCJVTktOT1dOX1JFQVNPTlwiO1xuICAgIERpc2Nvbm5lY3RSZWFzb25bRGlzY29ubmVjdFJlYXNvbltcIkNMSUVOVF9JTklUSUFURURcIl0gPSAxXSA9IFwiQ0xJRU5UX0lOSVRJQVRFRFwiO1xuICAgIERpc2Nvbm5lY3RSZWFzb25bRGlzY29ubmVjdFJlYXNvbltcIkRVUExJQ0FURV9JREVOVElUWVwiXSA9IDJdID0gXCJEVVBMSUNBVEVfSURFTlRJVFlcIjtcbiAgICBEaXNjb25uZWN0UmVhc29uW0Rpc2Nvbm5lY3RSZWFzb25bXCJTRVJWRVJfU0hVVERPV05cIl0gPSAzXSA9IFwiU0VSVkVSX1NIVVRET1dOXCI7XG4gICAgRGlzY29ubmVjdFJlYXNvbltEaXNjb25uZWN0UmVhc29uW1wiUEFSVElDSVBBTlRfUkVNT1ZFRFwiXSA9IDRdID0gXCJQQVJUSUNJUEFOVF9SRU1PVkVEXCI7XG4gICAgRGlzY29ubmVjdFJlYXNvbltEaXNjb25uZWN0UmVhc29uW1wiUk9PTV9ERUxFVEVEXCJdID0gNV0gPSBcIlJPT01fREVMRVRFRFwiO1xuICAgIERpc2Nvbm5lY3RSZWFzb25bRGlzY29ubmVjdFJlYXNvbltcIlNUQVRFX01JU01BVENIXCJdID0gNl0gPSBcIlNUQVRFX01JU01BVENIXCI7XG4gICAgRGlzY29ubmVjdFJlYXNvbltEaXNjb25uZWN0UmVhc29uW1wiSk9JTl9GQUlMVVJFXCJdID0gN10gPSBcIkpPSU5fRkFJTFVSRVwiO1xuICAgIERpc2Nvbm5lY3RSZWFzb25bRGlzY29ubmVjdFJlYXNvbltcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShEaXNjb25uZWN0UmVhc29uID0gZXhwb3J0cy5EaXNjb25uZWN0UmVhc29uIHx8IChleHBvcnRzLkRpc2Nvbm5lY3RSZWFzb24gPSB7fSkpO1xuZnVuY3Rpb24gZGlzY29ubmVjdFJlYXNvbkZyb21KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSBcIlVOS05PV05fUkVBU09OXCI6XG4gICAgICAgICAgICByZXR1cm4gRGlzY29ubmVjdFJlYXNvbi5VTktOT1dOX1JFQVNPTjtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIFwiQ0xJRU5UX0lOSVRJQVRFRFwiOlxuICAgICAgICAgICAgcmV0dXJuIERpc2Nvbm5lY3RSZWFzb24uQ0xJRU5UX0lOSVRJQVRFRDtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIFwiRFVQTElDQVRFX0lERU5USVRZXCI6XG4gICAgICAgICAgICByZXR1cm4gRGlzY29ubmVjdFJlYXNvbi5EVVBMSUNBVEVfSURFTlRJVFk7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgY2FzZSBcIlNFUlZFUl9TSFVURE9XTlwiOlxuICAgICAgICAgICAgcmV0dXJuIERpc2Nvbm5lY3RSZWFzb24uU0VSVkVSX1NIVVRET1dOO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgIGNhc2UgXCJQQVJUSUNJUEFOVF9SRU1PVkVEXCI6XG4gICAgICAgICAgICByZXR1cm4gRGlzY29ubmVjdFJlYXNvbi5QQVJUSUNJUEFOVF9SRU1PVkVEO1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgIGNhc2UgXCJST09NX0RFTEVURURcIjpcbiAgICAgICAgICAgIHJldHVybiBEaXNjb25uZWN0UmVhc29uLlJPT01fREVMRVRFRDtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICBjYXNlIFwiU1RBVEVfTUlTTUFUQ0hcIjpcbiAgICAgICAgICAgIHJldHVybiBEaXNjb25uZWN0UmVhc29uLlNUQVRFX01JU01BVENIO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgIGNhc2UgXCJKT0lOX0ZBSUxVUkVcIjpcbiAgICAgICAgICAgIHJldHVybiBEaXNjb25uZWN0UmVhc29uLkpPSU5fRkFJTFVSRTtcbiAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgY2FzZSBcIlVOUkVDT0dOSVpFRFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIERpc2Nvbm5lY3RSZWFzb24uVU5SRUNPR05JWkVEO1xuICAgIH1cbn1cbmV4cG9ydHMuZGlzY29ubmVjdFJlYXNvbkZyb21KU09OID0gZGlzY29ubmVjdFJlYXNvbkZyb21KU09OO1xuZnVuY3Rpb24gZGlzY29ubmVjdFJlYXNvblRvSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIERpc2Nvbm5lY3RSZWFzb24uVU5LTk9XTl9SRUFTT046XG4gICAgICAgICAgICByZXR1cm4gXCJVTktOT1dOX1JFQVNPTlwiO1xuICAgICAgICBjYXNlIERpc2Nvbm5lY3RSZWFzb24uQ0xJRU5UX0lOSVRJQVRFRDpcbiAgICAgICAgICAgIHJldHVybiBcIkNMSUVOVF9JTklUSUFURURcIjtcbiAgICAgICAgY2FzZSBEaXNjb25uZWN0UmVhc29uLkRVUExJQ0FURV9JREVOVElUWTpcbiAgICAgICAgICAgIHJldHVybiBcIkRVUExJQ0FURV9JREVOVElUWVwiO1xuICAgICAgICBjYXNlIERpc2Nvbm5lY3RSZWFzb24uU0VSVkVSX1NIVVRET1dOOlxuICAgICAgICAgICAgcmV0dXJuIFwiU0VSVkVSX1NIVVRET1dOXCI7XG4gICAgICAgIGNhc2UgRGlzY29ubmVjdFJlYXNvbi5QQVJUSUNJUEFOVF9SRU1PVkVEOlxuICAgICAgICAgICAgcmV0dXJuIFwiUEFSVElDSVBBTlRfUkVNT1ZFRFwiO1xuICAgICAgICBjYXNlIERpc2Nvbm5lY3RSZWFzb24uUk9PTV9ERUxFVEVEOlxuICAgICAgICAgICAgcmV0dXJuIFwiUk9PTV9ERUxFVEVEXCI7XG4gICAgICAgIGNhc2UgRGlzY29ubmVjdFJlYXNvbi5TVEFURV9NSVNNQVRDSDpcbiAgICAgICAgICAgIHJldHVybiBcIlNUQVRFX01JU01BVENIXCI7XG4gICAgICAgIGNhc2UgRGlzY29ubmVjdFJlYXNvbi5KT0lOX0ZBSUxVUkU6XG4gICAgICAgICAgICByZXR1cm4gXCJKT0lOX0ZBSUxVUkVcIjtcbiAgICAgICAgY2FzZSBEaXNjb25uZWN0UmVhc29uLlVOUkVDT0dOSVpFRDpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIlVOUkVDT0dOSVpFRFwiO1xuICAgIH1cbn1cbmV4cG9ydHMuZGlzY29ubmVjdFJlYXNvblRvSlNPTiA9IGRpc2Nvbm5lY3RSZWFzb25Ub0pTT047XG52YXIgUmVjb25uZWN0UmVhc29uO1xuKGZ1bmN0aW9uIChSZWNvbm5lY3RSZWFzb24pIHtcbiAgICBSZWNvbm5lY3RSZWFzb25bUmVjb25uZWN0UmVhc29uW1wiUlJfVU5LTk9XTlwiXSA9IDBdID0gXCJSUl9VTktOT1dOXCI7XG4gICAgUmVjb25uZWN0UmVhc29uW1JlY29ubmVjdFJlYXNvbltcIlJSX1NJR05BTF9ESVNDT05ORUNURURcIl0gPSAxXSA9IFwiUlJfU0lHTkFMX0RJU0NPTk5FQ1RFRFwiO1xuICAgIFJlY29ubmVjdFJlYXNvbltSZWNvbm5lY3RSZWFzb25bXCJSUl9QVUJMSVNIRVJfRkFJTEVEXCJdID0gMl0gPSBcIlJSX1BVQkxJU0hFUl9GQUlMRURcIjtcbiAgICBSZWNvbm5lY3RSZWFzb25bUmVjb25uZWN0UmVhc29uW1wiUlJfU1VCU0NSSUJFUl9GQUlMRURcIl0gPSAzXSA9IFwiUlJfU1VCU0NSSUJFUl9GQUlMRURcIjtcbiAgICBSZWNvbm5lY3RSZWFzb25bUmVjb25uZWN0UmVhc29uW1wiUlJfU1dJVENIX0NBTkRJREFURVwiXSA9IDRdID0gXCJSUl9TV0lUQ0hfQ0FORElEQVRFXCI7XG4gICAgUmVjb25uZWN0UmVhc29uW1JlY29ubmVjdFJlYXNvbltcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShSZWNvbm5lY3RSZWFzb24gPSBleHBvcnRzLlJlY29ubmVjdFJlYXNvbiB8fCAoZXhwb3J0cy5SZWNvbm5lY3RSZWFzb24gPSB7fSkpO1xuZnVuY3Rpb24gcmVjb25uZWN0UmVhc29uRnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiUlJfVU5LTk9XTlwiOlxuICAgICAgICAgICAgcmV0dXJuIFJlY29ubmVjdFJlYXNvbi5SUl9VTktOT1dOO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJSUl9TSUdOQUxfRElTQ09OTkVDVEVEXCI6XG4gICAgICAgICAgICByZXR1cm4gUmVjb25uZWN0UmVhc29uLlJSX1NJR05BTF9ESVNDT05ORUNURUQ7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSBcIlJSX1BVQkxJU0hFUl9GQUlMRURcIjpcbiAgICAgICAgICAgIHJldHVybiBSZWNvbm5lY3RSZWFzb24uUlJfUFVCTElTSEVSX0ZBSUxFRDtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICBjYXNlIFwiUlJfU1VCU0NSSUJFUl9GQUlMRURcIjpcbiAgICAgICAgICAgIHJldHVybiBSZWNvbm5lY3RSZWFzb24uUlJfU1VCU0NSSUJFUl9GQUlMRUQ7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgY2FzZSBcIlJSX1NXSVRDSF9DQU5ESURBVEVcIjpcbiAgICAgICAgICAgIHJldHVybiBSZWNvbm5lY3RSZWFzb24uUlJfU1dJVENIX0NBTkRJREFURTtcbiAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgY2FzZSBcIlVOUkVDT0dOSVpFRFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFJlY29ubmVjdFJlYXNvbi5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy5yZWNvbm5lY3RSZWFzb25Gcm9tSlNPTiA9IHJlY29ubmVjdFJlYXNvbkZyb21KU09OO1xuZnVuY3Rpb24gcmVjb25uZWN0UmVhc29uVG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgUmVjb25uZWN0UmVhc29uLlJSX1VOS05PV046XG4gICAgICAgICAgICByZXR1cm4gXCJSUl9VTktOT1dOXCI7XG4gICAgICAgIGNhc2UgUmVjb25uZWN0UmVhc29uLlJSX1NJR05BTF9ESVNDT05ORUNURUQ6XG4gICAgICAgICAgICByZXR1cm4gXCJSUl9TSUdOQUxfRElTQ09OTkVDVEVEXCI7XG4gICAgICAgIGNhc2UgUmVjb25uZWN0UmVhc29uLlJSX1BVQkxJU0hFUl9GQUlMRUQ6XG4gICAgICAgICAgICByZXR1cm4gXCJSUl9QVUJMSVNIRVJfRkFJTEVEXCI7XG4gICAgICAgIGNhc2UgUmVjb25uZWN0UmVhc29uLlJSX1NVQlNDUklCRVJfRkFJTEVEOlxuICAgICAgICAgICAgcmV0dXJuIFwiUlJfU1VCU0NSSUJFUl9GQUlMRURcIjtcbiAgICAgICAgY2FzZSBSZWNvbm5lY3RSZWFzb24uUlJfU1dJVENIX0NBTkRJREFURTpcbiAgICAgICAgICAgIHJldHVybiBcIlJSX1NXSVRDSF9DQU5ESURBVEVcIjtcbiAgICAgICAgY2FzZSBSZWNvbm5lY3RSZWFzb24uVU5SRUNPR05JWkVEOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5SRUNPR05JWkVEXCI7XG4gICAgfVxufVxuZXhwb3J0cy5yZWNvbm5lY3RSZWFzb25Ub0pTT04gPSByZWNvbm5lY3RSZWFzb25Ub0pTT047XG52YXIgU3Vic2NyaXB0aW9uRXJyb3I7XG4oZnVuY3Rpb24gKFN1YnNjcmlwdGlvbkVycm9yKSB7XG4gICAgU3Vic2NyaXB0aW9uRXJyb3JbU3Vic2NyaXB0aW9uRXJyb3JbXCJTRV9VTktOT1dOXCJdID0gMF0gPSBcIlNFX1VOS05PV05cIjtcbiAgICBTdWJzY3JpcHRpb25FcnJvcltTdWJzY3JpcHRpb25FcnJvcltcIlNFX0NPREVDX1VOU1VQUE9SVEVEXCJdID0gMV0gPSBcIlNFX0NPREVDX1VOU1VQUE9SVEVEXCI7XG4gICAgU3Vic2NyaXB0aW9uRXJyb3JbU3Vic2NyaXB0aW9uRXJyb3JbXCJTRV9UUkFDS19OT1RGT1VORFwiXSA9IDJdID0gXCJTRV9UUkFDS19OT1RGT1VORFwiO1xuICAgIFN1YnNjcmlwdGlvbkVycm9yW1N1YnNjcmlwdGlvbkVycm9yW1wiVU5SRUNPR05JWkVEXCJdID0gLTFdID0gXCJVTlJFQ09HTklaRURcIjtcbn0pKFN1YnNjcmlwdGlvbkVycm9yID0gZXhwb3J0cy5TdWJzY3JpcHRpb25FcnJvciB8fCAoZXhwb3J0cy5TdWJzY3JpcHRpb25FcnJvciA9IHt9KSk7XG5mdW5jdGlvbiBzdWJzY3JpcHRpb25FcnJvckZyb21KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSBcIlNFX1VOS05PV05cIjpcbiAgICAgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb25FcnJvci5TRV9VTktOT1dOO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJTRV9DT0RFQ19VTlNVUFBPUlRFRFwiOlxuICAgICAgICAgICAgcmV0dXJuIFN1YnNjcmlwdGlvbkVycm9yLlNFX0NPREVDX1VOU1VQUE9SVEVEO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgXCJTRV9UUkFDS19OT1RGT1VORFwiOlxuICAgICAgICAgICAgcmV0dXJuIFN1YnNjcmlwdGlvbkVycm9yLlNFX1RSQUNLX05PVEZPVU5EO1xuICAgICAgICBjYXNlIC0xOlxuICAgICAgICBjYXNlIFwiVU5SRUNPR05JWkVEXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gU3Vic2NyaXB0aW9uRXJyb3IuVU5SRUNPR05JWkVEO1xuICAgIH1cbn1cbmV4cG9ydHMuc3Vic2NyaXB0aW9uRXJyb3JGcm9tSlNPTiA9IHN1YnNjcmlwdGlvbkVycm9yRnJvbUpTT047XG5mdW5jdGlvbiBzdWJzY3JpcHRpb25FcnJvclRvSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIFN1YnNjcmlwdGlvbkVycm9yLlNFX1VOS05PV046XG4gICAgICAgICAgICByZXR1cm4gXCJTRV9VTktOT1dOXCI7XG4gICAgICAgIGNhc2UgU3Vic2NyaXB0aW9uRXJyb3IuU0VfQ09ERUNfVU5TVVBQT1JURUQ6XG4gICAgICAgICAgICByZXR1cm4gXCJTRV9DT0RFQ19VTlNVUFBPUlRFRFwiO1xuICAgICAgICBjYXNlIFN1YnNjcmlwdGlvbkVycm9yLlNFX1RSQUNLX05PVEZPVU5EOlxuICAgICAgICAgICAgcmV0dXJuIFwiU0VfVFJBQ0tfTk9URk9VTkRcIjtcbiAgICAgICAgY2FzZSBTdWJzY3JpcHRpb25FcnJvci5VTlJFQ09HTklaRUQ6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJVTlJFQ09HTklaRURcIjtcbiAgICB9XG59XG5leHBvcnRzLnN1YnNjcmlwdGlvbkVycm9yVG9KU09OID0gc3Vic2NyaXB0aW9uRXJyb3JUb0pTT047XG52YXIgUGFydGljaXBhbnRJbmZvX1N0YXRlO1xuKGZ1bmN0aW9uIChQYXJ0aWNpcGFudEluZm9fU3RhdGUpIHtcbiAgICAvKiogSk9JTklORyAtIHdlYnNvY2tldCcgY29ubmVjdGVkLCBidXQgbm90IG9mZmVyZWQgeWV0ICovXG4gICAgUGFydGljaXBhbnRJbmZvX1N0YXRlW1BhcnRpY2lwYW50SW5mb19TdGF0ZVtcIkpPSU5JTkdcIl0gPSAwXSA9IFwiSk9JTklOR1wiO1xuICAgIC8qKiBKT0lORUQgLSBzZXJ2ZXIgcmVjZWl2ZWQgY2xpZW50IG9mZmVyICovXG4gICAgUGFydGljaXBhbnRJbmZvX1N0YXRlW1BhcnRpY2lwYW50SW5mb19TdGF0ZVtcIkpPSU5FRFwiXSA9IDFdID0gXCJKT0lORURcIjtcbiAgICAvKiogQUNUSVZFIC0gSUNFIGNvbm5lY3Rpdml0eSBlc3RhYmxpc2hlZCAqL1xuICAgIFBhcnRpY2lwYW50SW5mb19TdGF0ZVtQYXJ0aWNpcGFudEluZm9fU3RhdGVbXCJBQ1RJVkVcIl0gPSAyXSA9IFwiQUNUSVZFXCI7XG4gICAgLyoqIERJU0NPTk5FQ1RFRCAtIFdTIGRpc2Nvbm5lY3RlZCAqL1xuICAgIFBhcnRpY2lwYW50SW5mb19TdGF0ZVtQYXJ0aWNpcGFudEluZm9fU3RhdGVbXCJESVNDT05ORUNURURcIl0gPSAzXSA9IFwiRElTQ09OTkVDVEVEXCI7XG4gICAgUGFydGljaXBhbnRJbmZvX1N0YXRlW1BhcnRpY2lwYW50SW5mb19TdGF0ZVtcIlVOUkVDT0dOSVpFRFwiXSA9IC0xXSA9IFwiVU5SRUNPR05JWkVEXCI7XG59KShQYXJ0aWNpcGFudEluZm9fU3RhdGUgPSBleHBvcnRzLlBhcnRpY2lwYW50SW5mb19TdGF0ZSB8fCAoZXhwb3J0cy5QYXJ0aWNpcGFudEluZm9fU3RhdGUgPSB7fSkpO1xuZnVuY3Rpb24gcGFydGljaXBhbnRJbmZvX1N0YXRlRnJvbUpTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIFwiSk9JTklOR1wiOlxuICAgICAgICAgICAgcmV0dXJuIFBhcnRpY2lwYW50SW5mb19TdGF0ZS5KT0lOSU5HO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJKT0lORURcIjpcbiAgICAgICAgICAgIHJldHVybiBQYXJ0aWNpcGFudEluZm9fU3RhdGUuSk9JTkVEO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgXCJBQ1RJVkVcIjpcbiAgICAgICAgICAgIHJldHVybiBQYXJ0aWNpcGFudEluZm9fU3RhdGUuQUNUSVZFO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgIGNhc2UgXCJESVNDT05ORUNURURcIjpcbiAgICAgICAgICAgIHJldHVybiBQYXJ0aWNpcGFudEluZm9fU3RhdGUuRElTQ09OTkVDVEVEO1xuICAgICAgICBjYXNlIC0xOlxuICAgICAgICBjYXNlIFwiVU5SRUNPR05JWkVEXCI6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gUGFydGljaXBhbnRJbmZvX1N0YXRlLlVOUkVDT0dOSVpFRDtcbiAgICB9XG59XG5leHBvcnRzLnBhcnRpY2lwYW50SW5mb19TdGF0ZUZyb21KU09OID0gcGFydGljaXBhbnRJbmZvX1N0YXRlRnJvbUpTT047XG5mdW5jdGlvbiBwYXJ0aWNpcGFudEluZm9fU3RhdGVUb0pTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSBQYXJ0aWNpcGFudEluZm9fU3RhdGUuSk9JTklORzpcbiAgICAgICAgICAgIHJldHVybiBcIkpPSU5JTkdcIjtcbiAgICAgICAgY2FzZSBQYXJ0aWNpcGFudEluZm9fU3RhdGUuSk9JTkVEOlxuICAgICAgICAgICAgcmV0dXJuIFwiSk9JTkVEXCI7XG4gICAgICAgIGNhc2UgUGFydGljaXBhbnRJbmZvX1N0YXRlLkFDVElWRTpcbiAgICAgICAgICAgIHJldHVybiBcIkFDVElWRVwiO1xuICAgICAgICBjYXNlIFBhcnRpY2lwYW50SW5mb19TdGF0ZS5ESVNDT05ORUNURUQ6XG4gICAgICAgICAgICByZXR1cm4gXCJESVNDT05ORUNURURcIjtcbiAgICAgICAgY2FzZSBQYXJ0aWNpcGFudEluZm9fU3RhdGUuVU5SRUNPR05JWkVEOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5SRUNPR05JWkVEXCI7XG4gICAgfVxufVxuZXhwb3J0cy5wYXJ0aWNpcGFudEluZm9fU3RhdGVUb0pTT04gPSBwYXJ0aWNpcGFudEluZm9fU3RhdGVUb0pTT047XG52YXIgRW5jcnlwdGlvbl9UeXBlO1xuKGZ1bmN0aW9uIChFbmNyeXB0aW9uX1R5cGUpIHtcbiAgICBFbmNyeXB0aW9uX1R5cGVbRW5jcnlwdGlvbl9UeXBlW1wiTk9ORVwiXSA9IDBdID0gXCJOT05FXCI7XG4gICAgRW5jcnlwdGlvbl9UeXBlW0VuY3J5cHRpb25fVHlwZVtcIkdDTVwiXSA9IDFdID0gXCJHQ01cIjtcbiAgICBFbmNyeXB0aW9uX1R5cGVbRW5jcnlwdGlvbl9UeXBlW1wiQ1VTVE9NXCJdID0gMl0gPSBcIkNVU1RPTVwiO1xuICAgIEVuY3J5cHRpb25fVHlwZVtFbmNyeXB0aW9uX1R5cGVbXCJVTlJFQ09HTklaRURcIl0gPSAtMV0gPSBcIlVOUkVDT0dOSVpFRFwiO1xufSkoRW5jcnlwdGlvbl9UeXBlID0gZXhwb3J0cy5FbmNyeXB0aW9uX1R5cGUgfHwgKGV4cG9ydHMuRW5jcnlwdGlvbl9UeXBlID0ge30pKTtcbmZ1bmN0aW9uIGVuY3J5cHRpb25fVHlwZUZyb21KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSBcIk5PTkVcIjpcbiAgICAgICAgICAgIHJldHVybiBFbmNyeXB0aW9uX1R5cGUuTk9ORTtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIFwiR0NNXCI6XG4gICAgICAgICAgICByZXR1cm4gRW5jcnlwdGlvbl9UeXBlLkdDTTtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIFwiQ1VTVE9NXCI6XG4gICAgICAgICAgICByZXR1cm4gRW5jcnlwdGlvbl9UeXBlLkNVU1RPTTtcbiAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgY2FzZSBcIlVOUkVDT0dOSVpFRFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIEVuY3J5cHRpb25fVHlwZS5VTlJFQ09HTklaRUQ7XG4gICAgfVxufVxuZXhwb3J0cy5lbmNyeXB0aW9uX1R5cGVGcm9tSlNPTiA9IGVuY3J5cHRpb25fVHlwZUZyb21KU09OO1xuZnVuY3Rpb24gZW5jcnlwdGlvbl9UeXBlVG9KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgRW5jcnlwdGlvbl9UeXBlLk5PTkU6XG4gICAgICAgICAgICByZXR1cm4gXCJOT05FXCI7XG4gICAgICAgIGNhc2UgRW5jcnlwdGlvbl9UeXBlLkdDTTpcbiAgICAgICAgICAgIHJldHVybiBcIkdDTVwiO1xuICAgICAgICBjYXNlIEVuY3J5cHRpb25fVHlwZS5DVVNUT006XG4gICAgICAgICAgICByZXR1cm4gXCJDVVNUT01cIjtcbiAgICAgICAgY2FzZSBFbmNyeXB0aW9uX1R5cGUuVU5SRUNPR05JWkVEOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5SRUNPR05JWkVEXCI7XG4gICAgfVxufVxuZXhwb3J0cy5lbmNyeXB0aW9uX1R5cGVUb0pTT04gPSBlbmNyeXB0aW9uX1R5cGVUb0pTT047XG52YXIgRGF0YVBhY2tldF9LaW5kO1xuKGZ1bmN0aW9uIChEYXRhUGFja2V0X0tpbmQpIHtcbiAgICBEYXRhUGFja2V0X0tpbmRbRGF0YVBhY2tldF9LaW5kW1wiUkVMSUFCTEVcIl0gPSAwXSA9IFwiUkVMSUFCTEVcIjtcbiAgICBEYXRhUGFja2V0X0tpbmRbRGF0YVBhY2tldF9LaW5kW1wiTE9TU1lcIl0gPSAxXSA9IFwiTE9TU1lcIjtcbiAgICBEYXRhUGFja2V0X0tpbmRbRGF0YVBhY2tldF9LaW5kW1wiVU5SRUNPR05JWkVEXCJdID0gLTFdID0gXCJVTlJFQ09HTklaRURcIjtcbn0pKERhdGFQYWNrZXRfS2luZCA9IGV4cG9ydHMuRGF0YVBhY2tldF9LaW5kIHx8IChleHBvcnRzLkRhdGFQYWNrZXRfS2luZCA9IHt9KSk7XG5mdW5jdGlvbiBkYXRhUGFja2V0X0tpbmRGcm9tSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgXCJSRUxJQUJMRVwiOlxuICAgICAgICAgICAgcmV0dXJuIERhdGFQYWNrZXRfS2luZC5SRUxJQUJMRTtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIFwiTE9TU1lcIjpcbiAgICAgICAgICAgIHJldHVybiBEYXRhUGFja2V0X0tpbmQuTE9TU1k7XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBEYXRhUGFja2V0X0tpbmQuVU5SRUNPR05JWkVEO1xuICAgIH1cbn1cbmV4cG9ydHMuZGF0YVBhY2tldF9LaW5kRnJvbUpTT04gPSBkYXRhUGFja2V0X0tpbmRGcm9tSlNPTjtcbmZ1bmN0aW9uIGRhdGFQYWNrZXRfS2luZFRvSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIERhdGFQYWNrZXRfS2luZC5SRUxJQUJMRTpcbiAgICAgICAgICAgIHJldHVybiBcIlJFTElBQkxFXCI7XG4gICAgICAgIGNhc2UgRGF0YVBhY2tldF9LaW5kLkxPU1NZOlxuICAgICAgICAgICAgcmV0dXJuIFwiTE9TU1lcIjtcbiAgICAgICAgY2FzZSBEYXRhUGFja2V0X0tpbmQuVU5SRUNPR05JWkVEOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5SRUNPR05JWkVEXCI7XG4gICAgfVxufVxuZXhwb3J0cy5kYXRhUGFja2V0X0tpbmRUb0pTT04gPSBkYXRhUGFja2V0X0tpbmRUb0pTT047XG52YXIgU2VydmVySW5mb19FZGl0aW9uO1xuKGZ1bmN0aW9uIChTZXJ2ZXJJbmZvX0VkaXRpb24pIHtcbiAgICBTZXJ2ZXJJbmZvX0VkaXRpb25bU2VydmVySW5mb19FZGl0aW9uW1wiU3RhbmRhcmRcIl0gPSAwXSA9IFwiU3RhbmRhcmRcIjtcbiAgICBTZXJ2ZXJJbmZvX0VkaXRpb25bU2VydmVySW5mb19FZGl0aW9uW1wiQ2xvdWRcIl0gPSAxXSA9IFwiQ2xvdWRcIjtcbiAgICBTZXJ2ZXJJbmZvX0VkaXRpb25bU2VydmVySW5mb19FZGl0aW9uW1wiVU5SRUNPR05JWkVEXCJdID0gLTFdID0gXCJVTlJFQ09HTklaRURcIjtcbn0pKFNlcnZlckluZm9fRWRpdGlvbiA9IGV4cG9ydHMuU2VydmVySW5mb19FZGl0aW9uIHx8IChleHBvcnRzLlNlcnZlckluZm9fRWRpdGlvbiA9IHt9KSk7XG5mdW5jdGlvbiBzZXJ2ZXJJbmZvX0VkaXRpb25Gcm9tSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgXCJTdGFuZGFyZFwiOlxuICAgICAgICAgICAgcmV0dXJuIFNlcnZlckluZm9fRWRpdGlvbi5TdGFuZGFyZDtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICBjYXNlIFwiQ2xvdWRcIjpcbiAgICAgICAgICAgIHJldHVybiBTZXJ2ZXJJbmZvX0VkaXRpb24uQ2xvdWQ7XG4gICAgICAgIGNhc2UgLTE6XG4gICAgICAgIGNhc2UgXCJVTlJFQ09HTklaRURcIjpcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBTZXJ2ZXJJbmZvX0VkaXRpb24uVU5SRUNPR05JWkVEO1xuICAgIH1cbn1cbmV4cG9ydHMuc2VydmVySW5mb19FZGl0aW9uRnJvbUpTT04gPSBzZXJ2ZXJJbmZvX0VkaXRpb25Gcm9tSlNPTjtcbmZ1bmN0aW9uIHNlcnZlckluZm9fRWRpdGlvblRvSlNPTihvYmplY3QpIHtcbiAgICBzd2l0Y2ggKG9iamVjdCkge1xuICAgICAgICBjYXNlIFNlcnZlckluZm9fRWRpdGlvbi5TdGFuZGFyZDpcbiAgICAgICAgICAgIHJldHVybiBcIlN0YW5kYXJkXCI7XG4gICAgICAgIGNhc2UgU2VydmVySW5mb19FZGl0aW9uLkNsb3VkOlxuICAgICAgICAgICAgcmV0dXJuIFwiQ2xvdWRcIjtcbiAgICAgICAgY2FzZSBTZXJ2ZXJJbmZvX0VkaXRpb24uVU5SRUNPR05JWkVEOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5SRUNPR05JWkVEXCI7XG4gICAgfVxufVxuZXhwb3J0cy5zZXJ2ZXJJbmZvX0VkaXRpb25Ub0pTT04gPSBzZXJ2ZXJJbmZvX0VkaXRpb25Ub0pTT047XG52YXIgQ2xpZW50SW5mb19TREs7XG4oZnVuY3Rpb24gKENsaWVudEluZm9fU0RLKSB7XG4gICAgQ2xpZW50SW5mb19TREtbQ2xpZW50SW5mb19TREtbXCJVTktOT1dOXCJdID0gMF0gPSBcIlVOS05PV05cIjtcbiAgICBDbGllbnRJbmZvX1NES1tDbGllbnRJbmZvX1NES1tcIkpTXCJdID0gMV0gPSBcIkpTXCI7XG4gICAgQ2xpZW50SW5mb19TREtbQ2xpZW50SW5mb19TREtbXCJTV0lGVFwiXSA9IDJdID0gXCJTV0lGVFwiO1xuICAgIENsaWVudEluZm9fU0RLW0NsaWVudEluZm9fU0RLW1wiQU5EUk9JRFwiXSA9IDNdID0gXCJBTkRST0lEXCI7XG4gICAgQ2xpZW50SW5mb19TREtbQ2xpZW50SW5mb19TREtbXCJGTFVUVEVSXCJdID0gNF0gPSBcIkZMVVRURVJcIjtcbiAgICBDbGllbnRJbmZvX1NES1tDbGllbnRJbmZvX1NES1tcIkdPXCJdID0gNV0gPSBcIkdPXCI7XG4gICAgQ2xpZW50SW5mb19TREtbQ2xpZW50SW5mb19TREtbXCJVTklUWVwiXSA9IDZdID0gXCJVTklUWVwiO1xuICAgIENsaWVudEluZm9fU0RLW0NsaWVudEluZm9fU0RLW1wiUkVBQ1RfTkFUSVZFXCJdID0gN10gPSBcIlJFQUNUX05BVElWRVwiO1xuICAgIENsaWVudEluZm9fU0RLW0NsaWVudEluZm9fU0RLW1wiUlVTVFwiXSA9IDhdID0gXCJSVVNUXCI7XG4gICAgQ2xpZW50SW5mb19TREtbQ2xpZW50SW5mb19TREtbXCJQWVRIT05cIl0gPSA5XSA9IFwiUFlUSE9OXCI7XG4gICAgQ2xpZW50SW5mb19TREtbQ2xpZW50SW5mb19TREtbXCJDUFBcIl0gPSAxMF0gPSBcIkNQUFwiO1xuICAgIENsaWVudEluZm9fU0RLW0NsaWVudEluZm9fU0RLW1wiVU5SRUNPR05JWkVEXCJdID0gLTFdID0gXCJVTlJFQ09HTklaRURcIjtcbn0pKENsaWVudEluZm9fU0RLID0gZXhwb3J0cy5DbGllbnRJbmZvX1NESyB8fCAoZXhwb3J0cy5DbGllbnRJbmZvX1NESyA9IHt9KSk7XG5mdW5jdGlvbiBjbGllbnRJbmZvX1NES0Zyb21KU09OKG9iamVjdCkge1xuICAgIHN3aXRjaCAob2JqZWN0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSBcIlVOS05PV05cIjpcbiAgICAgICAgICAgIHJldHVybiBDbGllbnRJbmZvX1NESy5VTktOT1dOO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgXCJKU1wiOlxuICAgICAgICAgICAgcmV0dXJuIENsaWVudEluZm9fU0RLLkpTO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgIGNhc2UgXCJTV0lGVFwiOlxuICAgICAgICAgICAgcmV0dXJuIENsaWVudEluZm9fU0RLLlNXSUZUO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgIGNhc2UgXCJBTkRST0lEXCI6XG4gICAgICAgICAgICByZXR1cm4gQ2xpZW50SW5mb19TREsuQU5EUk9JRDtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICBjYXNlIFwiRkxVVFRFUlwiOlxuICAgICAgICAgICAgcmV0dXJuIENsaWVudEluZm9fU0RLLkZMVVRURVI7XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgY2FzZSBcIkdPXCI6XG4gICAgICAgICAgICByZXR1cm4gQ2xpZW50SW5mb19TREsuR087XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgY2FzZSBcIlVOSVRZXCI6XG4gICAgICAgICAgICByZXR1cm4gQ2xpZW50SW5mb19TREsuVU5JVFk7XG4gICAgICAgIGNhc2UgNzpcbiAgICAgICAgY2FzZSBcIlJFQUNUX05BVElWRVwiOlxuICAgICAgICAgICAgcmV0dXJuIENsaWVudEluZm9fU0RLLlJFQUNUX05BVElWRTtcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICBjYXNlIFwiUlVTVFwiOlxuICAgICAgICAgICAgcmV0dXJuIENsaWVudEluZm9fU0RLLlJVU1Q7XG4gICAgICAgIGNhc2UgOTpcbiAgICAgICAgY2FzZSBcIlBZVEhPTlwiOlxuICAgICAgICAgICAgcmV0dXJuIENsaWVudEluZm9fU0RLLlBZVEhPTjtcbiAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgY2FzZSBcIkNQUFwiOlxuICAgICAgICAgICAgcmV0dXJuIENsaWVudEluZm9fU0RLLkNQUDtcbiAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgY2FzZSBcIlVOUkVDT0dOSVpFRFwiOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIENsaWVudEluZm9fU0RLLlVOUkVDT0dOSVpFRDtcbiAgICB9XG59XG5leHBvcnRzLmNsaWVudEluZm9fU0RLRnJvbUpTT04gPSBjbGllbnRJbmZvX1NES0Zyb21KU09OO1xuZnVuY3Rpb24gY2xpZW50SW5mb19TREtUb0pTT04ob2JqZWN0KSB7XG4gICAgc3dpdGNoIChvYmplY3QpIHtcbiAgICAgICAgY2FzZSBDbGllbnRJbmZvX1NESy5VTktOT1dOOlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5LTk9XTlwiO1xuICAgICAgICBjYXNlIENsaWVudEluZm9fU0RLLkpTOlxuICAgICAgICAgICAgcmV0dXJuIFwiSlNcIjtcbiAgICAgICAgY2FzZSBDbGllbnRJbmZvX1NESy5TV0lGVDpcbiAgICAgICAgICAgIHJldHVybiBcIlNXSUZUXCI7XG4gICAgICAgIGNhc2UgQ2xpZW50SW5mb19TREsuQU5EUk9JRDpcbiAgICAgICAgICAgIHJldHVybiBcIkFORFJPSURcIjtcbiAgICAgICAgY2FzZSBDbGllbnRJbmZvX1NESy5GTFVUVEVSOlxuICAgICAgICAgICAgcmV0dXJuIFwiRkxVVFRFUlwiO1xuICAgICAgICBjYXNlIENsaWVudEluZm9fU0RLLkdPOlxuICAgICAgICAgICAgcmV0dXJuIFwiR09cIjtcbiAgICAgICAgY2FzZSBDbGllbnRJbmZvX1NESy5VTklUWTpcbiAgICAgICAgICAgIHJldHVybiBcIlVOSVRZXCI7XG4gICAgICAgIGNhc2UgQ2xpZW50SW5mb19TREsuUkVBQ1RfTkFUSVZFOlxuICAgICAgICAgICAgcmV0dXJuIFwiUkVBQ1RfTkFUSVZFXCI7XG4gICAgICAgIGNhc2UgQ2xpZW50SW5mb19TREsuUlVTVDpcbiAgICAgICAgICAgIHJldHVybiBcIlJVU1RcIjtcbiAgICAgICAgY2FzZSBDbGllbnRJbmZvX1NESy5QWVRIT046XG4gICAgICAgICAgICByZXR1cm4gXCJQWVRIT05cIjtcbiAgICAgICAgY2FzZSBDbGllbnRJbmZvX1NESy5DUFA6XG4gICAgICAgICAgICByZXR1cm4gXCJDUFBcIjtcbiAgICAgICAgY2FzZSBDbGllbnRJbmZvX1NESy5VTlJFQ09HTklaRUQ6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJVTlJFQ09HTklaRURcIjtcbiAgICB9XG59XG5leHBvcnRzLmNsaWVudEluZm9fU0RLVG9KU09OID0gY2xpZW50SW5mb19TREtUb0pTT047XG5mdW5jdGlvbiBjcmVhdGVCYXNlUm9vbSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzaWQ6IFwiXCIsXG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIGVtcHR5VGltZW91dDogMCxcbiAgICAgICAgbWF4UGFydGljaXBhbnRzOiAwLFxuICAgICAgICBjcmVhdGlvblRpbWU6IDAsXG4gICAgICAgIHR1cm5QYXNzd29yZDogXCJcIixcbiAgICAgICAgZW5hYmxlZENvZGVjczogW10sXG4gICAgICAgIG1ldGFkYXRhOiBcIlwiLFxuICAgICAgICBudW1QYXJ0aWNpcGFudHM6IDAsXG4gICAgICAgIG51bVB1Ymxpc2hlcnM6IDAsXG4gICAgICAgIGFjdGl2ZVJlY29yZGluZzogZmFsc2UsXG4gICAgfTtcbn1cbmV4cG9ydHMuUm9vbSA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnNpZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2Uuc2lkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5uYW1lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5lbXB0eVRpbWVvdXQgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjQpLnVpbnQzMihtZXNzYWdlLmVtcHR5VGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubWF4UGFydGljaXBhbnRzICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDMyKS51aW50MzIobWVzc2FnZS5tYXhQYXJ0aWNpcGFudHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmNyZWF0aW9uVGltZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0MCkuaW50NjQobWVzc2FnZS5jcmVhdGlvblRpbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnR1cm5QYXNzd29yZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig1MCkuc3RyaW5nKG1lc3NhZ2UudHVyblBhc3N3b3JkKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5lbmFibGVkQ29kZWNzKSB7XG4gICAgICAgICAgICBleHBvcnRzLkNvZGVjLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDU4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm1ldGFkYXRhICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDY2KS5zdHJpbmcobWVzc2FnZS5tZXRhZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubnVtUGFydGljaXBhbnRzICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDcyKS51aW50MzIobWVzc2FnZS5udW1QYXJ0aWNpcGFudHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm51bVB1Ymxpc2hlcnMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoODgpLnVpbnQzMihtZXNzYWdlLm51bVB1Ymxpc2hlcnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmFjdGl2ZVJlY29yZGluZyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4MCkuYm9vbChtZXNzYWdlLmFjdGl2ZVJlY29yZGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUm9vbSgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVtcHR5VGltZW91dCA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1heFBhcnRpY2lwYW50cyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNyZWF0aW9uVGltZSA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50dXJuUGFzc3dvcmQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmFibGVkQ29kZWNzLnB1c2goZXhwb3J0cy5Db2RlYy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1ldGFkYXRhID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubnVtUGFydGljaXBhbnRzID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm51bVB1Ymxpc2hlcnMgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWN0aXZlUmVjb3JkaW5nID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2lkOiBpc1NldChvYmplY3Quc2lkKSA/IFN0cmluZyhvYmplY3Quc2lkKSA6IFwiXCIsXG4gICAgICAgICAgICBuYW1lOiBpc1NldChvYmplY3QubmFtZSkgPyBTdHJpbmcob2JqZWN0Lm5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIGVtcHR5VGltZW91dDogaXNTZXQob2JqZWN0LmVtcHR5VGltZW91dCkgPyBOdW1iZXIob2JqZWN0LmVtcHR5VGltZW91dCkgOiAwLFxuICAgICAgICAgICAgbWF4UGFydGljaXBhbnRzOiBpc1NldChvYmplY3QubWF4UGFydGljaXBhbnRzKSA/IE51bWJlcihvYmplY3QubWF4UGFydGljaXBhbnRzKSA6IDAsXG4gICAgICAgICAgICBjcmVhdGlvblRpbWU6IGlzU2V0KG9iamVjdC5jcmVhdGlvblRpbWUpID8gTnVtYmVyKG9iamVjdC5jcmVhdGlvblRpbWUpIDogMCxcbiAgICAgICAgICAgIHR1cm5QYXNzd29yZDogaXNTZXQob2JqZWN0LnR1cm5QYXNzd29yZCkgPyBTdHJpbmcob2JqZWN0LnR1cm5QYXNzd29yZCkgOiBcIlwiLFxuICAgICAgICAgICAgZW5hYmxlZENvZGVjczogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QuZW5hYmxlZENvZGVjcylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5lbmFibGVkQ29kZWNzLm1hcCgoZSkgPT4gZXhwb3J0cy5Db2RlYy5mcm9tSlNPTihlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgbWV0YWRhdGE6IGlzU2V0KG9iamVjdC5tZXRhZGF0YSkgPyBTdHJpbmcob2JqZWN0Lm1ldGFkYXRhKSA6IFwiXCIsXG4gICAgICAgICAgICBudW1QYXJ0aWNpcGFudHM6IGlzU2V0KG9iamVjdC5udW1QYXJ0aWNpcGFudHMpID8gTnVtYmVyKG9iamVjdC5udW1QYXJ0aWNpcGFudHMpIDogMCxcbiAgICAgICAgICAgIG51bVB1Ymxpc2hlcnM6IGlzU2V0KG9iamVjdC5udW1QdWJsaXNoZXJzKSA/IE51bWJlcihvYmplY3QubnVtUHVibGlzaGVycykgOiAwLFxuICAgICAgICAgICAgYWN0aXZlUmVjb3JkaW5nOiBpc1NldChvYmplY3QuYWN0aXZlUmVjb3JkaW5nKSA/IEJvb2xlYW4ob2JqZWN0LmFjdGl2ZVJlY29yZGluZykgOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnNpZCAhPT0gdW5kZWZpbmVkICYmIChvYmouc2lkID0gbWVzc2FnZS5zaWQpO1xuICAgICAgICBtZXNzYWdlLm5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLm5hbWUgPSBtZXNzYWdlLm5hbWUpO1xuICAgICAgICBtZXNzYWdlLmVtcHR5VGltZW91dCAhPT0gdW5kZWZpbmVkICYmIChvYmouZW1wdHlUaW1lb3V0ID0gTWF0aC5yb3VuZChtZXNzYWdlLmVtcHR5VGltZW91dCkpO1xuICAgICAgICBtZXNzYWdlLm1heFBhcnRpY2lwYW50cyAhPT0gdW5kZWZpbmVkICYmIChvYmoubWF4UGFydGljaXBhbnRzID0gTWF0aC5yb3VuZChtZXNzYWdlLm1heFBhcnRpY2lwYW50cykpO1xuICAgICAgICBtZXNzYWdlLmNyZWF0aW9uVGltZSAhPT0gdW5kZWZpbmVkICYmIChvYmouY3JlYXRpb25UaW1lID0gTWF0aC5yb3VuZChtZXNzYWdlLmNyZWF0aW9uVGltZSkpO1xuICAgICAgICBtZXNzYWdlLnR1cm5QYXNzd29yZCAhPT0gdW5kZWZpbmVkICYmIChvYmoudHVyblBhc3N3b3JkID0gbWVzc2FnZS50dXJuUGFzc3dvcmQpO1xuICAgICAgICBpZiAobWVzc2FnZS5lbmFibGVkQ29kZWNzKSB7XG4gICAgICAgICAgICBvYmouZW5hYmxlZENvZGVjcyA9IG1lc3NhZ2UuZW5hYmxlZENvZGVjcy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLkNvZGVjLnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouZW5hYmxlZENvZGVjcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIG1lc3NhZ2UubWV0YWRhdGEgIT09IHVuZGVmaW5lZCAmJiAob2JqLm1ldGFkYXRhID0gbWVzc2FnZS5tZXRhZGF0YSk7XG4gICAgICAgIG1lc3NhZ2UubnVtUGFydGljaXBhbnRzICE9PSB1bmRlZmluZWQgJiYgKG9iai5udW1QYXJ0aWNpcGFudHMgPSBNYXRoLnJvdW5kKG1lc3NhZ2UubnVtUGFydGljaXBhbnRzKSk7XG4gICAgICAgIG1lc3NhZ2UubnVtUHVibGlzaGVycyAhPT0gdW5kZWZpbmVkICYmIChvYmoubnVtUHVibGlzaGVycyA9IE1hdGgucm91bmQobWVzc2FnZS5udW1QdWJsaXNoZXJzKSk7XG4gICAgICAgIG1lc3NhZ2UuYWN0aXZlUmVjb3JkaW5nICE9PSB1bmRlZmluZWQgJiYgKG9iai5hY3RpdmVSZWNvcmRpbmcgPSBtZXNzYWdlLmFjdGl2ZVJlY29yZGluZyk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2osIF9rLCBfbDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSb29tKCk7XG4gICAgICAgIG1lc3NhZ2Uuc2lkID0gKF9hID0gb2JqZWN0LnNpZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5uYW1lID0gKF9iID0gb2JqZWN0Lm5hbWUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuZW1wdHlUaW1lb3V0ID0gKF9jID0gb2JqZWN0LmVtcHR5VGltZW91dCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMDtcbiAgICAgICAgbWVzc2FnZS5tYXhQYXJ0aWNpcGFudHMgPSAoX2QgPSBvYmplY3QubWF4UGFydGljaXBhbnRzKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAwO1xuICAgICAgICBtZXNzYWdlLmNyZWF0aW9uVGltZSA9IChfZSA9IG9iamVjdC5jcmVhdGlvblRpbWUpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IDA7XG4gICAgICAgIG1lc3NhZ2UudHVyblBhc3N3b3JkID0gKF9mID0gb2JqZWN0LnR1cm5QYXNzd29yZCkgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5lbmFibGVkQ29kZWNzID0gKChfZyA9IG9iamVjdC5lbmFibGVkQ29kZWNzKSA9PT0gbnVsbCB8fCBfZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2cubWFwKChlKSA9PiBleHBvcnRzLkNvZGVjLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2UubWV0YWRhdGEgPSAoX2ggPSBvYmplY3QubWV0YWRhdGEpICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UubnVtUGFydGljaXBhbnRzID0gKF9qID0gb2JqZWN0Lm51bVBhcnRpY2lwYW50cykgIT09IG51bGwgJiYgX2ogIT09IHZvaWQgMCA/IF9qIDogMDtcbiAgICAgICAgbWVzc2FnZS5udW1QdWJsaXNoZXJzID0gKF9rID0gb2JqZWN0Lm51bVB1Ymxpc2hlcnMpICE9PSBudWxsICYmIF9rICE9PSB2b2lkIDAgPyBfayA6IDA7XG4gICAgICAgIG1lc3NhZ2UuYWN0aXZlUmVjb3JkaW5nID0gKF9sID0gb2JqZWN0LmFjdGl2ZVJlY29yZGluZykgIT09IG51bGwgJiYgX2wgIT09IHZvaWQgMCA/IF9sIDogZmFsc2U7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUNvZGVjKCkge1xuICAgIHJldHVybiB7IG1pbWU6IFwiXCIsIGZtdHBMaW5lOiBcIlwiIH07XG59XG5leHBvcnRzLkNvZGVjID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UubWltZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UubWltZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZm10cExpbmUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLmZtdHBMaW5lKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VDb2RlYygpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWltZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZtdHBMaW5lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtaW1lOiBpc1NldChvYmplY3QubWltZSkgPyBTdHJpbmcob2JqZWN0Lm1pbWUpIDogXCJcIixcbiAgICAgICAgICAgIGZtdHBMaW5lOiBpc1NldChvYmplY3QuZm10cExpbmUpID8gU3RyaW5nKG9iamVjdC5mbXRwTGluZSkgOiBcIlwiLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UubWltZSAhPT0gdW5kZWZpbmVkICYmIChvYmoubWltZSA9IG1lc3NhZ2UubWltZSk7XG4gICAgICAgIG1lc3NhZ2UuZm10cExpbmUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmZtdHBMaW5lID0gbWVzc2FnZS5mbXRwTGluZSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VDb2RlYygpO1xuICAgICAgICBtZXNzYWdlLm1pbWUgPSAoX2EgPSBvYmplY3QubWltZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5mbXRwTGluZSA9IChfYiA9IG9iamVjdC5mbXRwTGluZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlUGxheW91dERlbGF5KCkge1xuICAgIHJldHVybiB7IGVuYWJsZWQ6IGZhbHNlLCBtaW46IDAsIG1heDogMCB9O1xufVxuZXhwb3J0cy5QbGF5b3V0RGVsYXkgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5lbmFibGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDgpLmJvb2wobWVzc2FnZS5lbmFibGVkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5taW4gIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTYpLnVpbnQzMihtZXNzYWdlLm1pbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubWF4ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI0KS51aW50MzIobWVzc2FnZS5tYXgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVBsYXlvdXREZWxheSgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5hYmxlZCA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5taW4gPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tYXggPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IGlzU2V0KG9iamVjdC5lbmFibGVkKSA/IEJvb2xlYW4ob2JqZWN0LmVuYWJsZWQpIDogZmFsc2UsXG4gICAgICAgICAgICBtaW46IGlzU2V0KG9iamVjdC5taW4pID8gTnVtYmVyKG9iamVjdC5taW4pIDogMCxcbiAgICAgICAgICAgIG1heDogaXNTZXQob2JqZWN0Lm1heCkgPyBOdW1iZXIob2JqZWN0Lm1heCkgOiAwLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UuZW5hYmxlZCAhPT0gdW5kZWZpbmVkICYmIChvYmouZW5hYmxlZCA9IG1lc3NhZ2UuZW5hYmxlZCk7XG4gICAgICAgIG1lc3NhZ2UubWluICE9PSB1bmRlZmluZWQgJiYgKG9iai5taW4gPSBNYXRoLnJvdW5kKG1lc3NhZ2UubWluKSk7XG4gICAgICAgIG1lc3NhZ2UubWF4ICE9PSB1bmRlZmluZWQgJiYgKG9iai5tYXggPSBNYXRoLnJvdW5kKG1lc3NhZ2UubWF4KSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUGxheW91dERlbGF5KCk7XG4gICAgICAgIG1lc3NhZ2UuZW5hYmxlZCA9IChfYSA9IG9iamVjdC5lbmFibGVkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZTtcbiAgICAgICAgbWVzc2FnZS5taW4gPSAoX2IgPSBvYmplY3QubWluKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwO1xuICAgICAgICBtZXNzYWdlLm1heCA9IChfYyA9IG9iamVjdC5tYXgpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IDA7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVBhcnRpY2lwYW50UGVybWlzc2lvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjYW5TdWJzY3JpYmU6IGZhbHNlLFxuICAgICAgICBjYW5QdWJsaXNoOiBmYWxzZSxcbiAgICAgICAgY2FuUHVibGlzaERhdGE6IGZhbHNlLFxuICAgICAgICBjYW5QdWJsaXNoU291cmNlczogW10sXG4gICAgICAgIGhpZGRlbjogZmFsc2UsXG4gICAgICAgIHJlY29yZGVyOiBmYWxzZSxcbiAgICAgICAgY2FuVXBkYXRlTWV0YWRhdGE6IGZhbHNlLFxuICAgIH07XG59XG5leHBvcnRzLlBhcnRpY2lwYW50UGVybWlzc2lvbiA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmNhblN1YnNjcmliZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4KS5ib29sKG1lc3NhZ2UuY2FuU3Vic2NyaWJlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5jYW5QdWJsaXNoID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE2KS5ib29sKG1lc3NhZ2UuY2FuUHVibGlzaCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuY2FuUHVibGlzaERhdGEgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjQpLmJvb2wobWVzc2FnZS5jYW5QdWJsaXNoRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgd3JpdGVyLnVpbnQzMig3NCkuZm9yaygpO1xuICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5jYW5QdWJsaXNoU291cmNlcykge1xuICAgICAgICAgICAgd3JpdGVyLmludDMyKHYpO1xuICAgICAgICB9XG4gICAgICAgIHdyaXRlci5sZGVsaW0oKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuaGlkZGVuID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDU2KS5ib29sKG1lc3NhZ2UuaGlkZGVuKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5yZWNvcmRlciA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig2NCkuYm9vbChtZXNzYWdlLnJlY29yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5jYW5VcGRhdGVNZXRhZGF0YSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4MCkuYm9vbChtZXNzYWdlLmNhblVwZGF0ZU1ldGFkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VQYXJ0aWNpcGFudFBlcm1pc3Npb24oKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNhblN1YnNjcmliZSA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jYW5QdWJsaXNoID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNhblB1Ymxpc2hEYXRhID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBpZiAoKHRhZyAmIDcpID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmQyID0gcmVhZGVyLnVpbnQzMigpICsgcmVhZGVyLnBvcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2FuUHVibGlzaFNvdXJjZXMucHVzaChyZWFkZXIuaW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNhblB1Ymxpc2hTb3VyY2VzLnB1c2gocmVhZGVyLmludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5oaWRkZW4gPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVjb3JkZXIgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNhblVwZGF0ZU1ldGFkYXRhID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2FuU3Vic2NyaWJlOiBpc1NldChvYmplY3QuY2FuU3Vic2NyaWJlKSA/IEJvb2xlYW4ob2JqZWN0LmNhblN1YnNjcmliZSkgOiBmYWxzZSxcbiAgICAgICAgICAgIGNhblB1Ymxpc2g6IGlzU2V0KG9iamVjdC5jYW5QdWJsaXNoKSA/IEJvb2xlYW4ob2JqZWN0LmNhblB1Ymxpc2gpIDogZmFsc2UsXG4gICAgICAgICAgICBjYW5QdWJsaXNoRGF0YTogaXNTZXQob2JqZWN0LmNhblB1Ymxpc2hEYXRhKSA/IEJvb2xlYW4ob2JqZWN0LmNhblB1Ymxpc2hEYXRhKSA6IGZhbHNlLFxuICAgICAgICAgICAgY2FuUHVibGlzaFNvdXJjZXM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmNhblB1Ymxpc2hTb3VyY2VzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LmNhblB1Ymxpc2hTb3VyY2VzLm1hcCgoZSkgPT4gdHJhY2tTb3VyY2VGcm9tSlNPTihlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgaGlkZGVuOiBpc1NldChvYmplY3QuaGlkZGVuKSA/IEJvb2xlYW4ob2JqZWN0LmhpZGRlbikgOiBmYWxzZSxcbiAgICAgICAgICAgIHJlY29yZGVyOiBpc1NldChvYmplY3QucmVjb3JkZXIpID8gQm9vbGVhbihvYmplY3QucmVjb3JkZXIpIDogZmFsc2UsXG4gICAgICAgICAgICBjYW5VcGRhdGVNZXRhZGF0YTogaXNTZXQob2JqZWN0LmNhblVwZGF0ZU1ldGFkYXRhKSA/IEJvb2xlYW4ob2JqZWN0LmNhblVwZGF0ZU1ldGFkYXRhKSA6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UuY2FuU3Vic2NyaWJlICE9PSB1bmRlZmluZWQgJiYgKG9iai5jYW5TdWJzY3JpYmUgPSBtZXNzYWdlLmNhblN1YnNjcmliZSk7XG4gICAgICAgIG1lc3NhZ2UuY2FuUHVibGlzaCAhPT0gdW5kZWZpbmVkICYmIChvYmouY2FuUHVibGlzaCA9IG1lc3NhZ2UuY2FuUHVibGlzaCk7XG4gICAgICAgIG1lc3NhZ2UuY2FuUHVibGlzaERhdGEgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNhblB1Ymxpc2hEYXRhID0gbWVzc2FnZS5jYW5QdWJsaXNoRGF0YSk7XG4gICAgICAgIGlmIChtZXNzYWdlLmNhblB1Ymxpc2hTb3VyY2VzKSB7XG4gICAgICAgICAgICBvYmouY2FuUHVibGlzaFNvdXJjZXMgPSBtZXNzYWdlLmNhblB1Ymxpc2hTb3VyY2VzLm1hcCgoZSkgPT4gdHJhY2tTb3VyY2VUb0pTT04oZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLmNhblB1Ymxpc2hTb3VyY2VzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgbWVzc2FnZS5oaWRkZW4gIT09IHVuZGVmaW5lZCAmJiAob2JqLmhpZGRlbiA9IG1lc3NhZ2UuaGlkZGVuKTtcbiAgICAgICAgbWVzc2FnZS5yZWNvcmRlciAhPT0gdW5kZWZpbmVkICYmIChvYmoucmVjb3JkZXIgPSBtZXNzYWdlLnJlY29yZGVyKTtcbiAgICAgICAgbWVzc2FnZS5jYW5VcGRhdGVNZXRhZGF0YSAhPT0gdW5kZWZpbmVkICYmIChvYmouY2FuVXBkYXRlTWV0YWRhdGEgPSBtZXNzYWdlLmNhblVwZGF0ZU1ldGFkYXRhKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2c7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUGFydGljaXBhbnRQZXJtaXNzaW9uKCk7XG4gICAgICAgIG1lc3NhZ2UuY2FuU3Vic2NyaWJlID0gKF9hID0gb2JqZWN0LmNhblN1YnNjcmliZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2UuY2FuUHVibGlzaCA9IChfYiA9IG9iamVjdC5jYW5QdWJsaXNoKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBmYWxzZTtcbiAgICAgICAgbWVzc2FnZS5jYW5QdWJsaXNoRGF0YSA9IChfYyA9IG9iamVjdC5jYW5QdWJsaXNoRGF0YSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2UuY2FuUHVibGlzaFNvdXJjZXMgPSAoKF9kID0gb2JqZWN0LmNhblB1Ymxpc2hTb3VyY2VzKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QubWFwKChlKSA9PiBlKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2UuaGlkZGVuID0gKF9lID0gb2JqZWN0LmhpZGRlbikgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2UucmVjb3JkZXIgPSAoX2YgPSBvYmplY3QucmVjb3JkZXIpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLmNhblVwZGF0ZU1ldGFkYXRhID0gKF9nID0gb2JqZWN0LmNhblVwZGF0ZU1ldGFkYXRhKSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlUGFydGljaXBhbnRJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHNpZDogXCJcIixcbiAgICAgICAgaWRlbnRpdHk6IFwiXCIsXG4gICAgICAgIHN0YXRlOiAwLFxuICAgICAgICB0cmFja3M6IFtdLFxuICAgICAgICBtZXRhZGF0YTogXCJcIixcbiAgICAgICAgam9pbmVkQXQ6IDAsXG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIHZlcnNpb246IDAsXG4gICAgICAgIHBlcm1pc3Npb246IHVuZGVmaW5lZCxcbiAgICAgICAgcmVnaW9uOiBcIlwiLFxuICAgICAgICBpc1B1Ymxpc2hlcjogZmFsc2UsXG4gICAgfTtcbn1cbmV4cG9ydHMuUGFydGljaXBhbnRJbmZvID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2lkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5zaWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmlkZW50aXR5ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS5pZGVudGl0eSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhdGUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjQpLmludDMyKG1lc3NhZ2Uuc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLnRyYWNrcykge1xuICAgICAgICAgICAgZXhwb3J0cy5UcmFja0luZm8uZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubWV0YWRhdGEgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDIpLnN0cmluZyhtZXNzYWdlLm1ldGFkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5qb2luZWRBdCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig0OCkuaW50NjQobWVzc2FnZS5qb2luZWRBdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig3NCkuc3RyaW5nKG1lc3NhZ2UubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudmVyc2lvbiAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4MCkudWludDMyKG1lc3NhZ2UudmVyc2lvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucGVybWlzc2lvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlBhcnRpY2lwYW50UGVybWlzc2lvbi5lbmNvZGUobWVzc2FnZS5wZXJtaXNzaW9uLCB3cml0ZXIudWludDMyKDkwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJlZ2lvbiAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig5OCkuc3RyaW5nKG1lc3NhZ2UucmVnaW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5pc1B1Ymxpc2hlciA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMDQpLmJvb2wobWVzc2FnZS5pc1B1Ymxpc2hlcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUGFydGljaXBhbnRJbmZvKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zaWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pZGVudGl0eSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXRlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmFja3MucHVzaChleHBvcnRzLlRyYWNrSW5mby5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1ldGFkYXRhID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuam9pbmVkQXQgPSBsb25nVG9OdW1iZXIocmVhZGVyLmludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52ZXJzaW9uID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBlcm1pc3Npb24gPSBleHBvcnRzLlBhcnRpY2lwYW50UGVybWlzc2lvbi5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlZ2lvbiA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pc1B1Ymxpc2hlciA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNpZDogaXNTZXQob2JqZWN0LnNpZCkgPyBTdHJpbmcob2JqZWN0LnNpZCkgOiBcIlwiLFxuICAgICAgICAgICAgaWRlbnRpdHk6IGlzU2V0KG9iamVjdC5pZGVudGl0eSkgPyBTdHJpbmcob2JqZWN0LmlkZW50aXR5KSA6IFwiXCIsXG4gICAgICAgICAgICBzdGF0ZTogaXNTZXQob2JqZWN0LnN0YXRlKSA/IHBhcnRpY2lwYW50SW5mb19TdGF0ZUZyb21KU09OKG9iamVjdC5zdGF0ZSkgOiAwLFxuICAgICAgICAgICAgdHJhY2tzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC50cmFja3MpID8gb2JqZWN0LnRyYWNrcy5tYXAoKGUpID0+IGV4cG9ydHMuVHJhY2tJbmZvLmZyb21KU09OKGUpKSA6IFtdLFxuICAgICAgICAgICAgbWV0YWRhdGE6IGlzU2V0KG9iamVjdC5tZXRhZGF0YSkgPyBTdHJpbmcob2JqZWN0Lm1ldGFkYXRhKSA6IFwiXCIsXG4gICAgICAgICAgICBqb2luZWRBdDogaXNTZXQob2JqZWN0LmpvaW5lZEF0KSA/IE51bWJlcihvYmplY3Quam9pbmVkQXQpIDogMCxcbiAgICAgICAgICAgIG5hbWU6IGlzU2V0KG9iamVjdC5uYW1lKSA/IFN0cmluZyhvYmplY3QubmFtZSkgOiBcIlwiLFxuICAgICAgICAgICAgdmVyc2lvbjogaXNTZXQob2JqZWN0LnZlcnNpb24pID8gTnVtYmVyKG9iamVjdC52ZXJzaW9uKSA6IDAsXG4gICAgICAgICAgICBwZXJtaXNzaW9uOiBpc1NldChvYmplY3QucGVybWlzc2lvbikgPyBleHBvcnRzLlBhcnRpY2lwYW50UGVybWlzc2lvbi5mcm9tSlNPTihvYmplY3QucGVybWlzc2lvbikgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICByZWdpb246IGlzU2V0KG9iamVjdC5yZWdpb24pID8gU3RyaW5nKG9iamVjdC5yZWdpb24pIDogXCJcIixcbiAgICAgICAgICAgIGlzUHVibGlzaGVyOiBpc1NldChvYmplY3QuaXNQdWJsaXNoZXIpID8gQm9vbGVhbihvYmplY3QuaXNQdWJsaXNoZXIpIDogZmFsc2UsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5zaWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnNpZCA9IG1lc3NhZ2Uuc2lkKTtcbiAgICAgICAgbWVzc2FnZS5pZGVudGl0eSAhPT0gdW5kZWZpbmVkICYmIChvYmouaWRlbnRpdHkgPSBtZXNzYWdlLmlkZW50aXR5KTtcbiAgICAgICAgbWVzc2FnZS5zdGF0ZSAhPT0gdW5kZWZpbmVkICYmIChvYmouc3RhdGUgPSBwYXJ0aWNpcGFudEluZm9fU3RhdGVUb0pTT04obWVzc2FnZS5zdGF0ZSkpO1xuICAgICAgICBpZiAobWVzc2FnZS50cmFja3MpIHtcbiAgICAgICAgICAgIG9iai50cmFja3MgPSBtZXNzYWdlLnRyYWNrcy5tYXAoKGUpID0+IGUgPyBleHBvcnRzLlRyYWNrSW5mby50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLnRyYWNrcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIG1lc3NhZ2UubWV0YWRhdGEgIT09IHVuZGVmaW5lZCAmJiAob2JqLm1ldGFkYXRhID0gbWVzc2FnZS5tZXRhZGF0YSk7XG4gICAgICAgIG1lc3NhZ2Uuam9pbmVkQXQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmpvaW5lZEF0ID0gTWF0aC5yb3VuZChtZXNzYWdlLmpvaW5lZEF0KSk7XG4gICAgICAgIG1lc3NhZ2UubmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmoubmFtZSA9IG1lc3NhZ2UubmFtZSk7XG4gICAgICAgIG1lc3NhZ2UudmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIChvYmoudmVyc2lvbiA9IE1hdGgucm91bmQobWVzc2FnZS52ZXJzaW9uKSk7XG4gICAgICAgIG1lc3NhZ2UucGVybWlzc2lvbiAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLnBlcm1pc3Npb24gPSBtZXNzYWdlLnBlcm1pc3Npb24gPyBleHBvcnRzLlBhcnRpY2lwYW50UGVybWlzc2lvbi50b0pTT04obWVzc2FnZS5wZXJtaXNzaW9uKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UucmVnaW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai5yZWdpb24gPSBtZXNzYWdlLnJlZ2lvbik7XG4gICAgICAgIG1lc3NhZ2UuaXNQdWJsaXNoZXIgIT09IHVuZGVmaW5lZCAmJiAob2JqLmlzUHVibGlzaGVyID0gbWVzc2FnZS5pc1B1Ymxpc2hlcik7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2osIF9rO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVBhcnRpY2lwYW50SW5mbygpO1xuICAgICAgICBtZXNzYWdlLnNpZCA9IChfYSA9IG9iamVjdC5zaWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuaWRlbnRpdHkgPSAoX2IgPSBvYmplY3QuaWRlbnRpdHkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2Uuc3RhdGUgPSAoX2MgPSBvYmplY3Quc3RhdGUpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IDA7XG4gICAgICAgIG1lc3NhZ2UudHJhY2tzID0gKChfZCA9IG9iamVjdC50cmFja3MpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5tYXAoKGUpID0+IGV4cG9ydHMuVHJhY2tJbmZvLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2UubWV0YWRhdGEgPSAoX2UgPSBvYmplY3QubWV0YWRhdGEpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2Uuam9pbmVkQXQgPSAoX2YgPSBvYmplY3Quam9pbmVkQXQpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IDA7XG4gICAgICAgIG1lc3NhZ2UubmFtZSA9IChfZyA9IG9iamVjdC5uYW1lKSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnZlcnNpb24gPSAoX2ggPSBvYmplY3QudmVyc2lvbikgIT09IG51bGwgJiYgX2ggIT09IHZvaWQgMCA/IF9oIDogMDtcbiAgICAgICAgbWVzc2FnZS5wZXJtaXNzaW9uID0gKG9iamVjdC5wZXJtaXNzaW9uICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnBlcm1pc3Npb24gIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuUGFydGljaXBhbnRQZXJtaXNzaW9uLmZyb21QYXJ0aWFsKG9iamVjdC5wZXJtaXNzaW9uKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UucmVnaW9uID0gKF9qID0gb2JqZWN0LnJlZ2lvbikgIT09IG51bGwgJiYgX2ogIT09IHZvaWQgMCA/IF9qIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5pc1B1Ymxpc2hlciA9IChfayA9IG9iamVjdC5pc1B1Ymxpc2hlcikgIT09IG51bGwgJiYgX2sgIT09IHZvaWQgMCA/IF9rIDogZmFsc2U7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUVuY3J5cHRpb24oKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuZXhwb3J0cy5FbmNyeXB0aW9uID0ge1xuICAgIGVuY29kZShfLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlRW5jcnlwdGlvbigpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04oXykge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfSxcbiAgICB0b0pTT04oXykge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKF8pIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VFbmNyeXB0aW9uKCk7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVNpbXVsY2FzdENvZGVjSW5mbygpIHtcbiAgICByZXR1cm4geyBtaW1lVHlwZTogXCJcIiwgbWlkOiBcIlwiLCBjaWQ6IFwiXCIsIGxheWVyczogW10gfTtcbn1cbmV4cG9ydHMuU2ltdWxjYXN0Q29kZWNJbmZvID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UubWltZVR5cGUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLm1pbWVUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5taWQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLm1pZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuY2lkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI2KS5zdHJpbmcobWVzc2FnZS5jaWQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLmxheWVycykge1xuICAgICAgICAgICAgZXhwb3J0cy5WaWRlb0xheWVyLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVNpbXVsY2FzdENvZGVjSW5mbygpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWltZVR5cGUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5taWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jaWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXllcnMucHVzaChleHBvcnRzLlZpZGVvTGF5ZXIuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1pbWVUeXBlOiBpc1NldChvYmplY3QubWltZVR5cGUpID8gU3RyaW5nKG9iamVjdC5taW1lVHlwZSkgOiBcIlwiLFxuICAgICAgICAgICAgbWlkOiBpc1NldChvYmplY3QubWlkKSA/IFN0cmluZyhvYmplY3QubWlkKSA6IFwiXCIsXG4gICAgICAgICAgICBjaWQ6IGlzU2V0KG9iamVjdC5jaWQpID8gU3RyaW5nKG9iamVjdC5jaWQpIDogXCJcIixcbiAgICAgICAgICAgIGxheWVyczogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QubGF5ZXJzKSA/IG9iamVjdC5sYXllcnMubWFwKChlKSA9PiBleHBvcnRzLlZpZGVvTGF5ZXIuZnJvbUpTT04oZSkpIDogW10sXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5taW1lVHlwZSAhPT0gdW5kZWZpbmVkICYmIChvYmoubWltZVR5cGUgPSBtZXNzYWdlLm1pbWVUeXBlKTtcbiAgICAgICAgbWVzc2FnZS5taWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLm1pZCA9IG1lc3NhZ2UubWlkKTtcbiAgICAgICAgbWVzc2FnZS5jaWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNpZCA9IG1lc3NhZ2UuY2lkKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UubGF5ZXJzKSB7XG4gICAgICAgICAgICBvYmoubGF5ZXJzID0gbWVzc2FnZS5sYXllcnMubWFwKChlKSA9PiBlID8gZXhwb3J0cy5WaWRlb0xheWVyLnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmoubGF5ZXJzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU2ltdWxjYXN0Q29kZWNJbmZvKCk7XG4gICAgICAgIG1lc3NhZ2UubWltZVR5cGUgPSAoX2EgPSBvYmplY3QubWltZVR5cGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UubWlkID0gKF9iID0gb2JqZWN0Lm1pZCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5jaWQgPSAoX2MgPSBvYmplY3QuY2lkKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmxheWVycyA9ICgoX2QgPSBvYmplY3QubGF5ZXJzKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QubWFwKChlKSA9PiBleHBvcnRzLlZpZGVvTGF5ZXIuZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVHJhY2tJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHNpZDogXCJcIixcbiAgICAgICAgdHlwZTogMCxcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgbXV0ZWQ6IGZhbHNlLFxuICAgICAgICB3aWR0aDogMCxcbiAgICAgICAgaGVpZ2h0OiAwLFxuICAgICAgICBzaW11bGNhc3Q6IGZhbHNlLFxuICAgICAgICBkaXNhYmxlRHR4OiBmYWxzZSxcbiAgICAgICAgc291cmNlOiAwLFxuICAgICAgICBsYXllcnM6IFtdLFxuICAgICAgICBtaW1lVHlwZTogXCJcIixcbiAgICAgICAgbWlkOiBcIlwiLFxuICAgICAgICBjb2RlY3M6IFtdLFxuICAgICAgICBzdGVyZW86IGZhbHNlLFxuICAgICAgICBkaXNhYmxlUmVkOiBmYWxzZSxcbiAgICAgICAgZW5jcnlwdGlvbjogMCxcbiAgICAgICAgc3RyZWFtOiBcIlwiLFxuICAgIH07XG59XG5leHBvcnRzLlRyYWNrSW5mbyA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnNpZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2Uuc2lkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS50eXBlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE2KS5pbnQzMihtZXNzYWdlLnR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm11dGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDMyKS5ib29sKG1lc3NhZ2UubXV0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLndpZHRoICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQwKS51aW50MzIobWVzc2FnZS53aWR0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaGVpZ2h0ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQ4KS51aW50MzIobWVzc2FnZS5oZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnNpbXVsY2FzdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig1NikuYm9vbChtZXNzYWdlLnNpbXVsY2FzdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZGlzYWJsZUR0eCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig2NCkuYm9vbChtZXNzYWdlLmRpc2FibGVEdHgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnNvdXJjZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig3MikuaW50MzIobWVzc2FnZS5zb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLmxheWVycykge1xuICAgICAgICAgICAgZXhwb3J0cy5WaWRlb0xheWVyLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDgyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm1pbWVUeXBlICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDkwKS5zdHJpbmcobWVzc2FnZS5taW1lVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubWlkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDk4KS5zdHJpbmcobWVzc2FnZS5taWQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLmNvZGVjcykge1xuICAgICAgICAgICAgZXhwb3J0cy5TaW11bGNhc3RDb2RlY0luZm8uZW5jb2RlKHYsIHdyaXRlci51aW50MzIoMTA2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0ZXJlbyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMTIpLmJvb2wobWVzc2FnZS5zdGVyZW8pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmRpc2FibGVSZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTIwKS5ib29sKG1lc3NhZ2UuZGlzYWJsZVJlZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZW5jcnlwdGlvbiAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMjgpLmludDMyKG1lc3NhZ2UuZW5jcnlwdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3RyZWFtICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEzOCkuc3RyaW5nKG1lc3NhZ2Uuc3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUcmFja0luZm8oKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNpZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnR5cGUgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tdXRlZCA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS53aWR0aCA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmhlaWdodCA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNpbXVsY2FzdCA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kaXNhYmxlRHR4ID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNvdXJjZSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxheWVycy5wdXNoKGV4cG9ydHMuVmlkZW9MYXllci5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5taW1lVHlwZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5taWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY29kZWNzLnB1c2goZXhwb3J0cy5TaW11bGNhc3RDb2RlY0luZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RlcmVvID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kaXNhYmxlUmVkID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmNyeXB0aW9uID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RyZWFtID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzaWQ6IGlzU2V0KG9iamVjdC5zaWQpID8gU3RyaW5nKG9iamVjdC5zaWQpIDogXCJcIixcbiAgICAgICAgICAgIHR5cGU6IGlzU2V0KG9iamVjdC50eXBlKSA/IHRyYWNrVHlwZUZyb21KU09OKG9iamVjdC50eXBlKSA6IDAsXG4gICAgICAgICAgICBuYW1lOiBpc1NldChvYmplY3QubmFtZSkgPyBTdHJpbmcob2JqZWN0Lm5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIG11dGVkOiBpc1NldChvYmplY3QubXV0ZWQpID8gQm9vbGVhbihvYmplY3QubXV0ZWQpIDogZmFsc2UsXG4gICAgICAgICAgICB3aWR0aDogaXNTZXQob2JqZWN0LndpZHRoKSA/IE51bWJlcihvYmplY3Qud2lkdGgpIDogMCxcbiAgICAgICAgICAgIGhlaWdodDogaXNTZXQob2JqZWN0LmhlaWdodCkgPyBOdW1iZXIob2JqZWN0LmhlaWdodCkgOiAwLFxuICAgICAgICAgICAgc2ltdWxjYXN0OiBpc1NldChvYmplY3Quc2ltdWxjYXN0KSA/IEJvb2xlYW4ob2JqZWN0LnNpbXVsY2FzdCkgOiBmYWxzZSxcbiAgICAgICAgICAgIGRpc2FibGVEdHg6IGlzU2V0KG9iamVjdC5kaXNhYmxlRHR4KSA/IEJvb2xlYW4ob2JqZWN0LmRpc2FibGVEdHgpIDogZmFsc2UsXG4gICAgICAgICAgICBzb3VyY2U6IGlzU2V0KG9iamVjdC5zb3VyY2UpID8gdHJhY2tTb3VyY2VGcm9tSlNPTihvYmplY3Quc291cmNlKSA6IDAsXG4gICAgICAgICAgICBsYXllcnM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmxheWVycykgPyBvYmplY3QubGF5ZXJzLm1hcCgoZSkgPT4gZXhwb3J0cy5WaWRlb0xheWVyLmZyb21KU09OKGUpKSA6IFtdLFxuICAgICAgICAgICAgbWltZVR5cGU6IGlzU2V0KG9iamVjdC5taW1lVHlwZSkgPyBTdHJpbmcob2JqZWN0Lm1pbWVUeXBlKSA6IFwiXCIsXG4gICAgICAgICAgICBtaWQ6IGlzU2V0KG9iamVjdC5taWQpID8gU3RyaW5nKG9iamVjdC5taWQpIDogXCJcIixcbiAgICAgICAgICAgIGNvZGVjczogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QuY29kZWNzKSA/IG9iamVjdC5jb2RlY3MubWFwKChlKSA9PiBleHBvcnRzLlNpbXVsY2FzdENvZGVjSW5mby5mcm9tSlNPTihlKSkgOiBbXSxcbiAgICAgICAgICAgIHN0ZXJlbzogaXNTZXQob2JqZWN0LnN0ZXJlbykgPyBCb29sZWFuKG9iamVjdC5zdGVyZW8pIDogZmFsc2UsXG4gICAgICAgICAgICBkaXNhYmxlUmVkOiBpc1NldChvYmplY3QuZGlzYWJsZVJlZCkgPyBCb29sZWFuKG9iamVjdC5kaXNhYmxlUmVkKSA6IGZhbHNlLFxuICAgICAgICAgICAgZW5jcnlwdGlvbjogaXNTZXQob2JqZWN0LmVuY3J5cHRpb24pID8gZW5jcnlwdGlvbl9UeXBlRnJvbUpTT04ob2JqZWN0LmVuY3J5cHRpb24pIDogMCxcbiAgICAgICAgICAgIHN0cmVhbTogaXNTZXQob2JqZWN0LnN0cmVhbSkgPyBTdHJpbmcob2JqZWN0LnN0cmVhbSkgOiBcIlwiLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2Uuc2lkICE9PSB1bmRlZmluZWQgJiYgKG9iai5zaWQgPSBtZXNzYWdlLnNpZCk7XG4gICAgICAgIG1lc3NhZ2UudHlwZSAhPT0gdW5kZWZpbmVkICYmIChvYmoudHlwZSA9IHRyYWNrVHlwZVRvSlNPTihtZXNzYWdlLnR5cGUpKTtcbiAgICAgICAgbWVzc2FnZS5uYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5uYW1lID0gbWVzc2FnZS5uYW1lKTtcbiAgICAgICAgbWVzc2FnZS5tdXRlZCAhPT0gdW5kZWZpbmVkICYmIChvYmoubXV0ZWQgPSBtZXNzYWdlLm11dGVkKTtcbiAgICAgICAgbWVzc2FnZS53aWR0aCAhPT0gdW5kZWZpbmVkICYmIChvYmoud2lkdGggPSBNYXRoLnJvdW5kKG1lc3NhZ2Uud2lkdGgpKTtcbiAgICAgICAgbWVzc2FnZS5oZWlnaHQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmhlaWdodCA9IE1hdGgucm91bmQobWVzc2FnZS5oZWlnaHQpKTtcbiAgICAgICAgbWVzc2FnZS5zaW11bGNhc3QgIT09IHVuZGVmaW5lZCAmJiAob2JqLnNpbXVsY2FzdCA9IG1lc3NhZ2Uuc2ltdWxjYXN0KTtcbiAgICAgICAgbWVzc2FnZS5kaXNhYmxlRHR4ICE9PSB1bmRlZmluZWQgJiYgKG9iai5kaXNhYmxlRHR4ID0gbWVzc2FnZS5kaXNhYmxlRHR4KTtcbiAgICAgICAgbWVzc2FnZS5zb3VyY2UgIT09IHVuZGVmaW5lZCAmJiAob2JqLnNvdXJjZSA9IHRyYWNrU291cmNlVG9KU09OKG1lc3NhZ2Uuc291cmNlKSk7XG4gICAgICAgIGlmIChtZXNzYWdlLmxheWVycykge1xuICAgICAgICAgICAgb2JqLmxheWVycyA9IG1lc3NhZ2UubGF5ZXJzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuVmlkZW9MYXllci50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLmxheWVycyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIG1lc3NhZ2UubWltZVR5cGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLm1pbWVUeXBlID0gbWVzc2FnZS5taW1lVHlwZSk7XG4gICAgICAgIG1lc3NhZ2UubWlkICE9PSB1bmRlZmluZWQgJiYgKG9iai5taWQgPSBtZXNzYWdlLm1pZCk7XG4gICAgICAgIGlmIChtZXNzYWdlLmNvZGVjcykge1xuICAgICAgICAgICAgb2JqLmNvZGVjcyA9IG1lc3NhZ2UuY29kZWNzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuU2ltdWxjYXN0Q29kZWNJbmZvLnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouY29kZWNzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgbWVzc2FnZS5zdGVyZW8gIT09IHVuZGVmaW5lZCAmJiAob2JqLnN0ZXJlbyA9IG1lc3NhZ2Uuc3RlcmVvKTtcbiAgICAgICAgbWVzc2FnZS5kaXNhYmxlUmVkICE9PSB1bmRlZmluZWQgJiYgKG9iai5kaXNhYmxlUmVkID0gbWVzc2FnZS5kaXNhYmxlUmVkKTtcbiAgICAgICAgbWVzc2FnZS5lbmNyeXB0aW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai5lbmNyeXB0aW9uID0gZW5jcnlwdGlvbl9UeXBlVG9KU09OKG1lc3NhZ2UuZW5jcnlwdGlvbikpO1xuICAgICAgICBtZXNzYWdlLnN0cmVhbSAhPT0gdW5kZWZpbmVkICYmIChvYmouc3RyZWFtID0gbWVzc2FnZS5zdHJlYW0pO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9qLCBfaywgX2wsIF9tLCBfbywgX3AsIF9xLCBfciwgX3M7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVHJhY2tJbmZvKCk7XG4gICAgICAgIG1lc3NhZ2Uuc2lkID0gKF9hID0gb2JqZWN0LnNpZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS50eXBlID0gKF9iID0gb2JqZWN0LnR5cGUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDA7XG4gICAgICAgIG1lc3NhZ2UubmFtZSA9IChfYyA9IG9iamVjdC5uYW1lKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLm11dGVkID0gKF9kID0gb2JqZWN0Lm11dGVkKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBmYWxzZTtcbiAgICAgICAgbWVzc2FnZS53aWR0aCA9IChfZSA9IG9iamVjdC53aWR0aCkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogMDtcbiAgICAgICAgbWVzc2FnZS5oZWlnaHQgPSAoX2YgPSBvYmplY3QuaGVpZ2h0KSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiAwO1xuICAgICAgICBtZXNzYWdlLnNpbXVsY2FzdCA9IChfZyA9IG9iamVjdC5zaW11bGNhc3QpICE9PSBudWxsICYmIF9nICE9PSB2b2lkIDAgPyBfZyA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLmRpc2FibGVEdHggPSAoX2ggPSBvYmplY3QuZGlzYWJsZUR0eCkgIT09IG51bGwgJiYgX2ggIT09IHZvaWQgMCA/IF9oIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2Uuc291cmNlID0gKF9qID0gb2JqZWN0LnNvdXJjZSkgIT09IG51bGwgJiYgX2ogIT09IHZvaWQgMCA/IF9qIDogMDtcbiAgICAgICAgbWVzc2FnZS5sYXllcnMgPSAoKF9rID0gb2JqZWN0LmxheWVycykgPT09IG51bGwgfHwgX2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9rLm1hcCgoZSkgPT4gZXhwb3J0cy5WaWRlb0xheWVyLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2UubWltZVR5cGUgPSAoX2wgPSBvYmplY3QubWltZVR5cGUpICE9PSBudWxsICYmIF9sICE9PSB2b2lkIDAgPyBfbCA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UubWlkID0gKF9tID0gb2JqZWN0Lm1pZCkgIT09IG51bGwgJiYgX20gIT09IHZvaWQgMCA/IF9tIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5jb2RlY3MgPSAoKF9vID0gb2JqZWN0LmNvZGVjcykgPT09IG51bGwgfHwgX28gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vLm1hcCgoZSkgPT4gZXhwb3J0cy5TaW11bGNhc3RDb2RlY0luZm8uZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgbWVzc2FnZS5zdGVyZW8gPSAoX3AgPSBvYmplY3Quc3RlcmVvKSAhPT0gbnVsbCAmJiBfcCAhPT0gdm9pZCAwID8gX3AgOiBmYWxzZTtcbiAgICAgICAgbWVzc2FnZS5kaXNhYmxlUmVkID0gKF9xID0gb2JqZWN0LmRpc2FibGVSZWQpICE9PSBudWxsICYmIF9xICE9PSB2b2lkIDAgPyBfcSA6IGZhbHNlO1xuICAgICAgICBtZXNzYWdlLmVuY3J5cHRpb24gPSAoX3IgPSBvYmplY3QuZW5jcnlwdGlvbikgIT09IG51bGwgJiYgX3IgIT09IHZvaWQgMCA/IF9yIDogMDtcbiAgICAgICAgbWVzc2FnZS5zdHJlYW0gPSAoX3MgPSBvYmplY3Quc3RyZWFtKSAhPT0gbnVsbCAmJiBfcyAhPT0gdm9pZCAwID8gX3MgOiBcIlwiO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VWaWRlb0xheWVyKCkge1xuICAgIHJldHVybiB7IHF1YWxpdHk6IDAsIHdpZHRoOiAwLCBoZWlnaHQ6IDAsIGJpdHJhdGU6IDAsIHNzcmM6IDAgfTtcbn1cbmV4cG9ydHMuVmlkZW9MYXllciA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnF1YWxpdHkgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoOCkuaW50MzIobWVzc2FnZS5xdWFsaXR5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS53aWR0aCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNikudWludDMyKG1lc3NhZ2Uud2lkdGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmhlaWdodCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkudWludDMyKG1lc3NhZ2UuaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5iaXRyYXRlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDMyKS51aW50MzIobWVzc2FnZS5iaXRyYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zc3JjICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQwKS51aW50MzIobWVzc2FnZS5zc3JjKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VWaWRlb0xheWVyKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5xdWFsaXR5ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS53aWR0aCA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmhlaWdodCA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmJpdHJhdGUgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zc3JjID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBxdWFsaXR5OiBpc1NldChvYmplY3QucXVhbGl0eSkgPyB2aWRlb1F1YWxpdHlGcm9tSlNPTihvYmplY3QucXVhbGl0eSkgOiAwLFxuICAgICAgICAgICAgd2lkdGg6IGlzU2V0KG9iamVjdC53aWR0aCkgPyBOdW1iZXIob2JqZWN0LndpZHRoKSA6IDAsXG4gICAgICAgICAgICBoZWlnaHQ6IGlzU2V0KG9iamVjdC5oZWlnaHQpID8gTnVtYmVyKG9iamVjdC5oZWlnaHQpIDogMCxcbiAgICAgICAgICAgIGJpdHJhdGU6IGlzU2V0KG9iamVjdC5iaXRyYXRlKSA/IE51bWJlcihvYmplY3QuYml0cmF0ZSkgOiAwLFxuICAgICAgICAgICAgc3NyYzogaXNTZXQob2JqZWN0LnNzcmMpID8gTnVtYmVyKG9iamVjdC5zc3JjKSA6IDAsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5xdWFsaXR5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5xdWFsaXR5ID0gdmlkZW9RdWFsaXR5VG9KU09OKG1lc3NhZ2UucXVhbGl0eSkpO1xuICAgICAgICBtZXNzYWdlLndpZHRoICE9PSB1bmRlZmluZWQgJiYgKG9iai53aWR0aCA9IE1hdGgucm91bmQobWVzc2FnZS53aWR0aCkpO1xuICAgICAgICBtZXNzYWdlLmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIChvYmouaGVpZ2h0ID0gTWF0aC5yb3VuZChtZXNzYWdlLmhlaWdodCkpO1xuICAgICAgICBtZXNzYWdlLmJpdHJhdGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmJpdHJhdGUgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuYml0cmF0ZSkpO1xuICAgICAgICBtZXNzYWdlLnNzcmMgIT09IHVuZGVmaW5lZCAmJiAob2JqLnNzcmMgPSBNYXRoLnJvdW5kKG1lc3NhZ2Uuc3NyYykpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlVmlkZW9MYXllcigpO1xuICAgICAgICBtZXNzYWdlLnF1YWxpdHkgPSAoX2EgPSBvYmplY3QucXVhbGl0eSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcbiAgICAgICAgbWVzc2FnZS53aWR0aCA9IChfYiA9IG9iamVjdC53aWR0aCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMDtcbiAgICAgICAgbWVzc2FnZS5oZWlnaHQgPSAoX2MgPSBvYmplY3QuaGVpZ2h0KSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAwO1xuICAgICAgICBtZXNzYWdlLmJpdHJhdGUgPSAoX2QgPSBvYmplY3QuYml0cmF0ZSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogMDtcbiAgICAgICAgbWVzc2FnZS5zc3JjID0gKF9lID0gb2JqZWN0LnNzcmMpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IDA7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZURhdGFQYWNrZXQoKSB7XG4gICAgcmV0dXJuIHsga2luZDogMCwgdXNlcjogdW5kZWZpbmVkLCBzcGVha2VyOiB1bmRlZmluZWQgfTtcbn1cbmV4cG9ydHMuRGF0YVBhY2tldCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmtpbmQgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoOCkuaW50MzIobWVzc2FnZS5raW5kKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS51c2VyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuVXNlclBhY2tldC5lbmNvZGUobWVzc2FnZS51c2VyLCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnNwZWFrZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5BY3RpdmVTcGVha2VyVXBkYXRlLmVuY29kZShtZXNzYWdlLnNwZWFrZXIsIHdyaXRlci51aW50MzIoMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlRGF0YVBhY2tldCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uua2luZCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXNlciA9IGV4cG9ydHMuVXNlclBhY2tldC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3BlYWtlciA9IGV4cG9ydHMuQWN0aXZlU3BlYWtlclVwZGF0ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiBpc1NldChvYmplY3Qua2luZCkgPyBkYXRhUGFja2V0X0tpbmRGcm9tSlNPTihvYmplY3Qua2luZCkgOiAwLFxuICAgICAgICAgICAgdXNlcjogaXNTZXQob2JqZWN0LnVzZXIpID8gZXhwb3J0cy5Vc2VyUGFja2V0LmZyb21KU09OKG9iamVjdC51c2VyKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHNwZWFrZXI6IGlzU2V0KG9iamVjdC5zcGVha2VyKSA/IGV4cG9ydHMuQWN0aXZlU3BlYWtlclVwZGF0ZS5mcm9tSlNPTihvYmplY3Quc3BlYWtlcikgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5raW5kICE9PSB1bmRlZmluZWQgJiYgKG9iai5raW5kID0gZGF0YVBhY2tldF9LaW5kVG9KU09OKG1lc3NhZ2Uua2luZCkpO1xuICAgICAgICBtZXNzYWdlLnVzZXIgIT09IHVuZGVmaW5lZCAmJiAob2JqLnVzZXIgPSBtZXNzYWdlLnVzZXIgPyBleHBvcnRzLlVzZXJQYWNrZXQudG9KU09OKG1lc3NhZ2UudXNlcikgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLnNwZWFrZXIgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5zcGVha2VyID0gbWVzc2FnZS5zcGVha2VyID8gZXhwb3J0cy5BY3RpdmVTcGVha2VyVXBkYXRlLnRvSlNPTihtZXNzYWdlLnNwZWFrZXIpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlRGF0YVBhY2tldCgpO1xuICAgICAgICBtZXNzYWdlLmtpbmQgPSAoX2EgPSBvYmplY3Qua2luZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcbiAgICAgICAgbWVzc2FnZS51c2VyID0gKG9iamVjdC51c2VyICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnVzZXIgIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuVXNlclBhY2tldC5mcm9tUGFydGlhbChvYmplY3QudXNlcilcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLnNwZWFrZXIgPSAob2JqZWN0LnNwZWFrZXIgIT09IHVuZGVmaW5lZCAmJiBvYmplY3Quc3BlYWtlciAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5BY3RpdmVTcGVha2VyVXBkYXRlLmZyb21QYXJ0aWFsKG9iamVjdC5zcGVha2VyKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUFjdGl2ZVNwZWFrZXJVcGRhdGUoKSB7XG4gICAgcmV0dXJuIHsgc3BlYWtlcnM6IFtdIH07XG59XG5leHBvcnRzLkFjdGl2ZVNwZWFrZXJVcGRhdGUgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5zcGVha2Vycykge1xuICAgICAgICAgICAgZXhwb3J0cy5TcGVha2VySW5mby5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VBY3RpdmVTcGVha2VyVXBkYXRlKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zcGVha2Vycy5wdXNoKGV4cG9ydHMuU3BlYWtlckluZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNwZWFrZXJzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5zcGVha2VycykgPyBvYmplY3Quc3BlYWtlcnMubWFwKChlKSA9PiBleHBvcnRzLlNwZWFrZXJJbmZvLmZyb21KU09OKGUpKSA6IFtdLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIGlmIChtZXNzYWdlLnNwZWFrZXJzKSB7XG4gICAgICAgICAgICBvYmouc3BlYWtlcnMgPSBtZXNzYWdlLnNwZWFrZXJzLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuU3BlYWtlckluZm8udG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5zcGVha2VycyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUFjdGl2ZVNwZWFrZXJVcGRhdGUoKTtcbiAgICAgICAgbWVzc2FnZS5zcGVha2VycyA9ICgoX2EgPSBvYmplY3Quc3BlYWtlcnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYXAoKGUpID0+IGV4cG9ydHMuU3BlYWtlckluZm8uZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlU3BlYWtlckluZm8oKSB7XG4gICAgcmV0dXJuIHsgc2lkOiBcIlwiLCBsZXZlbDogMCwgYWN0aXZlOiBmYWxzZSB9O1xufVxuZXhwb3J0cy5TcGVha2VySW5mbyA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnNpZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2Uuc2lkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5sZXZlbCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyMSkuZmxvYXQobWVzc2FnZS5sZXZlbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYWN0aXZlID09PSB0cnVlKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI0KS5ib29sKG1lc3NhZ2UuYWN0aXZlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTcGVha2VySW5mbygpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGV2ZWwgPSByZWFkZXIuZmxvYXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFjdGl2ZSA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNpZDogaXNTZXQob2JqZWN0LnNpZCkgPyBTdHJpbmcob2JqZWN0LnNpZCkgOiBcIlwiLFxuICAgICAgICAgICAgbGV2ZWw6IGlzU2V0KG9iamVjdC5sZXZlbCkgPyBOdW1iZXIob2JqZWN0LmxldmVsKSA6IDAsXG4gICAgICAgICAgICBhY3RpdmU6IGlzU2V0KG9iamVjdC5hY3RpdmUpID8gQm9vbGVhbihvYmplY3QuYWN0aXZlKSA6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2Uuc2lkICE9PSB1bmRlZmluZWQgJiYgKG9iai5zaWQgPSBtZXNzYWdlLnNpZCk7XG4gICAgICAgIG1lc3NhZ2UubGV2ZWwgIT09IHVuZGVmaW5lZCAmJiAob2JqLmxldmVsID0gbWVzc2FnZS5sZXZlbCk7XG4gICAgICAgIG1lc3NhZ2UuYWN0aXZlICE9PSB1bmRlZmluZWQgJiYgKG9iai5hY3RpdmUgPSBtZXNzYWdlLmFjdGl2ZSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU3BlYWtlckluZm8oKTtcbiAgICAgICAgbWVzc2FnZS5zaWQgPSAoX2EgPSBvYmplY3Quc2lkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmxldmVsID0gKF9iID0gb2JqZWN0LmxldmVsKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwO1xuICAgICAgICBtZXNzYWdlLmFjdGl2ZSA9IChfYyA9IG9iamVjdC5hY3RpdmUpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IGZhbHNlO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VVc2VyUGFja2V0KCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHBhcnRpY2lwYW50U2lkOiBcIlwiLFxuICAgICAgICBwYXJ0aWNpcGFudElkZW50aXR5OiBcIlwiLFxuICAgICAgICBwYXlsb2FkOiBuZXcgVWludDhBcnJheSgpLFxuICAgICAgICBkZXN0aW5hdGlvblNpZHM6IFtdLFxuICAgICAgICBkZXN0aW5hdGlvbklkZW50aXRpZXM6IFtdLFxuICAgICAgICB0b3BpYzogdW5kZWZpbmVkLFxuICAgIH07XG59XG5leHBvcnRzLlVzZXJQYWNrZXQgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5wYXJ0aWNpcGFudFNpZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UucGFydGljaXBhbnRTaWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBhcnRpY2lwYW50SWRlbnRpdHkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDIpLnN0cmluZyhtZXNzYWdlLnBhcnRpY2lwYW50SWRlbnRpdHkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBheWxvYWQubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5ieXRlcyhtZXNzYWdlLnBheWxvYWQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLmRlc3RpbmF0aW9uU2lkcykge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKHYpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLmRlc3RpbmF0aW9uSWRlbnRpdGllcykge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig1MCkuc3RyaW5nKHYpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnRvcGljICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzQpLnN0cmluZyhtZXNzYWdlLnRvcGljKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VVc2VyUGFja2V0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudFNpZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50SWRlbnRpdHkgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYXlsb2FkID0gcmVhZGVyLmJ5dGVzKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZXN0aW5hdGlvblNpZHMucHVzaChyZWFkZXIuc3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVzdGluYXRpb25JZGVudGl0aWVzLnB1c2gocmVhZGVyLnN0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRvcGljID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwYXJ0aWNpcGFudFNpZDogaXNTZXQob2JqZWN0LnBhcnRpY2lwYW50U2lkKSA/IFN0cmluZyhvYmplY3QucGFydGljaXBhbnRTaWQpIDogXCJcIixcbiAgICAgICAgICAgIHBhcnRpY2lwYW50SWRlbnRpdHk6IGlzU2V0KG9iamVjdC5wYXJ0aWNpcGFudElkZW50aXR5KSA/IFN0cmluZyhvYmplY3QucGFydGljaXBhbnRJZGVudGl0eSkgOiBcIlwiLFxuICAgICAgICAgICAgcGF5bG9hZDogaXNTZXQob2JqZWN0LnBheWxvYWQpID8gYnl0ZXNGcm9tQmFzZTY0KG9iamVjdC5wYXlsb2FkKSA6IG5ldyBVaW50OEFycmF5KCksXG4gICAgICAgICAgICBkZXN0aW5hdGlvblNpZHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmRlc3RpbmF0aW9uU2lkcykgPyBvYmplY3QuZGVzdGluYXRpb25TaWRzLm1hcCgoZSkgPT4gU3RyaW5nKGUpKSA6IFtdLFxuICAgICAgICAgICAgZGVzdGluYXRpb25JZGVudGl0aWVzOiBBcnJheS5pc0FycmF5KG9iamVjdCA9PT0gbnVsbCB8fCBvYmplY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iamVjdC5kZXN0aW5hdGlvbklkZW50aXRpZXMpXG4gICAgICAgICAgICAgICAgPyBvYmplY3QuZGVzdGluYXRpb25JZGVudGl0aWVzLm1hcCgoZSkgPT4gU3RyaW5nKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgICAgICB0b3BpYzogaXNTZXQob2JqZWN0LnRvcGljKSA/IFN0cmluZyhvYmplY3QudG9waWMpIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnRTaWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnBhcnRpY2lwYW50U2lkID0gbWVzc2FnZS5wYXJ0aWNpcGFudFNpZCk7XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSAhPT0gdW5kZWZpbmVkICYmIChvYmoucGFydGljaXBhbnRJZGVudGl0eSA9IG1lc3NhZ2UucGFydGljaXBhbnRJZGVudGl0eSk7XG4gICAgICAgIG1lc3NhZ2UucGF5bG9hZCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLnBheWxvYWQgPSBiYXNlNjRGcm9tQnl0ZXMobWVzc2FnZS5wYXlsb2FkICE9PSB1bmRlZmluZWQgPyBtZXNzYWdlLnBheWxvYWQgOiBuZXcgVWludDhBcnJheSgpKSk7XG4gICAgICAgIGlmIChtZXNzYWdlLmRlc3RpbmF0aW9uU2lkcykge1xuICAgICAgICAgICAgb2JqLmRlc3RpbmF0aW9uU2lkcyA9IG1lc3NhZ2UuZGVzdGluYXRpb25TaWRzLm1hcCgoZSkgPT4gZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouZGVzdGluYXRpb25TaWRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZGVzdGluYXRpb25JZGVudGl0aWVzKSB7XG4gICAgICAgICAgICBvYmouZGVzdGluYXRpb25JZGVudGl0aWVzID0gbWVzc2FnZS5kZXN0aW5hdGlvbklkZW50aXRpZXMubWFwKChlKSA9PiBlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5kZXN0aW5hdGlvbklkZW50aXRpZXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBtZXNzYWdlLnRvcGljICE9PSB1bmRlZmluZWQgJiYgKG9iai50b3BpYyA9IG1lc3NhZ2UudG9waWMpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVVzZXJQYWNrZXQoKTtcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudFNpZCA9IChfYSA9IG9iamVjdC5wYXJ0aWNpcGFudFNpZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudElkZW50aXR5ID0gKF9iID0gb2JqZWN0LnBhcnRpY2lwYW50SWRlbnRpdHkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UucGF5bG9hZCA9IChfYyA9IG9iamVjdC5wYXlsb2FkKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBuZXcgVWludDhBcnJheSgpO1xuICAgICAgICBtZXNzYWdlLmRlc3RpbmF0aW9uU2lkcyA9ICgoX2QgPSBvYmplY3QuZGVzdGluYXRpb25TaWRzKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QubWFwKChlKSA9PiBlKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2UuZGVzdGluYXRpb25JZGVudGl0aWVzID0gKChfZSA9IG9iamVjdC5kZXN0aW5hdGlvbklkZW50aXRpZXMpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5tYXAoKGUpID0+IGUpKSB8fCBbXTtcbiAgICAgICAgbWVzc2FnZS50b3BpYyA9IChfZiA9IG9iamVjdC50b3BpYykgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VQYXJ0aWNpcGFudFRyYWNrcygpIHtcbiAgICByZXR1cm4geyBwYXJ0aWNpcGFudFNpZDogXCJcIiwgdHJhY2tTaWRzOiBbXSB9O1xufVxuZXhwb3J0cy5QYXJ0aWNpcGFudFRyYWNrcyA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnBhcnRpY2lwYW50U2lkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5wYXJ0aWNpcGFudFNpZCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UudHJhY2tTaWRzKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcodik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUGFydGljaXBhbnRUcmFja3MoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50U2lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJhY2tTaWRzLnB1c2gocmVhZGVyLnN0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGFydGljaXBhbnRTaWQ6IGlzU2V0KG9iamVjdC5wYXJ0aWNpcGFudFNpZCkgPyBTdHJpbmcob2JqZWN0LnBhcnRpY2lwYW50U2lkKSA6IFwiXCIsXG4gICAgICAgICAgICB0cmFja1NpZHM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LnRyYWNrU2lkcykgPyBvYmplY3QudHJhY2tTaWRzLm1hcCgoZSkgPT4gU3RyaW5nKGUpKSA6IFtdLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnRTaWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLnBhcnRpY2lwYW50U2lkID0gbWVzc2FnZS5wYXJ0aWNpcGFudFNpZCk7XG4gICAgICAgIGlmIChtZXNzYWdlLnRyYWNrU2lkcykge1xuICAgICAgICAgICAgb2JqLnRyYWNrU2lkcyA9IG1lc3NhZ2UudHJhY2tTaWRzLm1hcCgoZSkgPT4gZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmoudHJhY2tTaWRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVBhcnRpY2lwYW50VHJhY2tzKCk7XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnRTaWQgPSAoX2EgPSBvYmplY3QucGFydGljaXBhbnRTaWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UudHJhY2tTaWRzID0gKChfYiA9IG9iamVjdC50cmFja1NpZHMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5tYXAoKGUpID0+IGUpKSB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlU2VydmVySW5mbygpIHtcbiAgICByZXR1cm4geyBlZGl0aW9uOiAwLCB2ZXJzaW9uOiBcIlwiLCBwcm90b2NvbDogMCwgcmVnaW9uOiBcIlwiLCBub2RlSWQ6IFwiXCIsIGRlYnVnSW5mbzogXCJcIiB9O1xufVxuZXhwb3J0cy5TZXJ2ZXJJbmZvID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZWRpdGlvbiAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4KS5pbnQzMihtZXNzYWdlLmVkaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnZlcnNpb24gIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLnZlcnNpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnByb3RvY29sICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI0KS5pbnQzMihtZXNzYWdlLnByb3RvY29sKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5yZWdpb24gIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzQpLnN0cmluZyhtZXNzYWdlLnJlZ2lvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uubm9kZUlkICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQyKS5zdHJpbmcobWVzc2FnZS5ub2RlSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmRlYnVnSW5mbyAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig1MCkuc3RyaW5nKG1lc3NhZ2UuZGVidWdJbmZvKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VTZXJ2ZXJJbmZvKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lZGl0aW9uID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52ZXJzaW9uID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucHJvdG9jb2wgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlZ2lvbiA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm5vZGVJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlYnVnSW5mbyA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZWRpdGlvbjogaXNTZXQob2JqZWN0LmVkaXRpb24pID8gc2VydmVySW5mb19FZGl0aW9uRnJvbUpTT04ob2JqZWN0LmVkaXRpb24pIDogMCxcbiAgICAgICAgICAgIHZlcnNpb246IGlzU2V0KG9iamVjdC52ZXJzaW9uKSA/IFN0cmluZyhvYmplY3QudmVyc2lvbikgOiBcIlwiLFxuICAgICAgICAgICAgcHJvdG9jb2w6IGlzU2V0KG9iamVjdC5wcm90b2NvbCkgPyBOdW1iZXIob2JqZWN0LnByb3RvY29sKSA6IDAsXG4gICAgICAgICAgICByZWdpb246IGlzU2V0KG9iamVjdC5yZWdpb24pID8gU3RyaW5nKG9iamVjdC5yZWdpb24pIDogXCJcIixcbiAgICAgICAgICAgIG5vZGVJZDogaXNTZXQob2JqZWN0Lm5vZGVJZCkgPyBTdHJpbmcob2JqZWN0Lm5vZGVJZCkgOiBcIlwiLFxuICAgICAgICAgICAgZGVidWdJbmZvOiBpc1NldChvYmplY3QuZGVidWdJbmZvKSA/IFN0cmluZyhvYmplY3QuZGVidWdJbmZvKSA6IFwiXCIsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5lZGl0aW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai5lZGl0aW9uID0gc2VydmVySW5mb19FZGl0aW9uVG9KU09OKG1lc3NhZ2UuZWRpdGlvbikpO1xuICAgICAgICBtZXNzYWdlLnZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLnZlcnNpb24gPSBtZXNzYWdlLnZlcnNpb24pO1xuICAgICAgICBtZXNzYWdlLnByb3RvY29sICE9PSB1bmRlZmluZWQgJiYgKG9iai5wcm90b2NvbCA9IE1hdGgucm91bmQobWVzc2FnZS5wcm90b2NvbCkpO1xuICAgICAgICBtZXNzYWdlLnJlZ2lvbiAhPT0gdW5kZWZpbmVkICYmIChvYmoucmVnaW9uID0gbWVzc2FnZS5yZWdpb24pO1xuICAgICAgICBtZXNzYWdlLm5vZGVJZCAhPT0gdW5kZWZpbmVkICYmIChvYmoubm9kZUlkID0gbWVzc2FnZS5ub2RlSWQpO1xuICAgICAgICBtZXNzYWdlLmRlYnVnSW5mbyAhPT0gdW5kZWZpbmVkICYmIChvYmouZGVidWdJbmZvID0gbWVzc2FnZS5kZWJ1Z0luZm8pO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVNlcnZlckluZm8oKTtcbiAgICAgICAgbWVzc2FnZS5lZGl0aW9uID0gKF9hID0gb2JqZWN0LmVkaXRpb24pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDA7XG4gICAgICAgIG1lc3NhZ2UudmVyc2lvbiA9IChfYiA9IG9iamVjdC52ZXJzaW9uKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnByb3RvY29sID0gKF9jID0gb2JqZWN0LnByb3RvY29sKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAwO1xuICAgICAgICBtZXNzYWdlLnJlZ2lvbiA9IChfZCA9IG9iamVjdC5yZWdpb24pICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2Uubm9kZUlkID0gKF9lID0gb2JqZWN0Lm5vZGVJZCkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5kZWJ1Z0luZm8gPSAoX2YgPSBvYmplY3QuZGVidWdJbmZvKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiBcIlwiO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VDbGllbnRJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHNkazogMCxcbiAgICAgICAgdmVyc2lvbjogXCJcIixcbiAgICAgICAgcHJvdG9jb2w6IDAsXG4gICAgICAgIG9zOiBcIlwiLFxuICAgICAgICBvc1ZlcnNpb246IFwiXCIsXG4gICAgICAgIGRldmljZU1vZGVsOiBcIlwiLFxuICAgICAgICBicm93c2VyOiBcIlwiLFxuICAgICAgICBicm93c2VyVmVyc2lvbjogXCJcIixcbiAgICAgICAgYWRkcmVzczogXCJcIixcbiAgICAgICAgbmV0d29yazogXCJcIixcbiAgICB9O1xufVxuZXhwb3J0cy5DbGllbnRJbmZvID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc2RrICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDgpLmludDMyKG1lc3NhZ2Uuc2RrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS52ZXJzaW9uICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4KS5zdHJpbmcobWVzc2FnZS52ZXJzaW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wcm90b2NvbCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkuaW50MzIobWVzc2FnZS5wcm90b2NvbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uub3MgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzQpLnN0cmluZyhtZXNzYWdlLm9zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5vc1ZlcnNpb24gIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDIpLnN0cmluZyhtZXNzYWdlLm9zVmVyc2lvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZGV2aWNlTW9kZWwgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNTApLnN0cmluZyhtZXNzYWdlLmRldmljZU1vZGVsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5icm93c2VyICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDU4KS5zdHJpbmcobWVzc2FnZS5icm93c2VyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5icm93c2VyVmVyc2lvbiAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig2Nikuc3RyaW5nKG1lc3NhZ2UuYnJvd3NlclZlcnNpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmFkZHJlc3MgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNzQpLnN0cmluZyhtZXNzYWdlLmFkZHJlc3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm5ldHdvcmsgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoODIpLnN0cmluZyhtZXNzYWdlLm5ldHdvcmspO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUNsaWVudEluZm8oKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNkayA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudmVyc2lvbiA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnByb3RvY29sID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5vcyA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm9zVmVyc2lvbiA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRldmljZU1vZGVsID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYnJvd3NlciA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmJyb3dzZXJWZXJzaW9uID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWRkcmVzcyA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uZXR3b3JrID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZGs6IGlzU2V0KG9iamVjdC5zZGspID8gY2xpZW50SW5mb19TREtGcm9tSlNPTihvYmplY3Quc2RrKSA6IDAsXG4gICAgICAgICAgICB2ZXJzaW9uOiBpc1NldChvYmplY3QudmVyc2lvbikgPyBTdHJpbmcob2JqZWN0LnZlcnNpb24pIDogXCJcIixcbiAgICAgICAgICAgIHByb3RvY29sOiBpc1NldChvYmplY3QucHJvdG9jb2wpID8gTnVtYmVyKG9iamVjdC5wcm90b2NvbCkgOiAwLFxuICAgICAgICAgICAgb3M6IGlzU2V0KG9iamVjdC5vcykgPyBTdHJpbmcob2JqZWN0Lm9zKSA6IFwiXCIsXG4gICAgICAgICAgICBvc1ZlcnNpb246IGlzU2V0KG9iamVjdC5vc1ZlcnNpb24pID8gU3RyaW5nKG9iamVjdC5vc1ZlcnNpb24pIDogXCJcIixcbiAgICAgICAgICAgIGRldmljZU1vZGVsOiBpc1NldChvYmplY3QuZGV2aWNlTW9kZWwpID8gU3RyaW5nKG9iamVjdC5kZXZpY2VNb2RlbCkgOiBcIlwiLFxuICAgICAgICAgICAgYnJvd3NlcjogaXNTZXQob2JqZWN0LmJyb3dzZXIpID8gU3RyaW5nKG9iamVjdC5icm93c2VyKSA6IFwiXCIsXG4gICAgICAgICAgICBicm93c2VyVmVyc2lvbjogaXNTZXQob2JqZWN0LmJyb3dzZXJWZXJzaW9uKSA/IFN0cmluZyhvYmplY3QuYnJvd3NlclZlcnNpb24pIDogXCJcIixcbiAgICAgICAgICAgIGFkZHJlc3M6IGlzU2V0KG9iamVjdC5hZGRyZXNzKSA/IFN0cmluZyhvYmplY3QuYWRkcmVzcykgOiBcIlwiLFxuICAgICAgICAgICAgbmV0d29yazogaXNTZXQob2JqZWN0Lm5ldHdvcmspID8gU3RyaW5nKG9iamVjdC5uZXR3b3JrKSA6IFwiXCIsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5zZGsgIT09IHVuZGVmaW5lZCAmJiAob2JqLnNkayA9IGNsaWVudEluZm9fU0RLVG9KU09OKG1lc3NhZ2Uuc2RrKSk7XG4gICAgICAgIG1lc3NhZ2UudmVyc2lvbiAhPT0gdW5kZWZpbmVkICYmIChvYmoudmVyc2lvbiA9IG1lc3NhZ2UudmVyc2lvbik7XG4gICAgICAgIG1lc3NhZ2UucHJvdG9jb2wgIT09IHVuZGVmaW5lZCAmJiAob2JqLnByb3RvY29sID0gTWF0aC5yb3VuZChtZXNzYWdlLnByb3RvY29sKSk7XG4gICAgICAgIG1lc3NhZ2Uub3MgIT09IHVuZGVmaW5lZCAmJiAob2JqLm9zID0gbWVzc2FnZS5vcyk7XG4gICAgICAgIG1lc3NhZ2Uub3NWZXJzaW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai5vc1ZlcnNpb24gPSBtZXNzYWdlLm9zVmVyc2lvbik7XG4gICAgICAgIG1lc3NhZ2UuZGV2aWNlTW9kZWwgIT09IHVuZGVmaW5lZCAmJiAob2JqLmRldmljZU1vZGVsID0gbWVzc2FnZS5kZXZpY2VNb2RlbCk7XG4gICAgICAgIG1lc3NhZ2UuYnJvd3NlciAhPT0gdW5kZWZpbmVkICYmIChvYmouYnJvd3NlciA9IG1lc3NhZ2UuYnJvd3Nlcik7XG4gICAgICAgIG1lc3NhZ2UuYnJvd3NlclZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiAob2JqLmJyb3dzZXJWZXJzaW9uID0gbWVzc2FnZS5icm93c2VyVmVyc2lvbik7XG4gICAgICAgIG1lc3NhZ2UuYWRkcmVzcyAhPT0gdW5kZWZpbmVkICYmIChvYmouYWRkcmVzcyA9IG1lc3NhZ2UuYWRkcmVzcyk7XG4gICAgICAgIG1lc3NhZ2UubmV0d29yayAhPT0gdW5kZWZpbmVkICYmIChvYmoubmV0d29yayA9IG1lc3NhZ2UubmV0d29yayk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2osIF9rO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUNsaWVudEluZm8oKTtcbiAgICAgICAgbWVzc2FnZS5zZGsgPSAoX2EgPSBvYmplY3Quc2RrKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xuICAgICAgICBtZXNzYWdlLnZlcnNpb24gPSAoX2IgPSBvYmplY3QudmVyc2lvbikgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5wcm90b2NvbCA9IChfYyA9IG9iamVjdC5wcm90b2NvbCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMDtcbiAgICAgICAgbWVzc2FnZS5vcyA9IChfZCA9IG9iamVjdC5vcykgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5vc1ZlcnNpb24gPSAoX2UgPSBvYmplY3Qub3NWZXJzaW9uKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmRldmljZU1vZGVsID0gKF9mID0gb2JqZWN0LmRldmljZU1vZGVsKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmJyb3dzZXIgPSAoX2cgPSBvYmplY3QuYnJvd3NlcikgIT09IG51bGwgJiYgX2cgIT09IHZvaWQgMCA/IF9nIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5icm93c2VyVmVyc2lvbiA9IChfaCA9IG9iamVjdC5icm93c2VyVmVyc2lvbikgIT09IG51bGwgJiYgX2ggIT09IHZvaWQgMCA/IF9oIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5hZGRyZXNzID0gKF9qID0gb2JqZWN0LmFkZHJlc3MpICE9PSBudWxsICYmIF9qICE9PSB2b2lkIDAgPyBfaiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UubmV0d29yayA9IChfayA9IG9iamVjdC5uZXR3b3JrKSAhPT0gbnVsbCAmJiBfayAhPT0gdm9pZCAwID8gX2sgOiBcIlwiO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VDbGllbnRDb25maWd1cmF0aW9uKCkge1xuICAgIHJldHVybiB7IHZpZGVvOiB1bmRlZmluZWQsIHNjcmVlbjogdW5kZWZpbmVkLCByZXN1bWVDb25uZWN0aW9uOiAwLCBkaXNhYmxlZENvZGVjczogdW5kZWZpbmVkLCBmb3JjZVJlbGF5OiAwIH07XG59XG5leHBvcnRzLkNsaWVudENvbmZpZ3VyYXRpb24gPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS52aWRlbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlZpZGVvQ29uZmlndXJhdGlvbi5lbmNvZGUobWVzc2FnZS52aWRlbywgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5zY3JlZW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5WaWRlb0NvbmZpZ3VyYXRpb24uZW5jb2RlKG1lc3NhZ2Uuc2NyZWVuLCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJlc3VtZUNvbm5lY3Rpb24gIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjQpLmludDMyKG1lc3NhZ2UucmVzdW1lQ29ubmVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZGlzYWJsZWRDb2RlY3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXhwb3J0cy5EaXNhYmxlZENvZGVjcy5lbmNvZGUobWVzc2FnZS5kaXNhYmxlZENvZGVjcywgd3JpdGVyLnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5mb3JjZVJlbGF5ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQwKS5pbnQzMihtZXNzYWdlLmZvcmNlUmVsYXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUNsaWVudENvbmZpZ3VyYXRpb24oKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZpZGVvID0gZXhwb3J0cy5WaWRlb0NvbmZpZ3VyYXRpb24uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNjcmVlbiA9IGV4cG9ydHMuVmlkZW9Db25maWd1cmF0aW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZXN1bWVDb25uZWN0aW9uID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kaXNhYmxlZENvZGVjcyA9IGV4cG9ydHMuRGlzYWJsZWRDb2RlY3MuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZvcmNlUmVsYXkgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmlkZW86IGlzU2V0KG9iamVjdC52aWRlbykgPyBleHBvcnRzLlZpZGVvQ29uZmlndXJhdGlvbi5mcm9tSlNPTihvYmplY3QudmlkZW8pIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc2NyZWVuOiBpc1NldChvYmplY3Quc2NyZWVuKSA/IGV4cG9ydHMuVmlkZW9Db25maWd1cmF0aW9uLmZyb21KU09OKG9iamVjdC5zY3JlZW4pIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcmVzdW1lQ29ubmVjdGlvbjogaXNTZXQob2JqZWN0LnJlc3VtZUNvbm5lY3Rpb24pID8gY2xpZW50Q29uZmlnU2V0dGluZ0Zyb21KU09OKG9iamVjdC5yZXN1bWVDb25uZWN0aW9uKSA6IDAsXG4gICAgICAgICAgICBkaXNhYmxlZENvZGVjczogaXNTZXQob2JqZWN0LmRpc2FibGVkQ29kZWNzKSA/IGV4cG9ydHMuRGlzYWJsZWRDb2RlY3MuZnJvbUpTT04ob2JqZWN0LmRpc2FibGVkQ29kZWNzKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGZvcmNlUmVsYXk6IGlzU2V0KG9iamVjdC5mb3JjZVJlbGF5KSA/IGNsaWVudENvbmZpZ1NldHRpbmdGcm9tSlNPTihvYmplY3QuZm9yY2VSZWxheSkgOiAwLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UudmlkZW8gIT09IHVuZGVmaW5lZCAmJiAob2JqLnZpZGVvID0gbWVzc2FnZS52aWRlbyA/IGV4cG9ydHMuVmlkZW9Db25maWd1cmF0aW9uLnRvSlNPTihtZXNzYWdlLnZpZGVvKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2Uuc2NyZWVuICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmouc2NyZWVuID0gbWVzc2FnZS5zY3JlZW4gPyBleHBvcnRzLlZpZGVvQ29uZmlndXJhdGlvbi50b0pTT04obWVzc2FnZS5zY3JlZW4pIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5yZXN1bWVDb25uZWN0aW9uICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmoucmVzdW1lQ29ubmVjdGlvbiA9IGNsaWVudENvbmZpZ1NldHRpbmdUb0pTT04obWVzc2FnZS5yZXN1bWVDb25uZWN0aW9uKSk7XG4gICAgICAgIG1lc3NhZ2UuZGlzYWJsZWRDb2RlY3MgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5kaXNhYmxlZENvZGVjcyA9IG1lc3NhZ2UuZGlzYWJsZWRDb2RlY3MgPyBleHBvcnRzLkRpc2FibGVkQ29kZWNzLnRvSlNPTihtZXNzYWdlLmRpc2FibGVkQ29kZWNzKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UuZm9yY2VSZWxheSAhPT0gdW5kZWZpbmVkICYmIChvYmouZm9yY2VSZWxheSA9IGNsaWVudENvbmZpZ1NldHRpbmdUb0pTT04obWVzc2FnZS5mb3JjZVJlbGF5KSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VDbGllbnRDb25maWd1cmF0aW9uKCk7XG4gICAgICAgIG1lc3NhZ2UudmlkZW8gPSAob2JqZWN0LnZpZGVvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnZpZGVvICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLlZpZGVvQ29uZmlndXJhdGlvbi5mcm9tUGFydGlhbChvYmplY3QudmlkZW8pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5zY3JlZW4gPSAob2JqZWN0LnNjcmVlbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5zY3JlZW4gIT09IG51bGwpXG4gICAgICAgICAgICA/IGV4cG9ydHMuVmlkZW9Db25maWd1cmF0aW9uLmZyb21QYXJ0aWFsKG9iamVjdC5zY3JlZW4pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5yZXN1bWVDb25uZWN0aW9uID0gKF9hID0gb2JqZWN0LnJlc3VtZUNvbm5lY3Rpb24pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDA7XG4gICAgICAgIG1lc3NhZ2UuZGlzYWJsZWRDb2RlY3MgPSAob2JqZWN0LmRpc2FibGVkQ29kZWNzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmRpc2FibGVkQ29kZWNzICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLkRpc2FibGVkQ29kZWNzLmZyb21QYXJ0aWFsKG9iamVjdC5kaXNhYmxlZENvZGVjcylcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmZvcmNlUmVsYXkgPSAoX2IgPSBvYmplY3QuZm9yY2VSZWxheSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogMDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVmlkZW9Db25maWd1cmF0aW9uKCkge1xuICAgIHJldHVybiB7IGhhcmR3YXJlRW5jb2RlcjogMCB9O1xufVxuZXhwb3J0cy5WaWRlb0NvbmZpZ3VyYXRpb24gPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5oYXJkd2FyZUVuY29kZXIgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoOCkuaW50MzIobWVzc2FnZS5oYXJkd2FyZUVuY29kZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVZpZGVvQ29uZmlndXJhdGlvbigpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaGFyZHdhcmVFbmNvZGVyID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHsgaGFyZHdhcmVFbmNvZGVyOiBpc1NldChvYmplY3QuaGFyZHdhcmVFbmNvZGVyKSA/IGNsaWVudENvbmZpZ1NldHRpbmdGcm9tSlNPTihvYmplY3QuaGFyZHdhcmVFbmNvZGVyKSA6IDAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmhhcmR3YXJlRW5jb2RlciAhPT0gdW5kZWZpbmVkICYmIChvYmouaGFyZHdhcmVFbmNvZGVyID0gY2xpZW50Q29uZmlnU2V0dGluZ1RvSlNPTihtZXNzYWdlLmhhcmR3YXJlRW5jb2RlcikpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VWaWRlb0NvbmZpZ3VyYXRpb24oKTtcbiAgICAgICAgbWVzc2FnZS5oYXJkd2FyZUVuY29kZXIgPSAoX2EgPSBvYmplY3QuaGFyZHdhcmVFbmNvZGVyKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VEaXNhYmxlZENvZGVjcygpIHtcbiAgICByZXR1cm4geyBjb2RlY3M6IFtdLCBwdWJsaXNoOiBbXSB9O1xufVxuZXhwb3J0cy5EaXNhYmxlZENvZGVjcyA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLmNvZGVjcykge1xuICAgICAgICAgICAgZXhwb3J0cy5Db2RlYy5lbmNvZGUodiwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5wdWJsaXNoKSB7XG4gICAgICAgICAgICBleHBvcnRzLkNvZGVjLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZURpc2FibGVkQ29kZWNzKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jb2RlY3MucHVzaChleHBvcnRzLkNvZGVjLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucHVibGlzaC5wdXNoKGV4cG9ydHMuQ29kZWMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvZGVjczogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QuY29kZWNzKSA/IG9iamVjdC5jb2RlY3MubWFwKChlKSA9PiBleHBvcnRzLkNvZGVjLmZyb21KU09OKGUpKSA6IFtdLFxuICAgICAgICAgICAgcHVibGlzaDogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QucHVibGlzaCkgPyBvYmplY3QucHVibGlzaC5tYXAoKGUpID0+IGV4cG9ydHMuQ29kZWMuZnJvbUpTT04oZSkpIDogW10sXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY29kZWNzKSB7XG4gICAgICAgICAgICBvYmouY29kZWNzID0gbWVzc2FnZS5jb2RlY3MubWFwKChlKSA9PiBlID8gZXhwb3J0cy5Db2RlYy50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLmNvZGVjcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnB1Ymxpc2gpIHtcbiAgICAgICAgICAgIG9iai5wdWJsaXNoID0gbWVzc2FnZS5wdWJsaXNoLm1hcCgoZSkgPT4gZSA/IGV4cG9ydHMuQ29kZWMudG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5wdWJsaXNoID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZURpc2FibGVkQ29kZWNzKCk7XG4gICAgICAgIG1lc3NhZ2UuY29kZWNzID0gKChfYSA9IG9iamVjdC5jb2RlY3MpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYXAoKGUpID0+IGV4cG9ydHMuQ29kZWMuZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgbWVzc2FnZS5wdWJsaXNoID0gKChfYiA9IG9iamVjdC5wdWJsaXNoKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubWFwKChlKSA9PiBleHBvcnRzLkNvZGVjLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVJUUERyaWZ0KCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXJ0VGltZTogdW5kZWZpbmVkLFxuICAgICAgICBlbmRUaW1lOiB1bmRlZmluZWQsXG4gICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICBzdGFydFRpbWVzdGFtcDogMCxcbiAgICAgICAgZW5kVGltZXN0YW1wOiAwLFxuICAgICAgICBydHBDbG9ja1RpY2tzOiAwLFxuICAgICAgICBkcmlmdFNhbXBsZXM6IDAsXG4gICAgICAgIGRyaWZ0TXM6IDAsXG4gICAgICAgIGNsb2NrUmF0ZTogMCxcbiAgICB9O1xufVxuZXhwb3J0cy5SVFBEcmlmdCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0VGltZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aW1lc3RhbXBfMS5UaW1lc3RhbXAuZW5jb2RlKHRvVGltZXN0YW1wKG1lc3NhZ2Uuc3RhcnRUaW1lKSwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5lbmRUaW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRpbWVzdGFtcF8xLlRpbWVzdGFtcC5lbmNvZGUodG9UaW1lc3RhbXAobWVzc2FnZS5lbmRUaW1lKSwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5kdXJhdGlvbiAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNSkuZG91YmxlKG1lc3NhZ2UuZHVyYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0VGltZXN0YW1wICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDMyKS51aW50NjQobWVzc2FnZS5zdGFydFRpbWVzdGFtcCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZW5kVGltZXN0YW1wICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQwKS51aW50NjQobWVzc2FnZS5lbmRUaW1lc3RhbXApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnJ0cENsb2NrVGlja3MgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDgpLnVpbnQ2NChtZXNzYWdlLnJ0cENsb2NrVGlja3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmRyaWZ0U2FtcGxlcyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig1NikuaW50NjQobWVzc2FnZS5kcmlmdFNhbXBsZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmRyaWZ0TXMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNjUpLmRvdWJsZShtZXNzYWdlLmRyaWZ0TXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmNsb2NrUmF0ZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig3MykuZG91YmxlKG1lc3NhZ2UuY2xvY2tSYXRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSVFBEcmlmdCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhcnRUaW1lID0gZnJvbVRpbWVzdGFtcCh0aW1lc3RhbXBfMS5UaW1lc3RhbXAuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRUaW1lID0gZnJvbVRpbWVzdGFtcCh0aW1lc3RhbXBfMS5UaW1lc3RhbXAuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kdXJhdGlvbiA9IHJlYWRlci5kb3VibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXJ0VGltZXN0YW1wID0gbG9uZ1RvTnVtYmVyKHJlYWRlci51aW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRUaW1lc3RhbXAgPSBsb25nVG9OdW1iZXIocmVhZGVyLnVpbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJ0cENsb2NrVGlja3MgPSBsb25nVG9OdW1iZXIocmVhZGVyLnVpbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRyaWZ0U2FtcGxlcyA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kcmlmdE1zID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2xvY2tSYXRlID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGFydFRpbWU6IGlzU2V0KG9iamVjdC5zdGFydFRpbWUpID8gZnJvbUpzb25UaW1lc3RhbXAob2JqZWN0LnN0YXJ0VGltZSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBlbmRUaW1lOiBpc1NldChvYmplY3QuZW5kVGltZSkgPyBmcm9tSnNvblRpbWVzdGFtcChvYmplY3QuZW5kVGltZSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBkdXJhdGlvbjogaXNTZXQob2JqZWN0LmR1cmF0aW9uKSA/IE51bWJlcihvYmplY3QuZHVyYXRpb24pIDogMCxcbiAgICAgICAgICAgIHN0YXJ0VGltZXN0YW1wOiBpc1NldChvYmplY3Quc3RhcnRUaW1lc3RhbXApID8gTnVtYmVyKG9iamVjdC5zdGFydFRpbWVzdGFtcCkgOiAwLFxuICAgICAgICAgICAgZW5kVGltZXN0YW1wOiBpc1NldChvYmplY3QuZW5kVGltZXN0YW1wKSA/IE51bWJlcihvYmplY3QuZW5kVGltZXN0YW1wKSA6IDAsXG4gICAgICAgICAgICBydHBDbG9ja1RpY2tzOiBpc1NldChvYmplY3QucnRwQ2xvY2tUaWNrcykgPyBOdW1iZXIob2JqZWN0LnJ0cENsb2NrVGlja3MpIDogMCxcbiAgICAgICAgICAgIGRyaWZ0U2FtcGxlczogaXNTZXQob2JqZWN0LmRyaWZ0U2FtcGxlcykgPyBOdW1iZXIob2JqZWN0LmRyaWZ0U2FtcGxlcykgOiAwLFxuICAgICAgICAgICAgZHJpZnRNczogaXNTZXQob2JqZWN0LmRyaWZ0TXMpID8gTnVtYmVyKG9iamVjdC5kcmlmdE1zKSA6IDAsXG4gICAgICAgICAgICBjbG9ja1JhdGU6IGlzU2V0KG9iamVjdC5jbG9ja1JhdGUpID8gTnVtYmVyKG9iamVjdC5jbG9ja1JhdGUpIDogMCxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnN0YXJ0VGltZSAhPT0gdW5kZWZpbmVkICYmIChvYmouc3RhcnRUaW1lID0gbWVzc2FnZS5zdGFydFRpbWUudG9JU09TdHJpbmcoKSk7XG4gICAgICAgIG1lc3NhZ2UuZW5kVGltZSAhPT0gdW5kZWZpbmVkICYmIChvYmouZW5kVGltZSA9IG1lc3NhZ2UuZW5kVGltZS50b0lTT1N0cmluZygpKTtcbiAgICAgICAgbWVzc2FnZS5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkICYmIChvYmouZHVyYXRpb24gPSBtZXNzYWdlLmR1cmF0aW9uKTtcbiAgICAgICAgbWVzc2FnZS5zdGFydFRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkICYmIChvYmouc3RhcnRUaW1lc3RhbXAgPSBNYXRoLnJvdW5kKG1lc3NhZ2Uuc3RhcnRUaW1lc3RhbXApKTtcbiAgICAgICAgbWVzc2FnZS5lbmRUaW1lc3RhbXAgIT09IHVuZGVmaW5lZCAmJiAob2JqLmVuZFRpbWVzdGFtcCA9IE1hdGgucm91bmQobWVzc2FnZS5lbmRUaW1lc3RhbXApKTtcbiAgICAgICAgbWVzc2FnZS5ydHBDbG9ja1RpY2tzICE9PSB1bmRlZmluZWQgJiYgKG9iai5ydHBDbG9ja1RpY2tzID0gTWF0aC5yb3VuZChtZXNzYWdlLnJ0cENsb2NrVGlja3MpKTtcbiAgICAgICAgbWVzc2FnZS5kcmlmdFNhbXBsZXMgIT09IHVuZGVmaW5lZCAmJiAob2JqLmRyaWZ0U2FtcGxlcyA9IE1hdGgucm91bmQobWVzc2FnZS5kcmlmdFNhbXBsZXMpKTtcbiAgICAgICAgbWVzc2FnZS5kcmlmdE1zICE9PSB1bmRlZmluZWQgJiYgKG9iai5kcmlmdE1zID0gbWVzc2FnZS5kcmlmdE1zKTtcbiAgICAgICAgbWVzc2FnZS5jbG9ja1JhdGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNsb2NrUmF0ZSA9IG1lc3NhZ2UuY2xvY2tSYXRlKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfajtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSVFBEcmlmdCgpO1xuICAgICAgICBtZXNzYWdlLnN0YXJ0VGltZSA9IChfYSA9IG9iamVjdC5zdGFydFRpbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5lbmRUaW1lID0gKF9iID0gb2JqZWN0LmVuZFRpbWUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5kdXJhdGlvbiA9IChfYyA9IG9iamVjdC5kdXJhdGlvbikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMDtcbiAgICAgICAgbWVzc2FnZS5zdGFydFRpbWVzdGFtcCA9IChfZCA9IG9iamVjdC5zdGFydFRpbWVzdGFtcCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogMDtcbiAgICAgICAgbWVzc2FnZS5lbmRUaW1lc3RhbXAgPSAoX2UgPSBvYmplY3QuZW5kVGltZXN0YW1wKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiAwO1xuICAgICAgICBtZXNzYWdlLnJ0cENsb2NrVGlja3MgPSAoX2YgPSBvYmplY3QucnRwQ2xvY2tUaWNrcykgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogMDtcbiAgICAgICAgbWVzc2FnZS5kcmlmdFNhbXBsZXMgPSAoX2cgPSBvYmplY3QuZHJpZnRTYW1wbGVzKSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiAwO1xuICAgICAgICBtZXNzYWdlLmRyaWZ0TXMgPSAoX2ggPSBvYmplY3QuZHJpZnRNcykgIT09IG51bGwgJiYgX2ggIT09IHZvaWQgMCA/IF9oIDogMDtcbiAgICAgICAgbWVzc2FnZS5jbG9ja1JhdGUgPSAoX2ogPSBvYmplY3QuY2xvY2tSYXRlKSAhPT0gbnVsbCAmJiBfaiAhPT0gdm9pZCAwID8gX2ogOiAwO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VSVFBTdGF0cygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdGFydFRpbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgZW5kVGltZTogdW5kZWZpbmVkLFxuICAgICAgICBkdXJhdGlvbjogMCxcbiAgICAgICAgcGFja2V0czogMCxcbiAgICAgICAgcGFja2V0UmF0ZTogMCxcbiAgICAgICAgYnl0ZXM6IDAsXG4gICAgICAgIGhlYWRlckJ5dGVzOiAwLFxuICAgICAgICBiaXRyYXRlOiAwLFxuICAgICAgICBwYWNrZXRzTG9zdDogMCxcbiAgICAgICAgcGFja2V0TG9zc1JhdGU6IDAsXG4gICAgICAgIHBhY2tldExvc3NQZXJjZW50YWdlOiAwLFxuICAgICAgICBwYWNrZXRzRHVwbGljYXRlOiAwLFxuICAgICAgICBwYWNrZXREdXBsaWNhdGVSYXRlOiAwLFxuICAgICAgICBieXRlc0R1cGxpY2F0ZTogMCxcbiAgICAgICAgaGVhZGVyQnl0ZXNEdXBsaWNhdGU6IDAsXG4gICAgICAgIGJpdHJhdGVEdXBsaWNhdGU6IDAsXG4gICAgICAgIHBhY2tldHNQYWRkaW5nOiAwLFxuICAgICAgICBwYWNrZXRQYWRkaW5nUmF0ZTogMCxcbiAgICAgICAgYnl0ZXNQYWRkaW5nOiAwLFxuICAgICAgICBoZWFkZXJCeXRlc1BhZGRpbmc6IDAsXG4gICAgICAgIGJpdHJhdGVQYWRkaW5nOiAwLFxuICAgICAgICBwYWNrZXRzT3V0T2ZPcmRlcjogMCxcbiAgICAgICAgZnJhbWVzOiAwLFxuICAgICAgICBmcmFtZVJhdGU6IDAsXG4gICAgICAgIGppdHRlckN1cnJlbnQ6IDAsXG4gICAgICAgIGppdHRlck1heDogMCxcbiAgICAgICAgZ2FwSGlzdG9ncmFtOiB7fSxcbiAgICAgICAgbmFja3M6IDAsXG4gICAgICAgIG5hY2tBY2tzOiAwLFxuICAgICAgICBuYWNrTWlzc2VzOiAwLFxuICAgICAgICBuYWNrUmVwZWF0ZWQ6IDAsXG4gICAgICAgIHBsaXM6IDAsXG4gICAgICAgIGxhc3RQbGk6IHVuZGVmaW5lZCxcbiAgICAgICAgZmlyczogMCxcbiAgICAgICAgbGFzdEZpcjogdW5kZWZpbmVkLFxuICAgICAgICBydHRDdXJyZW50OiAwLFxuICAgICAgICBydHRNYXg6IDAsXG4gICAgICAgIGtleUZyYW1lczogMCxcbiAgICAgICAgbGFzdEtleUZyYW1lOiB1bmRlZmluZWQsXG4gICAgICAgIGxheWVyTG9ja1BsaXM6IDAsXG4gICAgICAgIGxhc3RMYXllckxvY2tQbGk6IHVuZGVmaW5lZCxcbiAgICAgICAgcGFja2V0RHJpZnQ6IHVuZGVmaW5lZCxcbiAgICAgICAgcmVwb3J0RHJpZnQ6IHVuZGVmaW5lZCxcbiAgICB9O1xufVxuZXhwb3J0cy5SVFBTdGF0cyA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0VGltZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aW1lc3RhbXBfMS5UaW1lc3RhbXAuZW5jb2RlKHRvVGltZXN0YW1wKG1lc3NhZ2Uuc3RhcnRUaW1lKSwgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5lbmRUaW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRpbWVzdGFtcF8xLlRpbWVzdGFtcC5lbmNvZGUodG9UaW1lc3RhbXAobWVzc2FnZS5lbmRUaW1lKSwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5kdXJhdGlvbiAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNSkuZG91YmxlKG1lc3NhZ2UuZHVyYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBhY2tldHMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzIpLnVpbnQzMihtZXNzYWdlLnBhY2tldHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBhY2tldFJhdGUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNDEpLmRvdWJsZShtZXNzYWdlLnBhY2tldFJhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmJ5dGVzICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQ4KS51aW50NjQobWVzc2FnZS5ieXRlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuaGVhZGVyQnl0ZXMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzEyKS51aW50NjQobWVzc2FnZS5oZWFkZXJCeXRlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYml0cmF0ZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig1NykuZG91YmxlKG1lc3NhZ2UuYml0cmF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucGFja2V0c0xvc3QgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNjQpLnVpbnQzMihtZXNzYWdlLnBhY2tldHNMb3N0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wYWNrZXRMb3NzUmF0ZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig3MykuZG91YmxlKG1lc3NhZ2UucGFja2V0TG9zc1JhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBhY2tldExvc3NQZXJjZW50YWdlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDg1KS5mbG9hdChtZXNzYWdlLnBhY2tldExvc3NQZXJjZW50YWdlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wYWNrZXRzRHVwbGljYXRlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDg4KS51aW50MzIobWVzc2FnZS5wYWNrZXRzRHVwbGljYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wYWNrZXREdXBsaWNhdGVSYXRlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDk3KS5kb3VibGUobWVzc2FnZS5wYWNrZXREdXBsaWNhdGVSYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5ieXRlc0R1cGxpY2F0ZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMDQpLnVpbnQ2NChtZXNzYWdlLmJ5dGVzRHVwbGljYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5oZWFkZXJCeXRlc0R1cGxpY2F0ZSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigzMjApLnVpbnQ2NChtZXNzYWdlLmhlYWRlckJ5dGVzRHVwbGljYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5iaXRyYXRlRHVwbGljYXRlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDExMykuZG91YmxlKG1lc3NhZ2UuYml0cmF0ZUR1cGxpY2F0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucGFja2V0c1BhZGRpbmcgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTIwKS51aW50MzIobWVzc2FnZS5wYWNrZXRzUGFkZGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucGFja2V0UGFkZGluZ1JhdGUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTI5KS5kb3VibGUobWVzc2FnZS5wYWNrZXRQYWRkaW5nUmF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuYnl0ZXNQYWRkaW5nICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEzNikudWludDY0KG1lc3NhZ2UuYnl0ZXNQYWRkaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5oZWFkZXJCeXRlc1BhZGRpbmcgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzI4KS51aW50NjQobWVzc2FnZS5oZWFkZXJCeXRlc1BhZGRpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmJpdHJhdGVQYWRkaW5nICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE0NSkuZG91YmxlKG1lc3NhZ2UuYml0cmF0ZVBhZGRpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBhY2tldHNPdXRPZk9yZGVyICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE1MikudWludDMyKG1lc3NhZ2UucGFja2V0c091dE9mT3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmZyYW1lcyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxNjApLnVpbnQzMihtZXNzYWdlLmZyYW1lcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZnJhbWVSYXRlICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE2OSkuZG91YmxlKG1lc3NhZ2UuZnJhbWVSYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5qaXR0ZXJDdXJyZW50ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE3NykuZG91YmxlKG1lc3NhZ2Uuaml0dGVyQ3VycmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuaml0dGVyTWF4ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE4NSkuZG91YmxlKG1lc3NhZ2Uuaml0dGVyTWF4KTtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QuZW50cmllcyhtZXNzYWdlLmdhcEhpc3RvZ3JhbSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgICBleHBvcnRzLlJUUFN0YXRzX0dhcEhpc3RvZ3JhbUVudHJ5LmVuY29kZSh7IGtleToga2V5LCB2YWx1ZSB9LCB3cml0ZXIudWludDMyKDE5NCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChtZXNzYWdlLm5hY2tzICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDIwMCkudWludDMyKG1lc3NhZ2UubmFja3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm5hY2tBY2tzICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI5NikudWludDMyKG1lc3NhZ2UubmFja0Fja3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm5hY2tNaXNzZXMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjA4KS51aW50MzIobWVzc2FnZS5uYWNrTWlzc2VzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5uYWNrUmVwZWF0ZWQgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzA0KS51aW50MzIobWVzc2FnZS5uYWNrUmVwZWF0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBsaXMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjE2KS51aW50MzIobWVzc2FnZS5wbGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5sYXN0UGxpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRpbWVzdGFtcF8xLlRpbWVzdGFtcC5lbmNvZGUodG9UaW1lc3RhbXAobWVzc2FnZS5sYXN0UGxpKSwgd3JpdGVyLnVpbnQzMigyMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZmlycyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyMzIpLnVpbnQzMihtZXNzYWdlLmZpcnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmxhc3RGaXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGltZXN0YW1wXzEuVGltZXN0YW1wLmVuY29kZSh0b1RpbWVzdGFtcChtZXNzYWdlLmxhc3RGaXIpLCB3cml0ZXIudWludDMyKDI0MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5ydHRDdXJyZW50ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI0OCkudWludDMyKG1lc3NhZ2UucnR0Q3VycmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucnR0TWF4ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDI1NikudWludDMyKG1lc3NhZ2UucnR0TWF4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5rZXlGcmFtZXMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjY0KS51aW50MzIobWVzc2FnZS5rZXlGcmFtZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmxhc3RLZXlGcmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aW1lc3RhbXBfMS5UaW1lc3RhbXAuZW5jb2RlKHRvVGltZXN0YW1wKG1lc3NhZ2UubGFzdEtleUZyYW1lKSwgd3JpdGVyLnVpbnQzMigyNzQpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubGF5ZXJMb2NrUGxpcyAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyODApLnVpbnQzMihtZXNzYWdlLmxheWVyTG9ja1BsaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmxhc3RMYXllckxvY2tQbGkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGltZXN0YW1wXzEuVGltZXN0YW1wLmVuY29kZSh0b1RpbWVzdGFtcChtZXNzYWdlLmxhc3RMYXllckxvY2tQbGkpLCB3cml0ZXIudWludDMyKDI5MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wYWNrZXREcmlmdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlJUUERyaWZ0LmVuY29kZShtZXNzYWdlLnBhY2tldERyaWZ0LCB3cml0ZXIudWludDMyKDM1NCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5yZXBvcnREcmlmdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBvcnRzLlJUUERyaWZ0LmVuY29kZShtZXNzYWdlLnJlcG9ydERyaWZ0LCB3cml0ZXIudWludDMyKDM2MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSVFBTdGF0cygpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhcnRUaW1lID0gZnJvbVRpbWVzdGFtcCh0aW1lc3RhbXBfMS5UaW1lc3RhbXAuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRUaW1lID0gZnJvbVRpbWVzdGFtcCh0aW1lc3RhbXBfMS5UaW1lc3RhbXAuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kdXJhdGlvbiA9IHJlYWRlci5kb3VibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhY2tldHMgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYWNrZXRSYXRlID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYnl0ZXMgPSBsb25nVG9OdW1iZXIocmVhZGVyLnVpbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5oZWFkZXJCeXRlcyA9IGxvbmdUb051bWJlcihyZWFkZXIudWludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYml0cmF0ZSA9IHJlYWRlci5kb3VibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhY2tldHNMb3N0ID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGFja2V0TG9zc1JhdGUgPSByZWFkZXIuZG91YmxlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGFja2V0TG9zc1BlcmNlbnRhZ2UgPSByZWFkZXIuZmxvYXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYWNrZXRzRHVwbGljYXRlID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhY2tldER1cGxpY2F0ZVJhdGUgPSByZWFkZXIuZG91YmxlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYnl0ZXNEdXBsaWNhdGUgPSBsb25nVG9OdW1iZXIocmVhZGVyLnVpbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5oZWFkZXJCeXRlc0R1cGxpY2F0ZSA9IGxvbmdUb051bWJlcihyZWFkZXIudWludDY0KCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmJpdHJhdGVEdXBsaWNhdGUgPSByZWFkZXIuZG91YmxlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTU6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGFja2V0c1BhZGRpbmcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGFja2V0UGFkZGluZ1JhdGUgPSByZWFkZXIuZG91YmxlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYnl0ZXNQYWRkaW5nID0gbG9uZ1RvTnVtYmVyKHJlYWRlci51aW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaGVhZGVyQnl0ZXNQYWRkaW5nID0gbG9uZ1RvTnVtYmVyKHJlYWRlci51aW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTg6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYml0cmF0ZVBhZGRpbmcgPSByZWFkZXIuZG91YmxlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTk6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGFja2V0c091dE9mT3JkZXIgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjA6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZnJhbWVzID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDIxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZyYW1lUmF0ZSA9IHJlYWRlci5kb3VibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5qaXR0ZXJDdXJyZW50ID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDIzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmppdHRlck1heCA9IHJlYWRlci5kb3VibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyNDpcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW50cnkyNCA9IGV4cG9ydHMuUlRQU3RhdHNfR2FwSGlzdG9ncmFtRW50cnkuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5MjQudmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5nYXBIaXN0b2dyYW1bZW50cnkyNC5rZXldID0gZW50cnkyNC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm5hY2tzID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm5hY2tBY2tzID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm5hY2tNaXNzZXMgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubmFja1JlcGVhdGVkID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI3OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBsaXMgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjg6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGFzdFBsaSA9IGZyb21UaW1lc3RhbXAodGltZXN0YW1wXzEuVGltZXN0YW1wLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI5OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZpcnMgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzA6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGFzdEZpciA9IGZyb21UaW1lc3RhbXAodGltZXN0YW1wXzEuVGltZXN0YW1wLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDMxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJ0dEN1cnJlbnQgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucnR0TWF4ID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDMzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmtleUZyYW1lcyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXN0S2V5RnJhbWUgPSBmcm9tVGltZXN0YW1wKHRpbWVzdGFtcF8xLlRpbWVzdGFtcC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXllckxvY2tQbGlzID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhc3RMYXllckxvY2tQbGkgPSBmcm9tVGltZXN0YW1wKHRpbWVzdGFtcF8xLlRpbWVzdGFtcC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0NDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wYWNrZXREcmlmdCA9IGV4cG9ydHMuUlRQRHJpZnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0NTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZXBvcnREcmlmdCA9IGV4cG9ydHMuUlRQRHJpZnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhcnRUaW1lOiBpc1NldChvYmplY3Quc3RhcnRUaW1lKSA/IGZyb21Kc29uVGltZXN0YW1wKG9iamVjdC5zdGFydFRpbWUpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZW5kVGltZTogaXNTZXQob2JqZWN0LmVuZFRpbWUpID8gZnJvbUpzb25UaW1lc3RhbXAob2JqZWN0LmVuZFRpbWUpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZHVyYXRpb246IGlzU2V0KG9iamVjdC5kdXJhdGlvbikgPyBOdW1iZXIob2JqZWN0LmR1cmF0aW9uKSA6IDAsXG4gICAgICAgICAgICBwYWNrZXRzOiBpc1NldChvYmplY3QucGFja2V0cykgPyBOdW1iZXIob2JqZWN0LnBhY2tldHMpIDogMCxcbiAgICAgICAgICAgIHBhY2tldFJhdGU6IGlzU2V0KG9iamVjdC5wYWNrZXRSYXRlKSA/IE51bWJlcihvYmplY3QucGFja2V0UmF0ZSkgOiAwLFxuICAgICAgICAgICAgYnl0ZXM6IGlzU2V0KG9iamVjdC5ieXRlcykgPyBOdW1iZXIob2JqZWN0LmJ5dGVzKSA6IDAsXG4gICAgICAgICAgICBoZWFkZXJCeXRlczogaXNTZXQob2JqZWN0LmhlYWRlckJ5dGVzKSA/IE51bWJlcihvYmplY3QuaGVhZGVyQnl0ZXMpIDogMCxcbiAgICAgICAgICAgIGJpdHJhdGU6IGlzU2V0KG9iamVjdC5iaXRyYXRlKSA/IE51bWJlcihvYmplY3QuYml0cmF0ZSkgOiAwLFxuICAgICAgICAgICAgcGFja2V0c0xvc3Q6IGlzU2V0KG9iamVjdC5wYWNrZXRzTG9zdCkgPyBOdW1iZXIob2JqZWN0LnBhY2tldHNMb3N0KSA6IDAsXG4gICAgICAgICAgICBwYWNrZXRMb3NzUmF0ZTogaXNTZXQob2JqZWN0LnBhY2tldExvc3NSYXRlKSA/IE51bWJlcihvYmplY3QucGFja2V0TG9zc1JhdGUpIDogMCxcbiAgICAgICAgICAgIHBhY2tldExvc3NQZXJjZW50YWdlOiBpc1NldChvYmplY3QucGFja2V0TG9zc1BlcmNlbnRhZ2UpID8gTnVtYmVyKG9iamVjdC5wYWNrZXRMb3NzUGVyY2VudGFnZSkgOiAwLFxuICAgICAgICAgICAgcGFja2V0c0R1cGxpY2F0ZTogaXNTZXQob2JqZWN0LnBhY2tldHNEdXBsaWNhdGUpID8gTnVtYmVyKG9iamVjdC5wYWNrZXRzRHVwbGljYXRlKSA6IDAsXG4gICAgICAgICAgICBwYWNrZXREdXBsaWNhdGVSYXRlOiBpc1NldChvYmplY3QucGFja2V0RHVwbGljYXRlUmF0ZSkgPyBOdW1iZXIob2JqZWN0LnBhY2tldER1cGxpY2F0ZVJhdGUpIDogMCxcbiAgICAgICAgICAgIGJ5dGVzRHVwbGljYXRlOiBpc1NldChvYmplY3QuYnl0ZXNEdXBsaWNhdGUpID8gTnVtYmVyKG9iamVjdC5ieXRlc0R1cGxpY2F0ZSkgOiAwLFxuICAgICAgICAgICAgaGVhZGVyQnl0ZXNEdXBsaWNhdGU6IGlzU2V0KG9iamVjdC5oZWFkZXJCeXRlc0R1cGxpY2F0ZSkgPyBOdW1iZXIob2JqZWN0LmhlYWRlckJ5dGVzRHVwbGljYXRlKSA6IDAsXG4gICAgICAgICAgICBiaXRyYXRlRHVwbGljYXRlOiBpc1NldChvYmplY3QuYml0cmF0ZUR1cGxpY2F0ZSkgPyBOdW1iZXIob2JqZWN0LmJpdHJhdGVEdXBsaWNhdGUpIDogMCxcbiAgICAgICAgICAgIHBhY2tldHNQYWRkaW5nOiBpc1NldChvYmplY3QucGFja2V0c1BhZGRpbmcpID8gTnVtYmVyKG9iamVjdC5wYWNrZXRzUGFkZGluZykgOiAwLFxuICAgICAgICAgICAgcGFja2V0UGFkZGluZ1JhdGU6IGlzU2V0KG9iamVjdC5wYWNrZXRQYWRkaW5nUmF0ZSkgPyBOdW1iZXIob2JqZWN0LnBhY2tldFBhZGRpbmdSYXRlKSA6IDAsXG4gICAgICAgICAgICBieXRlc1BhZGRpbmc6IGlzU2V0KG9iamVjdC5ieXRlc1BhZGRpbmcpID8gTnVtYmVyKG9iamVjdC5ieXRlc1BhZGRpbmcpIDogMCxcbiAgICAgICAgICAgIGhlYWRlckJ5dGVzUGFkZGluZzogaXNTZXQob2JqZWN0LmhlYWRlckJ5dGVzUGFkZGluZykgPyBOdW1iZXIob2JqZWN0LmhlYWRlckJ5dGVzUGFkZGluZykgOiAwLFxuICAgICAgICAgICAgYml0cmF0ZVBhZGRpbmc6IGlzU2V0KG9iamVjdC5iaXRyYXRlUGFkZGluZykgPyBOdW1iZXIob2JqZWN0LmJpdHJhdGVQYWRkaW5nKSA6IDAsXG4gICAgICAgICAgICBwYWNrZXRzT3V0T2ZPcmRlcjogaXNTZXQob2JqZWN0LnBhY2tldHNPdXRPZk9yZGVyKSA/IE51bWJlcihvYmplY3QucGFja2V0c091dE9mT3JkZXIpIDogMCxcbiAgICAgICAgICAgIGZyYW1lczogaXNTZXQob2JqZWN0LmZyYW1lcykgPyBOdW1iZXIob2JqZWN0LmZyYW1lcykgOiAwLFxuICAgICAgICAgICAgZnJhbWVSYXRlOiBpc1NldChvYmplY3QuZnJhbWVSYXRlKSA/IE51bWJlcihvYmplY3QuZnJhbWVSYXRlKSA6IDAsXG4gICAgICAgICAgICBqaXR0ZXJDdXJyZW50OiBpc1NldChvYmplY3Quaml0dGVyQ3VycmVudCkgPyBOdW1iZXIob2JqZWN0LmppdHRlckN1cnJlbnQpIDogMCxcbiAgICAgICAgICAgIGppdHRlck1heDogaXNTZXQob2JqZWN0LmppdHRlck1heCkgPyBOdW1iZXIob2JqZWN0LmppdHRlck1heCkgOiAwLFxuICAgICAgICAgICAgZ2FwSGlzdG9ncmFtOiBpc09iamVjdChvYmplY3QuZ2FwSGlzdG9ncmFtKVxuICAgICAgICAgICAgICAgID8gT2JqZWN0LmVudHJpZXMob2JqZWN0LmdhcEhpc3RvZ3JhbSkucmVkdWNlKChhY2MsIFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhY2NbTnVtYmVyKGtleSldID0gTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgICAgICB9LCB7fSlcbiAgICAgICAgICAgICAgICA6IHt9LFxuICAgICAgICAgICAgbmFja3M6IGlzU2V0KG9iamVjdC5uYWNrcykgPyBOdW1iZXIob2JqZWN0Lm5hY2tzKSA6IDAsXG4gICAgICAgICAgICBuYWNrQWNrczogaXNTZXQob2JqZWN0Lm5hY2tBY2tzKSA/IE51bWJlcihvYmplY3QubmFja0Fja3MpIDogMCxcbiAgICAgICAgICAgIG5hY2tNaXNzZXM6IGlzU2V0KG9iamVjdC5uYWNrTWlzc2VzKSA/IE51bWJlcihvYmplY3QubmFja01pc3NlcykgOiAwLFxuICAgICAgICAgICAgbmFja1JlcGVhdGVkOiBpc1NldChvYmplY3QubmFja1JlcGVhdGVkKSA/IE51bWJlcihvYmplY3QubmFja1JlcGVhdGVkKSA6IDAsXG4gICAgICAgICAgICBwbGlzOiBpc1NldChvYmplY3QucGxpcykgPyBOdW1iZXIob2JqZWN0LnBsaXMpIDogMCxcbiAgICAgICAgICAgIGxhc3RQbGk6IGlzU2V0KG9iamVjdC5sYXN0UGxpKSA/IGZyb21Kc29uVGltZXN0YW1wKG9iamVjdC5sYXN0UGxpKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGZpcnM6IGlzU2V0KG9iamVjdC5maXJzKSA/IE51bWJlcihvYmplY3QuZmlycykgOiAwLFxuICAgICAgICAgICAgbGFzdEZpcjogaXNTZXQob2JqZWN0Lmxhc3RGaXIpID8gZnJvbUpzb25UaW1lc3RhbXAob2JqZWN0Lmxhc3RGaXIpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcnR0Q3VycmVudDogaXNTZXQob2JqZWN0LnJ0dEN1cnJlbnQpID8gTnVtYmVyKG9iamVjdC5ydHRDdXJyZW50KSA6IDAsXG4gICAgICAgICAgICBydHRNYXg6IGlzU2V0KG9iamVjdC5ydHRNYXgpID8gTnVtYmVyKG9iamVjdC5ydHRNYXgpIDogMCxcbiAgICAgICAgICAgIGtleUZyYW1lczogaXNTZXQob2JqZWN0LmtleUZyYW1lcykgPyBOdW1iZXIob2JqZWN0LmtleUZyYW1lcykgOiAwLFxuICAgICAgICAgICAgbGFzdEtleUZyYW1lOiBpc1NldChvYmplY3QubGFzdEtleUZyYW1lKSA/IGZyb21Kc29uVGltZXN0YW1wKG9iamVjdC5sYXN0S2V5RnJhbWUpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgbGF5ZXJMb2NrUGxpczogaXNTZXQob2JqZWN0LmxheWVyTG9ja1BsaXMpID8gTnVtYmVyKG9iamVjdC5sYXllckxvY2tQbGlzKSA6IDAsXG4gICAgICAgICAgICBsYXN0TGF5ZXJMb2NrUGxpOiBpc1NldChvYmplY3QubGFzdExheWVyTG9ja1BsaSkgPyBmcm9tSnNvblRpbWVzdGFtcChvYmplY3QubGFzdExheWVyTG9ja1BsaSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBwYWNrZXREcmlmdDogaXNTZXQob2JqZWN0LnBhY2tldERyaWZ0KSA/IGV4cG9ydHMuUlRQRHJpZnQuZnJvbUpTT04ob2JqZWN0LnBhY2tldERyaWZ0KSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJlcG9ydERyaWZ0OiBpc1NldChvYmplY3QucmVwb3J0RHJpZnQpID8gZXhwb3J0cy5SVFBEcmlmdC5mcm9tSlNPTihvYmplY3QucmVwb3J0RHJpZnQpIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2Uuc3RhcnRUaW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5zdGFydFRpbWUgPSBtZXNzYWdlLnN0YXJ0VGltZS50b0lTT1N0cmluZygpKTtcbiAgICAgICAgbWVzc2FnZS5lbmRUaW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5lbmRUaW1lID0gbWVzc2FnZS5lbmRUaW1lLnRvSVNPU3RyaW5nKCkpO1xuICAgICAgICBtZXNzYWdlLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgJiYgKG9iai5kdXJhdGlvbiA9IG1lc3NhZ2UuZHVyYXRpb24pO1xuICAgICAgICBtZXNzYWdlLnBhY2tldHMgIT09IHVuZGVmaW5lZCAmJiAob2JqLnBhY2tldHMgPSBNYXRoLnJvdW5kKG1lc3NhZ2UucGFja2V0cykpO1xuICAgICAgICBtZXNzYWdlLnBhY2tldFJhdGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnBhY2tldFJhdGUgPSBtZXNzYWdlLnBhY2tldFJhdGUpO1xuICAgICAgICBtZXNzYWdlLmJ5dGVzICE9PSB1bmRlZmluZWQgJiYgKG9iai5ieXRlcyA9IE1hdGgucm91bmQobWVzc2FnZS5ieXRlcykpO1xuICAgICAgICBtZXNzYWdlLmhlYWRlckJ5dGVzICE9PSB1bmRlZmluZWQgJiYgKG9iai5oZWFkZXJCeXRlcyA9IE1hdGgucm91bmQobWVzc2FnZS5oZWFkZXJCeXRlcykpO1xuICAgICAgICBtZXNzYWdlLmJpdHJhdGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmJpdHJhdGUgPSBtZXNzYWdlLmJpdHJhdGUpO1xuICAgICAgICBtZXNzYWdlLnBhY2tldHNMb3N0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5wYWNrZXRzTG9zdCA9IE1hdGgucm91bmQobWVzc2FnZS5wYWNrZXRzTG9zdCkpO1xuICAgICAgICBtZXNzYWdlLnBhY2tldExvc3NSYXRlICE9PSB1bmRlZmluZWQgJiYgKG9iai5wYWNrZXRMb3NzUmF0ZSA9IG1lc3NhZ2UucGFja2V0TG9zc1JhdGUpO1xuICAgICAgICBtZXNzYWdlLnBhY2tldExvc3NQZXJjZW50YWdlICE9PSB1bmRlZmluZWQgJiYgKG9iai5wYWNrZXRMb3NzUGVyY2VudGFnZSA9IG1lc3NhZ2UucGFja2V0TG9zc1BlcmNlbnRhZ2UpO1xuICAgICAgICBtZXNzYWdlLnBhY2tldHNEdXBsaWNhdGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnBhY2tldHNEdXBsaWNhdGUgPSBNYXRoLnJvdW5kKG1lc3NhZ2UucGFja2V0c0R1cGxpY2F0ZSkpO1xuICAgICAgICBtZXNzYWdlLnBhY2tldER1cGxpY2F0ZVJhdGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnBhY2tldER1cGxpY2F0ZVJhdGUgPSBtZXNzYWdlLnBhY2tldER1cGxpY2F0ZVJhdGUpO1xuICAgICAgICBtZXNzYWdlLmJ5dGVzRHVwbGljYXRlICE9PSB1bmRlZmluZWQgJiYgKG9iai5ieXRlc0R1cGxpY2F0ZSA9IE1hdGgucm91bmQobWVzc2FnZS5ieXRlc0R1cGxpY2F0ZSkpO1xuICAgICAgICBtZXNzYWdlLmhlYWRlckJ5dGVzRHVwbGljYXRlICE9PSB1bmRlZmluZWQgJiYgKG9iai5oZWFkZXJCeXRlc0R1cGxpY2F0ZSA9IE1hdGgucm91bmQobWVzc2FnZS5oZWFkZXJCeXRlc0R1cGxpY2F0ZSkpO1xuICAgICAgICBtZXNzYWdlLmJpdHJhdGVEdXBsaWNhdGUgIT09IHVuZGVmaW5lZCAmJiAob2JqLmJpdHJhdGVEdXBsaWNhdGUgPSBtZXNzYWdlLmJpdHJhdGVEdXBsaWNhdGUpO1xuICAgICAgICBtZXNzYWdlLnBhY2tldHNQYWRkaW5nICE9PSB1bmRlZmluZWQgJiYgKG9iai5wYWNrZXRzUGFkZGluZyA9IE1hdGgucm91bmQobWVzc2FnZS5wYWNrZXRzUGFkZGluZykpO1xuICAgICAgICBtZXNzYWdlLnBhY2tldFBhZGRpbmdSYXRlICE9PSB1bmRlZmluZWQgJiYgKG9iai5wYWNrZXRQYWRkaW5nUmF0ZSA9IG1lc3NhZ2UucGFja2V0UGFkZGluZ1JhdGUpO1xuICAgICAgICBtZXNzYWdlLmJ5dGVzUGFkZGluZyAhPT0gdW5kZWZpbmVkICYmIChvYmouYnl0ZXNQYWRkaW5nID0gTWF0aC5yb3VuZChtZXNzYWdlLmJ5dGVzUGFkZGluZykpO1xuICAgICAgICBtZXNzYWdlLmhlYWRlckJ5dGVzUGFkZGluZyAhPT0gdW5kZWZpbmVkICYmIChvYmouaGVhZGVyQnl0ZXNQYWRkaW5nID0gTWF0aC5yb3VuZChtZXNzYWdlLmhlYWRlckJ5dGVzUGFkZGluZykpO1xuICAgICAgICBtZXNzYWdlLmJpdHJhdGVQYWRkaW5nICE9PSB1bmRlZmluZWQgJiYgKG9iai5iaXRyYXRlUGFkZGluZyA9IG1lc3NhZ2UuYml0cmF0ZVBhZGRpbmcpO1xuICAgICAgICBtZXNzYWdlLnBhY2tldHNPdXRPZk9yZGVyICE9PSB1bmRlZmluZWQgJiYgKG9iai5wYWNrZXRzT3V0T2ZPcmRlciA9IE1hdGgucm91bmQobWVzc2FnZS5wYWNrZXRzT3V0T2ZPcmRlcikpO1xuICAgICAgICBtZXNzYWdlLmZyYW1lcyAhPT0gdW5kZWZpbmVkICYmIChvYmouZnJhbWVzID0gTWF0aC5yb3VuZChtZXNzYWdlLmZyYW1lcykpO1xuICAgICAgICBtZXNzYWdlLmZyYW1lUmF0ZSAhPT0gdW5kZWZpbmVkICYmIChvYmouZnJhbWVSYXRlID0gbWVzc2FnZS5mcmFtZVJhdGUpO1xuICAgICAgICBtZXNzYWdlLmppdHRlckN1cnJlbnQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmppdHRlckN1cnJlbnQgPSBtZXNzYWdlLmppdHRlckN1cnJlbnQpO1xuICAgICAgICBtZXNzYWdlLmppdHRlck1heCAhPT0gdW5kZWZpbmVkICYmIChvYmouaml0dGVyTWF4ID0gbWVzc2FnZS5qaXR0ZXJNYXgpO1xuICAgICAgICBvYmouZ2FwSGlzdG9ncmFtID0ge307XG4gICAgICAgIGlmIChtZXNzYWdlLmdhcEhpc3RvZ3JhbSkge1xuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMobWVzc2FnZS5nYXBIaXN0b2dyYW0pLmZvckVhY2goKFtrLCB2XSkgPT4ge1xuICAgICAgICAgICAgICAgIG9iai5nYXBIaXN0b2dyYW1ba10gPSBNYXRoLnJvdW5kKHYpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbWVzc2FnZS5uYWNrcyAhPT0gdW5kZWZpbmVkICYmIChvYmoubmFja3MgPSBNYXRoLnJvdW5kKG1lc3NhZ2UubmFja3MpKTtcbiAgICAgICAgbWVzc2FnZS5uYWNrQWNrcyAhPT0gdW5kZWZpbmVkICYmIChvYmoubmFja0Fja3MgPSBNYXRoLnJvdW5kKG1lc3NhZ2UubmFja0Fja3MpKTtcbiAgICAgICAgbWVzc2FnZS5uYWNrTWlzc2VzICE9PSB1bmRlZmluZWQgJiYgKG9iai5uYWNrTWlzc2VzID0gTWF0aC5yb3VuZChtZXNzYWdlLm5hY2tNaXNzZXMpKTtcbiAgICAgICAgbWVzc2FnZS5uYWNrUmVwZWF0ZWQgIT09IHVuZGVmaW5lZCAmJiAob2JqLm5hY2tSZXBlYXRlZCA9IE1hdGgucm91bmQobWVzc2FnZS5uYWNrUmVwZWF0ZWQpKTtcbiAgICAgICAgbWVzc2FnZS5wbGlzICE9PSB1bmRlZmluZWQgJiYgKG9iai5wbGlzID0gTWF0aC5yb3VuZChtZXNzYWdlLnBsaXMpKTtcbiAgICAgICAgbWVzc2FnZS5sYXN0UGxpICE9PSB1bmRlZmluZWQgJiYgKG9iai5sYXN0UGxpID0gbWVzc2FnZS5sYXN0UGxpLnRvSVNPU3RyaW5nKCkpO1xuICAgICAgICBtZXNzYWdlLmZpcnMgIT09IHVuZGVmaW5lZCAmJiAob2JqLmZpcnMgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuZmlycykpO1xuICAgICAgICBtZXNzYWdlLmxhc3RGaXIgIT09IHVuZGVmaW5lZCAmJiAob2JqLmxhc3RGaXIgPSBtZXNzYWdlLmxhc3RGaXIudG9JU09TdHJpbmcoKSk7XG4gICAgICAgIG1lc3NhZ2UucnR0Q3VycmVudCAhPT0gdW5kZWZpbmVkICYmIChvYmoucnR0Q3VycmVudCA9IE1hdGgucm91bmQobWVzc2FnZS5ydHRDdXJyZW50KSk7XG4gICAgICAgIG1lc3NhZ2UucnR0TWF4ICE9PSB1bmRlZmluZWQgJiYgKG9iai5ydHRNYXggPSBNYXRoLnJvdW5kKG1lc3NhZ2UucnR0TWF4KSk7XG4gICAgICAgIG1lc3NhZ2Uua2V5RnJhbWVzICE9PSB1bmRlZmluZWQgJiYgKG9iai5rZXlGcmFtZXMgPSBNYXRoLnJvdW5kKG1lc3NhZ2Uua2V5RnJhbWVzKSk7XG4gICAgICAgIG1lc3NhZ2UubGFzdEtleUZyYW1lICE9PSB1bmRlZmluZWQgJiYgKG9iai5sYXN0S2V5RnJhbWUgPSBtZXNzYWdlLmxhc3RLZXlGcmFtZS50b0lTT1N0cmluZygpKTtcbiAgICAgICAgbWVzc2FnZS5sYXllckxvY2tQbGlzICE9PSB1bmRlZmluZWQgJiYgKG9iai5sYXllckxvY2tQbGlzID0gTWF0aC5yb3VuZChtZXNzYWdlLmxheWVyTG9ja1BsaXMpKTtcbiAgICAgICAgbWVzc2FnZS5sYXN0TGF5ZXJMb2NrUGxpICE9PSB1bmRlZmluZWQgJiYgKG9iai5sYXN0TGF5ZXJMb2NrUGxpID0gbWVzc2FnZS5sYXN0TGF5ZXJMb2NrUGxpLnRvSVNPU3RyaW5nKCkpO1xuICAgICAgICBtZXNzYWdlLnBhY2tldERyaWZ0ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmoucGFja2V0RHJpZnQgPSBtZXNzYWdlLnBhY2tldERyaWZ0ID8gZXhwb3J0cy5SVFBEcmlmdC50b0pTT04obWVzc2FnZS5wYWNrZXREcmlmdCkgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLnJlcG9ydERyaWZ0ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmoucmVwb3J0RHJpZnQgPSBtZXNzYWdlLnJlcG9ydERyaWZ0ID8gZXhwb3J0cy5SVFBEcmlmdC50b0pTT04obWVzc2FnZS5yZXBvcnREcmlmdCkgOiB1bmRlZmluZWQpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9qLCBfaywgX2wsIF9tLCBfbywgX3AsIF9xLCBfciwgX3MsIF90LCBfdSwgX3YsIF93LCBfeCwgX3ksIF96LCBfMCwgXzEsIF8yLCBfMywgXzQsIF81LCBfNiwgXzcsIF84LCBfOSwgXzEwLCBfMTEsIF8xMiwgXzEzLCBfMTQsIF8xNSwgXzE2O1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVJUUFN0YXRzKCk7XG4gICAgICAgIG1lc3NhZ2Uuc3RhcnRUaW1lID0gKF9hID0gb2JqZWN0LnN0YXJ0VGltZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmVuZFRpbWUgPSAoX2IgPSBvYmplY3QuZW5kVGltZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmR1cmF0aW9uID0gKF9jID0gb2JqZWN0LmR1cmF0aW9uKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAwO1xuICAgICAgICBtZXNzYWdlLnBhY2tldHMgPSAoX2QgPSBvYmplY3QucGFja2V0cykgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogMDtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXRSYXRlID0gKF9lID0gb2JqZWN0LnBhY2tldFJhdGUpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IDA7XG4gICAgICAgIG1lc3NhZ2UuYnl0ZXMgPSAoX2YgPSBvYmplY3QuYnl0ZXMpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IDA7XG4gICAgICAgIG1lc3NhZ2UuaGVhZGVyQnl0ZXMgPSAoX2cgPSBvYmplY3QuaGVhZGVyQnl0ZXMpICE9PSBudWxsICYmIF9nICE9PSB2b2lkIDAgPyBfZyA6IDA7XG4gICAgICAgIG1lc3NhZ2UuYml0cmF0ZSA9IChfaCA9IG9iamVjdC5iaXRyYXRlKSAhPT0gbnVsbCAmJiBfaCAhPT0gdm9pZCAwID8gX2ggOiAwO1xuICAgICAgICBtZXNzYWdlLnBhY2tldHNMb3N0ID0gKF9qID0gb2JqZWN0LnBhY2tldHNMb3N0KSAhPT0gbnVsbCAmJiBfaiAhPT0gdm9pZCAwID8gX2ogOiAwO1xuICAgICAgICBtZXNzYWdlLnBhY2tldExvc3NSYXRlID0gKF9rID0gb2JqZWN0LnBhY2tldExvc3NSYXRlKSAhPT0gbnVsbCAmJiBfayAhPT0gdm9pZCAwID8gX2sgOiAwO1xuICAgICAgICBtZXNzYWdlLnBhY2tldExvc3NQZXJjZW50YWdlID0gKF9sID0gb2JqZWN0LnBhY2tldExvc3NQZXJjZW50YWdlKSAhPT0gbnVsbCAmJiBfbCAhPT0gdm9pZCAwID8gX2wgOiAwO1xuICAgICAgICBtZXNzYWdlLnBhY2tldHNEdXBsaWNhdGUgPSAoX20gPSBvYmplY3QucGFja2V0c0R1cGxpY2F0ZSkgIT09IG51bGwgJiYgX20gIT09IHZvaWQgMCA/IF9tIDogMDtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXREdXBsaWNhdGVSYXRlID0gKF9vID0gb2JqZWN0LnBhY2tldER1cGxpY2F0ZVJhdGUpICE9PSBudWxsICYmIF9vICE9PSB2b2lkIDAgPyBfbyA6IDA7XG4gICAgICAgIG1lc3NhZ2UuYnl0ZXNEdXBsaWNhdGUgPSAoX3AgPSBvYmplY3QuYnl0ZXNEdXBsaWNhdGUpICE9PSBudWxsICYmIF9wICE9PSB2b2lkIDAgPyBfcCA6IDA7XG4gICAgICAgIG1lc3NhZ2UuaGVhZGVyQnl0ZXNEdXBsaWNhdGUgPSAoX3EgPSBvYmplY3QuaGVhZGVyQnl0ZXNEdXBsaWNhdGUpICE9PSBudWxsICYmIF9xICE9PSB2b2lkIDAgPyBfcSA6IDA7XG4gICAgICAgIG1lc3NhZ2UuYml0cmF0ZUR1cGxpY2F0ZSA9IChfciA9IG9iamVjdC5iaXRyYXRlRHVwbGljYXRlKSAhPT0gbnVsbCAmJiBfciAhPT0gdm9pZCAwID8gX3IgOiAwO1xuICAgICAgICBtZXNzYWdlLnBhY2tldHNQYWRkaW5nID0gKF9zID0gb2JqZWN0LnBhY2tldHNQYWRkaW5nKSAhPT0gbnVsbCAmJiBfcyAhPT0gdm9pZCAwID8gX3MgOiAwO1xuICAgICAgICBtZXNzYWdlLnBhY2tldFBhZGRpbmdSYXRlID0gKF90ID0gb2JqZWN0LnBhY2tldFBhZGRpbmdSYXRlKSAhPT0gbnVsbCAmJiBfdCAhPT0gdm9pZCAwID8gX3QgOiAwO1xuICAgICAgICBtZXNzYWdlLmJ5dGVzUGFkZGluZyA9IChfdSA9IG9iamVjdC5ieXRlc1BhZGRpbmcpICE9PSBudWxsICYmIF91ICE9PSB2b2lkIDAgPyBfdSA6IDA7XG4gICAgICAgIG1lc3NhZ2UuaGVhZGVyQnl0ZXNQYWRkaW5nID0gKF92ID0gb2JqZWN0LmhlYWRlckJ5dGVzUGFkZGluZykgIT09IG51bGwgJiYgX3YgIT09IHZvaWQgMCA/IF92IDogMDtcbiAgICAgICAgbWVzc2FnZS5iaXRyYXRlUGFkZGluZyA9IChfdyA9IG9iamVjdC5iaXRyYXRlUGFkZGluZykgIT09IG51bGwgJiYgX3cgIT09IHZvaWQgMCA/IF93IDogMDtcbiAgICAgICAgbWVzc2FnZS5wYWNrZXRzT3V0T2ZPcmRlciA9IChfeCA9IG9iamVjdC5wYWNrZXRzT3V0T2ZPcmRlcikgIT09IG51bGwgJiYgX3ggIT09IHZvaWQgMCA/IF94IDogMDtcbiAgICAgICAgbWVzc2FnZS5mcmFtZXMgPSAoX3kgPSBvYmplY3QuZnJhbWVzKSAhPT0gbnVsbCAmJiBfeSAhPT0gdm9pZCAwID8gX3kgOiAwO1xuICAgICAgICBtZXNzYWdlLmZyYW1lUmF0ZSA9IChfeiA9IG9iamVjdC5mcmFtZVJhdGUpICE9PSBudWxsICYmIF96ICE9PSB2b2lkIDAgPyBfeiA6IDA7XG4gICAgICAgIG1lc3NhZ2Uuaml0dGVyQ3VycmVudCA9IChfMCA9IG9iamVjdC5qaXR0ZXJDdXJyZW50KSAhPT0gbnVsbCAmJiBfMCAhPT0gdm9pZCAwID8gXzAgOiAwO1xuICAgICAgICBtZXNzYWdlLmppdHRlck1heCA9IChfMSA9IG9iamVjdC5qaXR0ZXJNYXgpICE9PSBudWxsICYmIF8xICE9PSB2b2lkIDAgPyBfMSA6IDA7XG4gICAgICAgIG1lc3NhZ2UuZ2FwSGlzdG9ncmFtID0gT2JqZWN0LmVudHJpZXMoKF8yID0gb2JqZWN0LmdhcEhpc3RvZ3JhbSkgIT09IG51bGwgJiYgXzIgIT09IHZvaWQgMCA/IF8yIDoge30pLnJlZHVjZSgoYWNjLCBba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYWNjW051bWJlcihrZXkpXSA9IE51bWJlcih2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSk7XG4gICAgICAgIG1lc3NhZ2UubmFja3MgPSAoXzMgPSBvYmplY3QubmFja3MpICE9PSBudWxsICYmIF8zICE9PSB2b2lkIDAgPyBfMyA6IDA7XG4gICAgICAgIG1lc3NhZ2UubmFja0Fja3MgPSAoXzQgPSBvYmplY3QubmFja0Fja3MpICE9PSBudWxsICYmIF80ICE9PSB2b2lkIDAgPyBfNCA6IDA7XG4gICAgICAgIG1lc3NhZ2UubmFja01pc3NlcyA9IChfNSA9IG9iamVjdC5uYWNrTWlzc2VzKSAhPT0gbnVsbCAmJiBfNSAhPT0gdm9pZCAwID8gXzUgOiAwO1xuICAgICAgICBtZXNzYWdlLm5hY2tSZXBlYXRlZCA9IChfNiA9IG9iamVjdC5uYWNrUmVwZWF0ZWQpICE9PSBudWxsICYmIF82ICE9PSB2b2lkIDAgPyBfNiA6IDA7XG4gICAgICAgIG1lc3NhZ2UucGxpcyA9IChfNyA9IG9iamVjdC5wbGlzKSAhPT0gbnVsbCAmJiBfNyAhPT0gdm9pZCAwID8gXzcgOiAwO1xuICAgICAgICBtZXNzYWdlLmxhc3RQbGkgPSAoXzggPSBvYmplY3QubGFzdFBsaSkgIT09IG51bGwgJiYgXzggIT09IHZvaWQgMCA/IF84IDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmZpcnMgPSAoXzkgPSBvYmplY3QuZmlycykgIT09IG51bGwgJiYgXzkgIT09IHZvaWQgMCA/IF85IDogMDtcbiAgICAgICAgbWVzc2FnZS5sYXN0RmlyID0gKF8xMCA9IG9iamVjdC5sYXN0RmlyKSAhPT0gbnVsbCAmJiBfMTAgIT09IHZvaWQgMCA/IF8xMCA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5ydHRDdXJyZW50ID0gKF8xMSA9IG9iamVjdC5ydHRDdXJyZW50KSAhPT0gbnVsbCAmJiBfMTEgIT09IHZvaWQgMCA/IF8xMSA6IDA7XG4gICAgICAgIG1lc3NhZ2UucnR0TWF4ID0gKF8xMiA9IG9iamVjdC5ydHRNYXgpICE9PSBudWxsICYmIF8xMiAhPT0gdm9pZCAwID8gXzEyIDogMDtcbiAgICAgICAgbWVzc2FnZS5rZXlGcmFtZXMgPSAoXzEzID0gb2JqZWN0LmtleUZyYW1lcykgIT09IG51bGwgJiYgXzEzICE9PSB2b2lkIDAgPyBfMTMgOiAwO1xuICAgICAgICBtZXNzYWdlLmxhc3RLZXlGcmFtZSA9IChfMTQgPSBvYmplY3QubGFzdEtleUZyYW1lKSAhPT0gbnVsbCAmJiBfMTQgIT09IHZvaWQgMCA/IF8xNCA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5sYXllckxvY2tQbGlzID0gKF8xNSA9IG9iamVjdC5sYXllckxvY2tQbGlzKSAhPT0gbnVsbCAmJiBfMTUgIT09IHZvaWQgMCA/IF8xNSA6IDA7XG4gICAgICAgIG1lc3NhZ2UubGFzdExheWVyTG9ja1BsaSA9IChfMTYgPSBvYmplY3QubGFzdExheWVyTG9ja1BsaSkgIT09IG51bGwgJiYgXzE2ICE9PSB2b2lkIDAgPyBfMTYgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UucGFja2V0RHJpZnQgPSAob2JqZWN0LnBhY2tldERyaWZ0ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnBhY2tldERyaWZ0ICE9PSBudWxsKVxuICAgICAgICAgICAgPyBleHBvcnRzLlJUUERyaWZ0LmZyb21QYXJ0aWFsKG9iamVjdC5wYWNrZXREcmlmdClcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLnJlcG9ydERyaWZ0ID0gKG9iamVjdC5yZXBvcnREcmlmdCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5yZXBvcnREcmlmdCAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5SVFBEcmlmdC5mcm9tUGFydGlhbChvYmplY3QucmVwb3J0RHJpZnQpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlUlRQU3RhdHNfR2FwSGlzdG9ncmFtRW50cnkoKSB7XG4gICAgcmV0dXJuIHsga2V5OiAwLCB2YWx1ZTogMCB9O1xufVxuZXhwb3J0cy5SVFBTdGF0c19HYXBIaXN0b2dyYW1FbnRyeSA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLmtleSAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4KS5pbnQzMihtZXNzYWdlLmtleSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UudmFsdWUgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTYpLnVpbnQzMihtZXNzYWdlLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSVFBTdGF0c19HYXBIaXN0b2dyYW1FbnRyeSgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uua2V5ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52YWx1ZSA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4geyBrZXk6IGlzU2V0KG9iamVjdC5rZXkpID8gTnVtYmVyKG9iamVjdC5rZXkpIDogMCwgdmFsdWU6IGlzU2V0KG9iamVjdC52YWx1ZSkgPyBOdW1iZXIob2JqZWN0LnZhbHVlKSA6IDAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLmtleSAhPT0gdW5kZWZpbmVkICYmIChvYmoua2V5ID0gTWF0aC5yb3VuZChtZXNzYWdlLmtleSkpO1xuICAgICAgICBtZXNzYWdlLnZhbHVlICE9PSB1bmRlZmluZWQgJiYgKG9iai52YWx1ZSA9IE1hdGgucm91bmQobWVzc2FnZS52YWx1ZSkpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUlRQU3RhdHNfR2FwSGlzdG9ncmFtRW50cnkoKTtcbiAgICAgICAgbWVzc2FnZS5rZXkgPSAoX2EgPSBvYmplY3Qua2V5KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xuICAgICAgICBtZXNzYWdlLnZhbHVlID0gKF9iID0gb2JqZWN0LnZhbHVlKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VUaW1lZFZlcnNpb24oKSB7XG4gICAgcmV0dXJuIHsgdW5peE1pY3JvOiAwLCB0aWNrczogMCB9O1xufVxuZXhwb3J0cy5UaW1lZFZlcnNpb24gPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS51bml4TWljcm8gIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoOCkuaW50NjQobWVzc2FnZS51bml4TWljcm8pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnRpY2tzICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDE2KS5pbnQzMihtZXNzYWdlLnRpY2tzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUaW1lZFZlcnNpb24oKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVuaXhNaWNybyA9IGxvbmdUb051bWJlcihyZWFkZXIuaW50NjQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50aWNrcyA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1bml4TWljcm86IGlzU2V0KG9iamVjdC51bml4TWljcm8pID8gTnVtYmVyKG9iamVjdC51bml4TWljcm8pIDogMCxcbiAgICAgICAgICAgIHRpY2tzOiBpc1NldChvYmplY3QudGlja3MpID8gTnVtYmVyKG9iamVjdC50aWNrcykgOiAwLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UudW5peE1pY3JvICE9PSB1bmRlZmluZWQgJiYgKG9iai51bml4TWljcm8gPSBNYXRoLnJvdW5kKG1lc3NhZ2UudW5peE1pY3JvKSk7XG4gICAgICAgIG1lc3NhZ2UudGlja3MgIT09IHVuZGVmaW5lZCAmJiAob2JqLnRpY2tzID0gTWF0aC5yb3VuZChtZXNzYWdlLnRpY2tzKSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VUaW1lZFZlcnNpb24oKTtcbiAgICAgICAgbWVzc2FnZS51bml4TWljcm8gPSAoX2EgPSBvYmplY3QudW5peE1pY3JvKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xuICAgICAgICBtZXNzYWdlLnRpY2tzID0gKF9iID0gb2JqZWN0LnRpY2tzKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbnZhciBnbG9iYWxUaGlzID0gKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbFRoaXM7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG4gICAgdGhyb3cgXCJVbmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3RcIjtcbn0pKCk7XG5mdW5jdGlvbiBieXRlc0Zyb21CYXNlNjQoYjY0KSB7XG4gICAgaWYgKGdsb2JhbFRoaXMuQnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LmZyb20oZ2xvYmFsVGhpcy5CdWZmZXIuZnJvbShiNjQsIFwiYmFzZTY0XCIpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGJpbiA9IGdsb2JhbFRoaXMuYXRvYihiNjQpO1xuICAgICAgICBjb25zdCBhcnIgPSBuZXcgVWludDhBcnJheShiaW4ubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGFycltpXSA9IGJpbi5jaGFyQ29kZUF0KGkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgfVxufVxuZnVuY3Rpb24gYmFzZTY0RnJvbUJ5dGVzKGFycikge1xuICAgIGlmIChnbG9iYWxUaGlzLkJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gZ2xvYmFsVGhpcy5CdWZmZXIuZnJvbShhcnIpLnRvU3RyaW5nKFwiYmFzZTY0XCIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgYmluID0gW107XG4gICAgICAgIGFyci5mb3JFYWNoKChieXRlKSA9PiB7XG4gICAgICAgICAgICBiaW4ucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGUpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBnbG9iYWxUaGlzLmJ0b2EoYmluLmpvaW4oXCJcIikpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRvVGltZXN0YW1wKGRhdGUpIHtcbiAgICBjb25zdCBzZWNvbmRzID0gZGF0ZS5nZXRUaW1lKCkgLyAxMDAwO1xuICAgIGNvbnN0IG5hbm9zID0gKGRhdGUuZ2V0VGltZSgpICUgMTAwMCkgKiAxMDAwMDAwO1xuICAgIHJldHVybiB7IHNlY29uZHMsIG5hbm9zIH07XG59XG5mdW5jdGlvbiBmcm9tVGltZXN0YW1wKHQpIHtcbiAgICBsZXQgbWlsbGlzID0gdC5zZWNvbmRzICogMTAwMDtcbiAgICBtaWxsaXMgKz0gdC5uYW5vcyAvIDEwMDAwMDA7XG4gICAgcmV0dXJuIG5ldyBEYXRlKG1pbGxpcyk7XG59XG5mdW5jdGlvbiBmcm9tSnNvblRpbWVzdGFtcChvKSB7XG4gICAgaWYgKG8gaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgIHJldHVybiBvO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUobyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZnJvbVRpbWVzdGFtcCh0aW1lc3RhbXBfMS5UaW1lc3RhbXAuZnJvbUpTT04obykpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGxvbmdUb051bWJlcihsb25nKSB7XG4gICAgaWYgKGxvbmcuZ3QoTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpKSB7XG4gICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFwiVmFsdWUgaXMgbGFyZ2VyIHRoYW4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJcIik7XG4gICAgfVxuICAgIHJldHVybiBsb25nLnRvTnVtYmVyKCk7XG59XG5pZiAobWluaW1hbF8xLmRlZmF1bHQudXRpbC5Mb25nICE9PSBsb25nXzEuZGVmYXVsdCkge1xuICAgIG1pbmltYWxfMS5kZWZhdWx0LnV0aWwuTG9uZyA9IGxvbmdfMS5kZWZhdWx0O1xuICAgIG1pbmltYWxfMS5kZWZhdWx0LmNvbmZpZ3VyZSgpO1xufVxuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsO1xufVxuZnVuY3Rpb24gaXNTZXQodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpdmVraXRfbW9kZWxzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_models.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_room.js":
/*!********************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/proto/livekit_room.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.UpdateRoomMetadataRequest = exports.SendDataResponse = exports.SendDataRequest = exports.UpdateSubscriptionsResponse = exports.UpdateSubscriptionsRequest = exports.UpdateParticipantRequest = exports.MuteRoomTrackResponse = exports.MuteRoomTrackRequest = exports.RemoveParticipantResponse = exports.RoomParticipantIdentity = exports.ListParticipantsResponse = exports.ListParticipantsRequest = exports.DeleteRoomResponse = exports.DeleteRoomRequest = exports.ListRoomsResponse = exports.ListRoomsRequest = exports.RoomEgress = exports.CreateRoomRequest = exports.protobufPackage = void 0;\n/* eslint-disable */\nconst minimal_1 = __importDefault(__webpack_require__(/*! protobufjs/minimal */ \"(action-browser)/./node_modules/protobufjs/minimal.js\"));\nconst livekit_egress_1 = __webpack_require__(/*! ./livekit_egress */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_egress.js\");\nconst livekit_models_1 = __webpack_require__(/*! ./livekit_models */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_models.js\");\nexports.protobufPackage = \"livekit\";\nfunction createBaseCreateRoomRequest() {\n    return {\n        name: \"\",\n        emptyTimeout: 0,\n        maxParticipants: 0,\n        nodeId: \"\",\n        metadata: \"\",\n        egress: undefined,\n        minPlayoutDelay: 0,\n        maxPlayoutDelay: 0,\n        syncStreams: false,\n    };\n}\nexports.CreateRoomRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.name !== undefined && message.name !== \"\") {\n            writer.uint32(10).string(message.name);\n        }\n        if (message.emptyTimeout !== undefined && message.emptyTimeout !== 0) {\n            writer.uint32(16).uint32(message.emptyTimeout);\n        }\n        if (message.maxParticipants !== undefined && message.maxParticipants !== 0) {\n            writer.uint32(24).uint32(message.maxParticipants);\n        }\n        if (message.nodeId !== undefined && message.nodeId !== \"\") {\n            writer.uint32(34).string(message.nodeId);\n        }\n        if (message.metadata !== undefined && message.metadata !== \"\") {\n            writer.uint32(42).string(message.metadata);\n        }\n        if (message.egress !== undefined) {\n            exports.RoomEgress.encode(message.egress, writer.uint32(50).fork()).ldelim();\n        }\n        if (message.minPlayoutDelay !== undefined && message.minPlayoutDelay !== 0) {\n            writer.uint32(56).uint32(message.minPlayoutDelay);\n        }\n        if (message.maxPlayoutDelay !== undefined && message.maxPlayoutDelay !== 0) {\n            writer.uint32(64).uint32(message.maxPlayoutDelay);\n        }\n        if (message.syncStreams === true) {\n            writer.uint32(72).bool(message.syncStreams);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseCreateRoomRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.name = reader.string();\n                    break;\n                case 2:\n                    message.emptyTimeout = reader.uint32();\n                    break;\n                case 3:\n                    message.maxParticipants = reader.uint32();\n                    break;\n                case 4:\n                    message.nodeId = reader.string();\n                    break;\n                case 5:\n                    message.metadata = reader.string();\n                    break;\n                case 6:\n                    message.egress = exports.RoomEgress.decode(reader, reader.uint32());\n                    break;\n                case 7:\n                    message.minPlayoutDelay = reader.uint32();\n                    break;\n                case 8:\n                    message.maxPlayoutDelay = reader.uint32();\n                    break;\n                case 9:\n                    message.syncStreams = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            name: isSet(object.name) ? String(object.name) : \"\",\n            emptyTimeout: isSet(object.emptyTimeout) ? Number(object.emptyTimeout) : 0,\n            maxParticipants: isSet(object.maxParticipants) ? Number(object.maxParticipants) : 0,\n            nodeId: isSet(object.nodeId) ? String(object.nodeId) : \"\",\n            metadata: isSet(object.metadata) ? String(object.metadata) : \"\",\n            egress: isSet(object.egress) ? exports.RoomEgress.fromJSON(object.egress) : undefined,\n            minPlayoutDelay: isSet(object.minPlayoutDelay) ? Number(object.minPlayoutDelay) : 0,\n            maxPlayoutDelay: isSet(object.maxPlayoutDelay) ? Number(object.maxPlayoutDelay) : 0,\n            syncStreams: isSet(object.syncStreams) ? Boolean(object.syncStreams) : false,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.name !== undefined && (obj.name = message.name);\n        message.emptyTimeout !== undefined && (obj.emptyTimeout = Math.round(message.emptyTimeout));\n        message.maxParticipants !== undefined && (obj.maxParticipants = Math.round(message.maxParticipants));\n        message.nodeId !== undefined && (obj.nodeId = message.nodeId);\n        message.metadata !== undefined && (obj.metadata = message.metadata);\n        message.egress !== undefined && (obj.egress = message.egress ? exports.RoomEgress.toJSON(message.egress) : undefined);\n        message.minPlayoutDelay !== undefined && (obj.minPlayoutDelay = Math.round(message.minPlayoutDelay));\n        message.maxPlayoutDelay !== undefined && (obj.maxPlayoutDelay = Math.round(message.maxPlayoutDelay));\n        message.syncStreams !== undefined && (obj.syncStreams = message.syncStreams);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        const message = createBaseCreateRoomRequest();\n        message.name = (_a = object.name) !== null && _a !== void 0 ? _a : \"\";\n        message.emptyTimeout = (_b = object.emptyTimeout) !== null && _b !== void 0 ? _b : 0;\n        message.maxParticipants = (_c = object.maxParticipants) !== null && _c !== void 0 ? _c : 0;\n        message.nodeId = (_d = object.nodeId) !== null && _d !== void 0 ? _d : \"\";\n        message.metadata = (_e = object.metadata) !== null && _e !== void 0 ? _e : \"\";\n        message.egress = (object.egress !== undefined && object.egress !== null)\n            ? exports.RoomEgress.fromPartial(object.egress)\n            : undefined;\n        message.minPlayoutDelay = (_f = object.minPlayoutDelay) !== null && _f !== void 0 ? _f : 0;\n        message.maxPlayoutDelay = (_g = object.maxPlayoutDelay) !== null && _g !== void 0 ? _g : 0;\n        message.syncStreams = (_h = object.syncStreams) !== null && _h !== void 0 ? _h : false;\n        return message;\n    },\n};\nfunction createBaseRoomEgress() {\n    return { room: undefined, participant: undefined, tracks: undefined };\n}\nexports.RoomEgress = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.room !== undefined) {\n            livekit_egress_1.RoomCompositeEgressRequest.encode(message.room, writer.uint32(10).fork()).ldelim();\n        }\n        if (message.participant !== undefined) {\n            livekit_egress_1.AutoParticipantEgress.encode(message.participant, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.tracks !== undefined) {\n            livekit_egress_1.AutoTrackEgress.encode(message.tracks, writer.uint32(18).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseRoomEgress();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.room = livekit_egress_1.RoomCompositeEgressRequest.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.participant = livekit_egress_1.AutoParticipantEgress.decode(reader, reader.uint32());\n                    break;\n                case 2:\n                    message.tracks = livekit_egress_1.AutoTrackEgress.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            room: isSet(object.room) ? livekit_egress_1.RoomCompositeEgressRequest.fromJSON(object.room) : undefined,\n            participant: isSet(object.participant) ? livekit_egress_1.AutoParticipantEgress.fromJSON(object.participant) : undefined,\n            tracks: isSet(object.tracks) ? livekit_egress_1.AutoTrackEgress.fromJSON(object.tracks) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.room !== undefined &&\n            (obj.room = message.room ? livekit_egress_1.RoomCompositeEgressRequest.toJSON(message.room) : undefined);\n        message.participant !== undefined &&\n            (obj.participant = message.participant ? livekit_egress_1.AutoParticipantEgress.toJSON(message.participant) : undefined);\n        message.tracks !== undefined && (obj.tracks = message.tracks ? livekit_egress_1.AutoTrackEgress.toJSON(message.tracks) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = createBaseRoomEgress();\n        message.room = (object.room !== undefined && object.room !== null)\n            ? livekit_egress_1.RoomCompositeEgressRequest.fromPartial(object.room)\n            : undefined;\n        message.participant = (object.participant !== undefined && object.participant !== null)\n            ? livekit_egress_1.AutoParticipantEgress.fromPartial(object.participant)\n            : undefined;\n        message.tracks = (object.tracks !== undefined && object.tracks !== null)\n            ? livekit_egress_1.AutoTrackEgress.fromPartial(object.tracks)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseListRoomsRequest() {\n    return { names: [] };\n}\nexports.ListRoomsRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.names !== undefined && message.names.length !== 0) {\n            for (const v of message.names) {\n                writer.uint32(10).string(v);\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseListRoomsRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.names.push(reader.string());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { names: Array.isArray(object === null || object === void 0 ? void 0 : object.names) ? object.names.map((e) => String(e)) : [] };\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.names) {\n            obj.names = message.names.map((e) => e);\n        }\n        else {\n            obj.names = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseListRoomsRequest();\n        message.names = ((_a = object.names) === null || _a === void 0 ? void 0 : _a.map((e) => e)) || [];\n        return message;\n    },\n};\nfunction createBaseListRoomsResponse() {\n    return { rooms: [] };\n}\nexports.ListRoomsResponse = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.rooms !== undefined && message.rooms.length !== 0) {\n            for (const v of message.rooms) {\n                livekit_models_1.Room.encode(v, writer.uint32(10).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseListRoomsResponse();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.rooms.push(livekit_models_1.Room.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { rooms: Array.isArray(object === null || object === void 0 ? void 0 : object.rooms) ? object.rooms.map((e) => livekit_models_1.Room.fromJSON(e)) : [] };\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.rooms) {\n            obj.rooms = message.rooms.map((e) => e ? livekit_models_1.Room.toJSON(e) : undefined);\n        }\n        else {\n            obj.rooms = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseListRoomsResponse();\n        message.rooms = ((_a = object.rooms) === null || _a === void 0 ? void 0 : _a.map((e) => livekit_models_1.Room.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseDeleteRoomRequest() {\n    return { room: \"\" };\n}\nexports.DeleteRoomRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.room !== undefined && message.room !== \"\") {\n            writer.uint32(10).string(message.room);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseDeleteRoomRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.room = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { room: isSet(object.room) ? String(object.room) : \"\" };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.room !== undefined && (obj.room = message.room);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseDeleteRoomRequest();\n        message.room = (_a = object.room) !== null && _a !== void 0 ? _a : \"\";\n        return message;\n    },\n};\nfunction createBaseDeleteRoomResponse() {\n    return {};\n}\nexports.DeleteRoomResponse = {\n    encode(_, writer = minimal_1.default.Writer.create()) {\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseDeleteRoomResponse();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(_) {\n        return {};\n    },\n    toJSON(_) {\n        const obj = {};\n        return obj;\n    },\n    fromPartial(_) {\n        const message = createBaseDeleteRoomResponse();\n        return message;\n    },\n};\nfunction createBaseListParticipantsRequest() {\n    return { room: \"\" };\n}\nexports.ListParticipantsRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.room !== undefined && message.room !== \"\") {\n            writer.uint32(10).string(message.room);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseListParticipantsRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.room = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { room: isSet(object.room) ? String(object.room) : \"\" };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.room !== undefined && (obj.room = message.room);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseListParticipantsRequest();\n        message.room = (_a = object.room) !== null && _a !== void 0 ? _a : \"\";\n        return message;\n    },\n};\nfunction createBaseListParticipantsResponse() {\n    return { participants: [] };\n}\nexports.ListParticipantsResponse = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.participants !== undefined && message.participants.length !== 0) {\n            for (const v of message.participants) {\n                livekit_models_1.ParticipantInfo.encode(v, writer.uint32(10).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseListParticipantsResponse();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.participants.push(livekit_models_1.ParticipantInfo.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            participants: Array.isArray(object === null || object === void 0 ? void 0 : object.participants)\n                ? object.participants.map((e) => livekit_models_1.ParticipantInfo.fromJSON(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        if (message.participants) {\n            obj.participants = message.participants.map((e) => e ? livekit_models_1.ParticipantInfo.toJSON(e) : undefined);\n        }\n        else {\n            obj.participants = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a;\n        const message = createBaseListParticipantsResponse();\n        message.participants = ((_a = object.participants) === null || _a === void 0 ? void 0 : _a.map((e) => livekit_models_1.ParticipantInfo.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseRoomParticipantIdentity() {\n    return { room: \"\", identity: \"\" };\n}\nexports.RoomParticipantIdentity = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.room !== undefined && message.room !== \"\") {\n            writer.uint32(10).string(message.room);\n        }\n        if (message.identity !== undefined && message.identity !== \"\") {\n            writer.uint32(18).string(message.identity);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseRoomParticipantIdentity();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.room = reader.string();\n                    break;\n                case 2:\n                    message.identity = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            room: isSet(object.room) ? String(object.room) : \"\",\n            identity: isSet(object.identity) ? String(object.identity) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.room !== undefined && (obj.room = message.room);\n        message.identity !== undefined && (obj.identity = message.identity);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseRoomParticipantIdentity();\n        message.room = (_a = object.room) !== null && _a !== void 0 ? _a : \"\";\n        message.identity = (_b = object.identity) !== null && _b !== void 0 ? _b : \"\";\n        return message;\n    },\n};\nfunction createBaseRemoveParticipantResponse() {\n    return {};\n}\nexports.RemoveParticipantResponse = {\n    encode(_, writer = minimal_1.default.Writer.create()) {\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseRemoveParticipantResponse();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(_) {\n        return {};\n    },\n    toJSON(_) {\n        const obj = {};\n        return obj;\n    },\n    fromPartial(_) {\n        const message = createBaseRemoveParticipantResponse();\n        return message;\n    },\n};\nfunction createBaseMuteRoomTrackRequest() {\n    return { room: \"\", identity: \"\", trackSid: \"\", muted: false };\n}\nexports.MuteRoomTrackRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.room !== undefined && message.room !== \"\") {\n            writer.uint32(10).string(message.room);\n        }\n        if (message.identity !== undefined && message.identity !== \"\") {\n            writer.uint32(18).string(message.identity);\n        }\n        if (message.trackSid !== undefined && message.trackSid !== \"\") {\n            writer.uint32(26).string(message.trackSid);\n        }\n        if (message.muted === true) {\n            writer.uint32(32).bool(message.muted);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseMuteRoomTrackRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.room = reader.string();\n                    break;\n                case 2:\n                    message.identity = reader.string();\n                    break;\n                case 3:\n                    message.trackSid = reader.string();\n                    break;\n                case 4:\n                    message.muted = reader.bool();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            room: isSet(object.room) ? String(object.room) : \"\",\n            identity: isSet(object.identity) ? String(object.identity) : \"\",\n            trackSid: isSet(object.trackSid) ? String(object.trackSid) : \"\",\n            muted: isSet(object.muted) ? Boolean(object.muted) : false,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.room !== undefined && (obj.room = message.room);\n        message.identity !== undefined && (obj.identity = message.identity);\n        message.trackSid !== undefined && (obj.trackSid = message.trackSid);\n        message.muted !== undefined && (obj.muted = message.muted);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d;\n        const message = createBaseMuteRoomTrackRequest();\n        message.room = (_a = object.room) !== null && _a !== void 0 ? _a : \"\";\n        message.identity = (_b = object.identity) !== null && _b !== void 0 ? _b : \"\";\n        message.trackSid = (_c = object.trackSid) !== null && _c !== void 0 ? _c : \"\";\n        message.muted = (_d = object.muted) !== null && _d !== void 0 ? _d : false;\n        return message;\n    },\n};\nfunction createBaseMuteRoomTrackResponse() {\n    return { track: undefined };\n}\nexports.MuteRoomTrackResponse = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.track !== undefined) {\n            livekit_models_1.TrackInfo.encode(message.track, writer.uint32(10).fork()).ldelim();\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseMuteRoomTrackResponse();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.track = livekit_models_1.TrackInfo.decode(reader, reader.uint32());\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return { track: isSet(object.track) ? livekit_models_1.TrackInfo.fromJSON(object.track) : undefined };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.track !== undefined && (obj.track = message.track ? livekit_models_1.TrackInfo.toJSON(message.track) : undefined);\n        return obj;\n    },\n    fromPartial(object) {\n        const message = createBaseMuteRoomTrackResponse();\n        message.track = (object.track !== undefined && object.track !== null)\n            ? livekit_models_1.TrackInfo.fromPartial(object.track)\n            : undefined;\n        return message;\n    },\n};\nfunction createBaseUpdateParticipantRequest() {\n    return { room: \"\", identity: \"\", metadata: \"\", permission: undefined, name: \"\" };\n}\nexports.UpdateParticipantRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.room !== undefined && message.room !== \"\") {\n            writer.uint32(10).string(message.room);\n        }\n        if (message.identity !== undefined && message.identity !== \"\") {\n            writer.uint32(18).string(message.identity);\n        }\n        if (message.metadata !== undefined && message.metadata !== \"\") {\n            writer.uint32(26).string(message.metadata);\n        }\n        if (message.permission !== undefined) {\n            livekit_models_1.ParticipantPermission.encode(message.permission, writer.uint32(34).fork()).ldelim();\n        }\n        if (message.name !== undefined && message.name !== \"\") {\n            writer.uint32(42).string(message.name);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseUpdateParticipantRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.room = reader.string();\n                    break;\n                case 2:\n                    message.identity = reader.string();\n                    break;\n                case 3:\n                    message.metadata = reader.string();\n                    break;\n                case 4:\n                    message.permission = livekit_models_1.ParticipantPermission.decode(reader, reader.uint32());\n                    break;\n                case 5:\n                    message.name = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            room: isSet(object.room) ? String(object.room) : \"\",\n            identity: isSet(object.identity) ? String(object.identity) : \"\",\n            metadata: isSet(object.metadata) ? String(object.metadata) : \"\",\n            permission: isSet(object.permission) ? livekit_models_1.ParticipantPermission.fromJSON(object.permission) : undefined,\n            name: isSet(object.name) ? String(object.name) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.room !== undefined && (obj.room = message.room);\n        message.identity !== undefined && (obj.identity = message.identity);\n        message.metadata !== undefined && (obj.metadata = message.metadata);\n        message.permission !== undefined &&\n            (obj.permission = message.permission ? livekit_models_1.ParticipantPermission.toJSON(message.permission) : undefined);\n        message.name !== undefined && (obj.name = message.name);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d;\n        const message = createBaseUpdateParticipantRequest();\n        message.room = (_a = object.room) !== null && _a !== void 0 ? _a : \"\";\n        message.identity = (_b = object.identity) !== null && _b !== void 0 ? _b : \"\";\n        message.metadata = (_c = object.metadata) !== null && _c !== void 0 ? _c : \"\";\n        message.permission = (object.permission !== undefined && object.permission !== null)\n            ? livekit_models_1.ParticipantPermission.fromPartial(object.permission)\n            : undefined;\n        message.name = (_d = object.name) !== null && _d !== void 0 ? _d : \"\";\n        return message;\n    },\n};\nfunction createBaseUpdateSubscriptionsRequest() {\n    return { room: \"\", identity: \"\", trackSids: [], subscribe: false, participantTracks: [] };\n}\nexports.UpdateSubscriptionsRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.room !== undefined && message.room !== \"\") {\n            writer.uint32(10).string(message.room);\n        }\n        if (message.identity !== undefined && message.identity !== \"\") {\n            writer.uint32(18).string(message.identity);\n        }\n        if (message.trackSids !== undefined && message.trackSids.length !== 0) {\n            for (const v of message.trackSids) {\n                writer.uint32(26).string(v);\n            }\n        }\n        if (message.subscribe === true) {\n            writer.uint32(32).bool(message.subscribe);\n        }\n        if (message.participantTracks !== undefined && message.participantTracks.length !== 0) {\n            for (const v of message.participantTracks) {\n                livekit_models_1.ParticipantTracks.encode(v, writer.uint32(42).fork()).ldelim();\n            }\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseUpdateSubscriptionsRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.room = reader.string();\n                    break;\n                case 2:\n                    message.identity = reader.string();\n                    break;\n                case 3:\n                    message.trackSids.push(reader.string());\n                    break;\n                case 4:\n                    message.subscribe = reader.bool();\n                    break;\n                case 5:\n                    message.participantTracks.push(livekit_models_1.ParticipantTracks.decode(reader, reader.uint32()));\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            room: isSet(object.room) ? String(object.room) : \"\",\n            identity: isSet(object.identity) ? String(object.identity) : \"\",\n            trackSids: Array.isArray(object === null || object === void 0 ? void 0 : object.trackSids) ? object.trackSids.map((e) => String(e)) : [],\n            subscribe: isSet(object.subscribe) ? Boolean(object.subscribe) : false,\n            participantTracks: Array.isArray(object === null || object === void 0 ? void 0 : object.participantTracks)\n                ? object.participantTracks.map((e) => livekit_models_1.ParticipantTracks.fromJSON(e))\n                : [],\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.room !== undefined && (obj.room = message.room);\n        message.identity !== undefined && (obj.identity = message.identity);\n        if (message.trackSids) {\n            obj.trackSids = message.trackSids.map((e) => e);\n        }\n        else {\n            obj.trackSids = [];\n        }\n        message.subscribe !== undefined && (obj.subscribe = message.subscribe);\n        if (message.participantTracks) {\n            obj.participantTracks = message.participantTracks.map((e) => e ? livekit_models_1.ParticipantTracks.toJSON(e) : undefined);\n        }\n        else {\n            obj.participantTracks = [];\n        }\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e;\n        const message = createBaseUpdateSubscriptionsRequest();\n        message.room = (_a = object.room) !== null && _a !== void 0 ? _a : \"\";\n        message.identity = (_b = object.identity) !== null && _b !== void 0 ? _b : \"\";\n        message.trackSids = ((_c = object.trackSids) === null || _c === void 0 ? void 0 : _c.map((e) => e)) || [];\n        message.subscribe = (_d = object.subscribe) !== null && _d !== void 0 ? _d : false;\n        message.participantTracks = ((_e = object.participantTracks) === null || _e === void 0 ? void 0 : _e.map((e) => livekit_models_1.ParticipantTracks.fromPartial(e))) || [];\n        return message;\n    },\n};\nfunction createBaseUpdateSubscriptionsResponse() {\n    return {};\n}\nexports.UpdateSubscriptionsResponse = {\n    encode(_, writer = minimal_1.default.Writer.create()) {\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseUpdateSubscriptionsResponse();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(_) {\n        return {};\n    },\n    toJSON(_) {\n        const obj = {};\n        return obj;\n    },\n    fromPartial(_) {\n        const message = createBaseUpdateSubscriptionsResponse();\n        return message;\n    },\n};\nfunction createBaseSendDataRequest() {\n    return {\n        room: \"\",\n        data: new Uint8Array(),\n        kind: 0,\n        destinationSids: [],\n        destinationIdentities: [],\n        topic: undefined,\n    };\n}\nexports.SendDataRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.room !== undefined && message.room !== \"\") {\n            writer.uint32(10).string(message.room);\n        }\n        if (message.data !== undefined && message.data.length !== 0) {\n            writer.uint32(18).bytes(message.data);\n        }\n        if (message.kind !== undefined && message.kind !== 0) {\n            writer.uint32(24).int32(message.kind);\n        }\n        if (message.destinationSids !== undefined && message.destinationSids.length !== 0) {\n            for (const v of message.destinationSids) {\n                writer.uint32(34).string(v);\n            }\n        }\n        if (message.destinationIdentities !== undefined && message.destinationIdentities.length !== 0) {\n            for (const v of message.destinationIdentities) {\n                writer.uint32(50).string(v);\n            }\n        }\n        if (message.topic !== undefined) {\n            writer.uint32(42).string(message.topic);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseSendDataRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.room = reader.string();\n                    break;\n                case 2:\n                    message.data = reader.bytes();\n                    break;\n                case 3:\n                    message.kind = reader.int32();\n                    break;\n                case 4:\n                    message.destinationSids.push(reader.string());\n                    break;\n                case 6:\n                    message.destinationIdentities.push(reader.string());\n                    break;\n                case 5:\n                    message.topic = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            room: isSet(object.room) ? String(object.room) : \"\",\n            data: isSet(object.data) ? bytesFromBase64(object.data) : new Uint8Array(),\n            kind: isSet(object.kind) ? livekit_models_1.dataPacket_KindFromJSON(object.kind) : 0,\n            destinationSids: Array.isArray(object === null || object === void 0 ? void 0 : object.destinationSids) ? object.destinationSids.map((e) => String(e)) : [],\n            destinationIdentities: Array.isArray(object === null || object === void 0 ? void 0 : object.destinationIdentities)\n                ? object.destinationIdentities.map((e) => String(e))\n                : [],\n            topic: isSet(object.topic) ? String(object.topic) : undefined,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.room !== undefined && (obj.room = message.room);\n        message.data !== undefined &&\n            (obj.data = base64FromBytes(message.data !== undefined ? message.data : new Uint8Array()));\n        message.kind !== undefined && (obj.kind = livekit_models_1.dataPacket_KindToJSON(message.kind));\n        if (message.destinationSids) {\n            obj.destinationSids = message.destinationSids.map((e) => e);\n        }\n        else {\n            obj.destinationSids = [];\n        }\n        if (message.destinationIdentities) {\n            obj.destinationIdentities = message.destinationIdentities.map((e) => e);\n        }\n        else {\n            obj.destinationIdentities = [];\n        }\n        message.topic !== undefined && (obj.topic = message.topic);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d, _e, _f;\n        const message = createBaseSendDataRequest();\n        message.room = (_a = object.room) !== null && _a !== void 0 ? _a : \"\";\n        message.data = (_b = object.data) !== null && _b !== void 0 ? _b : new Uint8Array();\n        message.kind = (_c = object.kind) !== null && _c !== void 0 ? _c : 0;\n        message.destinationSids = ((_d = object.destinationSids) === null || _d === void 0 ? void 0 : _d.map((e) => e)) || [];\n        message.destinationIdentities = ((_e = object.destinationIdentities) === null || _e === void 0 ? void 0 : _e.map((e) => e)) || [];\n        message.topic = (_f = object.topic) !== null && _f !== void 0 ? _f : undefined;\n        return message;\n    },\n};\nfunction createBaseSendDataResponse() {\n    return {};\n}\nexports.SendDataResponse = {\n    encode(_, writer = minimal_1.default.Writer.create()) {\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseSendDataResponse();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(_) {\n        return {};\n    },\n    toJSON(_) {\n        const obj = {};\n        return obj;\n    },\n    fromPartial(_) {\n        const message = createBaseSendDataResponse();\n        return message;\n    },\n};\nfunction createBaseUpdateRoomMetadataRequest() {\n    return { room: \"\", metadata: \"\" };\n}\nexports.UpdateRoomMetadataRequest = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.room !== undefined && message.room !== \"\") {\n            writer.uint32(10).string(message.room);\n        }\n        if (message.metadata !== undefined && message.metadata !== \"\") {\n            writer.uint32(18).string(message.metadata);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseUpdateRoomMetadataRequest();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.room = reader.string();\n                    break;\n                case 2:\n                    message.metadata = reader.string();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            room: isSet(object.room) ? String(object.room) : \"\",\n            metadata: isSet(object.metadata) ? String(object.metadata) : \"\",\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.room !== undefined && (obj.room = message.room);\n        message.metadata !== undefined && (obj.metadata = message.metadata);\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b;\n        const message = createBaseUpdateRoomMetadataRequest();\n        message.room = (_a = object.room) !== null && _a !== void 0 ? _a : \"\";\n        message.metadata = (_b = object.metadata) !== null && _b !== void 0 ? _b : \"\";\n        return message;\n    },\n};\nvar globalThis = (() => {\n    if (typeof globalThis !== \"undefined\") {\n        return globalThis;\n    }\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    if (typeof window !== \"undefined\") {\n        return window;\n    }\n    if (typeof global !== \"undefined\") {\n        return global;\n    }\n    throw \"Unable to locate global object\";\n})();\nfunction bytesFromBase64(b64) {\n    if (globalThis.Buffer) {\n        return Uint8Array.from(globalThis.Buffer.from(b64, \"base64\"));\n    }\n    else {\n        const bin = globalThis.atob(b64);\n        const arr = new Uint8Array(bin.length);\n        for (let i = 0; i < bin.length; ++i) {\n            arr[i] = bin.charCodeAt(i);\n        }\n        return arr;\n    }\n}\nfunction base64FromBytes(arr) {\n    if (globalThis.Buffer) {\n        return globalThis.Buffer.from(arr).toString(\"base64\");\n    }\n    else {\n        const bin = [];\n        arr.forEach((byte) => {\n            bin.push(String.fromCharCode(byte));\n        });\n        return globalThis.btoa(bin.join(\"\"));\n    }\n}\nfunction isSet(value) {\n    return value !== null && value !== undefined;\n}\n//# sourceMappingURL=livekit_room.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9wcm90by9saXZla2l0X3Jvb20uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxpQ0FBaUMsR0FBRyx3QkFBd0IsR0FBRyx1QkFBdUIsR0FBRyxtQ0FBbUMsR0FBRyxrQ0FBa0MsR0FBRyxnQ0FBZ0MsR0FBRyw2QkFBNkIsR0FBRyw0QkFBNEIsR0FBRyxpQ0FBaUMsR0FBRywrQkFBK0IsR0FBRyxnQ0FBZ0MsR0FBRywrQkFBK0IsR0FBRywwQkFBMEIsR0FBRyx5QkFBeUIsR0FBRyx5QkFBeUIsR0FBRyx3QkFBd0IsR0FBRyxrQkFBa0IsR0FBRyx5QkFBeUIsR0FBRyx1QkFBdUI7QUFDemtCO0FBQ0Esa0NBQWtDLG1CQUFPLENBQUMsaUZBQW9CO0FBQzlELHlCQUF5QixtQkFBTyxDQUFDLHlHQUFrQjtBQUNuRCx5QkFBeUIsbUJBQU8sQ0FBQyx5R0FBa0I7QUFDbkQsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsaUJBQWlCO0FBQ2pCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsaUJBQWlCO0FBQ2pCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxpQkFBaUI7QUFDakIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsaUJBQWlCO0FBQ2pCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGlCQUFpQjtBQUNqQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnQkFBZ0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saXZlc3RyZWFtLy4vbm9kZV9tb2R1bGVzL2xpdmVraXQtc2VydmVyLXNkay9kaXN0L3Byb3RvL2xpdmVraXRfcm9vbS5qcz84YzZmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5VcGRhdGVSb29tTWV0YWRhdGFSZXF1ZXN0ID0gZXhwb3J0cy5TZW5kRGF0YVJlc3BvbnNlID0gZXhwb3J0cy5TZW5kRGF0YVJlcXVlc3QgPSBleHBvcnRzLlVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZSA9IGV4cG9ydHMuVXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3QgPSBleHBvcnRzLlVwZGF0ZVBhcnRpY2lwYW50UmVxdWVzdCA9IGV4cG9ydHMuTXV0ZVJvb21UcmFja1Jlc3BvbnNlID0gZXhwb3J0cy5NdXRlUm9vbVRyYWNrUmVxdWVzdCA9IGV4cG9ydHMuUmVtb3ZlUGFydGljaXBhbnRSZXNwb25zZSA9IGV4cG9ydHMuUm9vbVBhcnRpY2lwYW50SWRlbnRpdHkgPSBleHBvcnRzLkxpc3RQYXJ0aWNpcGFudHNSZXNwb25zZSA9IGV4cG9ydHMuTGlzdFBhcnRpY2lwYW50c1JlcXVlc3QgPSBleHBvcnRzLkRlbGV0ZVJvb21SZXNwb25zZSA9IGV4cG9ydHMuRGVsZXRlUm9vbVJlcXVlc3QgPSBleHBvcnRzLkxpc3RSb29tc1Jlc3BvbnNlID0gZXhwb3J0cy5MaXN0Um9vbXNSZXF1ZXN0ID0gZXhwb3J0cy5Sb29tRWdyZXNzID0gZXhwb3J0cy5DcmVhdGVSb29tUmVxdWVzdCA9IGV4cG9ydHMucHJvdG9idWZQYWNrYWdlID0gdm9pZCAwO1xuLyogZXNsaW50LWRpc2FibGUgKi9cbmNvbnN0IG1pbmltYWxfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwicHJvdG9idWZqcy9taW5pbWFsXCIpKTtcbmNvbnN0IGxpdmVraXRfZWdyZXNzXzEgPSByZXF1aXJlKFwiLi9saXZla2l0X2VncmVzc1wiKTtcbmNvbnN0IGxpdmVraXRfbW9kZWxzXzEgPSByZXF1aXJlKFwiLi9saXZla2l0X21vZGVsc1wiKTtcbmV4cG9ydHMucHJvdG9idWZQYWNrYWdlID0gXCJsaXZla2l0XCI7XG5mdW5jdGlvbiBjcmVhdGVCYXNlQ3JlYXRlUm9vbVJlcXVlc3QoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgZW1wdHlUaW1lb3V0OiAwLFxuICAgICAgICBtYXhQYXJ0aWNpcGFudHM6IDAsXG4gICAgICAgIG5vZGVJZDogXCJcIixcbiAgICAgICAgbWV0YWRhdGE6IFwiXCIsXG4gICAgICAgIGVncmVzczogdW5kZWZpbmVkLFxuICAgICAgICBtaW5QbGF5b3V0RGVsYXk6IDAsXG4gICAgICAgIG1heFBsYXlvdXREZWxheTogMCxcbiAgICAgICAgc3luY1N0cmVhbXM6IGZhbHNlLFxuICAgIH07XG59XG5leHBvcnRzLkNyZWF0ZVJvb21SZXF1ZXN0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UubmFtZSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UubmFtZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2UubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZW1wdHlUaW1lb3V0ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5lbXB0eVRpbWVvdXQgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTYpLnVpbnQzMihtZXNzYWdlLmVtcHR5VGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubWF4UGFydGljaXBhbnRzICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5tYXhQYXJ0aWNpcGFudHMgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjQpLnVpbnQzMihtZXNzYWdlLm1heFBhcnRpY2lwYW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uubm9kZUlkICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5ub2RlSWQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzQpLnN0cmluZyhtZXNzYWdlLm5vZGVJZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubWV0YWRhdGEgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLm1ldGFkYXRhICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQyKS5zdHJpbmcobWVzc2FnZS5tZXRhZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZWdyZXNzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuUm9vbUVncmVzcy5lbmNvZGUobWVzc2FnZS5lZ3Jlc3MsIHdyaXRlci51aW50MzIoNTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubWluUGxheW91dERlbGF5ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5taW5QbGF5b3V0RGVsYXkgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNTYpLnVpbnQzMihtZXNzYWdlLm1pblBsYXlvdXREZWxheSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubWF4UGxheW91dERlbGF5ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5tYXhQbGF5b3V0RGVsYXkgIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNjQpLnVpbnQzMihtZXNzYWdlLm1heFBsYXlvdXREZWxheSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uuc3luY1N0cmVhbXMgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoNzIpLmJvb2wobWVzc2FnZS5zeW5jU3RyZWFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlQ3JlYXRlUm9vbVJlcXVlc3QoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbXB0eVRpbWVvdXQgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tYXhQYXJ0aWNpcGFudHMgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ub2RlSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZXRhZGF0YSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVncmVzcyA9IGV4cG9ydHMuUm9vbUVncmVzcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWluUGxheW91dERlbGF5ID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWF4UGxheW91dERlbGF5ID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3luY1N0cmVhbXMgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiBpc1NldChvYmplY3QubmFtZSkgPyBTdHJpbmcob2JqZWN0Lm5hbWUpIDogXCJcIixcbiAgICAgICAgICAgIGVtcHR5VGltZW91dDogaXNTZXQob2JqZWN0LmVtcHR5VGltZW91dCkgPyBOdW1iZXIob2JqZWN0LmVtcHR5VGltZW91dCkgOiAwLFxuICAgICAgICAgICAgbWF4UGFydGljaXBhbnRzOiBpc1NldChvYmplY3QubWF4UGFydGljaXBhbnRzKSA/IE51bWJlcihvYmplY3QubWF4UGFydGljaXBhbnRzKSA6IDAsXG4gICAgICAgICAgICBub2RlSWQ6IGlzU2V0KG9iamVjdC5ub2RlSWQpID8gU3RyaW5nKG9iamVjdC5ub2RlSWQpIDogXCJcIixcbiAgICAgICAgICAgIG1ldGFkYXRhOiBpc1NldChvYmplY3QubWV0YWRhdGEpID8gU3RyaW5nKG9iamVjdC5tZXRhZGF0YSkgOiBcIlwiLFxuICAgICAgICAgICAgZWdyZXNzOiBpc1NldChvYmplY3QuZWdyZXNzKSA/IGV4cG9ydHMuUm9vbUVncmVzcy5mcm9tSlNPTihvYmplY3QuZWdyZXNzKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG1pblBsYXlvdXREZWxheTogaXNTZXQob2JqZWN0Lm1pblBsYXlvdXREZWxheSkgPyBOdW1iZXIob2JqZWN0Lm1pblBsYXlvdXREZWxheSkgOiAwLFxuICAgICAgICAgICAgbWF4UGxheW91dERlbGF5OiBpc1NldChvYmplY3QubWF4UGxheW91dERlbGF5KSA/IE51bWJlcihvYmplY3QubWF4UGxheW91dERlbGF5KSA6IDAsXG4gICAgICAgICAgICBzeW5jU3RyZWFtczogaXNTZXQob2JqZWN0LnN5bmNTdHJlYW1zKSA/IEJvb2xlYW4ob2JqZWN0LnN5bmNTdHJlYW1zKSA6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2UubmFtZSAhPT0gdW5kZWZpbmVkICYmIChvYmoubmFtZSA9IG1lc3NhZ2UubmFtZSk7XG4gICAgICAgIG1lc3NhZ2UuZW1wdHlUaW1lb3V0ICE9PSB1bmRlZmluZWQgJiYgKG9iai5lbXB0eVRpbWVvdXQgPSBNYXRoLnJvdW5kKG1lc3NhZ2UuZW1wdHlUaW1lb3V0KSk7XG4gICAgICAgIG1lc3NhZ2UubWF4UGFydGljaXBhbnRzICE9PSB1bmRlZmluZWQgJiYgKG9iai5tYXhQYXJ0aWNpcGFudHMgPSBNYXRoLnJvdW5kKG1lc3NhZ2UubWF4UGFydGljaXBhbnRzKSk7XG4gICAgICAgIG1lc3NhZ2Uubm9kZUlkICE9PSB1bmRlZmluZWQgJiYgKG9iai5ub2RlSWQgPSBtZXNzYWdlLm5vZGVJZCk7XG4gICAgICAgIG1lc3NhZ2UubWV0YWRhdGEgIT09IHVuZGVmaW5lZCAmJiAob2JqLm1ldGFkYXRhID0gbWVzc2FnZS5tZXRhZGF0YSk7XG4gICAgICAgIG1lc3NhZ2UuZWdyZXNzICE9PSB1bmRlZmluZWQgJiYgKG9iai5lZ3Jlc3MgPSBtZXNzYWdlLmVncmVzcyA/IGV4cG9ydHMuUm9vbUVncmVzcy50b0pTT04obWVzc2FnZS5lZ3Jlc3MpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5taW5QbGF5b3V0RGVsYXkgIT09IHVuZGVmaW5lZCAmJiAob2JqLm1pblBsYXlvdXREZWxheSA9IE1hdGgucm91bmQobWVzc2FnZS5taW5QbGF5b3V0RGVsYXkpKTtcbiAgICAgICAgbWVzc2FnZS5tYXhQbGF5b3V0RGVsYXkgIT09IHVuZGVmaW5lZCAmJiAob2JqLm1heFBsYXlvdXREZWxheSA9IE1hdGgucm91bmQobWVzc2FnZS5tYXhQbGF5b3V0RGVsYXkpKTtcbiAgICAgICAgbWVzc2FnZS5zeW5jU3RyZWFtcyAhPT0gdW5kZWZpbmVkICYmIChvYmouc3luY1N0cmVhbXMgPSBtZXNzYWdlLnN5bmNTdHJlYW1zKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUNyZWF0ZVJvb21SZXF1ZXN0KCk7XG4gICAgICAgIG1lc3NhZ2UubmFtZSA9IChfYSA9IG9iamVjdC5uYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmVtcHR5VGltZW91dCA9IChfYiA9IG9iamVjdC5lbXB0eVRpbWVvdXQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDA7XG4gICAgICAgIG1lc3NhZ2UubWF4UGFydGljaXBhbnRzID0gKF9jID0gb2JqZWN0Lm1heFBhcnRpY2lwYW50cykgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMDtcbiAgICAgICAgbWVzc2FnZS5ub2RlSWQgPSAoX2QgPSBvYmplY3Qubm9kZUlkKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLm1ldGFkYXRhID0gKF9lID0gb2JqZWN0Lm1ldGFkYXRhKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmVncmVzcyA9IChvYmplY3QuZWdyZXNzICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmVncmVzcyAhPT0gbnVsbClcbiAgICAgICAgICAgID8gZXhwb3J0cy5Sb29tRWdyZXNzLmZyb21QYXJ0aWFsKG9iamVjdC5lZ3Jlc3MpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5taW5QbGF5b3V0RGVsYXkgPSAoX2YgPSBvYmplY3QubWluUGxheW91dERlbGF5KSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiAwO1xuICAgICAgICBtZXNzYWdlLm1heFBsYXlvdXREZWxheSA9IChfZyA9IG9iamVjdC5tYXhQbGF5b3V0RGVsYXkpICE9PSBudWxsICYmIF9nICE9PSB2b2lkIDAgPyBfZyA6IDA7XG4gICAgICAgIG1lc3NhZ2Uuc3luY1N0cmVhbXMgPSAoX2ggPSBvYmplY3Quc3luY1N0cmVhbXMpICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IGZhbHNlO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VSb29tRWdyZXNzKCkge1xuICAgIHJldHVybiB7IHJvb206IHVuZGVmaW5lZCwgcGFydGljaXBhbnQ6IHVuZGVmaW5lZCwgdHJhY2tzOiB1bmRlZmluZWQgfTtcbn1cbmV4cG9ydHMuUm9vbUVncmVzcyA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGl2ZWtpdF9lZ3Jlc3NfMS5Sb29tQ29tcG9zaXRlRWdyZXNzUmVxdWVzdC5lbmNvZGUobWVzc2FnZS5yb29tLCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBhcnRpY2lwYW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxpdmVraXRfZWdyZXNzXzEuQXV0b1BhcnRpY2lwYW50RWdyZXNzLmVuY29kZShtZXNzYWdlLnBhcnRpY2lwYW50LCB3cml0ZXIudWludDMyKDI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnRyYWNrcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsaXZla2l0X2VncmVzc18xLkF1dG9UcmFja0VncmVzcy5lbmNvZGUobWVzc2FnZS50cmFja3MsIHdyaXRlci51aW50MzIoMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUm9vbUVncmVzcygpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbSA9IGxpdmVraXRfZWdyZXNzXzEuUm9vbUNvbXBvc2l0ZUVncmVzc1JlcXVlc3QuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50ID0gbGl2ZWtpdF9lZ3Jlc3NfMS5BdXRvUGFydGljaXBhbnRFZ3Jlc3MuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRyYWNrcyA9IGxpdmVraXRfZWdyZXNzXzEuQXV0b1RyYWNrRWdyZXNzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJvb206IGlzU2V0KG9iamVjdC5yb29tKSA/IGxpdmVraXRfZWdyZXNzXzEuUm9vbUNvbXBvc2l0ZUVncmVzc1JlcXVlc3QuZnJvbUpTT04ob2JqZWN0LnJvb20pIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcGFydGljaXBhbnQ6IGlzU2V0KG9iamVjdC5wYXJ0aWNpcGFudCkgPyBsaXZla2l0X2VncmVzc18xLkF1dG9QYXJ0aWNpcGFudEVncmVzcy5mcm9tSlNPTihvYmplY3QucGFydGljaXBhbnQpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdHJhY2tzOiBpc1NldChvYmplY3QudHJhY2tzKSA/IGxpdmVraXRfZWdyZXNzXzEuQXV0b1RyYWNrRWdyZXNzLmZyb21KU09OKG9iamVjdC50cmFja3MpIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2Uucm9vbSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLnJvb20gPSBtZXNzYWdlLnJvb20gPyBsaXZla2l0X2VncmVzc18xLlJvb21Db21wb3NpdGVFZ3Jlc3NSZXF1ZXN0LnRvSlNPTihtZXNzYWdlLnJvb20pIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLnBhcnRpY2lwYW50ID0gbWVzc2FnZS5wYXJ0aWNpcGFudCA/IGxpdmVraXRfZWdyZXNzXzEuQXV0b1BhcnRpY2lwYW50RWdyZXNzLnRvSlNPTihtZXNzYWdlLnBhcnRpY2lwYW50KSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UudHJhY2tzICE9PSB1bmRlZmluZWQgJiYgKG9iai50cmFja3MgPSBtZXNzYWdlLnRyYWNrcyA/IGxpdmVraXRfZWdyZXNzXzEuQXV0b1RyYWNrRWdyZXNzLnRvSlNPTihtZXNzYWdlLnRyYWNrcykgOiB1bmRlZmluZWQpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlUm9vbUVncmVzcygpO1xuICAgICAgICBtZXNzYWdlLnJvb20gPSAob2JqZWN0LnJvb20gIT09IHVuZGVmaW5lZCAmJiBvYmplY3Qucm9vbSAhPT0gbnVsbClcbiAgICAgICAgICAgID8gbGl2ZWtpdF9lZ3Jlc3NfMS5Sb29tQ29tcG9zaXRlRWdyZXNzUmVxdWVzdC5mcm9tUGFydGlhbChvYmplY3Qucm9vbSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50ID0gKG9iamVjdC5wYXJ0aWNpcGFudCAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wYXJ0aWNpcGFudCAhPT0gbnVsbClcbiAgICAgICAgICAgID8gbGl2ZWtpdF9lZ3Jlc3NfMS5BdXRvUGFydGljaXBhbnRFZ3Jlc3MuZnJvbVBhcnRpYWwob2JqZWN0LnBhcnRpY2lwYW50KVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UudHJhY2tzID0gKG9iamVjdC50cmFja3MgIT09IHVuZGVmaW5lZCAmJiBvYmplY3QudHJhY2tzICE9PSBudWxsKVxuICAgICAgICAgICAgPyBsaXZla2l0X2VncmVzc18xLkF1dG9UcmFja0VncmVzcy5mcm9tUGFydGlhbChvYmplY3QudHJhY2tzKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUxpc3RSb29tc1JlcXVlc3QoKSB7XG4gICAgcmV0dXJuIHsgbmFtZXM6IFtdIH07XG59XG5leHBvcnRzLkxpc3RSb29tc1JlcXVlc3QgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5uYW1lcyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UubmFtZXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgbWVzc2FnZS5uYW1lcykge1xuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyh2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VMaXN0Um9vbXNSZXF1ZXN0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uYW1lcy5wdXNoKHJlYWRlci5zdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHsgbmFtZXM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0Lm5hbWVzKSA/IG9iamVjdC5uYW1lcy5tYXAoKGUpID0+IFN0cmluZyhlKSkgOiBbXSB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIGlmIChtZXNzYWdlLm5hbWVzKSB7XG4gICAgICAgICAgICBvYmoubmFtZXMgPSBtZXNzYWdlLm5hbWVzLm1hcCgoZSkgPT4gZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmoubmFtZXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VMaXN0Um9vbXNSZXF1ZXN0KCk7XG4gICAgICAgIG1lc3NhZ2UubmFtZXMgPSAoKF9hID0gb2JqZWN0Lm5hbWVzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWFwKChlKSA9PiBlKSkgfHwgW107XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUxpc3RSb29tc1Jlc3BvbnNlKCkge1xuICAgIHJldHVybiB7IHJvb21zOiBbXSB9O1xufVxuZXhwb3J0cy5MaXN0Um9vbXNSZXNwb25zZSA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb21zICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yb29tcy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLnJvb21zKSB7XG4gICAgICAgICAgICAgICAgbGl2ZWtpdF9tb2RlbHNfMS5Sb29tLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUxpc3RSb29tc1Jlc3BvbnNlKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb29tcy5wdXNoKGxpdmVraXRfbW9kZWxzXzEuUm9vbS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4geyByb29tczogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3Qucm9vbXMpID8gb2JqZWN0LnJvb21zLm1hcCgoZSkgPT4gbGl2ZWtpdF9tb2RlbHNfMS5Sb29tLmZyb21KU09OKGUpKSA6IFtdIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vbXMpIHtcbiAgICAgICAgICAgIG9iai5yb29tcyA9IG1lc3NhZ2Uucm9vbXMubWFwKChlKSA9PiBlID8gbGl2ZWtpdF9tb2RlbHNfMS5Sb29tLnRvSlNPTihlKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmoucm9vbXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VMaXN0Um9vbXNSZXNwb25zZSgpO1xuICAgICAgICBtZXNzYWdlLnJvb21zID0gKChfYSA9IG9iamVjdC5yb29tcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hcCgoZSkgPT4gbGl2ZWtpdF9tb2RlbHNfMS5Sb29tLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZURlbGV0ZVJvb21SZXF1ZXN0KCkge1xuICAgIHJldHVybiB7IHJvb206IFwiXCIgfTtcbn1cbmV4cG9ydHMuRGVsZXRlUm9vbVJlcXVlc3QgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5yb29tICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yb29tICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5yb29tKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VEZWxldGVSb29tUmVxdWVzdCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4geyByb29tOiBpc1NldChvYmplY3Qucm9vbSkgPyBTdHJpbmcob2JqZWN0LnJvb20pIDogXCJcIiB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2Uucm9vbSAhPT0gdW5kZWZpbmVkICYmIChvYmoucm9vbSA9IG1lc3NhZ2Uucm9vbSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZURlbGV0ZVJvb21SZXF1ZXN0KCk7XG4gICAgICAgIG1lc3NhZ2Uucm9vbSA9IChfYSA9IG9iamVjdC5yb29tKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VEZWxldGVSb29tUmVzcG9uc2UoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuZXhwb3J0cy5EZWxldGVSb29tUmVzcG9uc2UgPSB7XG4gICAgZW5jb2RlKF8sIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VEZWxldGVSb29tUmVzcG9uc2UoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKF8pIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH0sXG4gICAgdG9KU09OKF8pIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChfKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlRGVsZXRlUm9vbVJlc3BvbnNlKCk7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZUxpc3RQYXJ0aWNpcGFudHNSZXF1ZXN0KCkge1xuICAgIHJldHVybiB7IHJvb206IFwiXCIgfTtcbn1cbmV4cG9ydHMuTGlzdFBhcnRpY2lwYW50c1JlcXVlc3QgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5yb29tICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yb29tICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5yb29tKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VMaXN0UGFydGljaXBhbnRzUmVxdWVzdCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4geyByb29tOiBpc1NldChvYmplY3Qucm9vbSkgPyBTdHJpbmcob2JqZWN0LnJvb20pIDogXCJcIiB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2Uucm9vbSAhPT0gdW5kZWZpbmVkICYmIChvYmoucm9vbSA9IG1lc3NhZ2Uucm9vbSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUxpc3RQYXJ0aWNpcGFudHNSZXF1ZXN0KCk7XG4gICAgICAgIG1lc3NhZ2Uucm9vbSA9IChfYSA9IG9iamVjdC5yb29tKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VMaXN0UGFydGljaXBhbnRzUmVzcG9uc2UoKSB7XG4gICAgcmV0dXJuIHsgcGFydGljaXBhbnRzOiBbXSB9O1xufVxuZXhwb3J0cy5MaXN0UGFydGljaXBhbnRzUmVzcG9uc2UgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5wYXJ0aWNpcGFudHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnBhcnRpY2lwYW50cy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLnBhcnRpY2lwYW50cykge1xuICAgICAgICAgICAgICAgIGxpdmVraXRfbW9kZWxzXzEuUGFydGljaXBhbnRJbmZvLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDEwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZUxpc3RQYXJ0aWNpcGFudHNSZXNwb25zZSgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnRzLnB1c2gobGl2ZWtpdF9tb2RlbHNfMS5QYXJ0aWNpcGFudEluZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBhcnRpY2lwYW50czogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QucGFydGljaXBhbnRzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LnBhcnRpY2lwYW50cy5tYXAoKGUpID0+IGxpdmVraXRfbW9kZWxzXzEuUGFydGljaXBhbnRJbmZvLmZyb21KU09OKGUpKVxuICAgICAgICAgICAgICAgIDogW10sXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGFydGljaXBhbnRzKSB7XG4gICAgICAgICAgICBvYmoucGFydGljaXBhbnRzID0gbWVzc2FnZS5wYXJ0aWNpcGFudHMubWFwKChlKSA9PiBlID8gbGl2ZWtpdF9tb2RlbHNfMS5QYXJ0aWNpcGFudEluZm8udG9KU09OKGUpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5wYXJ0aWNpcGFudHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VMaXN0UGFydGljaXBhbnRzUmVzcG9uc2UoKTtcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudHMgPSAoKF9hID0gb2JqZWN0LnBhcnRpY2lwYW50cykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hcCgoZSkgPT4gbGl2ZWtpdF9tb2RlbHNfMS5QYXJ0aWNpcGFudEluZm8uZnJvbVBhcnRpYWwoZSkpKSB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlUm9vbVBhcnRpY2lwYW50SWRlbnRpdHkoKSB7XG4gICAgcmV0dXJuIHsgcm9vbTogXCJcIiwgaWRlbnRpdHk6IFwiXCIgfTtcbn1cbmV4cG9ydHMuUm9vbVBhcnRpY2lwYW50SWRlbnRpdHkgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5yb29tICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yb29tICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5yb29tKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5pZGVudGl0eSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaWRlbnRpdHkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLmlkZW50aXR5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSb29tUGFydGljaXBhbnRJZGVudGl0eSgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlkZW50aXR5ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb29tOiBpc1NldChvYmplY3Qucm9vbSkgPyBTdHJpbmcob2JqZWN0LnJvb20pIDogXCJcIixcbiAgICAgICAgICAgIGlkZW50aXR5OiBpc1NldChvYmplY3QuaWRlbnRpdHkpID8gU3RyaW5nKG9iamVjdC5pZGVudGl0eSkgOiBcIlwiLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2Uucm9vbSAhPT0gdW5kZWZpbmVkICYmIChvYmoucm9vbSA9IG1lc3NhZ2Uucm9vbSk7XG4gICAgICAgIG1lc3NhZ2UuaWRlbnRpdHkgIT09IHVuZGVmaW5lZCAmJiAob2JqLmlkZW50aXR5ID0gbWVzc2FnZS5pZGVudGl0eSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChvYmplY3QpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSb29tUGFydGljaXBhbnRJZGVudGl0eSgpO1xuICAgICAgICBtZXNzYWdlLnJvb20gPSAoX2EgPSBvYmplY3Qucm9vbSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5pZGVudGl0eSA9IChfYiA9IG9iamVjdC5pZGVudGl0eSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlUmVtb3ZlUGFydGljaXBhbnRSZXNwb25zZSgpIHtcbiAgICByZXR1cm4ge307XG59XG5leHBvcnRzLlJlbW92ZVBhcnRpY2lwYW50UmVzcG9uc2UgPSB7XG4gICAgZW5jb2RlKF8sIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VSZW1vdmVQYXJ0aWNpcGFudFJlc3BvbnNlKCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihfKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9LFxuICAgIHRvSlNPTihfKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwoXykge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVJlbW92ZVBhcnRpY2lwYW50UmVzcG9uc2UoKTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlTXV0ZVJvb21UcmFja1JlcXVlc3QoKSB7XG4gICAgcmV0dXJuIHsgcm9vbTogXCJcIiwgaWRlbnRpdHk6IFwiXCIsIHRyYWNrU2lkOiBcIlwiLCBtdXRlZDogZmFsc2UgfTtcbn1cbmV4cG9ydHMuTXV0ZVJvb21UcmFja1JlcXVlc3QgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5yb29tICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yb29tICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5yb29tKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5pZGVudGl0eSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuaWRlbnRpdHkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLmlkZW50aXR5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS50cmFja1NpZCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UudHJhY2tTaWQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMjYpLnN0cmluZyhtZXNzYWdlLnRyYWNrU2lkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5tdXRlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigzMikuYm9vbChtZXNzYWdlLm11dGVkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VNdXRlUm9vbVRyYWNrUmVxdWVzdCgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlkZW50aXR5ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJhY2tTaWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tdXRlZCA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJvb206IGlzU2V0KG9iamVjdC5yb29tKSA/IFN0cmluZyhvYmplY3Qucm9vbSkgOiBcIlwiLFxuICAgICAgICAgICAgaWRlbnRpdHk6IGlzU2V0KG9iamVjdC5pZGVudGl0eSkgPyBTdHJpbmcob2JqZWN0LmlkZW50aXR5KSA6IFwiXCIsXG4gICAgICAgICAgICB0cmFja1NpZDogaXNTZXQob2JqZWN0LnRyYWNrU2lkKSA/IFN0cmluZyhvYmplY3QudHJhY2tTaWQpIDogXCJcIixcbiAgICAgICAgICAgIG11dGVkOiBpc1NldChvYmplY3QubXV0ZWQpID8gQm9vbGVhbihvYmplY3QubXV0ZWQpIDogZmFsc2UsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5yb29tICE9PSB1bmRlZmluZWQgJiYgKG9iai5yb29tID0gbWVzc2FnZS5yb29tKTtcbiAgICAgICAgbWVzc2FnZS5pZGVudGl0eSAhPT0gdW5kZWZpbmVkICYmIChvYmouaWRlbnRpdHkgPSBtZXNzYWdlLmlkZW50aXR5KTtcbiAgICAgICAgbWVzc2FnZS50cmFja1NpZCAhPT0gdW5kZWZpbmVkICYmIChvYmoudHJhY2tTaWQgPSBtZXNzYWdlLnRyYWNrU2lkKTtcbiAgICAgICAgbWVzc2FnZS5tdXRlZCAhPT0gdW5kZWZpbmVkICYmIChvYmoubXV0ZWQgPSBtZXNzYWdlLm11dGVkKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTXV0ZVJvb21UcmFja1JlcXVlc3QoKTtcbiAgICAgICAgbWVzc2FnZS5yb29tID0gKF9hID0gb2JqZWN0LnJvb20pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuaWRlbnRpdHkgPSAoX2IgPSBvYmplY3QuaWRlbnRpdHkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UudHJhY2tTaWQgPSAoX2MgPSBvYmplY3QudHJhY2tTaWQpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UubXV0ZWQgPSAoX2QgPSBvYmplY3QubXV0ZWQpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IGZhbHNlO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VNdXRlUm9vbVRyYWNrUmVzcG9uc2UoKSB7XG4gICAgcmV0dXJuIHsgdHJhY2s6IHVuZGVmaW5lZCB9O1xufVxuZXhwb3J0cy5NdXRlUm9vbVRyYWNrUmVzcG9uc2UgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS50cmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsaXZla2l0X21vZGVsc18xLlRyYWNrSW5mby5lbmNvZGUobWVzc2FnZS50cmFjaywgd3JpdGVyLnVpbnQzMigxMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VNdXRlUm9vbVRyYWNrUmVzcG9uc2UoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRyYWNrID0gbGl2ZWtpdF9tb2RlbHNfMS5UcmFja0luZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4geyB0cmFjazogaXNTZXQob2JqZWN0LnRyYWNrKSA/IGxpdmVraXRfbW9kZWxzXzEuVHJhY2tJbmZvLmZyb21KU09OKG9iamVjdC50cmFjaykgOiB1bmRlZmluZWQgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnRyYWNrICE9PSB1bmRlZmluZWQgJiYgKG9iai50cmFjayA9IG1lc3NhZ2UudHJhY2sgPyBsaXZla2l0X21vZGVsc18xLlRyYWNrSW5mby50b0pTT04obWVzc2FnZS50cmFjaykgOiB1bmRlZmluZWQpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlTXV0ZVJvb21UcmFja1Jlc3BvbnNlKCk7XG4gICAgICAgIG1lc3NhZ2UudHJhY2sgPSAob2JqZWN0LnRyYWNrICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnRyYWNrICE9PSBudWxsKVxuICAgICAgICAgICAgPyBsaXZla2l0X21vZGVsc18xLlRyYWNrSW5mby5mcm9tUGFydGlhbChvYmplY3QudHJhY2spXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVXBkYXRlUGFydGljaXBhbnRSZXF1ZXN0KCkge1xuICAgIHJldHVybiB7IHJvb206IFwiXCIsIGlkZW50aXR5OiBcIlwiLCBtZXRhZGF0YTogXCJcIiwgcGVybWlzc2lvbjogdW5kZWZpbmVkLCBuYW1lOiBcIlwiIH07XG59XG5leHBvcnRzLlVwZGF0ZVBhcnRpY2lwYW50UmVxdWVzdCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb20gIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnJvb20gIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLnJvb20pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmlkZW50aXR5ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5pZGVudGl0eSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UuaWRlbnRpdHkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLm1ldGFkYXRhICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5tZXRhZGF0YSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKG1lc3NhZ2UubWV0YWRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnBlcm1pc3Npb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGl2ZWtpdF9tb2RlbHNfMS5QYXJ0aWNpcGFudFBlcm1pc3Npb24uZW5jb2RlKG1lc3NhZ2UucGVybWlzc2lvbiwgd3JpdGVyLnVpbnQzMigzNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5uYW1lICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5uYW1lICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQyKS5zdHJpbmcobWVzc2FnZS5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VVcGRhdGVQYXJ0aWNpcGFudFJlcXVlc3QoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvb20gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pZGVudGl0eSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1ldGFkYXRhID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGVybWlzc2lvbiA9IGxpdmVraXRfbW9kZWxzXzEuUGFydGljaXBhbnRQZXJtaXNzaW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb29tOiBpc1NldChvYmplY3Qucm9vbSkgPyBTdHJpbmcob2JqZWN0LnJvb20pIDogXCJcIixcbiAgICAgICAgICAgIGlkZW50aXR5OiBpc1NldChvYmplY3QuaWRlbnRpdHkpID8gU3RyaW5nKG9iamVjdC5pZGVudGl0eSkgOiBcIlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IGlzU2V0KG9iamVjdC5tZXRhZGF0YSkgPyBTdHJpbmcob2JqZWN0Lm1ldGFkYXRhKSA6IFwiXCIsXG4gICAgICAgICAgICBwZXJtaXNzaW9uOiBpc1NldChvYmplY3QucGVybWlzc2lvbikgPyBsaXZla2l0X21vZGVsc18xLlBhcnRpY2lwYW50UGVybWlzc2lvbi5mcm9tSlNPTihvYmplY3QucGVybWlzc2lvbikgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBuYW1lOiBpc1NldChvYmplY3QubmFtZSkgPyBTdHJpbmcob2JqZWN0Lm5hbWUpIDogXCJcIixcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvSlNPTihtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBtZXNzYWdlLnJvb20gIT09IHVuZGVmaW5lZCAmJiAob2JqLnJvb20gPSBtZXNzYWdlLnJvb20pO1xuICAgICAgICBtZXNzYWdlLmlkZW50aXR5ICE9PSB1bmRlZmluZWQgJiYgKG9iai5pZGVudGl0eSA9IG1lc3NhZ2UuaWRlbnRpdHkpO1xuICAgICAgICBtZXNzYWdlLm1ldGFkYXRhICE9PSB1bmRlZmluZWQgJiYgKG9iai5tZXRhZGF0YSA9IG1lc3NhZ2UubWV0YWRhdGEpO1xuICAgICAgICBtZXNzYWdlLnBlcm1pc3Npb24gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKG9iai5wZXJtaXNzaW9uID0gbWVzc2FnZS5wZXJtaXNzaW9uID8gbGl2ZWtpdF9tb2RlbHNfMS5QYXJ0aWNpcGFudFBlcm1pc3Npb24udG9KU09OKG1lc3NhZ2UucGVybWlzc2lvbikgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLm5hbWUgIT09IHVuZGVmaW5lZCAmJiAob2JqLm5hbWUgPSBtZXNzYWdlLm5hbWUpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VVcGRhdGVQYXJ0aWNpcGFudFJlcXVlc3QoKTtcbiAgICAgICAgbWVzc2FnZS5yb29tID0gKF9hID0gb2JqZWN0LnJvb20pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UuaWRlbnRpdHkgPSAoX2IgPSBvYmplY3QuaWRlbnRpdHkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UubWV0YWRhdGEgPSAoX2MgPSBvYmplY3QubWV0YWRhdGEpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UucGVybWlzc2lvbiA9IChvYmplY3QucGVybWlzc2lvbiAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5wZXJtaXNzaW9uICE9PSBudWxsKVxuICAgICAgICAgICAgPyBsaXZla2l0X21vZGVsc18xLlBhcnRpY2lwYW50UGVybWlzc2lvbi5mcm9tUGFydGlhbChvYmplY3QucGVybWlzc2lvbilcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLm5hbWUgPSAoX2QgPSBvYmplY3QubmFtZSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3QoKSB7XG4gICAgcmV0dXJuIHsgcm9vbTogXCJcIiwgaWRlbnRpdHk6IFwiXCIsIHRyYWNrU2lkczogW10sIHN1YnNjcmliZTogZmFsc2UsIHBhcnRpY2lwYW50VHJhY2tzOiBbXSB9O1xufVxuZXhwb3J0cy5VcGRhdGVTdWJzY3JpcHRpb25zUmVxdWVzdCA9IHtcbiAgICBlbmNvZGUobWVzc2FnZSwgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnJvb20gIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnJvb20gIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTApLnN0cmluZyhtZXNzYWdlLnJvb20pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmlkZW50aXR5ICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5pZGVudGl0eSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxOCkuc3RyaW5nKG1lc3NhZ2UuaWRlbnRpdHkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnRyYWNrU2lkcyAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UudHJhY2tTaWRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UudHJhY2tTaWRzKSB7XG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNikuc3RyaW5nKHYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnN1YnNjcmliZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigzMikuYm9vbChtZXNzYWdlLnN1YnNjcmliZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UucGFydGljaXBhbnRUcmFja3MgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLnBhcnRpY2lwYW50VHJhY2tzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIG1lc3NhZ2UucGFydGljaXBhbnRUcmFja3MpIHtcbiAgICAgICAgICAgICAgICBsaXZla2l0X21vZGVsc18xLlBhcnRpY2lwYW50VHJhY2tzLmVuY29kZSh2LCB3cml0ZXIudWludDMyKDQyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb29tID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWRlbnRpdHkgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmFja1NpZHMucHVzaChyZWFkZXIuc3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3Vic2NyaWJlID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50VHJhY2tzLnB1c2gobGl2ZWtpdF9tb2RlbHNfMS5QYXJ0aWNpcGFudFRyYWNrcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcm9vbTogaXNTZXQob2JqZWN0LnJvb20pID8gU3RyaW5nKG9iamVjdC5yb29tKSA6IFwiXCIsXG4gICAgICAgICAgICBpZGVudGl0eTogaXNTZXQob2JqZWN0LmlkZW50aXR5KSA/IFN0cmluZyhvYmplY3QuaWRlbnRpdHkpIDogXCJcIixcbiAgICAgICAgICAgIHRyYWNrU2lkczogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QudHJhY2tTaWRzKSA/IG9iamVjdC50cmFja1NpZHMubWFwKChlKSA9PiBTdHJpbmcoZSkpIDogW10sXG4gICAgICAgICAgICBzdWJzY3JpYmU6IGlzU2V0KG9iamVjdC5zdWJzY3JpYmUpID8gQm9vbGVhbihvYmplY3Quc3Vic2NyaWJlKSA6IGZhbHNlLFxuICAgICAgICAgICAgcGFydGljaXBhbnRUcmFja3M6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LnBhcnRpY2lwYW50VHJhY2tzKVxuICAgICAgICAgICAgICAgID8gb2JqZWN0LnBhcnRpY2lwYW50VHJhY2tzLm1hcCgoZSkgPT4gbGl2ZWtpdF9tb2RlbHNfMS5QYXJ0aWNpcGFudFRyYWNrcy5mcm9tSlNPTihlKSlcbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdG9KU09OKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG1lc3NhZ2Uucm9vbSAhPT0gdW5kZWZpbmVkICYmIChvYmoucm9vbSA9IG1lc3NhZ2Uucm9vbSk7XG4gICAgICAgIG1lc3NhZ2UuaWRlbnRpdHkgIT09IHVuZGVmaW5lZCAmJiAob2JqLmlkZW50aXR5ID0gbWVzc2FnZS5pZGVudGl0eSk7XG4gICAgICAgIGlmIChtZXNzYWdlLnRyYWNrU2lkcykge1xuICAgICAgICAgICAgb2JqLnRyYWNrU2lkcyA9IG1lc3NhZ2UudHJhY2tTaWRzLm1hcCgoZSkgPT4gZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmoudHJhY2tTaWRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgbWVzc2FnZS5zdWJzY3JpYmUgIT09IHVuZGVmaW5lZCAmJiAob2JqLnN1YnNjcmliZSA9IG1lc3NhZ2Uuc3Vic2NyaWJlKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UucGFydGljaXBhbnRUcmFja3MpIHtcbiAgICAgICAgICAgIG9iai5wYXJ0aWNpcGFudFRyYWNrcyA9IG1lc3NhZ2UucGFydGljaXBhbnRUcmFja3MubWFwKChlKSA9PiBlID8gbGl2ZWtpdF9tb2RlbHNfMS5QYXJ0aWNpcGFudFRyYWNrcy50b0pTT04oZSkgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqLnBhcnRpY2lwYW50VHJhY2tzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0KCk7XG4gICAgICAgIG1lc3NhZ2Uucm9vbSA9IChfYSA9IG9iamVjdC5yb29tKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLmlkZW50aXR5ID0gKF9iID0gb2JqZWN0LmlkZW50aXR5KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBcIlwiO1xuICAgICAgICBtZXNzYWdlLnRyYWNrU2lkcyA9ICgoX2MgPSBvYmplY3QudHJhY2tTaWRzKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MubWFwKChlKSA9PiBlKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2Uuc3Vic2NyaWJlID0gKF9kID0gb2JqZWN0LnN1YnNjcmliZSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogZmFsc2U7XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnRUcmFja3MgPSAoKF9lID0gb2JqZWN0LnBhcnRpY2lwYW50VHJhY2tzKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UubWFwKChlKSA9PiBsaXZla2l0X21vZGVsc18xLlBhcnRpY2lwYW50VHJhY2tzLmZyb21QYXJ0aWFsKGUpKSkgfHwgW107XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xuZnVuY3Rpb24gY3JlYXRlQmFzZVVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZSgpIHtcbiAgICByZXR1cm4ge307XG59XG5leHBvcnRzLlVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZSA9IHtcbiAgICBlbmNvZGUoXywgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZSgpO1xuICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG4gICAgZnJvbUpTT04oXykge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfSxcbiAgICB0b0pTT04oXykge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKF8pIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VVcGRhdGVTdWJzY3JpcHRpb25zUmVzcG9uc2UoKTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlU2VuZERhdGFSZXF1ZXN0KCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJvb206IFwiXCIsXG4gICAgICAgIGRhdGE6IG5ldyBVaW50OEFycmF5KCksXG4gICAgICAgIGtpbmQ6IDAsXG4gICAgICAgIGRlc3RpbmF0aW9uU2lkczogW10sXG4gICAgICAgIGRlc3RpbmF0aW9uSWRlbnRpdGllczogW10sXG4gICAgICAgIHRvcGljOiB1bmRlZmluZWQsXG4gICAgfTtcbn1cbmV4cG9ydHMuU2VuZERhdGFSZXF1ZXN0ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vbSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uucm9vbSAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigxMCkuc3RyaW5nKG1lc3NhZ2Uucm9vbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZGF0YSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuZGF0YS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLmJ5dGVzKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uua2luZCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2Uua2luZCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigyNCkuaW50MzIobWVzc2FnZS5raW5kKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5kZXN0aW5hdGlvblNpZHMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmRlc3RpbmF0aW9uU2lkcy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLmRlc3RpbmF0aW9uU2lkcykge1xuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoMzQpLnN0cmluZyh2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5kZXN0aW5hdGlvbklkZW50aXRpZXMgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmRlc3RpbmF0aW9uSWRlbnRpdGllcy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBtZXNzYWdlLmRlc3RpbmF0aW9uSWRlbnRpdGllcykge1xuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoNTApLnN0cmluZyh2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS50b3BpYyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDQyKS5zdHJpbmcobWVzc2FnZS50b3BpYyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIGRlY29kZShpbnB1dCwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGlucHV0IGluc3RhbmNlb2YgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyID8gaW5wdXQgOiBuZXcgbWluaW1hbF8xLmRlZmF1bHQuUmVhZGVyKGlucHV0KTtcbiAgICAgICAgbGV0IGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU2VuZERhdGFSZXF1ZXN0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb29tID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGF0YSA9IHJlYWRlci5ieXRlcygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uua2luZCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVzdGluYXRpb25TaWRzLnB1c2gocmVhZGVyLnN0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlc3RpbmF0aW9uSWRlbnRpdGllcy5wdXNoKHJlYWRlci5zdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50b3BpYyA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKG9iamVjdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcm9vbTogaXNTZXQob2JqZWN0LnJvb20pID8gU3RyaW5nKG9iamVjdC5yb29tKSA6IFwiXCIsXG4gICAgICAgICAgICBkYXRhOiBpc1NldChvYmplY3QuZGF0YSkgPyBieXRlc0Zyb21CYXNlNjQob2JqZWN0LmRhdGEpIDogbmV3IFVpbnQ4QXJyYXkoKSxcbiAgICAgICAgICAgIGtpbmQ6IGlzU2V0KG9iamVjdC5raW5kKSA/IGxpdmVraXRfbW9kZWxzXzEuZGF0YVBhY2tldF9LaW5kRnJvbUpTT04ob2JqZWN0LmtpbmQpIDogMCxcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uU2lkczogQXJyYXkuaXNBcnJheShvYmplY3QgPT09IG51bGwgfHwgb2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmplY3QuZGVzdGluYXRpb25TaWRzKSA/IG9iamVjdC5kZXN0aW5hdGlvblNpZHMubWFwKChlKSA9PiBTdHJpbmcoZSkpIDogW10sXG4gICAgICAgICAgICBkZXN0aW5hdGlvbklkZW50aXRpZXM6IEFycmF5LmlzQXJyYXkob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqZWN0LmRlc3RpbmF0aW9uSWRlbnRpdGllcylcbiAgICAgICAgICAgICAgICA/IG9iamVjdC5kZXN0aW5hdGlvbklkZW50aXRpZXMubWFwKChlKSA9PiBTdHJpbmcoZSkpXG4gICAgICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICAgIHRvcGljOiBpc1NldChvYmplY3QudG9waWMpID8gU3RyaW5nKG9iamVjdC50b3BpYykgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5yb29tICE9PSB1bmRlZmluZWQgJiYgKG9iai5yb29tID0gbWVzc2FnZS5yb29tKTtcbiAgICAgICAgbWVzc2FnZS5kYXRhICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmouZGF0YSA9IGJhc2U2NEZyb21CeXRlcyhtZXNzYWdlLmRhdGEgIT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UuZGF0YSA6IG5ldyBVaW50OEFycmF5KCkpKTtcbiAgICAgICAgbWVzc2FnZS5raW5kICE9PSB1bmRlZmluZWQgJiYgKG9iai5raW5kID0gbGl2ZWtpdF9tb2RlbHNfMS5kYXRhUGFja2V0X0tpbmRUb0pTT04obWVzc2FnZS5raW5kKSk7XG4gICAgICAgIGlmIChtZXNzYWdlLmRlc3RpbmF0aW9uU2lkcykge1xuICAgICAgICAgICAgb2JqLmRlc3RpbmF0aW9uU2lkcyA9IG1lc3NhZ2UuZGVzdGluYXRpb25TaWRzLm1hcCgoZSkgPT4gZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYmouZGVzdGluYXRpb25TaWRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UuZGVzdGluYXRpb25JZGVudGl0aWVzKSB7XG4gICAgICAgICAgICBvYmouZGVzdGluYXRpb25JZGVudGl0aWVzID0gbWVzc2FnZS5kZXN0aW5hdGlvbklkZW50aXRpZXMubWFwKChlKSA9PiBlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9iai5kZXN0aW5hdGlvbklkZW50aXRpZXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBtZXNzYWdlLnRvcGljICE9PSB1bmRlZmluZWQgJiYgKG9iai50b3BpYyA9IG1lc3NhZ2UudG9waWMpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgZnJvbVBhcnRpYWwob2JqZWN0KSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVNlbmREYXRhUmVxdWVzdCgpO1xuICAgICAgICBtZXNzYWdlLnJvb20gPSAoX2EgPSBvYmplY3Qucm9vbSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5kYXRhID0gKF9iID0gb2JqZWN0LmRhdGEpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IG5ldyBVaW50OEFycmF5KCk7XG4gICAgICAgIG1lc3NhZ2Uua2luZCA9IChfYyA9IG9iamVjdC5raW5kKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAwO1xuICAgICAgICBtZXNzYWdlLmRlc3RpbmF0aW9uU2lkcyA9ICgoX2QgPSBvYmplY3QuZGVzdGluYXRpb25TaWRzKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QubWFwKChlKSA9PiBlKSkgfHwgW107XG4gICAgICAgIG1lc3NhZ2UuZGVzdGluYXRpb25JZGVudGl0aWVzID0gKChfZSA9IG9iamVjdC5kZXN0aW5hdGlvbklkZW50aXRpZXMpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5tYXAoKGUpID0+IGUpKSB8fCBbXTtcbiAgICAgICAgbWVzc2FnZS50b3BpYyA9IChfZiA9IG9iamVjdC50b3BpYykgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VTZW5kRGF0YVJlc3BvbnNlKCkge1xuICAgIHJldHVybiB7fTtcbn1cbmV4cG9ydHMuU2VuZERhdGFSZXNwb25zZSA9IHtcbiAgICBlbmNvZGUoXywgd3JpdGVyID0gbWluaW1hbF8xLmRlZmF1bHQuV3JpdGVyLmNyZWF0ZSgpKSB7XG4gICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgfSxcbiAgICBkZWNvZGUoaW5wdXQsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBpbnB1dCBpbnN0YW5jZW9mIG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlciA/IGlucHV0IDogbmV3IG1pbmltYWxfMS5kZWZhdWx0LlJlYWRlcihpbnB1dCk7XG4gICAgICAgIGxldCBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVNlbmREYXRhUmVzcG9uc2UoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxuICAgIGZyb21KU09OKF8pIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH0sXG4gICAgdG9KU09OKF8pIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBmcm9tUGFydGlhbChfKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlU2VuZERhdGFSZXNwb25zZSgpO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VVcGRhdGVSb29tTWV0YWRhdGFSZXF1ZXN0KCkge1xuICAgIHJldHVybiB7IHJvb206IFwiXCIsIG1ldGFkYXRhOiBcIlwiIH07XG59XG5leHBvcnRzLlVwZGF0ZVJvb21NZXRhZGF0YVJlcXVlc3QgPSB7XG4gICAgZW5jb2RlKG1lc3NhZ2UsIHdyaXRlciA9IG1pbmltYWxfMS5kZWZhdWx0LldyaXRlci5jcmVhdGUoKSkge1xuICAgICAgICBpZiAobWVzc2FnZS5yb29tICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5yb29tICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5yb29tKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5tZXRhZGF0YSAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UubWV0YWRhdGEgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoMTgpLnN0cmluZyhtZXNzYWdlLm1ldGFkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VVcGRhdGVSb29tTWV0YWRhdGFSZXF1ZXN0KCk7XG4gICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICBjb25zdCB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb29tID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWV0YWRhdGEgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJvb206IGlzU2V0KG9iamVjdC5yb29tKSA/IFN0cmluZyhvYmplY3Qucm9vbSkgOiBcIlwiLFxuICAgICAgICAgICAgbWV0YWRhdGE6IGlzU2V0KG9iamVjdC5tZXRhZGF0YSkgPyBTdHJpbmcob2JqZWN0Lm1ldGFkYXRhKSA6IFwiXCIsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5yb29tICE9PSB1bmRlZmluZWQgJiYgKG9iai5yb29tID0gbWVzc2FnZS5yb29tKTtcbiAgICAgICAgbWVzc2FnZS5tZXRhZGF0YSAhPT0gdW5kZWZpbmVkICYmIChvYmoubWV0YWRhdGEgPSBtZXNzYWdlLm1ldGFkYXRhKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gY3JlYXRlQmFzZVVwZGF0ZVJvb21NZXRhZGF0YVJlcXVlc3QoKTtcbiAgICAgICAgbWVzc2FnZS5yb29tID0gKF9hID0gb2JqZWN0LnJvb20pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UubWV0YWRhdGEgPSAoX2IgPSBvYmplY3QubWV0YWRhdGEpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCI7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sXG59O1xudmFyIGdsb2JhbFRoaXMgPSAoKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gZ2xvYmFsVGhpcztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gZ2xvYmFsO1xuICAgIH1cbiAgICB0aHJvdyBcIlVuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdFwiO1xufSkoKTtcbmZ1bmN0aW9uIGJ5dGVzRnJvbUJhc2U2NChiNjQpIHtcbiAgICBpZiAoZ2xvYmFsVGhpcy5CdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkuZnJvbShnbG9iYWxUaGlzLkJ1ZmZlci5mcm9tKGI2NCwgXCJiYXNlNjRcIikpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgYmluID0gZ2xvYmFsVGhpcy5hdG9iKGI2NCk7XG4gICAgICAgIGNvbnN0IGFyciA9IG5ldyBVaW50OEFycmF5KGJpbi5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgYXJyW2ldID0gYmluLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICB9XG59XG5mdW5jdGlvbiBiYXNlNjRGcm9tQnl0ZXMoYXJyKSB7XG4gICAgaWYgKGdsb2JhbFRoaXMuQnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWxUaGlzLkJ1ZmZlci5mcm9tKGFycikudG9TdHJpbmcoXCJiYXNlNjRcIik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBiaW4gPSBbXTtcbiAgICAgICAgYXJyLmZvckVhY2goKGJ5dGUpID0+IHtcbiAgICAgICAgICAgIGJpbi5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGdsb2JhbFRoaXMuYnRvYShiaW4uam9pbihcIlwiKSk7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNTZXQodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpdmVraXRfcm9vbS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_room.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_webhook.js":
/*!***********************************************************************!*\
  !*** ./node_modules/livekit-server-sdk/dist/proto/livekit_webhook.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.WebhookEvent = exports.protobufPackage = void 0;\n/* eslint-disable */\nconst long_1 = __importDefault(__webpack_require__(/*! long */ \"(action-browser)/./node_modules/long/umd/index.js\"));\nconst minimal_1 = __importDefault(__webpack_require__(/*! protobufjs/minimal */ \"(action-browser)/./node_modules/protobufjs/minimal.js\"));\nconst livekit_egress_1 = __webpack_require__(/*! ./livekit_egress */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_egress.js\");\nconst livekit_ingress_1 = __webpack_require__(/*! ./livekit_ingress */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_ingress.js\");\nconst livekit_models_1 = __webpack_require__(/*! ./livekit_models */ \"(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_models.js\");\nexports.protobufPackage = \"livekit\";\nfunction createBaseWebhookEvent() {\n    return {\n        event: \"\",\n        room: undefined,\n        participant: undefined,\n        egressInfo: undefined,\n        ingressInfo: undefined,\n        track: undefined,\n        id: \"\",\n        createdAt: 0,\n        numDropped: 0,\n    };\n}\nexports.WebhookEvent = {\n    encode(message, writer = minimal_1.default.Writer.create()) {\n        if (message.event !== undefined && message.event !== \"\") {\n            writer.uint32(10).string(message.event);\n        }\n        if (message.room !== undefined) {\n            livekit_models_1.Room.encode(message.room, writer.uint32(18).fork()).ldelim();\n        }\n        if (message.participant !== undefined) {\n            livekit_models_1.ParticipantInfo.encode(message.participant, writer.uint32(26).fork()).ldelim();\n        }\n        if (message.egressInfo !== undefined) {\n            livekit_egress_1.EgressInfo.encode(message.egressInfo, writer.uint32(74).fork()).ldelim();\n        }\n        if (message.ingressInfo !== undefined) {\n            livekit_ingress_1.IngressInfo.encode(message.ingressInfo, writer.uint32(82).fork()).ldelim();\n        }\n        if (message.track !== undefined) {\n            livekit_models_1.TrackInfo.encode(message.track, writer.uint32(66).fork()).ldelim();\n        }\n        if (message.id !== undefined && message.id !== \"\") {\n            writer.uint32(50).string(message.id);\n        }\n        if (message.createdAt !== undefined && message.createdAt !== 0) {\n            writer.uint32(56).int64(message.createdAt);\n        }\n        if (message.numDropped !== undefined && message.numDropped !== 0) {\n            writer.uint32(88).int32(message.numDropped);\n        }\n        return writer;\n    },\n    decode(input, length) {\n        const reader = input instanceof minimal_1.default.Reader ? input : new minimal_1.default.Reader(input);\n        let end = length === undefined ? reader.len : reader.pos + length;\n        const message = createBaseWebhookEvent();\n        while (reader.pos < end) {\n            const tag = reader.uint32();\n            switch (tag >>> 3) {\n                case 1:\n                    message.event = reader.string();\n                    break;\n                case 2:\n                    message.room = livekit_models_1.Room.decode(reader, reader.uint32());\n                    break;\n                case 3:\n                    message.participant = livekit_models_1.ParticipantInfo.decode(reader, reader.uint32());\n                    break;\n                case 9:\n                    message.egressInfo = livekit_egress_1.EgressInfo.decode(reader, reader.uint32());\n                    break;\n                case 10:\n                    message.ingressInfo = livekit_ingress_1.IngressInfo.decode(reader, reader.uint32());\n                    break;\n                case 8:\n                    message.track = livekit_models_1.TrackInfo.decode(reader, reader.uint32());\n                    break;\n                case 6:\n                    message.id = reader.string();\n                    break;\n                case 7:\n                    message.createdAt = longToNumber(reader.int64());\n                    break;\n                case 11:\n                    message.numDropped = reader.int32();\n                    break;\n                default:\n                    reader.skipType(tag & 7);\n                    break;\n            }\n        }\n        return message;\n    },\n    fromJSON(object) {\n        return {\n            event: isSet(object.event) ? String(object.event) : \"\",\n            room: isSet(object.room) ? livekit_models_1.Room.fromJSON(object.room) : undefined,\n            participant: isSet(object.participant) ? livekit_models_1.ParticipantInfo.fromJSON(object.participant) : undefined,\n            egressInfo: isSet(object.egressInfo) ? livekit_egress_1.EgressInfo.fromJSON(object.egressInfo) : undefined,\n            ingressInfo: isSet(object.ingressInfo) ? livekit_ingress_1.IngressInfo.fromJSON(object.ingressInfo) : undefined,\n            track: isSet(object.track) ? livekit_models_1.TrackInfo.fromJSON(object.track) : undefined,\n            id: isSet(object.id) ? String(object.id) : \"\",\n            createdAt: isSet(object.createdAt) ? Number(object.createdAt) : 0,\n            numDropped: isSet(object.numDropped) ? Number(object.numDropped) : 0,\n        };\n    },\n    toJSON(message) {\n        const obj = {};\n        message.event !== undefined && (obj.event = message.event);\n        message.room !== undefined && (obj.room = message.room ? livekit_models_1.Room.toJSON(message.room) : undefined);\n        message.participant !== undefined &&\n            (obj.participant = message.participant ? livekit_models_1.ParticipantInfo.toJSON(message.participant) : undefined);\n        message.egressInfo !== undefined &&\n            (obj.egressInfo = message.egressInfo ? livekit_egress_1.EgressInfo.toJSON(message.egressInfo) : undefined);\n        message.ingressInfo !== undefined &&\n            (obj.ingressInfo = message.ingressInfo ? livekit_ingress_1.IngressInfo.toJSON(message.ingressInfo) : undefined);\n        message.track !== undefined && (obj.track = message.track ? livekit_models_1.TrackInfo.toJSON(message.track) : undefined);\n        message.id !== undefined && (obj.id = message.id);\n        message.createdAt !== undefined && (obj.createdAt = Math.round(message.createdAt));\n        message.numDropped !== undefined && (obj.numDropped = Math.round(message.numDropped));\n        return obj;\n    },\n    fromPartial(object) {\n        var _a, _b, _c, _d;\n        const message = createBaseWebhookEvent();\n        message.event = (_a = object.event) !== null && _a !== void 0 ? _a : \"\";\n        message.room = (object.room !== undefined && object.room !== null) ? livekit_models_1.Room.fromPartial(object.room) : undefined;\n        message.participant = (object.participant !== undefined && object.participant !== null)\n            ? livekit_models_1.ParticipantInfo.fromPartial(object.participant)\n            : undefined;\n        message.egressInfo = (object.egressInfo !== undefined && object.egressInfo !== null)\n            ? livekit_egress_1.EgressInfo.fromPartial(object.egressInfo)\n            : undefined;\n        message.ingressInfo = (object.ingressInfo !== undefined && object.ingressInfo !== null)\n            ? livekit_ingress_1.IngressInfo.fromPartial(object.ingressInfo)\n            : undefined;\n        message.track = (object.track !== undefined && object.track !== null)\n            ? livekit_models_1.TrackInfo.fromPartial(object.track)\n            : undefined;\n        message.id = (_b = object.id) !== null && _b !== void 0 ? _b : \"\";\n        message.createdAt = (_c = object.createdAt) !== null && _c !== void 0 ? _c : 0;\n        message.numDropped = (_d = object.numDropped) !== null && _d !== void 0 ? _d : 0;\n        return message;\n    },\n};\nvar globalThis = (() => {\n    if (typeof globalThis !== \"undefined\") {\n        return globalThis;\n    }\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    if (typeof window !== \"undefined\") {\n        return window;\n    }\n    if (typeof global !== \"undefined\") {\n        return global;\n    }\n    throw \"Unable to locate global object\";\n})();\nfunction longToNumber(long) {\n    if (long.gt(Number.MAX_SAFE_INTEGER)) {\n        throw new globalThis.Error(\"Value is larger than Number.MAX_SAFE_INTEGER\");\n    }\n    return long.toNumber();\n}\nif (minimal_1.default.util.Long !== long_1.default) {\n    minimal_1.default.util.Long = long_1.default;\n    minimal_1.default.configure();\n}\nfunction isSet(value) {\n    return value !== null && value !== undefined;\n}\n//# sourceMappingURL=livekit_webhook.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9saXZla2l0LXNlcnZlci1zZGsvZGlzdC9wcm90by9saXZla2l0X3dlYmhvb2suanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDZDQUE2QztBQUM3QztBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxvQkFBb0IsR0FBRyx1QkFBdUI7QUFDOUM7QUFDQSwrQkFBK0IsbUJBQU8sQ0FBQywrREFBTTtBQUM3QyxrQ0FBa0MsbUJBQU8sQ0FBQyxpRkFBb0I7QUFDOUQseUJBQXlCLG1CQUFPLENBQUMseUdBQWtCO0FBQ25ELDBCQUEwQixtQkFBTyxDQUFDLDJHQUFtQjtBQUNyRCx5QkFBeUIsbUJBQU8sQ0FBQyx5R0FBa0I7QUFDbkQsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saXZlc3RyZWFtLy4vbm9kZV9tb2R1bGVzL2xpdmVraXQtc2VydmVyLXNkay9kaXN0L3Byb3RvL2xpdmVraXRfd2ViaG9vay5qcz84ODQxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5XZWJob29rRXZlbnQgPSBleHBvcnRzLnByb3RvYnVmUGFja2FnZSA9IHZvaWQgMDtcbi8qIGVzbGludC1kaXNhYmxlICovXG5jb25zdCBsb25nXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImxvbmdcIikpO1xuY29uc3QgbWluaW1hbF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJwcm90b2J1ZmpzL21pbmltYWxcIikpO1xuY29uc3QgbGl2ZWtpdF9lZ3Jlc3NfMSA9IHJlcXVpcmUoXCIuL2xpdmVraXRfZWdyZXNzXCIpO1xuY29uc3QgbGl2ZWtpdF9pbmdyZXNzXzEgPSByZXF1aXJlKFwiLi9saXZla2l0X2luZ3Jlc3NcIik7XG5jb25zdCBsaXZla2l0X21vZGVsc18xID0gcmVxdWlyZShcIi4vbGl2ZWtpdF9tb2RlbHNcIik7XG5leHBvcnRzLnByb3RvYnVmUGFja2FnZSA9IFwibGl2ZWtpdFwiO1xuZnVuY3Rpb24gY3JlYXRlQmFzZVdlYmhvb2tFdmVudCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBldmVudDogXCJcIixcbiAgICAgICAgcm9vbTogdW5kZWZpbmVkLFxuICAgICAgICBwYXJ0aWNpcGFudDogdW5kZWZpbmVkLFxuICAgICAgICBlZ3Jlc3NJbmZvOiB1bmRlZmluZWQsXG4gICAgICAgIGluZ3Jlc3NJbmZvOiB1bmRlZmluZWQsXG4gICAgICAgIHRyYWNrOiB1bmRlZmluZWQsXG4gICAgICAgIGlkOiBcIlwiLFxuICAgICAgICBjcmVhdGVkQXQ6IDAsXG4gICAgICAgIG51bURyb3BwZWQ6IDAsXG4gICAgfTtcbn1cbmV4cG9ydHMuV2ViaG9va0V2ZW50ID0ge1xuICAgIGVuY29kZShtZXNzYWdlLCB3cml0ZXIgPSBtaW5pbWFsXzEuZGVmYXVsdC5Xcml0ZXIuY3JlYXRlKCkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZXZlbnQgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLmV2ZW50ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDEwKS5zdHJpbmcobWVzc2FnZS5ldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2Uucm9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsaXZla2l0X21vZGVsc18xLlJvb20uZW5jb2RlKG1lc3NhZ2Uucm9vbSwgd3JpdGVyLnVpbnQzMigxOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5wYXJ0aWNpcGFudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsaXZla2l0X21vZGVsc18xLlBhcnRpY2lwYW50SW5mby5lbmNvZGUobWVzc2FnZS5wYXJ0aWNpcGFudCwgd3JpdGVyLnVpbnQzMigyNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZS5lZ3Jlc3NJbmZvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxpdmVraXRfZWdyZXNzXzEuRWdyZXNzSW5mby5lbmNvZGUobWVzc2FnZS5lZ3Jlc3NJbmZvLCB3cml0ZXIudWludDMyKDc0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmluZ3Jlc3NJbmZvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxpdmVraXRfaW5ncmVzc18xLkluZ3Jlc3NJbmZvLmVuY29kZShtZXNzYWdlLmluZ3Jlc3NJbmZvLCB3cml0ZXIudWludDMyKDgyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLnRyYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxpdmVraXRfbW9kZWxzXzEuVHJhY2tJbmZvLmVuY29kZShtZXNzYWdlLnRyYWNrLCB3cml0ZXIudWludDMyKDY2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmlkICE9PSB1bmRlZmluZWQgJiYgbWVzc2FnZS5pZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig1MCkuc3RyaW5nKG1lc3NhZ2UuaWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmNyZWF0ZWRBdCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UuY3JlYXRlZEF0ICE9PSAwKSB7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKDU2KS5pbnQ2NChtZXNzYWdlLmNyZWF0ZWRBdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lc3NhZ2UubnVtRHJvcHBlZCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UubnVtRHJvcHBlZCAhPT0gMCkge1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMig4OCkuaW50MzIobWVzc2FnZS5udW1Ecm9wcGVkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgIH0sXG4gICAgZGVjb2RlKGlucHV0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gaW5wdXQgaW5zdGFuY2VvZiBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIgPyBpbnB1dCA6IG5ldyBtaW5pbWFsXzEuZGVmYXVsdC5SZWFkZXIoaW5wdXQpO1xuICAgICAgICBsZXQgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNyZWF0ZUJhc2VXZWJob29rRXZlbnQoKTtcbiAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmV2ZW50ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9vbSA9IGxpdmVraXRfbW9kZWxzXzEuUm9vbS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnQgPSBsaXZla2l0X21vZGVsc18xLlBhcnRpY2lwYW50SW5mby5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZWdyZXNzSW5mbyA9IGxpdmVraXRfZWdyZXNzXzEuRWdyZXNzSW5mby5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmluZ3Jlc3NJbmZvID0gbGl2ZWtpdF9pbmdyZXNzXzEuSW5ncmVzc0luZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRyYWNrID0gbGl2ZWtpdF9tb2RlbHNfMS5UcmFja0luZm8uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY3JlYXRlZEF0ID0gbG9uZ1RvTnVtYmVyKHJlYWRlci5pbnQ2NCgpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5udW1Ecm9wcGVkID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICBmcm9tSlNPTihvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGV2ZW50OiBpc1NldChvYmplY3QuZXZlbnQpID8gU3RyaW5nKG9iamVjdC5ldmVudCkgOiBcIlwiLFxuICAgICAgICAgICAgcm9vbTogaXNTZXQob2JqZWN0LnJvb20pID8gbGl2ZWtpdF9tb2RlbHNfMS5Sb29tLmZyb21KU09OKG9iamVjdC5yb29tKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHBhcnRpY2lwYW50OiBpc1NldChvYmplY3QucGFydGljaXBhbnQpID8gbGl2ZWtpdF9tb2RlbHNfMS5QYXJ0aWNpcGFudEluZm8uZnJvbUpTT04ob2JqZWN0LnBhcnRpY2lwYW50KSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGVncmVzc0luZm86IGlzU2V0KG9iamVjdC5lZ3Jlc3NJbmZvKSA/IGxpdmVraXRfZWdyZXNzXzEuRWdyZXNzSW5mby5mcm9tSlNPTihvYmplY3QuZWdyZXNzSW5mbykgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBpbmdyZXNzSW5mbzogaXNTZXQob2JqZWN0LmluZ3Jlc3NJbmZvKSA/IGxpdmVraXRfaW5ncmVzc18xLkluZ3Jlc3NJbmZvLmZyb21KU09OKG9iamVjdC5pbmdyZXNzSW5mbykgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB0cmFjazogaXNTZXQob2JqZWN0LnRyYWNrKSA/IGxpdmVraXRfbW9kZWxzXzEuVHJhY2tJbmZvLmZyb21KU09OKG9iamVjdC50cmFjaykgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBpZDogaXNTZXQob2JqZWN0LmlkKSA/IFN0cmluZyhvYmplY3QuaWQpIDogXCJcIixcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogaXNTZXQob2JqZWN0LmNyZWF0ZWRBdCkgPyBOdW1iZXIob2JqZWN0LmNyZWF0ZWRBdCkgOiAwLFxuICAgICAgICAgICAgbnVtRHJvcHBlZDogaXNTZXQob2JqZWN0Lm51bURyb3BwZWQpID8gTnVtYmVyKG9iamVjdC5udW1Ecm9wcGVkKSA6IDAsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICB0b0pTT04obWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgbWVzc2FnZS5ldmVudCAhPT0gdW5kZWZpbmVkICYmIChvYmouZXZlbnQgPSBtZXNzYWdlLmV2ZW50KTtcbiAgICAgICAgbWVzc2FnZS5yb29tICE9PSB1bmRlZmluZWQgJiYgKG9iai5yb29tID0gbWVzc2FnZS5yb29tID8gbGl2ZWtpdF9tb2RlbHNfMS5Sb29tLnRvSlNPTihtZXNzYWdlLnJvb20pIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLnBhcnRpY2lwYW50ID0gbWVzc2FnZS5wYXJ0aWNpcGFudCA/IGxpdmVraXRfbW9kZWxzXzEuUGFydGljaXBhbnRJbmZvLnRvSlNPTihtZXNzYWdlLnBhcnRpY2lwYW50KSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIG1lc3NhZ2UuZWdyZXNzSW5mbyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAob2JqLmVncmVzc0luZm8gPSBtZXNzYWdlLmVncmVzc0luZm8gPyBsaXZla2l0X2VncmVzc18xLkVncmVzc0luZm8udG9KU09OKG1lc3NhZ2UuZWdyZXNzSW5mbykgOiB1bmRlZmluZWQpO1xuICAgICAgICBtZXNzYWdlLmluZ3Jlc3NJbmZvICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChvYmouaW5ncmVzc0luZm8gPSBtZXNzYWdlLmluZ3Jlc3NJbmZvID8gbGl2ZWtpdF9pbmdyZXNzXzEuSW5ncmVzc0luZm8udG9KU09OKG1lc3NhZ2UuaW5ncmVzc0luZm8pIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS50cmFjayAhPT0gdW5kZWZpbmVkICYmIChvYmoudHJhY2sgPSBtZXNzYWdlLnRyYWNrID8gbGl2ZWtpdF9tb2RlbHNfMS5UcmFja0luZm8udG9KU09OKG1lc3NhZ2UudHJhY2spIDogdW5kZWZpbmVkKTtcbiAgICAgICAgbWVzc2FnZS5pZCAhPT0gdW5kZWZpbmVkICYmIChvYmouaWQgPSBtZXNzYWdlLmlkKTtcbiAgICAgICAgbWVzc2FnZS5jcmVhdGVkQXQgIT09IHVuZGVmaW5lZCAmJiAob2JqLmNyZWF0ZWRBdCA9IE1hdGgucm91bmQobWVzc2FnZS5jcmVhdGVkQXQpKTtcbiAgICAgICAgbWVzc2FnZS5udW1Ecm9wcGVkICE9PSB1bmRlZmluZWQgJiYgKG9iai5udW1Ecm9wcGVkID0gTWF0aC5yb3VuZChtZXNzYWdlLm51bURyb3BwZWQpKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIGZyb21QYXJ0aWFsKG9iamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjcmVhdGVCYXNlV2ViaG9va0V2ZW50KCk7XG4gICAgICAgIG1lc3NhZ2UuZXZlbnQgPSAoX2EgPSBvYmplY3QuZXZlbnQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2Uucm9vbSA9IChvYmplY3Qucm9vbSAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5yb29tICE9PSBudWxsKSA/IGxpdmVraXRfbW9kZWxzXzEuUm9vbS5mcm9tUGFydGlhbChvYmplY3Qucm9vbSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnQgPSAob2JqZWN0LnBhcnRpY2lwYW50ICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnBhcnRpY2lwYW50ICE9PSBudWxsKVxuICAgICAgICAgICAgPyBsaXZla2l0X21vZGVsc18xLlBhcnRpY2lwYW50SW5mby5mcm9tUGFydGlhbChvYmplY3QucGFydGljaXBhbnQpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5lZ3Jlc3NJbmZvID0gKG9iamVjdC5lZ3Jlc3NJbmZvICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LmVncmVzc0luZm8gIT09IG51bGwpXG4gICAgICAgICAgICA/IGxpdmVraXRfZWdyZXNzXzEuRWdyZXNzSW5mby5mcm9tUGFydGlhbChvYmplY3QuZWdyZXNzSW5mbylcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBtZXNzYWdlLmluZ3Jlc3NJbmZvID0gKG9iamVjdC5pbmdyZXNzSW5mbyAhPT0gdW5kZWZpbmVkICYmIG9iamVjdC5pbmdyZXNzSW5mbyAhPT0gbnVsbClcbiAgICAgICAgICAgID8gbGl2ZWtpdF9pbmdyZXNzXzEuSW5ncmVzc0luZm8uZnJvbVBhcnRpYWwob2JqZWN0LmluZ3Jlc3NJbmZvKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIG1lc3NhZ2UudHJhY2sgPSAob2JqZWN0LnRyYWNrICE9PSB1bmRlZmluZWQgJiYgb2JqZWN0LnRyYWNrICE9PSBudWxsKVxuICAgICAgICAgICAgPyBsaXZla2l0X21vZGVsc18xLlRyYWNrSW5mby5mcm9tUGFydGlhbChvYmplY3QudHJhY2spXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWVzc2FnZS5pZCA9IChfYiA9IG9iamVjdC5pZCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIjtcbiAgICAgICAgbWVzc2FnZS5jcmVhdGVkQXQgPSAoX2MgPSBvYmplY3QuY3JlYXRlZEF0KSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAwO1xuICAgICAgICBtZXNzYWdlLm51bURyb3BwZWQgPSAoX2QgPSBvYmplY3QubnVtRHJvcHBlZCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogMDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbn07XG52YXIgZ2xvYmFsVGhpcyA9ICgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWxUaGlzO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWw7XG4gICAgfVxuICAgIHRocm93IFwiVW5hYmxlIHRvIGxvY2F0ZSBnbG9iYWwgb2JqZWN0XCI7XG59KSgpO1xuZnVuY3Rpb24gbG9uZ1RvTnVtYmVyKGxvbmcpIHtcbiAgICBpZiAobG9uZy5ndChOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikpIHtcbiAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXCJWYWx1ZSBpcyBsYXJnZXIgdGhhbiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGxvbmcudG9OdW1iZXIoKTtcbn1cbmlmIChtaW5pbWFsXzEuZGVmYXVsdC51dGlsLkxvbmcgIT09IGxvbmdfMS5kZWZhdWx0KSB7XG4gICAgbWluaW1hbF8xLmRlZmF1bHQudXRpbC5Mb25nID0gbG9uZ18xLmRlZmF1bHQ7XG4gICAgbWluaW1hbF8xLmRlZmF1bHQuY29uZmlndXJlKCk7XG59XG5mdW5jdGlvbiBpc1NldCh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGl2ZWtpdF93ZWJob29rLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/livekit-server-sdk/dist/proto/livekit_webhook.js\n");

/***/ })

};
;